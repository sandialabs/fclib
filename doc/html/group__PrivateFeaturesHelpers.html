<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>FCLib: Helpers (not available outside this module)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Helpers (not available outside this module)<br>
<small>
[<a class="el" href="group__Features.html">Features</a>]</small>
</h1>
<p>
<div class="dynheader">
Collaboration diagram for Helpers (not available outside this module):</div>
<div class="dynsection">
<center><table><tr><td><img src="group__PrivateFeaturesHelpers.gif" border="0" alt="" usemap="#group____PrivateFeaturesHelpers_map">
<map name="group____PrivateFeaturesHelpers_map">
<area shape="rect" href="group__Features.html" title="Basic feature data structures and routines for manipulating them." alt="" coords="5,5,88,32"></map></td></tr></table></center>
</div>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFeaturesHelpers.html#g36d0d74ed66b6d317da1b9fba002540e">_fc_featureGroup_addFeature</a> (<a class="el" href="structFC__FeatureGroup.html">FC_FeatureGroup</a> *group, <a class="el" href="struct__FC__Feature.html">_FC_Feature</a> *feature)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helper routine to add a feature to the feature group.  <a href="#g36d0d74ed66b6d317da1b9fba002540e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFeaturesHelpers.html#g61a36735f1e4809365a460b0196a1c35">_fc_featureGroup_addROI</a> (<a class="el" href="structFC__FeatureGroup.html">FC_FeatureGroup</a> *group, int featureID, int stepID, <a class="el" href="structFC__Subset.html">FC_Subset</a> roi, int *roiID)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helper routine to Add an ROI to the feature group.  <a href="#g61a36735f1e4809365a460b0196a1c35"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFeaturesHelpers.html#g8fe373effd5eb4b842bed88b0d33cff3">_fc_writeFeatureGroup</a> (<a class="el" href="structFC__FeatureGroup.html">FC_FeatureGroup</a> *group, FILE *file)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print the contents of a feature group.  <a href="#g8fe373effd5eb4b842bed88b0d33cff3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFeaturesHelpers.html#gf216c7b4bbe7318385013326173efc66">_fc_writeFeatureGraph</a> (<a class="el" href="structFC__FeatureGroup.html">FC_FeatureGroup</a> *group, FILE *file)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a feature graph to a file.  <a href="#gf216c7b4bbe7318385013326173efc66"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g36d0d74ed66b6d317da1b9fba002540e"></a><!-- doxytag: member="feature.c::_fc_featureGroup_addFeature" ref="g36d0d74ed66b6d317da1b9fba002540e" args="(FC_FeatureGroup *group, _FC_Feature *feature)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> _fc_featureGroup_addFeature           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__FeatureGroup.html">FC_FeatureGroup</a> *&nbsp;</td>
          <td class="paramname"> <em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__FC__Feature.html">_FC_Feature</a> *&nbsp;</td>
          <td class="paramname"> <em>feature</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Helper routine to add a feature to the feature group. 
<p>
<b>Description:</b> <p>
Adds a feature to the feature Group. Helper routine to extend the internal structures of the group. It assigns the feature an ID and adds the feature to both the features array. The feature group now has ownership of the passed in feature.<p>
<b>Modifications:</b> <ul>
<li>MAR-20-2003 W Koegler Created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>group</em>&nbsp;</td><td>
input - pointer to feature group </td></tr>
<tr><td valign="top"><em>feature</em>&nbsp;</td><td>
input - pointer to a feature </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="feature_8c-source.html#l01447">1447</a> of file <a class="el" href="feature_8c-source.html">feature.c</a>.</p>

<p>References <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="feature_8h-source.html#l00107">FC_FeatureGroup::features</a>, <a class="el" href="feature_8h-source.html#l00068">_FC_Feature::id</a>, and <a class="el" href="feature_8h-source.html#l00106">FC_FeatureGroup::numFeature</a>.</p>

<p>Referenced by <a class="el" href="feature_8c-source.html#l00243">fc_featureGroup_newFeature()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01450"></a>01450   {
<a name="l01451"></a>01451   <span class="keywordtype">int</span> numFeature;
<a name="l01452"></a>01452   <a class="code" href="struct__FC__Feature.html" title="Feature object.">_FC_Feature</a>** temp_features;
<a name="l01453"></a>01453 
<a name="l01454"></a>01454   <span class="comment">// check input</span>
<a name="l01455"></a>01455   <span class="keywordflow">if</span> (!group || !feature)  {
<a name="l01456"></a>01456     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01457"></a>01457     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01458"></a>01458   }
<a name="l01459"></a>01459 
<a name="l01460"></a>01460   <span class="comment">// log message</span>
<a name="l01461"></a>01461   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Adding feature to a feature group."</span>); 
<a name="l01462"></a>01462       
<a name="l01463"></a>01463   <span class="comment">// check feature group state // FIX?</span>
<a name="l01464"></a>01464   numFeature = group-&gt;<a class="code" href="structFC__FeatureGroup.html#63582e6a2fe6c7c22e91f23dff78b41c">numFeature</a>;
<a name="l01465"></a>01465   <span class="keywordflow">if</span> (numFeature &lt; 0)
<a name="l01466"></a>01466     numFeature = 0;
<a name="l01467"></a>01467   
<a name="l01468"></a>01468   <span class="comment">// NOTE: finish setting up feature before touching feature groups' info</span>
<a name="l01469"></a>01469   <span class="comment">// (this also provides a check on the feature's fitness)</span>
<a name="l01470"></a>01470 
<a name="l01471"></a>01471   <span class="comment">// set feature ID</span>
<a name="l01472"></a>01472   feature-&gt;<a class="code" href="struct__FC__Feature.html#56db1044c84496fb35ec36e18b2f9873">id</a> = numFeature;
<a name="l01473"></a>01473 
<a name="l01474"></a>01474   <span class="comment">// extend features array</span>
<a name="l01475"></a>01475   <span class="keywordflow">if</span> (numFeature &gt; 0) {
<a name="l01476"></a>01476     temp_features = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct__FC__Feature.html" title="Feature object.">_FC_Feature</a>*) * (numFeature + 1));
<a name="l01477"></a>01477     <span class="keywordflow">if</span> (temp_features == NULL) {
<a name="l01478"></a>01478       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01479"></a>01479       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01480"></a>01480     } 
<a name="l01481"></a>01481     memcpy(temp_features, group-&gt;<a class="code" href="structFC__FeatureGroup.html#03c4024f072e0cf34b3b97693b5e5aca">features</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct__FC__Feature.html" title="Feature object.">_FC_Feature</a>*)*numFeature);
<a name="l01482"></a>01482     free(group-&gt;<a class="code" href="structFC__FeatureGroup.html#03c4024f072e0cf34b3b97693b5e5aca">features</a>);
<a name="l01483"></a>01483     group-&gt;<a class="code" href="structFC__FeatureGroup.html#03c4024f072e0cf34b3b97693b5e5aca">features</a> = temp_features;
<a name="l01484"></a>01484   }
<a name="l01485"></a>01485   <span class="keywordflow">else</span> 
<a name="l01486"></a>01486     group-&gt;<a class="code" href="structFC__FeatureGroup.html#03c4024f072e0cf34b3b97693b5e5aca">features</a> = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct__FC__Feature.html" title="Feature object.">_FC_Feature</a>*));
<a name="l01487"></a>01487     <span class="keywordflow">if</span> (group-&gt;<a class="code" href="structFC__FeatureGroup.html#03c4024f072e0cf34b3b97693b5e5aca">features</a> == NULL ) {
<a name="l01488"></a>01488       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01489"></a>01489       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01490"></a>01490     } 
<a name="l01491"></a>01491 
<a name="l01492"></a>01492   <span class="comment">// add feature to features array</span>
<a name="l01493"></a>01493   group-&gt;<a class="code" href="structFC__FeatureGroup.html#03c4024f072e0cf34b3b97693b5e5aca">features</a>[numFeature] = feature;
<a name="l01494"></a>01494   group-&gt;<a class="code" href="structFC__FeatureGroup.html#63582e6a2fe6c7c22e91f23dff78b41c">numFeature</a> = numFeature + 1;
<a name="l01495"></a>01495 
<a name="l01496"></a>01496   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01497"></a>01497 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g61a36735f1e4809365a460b0196a1c35"></a><!-- doxytag: member="feature.c::_fc_featureGroup_addROI" ref="g61a36735f1e4809365a460b0196a1c35" args="(FC_FeatureGroup *group, int featureID, int stepID, FC_Subset roi, int *roiID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> _fc_featureGroup_addROI           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__FeatureGroup.html">FC_FeatureGroup</a> *&nbsp;</td>
          <td class="paramname"> <em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>featureID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stepID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a>&nbsp;</td>
          <td class="paramname"> <em>roi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>roiID</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Helper routine to Add an ROI to the feature group. 
<p>
<b>Description:</b> <p>
Adds an ROI to the feature Group. Helper routine to extend the internal structures of the group. It uses the ROI's stepID to place it in the group's structures and sets its roiID. It also requires an argument specifying the id of the owning feature. The feature group now has ownership of the passed in ROI.<p>
<b>Modifications:</b> <ul>
<li>MAR-19-2003 W Koegler Created </li></ul>

<p>
fc_isSubsetValid(roi) || <dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>group</em>&nbsp;</td><td>
input - pointer to feature group </td></tr>
<tr><td valign="top"><em>featureID</em>&nbsp;</td><td>
input - the ID of the feature that owns ROI </td></tr>
<tr><td valign="top"><em>stepID</em>&nbsp;</td><td>
input - the stepID of the ROI </td></tr>
<tr><td valign="top"><em>roi</em>&nbsp;</td><td>
input - the ROI </td></tr>
<tr><td valign="top"><em>roiID</em>&nbsp;</td><td>
output - the ID of the roi within the step on the group </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="feature_8c-source.html#l01515">1515</a> of file <a class="el" href="feature_8c-source.html">feature.c</a>.</p>

<p>References <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="feature_8h-source.html#l00100">FC_FeatureGroup::numROIperStep</a>, <a class="el" href="feature_8h-source.html#l00099">FC_FeatureGroup::numStep</a>, <a class="el" href="feature_8h-source.html#l00103">FC_FeatureGroup::roiFeatureIDs</a>, and <a class="el" href="feature_8h-source.html#l00101">FC_FeatureGroup::rois</a>.</p>

<p>Referenced by <a class="el" href="feature_8c-source.html#l00344">fc_featureGroup_continueFeature()</a>, and <a class="el" href="feature_8c-source.html#l00243">fc_featureGroup_newFeature()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01522"></a>01522   {
<a name="l01523"></a>01523   <span class="keywordtype">int</span> i;
<a name="l01524"></a>01524   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>** temp_rois;
<a name="l01525"></a>01525   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>* temp_step_rois;
<a name="l01526"></a>01526   <span class="keywordtype">int</span> numROI;
<a name="l01527"></a>01527   <span class="keywordtype">int</span> new_numStep;
<a name="l01528"></a>01528   <span class="keywordtype">int</span>* temp_numROIperStep;
<a name="l01529"></a>01529   <span class="keywordtype">int</span>** temp_roiFeatureIDs;
<a name="l01530"></a>01530   <span class="keywordtype">int</span>* temp_step_roiFeatureIDs;
<a name="l01531"></a>01531 
<a name="l01532"></a>01532   <span class="comment">// default output</span>
<a name="l01533"></a>01533   <span class="keywordflow">if</span> (roiID)
<a name="l01534"></a>01534     *roiID = -1;
<a name="l01535"></a>01535 
<a name="l01536"></a>01536   <span class="comment">// check input</span>
<a name="l01537"></a>01537   <span class="keywordflow">if</span> (!group || featureID &lt; 0 || stepID &lt; 0 || <span class="comment">/*!fc_isSubsetValid(roi) ||*/</span> 
<a name="l01538"></a>01538       !roiID)  {
<a name="l01539"></a>01539     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01540"></a>01540     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01541"></a>01541   }
<a name="l01542"></a>01542   
<a name="l01543"></a>01543   <span class="comment">// log message</span>
<a name="l01544"></a>01544   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Adding ROI a feature group."</span>);
<a name="l01545"></a>01545   
<a name="l01546"></a>01546   <span class="comment">// NOTE: finish setting up ROI before touching feature groups' info</span>
<a name="l01547"></a>01547   <span class="comment">// (this also provides a check on the ROI's fitness)</span>
<a name="l01548"></a>01548 
<a name="l01549"></a>01549   <span class="comment">// get next roi ID </span>
<a name="l01550"></a>01550   <span class="keywordflow">if</span> (stepID &lt; group-&gt;numStep)
<a name="l01551"></a>01551     *roiID = group-&gt;<a class="code" href="structFC__FeatureGroup.html#6590b2a40f31ca2be8cae88bbdfdbb01">numROIperStep</a>[stepID];
<a name="l01552"></a>01552   <span class="keywordflow">else</span>
<a name="l01553"></a>01553     *roiID = 0; <span class="comment">// first in the next step</span>
<a name="l01554"></a>01554   
<a name="l01555"></a>01555   <span class="comment">// if needed, extend numROI &amp; outer level of roiFeatureIDs &amp; rois (over steps)</span>
<a name="l01556"></a>01556   <span class="keywordflow">if</span> (stepID &gt;= group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>) {
<a name="l01557"></a>01557     new_numStep = stepID + 1;
<a name="l01558"></a>01558     <span class="comment">// allocate arrays</span>
<a name="l01559"></a>01559     temp_numROIperStep = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*new_numStep);
<a name="l01560"></a>01560     temp_roiFeatureIDs = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*)*new_numStep);
<a name="l01561"></a>01561     temp_rois = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>*)*new_numStep);
<a name="l01562"></a>01562     <span class="keywordflow">if</span> (temp_numROIperStep == NULL || temp_rois == NULL || 
<a name="l01563"></a>01563         temp_roiFeatureIDs == NULL ) {
<a name="l01564"></a>01564       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01565"></a>01565       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01566"></a>01566     } 
<a name="l01567"></a>01567     <span class="comment">// copy existing values</span>
<a name="l01568"></a>01568     memcpy(temp_numROIperStep, group-&gt;<a class="code" href="structFC__FeatureGroup.html#6590b2a40f31ca2be8cae88bbdfdbb01">numROIperStep</a>, 
<a name="l01569"></a>01569            <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>);
<a name="l01570"></a>01570     memcpy(temp_roiFeatureIDs, group-&gt;<a class="code" href="structFC__FeatureGroup.html#4bd1146be882c7ac0f00a10f90edcc49">roiFeatureIDs</a>, 
<a name="l01571"></a>01571            <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*)*group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>);
<a name="l01572"></a>01572     memcpy(temp_rois, group-&gt;<a class="code" href="structFC__FeatureGroup.html#1656ef484fc85dfe240b0c467410a6fa">rois</a>, <span class="keyword">sizeof</span>(<a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>*)*group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>);
<a name="l01573"></a>01573     <span class="comment">// initialize new values</span>
<a name="l01574"></a>01574     <span class="keywordflow">for</span> (i = group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>; i &lt; new_numStep; i++) {
<a name="l01575"></a>01575       temp_numROIperStep[i] = 0;
<a name="l01576"></a>01576       temp_roiFeatureIDs[i] = NULL;
<a name="l01577"></a>01577       temp_rois[i] = NULL;
<a name="l01578"></a>01578     }
<a name="l01579"></a>01579     <span class="comment">// swap pointers</span>
<a name="l01580"></a>01580     free(group-&gt;<a class="code" href="structFC__FeatureGroup.html#6590b2a40f31ca2be8cae88bbdfdbb01">numROIperStep</a>);
<a name="l01581"></a>01581     group-&gt;<a class="code" href="structFC__FeatureGroup.html#6590b2a40f31ca2be8cae88bbdfdbb01">numROIperStep</a> = temp_numROIperStep;
<a name="l01582"></a>01582     free(group-&gt;<a class="code" href="structFC__FeatureGroup.html#4bd1146be882c7ac0f00a10f90edcc49">roiFeatureIDs</a>);
<a name="l01583"></a>01583     group-&gt;<a class="code" href="structFC__FeatureGroup.html#4bd1146be882c7ac0f00a10f90edcc49">roiFeatureIDs</a> = temp_roiFeatureIDs;
<a name="l01584"></a>01584     free(group-&gt;<a class="code" href="structFC__FeatureGroup.html#1656ef484fc85dfe240b0c467410a6fa">rois</a>);
<a name="l01585"></a>01585     group-&gt;<a class="code" href="structFC__FeatureGroup.html#1656ef484fc85dfe240b0c467410a6fa">rois</a> = temp_rois;
<a name="l01586"></a>01586     <span class="comment">// set numStep</span>
<a name="l01587"></a>01587     group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a> = new_numStep;
<a name="l01588"></a>01588   }
<a name="l01589"></a>01589 
<a name="l01590"></a>01590   <span class="comment">// extend the inner roiFeatureIDs and rois arrays for this specific step</span>
<a name="l01591"></a>01591   numROI = group-&gt;<a class="code" href="structFC__FeatureGroup.html#6590b2a40f31ca2be8cae88bbdfdbb01">numROIperStep</a>[stepID];
<a name="l01592"></a>01592   <span class="keywordflow">if</span> (numROI &lt; 1) {
<a name="l01593"></a>01593     group-&gt;<a class="code" href="structFC__FeatureGroup.html#4bd1146be882c7ac0f00a10f90edcc49">roiFeatureIDs</a>[stepID] = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01594"></a>01594     group-&gt;<a class="code" href="structFC__FeatureGroup.html#1656ef484fc85dfe240b0c467410a6fa">rois</a>[stepID] = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>));
<a name="l01595"></a>01595     <span class="keywordflow">if</span> (group-&gt;<a class="code" href="structFC__FeatureGroup.html#4bd1146be882c7ac0f00a10f90edcc49">roiFeatureIDs</a>[stepID] == NULL || group-&gt;<a class="code" href="structFC__FeatureGroup.html#1656ef484fc85dfe240b0c467410a6fa">rois</a>[stepID] == NULL) {
<a name="l01596"></a>01596       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01597"></a>01597       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01598"></a>01598     } 
<a name="l01599"></a>01599   }
<a name="l01600"></a>01600   <span class="keywordflow">else</span> {
<a name="l01601"></a>01601     temp_step_roiFeatureIDs = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*(numROI+1));
<a name="l01602"></a>01602     temp_step_rois = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>)*(numROI+1));
<a name="l01603"></a>01603     <span class="keywordflow">if</span> (temp_step_roiFeatureIDs == NULL || temp_step_rois == NULL) {
<a name="l01604"></a>01604       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01605"></a>01605       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01606"></a>01606     } 
<a name="l01607"></a>01607     memcpy(temp_step_roiFeatureIDs, group-&gt;<a class="code" href="structFC__FeatureGroup.html#4bd1146be882c7ac0f00a10f90edcc49">roiFeatureIDs</a>[stepID], 
<a name="l01608"></a>01608            <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*numROI);
<a name="l01609"></a>01609     <span class="keywordflow">for</span> (i = 0; i &lt; numROI; i++) 
<a name="l01610"></a>01610       temp_step_rois[i] = group-&gt;<a class="code" href="structFC__FeatureGroup.html#1656ef484fc85dfe240b0c467410a6fa">rois</a>[stepID][i];
<a name="l01611"></a>01611     free(group-&gt;<a class="code" href="structFC__FeatureGroup.html#4bd1146be882c7ac0f00a10f90edcc49">roiFeatureIDs</a>[stepID]);
<a name="l01612"></a>01612     group-&gt;<a class="code" href="structFC__FeatureGroup.html#4bd1146be882c7ac0f00a10f90edcc49">roiFeatureIDs</a>[stepID] = temp_step_roiFeatureIDs;
<a name="l01613"></a>01613     free(group-&gt;<a class="code" href="structFC__FeatureGroup.html#1656ef484fc85dfe240b0c467410a6fa">rois</a>[stepID]);
<a name="l01614"></a>01614     group-&gt;<a class="code" href="structFC__FeatureGroup.html#1656ef484fc85dfe240b0c467410a6fa">rois</a>[stepID] = temp_step_rois;
<a name="l01615"></a>01615   }
<a name="l01616"></a>01616   
<a name="l01617"></a>01617   <span class="comment">// add the new roi</span>
<a name="l01618"></a>01618   <span class="comment">// FIX the featureID will be added when it is assigned</span>
<a name="l01619"></a>01619   group-&gt;<a class="code" href="structFC__FeatureGroup.html#4bd1146be882c7ac0f00a10f90edcc49">roiFeatureIDs</a>[stepID][numROI] = featureID;
<a name="l01620"></a>01620   group-&gt;<a class="code" href="structFC__FeatureGroup.html#1656ef484fc85dfe240b0c467410a6fa">rois</a>[stepID][numROI] = roi;
<a name="l01621"></a>01621   group-&gt;<a class="code" href="structFC__FeatureGroup.html#6590b2a40f31ca2be8cae88bbdfdbb01">numROIperStep</a>[stepID]++;
<a name="l01622"></a>01622 
<a name="l01623"></a>01623   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01624"></a>01624 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gf216c7b4bbe7318385013326173efc66"></a><!-- doxytag: member="feature.c::_fc_writeFeatureGraph" ref="gf216c7b4bbe7318385013326173efc66" args="(FC_FeatureGroup *group, FILE *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> _fc_writeFeatureGraph           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__FeatureGroup.html">FC_FeatureGroup</a> *&nbsp;</td>
          <td class="paramname"> <em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write a feature graph to a file. 
<p>
<b>Description:</b> <p>
Prints code that the program 'dot' in ATT&amp;T's graphviz package can convert to a pretty picture of the graph of the features.<p>
<b>Modifications:</b> <ul>
<li>APR-01-2003 W Koegler Created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>group</em>&nbsp;</td><td>
input - pointer to the feature group </td></tr>
<tr><td valign="top"><em>file</em>&nbsp;</td><td>
input - pointer to the file </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="feature_8c-source.html#l01820">1820</a> of file <a class="el" href="feature_8c-source.html">feature.c</a>.</p>

<p>References <a class="el" href="feature_8h-source.html#l00077">_FC_Feature::childIDs</a>, <a class="el" href="feature_8c-source.html#l00478">fc_featureGroup_getNumFeature()</a>, <a class="el" href="base_8h-source.html#l00108">FC_FILE_IO_ERROR</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="feature_8h-source.html#l00107">FC_FeatureGroup::features</a>, <a class="el" href="feature_8h-source.html#l00076">_FC_Feature::numChild</a>, <a class="el" href="feature_8h-source.html#l00106">FC_FeatureGroup::numFeature</a>, <a class="el" href="feature_8h-source.html#l00074">_FC_Feature::numParent</a>, <a class="el" href="feature_8h-source.html#l00069">_FC_Feature::numROI</a>, <a class="el" href="feature_8h-source.html#l00099">FC_FeatureGroup::numStep</a>, and <a class="el" href="feature_8h-source.html#l00071">_FC_Feature::stepIDs</a>.</p>

<p>Referenced by <a class="el" href="feature_8c-source.html#l01117">fc_printFeatureGraph()</a>, and <a class="el" href="feature_8c-source.html#l01145">fc_writeFeatureGraph()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01823"></a>01823   {
<a name="l01824"></a>01824   <span class="keywordtype">int</span> i, j;
<a name="l01825"></a>01825   <span class="keywordtype">int</span> numFeature;
<a name="l01826"></a>01826   <span class="keywordtype">char</span> name[1024];
<a name="l01827"></a>01827   <span class="keywordtype">char</span> endName[1024];
<a name="l01828"></a>01828   <span class="keywordtype">char</span> childName[1024];
<a name="l01829"></a>01829   <span class="keywordtype">char</span>** stepNames;
<a name="l01830"></a>01830   <a class="code" href="struct__FC__Feature.html" title="Feature object.">_FC_Feature</a>* feature;
<a name="l01831"></a>01831 
<a name="l01832"></a>01832   <span class="comment">// check input (group already checked?)</span>
<a name="l01833"></a>01833   <span class="keywordflow">if</span> (!group || !file) {
<a name="l01834"></a>01834     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01835"></a>01835     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01836"></a>01836   }
<a name="l01837"></a>01837   <a class="code" href="group__Features.html#gc8999b4dde0ae7507582e6f0b650c6ac" title="Get the number of Features in the Feature Group.">fc_featureGroup_getNumFeature</a>(group, &amp;numFeature);
<a name="l01838"></a>01838   <span class="keywordflow">if</span> (numFeature &lt; 1) {
<a name="l01839"></a>01839     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot write graph of empty feature group"</span>);
<a name="l01840"></a>01840     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01841"></a>01841   }
<a name="l01842"></a>01842 
<a name="l01843"></a>01843   <span class="comment">// log message</span>
<a name="l01844"></a>01844   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Writing feature graph to a file."</span>);  
<a name="l01845"></a>01845 
<a name="l01846"></a>01846   <span class="comment">// NOTE: lots of things must be enclosed in quotes so there are</span>
<a name="l01847"></a>01847   <span class="comment">//       lots of  \" 's, yuck!</span>
<a name="l01848"></a>01848 
<a name="l01849"></a>01849   <span class="comment">//---start graph</span>
<a name="l01850"></a>01850   <span class="comment">// try the first one, if ok assume the rest will be ok</span>
<a name="l01851"></a>01851   fprintf(file, <span class="stringliteral">"digraph G {\n"</span>);
<a name="l01852"></a>01852   <span class="keywordflow">if</span> (fprintf(file, <span class="stringliteral">"orientation = portrait;\n"</span>) &lt; 0)
<a name="l01853"></a>01853     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce406cfb6be2c486a7655cecdd3f5c02e44">FC_FILE_IO_ERROR</a>;
<a name="l01854"></a>01854   fprintf(file, <span class="stringliteral">"size = \"10,7.5\"; \n"</span>);
<a name="l01855"></a>01855   fprintf(file, <span class="stringliteral">"ranksep = \"0.25\"; \n"</span>);
<a name="l01856"></a>01856   fprintf(file, <span class="stringliteral">"node [height=0.25,width=0.25];\n"</span>);
<a name="l01857"></a>01857   fflush(NULL);
<a name="l01858"></a>01858 
<a name="l01859"></a>01859   <span class="comment">//---make step names</span>
<a name="l01860"></a>01860   stepNames = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*)*group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>);
<a name="l01861"></a>01861   <span class="keywordflow">if</span> (stepNames == NULL ) {
<a name="l01862"></a>01862     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01863"></a>01863     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01864"></a>01864   } 
<a name="l01865"></a>01865   <span class="keywordflow">for</span> (i = 0; i &lt; group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>; i++) {
<a name="l01866"></a>01866     stepNames[i] = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)*1024);
<a name="l01867"></a>01867     <span class="keywordflow">if</span> (stepNames[i] == NULL ) {
<a name="l01868"></a>01868       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01869"></a>01869       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01870"></a>01870     } 
<a name="l01871"></a>01871     sprintf(stepNames[i], <span class="stringliteral">"T%d"</span>, i);
<a name="l01872"></a>01872   }
<a name="l01873"></a>01873 
<a name="l01874"></a>01874   <span class="comment">//---write time line graph</span>
<a name="l01875"></a>01875   fprintf(file, <span class="stringliteral">"\n"</span>);
<a name="l01876"></a>01876   fprintf(file, <span class="stringliteral">"{ node [shape=box]; \n"</span>);
<a name="l01877"></a>01877   fprintf(file, <span class="stringliteral">"\"%s\""</span>, stepNames[0]);
<a name="l01878"></a>01878   fflush(NULL);
<a name="l01879"></a>01879   <span class="keywordflow">for</span> (i = 1; i &lt; group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>; i++) {
<a name="l01880"></a>01880     fprintf(file, <span class="stringliteral">" -&gt; \"%s\""</span>, stepNames[i]);
<a name="l01881"></a>01881     fflush(NULL);
<a name="l01882"></a>01882   }
<a name="l01883"></a>01883   fprintf(file, <span class="stringliteral">" ; \n"</span>);
<a name="l01884"></a>01884   fprintf(file, <span class="stringliteral">"} \n\n"</span>);
<a name="l01885"></a>01885   fflush(NULL);
<a name="l01886"></a>01886 
<a name="l01887"></a>01887   <span class="comment">//---for each feature</span>
<a name="l01888"></a>01888   <span class="keywordflow">for</span> (i = 0; i &lt; group-&gt;<a class="code" href="structFC__FeatureGroup.html#63582e6a2fe6c7c22e91f23dff78b41c">numFeature</a>; i++) {
<a name="l01889"></a>01889     <span class="comment">// dereference feature once</span>
<a name="l01890"></a>01890     feature = group-&gt;<a class="code" href="structFC__FeatureGroup.html#03c4024f072e0cf34b3b97693b5e5aca">features</a>[i];
<a name="l01891"></a>01891 
<a name="l01892"></a>01892     <span class="comment">// default names</span>
<a name="l01893"></a>01893     sprintf(name, <span class="stringliteral">"%d"</span>, i);
<a name="l01894"></a>01894     sprintf(endName, <span class="stringliteral">"%s"</span>, name); <span class="comment">// same as name</span>
<a name="l01895"></a>01895     fflush(NULL);
<a name="l01896"></a>01896 
<a name="l01897"></a>01897     <span class="comment">//---if feature has no parent, distinguish it's node</span>
<a name="l01898"></a>01898     <span class="keywordflow">if</span> (feature-&gt;<a class="code" href="struct__FC__Feature.html#0f79a15475b5248a45530d4c0840ed9d">numParent</a> == 0)  
<a name="l01899"></a>01899       fprintf(file, <span class="stringliteral">"\"%s\" [style=filled,color=grey];\n"</span>, name);
<a name="l01900"></a>01900     
<a name="l01901"></a>01901     <span class="comment">//---set rank same as it's start step, will show up at same position </span>
<a name="l01902"></a>01902     fprintf(file, <span class="stringliteral">"{ rank = same; \"%s\" ; \"%s\" ; }\n"</span>, 
<a name="l01903"></a>01903            stepNames[feature-&gt;<a class="code" href="struct__FC__Feature.html#b337d291d84f933023237a32b733d68a">stepIDs</a>[0]], name);
<a name="l01904"></a>01904     
<a name="l01905"></a>01905     <span class="comment">//---if feature exists for more than 1 step, make an "end" node</span>
<a name="l01906"></a>01906     <span class="comment">//   and connect to start node</span>
<a name="l01907"></a>01907     <span class="keywordflow">if</span> (feature-&gt;<a class="code" href="struct__FC__Feature.html#e5748b5fdebb89a99258c4bbfc8ad6c7">numROI</a> &gt; 1) {
<a name="l01908"></a>01908       sprintf(endName, <span class="stringliteral">"%s_end"</span>, name);
<a name="l01909"></a>01909       <span class="comment">// label="" makes it not get a label (default label is node name)</span>
<a name="l01910"></a>01910       fprintf(file, <span class="stringliteral">"\"%s\" [label=\"\", style=filled,color=black,"</span>
<a name="l01911"></a>01911              <span class="stringliteral">"shape=diamond,height=0.2,width=0.2] ;\n"</span>, endName);
<a name="l01912"></a>01912       fprintf(file, <span class="stringliteral">"{ rank = same ; \"%s\"; \"%s\" ; }\n"</span>, 
<a name="l01913"></a>01913              stepNames[feature-&gt;<a class="code" href="struct__FC__Feature.html#b337d291d84f933023237a32b733d68a">stepIDs</a>[feature-&gt;<a class="code" href="struct__FC__Feature.html#e5748b5fdebb89a99258c4bbfc8ad6c7">numROI</a>-1]], endName);
<a name="l01914"></a>01914       fprintf(file, <span class="stringliteral">"\"%s\" -&gt; \"%s\"\n"</span>, name, endName);
<a name="l01915"></a>01915     }
<a name="l01916"></a>01916     fflush(NULL);
<a name="l01917"></a>01917 
<a name="l01918"></a>01918     <span class="comment">//---do child edges</span>
<a name="l01919"></a>01919     <span class="keywordflow">for</span> (j = 0; j &lt; feature-&gt;<a class="code" href="struct__FC__Feature.html#8a8ae1582865c98e2a8e931955162436">numChild</a>; j++) {
<a name="l01920"></a>01920       sprintf(childName, <span class="stringliteral">"%d"</span>, feature-&gt;<a class="code" href="struct__FC__Feature.html#39e1e9e4313b3b1ec5040e8922337ab0">childIDs</a>[j]);
<a name="l01921"></a>01921       fprintf(file, <span class="stringliteral">"\"%s\" -&gt; \"%s\"\n"</span>, endName, childName);
<a name="l01922"></a>01922       fflush(NULL);
<a name="l01923"></a>01923     }
<a name="l01924"></a>01924   }
<a name="l01925"></a>01925 
<a name="l01926"></a>01926   <span class="comment">// end of digraph;</span>
<a name="l01927"></a>01927   fprintf(file, <span class="stringliteral">"}\n"</span>);
<a name="l01928"></a>01928   fflush(NULL);
<a name="l01929"></a>01929 
<a name="l01930"></a>01930   <span class="comment">// free resources</span>
<a name="l01931"></a>01931   <span class="keywordflow">for</span> (i = 0; i &lt; group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>; i++)
<a name="l01932"></a>01932     free(stepNames[i]);
<a name="l01933"></a>01933   free(stepNames);
<a name="l01934"></a>01934 
<a name="l01935"></a>01935   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01936"></a>01936 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8fe373effd5eb4b842bed88b0d33cff3"></a><!-- doxytag: member="feature.c::_fc_writeFeatureGroup" ref="g8fe373effd5eb4b842bed88b0d33cff3" args="(FC_FeatureGroup *group, FILE *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> _fc_writeFeatureGroup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__FeatureGroup.html">FC_FeatureGroup</a> *&nbsp;</td>
          <td class="paramname"> <em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>file</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the contents of a feature group. 
<p>
<b>Description:</b> <p>
Helper routine writes features to the specified FILE Prints human readable information about the features in a featureGroup.<p>
<b>Modifications:</b> <ul>
<li>APR-01-2003 W Koegler Created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>group</em>&nbsp;</td><td>
input - pointer to the feature group </td></tr>
<tr><td valign="top"><em>file</em>&nbsp;</td><td>
input - pointer to the file </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="feature_8c-source.html#l01732">1732</a> of file <a class="el" href="feature_8c-source.html">feature.c</a>.</p>

<p>References <a class="el" href="base_8h-source.html#l00108">FC_FILE_IO_ERROR</a>, <a class="el" href="feature_8c-source.html#l00986">fc_getFeatureChildIDs()</a>, <a class="el" href="feature_8c-source.html#l00901">fc_getFeatureParentIDs()</a>, <a class="el" href="feature_8c-source.html#l00741">fc_getFeatureROIs()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="subset_8c-source.html#l02700">fc_getSubsetName()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="feature_8h-source.html#l00107">FC_FeatureGroup::features</a>, <a class="el" href="feature_8h-source.html#l00106">FC_FeatureGroup::numFeature</a>, <a class="el" href="feature_8h-source.html#l00069">_FC_Feature::numROI</a>, and <a class="el" href="feature_8h-source.html#l00099">FC_FeatureGroup::numStep</a>.</p>

<p>Referenced by <a class="el" href="feature_8c-source.html#l01044">fc_printFeatureGroup()</a>, and <a class="el" href="feature_8c-source.html#l01075">fc_writeFeatureGroup()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01735"></a>01735   {
<a name="l01736"></a>01736   <span class="keywordtype">int</span> i, j;
<a name="l01737"></a>01737   <span class="keywordtype">int</span> numParent, numChild, numROI, *parentIDs, *childIDs, *stepIDs;
<a name="l01738"></a>01738   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a> *ROIs;
<a name="l01739"></a>01739   <span class="keywordtype">char</span> *temp_name;
<a name="l01740"></a>01740 
<a name="l01741"></a>01741   <span class="keywordflow">if</span> (!group || !file) {
<a name="l01742"></a>01742     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01743"></a>01743     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01744"></a>01744   }  
<a name="l01745"></a>01745   
<a name="l01746"></a>01746   <span class="comment">// log message</span>
<a name="l01747"></a>01747   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Printing contents of a feature group."</span>);    
<a name="l01748"></a>01748 
<a name="l01749"></a>01749   <span class="comment">// try the first one, if ok assume the rest will be ok</span>
<a name="l01750"></a>01750   <span class="keywordflow">if</span> (fprintf(file, <span class="stringliteral">"Feature Group:\n"</span>) &lt; 0)
<a name="l01751"></a>01751     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce406cfb6be2c486a7655cecdd3f5c02e44">FC_FILE_IO_ERROR</a>;
<a name="l01752"></a>01752   fprintf(file, <span class="stringliteral">"    numStep = %d, numFeature = %d\n"</span>, group-&gt;<a class="code" href="structFC__FeatureGroup.html#255a909b2d0fe163ebacd9467586e0ba">numStep</a>,
<a name="l01753"></a>01753           group-&gt;<a class="code" href="structFC__FeatureGroup.html#63582e6a2fe6c7c22e91f23dff78b41c">numFeature</a>);
<a name="l01754"></a>01754   fprintf(file, <span class="stringliteral">"\n"</span>);
<a name="l01755"></a>01755   fflush(NULL);
<a name="l01756"></a>01756 
<a name="l01757"></a>01757   <span class="comment">// for each feature</span>
<a name="l01758"></a>01758   <span class="keywordflow">for</span> (i = 0; i &lt; group-&gt;<a class="code" href="structFC__FeatureGroup.html#63582e6a2fe6c7c22e91f23dff78b41c">numFeature</a>; i++) {
<a name="l01759"></a>01759 
<a name="l01760"></a>01760     <span class="comment">// general feature info, numROI, parents &amp; children</span>
<a name="l01761"></a>01761     fprintf(file, <span class="stringliteral">"Feature %d:\n"</span>, i);
<a name="l01762"></a>01762     fflush(NULL);
<a name="l01763"></a>01763 
<a name="l01764"></a>01764     <span class="comment">// parent ids</span>
<a name="l01765"></a>01765     <a class="code" href="group__Features.html#g0e91db0154faf9cc2cd50946ce86dab9" title="Get the parents of a feature.">fc_getFeatureParentIDs</a>(group, i, &amp;numParent, &amp;parentIDs);
<a name="l01766"></a>01766     fprintf(file, <span class="stringliteral">"    numParent = %d, IDs: "</span>, numParent);
<a name="l01767"></a>01767     <span class="keywordflow">if</span> (numParent &gt; 0) {
<a name="l01768"></a>01768       fprintf(file, <span class="stringliteral">"%d"</span>, parentIDs[0]);
<a name="l01769"></a>01769       <span class="keywordflow">for</span> (j = 1; j &lt; numParent; j++)
<a name="l01770"></a>01770         fprintf(file, <span class="stringliteral">", %d"</span>, parentIDs[j]);
<a name="l01771"></a>01771     }
<a name="l01772"></a>01772     fprintf(file, <span class="stringliteral">"\n"</span>);
<a name="l01773"></a>01773     fflush(NULL);
<a name="l01774"></a>01774     free(parentIDs);
<a name="l01775"></a>01775       
<a name="l01776"></a>01776     <span class="comment">// child ids</span>
<a name="l01777"></a>01777     <a class="code" href="group__Features.html#gf0fc90f846d2ae96821d51a16fa73453" title="Get the children of a feature.">fc_getFeatureChildIDs</a>(group, i, &amp;numChild, &amp;childIDs);
<a name="l01778"></a>01778     fprintf(file, <span class="stringliteral">"    numChild  = %d, IDs: "</span>, numChild);
<a name="l01779"></a>01779     <span class="keywordflow">if</span> (numChild &gt; 0) {
<a name="l01780"></a>01780       fprintf(file, <span class="stringliteral">"%d"</span>, childIDs[0]);
<a name="l01781"></a>01781       <span class="keywordflow">for</span> (j = 1; j &lt; numChild; j++)
<a name="l01782"></a>01782         fprintf(file, <span class="stringliteral">", %d"</span>, childIDs[j]);
<a name="l01783"></a>01783     }
<a name="l01784"></a>01784     fprintf(file, <span class="stringliteral">"\n"</span>);
<a name="l01785"></a>01785     fflush(NULL);
<a name="l01786"></a>01786     free(childIDs);
<a name="l01787"></a>01787       
<a name="l01788"></a>01788     <span class="comment">// rois</span>
<a name="l01789"></a>01789     <a class="code" href="group__Features.html#g5aa19adbb9a2b4ea327bde6f2c9f3530" title="Get the ROIs in a feature.">fc_getFeatureROIs</a>(group, i, &amp;numROI, &amp;stepIDs, &amp;ROIs);
<a name="l01790"></a>01790     fprintf(file, <span class="stringliteral">"    numROI = %d\n"</span>, numROI);
<a name="l01791"></a>01791     fprintf(file, <span class="stringliteral">"    ROIs:\n"</span>);
<a name="l01792"></a>01792     <span class="keywordflow">for</span> (j = 0; j &lt; group-&gt;<a class="code" href="structFC__FeatureGroup.html#03c4024f072e0cf34b3b97693b5e5aca">features</a>[i]-&gt;<a class="code" href="struct__FC__Feature.html#e5748b5fdebb89a99258c4bbfc8ad6c7">numROI</a>; j++) {
<a name="l01793"></a>01793       <a class="code" href="group__Subset.html#g429e404a267e2f574e2578aa5d0aaa35" title="Get subset name.">fc_getSubsetName</a>(ROIs[j], &amp;temp_name);
<a name="l01794"></a>01794       fprintf(file, <span class="stringliteral">"        %d: stepID = %d, ROI = '%s'\n"</span>, j, stepIDs[j],
<a name="l01795"></a>01795               temp_name);
<a name="l01796"></a>01796       fflush(NULL);
<a name="l01797"></a>01797       free(temp_name);
<a name="l01798"></a>01798     }
<a name="l01799"></a>01799     fprintf(file, <span class="stringliteral">"\n"</span>);
<a name="l01800"></a>01800     fflush(NULL);
<a name="l01801"></a>01801     free(stepIDs);
<a name="l01802"></a>01802     free(ROIs);
<a name="l01803"></a>01803   }
<a name="l01804"></a>01804 
<a name="l01805"></a>01805   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01806"></a>01806 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 27 13:26:21 2008 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
