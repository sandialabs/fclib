<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>FCLib: File IO</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>File IO<br>
<small>
[<a class="el" href="group__DataInterface.html">Data Interface</a>]</small>
</h1>
<p>
<div class="dynheader">
Collaboration diagram for File IO:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__FileIO.gif" border="0" alt="" usemap="#group____FileIO_map">
<map name="group____FileIO_map">
<area shape="rect" href="group__DataInterface.html" title="Primary interface between computational routines and actual data." alt="" coords="5,56,131,83"><area shape="rect" href="group__PrivateFileIO.html" title="Generic file IO." alt="" coords="296,5,456,32"><area shape="rect" href="group__ExodusFileIO.html" title="Exodus II file IO." alt="" coords="299,56,453,83"><area shape="rect" href="group__LSDynaFileIO.html" title="LS&#45;Dyna file IO." alt="" coords="293,107,459,133"></map></td></tr></table></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Generic file IO. 
<p>
<b>Description:</b> <p>
This file provides wrappers to the various file IO options to hide the specific implementations (the specific implementations should generally not be used). We used to support certian SAF conventions, but no longer. For details about a specific type of IO see <a class="el" href="group__ExodusFileIO.html">(Private Exodus IO)</a> <a class="el" href="group__LSDynaFileIO.html">(Private LS-Dyna IO)</a>.<p>
<b>Modifications:</b> <ul>
<li>07/13/2005 WSD created to separate file IO out more so that it is easier to add new types.</li><li>10/15/2007 ACG removed saf </li></ul>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html">(Private Generic IO)</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generic file IO. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ExodusFileIO.html">(Private Exodus IO)</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Exodus II file IO. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LSDynaFileIO.html">(Private LS-Dyna IO)</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">LS-Dyna file IO. <br></td></tr>

<p>
<tr><td colspan="2"><br><h2>File IO enumerated type.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a> =  0, 
<br>
&nbsp;&nbsp;<a class="el" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93">FC_FT_LSDYNA</a>
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Types of file formats for dataset file IO.  <a href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Queries of File IO enumerated type.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#g4b79500fe84d9e282ce49e1b0f7ca0e5">fc_isFileIOTypeValid</a> (<a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> fileType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verify that the given value is valid for this enum.  <a href="#g4b79500fe84d9e282ce49e1b0f7ca0e5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#gc3f11d75ee01e21d5be5b03885891978">fc_getFileIOTypeText</a> (<a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> fileType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return name of the FC_FileIOType's value.  <a href="#gc3f11d75ee01e21d5be5b03885891978"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#g08cb7eb8f94d426bb5f0fd795d8eca82">fc_isFileIOTypeReadSupported</a> (<a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> fileType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verify that a file IO type can be read.  <a href="#g08cb7eb8f94d426bb5f0fd795d8eca82"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#gd42e98e4320f5347be5187d0a7c322a7">fc_isFileIOTypeWriteSupported</a> (<a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> fileType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verify that a file IO type can be written.  <a href="#gd42e98e4320f5347be5187d0a7c322a7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>File IO operations on datasets.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#gbb1d96d018c1a0bbcc8b7a915730709c">fc_getDatasetFileIOType</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, <a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> *fileType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get type of file format.  <a href="#gbb1d96d018c1a0bbcc8b7a915730709c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#g77b8250a472752e14bda28962116a66b">fc_loadDataset</a> (char *filename, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> *dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load a dataset and it's members from a file.  <a href="#g77b8250a472752e14bda28962116a66b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#gd943b75c22869061057e4fa33c8dcc05">fc_loadDatasetWithFormat</a> (char *filename, <a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> fileType, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> *dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load a dataset and it's members from a file.  <a href="#gd943b75c22869061057e4fa33c8dcc05"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#gd9ebe76a3f236b62d2065721158bdf50">fc_writeDataset</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *filename, <a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> fileType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a dataset.  <a href="#gd9ebe76a3f236b62d2065721158bdf50"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FileIO.html#g054de7ff5051dda3f84fa92f060b4571">fc_rewriteDataset</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *filename, <a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> fileType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rewrite a dataset.  <a href="#g054de7ff5051dda3f84fa92f060b4571"></a><br></td></tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="ge2c4eb60578842e0dfb050ffe07be10f"></a><!-- doxytag: member="fileio.h::FC_FileIOType" ref="ge2c4eb60578842e0dfb050ffe07be10f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Types of file formats for dataset file IO. 
<p>
<b>Description:</b> <p>
All possible file types are defined, but not all may be available in a specific installation.<p>
NOTE: purposefully do not have this type stuff in <a class="el" href="base_8h.html" title="Public declarations for Data Types, Data Interface, and Handles Modules.">base.h</a> because then only this set of files (fileio) needs to be modified if different format types are available.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000029">Todo:</a></b></dt><dd>? Add html pointers for each type? </dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000029">Todo:</a></b></dt><dd>? Is the NOTE above true? move this &amp; helpers to <a class="el" href="base_8h.html" title="Public declarations for Data Types, Data Interface, and Handles Modules.">base.h</a>?</dd></dl>
<b>Modifications:</b> <ul>
<li>7/13/05 WSD Created. </li></ul>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0"></a><!-- doxytag: member="FC_FT_NONE" ref="gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0" args="" -->FC_FT_NONE</em>&nbsp;</td><td>
Type not specified </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b"></a><!-- doxytag: member="FC_FT_EXODUS" ref="gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b" args="" -->FC_FT_EXODUS</em>&nbsp;</td><td>
Exodus II </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93"></a><!-- doxytag: member="FC_FT_LSDYNA" ref="gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93" args="" -->FC_FT_LSDYNA</em>&nbsp;</td><td>
LS-DYNA </td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="fileio_8h-source.html#l00079">79</a> of file <a class="el" href="fileio_8h-source.html">fileio.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00079"></a>00079              {
<a name="l00080"></a>00080   <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a> = 0,   <span class="comment">/**&lt; Type not specified */</span>
<a name="l00081"></a>00081   <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>,     <span class="comment">/**&lt; Exodus II */</span>
<a name="l00082"></a>00082   <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93">FC_FT_LSDYNA</a>,     <span class="comment">/**&lt; LS-DYNA */</span>
<a name="l00083"></a>00083 } <a class="code" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f" title="Types of file formats for dataset file IO.">FC_FileIOType</a>;
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gbb1d96d018c1a0bbcc8b7a915730709c"></a><!-- doxytag: member="fileio.c::fc_getDatasetFileIOType" ref="gbb1d96d018c1a0bbcc8b7a915730709c" args="(FC_Dataset dataset, FC_FileIOType *fileType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getDatasetFileIOType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a> *&nbsp;</td>
          <td class="paramname"> <em>fileType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get type of file format. 
<p>
<b>Modifications:</b> <ul>
<li>7/14/2005 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>fileType</em>&nbsp;</td><td>
output - file format type </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="fileio_8c-source.html#l01517">1517</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="fileio_8h-source.html#l00080">FC_FT_NONE</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00080">_FC_DsSlot::fileType</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="varNormalize_8c-source.html#l00196">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01520"></a>01520   {
<a name="l01521"></a>01521   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l01522"></a>01522 
<a name="l01523"></a>01523   <span class="comment">// default return value</span>
<a name="l01524"></a>01524   <span class="keywordflow">if</span> (fileType)
<a name="l01525"></a>01525     *fileType = <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>;
<a name="l01526"></a>01526 
<a name="l01527"></a>01527   <span class="comment">// check input</span>
<a name="l01528"></a>01528   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l01529"></a>01529   <span class="keywordflow">if</span> (dsSlot == NULL || fileType == NULL) {
<a name="l01530"></a>01530     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01531"></a>01531     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01532"></a>01532   }
<a name="l01533"></a>01533   
<a name="l01534"></a>01534   <span class="comment">// log message</span>
<a name="l01535"></a>01535   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting file type for dataset '%s'"</span>, 
<a name="l01536"></a>01536                 dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l01537"></a>01537   
<a name="l01538"></a>01538   <span class="comment">// do it</span>
<a name="l01539"></a>01539   *fileType = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#5da6a240b511f5d9e266c2c16b4d998c">fileType</a>;
<a name="l01540"></a>01540   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01541"></a>01541 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gc3f11d75ee01e21d5be5b03885891978"></a><!-- doxytag: member="fileio.c::fc_getFileIOTypeText" ref="gc3f11d75ee01e21d5be5b03885891978" args="(FC_FileIOType fileType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* fc_getFileIOTypeText           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a>&nbsp;</td>
          <td class="paramname"> <em>fileType</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return name of the FC_FileIOType's value. 
<p>
<b>Modifications:</b> <ul>
<li>7/14/2005 WSD, Created </li></ul>

<p>Definition at line <a class="el" href="fileio_8c-source.html#l01418">1418</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.</p>

<p>References <a class="el" href="fileio_8h-source.html#l00081">FC_FT_EXODUS</a>, <a class="el" href="fileio_8h-source.html#l00082">FC_FT_LSDYNA</a>, and <a class="el" href="fileio_8h-source.html#l00080">FC_FT_NONE</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l00383">_fc_getMeshExodusGlobalElementIDOffset()</a>, <a class="el" href="exodusio_8c-source.html#l00337">_fc_getMeshExodusGlobalNodalIDsPtr()</a>, and <a class="el" href="dataset_8c-source.html#l01106">_fc_printDsTable()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01420"></a>01420   {
<a name="l01421"></a>01421   <span class="keywordflow">switch</span>(fileType) {
<a name="l01422"></a>01422   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>:    <span class="keywordflow">return</span> <span class="stringliteral">"FC_FT_NONE"</span>;
<a name="l01423"></a>01423   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>:  <span class="keywordflow">return</span> <span class="stringliteral">"FC_FT_EXODUS"</span>;
<a name="l01424"></a>01424   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93">FC_FT_LSDYNA</a>:  <span class="keywordflow">return</span> <span class="stringliteral">"FC_FT_LSDYNA"</span>;
<a name="l01425"></a>01425   <span class="comment">// no default case so will get warning if new values added to enum</span>
<a name="l01426"></a>01426   }
<a name="l01427"></a>01427   <span class="keywordflow">return</span> <span class="stringliteral">"invalid value for enum FC_FileIOType"</span>;
<a name="l01428"></a>01428 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g08cb7eb8f94d426bb5f0fd795d8eca82"></a><!-- doxytag: member="fileio.c::fc_isFileIOTypeReadSupported" ref="g08cb7eb8f94d426bb5f0fd795d8eca82" args="(FC_FileIOType fileType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isFileIOTypeReadSupported           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a>&nbsp;</td>
          <td class="paramname"> <em>fileType</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Verify that a file IO type can be read. 
<p>
<b>Description:</b> <p>
The library can be build with or without support for various file types and some types are supported only for reading. Use this routine to determine if the requested file type is supported for reading.<p>
Note that a file IO type of FC_FT_NONE is considered supported since it requires no support.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000022">Todo:</a></b></dt><dd>Think more about what FC_FT_NONE should return.</dd></dl>
<b>Modifications:</b> <ul>
<li>2/1/2006 WSD, Created </li></ul>

<p>Definition at line <a class="el" href="fileio_8c-source.html#l01448">1448</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.</p>

<p>References <a class="el" href="fileio_8h-source.html#l00081">FC_FT_EXODUS</a>, <a class="el" href="fileio_8h-source.html#l00082">FC_FT_LSDYNA</a>, and <a class="el" href="fileio_8h-source.html#l00080">FC_FT_NONE</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01450"></a>01450   {
<a name="l01451"></a>01451   <span class="keywordflow">switch</span>(fileType) {
<a name="l01452"></a>01452   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>:     
<a name="l01453"></a>01453     <span class="keywordflow">return</span> 1;  <span class="comment">// requires no support, so supported by default</span>
<a name="l01454"></a>01454   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>:  
<a name="l01455"></a>01455 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l01456"></a>01456 <span class="preprocessor"></span>    <span class="keywordflow">return</span> 1;
<a name="l01457"></a>01457 <span class="preprocessor">#else</span>
<a name="l01458"></a>01458 <span class="preprocessor"></span>    <span class="keywordflow">return</span> 0;
<a name="l01459"></a>01459 <span class="preprocessor">#endif</span>
<a name="l01460"></a>01460 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93">FC_FT_LSDYNA</a>:
<a name="l01461"></a>01461     <span class="keywordflow">return</span> 1;
<a name="l01462"></a>01462   <span class="comment">// no default case so will get warning if new values added to enum</span>
<a name="l01463"></a>01463   }
<a name="l01464"></a>01464   <span class="keywordflow">return</span> 0;
<a name="l01465"></a>01465 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g4b79500fe84d9e282ce49e1b0f7ca0e5"></a><!-- doxytag: member="fileio.c::fc_isFileIOTypeValid" ref="g4b79500fe84d9e282ce49e1b0f7ca0e5" args="(FC_FileIOType fileType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isFileIOTypeValid           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a>&nbsp;</td>
          <td class="paramname"> <em>fileType</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Verify that the given value is valid for this enum. 
<p>
<b>Modifications:</b> <ul>
<li>7/14/2005 WSD, Created </li></ul>

<p>Definition at line <a class="el" href="fileio_8c-source.html#l01398">1398</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.</p>

<p>References <a class="el" href="fileio_8h-source.html#l00081">FC_FT_EXODUS</a>, <a class="el" href="fileio_8h-source.html#l00082">FC_FT_LSDYNA</a>, and <a class="el" href="fileio_8h-source.html#l00080">FC_FT_NONE</a>.</p>

<p>Referenced by <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, and <a class="el" href="fileio_8c-source.html#l01706">fc_writeDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01400"></a>01400   {
<a name="l01401"></a>01401   <span class="keywordflow">switch</span>(fileType) {
<a name="l01402"></a>01402   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>:     <span class="comment">// fall through</span>
<a name="l01403"></a>01403   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>:   <span class="comment">// fall through</span>
<a name="l01404"></a>01404   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93">FC_FT_LSDYNA</a>:   <span class="comment">// fall through</span>
<a name="l01405"></a>01405   <span class="comment">// no default case so will get warning if new values added to enum</span>
<a name="l01406"></a>01406     <span class="keywordflow">return</span> 1;
<a name="l01407"></a>01407   }
<a name="l01408"></a>01408   <span class="keywordflow">return</span> 0;
<a name="l01409"></a>01409 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd42e98e4320f5347be5187d0a7c322a7"></a><!-- doxytag: member="fileio.c::fc_isFileIOTypeWriteSupported" ref="gd42e98e4320f5347be5187d0a7c322a7" args="(FC_FileIOType fileType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isFileIOTypeWriteSupported           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a>&nbsp;</td>
          <td class="paramname"> <em>fileType</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Verify that a file IO type can be written. 
<p>
<b>Description:</b> <p>
The library can be build with or without support for various file types and some types are supported only for reading. Use this routine to determine if the requested file type is supported for writing.<p>
Note that a file IO type of FC_FT_NONE is considered supported since it requires no support.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000023">Todo:</a></b></dt><dd>Think more about what FC_FT_NONE should return.</dd></dl>
<b>Modifications:</b> <ul>
<li>2/1/2006 WSD, Created </li></ul>

<p>Definition at line <a class="el" href="fileio_8c-source.html#l01485">1485</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.</p>

<p>References <a class="el" href="fileio_8h-source.html#l00081">FC_FT_EXODUS</a>, <a class="el" href="fileio_8h-source.html#l00082">FC_FT_LSDYNA</a>, and <a class="el" href="fileio_8h-source.html#l00080">FC_FT_NONE</a>.</p>

<p>Referenced by <a class="el" href="fcconvert_8c-source.html#l00063">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01487"></a>01487   {
<a name="l01488"></a>01488   <span class="keywordflow">switch</span>(fileType) {
<a name="l01489"></a>01489   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>:     
<a name="l01490"></a>01490     <span class="keywordflow">return</span> 0;  <span class="comment">// can't do, so not supported</span>
<a name="l01491"></a>01491   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>:  
<a name="l01492"></a>01492 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l01493"></a>01493 <span class="preprocessor"></span>    <span class="keywordflow">return</span> 1;
<a name="l01494"></a>01494 <span class="preprocessor">#else</span>
<a name="l01495"></a>01495 <span class="preprocessor"></span>    <span class="keywordflow">return</span> 0;
<a name="l01496"></a>01496 <span class="preprocessor">#endif</span>
<a name="l01497"></a>01497 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93">FC_FT_LSDYNA</a>:
<a name="l01498"></a>01498     <span class="keywordflow">return</span> 0;
<a name="l01499"></a>01499   <span class="comment">// no default case so will get warning if new values added to enum</span>
<a name="l01500"></a>01500   }
<a name="l01501"></a>01501   <span class="keywordflow">return</span> 0;
<a name="l01502"></a>01502 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g77b8250a472752e14bda28962116a66b"></a><!-- doxytag: member="fileio.c::fc_loadDataset" ref="g77b8250a472752e14bda28962116a66b" args="(char *filename, FC_Dataset *dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_loadDataset           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a> *&nbsp;</td>
          <td class="paramname"> <em>dataset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load a dataset and it's members from a file. 
<p>
<b>Description:</b> <p>
Given a the name of a database file, this routine loads the dataset and makes all of it's members available for use.<p>
This routine automatically picks file format based on the name of the file. If this is unsatisfactory, use fc_loadDatasetWithFormat. See FC_FileIOType for supported formats.<p>
For some formats the members are loaded lazily: that is all of their metadata data is loaded immediately, but the big data arrays are not loaded until needed (this happens automatically). (this was true with saf and is only partially true with exodus)<p>
<b>Modifications:</b> <ul>
<li>7/13/2004 WSD. Old method contents moved to fc_loadDatasetWithFormat. This is a convenience function w/o the fileType arg. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>filename</em>&nbsp;</td><td>
input - name of dataset to open </td></tr>
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
output - handle for this dataset </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="fileio_8c-source.html#l01565">1565</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.</p>

<p>References <a class="el" href="fileio_8h-source.html#l00080">FC_FT_NONE</a>, and <a class="el" href="fileio_8c-source.html#l01607">fc_loadDatasetWithFormat()</a>.</p>

<p>Referenced by <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01568"></a>01568   {
<a name="l01569"></a>01569   <span class="keywordflow">return</span> <a class="code" href="group__FileIO.html#gd943b75c22869061057e4fa33c8dcc05" title="Load a dataset and it&amp;#39;s members from a file.">fc_loadDatasetWithFormat</a>(filename, <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>, dataset);
<a name="l01570"></a>01570 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd943b75c22869061057e4fa33c8dcc05"></a><!-- doxytag: member="fileio.c::fc_loadDatasetWithFormat" ref="gd943b75c22869061057e4fa33c8dcc05" args="(char *filename, FC_FileIOType fileType, FC_Dataset *dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_loadDatasetWithFormat           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a>&nbsp;</td>
          <td class="paramname"> <em>fileType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a> *&nbsp;</td>
          <td class="paramname"> <em>dataset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load a dataset and it's members from a file. 
<p>
<b>Description:</b> <p>
Given a the name of a database file, this routine loads the dataset and makes all of it's members available for use.<p>
If a specific filetype is passed in, the load will fail if the file is not of that type. If FC_FT_NONE is passed in, this routine automatically determines the dataset type. See FC_FileIOType for supported formats.<p>
For some formats, the members are loaded lazily: that is all of their metadata data is loaded immediately, but the big data arrays are not loaded until needed (this happens automatically). (This was true with saf, and is ony partially true with exodus)<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>Aug 5, 2002 W Koegler Now calls _fc_setupDsSlot() so that fc_openDataset() and use_dataset() can use the same code to setup the ftable slot. (RM comment: use_dataset() does not exist anymore.)</li><li>11/20/03 RM changed behavior: when library is not initialized - return an error.</li><li>11/25/03 RM, always return default NULL dataset handle if anything goes wrong.</li><li>09/07/04 WSK, changed name from fc_openDataset to fc_loadDataset.</li><li>01/13/05 WSK, this code now wraps calls to database type specific codes. Most of the old contents have been moved to _fc_loadSAFDataset().</li><li>7/13/02005 WSD Moved to <a class="el" href="fileio_8c.html" title="Implementation for File IO module.">fileio.c</a>.</li><li>7/13/2004 WSD Added flag for file format type. Name changed.</li><li>4/17/2007 CDU Added check to see if file is a regular file </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>filename</em>&nbsp;</td><td>
input - name of dataset to open </td></tr>
<tr><td valign="top"><em>fileType</em>&nbsp;</td><td>
input - File Type (pass FC_FT_NONE if unknonw </td></tr>
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
output - handle for this dataset </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="fileio_8c-source.html#l01607">1607</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.</p>

<p>References <a class="el" href="library_8c-source.html#l00326">_fc_isLibraryInit()</a>, <a class="el" href="exodusio_8c-source.html#l00472">_fc_loadExodusDataset()</a>, <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8h-source.html#l00108">FC_FILE_IO_ERROR</a>, <a class="el" href="fileio_8h-source.html#l00081">FC_FT_EXODUS</a>, <a class="el" href="fileio_8h-source.html#l00082">FC_FT_LSDYNA</a>, <a class="el" href="fileio_8h-source.html#l00080">FC_FT_NONE</a>, <a class="el" href="util_8c-source.html#l00781">fc_getBasename()</a>, <a class="el" href="util_8c-source.html#l00883">fc_getExtension()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00764">FC_NULL_DATASET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="fileio_8c-source.html#l01565">fc_loadDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01611"></a>01611   {
<a name="l01612"></a>01612   <span class="keyword">struct </span>stat f_stat;
<a name="l01613"></a>01613   <span class="keywordtype">int</span> res;
<a name="l01614"></a>01614   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01615"></a>01615   
<a name="l01616"></a>01616   <span class="comment">// default return value</span>
<a name="l01617"></a>01617   <span class="keywordflow">if</span> (dataset != NULL)
<a name="l01618"></a>01618     *dataset = <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>;
<a name="l01619"></a>01619   
<a name="l01620"></a>01620   <span class="comment">// check input</span>
<a name="l01621"></a>01621   <span class="keywordflow">if</span> ((filename == NULL) || (dataset == NULL)) {
<a name="l01622"></a>01622     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01623"></a>01623     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01624"></a>01624   }
<a name="l01625"></a>01625 
<a name="l01626"></a>01626   <span class="comment">// make sure library is ready, return error if it's not</span>
<a name="l01627"></a>01627   <span class="keywordflow">if</span> (!<a class="code" href="group__PrivateLibrary.html#gf9f265c931b08a543728abc285ac61ac" title="Check initialization state of library.">_fc_isLibraryInit</a>()) {
<a name="l01628"></a>01628     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot load a dataset until library is initialized."</span>);
<a name="l01629"></a>01629     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01630"></a>01630   }
<a name="l01631"></a>01631   
<a name="l01632"></a>01632   <span class="comment">// log message</span>
<a name="l01633"></a>01633   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Loading dataset '%s'"</span>, filename);
<a name="l01634"></a>01634 
<a name="l01635"></a>01635   <span class="comment">// Make sure this is a readable file in case lower io libs </span>
<a name="l01636"></a>01636   <span class="comment">// don't check (ie, exodus)</span>
<a name="l01637"></a>01637   res=stat(filename, &amp;f_stat);
<a name="l01638"></a>01638   <span class="keywordflow">if</span>(res || !S_ISREG(f_stat.st_mode)){
<a name="l01639"></a>01639     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"File %s is not a regular file."</span>, filename);
<a name="l01640"></a>01640     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01641"></a>01641   }
<a name="l01642"></a>01642 
<a name="l01643"></a>01643   <span class="comment">// Pick a type </span>
<a name="l01644"></a>01644   <span class="comment">// FIX make this smarter?</span>
<a name="l01645"></a>01645   <span class="keywordflow">if</span> (fileType == <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>) {
<a name="l01646"></a>01646     <span class="keywordtype">char</span> *basename = <a class="code" href="group__FilePathUtilities.html#g3c36f9f80044507356b6a9f1ee0b2550" title="Get the basename in a path string.">fc_getBasename</a>(filename);
<a name="l01647"></a>01647     <span class="keywordtype">char</span> *extension = <a class="code" href="group__FilePathUtilities.html#g263d012c414fd61c160dcc2cbfac7de1" title="Get the extension of path.">fc_getExtension</a>(filename, 1);
<a name="l01648"></a>01648     <span class="keywordflow">if</span> (!strcasecmp(basename, <span class="stringliteral">"d3plot"</span>)) <span class="comment">// test this first</span>
<a name="l01649"></a>01649       fileType = <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93">FC_FT_LSDYNA</a>;
<a name="l01650"></a>01650     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (extension) {
<a name="l01651"></a>01651       <span class="keywordflow">if</span> (!strcasecmp(extension, <span class="stringliteral">"e"</span>) || !strcasecmp(extension, <span class="stringliteral">"e2"</span>) ||
<a name="l01652"></a>01652        !strcasecmp(extension, <span class="stringliteral">"exo"</span>))
<a name="l01653"></a>01653      fileType = <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>;
<a name="l01654"></a>01654     }
<a name="l01655"></a>01655     free(basename);
<a name="l01656"></a>01656     free(extension);
<a name="l01657"></a>01657   }
<a name="l01658"></a>01658 
<a name="l01659"></a>01659   <span class="keywordflow">switch</span> (fileType) {
<a name="l01660"></a>01660   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>:
<a name="l01661"></a>01661 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l01662"></a>01662 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="group__ExodusFileIO.html#ga24e128921b05fa69faecd3219c40135" title="Load an Exodus II dataset from a file.">_fc_loadExodusDataset</a>(filename, dataset);
<a name="l01663"></a>01663 <span class="preprocessor">#else</span>
<a name="l01664"></a>01664 <span class="preprocessor"></span>    <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Exodus module not available"</span>);
<a name="l01665"></a>01665     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce406cfb6be2c486a7655cecdd3f5c02e44">FC_FILE_IO_ERROR</a>;
<a name="l01666"></a>01666 <span class="preprocessor">#endif</span>
<a name="l01667"></a>01667 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93">FC_FT_LSDYNA</a>:
<a name="l01668"></a>01668     <span class="keywordflow">return</span> <a class="code" href="group__LSDynaFileIO.html#gb7831aaa66c20adbc21ed566edb6858d" title="Load all members of an LS-Dyna Dataset.">_fc_loadLSDynaDataset</a>(filename, dataset);
<a name="l01669"></a>01669   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>: <span class="comment">// fall through</span>
<a name="l01670"></a>01670   <span class="keywordflow">default</span>:
<a name="l01671"></a>01671     <span class="comment">// Try every type until we get one that works</span>
<a name="l01672"></a>01672 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l01673"></a>01673 <span class="preprocessor"></span>    rc = <a class="code" href="group__ExodusFileIO.html#ga24e128921b05fa69faecd3219c40135" title="Load an Exodus II dataset from a file.">_fc_loadExodusDataset</a>(filename, dataset);
<a name="l01674"></a>01674     <span class="keywordflow">if</span> (rc == <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01675"></a>01675       <span class="keywordflow">return</span> rc;
<a name="l01676"></a>01676 <span class="preprocessor">#endif</span>
<a name="l01677"></a>01677 <span class="preprocessor"></span>    rc = <a class="code" href="group__LSDynaFileIO.html#gb7831aaa66c20adbc21ed566edb6858d" title="Load all members of an LS-Dyna Dataset.">_fc_loadLSDynaDataset</a>(filename, dataset);
<a name="l01678"></a>01678     <span class="keywordflow">if</span> (rc == <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01679"></a>01679       <span class="keywordflow">return</span> rc;
<a name="l01680"></a>01680     <span class="comment">// Couldn't find one </span>
<a name="l01681"></a>01681     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Could not open database '%s'"</span>, 
<a name="l01682"></a>01682                  filename);
<a name="l01683"></a>01683     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce406cfb6be2c486a7655cecdd3f5c02e44">FC_FILE_IO_ERROR</a>;
<a name="l01684"></a>01684   }
<a name="l01685"></a>01685 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g054de7ff5051dda3f84fa92f060b4571"></a><!-- doxytag: member="fileio.c::fc_rewriteDataset" ref="g054de7ff5051dda3f84fa92f060b4571" args="(FC_Dataset dataset, char *filename, FC_FileIOType fileType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_rewriteDataset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a>&nbsp;</td>
          <td class="paramname"> <em>fileType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rewrite a dataset. 
<p>
<b>Description:</b> <p>
This will force the writing of a dataset that is already associated with a file on disk, e.g. to rewrite an Exodus dataset or write an Exodus dataset into a differnt type of file. Calling on a dataset that has never been associated with a file is o.k.<p>
Empty subsets do not get written.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000024">Todo:</a></b></dt><dd>?Passing NULL for the name will make it use the original dataset's filename and type -- essentially rewriting it? </dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000024">Todo:</a></b></dt><dd>?Replace fc_writeDataset with this version? </dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000024">Todo:</a></b></dt><dd>Write to filename.tmp then move filename.tmp to filename -- then if rewriting a file, old version less likely to get clobbered in case of an error.</dd></dl>
<b>Modifications:</b> <ul>
<li>3/25/2006 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
the dataset to write </td></tr>
<tr><td valign="top"><em>filename</em>&nbsp;</td><td>
the filename to write to </td></tr>
<tr><td valign="top"><em>fileType</em>&nbsp;</td><td>
the file type to write </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="fileio_8c-source.html#l01776">1776</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.</p>

<p>References <a class="el" href="fileio_8c-source.html#l02209">_fc_closeDataset()</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="sequence_8c-source.html#l02142">_fc_getSeqSlot()</a>, <a class="el" href="subset_8c-source.html#l03800">_fc_getSubSlot()</a>, <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="variable_8c-source.html#l03492">fc_getGlobalSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l03432">fc_getGlobalVariables()</a>, <a class="el" href="mesh_8c-source.html#l03436">fc_getMeshCoordsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03762">fc_getMeshElementConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l02183">fc_getMeshes()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="sequence_8c-source.html#l01737">fc_getSequenceCoordsPtr()</a>, <a class="el" href="sequence_8c-source.html#l01150">fc_getSequences()</a>, <a class="el" href="variable_8c-source.html#l03637">fc_getSeqVariables()</a>, <a class="el" href="subset_8c-source.html#l03001">fc_getSubsetMembersAsArray()</a>, <a class="el" href="subset_8c-source.html#l01253">fc_getSubsets()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l03573">fc_getVariables()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="fileio_8c-source.html#l01398">fc_isFileIOTypeValid()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="fileio_8c-source.html#l01706">fc_writeDataset()</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="subsetP_8h-source.html#l00074">_FC_SubSlot::header</a>, <a class="el" href="sequenceP_8h-source.html#l00075">_FC_SeqSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00092">_FC_DsSlot::numMesh</a>, <a class="el" href="datasetP_8h-source.html#l00088">_FC_DsSlot::numSeq</a>, and <a class="el" href="datasetP_8h-source.html#l00084">_FC_DsSlot::writable</a>.</p>

<p>Referenced by <a class="el" href="fcconvert_8c-source.html#l00063">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01780"></a>01780   { 
<a name="l01781"></a>01781   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01782"></a>01782   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l01783"></a>01783 
<a name="l01784"></a>01784   <span class="comment">// check input</span>
<a name="l01785"></a>01785   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l01786"></a>01786   <span class="keywordflow">if</span> (dsSlot == NULL || (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#bc767920afa6b50bbdbe53bc8775da44">numSeq</a> == 0 &amp;&amp; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a> == 0) ||
<a name="l01787"></a>01787       !<a class="code" href="group__FileIO.html#g4b79500fe84d9e282ce49e1b0f7ca0e5" title="Verify that the given value is valid for this enum.">fc_isFileIOTypeValid</a>(fileType)) {
<a name="l01788"></a>01788     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01789"></a>01789     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01790"></a>01790   }
<a name="l01791"></a>01791 
<a name="l01792"></a>01792   <span class="comment">// if not writable, make writable</span>
<a name="l01793"></a>01793   <span class="keywordflow">if</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#45bf720ce29415d5e8ef0c826647c811">writable</a> == 0) {
<a name="l01794"></a>01794     <span class="keywordtype">int</span> i, j, k;
<a name="l01795"></a>01795     <span class="keywordtype">int</span> numSeq, numGlbVar, numGlbSeqVar, numMesh;
<a name="l01796"></a>01796     <span class="keywordtype">int</span> numSub, numVar, numSeqVar, numMember, *numSteps;
<a name="l01797"></a>01797     <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> *sequences;
<a name="l01798"></a>01798     <a class="code" href="struct__FC__SeqSlot.html" title="Sequence Slot Structure for the Sequence Table.">_FC_SeqSlot</a>* seqSlot;
<a name="l01799"></a>01799     <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a>* meshes;
<a name="l01800"></a>01800     <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l01801"></a>01801     <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>* subsets;
<a name="l01802"></a>01802     <a class="code" href="struct__FC__SubSlot.html" title="Struct describing subset elements.">_FC_SubSlot</a>* subSlot;
<a name="l01803"></a>01803     <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *glbVars, **glbSeqVars, *variables, **seqVars;
<a name="l01804"></a>01804     <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l01805"></a>01805     <span class="keywordtype">double</span>* coords;
<a name="l01806"></a>01806     <span class="keywordtype">int</span> *conns, *ids;
<a name="l01807"></a>01807     <span class="keywordtype">void</span>* data;
<a name="l01808"></a>01808 
<a name="l01809"></a>01809     <span class="comment">// Force loading of all data &amp; set to uncommited</span>
<a name="l01810"></a>01810     <a class="code" href="group__Variable.html#g1d1333786398ddc0cd571156691272ea" title="Get the global variables in a dataset.">fc_getGlobalVariables</a>(dataset, &amp;numGlbVar, &amp;glbVars);
<a name="l01811"></a>01811     <span class="keywordflow">for</span> (i = 0; i &lt; numGlbVar; i++) {
<a name="l01812"></a>01812       <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(glbVars[i], &amp;data);
<a name="l01813"></a>01813       varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(glbVars[i]);
<a name="l01814"></a>01814       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> = 0;
<a name="l01815"></a>01815     }
<a name="l01816"></a>01816     free(glbVars);
<a name="l01817"></a>01817     <a class="code" href="group__Variable.html#g3085ad2d7a4be9f81eb0eccaa19ade10" title="Get the global sequence variables in a dataset.">fc_getGlobalSeqVariables</a>(dataset, &amp;numGlbSeqVar, &amp;numSteps, &amp;glbSeqVars);
<a name="l01818"></a>01818     <span class="keywordflow">for</span> (i = 0; i &lt; numGlbSeqVar; i++) {
<a name="l01819"></a>01819       <span class="keywordflow">for</span> (j = 0; j &lt; numSteps[i]; j++) {
<a name="l01820"></a>01820         <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(glbSeqVars[i][j], &amp;data);
<a name="l01821"></a>01821         varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(glbSeqVars[i][j]);
<a name="l01822"></a>01822         varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> = 0;
<a name="l01823"></a>01823       }
<a name="l01824"></a>01824       free(glbSeqVars[i]);
<a name="l01825"></a>01825     }
<a name="l01826"></a>01826     free(numSteps);
<a name="l01827"></a>01827     free(glbSeqVars);
<a name="l01828"></a>01828     <a class="code" href="group__Sequence.html#g0ad1217500f245d78aaad5c79f960ba1" title="Get the sequences in a dataset.">fc_getSequences</a>(dataset, &amp;numSeq, &amp;sequences);
<a name="l01829"></a>01829     <span class="keywordflow">for</span> (i = 0; i &lt; numSeq; i++) {
<a name="l01830"></a>01830       <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(sequences[i], &amp;data);
<a name="l01831"></a>01831       seqSlot = <a class="code" href="group__PrivateSequence.html#g311b52c3aa6307afba63b26ad035afe5" title="Get a sequence slot from a sequence handle.">_fc_getSeqSlot</a>(sequences[i]);
<a name="l01832"></a>01832       seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#c5e5166b76af0f8c08946df88105d729">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> = 0;
<a name="l01833"></a>01833     }
<a name="l01834"></a>01834     <a class="code" href="group__Mesh.html#gcb092c2c909dd536c0120830890a9f36" title="Get the meshes in a dataset.">fc_getMeshes</a>(dataset, &amp;numMesh, &amp;meshes);
<a name="l01835"></a>01835     <span class="keywordflow">for</span> (i = 0; i &lt; numMesh; i++) {
<a name="l01836"></a>01836       <a class="code" href="group__Mesh.html#gff8561557c19ae03be9ff18cc73a6823" title="Return the vertex coordinates of the mesh.">fc_getMeshCoordsPtr</a>(meshes[i], &amp;coords);
<a name="l01837"></a>01837       <a class="code" href="group__Mesh.html#g19906bcae562d226991740da142000c0" title="Return element to vertex connectivities for the mesh.">fc_getMeshElementConnsPtr</a>(meshes[i], &amp;conns);
<a name="l01838"></a>01838       <a class="code" href="group__Subset.html#gb12aea784bf43ec6a29a8e51a3c0da51" title="Get the subsets in a mesh.">fc_getSubsets</a>(meshes[i], &amp;numSub, &amp;subsets);
<a name="l01839"></a>01839       <span class="keywordflow">for</span> (j = 0; j &lt; numSub; j++) {
<a name="l01840"></a>01840      <a class="code" href="group__Subset.html#g6cebfda6e20e2a518636838b170185da" title="Get a copy of subset members as array.">fc_getSubsetMembersAsArray</a>(subsets[j], &amp;numMember, &amp;ids);
<a name="l01841"></a>01841      free(ids);
<a name="l01842"></a>01842      subSlot = <a class="code" href="group__PrivateSubset.html#gfcfa40671d6a71442d882bf0926d7895" title="Get a subset slot from a subset handle.">_fc_getSubSlot</a>(subsets[j]);
<a name="l01843"></a>01843      subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#07d50e7e118f4d4c1c7c70caa2d9d2f6">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> = 0;
<a name="l01844"></a>01844       }
<a name="l01845"></a>01845       free(subsets);
<a name="l01846"></a>01846       <a class="code" href="group__Variable.html#ga96777675a667d79871c93c54729bde4" title="Get the variables in a mesh.">fc_getVariables</a>(meshes[i], &amp;numVar, &amp;variables);
<a name="l01847"></a>01847       <span class="keywordflow">for</span> (j = 0; j &lt; numVar; j++) {
<a name="l01848"></a>01848      <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(variables[j], &amp;data);
<a name="l01849"></a>01849      varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variables[j]);
<a name="l01850"></a>01850      varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> = 0;
<a name="l01851"></a>01851       }
<a name="l01852"></a>01852       free(variables);
<a name="l01853"></a>01853       <a class="code" href="group__Variable.html#g01bf1b0d9b1de983115a461216039449" title="Get the sequence variables in a mesh.">fc_getSeqVariables</a>(meshes[i], &amp;numSeqVar, &amp;numSteps, &amp;seqVars);
<a name="l01854"></a>01854       <span class="keywordflow">for</span> (j = 0; j &lt; numSeqVar; j++) {
<a name="l01855"></a>01855      <span class="keywordflow">for</span> (k = 0; k &lt; numSteps[j]; k++) { 
<a name="l01856"></a>01856        <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(seqVars[j][k], &amp;data);
<a name="l01857"></a>01857        varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(seqVars[j][k]);
<a name="l01858"></a>01858        varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> = 0;
<a name="l01859"></a>01859      }
<a name="l01860"></a>01860      free(seqVars[j]);
<a name="l01861"></a>01861       }
<a name="l01862"></a>01862       free(numSteps);
<a name="l01863"></a>01863       free(seqVars);
<a name="l01864"></a>01864       meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(meshes[i]);
<a name="l01865"></a>01865       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> = 0;
<a name="l01866"></a>01866     }
<a name="l01867"></a>01867     free(sequences);
<a name="l01868"></a>01868     free(meshes);
<a name="l01869"></a>01869     dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> = 0;
<a name="l01870"></a>01870 
<a name="l01871"></a>01871     <span class="comment">// reset to look like a created dataset</span>
<a name="l01872"></a>01872     rc = <a class="code" href="group__PrivateFileIO.html#g74d69e0aedc5f4ff41bc7dc474b734ee" title="Close a dataset.">_fc_closeDataset</a>(dataset);
<a name="l01873"></a>01873     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01874"></a>01874       <span class="keywordflow">return</span> rc;
<a name="l01875"></a>01875     dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#45bf720ce29415d5e8ef0c826647c811">writable</a> = 1;
<a name="l01876"></a>01876   }
<a name="l01877"></a>01877  
<a name="l01878"></a>01878   <span class="keywordflow">return</span> <a class="code" href="group__FileIO.html#gd9ebe76a3f236b62d2065721158bdf50" title="Write a dataset.">fc_writeDataset</a>(dataset, filename, fileType);
<a name="l01879"></a>01879 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd9ebe76a3f236b62d2065721158bdf50"></a><!-- doxytag: member="fileio.c::fc_writeDataset" ref="gd9ebe76a3f236b62d2065721158bdf50" args="(FC_Dataset dataset, char *filename, FC_FileIOType fileType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_writeDataset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__FileIO.html#ge2c4eb60578842e0dfb050ffe07be10f">FC_FileIOType</a>&nbsp;</td>
          <td class="paramname"> <em>fileType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write a dataset. 
<p>
<b>Description:</b> <p>
Currently, only a created dataset can be written; the function cannot update changes to a dataset read from disk. To save changes to a dataset that has been read to disk, or already written, use <a class="el" href="group__FileIO.html#g054de7ff5051dda3f84fa92f060b4571" title="Rewrite a dataset.">fc_rewriteDataset()</a>.<p>
Empty subsets do not get written.<p>
<b>Modifications:</b> <ul>
<li>2003-NOV-11 WSK Created.</li><li>7/13/2005 WSD Moved to <a class="el" href="fileio_8c.html" title="Implementation for File IO module.">fileio.c</a>.</li><li>7/13/2005 WSD Made into a wrapper (old guts are now _fc_writeSAFDataset)</li><li>10/15/2007 ACG exodus is now default file type as saf is removed </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
the dataset to write </td></tr>
<tr><td valign="top"><em>filename</em>&nbsp;</td><td>
the filename to write to </td></tr>
<tr><td valign="top"><em>fileType</em>&nbsp;</td><td>
the file type to write </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="fileio_8c-source.html#l01706">1706</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8h-source.html#l00108">FC_FILE_IO_ERROR</a>, <a class="el" href="fileio_8h-source.html#l00081">FC_FT_EXODUS</a>, <a class="el" href="fileio_8h-source.html#l00082">FC_FT_LSDYNA</a>, <a class="el" href="fileio_8h-source.html#l00080">FC_FT_NONE</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="fileio_8c-source.html#l01398">fc_isFileIOTypeValid()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="datasetP_8h-source.html#l00092">_FC_DsSlot::numMesh</a>, <a class="el" href="datasetP_8h-source.html#l00088">_FC_DsSlot::numSeq</a>, and <a class="el" href="datasetP_8h-source.html#l00084">_FC_DsSlot::writable</a>.</p>

<p>Referenced by <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, and <a class="el" href="bb2exo_8c-source.html#l00068">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01710"></a>01710   { 
<a name="l01711"></a>01711   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l01712"></a>01712 
<a name="l01713"></a>01713   <span class="comment">// check input</span>
<a name="l01714"></a>01714   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l01715"></a>01715   <span class="keywordflow">if</span> (dsSlot == NULL || dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#45bf720ce29415d5e8ef0c826647c811">writable</a> == 0 || 
<a name="l01716"></a>01716       (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#bc767920afa6b50bbdbe53bc8775da44">numSeq</a> == 0 &amp;&amp; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a> == 0) ||
<a name="l01717"></a>01717       !<a class="code" href="group__FileIO.html#g4b79500fe84d9e282ce49e1b0f7ca0e5" title="Verify that the given value is valid for this enum.">fc_isFileIOTypeValid</a>(fileType)) {
<a name="l01718"></a>01718     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01719"></a>01719     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01720"></a>01720   }
<a name="l01721"></a>01721 
<a name="l01722"></a>01722   <span class="comment">// log message</span>
<a name="l01723"></a>01723   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Writing dataset '%s'"</span>, dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l01724"></a>01724 
<a name="l01725"></a>01725   <span class="comment">// if no type, choose one</span>
<a name="l01726"></a>01726   <span class="keywordflow">if</span> (fileType == <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>)
<a name="l01727"></a>01727     fileType = <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>;
<a name="l01728"></a>01728 
<a name="l01729"></a>01729   <span class="comment">// Call format specific writers</span>
<a name="l01730"></a>01730   <span class="keywordflow">switch</span> (fileType) {
<a name="l01731"></a>01731   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f99ecebdb6b57140d8fd211b1f9f62c4b">FC_FT_EXODUS</a>:
<a name="l01732"></a>01732 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l01733"></a>01733 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="group__ExodusFileIO.html#gdf8bbffda1fb0c3fd88df9bd6c2a995a" title="Write a dataset.">_fc_writeExodusDataset</a>(dataset, filename);
<a name="l01734"></a>01734 <span class="preprocessor">#else</span>
<a name="l01735"></a>01735 <span class="preprocessor"></span>    <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Exodus module not available"</span>);
<a name="l01736"></a>01736     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce406cfb6be2c486a7655cecdd3f5c02e44">FC_FILE_IO_ERROR</a>;
<a name="l01737"></a>01737 <span class="preprocessor">#endif</span>
<a name="l01738"></a>01738 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10fbd862214a0d2b322c7cc81bf035c1f93">FC_FT_LSDYNA</a>: 
<a name="l01739"></a>01739     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"This installation does not support writing files "</span>
<a name="l01740"></a>01740                  <span class="stringliteral">"in LS-Dyna format\n"</span>);
<a name="l01741"></a>01741     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01742"></a>01742   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gge2c4eb60578842e0dfb050ffe07be10f810cf6b792294e2c490051f262d81ac0">FC_FT_NONE</a>: <span class="comment">// fall through</span>
<a name="l01743"></a>01743     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Should never reach this point! should have "</span>
<a name="l01744"></a>01744                  <span class="stringliteral">"chosen a default format"</span>);
<a name="l01745"></a>01745     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01746"></a>01746   }
<a name="l01747"></a>01747 
<a name="l01748"></a>01748   <span class="comment">// error if reach this point</span>
<a name="l01749"></a>01749   <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Programmer error!: Should never reach this point\n"</span>);
<a name="l01750"></a>01750   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01751"></a>01751 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 27 13:26:17 2008 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
