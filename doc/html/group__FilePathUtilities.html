<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>FCLib: File Path Processing</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>File Path Processing<br>
<small>
[<a class="el" href="group__Utilities.html">Utilities</a>]</small>
</h1>
<p>
<div class="dynheader">
Collaboration diagram for File Path Processing:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__FilePathUtilities.gif" border="0" alt="" usemap="#group____FilePathUtilities_map">
<map name="group____FilePathUtilities_map">
<area shape="rect" href="group__Utilities.html" title="Support routines." alt="" coords="5,5,80,32"></map></td></tr></table></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Various routines for decomposing file paths. 
<p>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FilePathUtilities.html#g53f1d277729a4ffb59ef76ffdfbf419c">fc_getDirname</a> (char *path)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the dirname in a path string.  <a href="#g53f1d277729a4ffb59ef76ffdfbf419c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FilePathUtilities.html#g3c36f9f80044507356b6a9f1ee0b2550">fc_getBasename</a> (char *path)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the basename in a path string.  <a href="#g3c36f9f80044507356b6a9f1ee0b2550"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FilePathUtilities.html#g695828279b1a1e30d77a6d282a332a43">fc_getBasenameWOExtension</a> (char *path, int ext_flag)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the root of a basename in a path string.  <a href="#g695828279b1a1e30d77a6d282a332a43"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FilePathUtilities.html#g263d012c414fd61c160dcc2cbfac7de1">fc_getExtension</a> (char *path, int ext_flag)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the extension of path.  <a href="#g263d012c414fd61c160dcc2cbfac7de1"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g3c36f9f80044507356b6a9f1ee0b2550"></a><!-- doxytag: member="util.c::fc_getBasename" ref="g3c36f9f80044507356b6a9f1ee0b2550" args="(char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* fc_getBasename           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the basename in a path string. 
<p>
<b>Description:</b> <p>
Returns the part of the path after the last slash (ignoring trailing slashes). For example "/usr/local/bin" -&gt; "bin" or "../../cherry.txt" -&gt; "cherry.txt" or "grumpy.xslt" -&gt; "grumpy.xslt".<p>
User is responsible for freeing the returned string.<p>
If no path is provided, this routine returns NULL.<p>
<b>Modifications:</b> <ul>
<li>7/14/2005 WSD Created. </li></ul>

<p>Definition at line <a class="el" href="util_8c-source.html#l00781">781</a> of file <a class="el" href="util_8c-source.html">util.c</a>.</p>

<p>Referenced by <a class="el" href="util_8c-source.html#l00824">fc_getBasenameWOExtension()</a>, <a class="el" href="util_8c-source.html#l00883">fc_getExtension()</a>, and <a class="el" href="fileio_8c-source.html#l01607">fc_loadDatasetWithFormat()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00781"></a>00781                                  {
<a name="l00782"></a>00782   <span class="keywordtype">char</span>* temp_path;
<a name="l00783"></a>00783   <span class="keywordtype">char</span>* temp_str;
<a name="l00784"></a>00784   <span class="keywordtype">char</span>* base;
<a name="l00785"></a>00785 
<a name="l00786"></a>00786   <span class="comment">// early return</span>
<a name="l00787"></a>00787   <span class="keywordflow">if</span> (path == NULL)
<a name="l00788"></a>00788     <span class="keywordflow">return</span> NULL;
<a name="l00789"></a>00789   
<a name="l00790"></a>00790   <span class="comment">// Use C library function to get base </span>
<a name="l00791"></a>00791   temp_path = (<span class="keywordtype">char</span>*)malloc((strlen(path)+1)*<span class="keyword">sizeof</span>(char));
<a name="l00792"></a>00792   strcpy(temp_path, path);
<a name="l00793"></a>00793   base = basename(temp_path);
<a name="l00794"></a>00794 
<a name="l00795"></a>00795   <span class="comment">// copy, cleanup &amp; return</span>
<a name="l00796"></a>00796   temp_str = (<span class="keywordtype">char</span>*)malloc((strlen(base)+1)*<span class="keyword">sizeof</span>(char));
<a name="l00797"></a>00797   strcpy(temp_str, base);
<a name="l00798"></a>00798   free(temp_path);
<a name="l00799"></a>00799   <span class="keywordflow">return</span> temp_str;
<a name="l00800"></a>00800 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g695828279b1a1e30d77a6d282a332a43"></a><!-- doxytag: member="util.c::fc_getBasenameWOExtension" ref="g695828279b1a1e30d77a6d282a332a43" args="(char *path, int ext_flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* fc_getBasenameWOExtension           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ext_flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the root of a basename in a path string. 
<p>
<b>Description:</b> <p>
Returns the part of the path after the last slash (ignoring trailing slashes) minus any extension. For example "/usr/local/bin" -&gt; "bin" or "../../cherry.txt" -&gt; "cherry" or "grumpy.xslt" -&gt; "grumpy".<p>
The user can specify whether the extension starts with the first "." (0) or the last "." (1). For example, "bundle.tar.gz" would be "bundle" or "bundle.tar". A leading "." is not treated as an extension ".". For example. ".cshrc" -&gt; ".cshrc";<p>
User is responsible for freeing the returned string.<p>
If no path is provided, this routine returns NULL.<p>
<b>Modifications:</b> <ul>
<li>7/14/2005 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>path</em>&nbsp;</td><td>
the path </td></tr>
<tr><td valign="top"><em>ext_flag</em>&nbsp;</td><td>
0 = extension starts at 1st ".", 1 = extentsion starts at last "." </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="util_8c-source.html#l00824">824</a> of file <a class="el" href="util_8c-source.html">util.c</a>.</p>

<p>References <a class="el" href="util_8c-source.html#l00781">fc_getBasename()</a>.</p>

<p>Referenced by <a class="el" href="fileio_8c-source.html#l01253">_fc_readNamesFile()</a>, <a class="el" href="fcswapAssoc_8c-source.html#l00119">checkArgs()</a>, and <a class="el" href="bb2exo_8c-source.html#l00068">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00828"></a>00828   {
<a name="l00829"></a>00829   <span class="keywordtype">size_t</span> i;
<a name="l00830"></a>00830   <span class="keywordtype">char</span>* temp_str;
<a name="l00831"></a>00831 
<a name="l00832"></a>00832   <span class="comment">// early return</span>
<a name="l00833"></a>00833   <span class="keywordflow">if</span> (path == NULL)
<a name="l00834"></a>00834     <span class="keywordflow">return</span> NULL;
<a name="l00835"></a>00835   
<a name="l00836"></a>00836   <span class="comment">// get base</span>
<a name="l00837"></a>00837   temp_str = <a class="code" href="group__FilePathUtilities.html#g3c36f9f80044507356b6a9f1ee0b2550" title="Get the basename in a path string.">fc_getBasename</a>(path);
<a name="l00838"></a>00838 
<a name="l00839"></a>00839   <span class="comment">// clip off extentions</span>
<a name="l00840"></a>00840   <span class="keywordflow">if</span> (ext_flag == 0) {
<a name="l00841"></a>00841     <span class="keywordflow">for</span> (i = 1; i &lt; strlen(temp_str); i++) {
<a name="l00842"></a>00842       <span class="keywordflow">if</span> (temp_str[i] == <span class="charliteral">'.'</span>) {
<a name="l00843"></a>00843      temp_str[i] = <span class="charliteral">'\0'</span>;
<a name="l00844"></a>00844      <span class="keywordflow">break</span>;
<a name="l00845"></a>00845       }
<a name="l00846"></a>00846     }
<a name="l00847"></a>00847   }
<a name="l00848"></a>00848   <span class="keywordflow">else</span> {
<a name="l00849"></a>00849     <span class="keywordflow">for</span> (i = strlen(temp_str); i &gt; 0; i--) {
<a name="l00850"></a>00850       <span class="keywordflow">if</span> (temp_str[i] == <span class="charliteral">'.'</span>) {
<a name="l00851"></a>00851      temp_str[i] = <span class="charliteral">'\0'</span>;
<a name="l00852"></a>00852      <span class="keywordflow">break</span>;
<a name="l00853"></a>00853       }
<a name="l00854"></a>00854     }
<a name="l00855"></a>00855   }
<a name="l00856"></a>00856 
<a name="l00857"></a>00857   <span class="keywordflow">return</span> temp_str;
<a name="l00858"></a>00858 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g53f1d277729a4ffb59ef76ffdfbf419c"></a><!-- doxytag: member="util.c::fc_getDirname" ref="g53f1d277729a4ffb59ef76ffdfbf419c" args="(char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* fc_getDirname           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the dirname in a path string. 
<p>
<b>Description:</b> <p>
Returns the part of the path before the last slash (ignoring trailing slashes). For example "/usr/local/bin" -&gt; "/usr/local" or "../../cherry.txt" -&gt; "../.." or "grumpy.xslt" -&gt; ".".<p>
User is responsible for freeing the returned string.<p>
If no path is provided, this routine returns NULL.<p>
<b>Modifications:</b> <ul>
<li>7/14/2005 WSD Created. </li></ul>

<p>Definition at line <a class="el" href="util_8c-source.html#l00743">743</a> of file <a class="el" href="util_8c-source.html">util.c</a>.</p>

<p>Referenced by <a class="el" href="fileio_8c-source.html#l01253">_fc_readNamesFile()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00743"></a>00743                                 {
<a name="l00744"></a>00744   <span class="keywordtype">char</span>* temp_path;
<a name="l00745"></a>00745   <span class="keywordtype">char</span>* temp_str;
<a name="l00746"></a>00746   <span class="keywordtype">char</span>* dir;
<a name="l00747"></a>00747 
<a name="l00748"></a>00748   <span class="comment">// early return</span>
<a name="l00749"></a>00749   <span class="keywordflow">if</span> (path == NULL)
<a name="l00750"></a>00750     <span class="keywordflow">return</span> NULL;
<a name="l00751"></a>00751   
<a name="l00752"></a>00752   <span class="comment">// Use C library function to get dir</span>
<a name="l00753"></a>00753   temp_path = (<span class="keywordtype">char</span>*)malloc((strlen(path)+1)*<span class="keyword">sizeof</span>(char));
<a name="l00754"></a>00754   strcpy(temp_path, path);
<a name="l00755"></a>00755   dir = dirname(temp_path);
<a name="l00756"></a>00756 
<a name="l00757"></a>00757   <span class="comment">// copy, cleanup &amp; return</span>
<a name="l00758"></a>00758   temp_str = (<span class="keywordtype">char</span>*)malloc((strlen(dir)+1)*<span class="keyword">sizeof</span>(char));
<a name="l00759"></a>00759   strcpy(temp_str, dir);
<a name="l00760"></a>00760   free(temp_path);
<a name="l00761"></a>00761   <span class="keywordflow">return</span> temp_str;
<a name="l00762"></a>00762 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g263d012c414fd61c160dcc2cbfac7de1"></a><!-- doxytag: member="util.c::fc_getExtension" ref="g263d012c414fd61c160dcc2cbfac7de1" args="(char *path, int ext_flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* fc_getExtension           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ext_flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the extension of path. 
<p>
<b>Description:</b> <p>
Returns the extension of a file if it exists. For example "/usr/local/bin" -&gt; NULL or "../../cherry.txt" -&gt; "txt" or "grumpy.xslt" -&gt; "xslt".<p>
The user can specify whether the extension starts with the first "." (0) or the last "." (1). For example, "bundle.tar.gz" would be "tar.gz" or ".gz". A leading "." is not treated as an extension ".". For example. ".cshrc" -&gt; "";<p>
NOTE: If there is no extension, a string is still returned, it just happens to be empty (and you still have to free it).<p>
User is responsible for freeing the returned string.<p>
<b>Modifications:</b> <ul>
<li>7/14/2005 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>path</em>&nbsp;</td><td>
input - the path </td></tr>
<tr><td valign="top"><em>ext_flag</em>&nbsp;</td><td>
input - 0 = extension starts at 1st ".", 1 = extentsion starts at last "." </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="util_8c-source.html#l00883">883</a> of file <a class="el" href="util_8c-source.html">util.c</a>.</p>

<p>References <a class="el" href="util_8c-source.html#l00781">fc_getBasename()</a>.</p>

<p>Referenced by <a class="el" href="fcswapAssoc_8c-source.html#l00119">checkArgs()</a>, and <a class="el" href="fileio_8c-source.html#l01607">fc_loadDatasetWithFormat()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00887"></a>00887   {
<a name="l00888"></a>00888   <span class="keywordtype">size_t</span> i;
<a name="l00889"></a>00889   <span class="keywordtype">char</span>* temp_str;
<a name="l00890"></a>00890   <span class="keywordtype">char</span>* ext;
<a name="l00891"></a>00891   <span class="keywordtype">int</span> start = -1;
<a name="l00892"></a>00892 
<a name="l00893"></a>00893   <span class="comment">// early return</span>
<a name="l00894"></a>00894   <span class="keywordflow">if</span> (path == NULL)
<a name="l00895"></a>00895     <span class="keywordflow">return</span> NULL;
<a name="l00896"></a>00896 
<a name="l00897"></a>00897   <span class="comment">// get base</span>
<a name="l00898"></a>00898   temp_str = <a class="code" href="group__FilePathUtilities.html#g3c36f9f80044507356b6a9f1ee0b2550" title="Get the basename in a path string.">fc_getBasename</a>(path);
<a name="l00899"></a>00899   
<a name="l00900"></a>00900   <span class="comment">// find start of extension (".")</span>
<a name="l00901"></a>00901   <span class="keywordflow">if</span> (ext_flag == 0) {
<a name="l00902"></a>00902     <span class="keywordflow">for</span> (i = 1; i &lt; strlen(temp_str); i++) {
<a name="l00903"></a>00903       <span class="keywordflow">if</span> (temp_str[i] == <span class="charliteral">'.'</span>) {
<a name="l00904"></a>00904      start = i;
<a name="l00905"></a>00905      <span class="keywordflow">break</span>;
<a name="l00906"></a>00906       }
<a name="l00907"></a>00907     }
<a name="l00908"></a>00908   }
<a name="l00909"></a>00909   <span class="keywordflow">else</span> {
<a name="l00910"></a>00910     <span class="keywordflow">for</span> (i = strlen(temp_str); i &gt; 0; i--) {
<a name="l00911"></a>00911       <span class="keywordflow">if</span> (temp_str[i] == <span class="charliteral">'.'</span>) {
<a name="l00912"></a>00912      start = i;
<a name="l00913"></a>00913      <span class="keywordflow">break</span>;
<a name="l00914"></a>00914       }
<a name="l00915"></a>00915     }
<a name="l00916"></a>00916   }
<a name="l00917"></a>00917 
<a name="l00918"></a>00918   <span class="comment">// make the extension</span>
<a name="l00919"></a>00919   <span class="keywordflow">if</span> (start &lt; 0) {
<a name="l00920"></a>00920     ext = (<span class="keywordtype">char</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l00921"></a>00921     ext[0] = <span class="charliteral">'\0'</span>;
<a name="l00922"></a>00922   }
<a name="l00923"></a>00923   <span class="keywordflow">else</span> {
<a name="l00924"></a>00924     ext = (<span class="keywordtype">char</span>*)malloc((strlen(temp_str)-start)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l00925"></a>00925     strcpy(ext, &amp;temp_str[start+1]);
<a name="l00926"></a>00926   }
<a name="l00927"></a>00927   free(temp_str);
<a name="l00928"></a>00928 
<a name="l00929"></a>00929   <span class="keywordflow">return</span> ext;
<a name="l00930"></a>00930 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 27 13:26:22 2008 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
