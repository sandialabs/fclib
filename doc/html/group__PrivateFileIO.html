<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FCLib: (Private Generic IO)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>(Private Generic IO)<br>
<small>
[<a class="el" href="group__FileIO.html">File IO</a>]</small>
</h1>
<p>
Collaboration diagram for (Private Generic IO):<hr><a name="_details"></a><h2>Detailed Description</h2>
Generic file IO. 
<p>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__FC__IntStringPair.html">_FC_IntStringPair</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Struct to hold int/string pairs.  <a href="struct__FC__IntStringPair.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__FC__DsFileIOInfo.html">_FC_DsFileIOInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Struct to hold info about the file format for dataset.  <a href="struct__FC__DsFileIOInfo.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__FC__SeqFileIOInfo.html">_FC_SeqFileIOInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Struct to hold info about the file format for sequence.  <a href="struct__FC__SeqFileIOInfo.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__FC__MeshFileIOInfo.html">_FC_MeshFileIOInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Struct to hold info about the file format for mesh.  <a href="struct__FC__MeshFileIOInfo.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__FC__SubFileIOInfo.html">_FC_SubFileIOInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Struct to hold info about the file format for subset.  <a href="struct__FC__SubFileIOInfo.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__FC__VarFileIOInfo.html">_FC_VarFileIOInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Struct to hold info about the file format for variable.  <a href="struct__FC__VarFileIOInfo.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#gea1070ada8cacfb9e2028a7c6aa07b11">_fc_readVertexFile</a> (char *vertfilename, int *numVert, int *numDim, double **coords)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read FC vertex file.  <a href="#gea1070ada8cacfb9e2028a7c6aa07b11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g1fbb524b92169e663ad9c68a0ccf0572">_fc_readElementFile</a> (char *elemfilename, int *numVert, int *numElem, <a class="el" href="group__DataTypes.html#g5d0bf8bd47afb81d89d4c5d60c7d62b4">FC_ElementType</a> *elemType, char **name, int **conns)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read FC element file.  <a href="#g1fbb524b92169e663ad9c68a0ccf0572"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g4d826e51d3a8150d155124274b411056">_fc_readDataFile</a> (char *datafilename, int *numPoint, int *numComp, <a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> *assoc, <a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *mathType, char **name, float **data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read FC data file.  <a href="#g4d826e51d3a8150d155124274b411056"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g8d39a476bfae6661264328aba451244e">_fc_makeMeshFromFiles</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *vertfilename, char *elemfilename, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> *mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read in vert and elem files and make a mesh.  <a href="#g8d39a476bfae6661264328aba451244e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g2a26a9b0e63254bedc3b63bb8f9e54c9">_fc_makeVariableFromFile</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *datafilename, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read in data file and add to a mesh.  <a href="#g2a26a9b0e63254bedc3b63bb8f9e54c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g7fd390122ab4f73934ab95f22972d806">_fc_readNamesFile</a> (char *datasetfilename, <a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *block_names, <a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *nodeset_names, <a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *sideset_names)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a .names file.  <a href="#g7fd390122ab4f73934ab95f22972d806"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#gd96b9f70719cc9b0dd5267981a500d92">_fc_freeNamesFileNames</a> (<a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *block_names, <a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *nodeset_names, <a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *sideset_names)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete the contents returned from _fc_readNamesFile.  <a href="#gd96b9f70719cc9b0dd5267981a500d92"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g3ed8b6b23ed87cdd7ff49987ef011f2b">_fc_initFileIO</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initial for File IO.  <a href="#g3ed8b6b23ed87cdd7ff49987ef011f2b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g07a87add33e5d97cec2a0f684ec80b64">_fc_finalFileIO</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finalize for File IO.  <a href="#g07a87add33e5d97cec2a0f684ec80b64"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g4128b5820a22c1a92825a15d8f0f2d16">_fc_readSequenceCoords</a> (<a class="el" href="structFC__Sequence.html">FC_Sequence</a> sequence)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read coords from file into a sequence.  <a href="#g4128b5820a22c1a92825a15d8f0f2d16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g6b7d22250488880068cdc93e24a9ca06">_fc_readMeshCoords</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read coords from file into a mesh.  <a href="#g6b7d22250488880068cdc93e24a9ca06"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g711fdc3aebfbf372da3f2c68a90557c9">_fc_readMeshElemConns</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read element conns from file into a mesh.  <a href="#g711fdc3aebfbf372da3f2c68a90557c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g8cf27614f4ebc6794bb90aed061495e6">_fc_readSubsetMembers</a> (<a class="el" href="structFC__Subset.html">FC_Subset</a> subset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read subset members from file into a subset.  <a href="#g8cf27614f4ebc6794bb90aed061495e6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#gf2f857cebf9330f22adf7ca16f571ea2">_fc_readVariableData</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data from file into a variable.  <a href="#gf2f857cebf9330f22adf7ca16f571ea2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateFileIO.html#g57b9694b51249fd539752aa9be79d2af">_fc_closeDataset</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close a dataset.  <a href="#g57b9694b51249fd539752aa9be79d2af"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g57b9694b51249fd539752aa9be79d2af"></a><!-- doxytag: member="fileio.c::_fc_closeDataset" ref="g57b9694b51249fd539752aa9be79d2af" args="(FC_Dataset dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_closeDataset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Close a dataset. 
<p>
<b>Description:</b> <p>
Close the dataset file (if needed) and do any necessary file related cleanup for the Dataset. This is a wrapper that calls format specific implementations.<p>
<b>Modifications:</b> <ul>
<li>7/14/2005 WSD, created to better abstract file IO routines. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - the dataset </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l02209">2209</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="exodusio_8c-source.html#l03497">_fc_closeExodusDataset()</a>, <a class="el" href="lsdynaio_8c-source.html#l02149">_fc_closeLSDynaDataset()</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="datasetP_8h-source.html#l00081">_FC_DsSlot::baseFile</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, and <a class="el" href="datasetP_8h-source.html#l00080">_FC_DsSlot::fileType</a>.
<p>
Referenced by <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, and <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>.<div class="fragment"><pre class="fragment"><a name="l02211"></a>02211   {
<a name="l02212"></a>02212   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l02213"></a>02213   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02214"></a>02214 
<a name="l02215"></a>02215   <span class="comment">// check input</span>
<a name="l02216"></a>02216   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l02217"></a>02217   <span class="keywordflow">if</span> (dsSlot == NULL) {
<a name="l02218"></a>02218     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02219"></a>02219     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02220"></a>02220   }
<a name="l02221"></a>02221   
<a name="l02222"></a>02222   <span class="comment">// Call format specific routines</span>
<a name="l02223"></a>02223   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l02224"></a>02224   <span class="keywordflow">switch</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#202208502c0ef7a4dc5b7a7616f1f2ef">fileType</a>) {
<a name="l02225"></a>02225   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>:
<a name="l02226"></a>02226 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l02227"></a>02227 <span class="preprocessor"></span>    rc =<a class="code" href="group__ExodusFileIO.html#gb8fee71e47d8b6fc7b0e0eb2fd194942">_fc_closeExodusDataset</a>(dataset); <span class="keywordflow">break</span>;
<a name="l02228"></a>02228 <span class="preprocessor">#else</span>
<a name="l02229"></a>02229 <span class="preprocessor"></span>    <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Exodus module not available"</span>);
<a name="l02230"></a>02230     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02231"></a>02231 <span class="preprocessor">#endif</span>
<a name="l02232"></a>02232 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>: 
<a name="l02233"></a>02233     rc = <a class="code" href="group__LSDynaFileIO.html#gf8eb45676fe0e951e02efa83223884dd">_fc_closeLSDynaDataset</a>(dataset); <span class="keywordflow">break</span>;
<a name="l02234"></a>02234   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>:
<a name="l02235"></a>02235     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Called without a file type"</span>);
<a name="l02236"></a>02236     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02237"></a>02237   }
<a name="l02238"></a>02238   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02239"></a>02239     <span class="keywordflow">return</span> rc;
<a name="l02240"></a>02240 
<a name="l02241"></a>02241   <span class="comment">// Generic stuff</span>
<a name="l02242"></a>02242   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#202208502c0ef7a4dc5b7a7616f1f2ef">fileType</a> = <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>;
<a name="l02243"></a>02243   free(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#e59444fefb5a972a2cebd1dcb182b19c">baseFile</a>);
<a name="l02244"></a>02244   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#e59444fefb5a972a2cebd1dcb182b19c">baseFile</a> = NULL;
<a name="l02245"></a>02245 
<a name="l02246"></a>02246   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02247"></a>02247 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g07a87add33e5d97cec2a0f684ec80b64"></a><!-- doxytag: member="fileio.c::_fc_finalFileIO" ref="g07a87add33e5d97cec2a0f684ec80b64" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_finalFileIO           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Finalize for File IO. 
<p>
<b>Description:</b> <p>
This finalizes stuff for FILE IO<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000028">Todo:</a></b></dt><dd>? could have flags so that specific type of file IO is only finalize if it was inited ... see Fix on <a class="el" href="group__PrivateFileIO.html#g3ed8b6b23ed87cdd7ff49987ef011f2b">_fc_initFileIO()</a>.</dd></dl>
<b>Modifications:</b> <ul>
<li>7/19/2005 WSD, created to better abstract reading routines. </li></ul>

<p>
Definition at line <a class="el" href="fileio_8c-source.html#l01930">1930</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="library_8c-source.html#l00220">fc_finalLibrary()</a>.<div class="fragment"><pre class="fragment"><a name="l01930"></a>01930                                     {
<a name="l01931"></a>01931   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc, rc_keep = <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01932"></a>01932   rc = <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>; <span class="comment">// so the compiler won't complaid</span>
<a name="l01933"></a>01933 
<a name="l01934"></a>01934 <span class="preprocessor">#ifdef HAVE_LIBXML2</span>
<a name="l01935"></a>01935 <span class="preprocessor"></span>  xmlCleanupParser();
<a name="l01936"></a>01936 <span class="preprocessor">#endif</span>
<a name="l01937"></a>01937 <span class="preprocessor"></span>
<a name="l01938"></a>01938   <span class="comment">// no Exodus</span>
<a name="l01939"></a>01939   <span class="comment">// no LSDyna</span>
<a name="l01940"></a>01940 
<a name="l01941"></a>01941   <span class="keywordflow">return</span> rc_keep;
<a name="l01942"></a>01942 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd96b9f70719cc9b0dd5267981a500d92"></a><!-- doxytag: member="fileio.c::_fc_freeNamesFileNames" ref="gd96b9f70719cc9b0dd5267981a500d92" args="(FC_SortedBlobArray *block_names, FC_SortedBlobArray *nodeset_names, FC_SortedBlobArray *sideset_names)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _fc_freeNamesFileNames           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *&nbsp;</td>
          <td class="paramname"> <em>block_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *&nbsp;</td>
          <td class="paramname"> <em>nodeset_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *&nbsp;</td>
          <td class="paramname"> <em>sideset_names</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete the contents returned from _fc_readNamesFile. 
<p>
<b>Description:</b> <p>
Deletes the blob data in the sorted blob arrays return from <a class="el" href="group__PrivateFileIO.html#g7fd390122ab4f73934ab95f22972d806">_fc_readNamesFile</a>. It is assumed that the blobs are malloc'd <a class="el" href="struct__FC__IntStringPair.html">_FC_IntStringPair</a> objects with malloc'd strings.<p>
<b>Modifications:</b> <ul>
<li>8/10/2006 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>block_names</em>&nbsp;</td><td>
input/output- the block names </td></tr>
<tr><td valign="top"><em>nodeset_names</em>&nbsp;</td><td>
input/output - the nodeset names </td></tr>
<tr><td valign="top"><em>sideset_names</em>&nbsp;</td><td>
input/output - the sideset names </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l01360">1360</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="storage_8h-source.html#l00125">FC_SortedBlobArray::blobs</a>, <a class="el" href="storage_8c-source.html#l01090">fc_freeSortedBlobArray()</a>, <a class="el" href="storage_8c-source.html#l00819">fc_isSortedBlobArrayValid()</a>, <a class="el" href="storage_8h-source.html#l00123">FC_SortedBlobArray::numBlob</a>, and <a class="el" href="fileioP_8h-source.html#l00120">_FC_IntStringPair::string</a>.
<p>
Referenced by <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>.<div class="fragment"><pre class="fragment"><a name="l01365"></a>01365 {
<a name="l01366"></a>01366   <span class="keywordtype">int</span> i, j;
<a name="l01367"></a>01367   <a class="code" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *sba_p;
<a name="l01368"></a>01368   <a class="code" href="struct__FC__IntStringPair.html">_FC_IntStringPair</a> *blob;
<a name="l01369"></a>01369 
<a name="l01370"></a>01370   <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++) {
<a name="l01371"></a>01371     <span class="keywordflow">switch</span>(i) {
<a name="l01372"></a>01372     <span class="keywordflow">case</span> 0: sba_p = block_names;   <span class="keywordflow">break</span>;
<a name="l01373"></a>01373     <span class="keywordflow">case</span> 1: sba_p = nodeset_names; <span class="keywordflow">break</span>;
<a name="l01374"></a>01374     <span class="keywordflow">case</span> 2: sba_p = sideset_names; <span class="keywordflow">break</span>;
<a name="l01375"></a>01375     }
<a name="l01376"></a>01376     <span class="keywordflow">if</span> (<a class="code" href="group__SimpleDataObjects.html#ge30e7aef8be697d765a02989fb2ff54c">fc_isSortedBlobArrayValid</a>(sba_p)) {
<a name="l01377"></a>01377       <span class="keywordflow">for</span> (j = 0; j &lt; sba_p-&gt;<a class="code" href="structFC__SortedBlobArray.html#cc191073db67e6908e5af541524afd1b">numBlob</a>; j++) {
<a name="l01378"></a>01378      blob = sba_p-&gt;<a class="code" href="structFC__SortedBlobArray.html#6962b1ec25cc07e8c55aa09924a39a61">blobs</a>[j];
<a name="l01379"></a>01379      free(blob-&gt;<a class="code" href="struct__FC__IntStringPair.html#6b1ea39a8804c3b61510bba345bb3d40">string</a>);
<a name="l01380"></a>01380      free(blob);
<a name="l01381"></a>01381       }
<a name="l01382"></a>01382       <a class="code" href="group__SimpleDataObjects.html#g3e9fd6e342884a7dba87aa6637aa7aee">fc_freeSortedBlobArray</a>(sba_p);
<a name="l01383"></a>01383     }
<a name="l01384"></a>01384   }
<a name="l01385"></a>01385 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3ed8b6b23ed87cdd7ff49987ef011f2b"></a><!-- doxytag: member="fileio.c::_fc_initFileIO" ref="g3ed8b6b23ed87cdd7ff49987ef011f2b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_initFileIO           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initial for File IO. 
<p>
<b>Description:</b> <p>
This sets up stuff for FILE IO<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000027">Todo:</a></b></dt><dd>? could have flags so that specific type of file IO is not initialized until use--but there could possibly be stuff that you'd want to do up front ....</dd></dl>
<b>Modifications:</b> <ul>
<li>7/19/2005 WSD, created to better abstract reading routines. </li></ul>

<p>
Definition at line <a class="el" href="fileio_8c-source.html#l01898">1898</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="exodusio_8c-source.html#l00424">_fc_initExodus()</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="library_8c-source.html#l00172">fc_initLibrary()</a>.<div class="fragment"><pre class="fragment"><a name="l01898"></a>01898                                    {
<a name="l01899"></a>01899   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc, rc_keep = <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01900"></a>01900 
<a name="l01901"></a>01901 <span class="preprocessor">#ifdef HAVE_LIBXML2</span>
<a name="l01902"></a>01902 <span class="preprocessor"></span>  LIBXML_TEST_VERSION
<a name="l01903"></a>01903 <span class="preprocessor">#endif</span>
<a name="l01904"></a>01904 <span class="preprocessor"></span>
<a name="l01905"></a>01905 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l01906"></a>01906 <span class="preprocessor"></span>  rc = <a class="code" href="group__ExodusFileIO.html#gc299b4142156e72695f2f3f37bc6a16d">_fc_initExodus</a>();
<a name="l01907"></a>01907   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01908"></a>01908     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Unable to init Exodus File IO"</span>);
<a name="l01909"></a>01909     rc_keep = rc;
<a name="l01910"></a>01910   }
<a name="l01911"></a>01911 <span class="preprocessor">#endif</span>
<a name="l01912"></a>01912 <span class="preprocessor"></span>  <span class="comment">// nothing for LSDyna</span>
<a name="l01913"></a>01913   <span class="keywordflow">return</span> rc_keep;
<a name="l01914"></a>01914 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8d39a476bfae6661264328aba451244e"></a><!-- doxytag: member="fileio.c::_fc_makeMeshFromFiles" ref="g8d39a476bfae6661264328aba451244e" args="(FC_Dataset dataset, char *vertfilename, char *elemfilename, FC_Mesh *mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_makeMeshFromFiles           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>vertfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>elemfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> *&nbsp;</td>
          <td class="paramname"> <em>mesh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read in vert and elem files and make a mesh. 
<p>
<b>Description:</b> <p>
This routine is used to bootstrap example dataset files.<p>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset to add mesh too. </td></tr>
<tr><td valign="top"><em>vertfilename</em>&nbsp;</td><td>
input - file with vertex coords </td></tr>
<tr><td valign="top"><em>elemfilename</em>&nbsp;</td><td>
input - file with element conns </td></tr>
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
output - the created mesh. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l00462">462</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="fileio_8c-source.html#l00210">_fc_readElementFile()</a>, <a class="el" href="fileio_8c-source.html#l00132">_fc_readVertexFile()</a>, <a class="el" href="mesh_8c-source.html#l00119">fc_createMesh()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="dataset_8c-source.html#l00762">fc_isDatasetValid()</a>, <a class="el" href="base_8c-source.html#l00773">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="mesh_8c-source.html#l00259">fc_setMeshCoordsPtr()</a>, <a class="el" href="mesh_8c-source.html#l00391">fc_setMeshElementConnsPtr()</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.<div class="fragment"><pre class="fragment"><a name="l00467"></a>00467   {
<a name="l00468"></a>00468   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00469"></a>00469   <span class="keywordtype">int</span> numVert, numElem, temp_numVert, numDim;
<a name="l00470"></a>00470   <span class="keywordtype">char</span>* name;
<a name="l00471"></a>00471   <a class="code" href="group__DataTypes.html#g5d0bf8bd47afb81d89d4c5d60c7d62b4">FC_ElementType</a> elemType;
<a name="l00472"></a>00472   <span class="keywordtype">double</span>* coords;
<a name="l00473"></a>00473   <span class="keywordtype">int</span>* conns;
<a name="l00474"></a>00474 
<a name="l00475"></a>00475   <span class="comment">// default return</span>
<a name="l00476"></a>00476   <span class="keywordflow">if</span> (mesh)
<a name="l00477"></a>00477     *mesh = <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>;
<a name="l00478"></a>00478 
<a name="l00479"></a>00479   <span class="comment">// check inputs</span>
<a name="l00480"></a>00480   <span class="keywordflow">if</span> (!<a class="code" href="group__Dataset.html#g77092c7248e1cff8cf5a4035e19658da">fc_isDatasetValid</a>(dataset) || !vertfilename || !elemfilename || !mesh)
<a name="l00481"></a>00481     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00482"></a>00482   
<a name="l00483"></a>00483   <span class="comment">// Get info we need</span>
<a name="l00484"></a>00484   rc = <a class="code" href="group__PrivateFileIO.html#gea1070ada8cacfb9e2028a7c6aa07b11">_fc_readVertexFile</a>(vertfilename, &amp;numVert, &amp;numDim, &amp;coords);
<a name="l00485"></a>00485   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00486"></a>00486     <span class="keywordflow">return</span> rc;
<a name="l00487"></a>00487   rc = <a class="code" href="group__PrivateFileIO.html#g1fbb524b92169e663ad9c68a0ccf0572">_fc_readElementFile</a>(elemfilename, &amp;temp_numVert, &amp;numElem, &amp;elemType,
<a name="l00488"></a>00488                   &amp;name, &amp;conns);
<a name="l00489"></a>00489   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00490"></a>00490     free(coords);
<a name="l00491"></a>00491     <span class="keywordflow">return</span> rc;
<a name="l00492"></a>00492   }
<a name="l00493"></a>00493 
<a name="l00494"></a>00494   <span class="comment">// a little more checking</span>
<a name="l00495"></a>00495   <span class="keywordflow">if</span> (temp_numVert != numVert) {
<a name="l00496"></a>00496     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"The number of verts in vertfile '%s' and "</span>
<a name="l00497"></a>00497                  <span class="stringliteral">"elemfile '%s' do not agree (%d != %d)"</span>,
<a name="l00498"></a>00498                  vertfilename, elemfilename, numVert, temp_numVert);
<a name="l00499"></a>00499     free(coords);
<a name="l00500"></a>00500     free(conns);
<a name="l00501"></a>00501     free(name);
<a name="l00502"></a>00502     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00503"></a>00503   }
<a name="l00504"></a>00504 
<a name="l00505"></a>00505   <span class="comment">// Make the mesh</span>
<a name="l00506"></a>00506   rc = <a class="code" href="group__Mesh.html#gfeb2fbc7f7fce6d00b6946d43b56e0bb">fc_createMesh</a>(dataset, name, mesh);
<a name="l00507"></a>00507   free(name);
<a name="l00508"></a>00508   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00509"></a>00509     free(coords);
<a name="l00510"></a>00510     free(conns);
<a name="l00511"></a>00511     <span class="keywordflow">return</span> rc;
<a name="l00512"></a>00512   }
<a name="l00513"></a>00513   rc = <a class="code" href="group__Mesh.html#gd49edafdfdda60b392d3a24803869b50">fc_setMeshCoordsPtr</a>(*mesh, numDim, numVert, coords);
<a name="l00514"></a>00514   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00515"></a>00515     free(coords);
<a name="l00516"></a>00516     free(conns);
<a name="l00517"></a>00517     <span class="keywordflow">return</span> rc;
<a name="l00518"></a>00518   }
<a name="l00519"></a>00519   rc = <a class="code" href="group__Mesh.html#gbb354f851c7ec2f20f2921fd5a76cf02">fc_setMeshElementConnsPtr</a>(*mesh, elemType, numElem, conns);
<a name="l00520"></a>00520   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00521"></a>00521     free(conns);
<a name="l00522"></a>00522     <span class="keywordflow">return</span> rc;
<a name="l00523"></a>00523   }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00526"></a>00526 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g2a26a9b0e63254bedc3b63bb8f9e54c9"></a><!-- doxytag: member="fileio.c::_fc_makeVariableFromFile" ref="g2a26a9b0e63254bedc3b63bb8f9e54c9" args="(FC_Mesh mesh, char *datafilename, FC_Variable *variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_makeVariableFromFile           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>datafilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read in data file and add to a mesh. 
<p>
<b>Description:</b> <p>
This routine is used to bootstrap example dataset files.<p>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh to add data too. </td></tr>
<tr><td valign="top"><em>datafilename</em>&nbsp;</td><td>
input - file with data values </td></tr>
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
output - the created variable. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l00539">539</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="fileio_8c-source.html#l00335">_fc_readDataFile()</a>, <a class="el" href="variable_8c-source.html#l00284">fc_createVariable()</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l02518">fc_getMeshNumEntity()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="mesh_8c-source.html#l01961">fc_isMeshValid()</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="variable_8c-source.html#l00602">fc_setVariableDataPtr()</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.<div class="fragment"><pre class="fragment"><a name="l00543"></a>00543   {
<a name="l00544"></a>00544   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00545"></a>00545   <span class="keywordtype">int</span> numPoint, numComp, numEntity;
<a name="l00546"></a>00546   <span class="keywordtype">char</span>* name;
<a name="l00547"></a>00547   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l00548"></a>00548   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathType;
<a name="l00549"></a>00549   <span class="keywordtype">float</span>* data;
<a name="l00550"></a>00550 
<a name="l00551"></a>00551   <span class="comment">// default return</span>
<a name="l00552"></a>00552   <span class="keywordflow">if</span> (variable)
<a name="l00553"></a>00553     *variable = <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555   <span class="comment">// check inputs</span>
<a name="l00556"></a>00556   <span class="keywordflow">if</span> (!<a class="code" href="group__Mesh.html#gdc4cdd6e7f6a9151458bcb2c25715fd5">fc_isMeshValid</a>(mesh) || !datafilename || !variable)
<a name="l00557"></a>00557     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00558"></a>00558   
<a name="l00559"></a>00559   <span class="comment">// Get info we need</span>
<a name="l00560"></a>00560   rc = <a class="code" href="group__PrivateFileIO.html#g4d826e51d3a8150d155124274b411056">_fc_readDataFile</a>(datafilename, &amp;numPoint, &amp;numComp, &amp;assoc, &amp;mathType, 
<a name="l00561"></a>00561                &amp;name, &amp;data);
<a name="l00562"></a>00562   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00563"></a>00563     <span class="keywordflow">return</span> rc;
<a name="l00564"></a>00564 
<a name="l00565"></a>00565   <span class="comment">// A little more checking</span>
<a name="l00566"></a>00566   rc = <a class="code" href="group__Mesh.html#gf169a555056c84bdfd59839bab4f8d76">fc_getMeshNumEntity</a>(mesh, assoc, &amp;numEntity);
<a name="l00567"></a>00567   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00568"></a>00568     <span class="keywordflow">return</span> rc;
<a name="l00569"></a>00569   <span class="keywordflow">if</span> (numEntity != numPoint) {
<a name="l00570"></a>00570     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"The number of mesh entities in datafile '%s' "</span>
<a name="l00571"></a>00571                  <span class="stringliteral">"does not agree with the mesh (%d != %d)"</span>,
<a name="l00572"></a>00572                  datafilename, numPoint, numEntity);
<a name="l00573"></a>00573     free(data);
<a name="l00574"></a>00574     free(name);
<a name="l00575"></a>00575     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00576"></a>00576   }
<a name="l00577"></a>00577 
<a name="l00578"></a>00578   <span class="comment">// Make the variable</span>
<a name="l00579"></a>00579   rc = <a class="code" href="group__Variable.html#g2f498c4fbd85d8094f0f640a17341cb3">fc_createVariable</a>(mesh, name, variable);
<a name="l00580"></a>00580   free(name);
<a name="l00581"></a>00581   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00582"></a>00582     free(data);
<a name="l00583"></a>00583     <span class="keywordflow">return</span> rc;
<a name="l00584"></a>00584   }
<a name="l00585"></a>00585   rc = <a class="code" href="group__Variable.html#g4491a3d96b7252fd5d0de54089d6838d">fc_setVariableDataPtr</a>(*variable, numPoint, numComp, assoc, mathType, 
<a name="l00586"></a>00586                     <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>, data);
<a name="l00587"></a>00587   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00588"></a>00588     free(data);
<a name="l00589"></a>00589     <span class="keywordflow">return</span> rc;
<a name="l00590"></a>00590   }
<a name="l00591"></a>00591 
<a name="l00592"></a>00592   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00593"></a>00593 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g4d826e51d3a8150d155124274b411056"></a><!-- doxytag: member="fileio.c::_fc_readDataFile" ref="g4d826e51d3a8150d155124274b411056" args="(char *datafilename, int *numPoint, int *numComp, FC_AssociationType *assoc, FC_MathType *mathType, char **name, float **data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_readDataFile           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>datafilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numComp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> *&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *&nbsp;</td>
          <td class="paramname"> <em>mathType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float **&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read FC data file. 
<p>
<b>Description:</b> <p>
This routine is used to bootstrap example dataset files. The file contains data values for a mesh. The values are returned interleaved, e.g. Point0Comp0 Point0Comp1 .. Point0CompN Point1Comp0 Point1Comp1 .. Point1CompN ... PointMComp0 PointMComp1 .. PointMCompN.<p>
Only supports scalars, 3D vectors and 3 component symmetric tensors.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000021">Todo:</a></b></dt><dd>Make this read doubles? or make able to read multiple types</dd></dl>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD, created.</li><li>5/11/2006 WSD modified to read vectors and 3 component symtensor. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>datafilename</em>&nbsp;</td><td>
input - file with data values </td></tr>
<tr><td valign="top"><em>numPoint</em>&nbsp;</td><td>
output - number of data points </td></tr>
<tr><td valign="top"><em>numComp</em>&nbsp;</td><td>
output - number of components </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
output - how data is associated with mesh </td></tr>
<tr><td valign="top"><em>mathType</em>&nbsp;</td><td>
output - math type of data (scalar or vector) </td></tr>
<tr><td valign="top"><em>name</em>&nbsp;</td><td>
output - name of variable (user responsible for freeing) </td></tr>
<tr><td valign="top"><em>data</em>&nbsp;</td><td>
output - data values </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l00335">335</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3bc4bd4318d6c17e9cbd658c05ad858b8">FC_MT_SYMTENSOR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b367e06c1812f7a0127035e27d14fd597d">FC_MT_VECTOR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="fileio_8c-source.html#l00539">_fc_makeVariableFromFile()</a>.<div class="fragment"><pre class="fragment"><a name="l00343"></a>00343   {
<a name="l00344"></a>00344   <span class="keywordtype">int</span> i, count;
<a name="l00345"></a>00345   <span class="keywordtype">int</span> temp_numPoint, temp_numComp;
<a name="l00346"></a>00346   FILE* datafile;
<a name="l00347"></a>00347   <span class="keywordtype">char</span> temp_name[1024];
<a name="l00348"></a>00348   <span class="keywordtype">float</span>* temp_data;
<a name="l00349"></a>00349   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> temp_assoc;
<a name="l00350"></a>00350   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> temp_mathType;
<a name="l00351"></a>00351 
<a name="l00352"></a>00352   <span class="comment">// default return</span>
<a name="l00353"></a>00353   <span class="keywordflow">if</span> (numPoint)
<a name="l00354"></a>00354     *numPoint = -1;
<a name="l00355"></a>00355   <span class="keywordflow">if</span> (numComp)
<a name="l00356"></a>00356     *numComp = -1;
<a name="l00357"></a>00357   <span class="keywordflow">if</span> (assoc)
<a name="l00358"></a>00358     *assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>;
<a name="l00359"></a>00359   <span class="keywordflow">if</span> (mathType)
<a name="l00360"></a>00360     *mathType = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>;
<a name="l00361"></a>00361   <span class="keywordflow">if</span> (name)
<a name="l00362"></a>00362     *name = NULL;
<a name="l00363"></a>00363   <span class="keywordflow">if</span> (data)
<a name="l00364"></a>00364     *data = NULL;
<a name="l00365"></a>00365 
<a name="l00366"></a>00366   <span class="comment">// check inputs</span>
<a name="l00367"></a>00367   <span class="keywordflow">if</span> (!datafilename || !numPoint || !numComp || !assoc || !mathType ||
<a name="l00368"></a>00368       !name || !data)
<a name="l00369"></a>00369     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00370"></a>00370   
<a name="l00371"></a>00371   <span class="comment">// Attempt to open the file</span>
<a name="l00372"></a>00372   datafile = fopen(datafilename, <span class="stringliteral">"r"</span>);
<a name="l00373"></a>00373   <span class="keywordflow">if</span> (!datafile) {
<a name="l00374"></a>00374     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Could not open data file '%s'"</span>, datafilename);
<a name="l00375"></a>00375     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>;
<a name="l00376"></a>00376   }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378   <span class="comment">// Read metadata</span>
<a name="l00379"></a>00379   count = fscanf(datafile, <span class="stringliteral">"%d"</span>, &amp;temp_numPoint);
<a name="l00380"></a>00380   <span class="keywordflow">if</span> (count != 1 || temp_numPoint &lt; 1) {
<a name="l00381"></a>00381     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error reading number of points in data "</span>
<a name="l00382"></a>00382                  <span class="stringliteral">"file '%s'"</span>, datafilename);
<a name="l00383"></a>00383     fclose(datafile);
<a name="l00384"></a>00384     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00385"></a>00385   }
<a name="l00386"></a>00386   fscanf(datafile, <span class="stringliteral">"%s\n"</span>, temp_name);
<a name="l00387"></a>00387   <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"VERTEX"</span>))
<a name="l00388"></a>00388     temp_assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>;
<a name="l00389"></a>00389   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"ELEMENT"</span>))
<a name="l00390"></a>00390     temp_assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a>;
<a name="l00391"></a>00391   <span class="keywordflow">else</span> {
<a name="l00392"></a>00392     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"unknown assoc type encountered '%s'"</span>,
<a name="l00393"></a>00393                  temp_name);
<a name="l00394"></a>00394     fclose(datafile);
<a name="l00395"></a>00395     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00396"></a>00396   }
<a name="l00397"></a>00397   fscanf(datafile, <span class="stringliteral">"%s\n"</span>, temp_name);
<a name="l00398"></a>00398   <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"SCALAR"</span>)) {
<a name="l00399"></a>00399     temp_numComp = 1; 
<a name="l00400"></a>00400     temp_mathType = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>;
<a name="l00401"></a>00401   }
<a name="l00402"></a>00402   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"VECTOR"</span>)) {
<a name="l00403"></a>00403     temp_numComp = 3;  <span class="comment">// ASSUMPTION!</span>
<a name="l00404"></a>00404     temp_mathType = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b367e06c1812f7a0127035e27d14fd597d">FC_MT_VECTOR</a>;
<a name="l00405"></a>00405   }
<a name="l00406"></a>00406   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"SYMTENSOR"</span>)) {
<a name="l00407"></a>00407     temp_numComp = 3;  <span class="comment">// ASSUMPTION!</span>
<a name="l00408"></a>00408     temp_mathType = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3bc4bd4318d6c17e9cbd658c05ad858b8">FC_MT_SYMTENSOR</a>;
<a name="l00409"></a>00409   }
<a name="l00410"></a>00410   <span class="keywordflow">else</span> {
<a name="l00411"></a>00411     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"unknown math type encountered '%s'"</span>,
<a name="l00412"></a>00412                  temp_name);
<a name="l00413"></a>00413     fclose(datafile);
<a name="l00414"></a>00414     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00415"></a>00415   }
<a name="l00416"></a>00416   fscanf(datafile, <span class="stringliteral">"%[^\n]"</span>, temp_name); <span class="comment">// now the mesh name</span>
<a name="l00417"></a>00417 
<a name="l00418"></a>00418   <span class="comment">// Read conns</span>
<a name="l00419"></a>00419   temp_data = malloc(temp_numPoint*temp_numComp*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));
<a name="l00420"></a>00420   <span class="keywordflow">if</span> (!temp_data) {
<a name="l00421"></a>00421     fclose(datafile);
<a name="l00422"></a>00422     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00423"></a>00423   }
<a name="l00424"></a>00424   <span class="keywordflow">for</span> (i = 0; i &lt; temp_numPoint*temp_numComp; i++) {
<a name="l00425"></a>00425     <span class="keywordflow">if</span> (fscanf(datafile, <span class="stringliteral">"%f"</span>, &amp;temp_data[i]) != 1) {
<a name="l00426"></a>00426       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error reading data for point %d"</span>,
<a name="l00427"></a>00427                    i/temp_numComp);
<a name="l00428"></a>00428       free(temp_data);
<a name="l00429"></a>00429       fclose(datafile);
<a name="l00430"></a>00430       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>;
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432   }
<a name="l00433"></a>00433   fclose(datafile);
<a name="l00434"></a>00434 
<a name="l00435"></a>00435   <span class="comment">// All done</span>
<a name="l00436"></a>00436   *name = malloc((strlen(temp_name)+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l00437"></a>00437   <span class="keywordflow">if</span> (!(*name)) {
<a name="l00438"></a>00438     free(temp_data);
<a name="l00439"></a>00439     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00440"></a>00440   }
<a name="l00441"></a>00441   *numComp = temp_numComp;
<a name="l00442"></a>00442   *numPoint = temp_numPoint;
<a name="l00443"></a>00443   *assoc = temp_assoc;
<a name="l00444"></a>00444   *mathType = temp_mathType;
<a name="l00445"></a>00445   strcpy(*name, temp_name);
<a name="l00446"></a>00446   *data = temp_data;
<a name="l00447"></a>00447   
<a name="l00448"></a>00448   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00449"></a>00449 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g1fbb524b92169e663ad9c68a0ccf0572"></a><!-- doxytag: member="fileio.c::_fc_readElementFile" ref="g1fbb524b92169e663ad9c68a0ccf0572" args="(char *elemfilename, int *numVert, int *numElem, FC_ElementType *elemType, char **name, int **conns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_readElementFile           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>elemfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numElem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g5d0bf8bd47afb81d89d4c5d60c7d62b4">FC_ElementType</a> *&nbsp;</td>
          <td class="paramname"> <em>elemType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>conns</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read FC element file. 
<p>
<b>Description:</b> <p>
This routine is used to bootstrap example dataset files. The file contains the element connetivities for a mesh. The conns are returned interleaved, e.g. Elem0Vert0 Elem0Vert1 .. Elem0VertN Elem1Vert0 Elem1Vert1 .. Elem1VertN ... ElemMVert0 ElemMVert1 .. ElemMVertN.<p>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>elemfilename</em>&nbsp;</td><td>
input - file with element conns </td></tr>
<tr><td valign="top"><em>numVert</em>&nbsp;</td><td>
output - number of vertices </td></tr>
<tr><td valign="top"><em>numElem</em>&nbsp;</td><td>
output - number of elements </td></tr>
<tr><td valign="top"><em>elemType</em>&nbsp;</td><td>
output - element type </td></tr>
<tr><td valign="top"><em>name</em>&nbsp;</td><td>
output - name of mesh (user responsible for freeing </td></tr>
<tr><td valign="top"><em>conns</em>&nbsp;</td><td>
output - element conns </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l00210">210</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b49e84aa94138112a229fbaf4f69b4735b">FC_ET_HEX</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b4e17a2f7fa15c69d4f9c2f89ecbab0c18">FC_ET_LINE</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b4011f9f91ef1e03bf40940c68b44f4c30">FC_ET_POINT</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b401f884cd916ee4eda7dbbc791446b9f1">FC_ET_PRISM</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b43b1aa291ea6a8432b07075f53b38756d">FC_ET_PYRAMID</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b406121f0d65d618dcb6111ba50740b4ad">FC_ET_QUAD</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b493889d88ac4d5cbd3f0c5b6ddcb7022d">FC_ET_TET</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b4eb83ad249f4296eaf2609e27b6a59aa1">FC_ET_TRI</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b482f13396326035faaa6778b457101a3e">FC_ET_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>, <a class="el" href="base_8c-source.html#l00549">fc_getElementTypeNumVertex()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="fileio_8c-source.html#l00462">_fc_makeMeshFromFiles()</a>.<div class="fragment"><pre class="fragment"><a name="l00217"></a>00217   {
<a name="l00218"></a>00218   <span class="keywordtype">int</span> i, count;
<a name="l00219"></a>00219   <span class="keywordtype">int</span> numVertPerElem, temp_numVert, temp_numElem;
<a name="l00220"></a>00220   FILE* elemfile;
<a name="l00221"></a>00221   <span class="keywordtype">char</span> temp_name[1024];
<a name="l00222"></a>00222   <a class="code" href="group__DataTypes.html#g5d0bf8bd47afb81d89d4c5d60c7d62b4">FC_ElementType</a> temp_elemType;
<a name="l00223"></a>00223   <span class="keywordtype">int</span>* temp_conns;
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <span class="comment">// default return</span>
<a name="l00226"></a>00226   <span class="keywordflow">if</span> (numVert)
<a name="l00227"></a>00227     *numVert = -1;
<a name="l00228"></a>00228   <span class="keywordflow">if</span> (numElem)
<a name="l00229"></a>00229     *numElem = -1;
<a name="l00230"></a>00230   <span class="keywordflow">if</span> (elemType)
<a name="l00231"></a>00231     *elemType = <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b482f13396326035faaa6778b457101a3e">FC_ET_UNKNOWN</a>;
<a name="l00232"></a>00232   <span class="keywordflow">if</span> (name)
<a name="l00233"></a>00233     *name = NULL;
<a name="l00234"></a>00234   <span class="keywordflow">if</span> (conns)
<a name="l00235"></a>00235     *conns = NULL;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237   <span class="comment">// check inputs</span>
<a name="l00238"></a>00238   <span class="keywordflow">if</span> (!elemfilename || !numVert || !numElem || !elemType || !name || !conns)
<a name="l00239"></a>00239     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00240"></a>00240   
<a name="l00241"></a>00241   <span class="comment">// Attempt to open the file</span>
<a name="l00242"></a>00242   elemfile = fopen(elemfilename, <span class="stringliteral">"r"</span>);
<a name="l00243"></a>00243   <span class="keywordflow">if</span> (!elemfile) {
<a name="l00244"></a>00244     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Could not open elem file '%s'"</span>, elemfilename);
<a name="l00245"></a>00245     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>;
<a name="l00246"></a>00246   }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248   <span class="comment">// Read metadata</span>
<a name="l00249"></a>00249   <span class="comment">// FIX? don't have to put in mesh name?</span>
<a name="l00250"></a>00250   count = fscanf(elemfile, <span class="stringliteral">"%d%d"</span>, &amp;temp_numVert, &amp;temp_numElem);
<a name="l00251"></a>00251   <span class="keywordflow">if</span> (count != 2 || temp_numVert &lt; 1 || temp_numElem &lt; 1) {
<a name="l00252"></a>00252     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error reading number of verts and elems in "</span>
<a name="l00253"></a>00253                  <span class="stringliteral">"elem file '%s'"</span>, elemfilename);
<a name="l00254"></a>00254     fclose(elemfile);
<a name="l00255"></a>00255     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00256"></a>00256   }
<a name="l00257"></a>00257   fscanf(elemfile, <span class="stringliteral">"%s\n"</span>, temp_name);
<a name="l00258"></a>00258   <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"POINT"</span>))
<a name="l00259"></a>00259     temp_elemType = <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b4011f9f91ef1e03bf40940c68b44f4c30">FC_ET_POINT</a>;
<a name="l00260"></a>00260   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"LINE"</span>))
<a name="l00261"></a>00261     temp_elemType = <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b4e17a2f7fa15c69d4f9c2f89ecbab0c18">FC_ET_LINE</a>;
<a name="l00262"></a>00262   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"TRI"</span>))
<a name="l00263"></a>00263     temp_elemType = <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b4eb83ad249f4296eaf2609e27b6a59aa1">FC_ET_TRI</a>;
<a name="l00264"></a>00264   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"QUAD"</span>))
<a name="l00265"></a>00265     temp_elemType = <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b406121f0d65d618dcb6111ba50740b4ad">FC_ET_QUAD</a>;
<a name="l00266"></a>00266   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"TET"</span>))
<a name="l00267"></a>00267     temp_elemType = <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b493889d88ac4d5cbd3f0c5b6ddcb7022d">FC_ET_TET</a>;
<a name="l00268"></a>00268   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"PYRAMID"</span>))
<a name="l00269"></a>00269     temp_elemType = <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b43b1aa291ea6a8432b07075f53b38756d">FC_ET_PYRAMID</a>;
<a name="l00270"></a>00270   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"PRISM"</span>))
<a name="l00271"></a>00271     temp_elemType = <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b401f884cd916ee4eda7dbbc791446b9f1">FC_ET_PRISM</a>;
<a name="l00272"></a>00272   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(temp_name, <span class="stringliteral">"HEX"</span>))
<a name="l00273"></a>00273     temp_elemType = <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b49e84aa94138112a229fbaf4f69b4735b">FC_ET_HEX</a>;
<a name="l00274"></a>00274   <span class="keywordflow">else</span> {
<a name="l00275"></a>00275     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"unknown element type encountered '%s'"</span>,
<a name="l00276"></a>00276                  temp_name);
<a name="l00277"></a>00277     fclose(elemfile);
<a name="l00278"></a>00278     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00279"></a>00279   }
<a name="l00280"></a>00280   numVertPerElem = <a class="code" href="group__DataTypes.html#gf75ed80296bf7b5631bf464ea4a4de25">fc_getElementTypeNumVertex</a>(temp_elemType);
<a name="l00281"></a>00281   fscanf(elemfile, <span class="stringliteral">"%[^\n]"</span>, temp_name); <span class="comment">// now the mesh name</span>
<a name="l00282"></a>00282 
<a name="l00283"></a>00283   <span class="comment">// Read conns</span>
<a name="l00284"></a>00284   temp_conns = malloc(temp_numElem*numVertPerElem*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00285"></a>00285   <span class="keywordflow">if</span> (!temp_conns) {
<a name="l00286"></a>00286     fclose(elemfile);
<a name="l00287"></a>00287     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00288"></a>00288   }
<a name="l00289"></a>00289   <span class="keywordflow">for</span> (i = 0; i &lt; temp_numElem*numVertPerElem; i++) {
<a name="l00290"></a>00290     <span class="keywordflow">if</span> (fscanf(elemfile, <span class="stringliteral">"%d"</span>, &amp;temp_conns[i]) != 1) {
<a name="l00291"></a>00291       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error reading conns for element %d"</span>,
<a name="l00292"></a>00292                    i/numVertPerElem);
<a name="l00293"></a>00293       free(temp_conns);
<a name="l00294"></a>00294       fclose(elemfile);
<a name="l00295"></a>00295       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>;
<a name="l00296"></a>00296     }
<a name="l00297"></a>00297   }
<a name="l00298"></a>00298   fclose(elemfile);
<a name="l00299"></a>00299 
<a name="l00300"></a>00300   <span class="comment">// All done</span>
<a name="l00301"></a>00301   *name = malloc((strlen(temp_name)+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l00302"></a>00302   <span class="keywordflow">if</span> (!(*name)) {
<a name="l00303"></a>00303     free(temp_conns);
<a name="l00304"></a>00304     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00305"></a>00305   }
<a name="l00306"></a>00306   strcpy(*name, temp_name);
<a name="l00307"></a>00307   *numVert = temp_numVert;
<a name="l00308"></a>00308   *numElem = temp_numElem;
<a name="l00309"></a>00309   *elemType = temp_elemType;
<a name="l00310"></a>00310   *conns = temp_conns;
<a name="l00311"></a>00311   
<a name="l00312"></a>00312   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00313"></a>00313 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g6b7d22250488880068cdc93e24a9ca06"></a><!-- doxytag: member="fileio.c::_fc_readMeshCoords" ref="g6b7d22250488880068cdc93e24a9ca06" args="(FC_Mesh mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_readMeshCoords           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read coords from file into a mesh. 
<p>
<b>Description:</b> <p>
Reads vertex coordinates from file into a mesh. This is a wrapper that chooses the proper implentation based on the file type.<p>
<b>Modifications:</b> <ul>
<li>7/13/2005 WSD, created to better abstract reading routines. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh to read into </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l02006">2006</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="exodusio_8c-source.html#l01334">_fc_readExodusMeshCoords()</a>, <a class="el" href="lsdynaio_8c-source.html#l01601">_fc_readLSDynaMeshCoords()</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="datasetP_8h-source.html#l00080">_FC_DsSlot::fileType</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="mesh_8c-source.html#l02655">fc_getMeshCoordsPtr()</a>.<div class="fragment"><pre class="fragment"><a name="l02008"></a>02008   {
<a name="l02009"></a>02009   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l02010"></a>02010   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02011"></a>02011 
<a name="l02012"></a>02012   <span class="comment">// check input</span>
<a name="l02013"></a>02013   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l02014"></a>02014   <span class="keywordflow">if</span> (!meshSlot || !meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>) {
<a name="l02015"></a>02015     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02016"></a>02016     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02017"></a>02017   }
<a name="l02018"></a>02018 
<a name="l02019"></a>02019   <span class="comment">// log message</span>
<a name="l02020"></a>02020   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Reading coords for mesh '%s'"</span>, 
<a name="l02021"></a>02021                 meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02022"></a>02022 
<a name="l02023"></a>02023   <span class="comment">// Call format specific routines</span>
<a name="l02024"></a>02024   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#553d7d0470e312f24080c5ed49334ead">ds</a>);
<a name="l02025"></a>02025   <span class="keywordflow">switch</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#202208502c0ef7a4dc5b7a7616f1f2ef">fileType</a>) {
<a name="l02026"></a>02026   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>:
<a name="l02027"></a>02027 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l02028"></a>02028 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="group__ExodusFileIO.html#gd2c121960951f2e1e84027b6d1cff0e1">_fc_readExodusMeshCoords</a>(mesh);
<a name="l02029"></a>02029 <span class="preprocessor">#else</span>
<a name="l02030"></a>02030 <span class="preprocessor"></span>    <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Exodus module not available"</span>);
<a name="l02031"></a>02031     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02032"></a>02032 <span class="preprocessor">#endif</span>
<a name="l02033"></a>02033 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>: 
<a name="l02034"></a>02034     <span class="keywordflow">return</span> <a class="code" href="group__LSDynaFileIO.html#g85a880f69725b8a97145ae9b7248ec25">_fc_readLSDynaMeshCoords</a>(mesh);
<a name="l02035"></a>02035   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>:
<a name="l02036"></a>02036     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Called without a file type"</span>);
<a name="l02037"></a>02037     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02038"></a>02038   }
<a name="l02039"></a>02039 
<a name="l02040"></a>02040   <span class="comment">// shouldn't reach this point</span>
<a name="l02041"></a>02041   <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Unrecognized file type"</span>);
<a name="l02042"></a>02042   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02043"></a>02043 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g711fdc3aebfbf372da3f2c68a90557c9"></a><!-- doxytag: member="fileio.c::_fc_readMeshElemConns" ref="g711fdc3aebfbf372da3f2c68a90557c9" args="(FC_Mesh mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_readMeshElemConns           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read element conns from file into a mesh. 
<p>
<b>Description:</b> <p>
Reads element connectivities from file into a mesh. This is a wrapper that chooses the proper implentation based on the file type.<p>
<b>Modifications:</b> <ul>
<li>7/13/2005 WSD, created to better abstract reading routines. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh to read into </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l02057">2057</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="exodusio_8c-source.html#l01393">_fc_readExodusMeshElemConns()</a>, <a class="el" href="lsdynaio_8c-source.html#l01718">_fc_readLSDynaMeshElemConns()</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="datasetP_8h-source.html#l00080">_FC_DsSlot::fileType</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="mesh_8c-source.html#l02981">fc_getMeshElementConnsPtr()</a>.<div class="fragment"><pre class="fragment"><a name="l02059"></a>02059   {
<a name="l02060"></a>02060   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l02061"></a>02061   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02062"></a>02062 
<a name="l02063"></a>02063   <span class="comment">// check input</span>
<a name="l02064"></a>02064   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l02065"></a>02065   <span class="keywordflow">if</span> (!meshSlot || !meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>) {
<a name="l02066"></a>02066     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"INPUT ERROR: invalid mesh"</span>);
<a name="l02067"></a>02067     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02068"></a>02068   }
<a name="l02069"></a>02069 
<a name="l02070"></a>02070   <span class="comment">// log message</span>
<a name="l02071"></a>02071   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Reading element conns for mesh '%s'"</span>, 
<a name="l02072"></a>02072                 meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02073"></a>02073 
<a name="l02074"></a>02074   <span class="comment">// Call format specific routines</span>
<a name="l02075"></a>02075   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#553d7d0470e312f24080c5ed49334ead">ds</a>);
<a name="l02076"></a>02076   <span class="keywordflow">switch</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#202208502c0ef7a4dc5b7a7616f1f2ef">fileType</a>) {
<a name="l02077"></a>02077   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>:
<a name="l02078"></a>02078 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l02079"></a>02079 <span class="preprocessor"></span>   <span class="keywordflow">return</span> <a class="code" href="group__ExodusFileIO.html#gb8d95904d81fd9f0e887988c51d34a70">_fc_readExodusMeshElemConns</a>(mesh);
<a name="l02080"></a>02080 <span class="preprocessor">#else</span>
<a name="l02081"></a>02081 <span class="preprocessor"></span>    <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Exodus module not available"</span>);
<a name="l02082"></a>02082     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02083"></a>02083 <span class="preprocessor">#endif</span>
<a name="l02084"></a>02084 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>: 
<a name="l02085"></a>02085     <span class="keywordflow">return</span> <a class="code" href="group__LSDynaFileIO.html#gc32ed1a152397d2db2428379464e05b1">_fc_readLSDynaMeshElemConns</a>(mesh);
<a name="l02086"></a>02086   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>:
<a name="l02087"></a>02087     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Called without a file type"</span>);
<a name="l02088"></a>02088     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02089"></a>02089   }
<a name="l02090"></a>02090 
<a name="l02091"></a>02091   <span class="comment">// shouldn't reach this point</span>
<a name="l02092"></a>02092   <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Unrecognized file type"</span>);
<a name="l02093"></a>02093   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02094"></a>02094 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g7fd390122ab4f73934ab95f22972d806"></a><!-- doxytag: member="fileio.c::_fc_readNamesFile" ref="g7fd390122ab4f73934ab95f22972d806" args="(char *datasetfilename, FC_SortedBlobArray *block_names, FC_SortedBlobArray *nodeset_names, FC_SortedBlobArray *sideset_names)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_readNamesFile           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>datasetfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *&nbsp;</td>
          <td class="paramname"> <em>block_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *&nbsp;</td>
          <td class="paramname"> <em>nodeset_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *&nbsp;</td>
          <td class="paramname"> <em>sideset_names</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read a .names file. 
<p>
<b>Description:</b> <p>
Originally for Exodus files, but being coopted for LSDyna files. File format is 'block' or 'nodeset' or 'sideset' on a single line. All lines between these descriptors are of the listed type.<p>
The returned sorted blob arrays hold pointers to <a class="el" href="struct__FC__IntStringPair.html">_FC_IntStringPair</a> objects. The string on each object will need to be deleted and each object will need to be deleted. A helper function <a class="el" href="group__PrivateFileIO.html#gd96b9f70719cc9b0dd5267981a500d92">_fc_freeNamesFileNames()</a> can be used.<p>
It is not an error to not find a names file and the sorted blob arrays will come back empty.<p>
<b>Modifications:</b> <ul>
<li>6/19/2006 WSD Created to replaced duplicated code in exodusio and lsdynaio modules.</li><li>8/10/2006 WSD Changed to use sorted blob arrays instead of linked lists. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>datasetfilename</em>&nbsp;</td><td>
input - path to and name of dataset file </td></tr>
<tr><td valign="top"><em>block_names</em>&nbsp;</td><td>
output- the block names, caller is responsible for freeing internal data </td></tr>
<tr><td valign="top"><em>nodeset_names</em>&nbsp;</td><td>
output - the nodeset names, caller is responsible for freeing internal data </td></tr>
<tr><td valign="top"><em>sideset_names</em>&nbsp;</td><td>
output - the sideset names, caller is responsible for freeing internal data </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l01253">1253</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="storage_8c-source.html#l00960">fc_addBlobToSortedBlobArray()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>, <a class="el" href="util_8c-source.html#l00824">fc_getBasenameWOExtension()</a>, <a class="el" href="util_8c-source.html#l00743">fc_getDirname()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="storage_8c-source.html#l00789">fc_initSortedBlobArray()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="util_8c-source.html#l00945">fc_intCompare()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="fileioP_8h-source.html#l00119">_FC_IntStringPair::id</a>, and <a class="el" href="fileioP_8h-source.html#l00120">_FC_IntStringPair::string</a>.
<p>
Referenced by <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>.<div class="fragment"><pre class="fragment"><a name="l01262"></a>01262 {
<a name="l01263"></a>01263   <span class="keywordtype">int</span> rc;
<a name="l01264"></a>01264   <span class="keywordtype">char</span>* dirname, *basefilename, *namesfilename;
<a name="l01265"></a>01265   FILE* namesfile;
<a name="l01266"></a>01266   size_t len;
<a name="l01267"></a>01267   <a class="code" href="structFC__SortedBlobArray.html">FC_SortedBlobArray</a> *sba_p;
<a name="l01268"></a>01268   <a class="code" href="struct__FC__IntStringPair.html">_FC_IntStringPair</a> *blob;
<a name="l01269"></a>01269   <span class="keywordtype">char</span> strbuf[1024];  <span class="comment">// FIX!!!! overrun possible!</span>
<a name="l01270"></a>01270 
<a name="l01271"></a>01271   <span class="comment">// default return - leave blob arrays alone</span>
<a name="l01272"></a>01272 
<a name="l01273"></a>01273   <span class="comment">// checkinputs</span>
<a name="l01274"></a>01274   <span class="keywordflow">if</span> (!datasetfilename || !block_names || !nodeset_names || !sideset_names ){
<a name="l01275"></a>01275     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01276"></a>01276   }
<a name="l01277"></a>01277 
<a name="l01278"></a>01278   <span class="comment">// init lists (so will return empties if no file found)</span>
<a name="l01279"></a>01279   rc = <a class="code" href="group__SimpleDataObjects.html#g4c4466bfa0c8c01723d4580473fcb245">fc_initSortedBlobArray</a>(block_names);
<a name="l01280"></a>01280   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01281"></a>01281     <span class="keywordflow">return</span> rc;
<a name="l01282"></a>01282   rc = <a class="code" href="group__SimpleDataObjects.html#g4c4466bfa0c8c01723d4580473fcb245">fc_initSortedBlobArray</a>(nodeset_names);
<a name="l01283"></a>01283   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01284"></a>01284     <span class="keywordflow">return</span> rc;
<a name="l01285"></a>01285   rc = <a class="code" href="group__SimpleDataObjects.html#g4c4466bfa0c8c01723d4580473fcb245">fc_initSortedBlobArray</a>(sideset_names);
<a name="l01286"></a>01286   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01287"></a>01287     <span class="keywordflow">return</span> rc;
<a name="l01288"></a>01288 
<a name="l01289"></a>01289   <span class="comment">// attempt to open the names file</span>
<a name="l01290"></a>01290   dirname = <a class="code" href="group__FilePathUtilities.html#g5b8585efffde7252cd91727e40b3ee95">fc_getDirname</a>(datasetfilename);
<a name="l01291"></a>01291   basefilename = <a class="code" href="group__FilePathUtilities.html#g3d751b21619bdac2b578e3edbb61a775">fc_getBasenameWOExtension</a>(datasetfilename, 1);
<a name="l01292"></a>01292   len = strlen(dirname) + 1 + strlen(basefilename) + 7;
<a name="l01293"></a>01293   namesfilename = (<span class="keywordtype">char</span>*)malloc(len*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l01294"></a>01294   <span class="keywordflow">if</span> (!namesfilename) {
<a name="l01295"></a>01295     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01296"></a>01296     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01297"></a>01297   }
<a name="l01298"></a>01298   <span class="keywordflow">if</span> (dirname != NULL)
<a name="l01299"></a>01299     sprintf(namesfilename, <span class="stringliteral">"%s/%s.names"</span>, dirname, basefilename);
<a name="l01300"></a>01300   <span class="keywordflow">else</span>
<a name="l01301"></a>01301     sprintf(namesfilename, <span class="stringliteral">"%s.names"</span>, basefilename);
<a name="l01302"></a>01302   free(dirname);
<a name="l01303"></a>01303   free(basefilename);
<a name="l01304"></a>01304   namesfile = fopen(namesfilename, <span class="stringliteral">"r"</span>);
<a name="l01305"></a>01305   free(namesfilename);
<a name="l01306"></a>01306 
<a name="l01307"></a>01307   <span class="comment">// early return - no names file</span>
<a name="l01308"></a>01308   <span class="keywordflow">if</span> (!namesfile)
<a name="l01309"></a>01309     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01310"></a>01310 
<a name="l01311"></a>01311   <span class="comment">// scan file</span>
<a name="l01312"></a>01312   <span class="keywordflow">while</span>(fscanf(namesfile, <span class="stringliteral">"%s"</span>, strbuf) &gt; 0) {
<a name="l01313"></a>01313     <span class="keywordflow">if</span> (!strcmp(strbuf, <span class="stringliteral">"blocks"</span>)) 
<a name="l01314"></a>01314       sba_p = block_names; <span class="comment">// switch to block list</span>
<a name="l01315"></a>01315     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(strbuf, <span class="stringliteral">"sidesets"</span>))
<a name="l01316"></a>01316       sba_p = sideset_names; <span class="comment">// switch to sidesets list</span>
<a name="l01317"></a>01317     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(strbuf, <span class="stringliteral">"nodesets"</span>))
<a name="l01318"></a>01318       sba_p = nodeset_names; <span class="comment">// switch to nodests list</span>
<a name="l01319"></a>01319     <span class="keywordflow">else</span> { <span class="comment">// add to current list</span>
<a name="l01320"></a>01320       blob = (<a class="code" href="struct__FC__IntStringPair.html">_FC_IntStringPair</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct__FC__IntStringPair.html">_FC_IntStringPair</a>));
<a name="l01321"></a>01321       <span class="keywordflow">if</span> (blob == NULL) {
<a name="l01322"></a>01322      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01323"></a>01323      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01324"></a>01324       }
<a name="l01325"></a>01325       blob-&gt;<a class="code" href="struct__FC__IntStringPair.html#7ceb15a9a9c546ff360740ba580cbc41">id</a> = atoi(strbuf);
<a name="l01326"></a>01326       fscanf(namesfile, <span class="stringliteral">"%[ \t]"</span>, strbuf); <span class="comment">// discard spaces</span>
<a name="l01327"></a>01327       <span class="keywordflow">if</span> (fscanf(namesfile, <span class="stringliteral">"%[^\n]"</span>, strbuf) &lt; 1) { <span class="comment">// read rest of line</span>
<a name="l01328"></a>01328      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Error reading names from '%s'"</span>,
<a name="l01329"></a>01329                      namesfilename);
<a name="l01330"></a>01330      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>;
<a name="l01331"></a>01331       }
<a name="l01332"></a>01332       blob-&gt;<a class="code" href="struct__FC__IntStringPair.html#6b1ea39a8804c3b61510bba345bb3d40">string</a> = (<span class="keywordtype">char</span>*)malloc((strlen(strbuf)+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l01333"></a>01333       <span class="keywordflow">if</span> (blob-&gt;<a class="code" href="struct__FC__IntStringPair.html#6b1ea39a8804c3b61510bba345bb3d40">string</a> == NULL) {
<a name="l01334"></a>01334      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01335"></a>01335      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01336"></a>01336       }
<a name="l01337"></a>01337       strcpy(blob-&gt;<a class="code" href="struct__FC__IntStringPair.html#6b1ea39a8804c3b61510bba345bb3d40">string</a>, strbuf);
<a name="l01338"></a>01338       <a class="code" href="group__SimpleDataObjects.html#g814151838c85aed15a00447043f72a5d">fc_addBlobToSortedBlobArray</a>(sba_p, blob, <a class="code" href="group__MiscUtilities.html#g2c22d9adffbebb62e0bb6b8f920545a8">fc_intCompare</a>);
<a name="l01339"></a>01339     }
<a name="l01340"></a>01340   }
<a name="l01341"></a>01341 
<a name="l01342"></a>01342   <span class="comment">// all done</span>
<a name="l01343"></a>01343   fclose(namesfile);
<a name="l01344"></a>01344   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01345"></a>01345 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g4128b5820a22c1a92825a15d8f0f2d16"></a><!-- doxytag: member="fileio.c::_fc_readSequenceCoords" ref="g4128b5820a22c1a92825a15d8f0f2d16" args="(FC_Sequence sequence)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_readSequenceCoords           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>sequence</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read coords from file into a sequence. 
<p>
<b>Description:</b> <p>
Reads step coordinates from file into a sequence. This is a wrapper that chooses the proper implentation based on the file type.<p>
<b>Modifications:</b> <ul>
<li>7/13/2005 WSD, created to better abstract reading routines. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>sequence</em>&nbsp;</td><td>
input - sequence to read into </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l01956">1956</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="sequence_8c-source.html#l02130">_fc_getSeqSlot()</a>, <a class="el" href="exodusio_8c-source.html#l01293">_fc_readExodusSequenceCoords()</a>, <a class="el" href="sequenceP_8h-source.html#l00076">_FC_SeqSlot::ds</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00080">_FC_DsSlot::fileType</a>, <a class="el" href="sequenceP_8h-source.html#l00075">_FC_SeqSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="sequence_8c-source.html#l01725">fc_getSequenceCoordsPtr()</a>.<div class="fragment"><pre class="fragment"><a name="l01958"></a>01958   {
<a name="l01959"></a>01959   <a class="code" href="struct__FC__SeqSlot.html">_FC_SeqSlot</a>* seqSlot = <a class="code" href="group__PrivateSequence.html#ge669615c173acc924f9664fa05672e7f">_fc_getSeqSlot</a>(sequence);
<a name="l01960"></a>01960   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l01961"></a>01961 
<a name="l01962"></a>01962   <span class="comment">// check input</span>
<a name="l01963"></a>01963   <span class="keywordflow">if</span> (!seqSlot || !seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#b4ebe9e673fa41268979b4d19bfbcc5a">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>) {
<a name="l01964"></a>01964     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01965"></a>01965     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01966"></a>01966   }
<a name="l01967"></a>01967 
<a name="l01968"></a>01968   <span class="comment">// log message</span>
<a name="l01969"></a>01969   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Reading coords for sequence '%s'"</span>, 
<a name="l01970"></a>01970                 seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#b4ebe9e673fa41268979b4d19bfbcc5a">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01971"></a>01971 
<a name="l01972"></a>01972   <span class="comment">// Call format specific routines</span>
<a name="l01973"></a>01973   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#18a1d8c4ab7c2586678334f1d225b76c">ds</a>);
<a name="l01974"></a>01974   <span class="keywordflow">switch</span>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#202208502c0ef7a4dc5b7a7616f1f2ef">fileType</a>) {
<a name="l01975"></a>01975   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>:
<a name="l01976"></a>01976 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l01977"></a>01977 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="group__ExodusFileIO.html#g1798afda15a913676d59087a81756a43">_fc_readExodusSequenceCoords</a>(sequence);
<a name="l01978"></a>01978 <span class="preprocessor">#else</span>
<a name="l01979"></a>01979 <span class="preprocessor"></span>    <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Exodus module not available"</span>);
<a name="l01980"></a>01980     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01981"></a>01981 <span class="preprocessor">#endif</span>
<a name="l01982"></a>01982 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>:
<a name="l01983"></a>01983     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>; <span class="comment">// do nothing, no lazy capability</span>
<a name="l01984"></a>01984   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>:
<a name="l01985"></a>01985     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Called without a file type"</span>);
<a name="l01986"></a>01986     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01987"></a>01987   }
<a name="l01988"></a>01988 
<a name="l01989"></a>01989   <span class="comment">// shouldn't reach this point</span>
<a name="l01990"></a>01990   <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Unrecognized file type"</span>);
<a name="l01991"></a>01991   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01992"></a>01992 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8cf27614f4ebc6794bb90aed061495e6"></a><!-- doxytag: member="fileio.c::_fc_readSubsetMembers" ref="g8cf27614f4ebc6794bb90aed061495e6" args="(FC_Subset subset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_readSubsetMembers           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a>&nbsp;</td>
          <td class="paramname"> <em>subset</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read subset members from file into a subset. 
<p>
<b>Description:</b> <p>
Reads subset members from file into a subset. This is a wrapper that chooses the proper implentation based on the file type.<p>
<b>Modifications:</b> <ul>
<li>7/13/2005 WSD, created to better abstract reading routines. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>subset</em>&nbsp;</td><td>
input - subset to read into </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l02108">2108</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="subset_8c-source.html#l02596">_fc_getSubSlot()</a>, <a class="el" href="exodusio_8c-source.html#l01475">_fc_readExodusSubsetMembers()</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00080">_FC_DsSlot::fileType</a>, <a class="el" href="subsetP_8h-source.html#l00073">_FC_SubSlot::header</a>, <a class="el" href="subsetP_8h-source.html#l00074">_FC_SubSlot::mesh</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="subset_8c-source.html#l01973">fc_getSubsetMembersAsArray()</a>, <a class="el" href="subset_8c-source.html#l02041">fc_getSubsetMembersAsMask()</a>, and <a class="el" href="subset_8c-source.html#l01920">fc_isMemberInSubset()</a>.<div class="fragment"><pre class="fragment"><a name="l02110"></a>02110   {
<a name="l02111"></a>02111   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l02112"></a>02112   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02113"></a>02113 
<a name="l02114"></a>02114   <span class="comment">// check input</span>
<a name="l02115"></a>02115   <span class="keywordflow">if</span> (!subSlot || !subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>) {
<a name="l02116"></a>02116     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"INPUT ERROR: invalid subSlot"</span>);
<a name="l02117"></a>02117     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02118"></a>02118   }
<a name="l02119"></a>02119 
<a name="l02120"></a>02120   <span class="comment">// log message</span>
<a name="l02121"></a>02121   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Reading members for subset '%s'"</span>, 
<a name="l02122"></a>02122                 subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02123"></a>02123 
<a name="l02124"></a>02124   <span class="comment">// Call format specific routine</span>
<a name="l02125"></a>02125   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(<a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#e2ea84949d74bb96696ee64123ff6f3d">mesh</a>)-&gt;<a class="code" href="struct__FC__MeshSlot.html#553d7d0470e312f24080c5ed49334ead">ds</a>);
<a name="l02126"></a>02126   <span class="keywordflow">switch</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#202208502c0ef7a4dc5b7a7616f1f2ef">fileType</a>) {
<a name="l02127"></a>02127   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>:
<a name="l02128"></a>02128 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l02129"></a>02129 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="group__ExodusFileIO.html#g724dec39f2d702d53dd10f0fdd7bcc88">_fc_readExodusSubsetMembers</a>(subset);
<a name="l02130"></a>02130 <span class="preprocessor">#else</span>
<a name="l02131"></a>02131 <span class="preprocessor"></span>    <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Exodus module not available"</span>);
<a name="l02132"></a>02132     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02133"></a>02133 <span class="preprocessor">#endif</span>
<a name="l02134"></a>02134 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>:
<a name="l02135"></a>02135     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>; <span class="comment">// no subsets in lsdyna</span>
<a name="l02136"></a>02136   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>:
<a name="l02137"></a>02137     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Called without a file type"</span>);
<a name="l02138"></a>02138     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02139"></a>02139   }
<a name="l02140"></a>02140 
<a name="l02141"></a>02141   <span class="comment">// shouldn't reach this point</span>
<a name="l02142"></a>02142   <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Unrecognized file type"</span>);
<a name="l02143"></a>02143   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02144"></a>02144 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gf2f857cebf9330f22adf7ca16f571ea2"></a><!-- doxytag: member="fileio.c::_fc_readVariableData" ref="gf2f857cebf9330f22adf7ca16f571ea2" args="(FC_Variable variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_readVariableData           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read data from file into a variable. 
<p>
<b>Description:</b> <p>
Reads data from file into a variable. This is a wrapper that chooses the proper implentation based on the file type.<p>
<b>Modifications:</b> <ul>
<li>7/13/2005 WSD, created to better abstract reading routines. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable to read into </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l02158">2158</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="exodusio_8c-source.html#l01586">_fc_readExodusVariableData()</a>, <a class="el" href="lsdynaio_8c-source.html#l01873">_fc_readLSDynaVariableData()</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>, <a class="el" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="datasetP_8h-source.html#l00080">_FC_DsSlot::fileType</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>.<div class="fragment"><pre class="fragment"><a name="l02160"></a>02160   {
<a name="l02161"></a>02161   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l02162"></a>02162   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02163"></a>02163   
<a name="l02164"></a>02164   <span class="comment">// check input</span>
<a name="l02165"></a>02165   <span class="keywordflow">if</span> (!varSlot || !varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>) {
<a name="l02166"></a>02166     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"INPUT ERROR: invalid variable"</span>);
<a name="l02167"></a>02167     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02168"></a>02168   }
<a name="l02169"></a>02169 
<a name="l02170"></a>02170   <span class="comment">// log message</span>
<a name="l02171"></a>02171   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Reading data for variable '%s'"</span>, 
<a name="l02172"></a>02172                 varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02173"></a>02173 
<a name="l02174"></a>02174   <span class="comment">// Call format specific routines</span>
<a name="l02175"></a>02175   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a>);
<a name="l02176"></a>02176   <span class="keywordflow">switch</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#202208502c0ef7a4dc5b7a7616f1f2ef">fileType</a>) {
<a name="l02177"></a>02177   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d563b4812ed953ad6ecd01be20b81c46a3">FC_FT_EXODUS</a>:
<a name="l02178"></a>02178 <span class="preprocessor">#ifdef HAVE_EXODUS</span>
<a name="l02179"></a>02179 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="group__ExodusFileIO.html#gd8662242580b0086516334dc29067fe8">_fc_readExodusVariableData</a>(variable);
<a name="l02180"></a>02180 <span class="preprocessor">#else</span>
<a name="l02181"></a>02181 <span class="preprocessor"></span>    <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Exodus module not available"</span>);
<a name="l02182"></a>02182     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02183"></a>02183 <span class="preprocessor">#endif</span>
<a name="l02184"></a>02184 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d5ac975a61bcdfe4349ebbbf1e07483f37">FC_FT_LSDYNA</a>: 
<a name="l02185"></a>02185     <span class="keywordflow">return</span> <a class="code" href="group__LSDynaFileIO.html#g751a74d05546ec17a5719c6910f93925">_fc_readLSDynaVariableData</a>(variable);
<a name="l02186"></a>02186   <span class="keywordflow">case</span> <a class="code" href="group__FileIO.html#gg4647ac3054682609036d15ddf55055d516322a349292a7f09031bbc44421f35c">FC_FT_NONE</a>:
<a name="l02187"></a>02187     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Called without a file type"</span>);
<a name="l02188"></a>02188     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02189"></a>02189   }
<a name="l02190"></a>02190 
<a name="l02191"></a>02191   <span class="comment">// shouldn't reach this point</span>
<a name="l02192"></a>02192   <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Unrecognized file type"</span>);
<a name="l02193"></a>02193   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02194"></a>02194 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gea1070ada8cacfb9e2028a7c6aa07b11"></a><!-- doxytag: member="fileio.c::_fc_readVertexFile" ref="gea1070ada8cacfb9e2028a7c6aa07b11" args="(char *vertfilename, int *numVert, int *numDim, double **coords)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> _fc_readVertexFile           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>vertfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numDim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double **&nbsp;</td>
          <td class="paramname"> <em>coords</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read FC vertex file. 
<p>
<b>Description:</b> <p>
This routine is used to bootstrap example dataset files. The file contains the coordinates of a set of points. The coords are returned interleaved, e.g. Vert0Coord0 Vert0Coord1 Vert0Coord2 Vert1Coord0 Vert1Coord1 Vert1Coord2 ... VertNCoord0 VertNCoord1 VertNCoord2.<p>
Currently this assumes 3D coordinates.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000020">Todo:</a></b></dt><dd>Modify this and <a class="el" href="group__PrivateFileIO.html#g4d826e51d3a8150d155124274b411056">_fc_readDataFile()</a> to take numDim/numComponent.</dd></dl>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>vertfilename</em>&nbsp;</td><td>
input - file with vertex coords. </td></tr>
<tr><td valign="top"><em>numVert</em>&nbsp;</td><td>
output - number of vertices. </td></tr>
<tr><td valign="top"><em>numDim</em>&nbsp;</td><td>
output - dimensionality of the coords. </td></tr>
<tr><td valign="top"><em>coords</em>&nbsp;</td><td>
output - the coordinates of the vertes. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="fileio_8c-source.html#l00132">132</a> of file <a class="el" href="fileio_8c-source.html">fileio.c</a>.
<p>
References <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="fileio_8c-source.html#l00462">_fc_makeMeshFromFiles()</a>.<div class="fragment"><pre class="fragment"><a name="l00137"></a>00137   {
<a name="l00138"></a>00138   <span class="keywordtype">int</span> i, count, temp_numVert, temp_numDim;
<a name="l00139"></a>00139   FILE* vertfile;
<a name="l00140"></a>00140   <span class="keywordtype">double</span>* temp_coords;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142   <span class="comment">// default return</span>
<a name="l00143"></a>00143   <span class="keywordflow">if</span> (numVert)
<a name="l00144"></a>00144     *numVert = -1;
<a name="l00145"></a>00145   <span class="keywordflow">if</span> (numDim)
<a name="l00146"></a>00146     *numDim = -1;
<a name="l00147"></a>00147   <span class="keywordflow">if</span> (coords)
<a name="l00148"></a>00148     *coords = NULL;
<a name="l00149"></a>00149 
<a name="l00150"></a>00150   <span class="comment">// check inputs</span>
<a name="l00151"></a>00151   <span class="keywordflow">if</span> (!vertfilename || !numVert || !numDim || !coords)
<a name="l00152"></a>00152     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00153"></a>00153   
<a name="l00154"></a>00154   <span class="comment">// Attempt to open the files</span>
<a name="l00155"></a>00155   vertfile = fopen(vertfilename, <span class="stringliteral">"r"</span>);
<a name="l00156"></a>00156   <span class="keywordflow">if</span> (!vertfile) {
<a name="l00157"></a>00157     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Could not open vert file '%s'"</span>, vertfilename);
<a name="l00158"></a>00158     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>;
<a name="l00159"></a>00159   }
<a name="l00160"></a>00160 
<a name="l00161"></a>00161   <span class="comment">// Read metada</span>
<a name="l00162"></a>00162   temp_numDim = 3; <span class="comment">// ASSUMPTION!</span>
<a name="l00163"></a>00163   count = fscanf(vertfile, <span class="stringliteral">"%d"</span>, &amp;temp_numVert);
<a name="l00164"></a>00164   <span class="keywordflow">if</span> (count != 1 || temp_numVert &lt; 1) {
<a name="l00165"></a>00165     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Error reading number of verts in vert file '%s'"</span>,
<a name="l00166"></a>00166                  vertfilename);
<a name="l00167"></a>00167     fclose(vertfile);
<a name="l00168"></a>00168     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00169"></a>00169   }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="comment">// Read coords</span>
<a name="l00172"></a>00172   temp_coords = malloc(temp_numVert*temp_numDim*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l00173"></a>00173   <span class="keywordflow">if</span> (!temp_coords) {
<a name="l00174"></a>00174     fclose(vertfile);
<a name="l00175"></a>00175     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00176"></a>00176   }
<a name="l00177"></a>00177   <span class="keywordflow">for</span> (i = 0; i &lt; temp_numVert*temp_numDim; i++) {
<a name="l00178"></a>00178     <span class="keywordflow">if</span> (fscanf(vertfile, <span class="stringliteral">"%lf"</span>, &amp;temp_coords[i]) != 1) {
<a name="l00179"></a>00179       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error reading coords for vert %d"</span>, i/temp_numDim);
<a name="l00180"></a>00180       free(temp_coords);
<a name="l00181"></a>00181       fclose(vertfile);
<a name="l00182"></a>00182       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>;
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184   }
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="comment">// All dones</span>
<a name="l00187"></a>00187   fclose(vertfile);
<a name="l00188"></a>00188   *numVert = temp_numVert;
<a name="l00189"></a>00189   *numDim = temp_numDim;
<a name="l00190"></a>00190   *coords = temp_coords;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00193"></a>00193 }
</pre></div>
<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Oct 31 11:10:02 2007 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
