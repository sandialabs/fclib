<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FCLib: FCLib Coding Conventions &amp; Tips</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1><a class="anchor" name="misc_page">FCLib Coding Conventions &amp; Tips</a></h1>This is a summary of general philosophy and coding tips for FCLib. Links are provided to more detailed information when available.<p>
<ul>
<li><b>Compiling</b>. To compile a program, you must include the appropriate headers (<a class="el" href="fc_8h.html">fc.h</a> automatically includes all library headers for you) and you must link to the library (fclib.a). You will also need to link to external libraries for file IO. You can import the file Makefile.include from your FCLib build directory to use the same build parameters. Or you can use the tool <a class="el" href="group__fcinfo.html">fcinfo</a> to get the compiler flags.</li></ul>
<p>
<ul>
<li><b>API Modules</b>. The API is split into categories called modules, each of which groups related data structures and functions into separate compiled units. These are located in the modules directory and consist of one .c file and one or two .h files. For example, the geometric relations module consists of the files <a class="el" href="geom_8c.html">geom.c</a>, <a class="el" href="geom_8h.html">geom.h</a> and <a class="el" href="geomP_8h.html">geomP.h</a>. Module headers can be included separately if desired, but they have dependencies and must be included in the proper order--it's much easier to use the super header file, <a class="el" href="fc_8h.html">fc.h</a>. FCLib modules correspond roughly with the Doxygen documentation modules (see <a class="el" href="navigation_page.html#FCLibNavigation">FCLib Specific Doxygen Navigation</a>).</li></ul>
<p>
<ul>
<li><b>Public vs. Private</b>. The API of each module is split into public and private functions. Private functions are generally either helpers for other functions, or are functions that are only expected to be used internally by the library. Private functions are not required to have the same level of error checking and robustness of public functions. To use private functions you must include the private headers, which have the same names as the public headers post-fixed with a 'P' (e.g. the public and private headers for the geometric relations module are <a class="el" href="geom_8h.html">geom.h</a> and <a class="el" href="geomP_8h.html">geomP.h</a>, respectively). You can include all of the private headers using <a class="el" href="fcP_8h.html">fcP.h</a>.</li></ul>
<p>
<ul>
<li><b>Naming conventions</b>. Data objects are prefixed with 'FC_' and functions are prefixed with 'fc_'. Private data objects and functions which are prefixed with '_FC_' and '_fc_', respectively.</li></ul>
<p>
<ul>
<li><b>Indexing conventions</b>. All indices and IDs in the library are indexed from 0.</li></ul>
<p>
<ul>
<li><b>Function return values</b>. Most library functions will return the enumerated type <a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>, which reports that the functions was successful (FC_SUCCESS = 0) or encodes the type of error that occured (&lt; 0). A few simple functions return useful values directly (e.g. <a class="el" href="group__Dataset.html#g77092c7248e1cff8cf5a4035e19658da">fc_isDatasetValid()</a> returns true (1) or false(0)).</li></ul>
<p>
<ul>
<li><b>Returning results from functions</b>. In C, functions return a single value, which for most cases in the library will be an FC_ReturnCode value. This means that most of the "returned" results from FCLib functions are not returned at all, but are values assigned to arguments passed into the functions. For the remainder of the documentation, the use of "returned" will usually mean a value returned via the arguments of the function. In the Doxygen documentation, these arguments are labeled as "output" arguments and are usually a pointer to the memory where the caller would like the results to be stored.</li></ul>
<p>
<ul>
<li><b>Messages and Logging</b>. Library routines can print errors to stderr or logging messages to stdout. This is set globally by a call to the library to set its verbosity level (see <a class="el" href="group__Library.html">Library</a>).</li></ul>
<p>
<ul>
<li><b>Flushing IO</b>. To get the most predictable IO behavior on all systems, we recommend calling fflush(NULL) after calling printf() or fprintf(). This forces a flush of all IO pipes. All fc_printXXX() functions should flush themselves.</li></ul>
<p>
<ul>
<li><b>Philosophy of simple data objects</b>. The library has attempted to have the simplest interface possible by keeping the interface for the major data objects as abstract as possible. For example, there is only one kind of variable instead of different variable types for each type of mesh entity (e.g. node variables, element variables, etc.). The handling of different types of variables is hidden inside of the characterizations. This makes it simple for users to string together characterizations and characterization building blocks into useful applications. However, characterization developers have the responsibility of ensuring that their characterizations behave properly on all variable types.</li></ul>
<p>
<ul>
<li><b>Handles</b>. The major data objects are hidden behind opaque handles; you cannot access their data directly and must go through library functions (see <a class="el" href="group__Handles.html">Handles</a>).</li></ul>
<p>
<ul>
<li><b>Meta-data vs Big Data</b>. Meta-data is small data describing the data objects while big data is the big data making up the data objects (e.g. the number of vertices in a mesh is meta data while the coordinates of the vertices in the mesh are big data). When querying data objects, all data except big data is returned as a copy of the objects data. If any of this meta data happens to be an array, the users has received a dynamically allocated memory and is responsible for freeing it. When asking for big data, however, the user receives a pointer to the object's data and <b>must not free it</b>! The calls that return a pointer to big data are distinguished from regular data calls by being postfixed by 'Ptr' (e.g. <a class="el" href="group__Mesh.html#g44d09391731a139c4efc2c4fb2eda4e7">fc_getMeshCoordsPtr()</a>). When creating data objects, you have the choice of having the library copy the big data or giving responsibility for the big data to the data object. The functions that give the big data array to the library are also postfixed with 'Ptr' and if you use them, again you must not free the array.</li></ul>
<p>
<ul>
<li><b>Non-library-managed data objects</b>. In addition to the major data objects that are managed by the library (<a class="el" href="structFC__Dataset.html">FC_Dataset</a>, <a class="el" href="structFC__Sequence.html">FC_Sequence</a>, <a class="el" href="structFC__Mesh.html">FC_Mesh</a>, <a class="el" href="structFC__Subset.html">FC_Subset</a>, <a class="el" href="structFC__Variable.html">FC_Variable</a>), there are auxiliary data objects including sorted int arrays (<a class="el" href="structFC__SortedIntArray.html">FC_SortedIntArray</a>), vertex bins for spatially sorting vertices (<a class="el" href="structFC__VertexBin.html">FC_VertexBin</a>), feature groups for managing features (<a class="el" href="structFC__FeatureGroup.html">FC_FeatureGroup</a>), etc. These objects are not automatically freed when you close a dataset or the library. Instead, each has a separate fc_freeX() routine. </li></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Oct 31 11:10:00 2007 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
