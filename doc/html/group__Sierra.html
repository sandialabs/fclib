<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FCLib: Sierra</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>Sierra<br>
<small>
[<a class="el" href="group__API.html">FCLib API</a>]</small>
</h1>
<p>
Collaboration diagram for Sierra:<hr><a name="_details"></a><h2>Detailed Description</h2>
Data structures and routines for dealing with Sierra generated data. 
<p>
<b>Description:</b> <p>
Data structures and routines for interacting with Sierra generated data. (currently focused on Presto spot welds.)<p>
<b>Modifications:</b> <ul>
<li>2003-SEP-23 W Koegler Created. </li></ul>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateSierra.html">(Private)</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateSierraHelpers.html">Helpers (not available outside this module)</a></td></tr>

<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFC__SierraFuncInfo.html">FC_SierraFuncInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Container for Sierra function information.  <a href="structFC__SierraFuncInfo.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFC__SierraSpotWeldInfo.html">FC_SierraSpotWeldInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Container for Sierra spot weld information.  <a href="structFC__SierraSpotWeldInfo.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Container for Sierra information.  <a href="structFC__SierraInfo.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Sierra.html#g03224fc1acd3d1b195eadae651a95f65">fc_freeSierraInfo</a> (<a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> *sierra)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free memory associated with a <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> struct.  <a href="#g03224fc1acd3d1b195eadae651a95f65"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Sierra.html#g3de567711d66c7769a5e85b398aebe44">fc_printSierraInfo</a> (<a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> *sierra)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print an <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> struct.  <a href="#g3de567711d66c7769a5e85b398aebe44"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Sierra.html#g2556b0c7090174e8d86bd448de80fc1b">fc_parseSierraInputFile</a> (char *filename, <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> **sierra)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parse a Sierra Input File and put info into <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> struct.  <a href="#g2556b0c7090174e8d86bd448de80fc1b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Sierra.html#gc45a8144f1a4af856e53c19b7baad0a8">fc_evalPrestoSpotWeld</a> (<a class="el" href="structFC__SierraSpotWeldInfo.html">FC_SierraSpotWeldInfo</a> *spotweld, <a class="el" href="structFC__Subset.html">FC_Subset</a> node_set, <a class="el" href="structFC__Subset.html">FC_Subset</a> side_set, int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *node_displs, <a class="el" href="structFC__Variable.html">FC_Variable</a> *side_displs, double **ufails_p, int *broken_id)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the failure parameter for a spot weld.  <a href="#gc45a8144f1a4af856e53c19b7baad0a8"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gc45a8144f1a4af856e53c19b7baad0a8"></a><!-- doxytag: member="sierra.c::fc_evalPrestoSpotWeld" ref="gc45a8144f1a4af856e53c19b7baad0a8" args="(FC_SierraSpotWeldInfo *spotweld, FC_Subset node_set, FC_Subset side_set, int numStep, FC_Variable *node_displs, FC_Variable *side_displs, double **ufails_p, int *broken_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_evalPrestoSpotWeld           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__SierraSpotWeldInfo.html">FC_SierraSpotWeldInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>spotweld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a>&nbsp;</td>
          <td class="paramname"> <em>node_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a>&nbsp;</td>
          <td class="paramname"> <em>side_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>node_displs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>side_displs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double **&nbsp;</td>
          <td class="paramname"> <em>ufails_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>broken_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute the failure parameter for a spot weld. 
<p>
<b>Description:</b> <p>
The failure parameter is calculated based on the distance between the node of the node set and the point of attachment on the sideset of the spotweld. The attachment remains intact as long as ufail remains less than zero<p>
ufail = (unorm/umaxnorm)^p + (utang/umaxtang)^p<p>
where unorm and utang are the normal and tangential components of the distance between the node and side sets, and umaxnorm and umaxtang are the maximum displacements in the functions defining the spotweld. The caller is responsible for freeing the created params array.<p>
The index of the time step at which the spot weld is considered to have failed is also returned. (A value of -1 indicates that the spot weld did not fail.) This is when ufail &gt;= 1.<p>
<b>Modifications:</b> <ul>
<li>2003-SEP-08 W Koegler Changed so that it also does the broken characterization.</li><li>06/22/2004 WSK Changed to take subsets instead of meshes for the node and side sets. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>spotweld</em>&nbsp;</td><td>
input - Sierra spot weld info </td></tr>
<tr><td valign="top"><em>node_set</em>&nbsp;</td><td>
input - node set specifying the spot weld </td></tr>
<tr><td valign="top"><em>side_set</em>&nbsp;</td><td>
input - side set specifying the surface </td></tr>
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - the number of time steps </td></tr>
<tr><td valign="top"><em>node_displs</em>&nbsp;</td><td>
input - array of coord displacements on the node set </td></tr>
<tr><td valign="top"><em>side_displs</em>&nbsp;</td><td>
input - array of coord displacements on the side set </td></tr>
<tr><td valign="top"><em>ufails_p</em>&nbsp;</td><td>
output - created array of failure parameters per step </td></tr>
<tr><td valign="top"><em>broken_id</em>&nbsp;</td><td>
output - the step at which the spot weld fails (-1 = no failure </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="sierra_8c-source.html#l01209">1209</a> of file <a class="el" href="sierra_8c-source.html">sierra.c</a>.
<p>
References <a class="el" href="geom_8c-source.html#l07177">_fc_calcQuadLocation()</a>, <a class="el" href="geom_8c-source.html#l07013">_fc_calcQuadParams()</a>, <a class="el" href="geom_8c-source.html#l06901">_fc_calcSurfaceNormal()</a>, <a class="el" href="varmath_8c-source.html#l04235">_fc_decomposeVector()</a>, <a class="el" href="sierra_8h-source.html#l00082">FC_SierraFuncInfo::abscissa_max</a>, <a class="el" href="sierra_8h-source.html#l00113">FC_SierraSpotWeldInfo::exponent</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b406121f0d65d618dcb6111ba50740b4ad">FC_ET_QUAD</a>, <a class="el" href="base_8c-source.html#l00476">fc_getAssociationTypeText()</a>, <a class="el" href="geom_8c-source.html#l00352">fc_getDisplacedMeshCoords()</a>, <a class="el" href="base_8c-source.html#l00549">fc_getElementTypeNumVertex()</a>, <a class="el" href="mesh_8c-source.html#l02655">fc_getMeshCoordsPtr()</a>, <a class="el" href="mesh_8c-source.html#l02172">fc_getMeshDim()</a>, <a class="el" href="mesh_8c-source.html#l02981">fc_getMeshElementConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l02280">fc_getMeshElementType()</a>, <a class="el" href="mesh_8c-source.html#l02910">fc_getMeshFaceConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l02841">fc_getMeshFaceTypesPtr()</a>, <a class="el" href="subset_8c-source.html#l01713">fc_getMeshFromSubset()</a>, <a class="el" href="variable_8c-source.html#l04268">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="subset_8c-source.html#l01754">fc_getSubsetInfo()</a>, <a class="el" href="subset_8c-source.html#l01973">fc_getSubsetMembersAsArray()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="util_8h-source.html#l00085">FC_VALUE_EQUIV</a>, <a class="el" href="sierra_8h-source.html#l00117">FC_SierraSpotWeldInfo::normal_p</a>, and <a class="el" href="sierra_8h-source.html#l00119">FC_SierraSpotWeldInfo::tangent_p</a>.
<p>
Referenced by <a class="el" href="analyzeSpotWelds_8c-source.html#l00135">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01221"></a>01221   {
<a name="l01222"></a>01222   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l01223"></a>01223   <span class="keywordtype">int</span> i, j, k;
<a name="l01224"></a>01224   <span class="keywordtype">int</span> numMember, nodesetID, sidesetID, *temp_int_array, dim, temp_num;
<a name="l01225"></a>01225   <span class="keywordtype">int</span> side_numVert, *side_vertexIDs;
<a name="l01226"></a>01226   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l01227"></a>01227   <a class="code" href="group__DataTypes.html#g5d0bf8bd47afb81d89d4c5d60c7d62b4">FC_ElementType</a> elemtype;
<a name="l01228"></a>01228   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> node_mesh, side_mesh, temp_mesh;
<a name="l01229"></a>01229   <span class="keywordtype">double</span> umaxnorm, umaxtang, exponent;
<a name="l01230"></a>01230   <span class="keywordtype">double</span> unorm, utang; 
<a name="l01231"></a>01231   <span class="keywordtype">double</span>* ufails;
<a name="l01232"></a>01232   <span class="keywordtype">int</span> numParam;
<a name="l01233"></a>01233   <span class="keywordtype">double</span>* params;
<a name="l01234"></a>01234   
<a name="l01235"></a>01235   <span class="comment">// default return values</span>
<a name="l01236"></a>01236   <span class="keywordflow">if</span> (ufails_p)
<a name="l01237"></a>01237     *ufails_p = NULL;
<a name="l01238"></a>01238   <span class="keywordflow">if</span> (broken_id)
<a name="l01239"></a>01239     *broken_id = -1;
<a name="l01240"></a>01240   
<a name="l01241"></a>01241   <span class="comment">// check input</span>
<a name="l01242"></a>01242   <span class="keywordflow">if</span> (!spotweld || numStep &lt; 1 || !node_displs || !side_displs || 
<a name="l01243"></a>01243       !ufails_p || !broken_id) {
<a name="l01244"></a>01244     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01245"></a>01245     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01246"></a>01246   }
<a name="l01247"></a>01247   
<a name="l01248"></a>01248   <span class="comment">// get parent meshes for subsets and make sure have same dim</span>
<a name="l01249"></a>01249   <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(node_set, &amp;node_mesh);
<a name="l01250"></a>01250   <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(side_set, &amp;side_mesh);
<a name="l01251"></a>01251   <a class="code" href="group__Mesh.html#geaea4205623196e6b1b58da0b4b82b20">fc_getMeshDim</a>(node_mesh, &amp;dim);
<a name="l01252"></a>01252   <a class="code" href="group__Mesh.html#geaea4205623196e6b1b58da0b4b82b20">fc_getMeshDim</a>(side_mesh, &amp;temp_num);
<a name="l01253"></a>01253   <span class="keywordflow">if</span> (dim != temp_num) {
<a name="l01254"></a>01254     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01255"></a>01255     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01256"></a>01256   }
<a name="l01257"></a>01257   
<a name="l01258"></a>01258   <span class="comment">// make sure node displs are on the same mesh as node set</span>
<a name="l01259"></a>01259   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l01260"></a>01260     <a class="code" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a>(node_displs[i], &amp;temp_mesh);
<a name="l01261"></a>01261     <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(temp_mesh, node_mesh)) {
<a name="l01262"></a>01262       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01263"></a>01263       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01264"></a>01264     }
<a name="l01265"></a>01265   }
<a name="l01266"></a>01266   
<a name="l01267"></a>01267   <span class="comment">// make sure side displaces are on the same mesh as side set</span>
<a name="l01268"></a>01268   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l01269"></a>01269     <a class="code" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a>(side_displs[i], &amp;temp_mesh);
<a name="l01270"></a>01270     <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(temp_mesh, side_mesh)) {
<a name="l01271"></a>01271       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01272"></a>01272       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01273"></a>01273     }
<a name="l01274"></a>01274   }
<a name="l01275"></a>01275   
<a name="l01276"></a>01276   <span class="comment">// Get member ID of node set and make sure is o.k. node set</span>
<a name="l01277"></a>01277   rc = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(node_set, &amp;numMember, &amp;temp_int_array);
<a name="l01278"></a>01278   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01279"></a>01279     <span class="keywordflow">return</span> rc;
<a name="l01280"></a>01280   <span class="keywordflow">if</span> (numMember != 1)
<a name="l01281"></a>01281     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01282"></a>01282   nodesetID = temp_int_array[0];
<a name="l01283"></a>01283   free(temp_int_array);
<a name="l01284"></a>01284   rc = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(node_set, NULL, NULL, &amp;assoc);
<a name="l01285"></a>01285   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01286"></a>01286     <span class="keywordflow">return</span> rc;
<a name="l01287"></a>01287   <span class="keywordflow">if</span> (assoc != <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>)
<a name="l01288"></a>01288     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01289"></a>01289   
<a name="l01290"></a>01290   <span class="comment">// Get member ID and vertexIDs of side set</span>
<a name="l01291"></a>01291   rc = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(side_set, &amp;numMember, &amp;temp_int_array);
<a name="l01292"></a>01292   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01293"></a>01293     <span class="keywordflow">return</span> rc;
<a name="l01294"></a>01294   <span class="keywordflow">if</span> (numMember != 1)
<a name="l01295"></a>01295     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01296"></a>01296   sidesetID = temp_int_array[0];
<a name="l01297"></a>01297   free(temp_int_array);
<a name="l01298"></a>01298   rc = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(side_set, NULL, NULL, &amp;assoc);
<a name="l01299"></a>01299   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01300"></a>01300     <span class="keywordflow">return</span> rc;
<a name="l01301"></a>01301   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a>) {
<a name="l01302"></a>01302     <span class="keywordtype">int</span>* conns;
<a name="l01303"></a>01303     rc = <a class="code" href="group__Mesh.html#g71ce3ca34963dcc548b6a7c38aa17fd9">fc_getMeshElementConnsPtr</a>(side_mesh, &amp;conns);
<a name="l01304"></a>01304     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01305"></a>01305       <span class="keywordflow">return</span> rc;
<a name="l01306"></a>01306     <a class="code" href="group__Mesh.html#g3bb6165352ed68a9dd86957ebae28008">fc_getMeshElementType</a>(side_mesh, &amp;elemtype);
<a name="l01307"></a>01307     side_numVert = <a class="code" href="group__DataTypes.html#gf75ed80296bf7b5631bf464ea4a4de25">fc_getElementTypeNumVertex</a>(elemtype);
<a name="l01308"></a>01308     side_vertexIDs = &amp;conns[sidesetID*side_numVert]; <span class="comment">// don't free</span>
<a name="l01309"></a>01309   }
<a name="l01310"></a>01310   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a>) {
<a name="l01311"></a>01311     <a class="code" href="group__DataTypes.html#g5d0bf8bd47afb81d89d4c5d60c7d62b4">FC_ElementType</a>* side_faceTypes;
<a name="l01312"></a>01312     <span class="keywordtype">int</span> maxNumVertPerFace, *numVertPerFace, *faceConns;
<a name="l01313"></a>01313     rc = <a class="code" href="group__Mesh.html#g0d44e57289411649dd174c54bc25264a">fc_getMeshFaceTypesPtr</a>(side_mesh, &amp;side_faceTypes);
<a name="l01314"></a>01314     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01315"></a>01315       <span class="keywordflow">return</span> rc;
<a name="l01316"></a>01316     rc = <a class="code" href="group__Mesh.html#g216435eac0f72ad3ccb35e44b2df6ca5">fc_getMeshFaceConnsPtr</a>(side_mesh, &amp;numVertPerFace, &amp;maxNumVertPerFace,
<a name="l01317"></a>01317                                 &amp;faceConns);
<a name="l01318"></a>01318     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01319"></a>01319       <span class="keywordflow">return</span> rc;
<a name="l01320"></a>01320     elemtype = side_faceTypes[sidesetID];
<a name="l01321"></a>01321     side_numVert = numVertPerFace[sidesetID];
<a name="l01322"></a>01322     side_vertexIDs = &amp;faceConns[sidesetID*maxNumVertPerFace]; <span class="comment">// don't free</span>
<a name="l01323"></a>01323   }
<a name="l01324"></a>01324   <span class="keywordflow">else</span> {
<a name="l01325"></a>01325     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Sorry, fc_evalPrestoSpotWeld does not "</span>
<a name="l01326"></a>01326                           <span class="stringliteral">"handle sidesets with association %s yet\n"</span>,
<a name="l01327"></a>01327                           <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(assoc));
<a name="l01328"></a>01328     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01329"></a>01329   }
<a name="l01330"></a>01330   <span class="comment">// FIX take this out when this routine can do other things</span>
<a name="l01331"></a>01331   <span class="keywordflow">if</span> (elemtype != <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b406121f0d65d618dcb6111ba50740b4ad">FC_ET_QUAD</a>) {
<a name="l01332"></a>01332     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Sorry, fc_evalPrestoSpotWeld only does "</span>
<a name="l01333"></a>01333                           <span class="stringliteral">"quad sidesets at the moment\n"</span>);
<a name="l01334"></a>01334     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01335"></a>01335   }
<a name="l01336"></a>01336   
<a name="l01337"></a>01337   <span class="comment">// get critical displs from spot weld info</span>
<a name="l01338"></a>01338   umaxnorm = spotweld-&gt;<a class="code" href="structFC__SierraSpotWeldInfo.html#1cd2609700e2f92b8002c0eebd964088">normal_p</a>-&gt;<a class="code" href="structFC__SierraFuncInfo.html#3bafc542339ee609879bf8ef852e8aeb">abscissa_max</a>;
<a name="l01339"></a>01339   umaxtang = spotweld-&gt;<a class="code" href="structFC__SierraSpotWeldInfo.html#2d0a177535b8a96249d8c347668a7dc5">tangent_p</a>-&gt;<a class="code" href="structFC__SierraFuncInfo.html#3bafc542339ee609879bf8ef852e8aeb">abscissa_max</a>;
<a name="l01340"></a>01340   exponent = spotweld-&gt;<a class="code" href="structFC__SierraSpotWeldInfo.html#4ba7aeb7b71d48de6d25d1a746277b58">exponent</a>;
<a name="l01341"></a>01341   
<a name="l01342"></a>01342   <span class="comment">// determine the params to locate attachment site in side set</span>
<a name="l01343"></a>01343   <span class="comment">// FIX: make this work for a tri too!</span>
<a name="l01344"></a>01344   {
<a name="l01345"></a>01345     <a class="code" href="group__SimpleDataObjects.html#g9687c6aad22d56c60f87659f533869c2">FC_Coords</a> side_vertCoords[4]; <span class="comment">// array of side vertex coords, max 4 for quads</span>
<a name="l01346"></a>01346     <a class="code" href="group__SimpleDataObjects.html#g9687c6aad22d56c60f87659f533869c2">FC_Coords</a> attach_orig; <span class="comment">// coordinates of attachment on side set at t0</span>
<a name="l01347"></a>01347     <span class="keywordtype">double</span>* node_mesh_coords;
<a name="l01348"></a>01348     <span class="keywordtype">double</span>* side_mesh_coords;
<a name="l01349"></a>01349    
<a name="l01350"></a>01350     rc = <a class="code" href="group__Mesh.html#g44d09391731a139c4efc2c4fb2eda4e7">fc_getMeshCoordsPtr</a>(node_mesh, &amp;node_mesh_coords);
<a name="l01351"></a>01351     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01352"></a>01352       <span class="keywordflow">return</span> rc;
<a name="l01353"></a>01353     rc = <a class="code" href="group__Mesh.html#g44d09391731a139c4efc2c4fb2eda4e7">fc_getMeshCoordsPtr</a>(side_mesh, &amp;side_mesh_coords);
<a name="l01354"></a>01354     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01355"></a>01355       <span class="keywordflow">return</span> rc;
<a name="l01356"></a>01356     
<a name="l01357"></a>01357     <span class="keywordflow">for</span> (i = 0; i &lt; side_numVert; i++) {
<a name="l01358"></a>01358       <span class="keywordflow">for</span> (j = 0; j &lt; dim; j++)
<a name="l01359"></a>01359         side_vertCoords[i][j] = side_mesh_coords[side_vertexIDs[i]*dim+j];
<a name="l01360"></a>01360       <span class="keywordflow">for</span> (j = dim; j &lt; 3; j++)
<a name="l01361"></a>01361         side_vertCoords[i][j] = 0.;
<a name="l01362"></a>01362     }
<a name="l01363"></a>01363     
<a name="l01364"></a>01364     <span class="comment">// FC_Coords always have 3 dimensions, pad with zeros</span>
<a name="l01365"></a>01365     <span class="keywordflow">for</span> (i = 0; i &lt; dim; i++) 
<a name="l01366"></a>01366       attach_orig[i] = node_mesh_coords[nodesetID*dim+i];
<a name="l01367"></a>01367     <span class="keywordflow">for</span> (i = dim; i &lt; 3; i++)
<a name="l01368"></a>01368       attach_orig[i] = 0.;
<a name="l01369"></a>01369     
<a name="l01370"></a>01370     <a class="code" href="group__PrivateGeometricRelations.html#gd03a818ea21f282dc0726a145836265e">_fc_calcQuadParams</a>(side_vertCoords, attach_orig, &amp;numParam, &amp;params);
<a name="l01371"></a>01371     <span class="keywordflow">if</span> (numParam != 2 )
<a name="l01372"></a>01372       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01373"></a>01373     <span class="comment">// FIX? remove when we think things are working, or add reasonable err?</span>
<a name="l01374"></a>01374     <span class="keywordflow">if</span> (params[0] &lt; 0. || params[0] &gt; 1. || params[1] &lt; 0. || params[1] &gt; 1.) {
<a name="l01375"></a>01375       free(params);
<a name="l01376"></a>01376       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01377"></a>01377     }
<a name="l01378"></a>01378   }
<a name="l01379"></a>01379   
<a name="l01380"></a>01380   <span class="comment">// create room for return values</span>
<a name="l01381"></a>01381   ufails = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*numStep);
<a name="l01382"></a>01382   <span class="keywordflow">if</span> (ufails == NULL) {
<a name="l01383"></a>01383     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01384"></a>01384     free(params);
<a name="l01385"></a>01385     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01386"></a>01386   }
<a name="l01387"></a>01387   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++)
<a name="l01388"></a>01388     ufails[i] = -1.;
<a name="l01389"></a>01389   
<a name="l01390"></a>01390   <span class="comment">// For each step</span>
<a name="l01391"></a>01391   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l01392"></a>01392     <span class="keywordtype">int</span> vertexID;
<a name="l01393"></a>01393     <span class="keywordtype">double</span>* node_displ_coords;  <span class="comment">// displaced vertex coords for node mesh</span>
<a name="l01394"></a>01394     <span class="keywordtype">double</span>* side_displ_coords;  <span class="comment">// displaced vertex coords for side mesh</span>
<a name="l01395"></a>01395     <a class="code" href="group__SimpleDataObjects.html#g9687c6aad22d56c60f87659f533869c2">FC_Coords</a> side_vertCoords[4]; <span class="comment">// array of coords for side vertices (max 4)</span>
<a name="l01396"></a>01396     <a class="code" href="group__SimpleDataObjects.html#g9687c6aad22d56c60f87659f533869c2">FC_Coords</a> node_point, side_point;
<a name="l01397"></a>01397     <span class="keywordtype">double</span> dist[3], norm[3];
<a name="l01398"></a>01398     
<a name="l01399"></a>01399     <span class="comment">// get node coordinates</span>
<a name="l01400"></a>01400     rc = <a class="code" href="group__GeometricRelations.html#g78716e2414d2a11d92097b70f5d8431c">fc_getDisplacedMeshCoords</a>(node_mesh, node_displs[i], 
<a name="l01401"></a>01401                                    &amp;node_displ_coords);
<a name="l01402"></a>01402     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01403"></a>01403       free(params);
<a name="l01404"></a>01404       free(ufails);
<a name="l01405"></a>01405       <span class="keywordflow">return</span> rc;
<a name="l01406"></a>01406     }
<a name="l01407"></a>01407     <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
<a name="l01408"></a>01408       node_point[j] = node_displ_coords[dim*nodesetID+j];
<a name="l01409"></a>01409     free(node_displ_coords);
<a name="l01410"></a>01410     
<a name="l01411"></a>01411     <span class="comment">// get attachment on side set coordinates &amp; normal of sideset</span>
<a name="l01412"></a>01412     rc = <a class="code" href="group__GeometricRelations.html#g78716e2414d2a11d92097b70f5d8431c">fc_getDisplacedMeshCoords</a>(side_mesh, side_displs[i], 
<a name="l01413"></a>01413                                    &amp;side_displ_coords);
<a name="l01414"></a>01414     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01415"></a>01415       free(params);
<a name="l01416"></a>01416       free(ufails);
<a name="l01417"></a>01417       <span class="keywordflow">return</span> rc;
<a name="l01418"></a>01418     }
<a name="l01419"></a>01419     <span class="keywordflow">for</span> (j = 0; j &lt; side_numVert; j++) {
<a name="l01420"></a>01420       vertexID = side_vertexIDs[j];
<a name="l01421"></a>01421       <span class="keywordflow">for</span> (k = 0; k &lt; dim; k++) 
<a name="l01422"></a>01422         side_vertCoords[j][k] = side_displ_coords[vertexID*dim + k];
<a name="l01423"></a>01423       <span class="keywordflow">for</span> (k = dim; k &lt; 3; k++)
<a name="l01424"></a>01424         side_vertCoords[j][k] = 0.;
<a name="l01425"></a>01425     }
<a name="l01426"></a>01426     <a class="code" href="group__PrivateGeometricRelations.html#g16a56e75e5ccb2deec37abfa5e532b73">_fc_calcQuadLocation</a>(side_vertCoords, numParam, params, &amp;side_point);
<a name="l01427"></a>01427     <a class="code" href="group__PrivateGeometricRelations.html#g220950bef4a17b1ad88db87868459421">_fc_calcSurfaceNormal</a>(side_numVert, side_vertCoords, &amp;norm);
<a name="l01428"></a>01428     free(side_displ_coords);
<a name="l01429"></a>01429     
<a name="l01430"></a>01430     <span class="comment">// create a vector from side point to node point</span>
<a name="l01431"></a>01431     <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)
<a name="l01432"></a>01432       dist[j] = node_point[j] - side_point[j];
<a name="l01433"></a>01433     
<a name="l01434"></a>01434     <span class="comment">// decompose distance vector along sideset's normal</span>
<a name="l01435"></a>01435     <a class="code" href="group__PrivateVariableMath.html#g7db7a2e7fc87f59815ae7a87ad24975d">_fc_decomposeVector</a>(3, dist, dim, norm, &amp;unorm, &amp;utang);
<a name="l01436"></a>01436     
<a name="l01437"></a>01437     <span class="comment">// calculate ufail</span>
<a name="l01438"></a>01438     <span class="comment">// fabs needed - unorm and untang might be negative and exponent odd</span>
<a name="l01439"></a>01439     ufails[i] = pow(fabs(unorm/umaxnorm), exponent) + 
<a name="l01440"></a>01440       pow(fabs(utang/umaxtang), exponent);
<a name="l01441"></a>01441   }
<a name="l01442"></a>01442   free(params);
<a name="l01443"></a>01443   
<a name="l01444"></a>01444   <span class="comment">// assign return values</span>
<a name="l01445"></a>01445   *ufails_p = ufails;
<a name="l01446"></a>01446   
<a name="l01447"></a>01447   <span class="comment">// decide if and when the spot weld breaks </span>
<a name="l01448"></a>01448   <span class="comment">// (this is when ufail first goes above 1)</span>
<a name="l01449"></a>01449   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l01450"></a>01450     <span class="keywordflow">if</span> (ufails[i] &gt; 1.0 || <a class="code" href="group__PublicFloatingPoint.html#g24024939f4d5dcab7a65652aa4e71cce">FC_VALUE_EQUIV</a>(ufails[i], 1.0, 10*DBL_EPSILON,
<a name="l01451"></a>01451                            DBL_MIN)) {
<a name="l01452"></a>01452       *broken_id = i; 
<a name="l01453"></a>01453       <span class="keywordflow">break</span>;
<a name="l01454"></a>01454     }
<a name="l01455"></a>01455   }
<a name="l01456"></a>01456   
<a name="l01457"></a>01457   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01458"></a>01458 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g03224fc1acd3d1b195eadae651a95f65"></a><!-- doxytag: member="sierra.c::fc_freeSierraInfo" ref="g03224fc1acd3d1b195eadae651a95f65" args="(FC_SierraInfo *sierra)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fc_freeSierraInfo           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>sierra</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free memory associated with a <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> struct. 
<p>
<b>Description:</b> <p>
This frees allocated members within the struct as well as the struct itself.<p>
<b>Modifications:</b> 12/23/04 WSK created. Replaces fc_clearSierraInfo(). <dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>sierra</em>&nbsp;</td><td>
input - sierra info object </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="sierra_8c-source.html#l00211">211</a> of file <a class="el" href="sierra_8c-source.html">sierra.c</a>.
<p>
References <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="sierra_8h-source.html#l00163">FC_SierraInfo::functions</a>, <a class="el" href="sierra_8h-source.html#l00162">FC_SierraInfo::numFunction</a>, <a class="el" href="sierra_8h-source.html#l00164">FC_SierraInfo::numSpotWeld</a>, <a class="el" href="sierra_8h-source.html#l00165">FC_SierraInfo::spotwelds</a>, and <a class="el" href="sierra_8h-source.html#l00078">FC_SierraFuncInfo::values</a>.
<p>
Referenced by <a class="el" href="sierradump_8c-source.html#l00057">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00214"></a>00214 {
<a name="l00215"></a>00215   <span class="keywordtype">int</span> i;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   <span class="comment">// check input</span>
<a name="l00218"></a>00218   <span class="keywordflow">if</span> (!sierra)
<a name="l00219"></a>00219     <span class="keywordflow">return</span>;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   <span class="comment">// log message</span>
<a name="l00222"></a>00222   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Freeing sierra info."</span>);
<a name="l00223"></a>00223 
<a name="l00224"></a>00224   <span class="comment">// release dynamically allocated members (and their members ...)</span>
<a name="l00225"></a>00225   <span class="keywordflow">if</span> (sierra-&gt;<a class="code" href="structFC__SierraInfo.html#e3eb879cf2efcbe3e480bdcdbb0841c5">numFunction</a> &gt; 0) {
<a name="l00226"></a>00226     <span class="keywordflow">for</span> (i = 0; i &lt; sierra-&gt;<a class="code" href="structFC__SierraInfo.html#e3eb879cf2efcbe3e480bdcdbb0841c5">numFunction</a>; i++) {
<a name="l00227"></a>00227       free(sierra-&gt;<a class="code" href="structFC__SierraInfo.html#08f488096064ed241f4ea8ef46113471">functions</a>[i]-&gt;<a class="code" href="structFC__SierraFuncInfo.html#7a103e8e4a3bfb38e2896afc19a4e2b3">values</a>);
<a name="l00228"></a>00228       free(sierra-&gt;<a class="code" href="structFC__SierraInfo.html#08f488096064ed241f4ea8ef46113471">functions</a>[i]);
<a name="l00229"></a>00229     }
<a name="l00230"></a>00230     free(sierra-&gt;<a class="code" href="structFC__SierraInfo.html#08f488096064ed241f4ea8ef46113471">functions</a>);
<a name="l00231"></a>00231   }
<a name="l00232"></a>00232   <span class="keywordflow">if</span> (sierra-&gt;<a class="code" href="structFC__SierraInfo.html#a0677f6d13b69797cf81a4408d385ccb">numSpotWeld</a> &gt; 0) {
<a name="l00233"></a>00233     <span class="keywordflow">for</span> (i = 0; i &lt; sierra-&gt;<a class="code" href="structFC__SierraInfo.html#a0677f6d13b69797cf81a4408d385ccb">numSpotWeld</a>; i++) 
<a name="l00234"></a>00234       free(sierra-&gt;<a class="code" href="structFC__SierraInfo.html#ddbfbd203ed9a338b0ad20c8c5dc8722">spotwelds</a>[i]);
<a name="l00235"></a>00235     free(sierra-&gt;<a class="code" href="structFC__SierraInfo.html#ddbfbd203ed9a338b0ad20c8c5dc8722">spotwelds</a>);
<a name="l00236"></a>00236   }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   <span class="comment">// free this</span>
<a name="l00239"></a>00239   free(sierra);
<a name="l00240"></a>00240 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g2556b0c7090174e8d86bd448de80fc1b"></a><!-- doxytag: member="sierra.c::fc_parseSierraInputFile" ref="g2556b0c7090174e8d86bd448de80fc1b" args="(char *filename, FC_SierraInfo **sierra)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_parseSierraInputFile           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> **&nbsp;</td>
          <td class="paramname"> <em>sierra</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parse a Sierra Input File and put info into <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> struct. 
<p>
<b>Description:</b> <p>
Parses a Sierra input file and returns a new <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> object containibg the sierra info. It's memory can be released using <a class="el" href="group__Sierra.html#g03224fc1acd3d1b195eadae651a95f65">fc_freeSierraInfo()</a>.<p>
Currently the parser only returns the information needed to analyze Presto spot welds. However, the parsing routines were written to (hopefully) be easily expanded when additional info is required. See the private documentation for _fc_parseSierra for more details about the parsing process.<p>
<b>Modifications:</b> <ul>
<li>2003-JUN-24 W Koegler Created.</li><li>12/23/04 WSK Changed so it creates the <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> object instead of taking it as an object. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>filename</em>&nbsp;</td><td>
input - the sierra input file </td></tr>
<tr><td valign="top"><em>sierra</em>&nbsp;</td><td>
output - sierra info </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="sierra_8c-source.html#l00348">348</a> of file <a class="el" href="sierra_8c-source.html">sierra.c</a>.
<p>
References <a class="el" href="sierra_8c-source.html#l00177">_fc_initSierraInfo()</a>, <a class="el" href="sierra_8c-source.html#l00491">_fc_parseSierra()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00129">fc_printfWarningMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="sierra_8c-source.html#l00136">string</a>, and <a class="el" href="sierra_8c-source.html#l00141">temp_string</a>.
<p>
Referenced by <a class="el" href="analyzeSpotWelds_8c-source.html#l00135">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00352"></a>00352 {
<a name="l00353"></a>00353   <span class="keywordtype">int</span> i, j;
<a name="l00354"></a>00354   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc, rc_keep;
<a name="l00355"></a>00355   <span class="keywordtype">int</span> level = 0;
<a name="l00356"></a>00356   FILE* inputfile;
<a name="l00357"></a>00357 
<a name="l00358"></a>00358   <span class="comment">// default return</span>
<a name="l00359"></a>00359   <span class="keywordflow">if</span> (sierra)
<a name="l00360"></a>00360     *sierra = NULL;
<a name="l00361"></a>00361 
<a name="l00362"></a>00362   <span class="comment">// check input</span>
<a name="l00363"></a>00363   <span class="keywordflow">if</span> (!filename || !sierra) {
<a name="l00364"></a>00364     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(rc));
<a name="l00365"></a>00365     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00366"></a>00366   }
<a name="l00367"></a>00367 
<a name="l00368"></a>00368   <span class="comment">// open the input file</span>
<a name="l00369"></a>00369   inputfile = fopen(filename, <span class="stringliteral">"r"</span>);
<a name="l00370"></a>00370   <span class="keywordflow">if</span> (!inputfile) {
<a name="l00371"></a>00371         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"sierra input parser could not open file '%s'\n"</span>, 
<a name="l00372"></a>00372                  filename);
<a name="l00373"></a>00373     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e41dd0a2fc17e1c521fa4a96cfd412708">FC_FILE_IO_ERROR</a>;
<a name="l00374"></a>00374   }
<a name="l00375"></a>00375 
<a name="l00376"></a>00376   <span class="comment">// setup sierra</span>
<a name="l00377"></a>00377   *sierra = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__SierraInfo.html">FC_SierraInfo</a>));
<a name="l00378"></a>00378   rc = <a class="code" href="group__PrivateSierra.html#ga5d9f0e4df22b3e03b3f4fcab5a6076c">_fc_initSierraInfo</a>(*sierra);
<a name="l00379"></a>00379   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00380"></a>00380     <span class="keywordflow">return</span> rc;
<a name="l00381"></a>00381 
<a name="l00382"></a>00382   <span class="comment">// Loop over lines in the file</span>
<a name="l00383"></a>00383   <span class="keywordflow">while</span> (fscanf(inputfile, <span class="stringliteral">"%s"</span>, <a class="code" href="group__PrivateSierra.html#gfc5466f09e0e097f688eff2b3e7f1099">string</a>) &gt; 0) { 
<a name="l00384"></a>00384     
<a name="l00385"></a>00385     <span class="comment">// skip comment line </span>
<a name="l00386"></a>00386     <span class="keywordflow">if</span> (<a class="code" href="group__PrivateSierra.html#gfc5466f09e0e097f688eff2b3e7f1099">string</a>[0] == <span class="charliteral">'#'</span> || <a class="code" href="group__PrivateSierra.html#gfc5466f09e0e097f688eff2b3e7f1099">string</a>[0] == <span class="charliteral">'$'</span>) 
<a name="l00387"></a>00387       fscanf(inputfile, <span class="stringliteral">"%[^\n]%1[\n]"</span>, <a class="code" href="group__PrivateSierra.html#gfc5466f09e0e097f688eff2b3e7f1099">string</a>, <a class="code" href="group__PrivateSierra.html#g3226dc2ac4ecce1447ced54532d380cd">temp_string</a>);
<a name="l00388"></a>00388     
<a name="l00389"></a>00389     <span class="comment">// end block </span>
<a name="l00390"></a>00390     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="group__PrivateSierra.html#gfc5466f09e0e097f688eff2b3e7f1099">string</a>, <span class="stringliteral">"end"</span>)) {
<a name="l00391"></a>00391       level--;
<a name="l00392"></a>00392       fscanf(inputfile, <span class="stringliteral">"%[^\n]%1[\n]"</span>, <a class="code" href="group__PrivateSierra.html#gfc5466f09e0e097f688eff2b3e7f1099">string</a>, <a class="code" href="group__PrivateSierra.html#g3226dc2ac4ecce1447ced54532d380cd">temp_string</a>);
<a name="l00393"></a>00393     }
<a name="l00394"></a>00394     
<a name="l00395"></a>00395     <span class="comment">// begin block 0</span>
<a name="l00396"></a>00396     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="group__PrivateSierra.html#gfc5466f09e0e097f688eff2b3e7f1099">string</a>, <span class="stringliteral">"begin"</span>)) {
<a name="l00397"></a>00397       level++;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399       <span class="comment">// determine type of begin</span>
<a name="l00400"></a>00400       fscanf(inputfile, <span class="stringliteral">"%s"</span>, <a class="code" href="group__PrivateSierra.html#gfc5466f09e0e097f688eff2b3e7f1099">string</a>);
<a name="l00401"></a>00401       
<a name="l00402"></a>00402       <span class="comment">// sierra block</span>
<a name="l00403"></a>00403       <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="group__PrivateSierra.html#gfc5466f09e0e097f688eff2b3e7f1099">string</a>, <span class="stringliteral">"sierra"</span>)) {
<a name="l00404"></a>00404         rc = <a class="code" href="group__PrivateSierraHelpers.html#g1fd50603c93699e258e6dca082c16163">_fc_parseSierra</a>(inputfile, *sierra);
<a name="l00405"></a>00405         <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00406"></a>00406           <span class="keywordflow">return</span> rc;
<a name="l00407"></a>00407         level--;
<a name="l00408"></a>00408       }
<a name="l00409"></a>00409     }
<a name="l00410"></a>00410   }
<a name="l00411"></a>00411   
<a name="l00412"></a>00412   <span class="comment">// close the input file</span>
<a name="l00413"></a>00413   fclose(inputfile);
<a name="l00414"></a>00414 
<a name="l00415"></a>00415   <span class="keywordflow">if</span> (level != 0) 
<a name="l00416"></a>00416     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"parser: begins &amp; ends do not match."</span>);
<a name="l00417"></a>00417 
<a name="l00418"></a>00418   <span class="comment">// Make extra info for spot welds</span>
<a name="l00419"></a>00419   rc_keep = <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>; <span class="comment">// keep track of any errors</span>
<a name="l00420"></a>00420   <span class="keywordflow">for</span> (i = 0; i &lt; (*sierra)-&gt;numSpotWeld; i++) {
<a name="l00421"></a>00421     <a class="code" href="structFC__SierraSpotWeldInfo.html">FC_SierraSpotWeldInfo</a>* spotweld = (*sierra)-&gt;spotwelds[i];
<a name="l00422"></a>00422 
<a name="l00423"></a>00423     <span class="comment">// make connections to the functions</span>
<a name="l00424"></a>00424     spotweld-&gt;normalId = -1;
<a name="l00425"></a>00425     spotweld-&gt;tangentId = -1;
<a name="l00426"></a>00426     spotweld-&gt;normal_p = NULL;
<a name="l00427"></a>00427     spotweld-&gt;tangent_p = NULL;
<a name="l00428"></a>00428     for (j = 0; j &lt; (*sierra)-&gt;numFunction; j++) {
<a name="l00429"></a>00429       <a class="code" href="structFC__SierraFuncInfo.html">FC_SierraFuncInfo</a>* function = (*sierra)-&gt;functions[j];
<a name="l00430"></a>00430       if (!strcasecmp(spotweld-&gt;normal, function-&gt;name)) {
<a name="l00431"></a>00431         spotweld-&gt;normalId = j;
<a name="l00432"></a>00432         spotweld-&gt;normal_p = function;
<a name="l00433"></a>00433       }
<a name="l00434"></a>00434       <span class="keywordflow">if</span> (!strcasecmp(spotweld-&gt;tangent, function-&gt;name)) {
<a name="l00435"></a>00435         spotweld-&gt;tangentId = j;
<a name="l00436"></a>00436         spotweld-&gt;tangent_p = function;
<a name="l00437"></a>00437       }
<a name="l00438"></a>00438     }
<a name="l00439"></a>00439     <span class="keywordflow">if</span> (spotweld-&gt;normalId == -1 || spotweld-&gt;tangentId == -1) {      
<a name="l00440"></a>00440       rc_keep = <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>; <span class="comment">// don't return, try to set up other spotwelds</span>
<a name="l00441"></a>00441       <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"function for spotweld '%s' not found\n"</span>, 
<a name="l00442"></a>00442               spotweld-&gt;name);
<a name="l00443"></a>00443     }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445     <span class="comment">// make names used in database (e.g. 'nodelist_12' -&gt; 'Node set ID 12'</span>
<a name="l00446"></a>00446     <span class="comment">// and 'surface_3002' -&gt; 'Side set ID 3003')</span>
<a name="l00447"></a>00447     sprintf(spotweld-&gt;nodeset_name, <span class="stringliteral">"nodelist_%s"</span>, &amp;(spotweld-&gt;nodeset[9]));
<a name="l00448"></a>00448     sprintf(spotweld-&gt;surface_name, <span class="stringliteral">"surface_hex8_quadface4_%s"</span>, &amp;(spotweld-&gt;surface[8]));
<a name="l00449"></a>00449   }
<a name="l00450"></a>00450   
<a name="l00451"></a>00451   <span class="keywordflow">return</span> rc_keep;
<a name="l00452"></a>00452 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3de567711d66c7769a5e85b398aebe44"></a><!-- doxytag: member="sierra.c::fc_printSierraInfo" ref="g3de567711d66c7769a5e85b398aebe44" args="(FC_SierraInfo *sierra)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_printSierraInfo           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>sierra</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print an <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> struct. 
<p>
<b>Description:</b> <p>
Print the contents of an <a class="el" href="structFC__SierraInfo.html">FC_SierraInfo</a> struct.<p>
<b>Modifications:</b> 2003-JUN-24 W Koegler Created. <dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>sierra</em>&nbsp;</td><td>
input - sierra info object </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="sierra_8c-source.html#l00253">253</a> of file <a class="el" href="sierra_8c-source.html">sierra.c</a>.
<p>
References <a class="el" href="sierra_8h-source.html#l00160">FC_SierraInfo::displ_alias</a>, <a class="el" href="sierra_8h-source.html#l00161">FC_SierraInfo::f_ext_alias</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="sierra_8h-source.html#l00163">FC_SierraInfo::functions</a>, <a class="el" href="sierra_8h-source.html#l00159">FC_SierraInfo::name</a>, and <a class="el" href="sierra_8h-source.html#l00162">FC_SierraInfo::numFunction</a>.
<p>
Referenced by <a class="el" href="sierradump_8c-source.html#l00057">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00255"></a>00255   {
<a name="l00256"></a>00256   <span class="keywordtype">int</span> i, j;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258   <span class="comment">// check input</span>
<a name="l00259"></a>00259   <span class="keywordflow">if</span> (!sierra) {
<a name="l00260"></a>00260     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00261"></a>00261     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00262"></a>00262   }
<a name="l00263"></a>00263  
<a name="l00264"></a>00264   printf(<span class="stringliteral">"Sierra Problem '%s'\n"</span>, sierra-&gt;<a class="code" href="structFC__SierraInfo.html#a26e2bc95886ad0163e9710fea54f62e">name</a>);
<a name="l00265"></a>00265   fflush(NULL);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267   <span class="comment">// variables</span>
<a name="l00268"></a>00268   printf(<span class="stringliteral">"  Alias for 'displacement' = '%s'\n"</span>, sierra-&gt;<a class="code" href="structFC__SierraInfo.html#a327aebfe4edc2b4ec80c05e852a3a68">displ_alias</a>);
<a name="l00269"></a>00269   printf(<span class="stringliteral">"  Alias for 'force_external' = '%s'\n"</span>, sierra-&gt;<a class="code" href="structFC__SierraInfo.html#900800000e0198218d8da3d269dee57f">f_ext_alias</a>);
<a name="l00270"></a>00270   fflush(NULL);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   <span class="comment">// functions</span>
<a name="l00273"></a>00273   printf(<span class="stringliteral">"  Found %d functions:\n"</span>, sierra-&gt;<a class="code" href="structFC__SierraInfo.html#e3eb879cf2efcbe3e480bdcdbb0841c5">numFunction</a>);
<a name="l00274"></a>00274   <span class="keywordflow">for</span> (i = 0; i &lt; sierra-&gt;<a class="code" href="structFC__SierraInfo.html#e3eb879cf2efcbe3e480bdcdbb0841c5">numFunction</a>; i++) {
<a name="l00275"></a>00275     <a class="code" href="structFC__SierraFuncInfo.html">FC_SierraFuncInfo</a> *function = sierra-&gt;<a class="code" href="structFC__SierraInfo.html#08f488096064ed241f4ea8ef46113471">functions</a>[i];
<a name="l00276"></a>00276     printf(<span class="stringliteral">"    %d: '%s'\n"</span>, i, function-&gt;name);
<a name="l00277"></a>00277     printf(<span class="stringliteral">"      type = '%s'\n"</span>, function-&gt;type);
<a name="l00278"></a>00278     printf(<span class="stringliteral">"      abscissa label = '%s'\n"</span>, function-&gt;abscissa_label);
<a name="l00279"></a>00279     printf(<span class="stringliteral">"      ordinate label = '%s'\n"</span>, function-&gt;ordinate_label);
<a name="l00280"></a>00280     printf(<span class="stringliteral">"      number of values = %d\n"</span>, function-&gt;numValue);
<a name="l00281"></a>00281     printf(<span class="stringliteral">"      values = %f"</span>, function-&gt;values[0]);
<a name="l00282"></a>00282     if (function-&gt;numValue &gt; 1)
<a name="l00283"></a>00283       printf(<span class="stringliteral">"  %f\n"</span>,function-&gt;values[1]);
<a name="l00284"></a>00284     <span class="keywordflow">else</span>
<a name="l00285"></a>00285       printf(<span class="stringliteral">"\n"</span>);
<a name="l00286"></a>00286     <span class="keywordflow">if</span> (function-&gt;numValue &gt; 2) { 
<a name="l00287"></a>00287       for (j = 1; j &lt; function-&gt;numValue/2; j++)
<a name="l00288"></a>00288         printf(<span class="stringliteral">"               %f  %f\n"</span>, function-&gt;values[j*2], 
<a name="l00289"></a>00289                function-&gt;values[j*2+1]);
<a name="l00290"></a>00290     }
<a name="l00291"></a>00291     printf(<span class="stringliteral">"      min abscissa = %f\n"</span>, function-&gt;abscissa_min);
<a name="l00292"></a>00292     printf(<span class="stringliteral">"      max abscissa = %f\n"</span>, function-&gt;abscissa_max);
<a name="l00293"></a>00293     <span class="keywordflow">if</span> (function-&gt;numValue &gt; 1) {
<a name="l00294"></a>00294       printf(<span class="stringliteral">"      min ordinate = %f\n"</span>, function-&gt;ordinate_min);
<a name="l00295"></a>00295       printf(<span class="stringliteral">"      max ordinate = %f\n"</span>, function-&gt;ordinate_max);
<a name="l00296"></a>00296     }
<a name="l00297"></a>00297     <span class="keywordflow">else</span> {
<a name="l00298"></a>00298       printf(<span class="stringliteral">"      min ordinate = (not applicable)\n"</span>);
<a name="l00299"></a>00299       printf(<span class="stringliteral">"      max ordinate = (not applicable)\n"</span>);
<a name="l00300"></a>00300     }
<a name="l00301"></a>00301   }
<a name="l00302"></a>00302   fflush(NULL);
<a name="l00303"></a>00303 
<a name="l00304"></a>00304   <span class="comment">// spot welds</span>
<a name="l00305"></a>00305   printf(<span class="stringliteral">"  Found %d spot welds:\n"</span>, sierra-&gt;<a class="code" href="structFC__SierraInfo.html#a0677f6d13b69797cf81a4408d385ccb">numSpotWeld</a>);
<a name="l00306"></a>00306   <span class="keywordflow">for</span> (i = 0; i &lt; sierra-&gt;<a class="code" href="structFC__SierraInfo.html#a0677f6d13b69797cf81a4408d385ccb">numSpotWeld</a>; i++) {
<a name="l00307"></a>00307     <a class="code" href="structFC__SierraSpotWeldInfo.html">FC_SierraSpotWeldInfo</a> *spotweld = sierra-&gt;<a class="code" href="structFC__SierraInfo.html#ddbfbd203ed9a338b0ad20c8c5dc8722">spotwelds</a>[i];
<a name="l00308"></a>00308     printf(<span class="stringliteral">"    %d: '%s'\n"</span>, i, spotweld-&gt;name);
<a name="l00309"></a>00309     printf(<span class="stringliteral">"      node set = '%s' (name = '%s')\n"</span>, spotweld-&gt;nodeset,
<a name="l00310"></a>00310            spotweld-&gt;nodeset_name);
<a name="l00311"></a>00311     printf(<span class="stringliteral">"      surface  = '%s'  (name = '%s')\n"</span>, spotweld-&gt;surface,
<a name="l00312"></a>00312            spotweld-&gt;surface_name);
<a name="l00313"></a>00313     printf(<span class="stringliteral">"      normal displ. function (ID = %d)     = '%s'\n"</span>, 
<a name="l00314"></a>00314            spotweld-&gt;normalId, spotweld-&gt;normal);
<a name="l00315"></a>00315     printf(<span class="stringliteral">"      normal displ. scale factor = %f\n"</span>, spotweld-&gt;normal_scale);
<a name="l00316"></a>00316     printf(<span class="stringliteral">"      tangential displ. function (ID = %d) = '%s'\n"</span>, 
<a name="l00317"></a>00317            spotweld-&gt;tangentId, spotweld-&gt;tangent);
<a name="l00318"></a>00318     printf(<span class="stringliteral">"      tangent displ. scale factor = %f\n"</span>, spotweld-&gt;tangent_scale);
<a name="l00319"></a>00319     printf(<span class="stringliteral">"      failure envelope exponent = %f\n"</span>, spotweld-&gt;exponent);
<a name="l00320"></a>00320     printf(<span class="stringliteral">"      failure decay cycles = %d\n"</span>, spotweld-&gt;decay_cycles);
<a name="l00321"></a>00321   }
<a name="l00322"></a>00322   fflush(NULL);
<a name="l00323"></a>00323 
<a name="l00324"></a>00324   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00325"></a>00325 }
</pre></div>
<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Oct 31 11:10:02 2007 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
