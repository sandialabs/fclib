<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FCLib: modules/subset.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>modules/subset.c</h1><a href="subset_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (2000) Sandia Corporation. Under the terms of Contract</span>
<a name="l00003"></a>00003 <span class="comment"> * DE-AC04-94AL85000 with Sandia Corporation, the U.S. Government retains</span>
<a name="l00004"></a>00004 <span class="comment"> * certain rights in this software.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00007"></a>00007 <span class="comment"> * modification, are permitted provided that the following conditions are met:</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *   * Redistributions of source code must retain the above copyright</span>
<a name="l00010"></a>00010 <span class="comment"> *     notice, this list of conditions and the following disclaimer.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> *   * Redistributions in binary form must reproduce the above copyright</span>
<a name="l00013"></a>00013 <span class="comment"> *     notice, this list of conditions and the following disclaimer in the</span>
<a name="l00014"></a>00014 <span class="comment"> *     documentation and/or other materials provided with the</span>
<a name="l00015"></a>00015 <span class="comment"> *     distribution.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> *   * Neither the name of Sandia nor the names of any contributors may</span>
<a name="l00018"></a>00018 <span class="comment"> *     be used to endorse or promote products derived from this software</span>
<a name="l00019"></a>00019 <span class="comment"> *     without specific prior written permission.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> *   * Modified source versions must be plainly marked as such, and must</span>
<a name="l00022"></a>00022 <span class="comment"> *     not be misrepresented as being the original software.</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"</span>
<a name="l00025"></a>00025 <span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00026"></a>00026 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00027"></a>00027 <span class="comment"> * ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHORS OR CONTRIBUTORS BE LIABLE FOR</span>
<a name="l00028"></a>00028 <span class="comment"> * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<a name="l00029"></a>00029 <span class="comment"> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00030"></a>00030 <span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00031"></a>00031 <span class="comment"> * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00032"></a>00032 <span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<a name="l00033"></a>00033 <span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span>
<a name="l00034"></a>00034 <span class="comment"> * DAMAGE.</span>
<a name="l00035"></a>00035 <span class="comment"> */</span>
<a name="l00036"></a>00036 <span class="comment"></span>
<a name="l00037"></a>00037 <span class="comment">/**</span>
<a name="l00038"></a>00038 <span class="comment"> * \file subset.c</span>
<a name="l00039"></a>00039 <span class="comment"> * \brief Implementation for the \ref Subset module.</span>
<a name="l00040"></a>00040 <span class="comment"> *</span>
<a name="l00041"></a>00041 <span class="comment"> * $Source: /usr/local/Repositories/fcdmf/fclib/modules/subset.c,v $ </span>
<a name="l00042"></a>00042 <span class="comment"> * $Revision: 1.154 $ </span>
<a name="l00043"></a>00043 <span class="comment"> * $Date: 2006/10/19 03:14:50 $</span>
<a name="l00044"></a>00044 <span class="comment"> */</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="comment">// C library includes</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="comment">// fc library includes</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include "<a class="code" href="base_8h.html">base.h</a>"</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include "<a class="code" href="storage_8h.html">storage.h</a>"</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include "<a class="code" href="library_8h.html">library.h</a>"</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include "<a class="code" href="mesh_8h.html">mesh.h</a>"</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include "<a class="code" href="variable_8h.html">variable.h</a>"</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include "<a class="code" href="topo_8h.html">topo.h</a>"</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include "<a class="code" href="tableP_8h.html">tableP.h</a>"</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include "<a class="code" href="datasetP_8h.html">datasetP.h</a>"</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include "<a class="code" href="sequenceP_8h.html">sequenceP.h</a>"</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include "<a class="code" href="meshP_8h.html">meshP.h</a>"</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include "<a class="code" href="variableP_8h.html">variableP.h</a>"</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include "<a class="code" href="fileioP_8h.html">fileioP.h</a>"</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include "<a class="code" href="util_8h.html">util.h</a>"</span>
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="comment">// this module</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include "<a class="code" href="subset_8h.html">subset.h</a>"</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include "<a class="code" href="subsetP_8h.html">subsetP.h</a>"</span>
<a name="l00069"></a>00069 <span class="comment"></span>
<a name="l00070"></a>00070 <span class="comment">/**</span>
<a name="l00071"></a>00071 <span class="comment"> * \addtogroup  Subset</span>
<a name="l00072"></a>00072 <span class="comment"> * \brief Operations on subsets.</span>
<a name="l00073"></a>00073 <span class="comment"> *</span>
<a name="l00074"></a>00074 <span class="comment"> * \description</span>
<a name="l00075"></a>00075 <span class="comment"> *</span>
<a name="l00076"></a>00076 <span class="comment"> *    (For an explanation of general data manipulations, see </span>
<a name="l00077"></a>00077 <span class="comment"> *    \ref DataInterface.)</span>
<a name="l00078"></a>00078 <span class="comment"> */</span>
<a name="l00079"></a>00079 <span class="comment"></span>
<a name="l00080"></a>00080 <span class="comment">/**</span>
<a name="l00081"></a>00081 <span class="comment"> * \ingroup Subset</span>
<a name="l00082"></a>00082 <span class="comment"> * \defgroup PrivateSubset (Private)</span>
<a name="l00083"></a>00083 <span class="comment"> */</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="comment">// ----------- Global variables --------------</span>
<a name="l00086"></a>00086 <span class="comment"></span>
<a name="l00087"></a>00087 <span class="comment">/** </span>
<a name="l00088"></a>00088 <span class="comment"> * \ingroup PrivateSubset</span>
<a name="l00089"></a>00089 <span class="comment"> * \brief The number of allocated slots in the subset table.</span>
<a name="l00090"></a>00090 <span class="comment"> */</span>
<a name="l00091"></a><a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">00091</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a> = 0;<span class="comment"></span>
<a name="l00092"></a>00092 <span class="comment">/** </span>
<a name="l00093"></a>00093 <span class="comment"> * \ingroup PrivateSubset</span>
<a name="l00094"></a>00094 <span class="comment"> * \brief The subset table.</span>
<a name="l00095"></a>00095 <span class="comment"> */</span>
<a name="l00096"></a><a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">00096</a> <span class="keyword">static</span> <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a> **<a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a> = NULL;<span class="comment"></span>
<a name="l00097"></a>00097 <span class="comment">/**</span>
<a name="l00098"></a>00098 <span class="comment"> * \ingroup PrivateSubset</span>
<a name="l00099"></a>00099 <span class="comment"> * \brief The list of unused slots in the subset table.</span>
<a name="l00100"></a>00100 <span class="comment"> */</span>
<a name="l00101"></a><a class="code" href="group__PrivateSubset.html#g3e1c0c1ffd48c43e3bc25969ea4bf1e3">00101</a> <span class="keyword">static</span> <a class="code" href="structFC__SortedIntArray.html">FC_SortedIntArray</a> <a class="code" href="group__PrivateSubset.html#g3e1c0c1ffd48c43e3bc25969ea4bf1e3">subOpenSlots</a> = { 0, 0, 0 };
<a name="l00102"></a>00102 <span class="comment"></span>
<a name="l00103"></a>00103 <span class="comment">/** \name Create new subset from scratch. */</span>
<a name="l00104"></a>00104 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l00105"></a>00105 <span class="comment">//@{</span>
<a name="l00106"></a>00106 <span class="comment"></span><span class="comment"></span>
<a name="l00107"></a>00107 <span class="comment">/**</span>
<a name="l00108"></a>00108 <span class="comment"> * \ingroup Subset</span>
<a name="l00109"></a>00109 <span class="comment"> * \brief  Create a new subset on a specified mesh.</span>
<a name="l00110"></a>00110 <span class="comment"> *</span>
<a name="l00111"></a>00111 <span class="comment"> * \description</span>
<a name="l00112"></a>00112 <span class="comment"> *</span>
<a name="l00113"></a>00113 <span class="comment"> *     Create a new (empty) subset to hold entities of the specified type on a</span>
<a name="l00114"></a>00114 <span class="comment"> *     specified mesh. Sets up subset data structure and initializes it to</span>
<a name="l00115"></a>00115 <span class="comment"> *     default values.  Mesh, subsetName and assoc must be given and valid.</span>
<a name="l00116"></a>00116 <span class="comment"> *     It is an error to try to create a subset on an entity type that does</span>
<a name="l00117"></a>00117 <span class="comment"> *     not exists (e.g. faces on a line mesh).  </span>
<a name="l00118"></a>00118 <span class="comment"> *</span>
<a name="l00119"></a>00119 <span class="comment"> *     It is not possible to create subsets with association</span>
<a name="l00120"></a>00120 <span class="comment"> *     FC_AT_WHOLE_DATASET. </span>
<a name="l00121"></a>00121 <span class="comment"> *</span>
<a name="l00122"></a>00122 <span class="comment"> * \modifications  </span>
<a name="l00123"></a>00123 <span class="comment"> *    - 03/31/04 RM, Created.</span>
<a name="l00124"></a>00124 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l00125"></a>00125 <span class="comment"> *    - 07/23/05 WSK, removed storage type from argument list.</span>
<a name="l00126"></a>00126 <span class="comment"> */</span>
<a name="l00127"></a><a class="code" href="group__Subset.html#g40d47282abccd83987c83e8051064db2">00127</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g40d47282abccd83987c83e8051064db2">fc_createSubset</a>(
<a name="l00128"></a>00128   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh,       <span class="comment">/**&lt; input - mesh handle */</span>
<a name="l00129"></a>00129   <span class="keywordtype">char</span> *subsetName,   <span class="comment">/**&lt; input - name of a subset to be created  */</span>
<a name="l00130"></a>00130   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc,  <span class="comment">/**&lt; input - association of subset entities */</span>
<a name="l00131"></a>00131   <a class="code" href="structFC__Subset.html">FC_Subset</a> *subset   <span class="comment">/**&lt; output - subset handle */</span>
<a name="l00132"></a>00132 ) {
<a name="l00133"></a>00133   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00134"></a>00134   <span class="keywordtype">int</span> num;
<a name="l00135"></a>00135   <span class="keywordtype">int</span> *tempSlotIDs;
<a name="l00136"></a>00136   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l00137"></a>00137   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l00138"></a>00138 
<a name="l00139"></a>00139   <span class="comment">// default return</span>
<a name="l00140"></a>00140   <span class="keywordflow">if</span> (subset) 
<a name="l00141"></a>00141     *subset = <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>; 
<a name="l00142"></a>00142    
<a name="l00143"></a>00143   <span class="comment">// check input</span>
<a name="l00144"></a>00144   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l00145"></a>00145   <span class="keywordflow">if</span> (meshSlot == NULL || !subsetName  || !assoc || 
<a name="l00146"></a>00146       !<a class="code" href="group__DataTypes.html#g8f5259ca911a1f9ec4cecf5762dc1913">fc_isAssociationTypeValid</a>(assoc) || assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a> || 
<a name="l00147"></a>00147       assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a> || !subset) {
<a name="l00148"></a>00148     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00149"></a>00149     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00150"></a>00150   }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152   <span class="comment">// log message</span>
<a name="l00153"></a>00153   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new subset '%s'"</span>, subsetName);
<a name="l00154"></a>00154 
<a name="l00155"></a>00155   <span class="comment">// do as much checking as possible before creating new slot</span>
<a name="l00156"></a>00156   <span class="comment">// ----- get number of mask elements depending on association</span>
<a name="l00157"></a>00157   rc = <a class="code" href="group__Mesh.html#gf169a555056c84bdfd59839bab4f8d76">fc_getMeshNumEntity</a>(mesh,assoc,&amp;num); 
<a name="l00158"></a>00158   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) 
<a name="l00159"></a>00159     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00160"></a>00160   <span class="keywordflow">if</span> (num &lt; 1) {
<a name="l00161"></a>00161     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Entity type %s does not exists on mesh '%s'"</span>,
<a name="l00162"></a>00162                           <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(assoc),
<a name="l00163"></a>00163                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>); 
<a name="l00164"></a>00164     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00165"></a>00165   }
<a name="l00166"></a>00166 
<a name="l00167"></a>00167   <span class="comment">// get an open slot</span>
<a name="l00168"></a>00168   subSlot = <a class="code" href="group__PrivateSubset.html#g8499ff7fa9118ca91195cc523c8246ea">_fc_getNewSubSlot</a>();
<a name="l00169"></a>00169   <span class="keywordflow">if</span> (!subSlot) {
<a name="l00170"></a>00170     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00171"></a>00171     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00172"></a>00172   }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174   <span class="comment">// table header information</span>
<a name="l00175"></a>00175   <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>(*subset, subSlot);
<a name="l00176"></a>00176   <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>, subsetName);
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   <span class="comment">// set back and forth references to mesh</span>
<a name="l00179"></a>00179   subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#e2ea84949d74bb96696ee64123ff6f3d">mesh</a> = mesh;
<a name="l00180"></a>00180   tempSlotIDs = realloc(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>+1));
<a name="l00181"></a>00181   <span class="keywordflow">if</span> (tempSlotIDs == NULL) {
<a name="l00182"></a>00182     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00183"></a>00183     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00184"></a>00184   }
<a name="l00185"></a>00185   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a> = tempSlotIDs;
<a name="l00186"></a>00186   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a>[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>] = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#bcade4ee6957823bf234769051debf4d">slotID</a>;
<a name="l00187"></a>00187   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>++;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <span class="comment">// Setup subset metadata</span>
<a name="l00190"></a>00190   subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#4c72118524caf5d218cbec9b87836521">assoc</a> = assoc;
<a name="l00191"></a>00191   subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a> = num;
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00194"></a>00194 }
<a name="l00195"></a>00195 <span class="comment"></span>
<a name="l00196"></a>00196 <span class="comment">//@}</span>
<a name="l00197"></a>00197 <span class="comment"></span><span class="comment"></span>
<a name="l00198"></a>00198 <span class="comment">/** \name Other ways to get new subsets. */</span>
<a name="l00199"></a>00199 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l00200"></a>00200 <span class="comment">//@{</span>
<a name="l00201"></a>00201 <span class="comment"></span><span class="comment"></span>
<a name="l00202"></a>00202 <span class="comment">/**</span>
<a name="l00203"></a>00203 <span class="comment"> * \ingroup Subset</span>
<a name="l00204"></a>00204 <span class="comment"> * \brief  Copy subset to a new subset.</span>
<a name="l00205"></a>00205 <span class="comment"> *</span>
<a name="l00206"></a>00206 <span class="comment"> * \description</span>
<a name="l00207"></a>00207 <span class="comment"> *  </span>
<a name="l00208"></a>00208 <span class="comment"> *      Create new subset by copying the input subset onto a destination </span>
<a name="l00209"></a>00209 <span class="comment"> *      mesh. If destination and source mesh is not close enough the </span>
<a name="l00210"></a>00210 <span class="comment"> *      error will be returned, the new subset will not be created.</span>
<a name="l00211"></a>00211 <span class="comment"> *</span>
<a name="l00212"></a>00212 <span class="comment"> * \modifications</span>
<a name="l00213"></a>00213 <span class="comment"> *    - 05/24/04 RM, created. </span>
<a name="l00214"></a>00214 <span class="comment"> *    - 06/02/04 RM reworked, added checking compatibility between the </span>
<a name="l00215"></a>00215 <span class="comment"> *        destination mesh's number of association elements and the </span>
<a name="l00216"></a>00216 <span class="comment"> *        maxNumMember number of subset </span>
<a name="l00217"></a>00217 <span class="comment"> */</span>
<a name="l00218"></a><a class="code" href="group__Subset.html#g8d62de2aecacfe4938e68a08153fd3c1">00218</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g8d62de2aecacfe4938e68a08153fd3c1">fc_copySubset</a>(
<a name="l00219"></a>00219   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,      <span class="comment">/**&lt; input - handle to subset to be copied        */</span>
<a name="l00220"></a>00220   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> destMesh,      <span class="comment">/**&lt; input - the destination mesh to be copied to */</span>
<a name="l00221"></a>00221   <span class="keywordtype">char</span>* newSubsetName,   <span class="comment">/**&lt; input - new subset's name                    */</span>
<a name="l00222"></a>00222   <a class="code" href="structFC__Subset.html">FC_Subset</a> *newSubset   <span class="comment">/**&lt; output - handle to new subset                */</span>
<a name="l00223"></a>00223 ){
<a name="l00224"></a>00224   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc; 
<a name="l00225"></a>00225   <span class="keywordtype">int</span> numEntity, maxNumMember, numMember, *memberIDs;
<a name="l00226"></a>00226   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l00227"></a>00227   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a> *subSlot;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229   <span class="comment">// default returns</span>
<a name="l00230"></a>00230   <span class="keywordflow">if</span> (newSubset)
<a name="l00231"></a>00231     *newSubset = <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>;        
<a name="l00232"></a>00232  
<a name="l00233"></a>00233   <span class="comment">// check input - NULL name is o.k.</span>
<a name="l00234"></a>00234   <span class="keywordflow">if</span> (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset) || !<a class="code" href="group__Mesh.html#gdc4cdd6e7f6a9151458bcb2c25715fd5">fc_isMeshValid</a>(destMesh) || !newSubset) { 
<a name="l00235"></a>00235     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00236"></a>00236     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00237"></a>00237   }
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="comment">// check for null name</span>
<a name="l00240"></a>00240   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l00241"></a>00241   <span class="keywordflow">if</span> (newSubsetName == NULL)
<a name="l00242"></a>00242     newSubsetName = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l00243"></a>00243 
<a name="l00244"></a>00244   <span class="comment">// log message</span>
<a name="l00245"></a>00245   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Copying subset '%s' to '%s'"</span>,
<a name="l00246"></a>00246                       subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, newSubsetName);
<a name="l00247"></a>00247 
<a name="l00248"></a>00248   <span class="comment">// get other info from source subset &amp; dest mesh</span>
<a name="l00249"></a>00249   rc = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset, NULL, &amp;maxNumMember, &amp;assoc);
<a name="l00250"></a>00250   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00251"></a>00251     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info from subset."</span>);
<a name="l00252"></a>00252     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00253"></a>00253   }
<a name="l00254"></a>00254   rc = <a class="code" href="group__Mesh.html#gf169a555056c84bdfd59839bab4f8d76">fc_getMeshNumEntity</a>(destMesh, assoc, &amp;numEntity);
<a name="l00255"></a>00255   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) 
<a name="l00256"></a>00256     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258   <span class="comment">// more checking - destination mesh and subset assoc type are compatible</span>
<a name="l00259"></a>00259   <span class="keywordflow">if</span> (numEntity != maxNumMember ) {
<a name="l00260"></a>00260     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: destination mesh not compatible with the subset"</span>, 
<a name="l00261"></a>00261                           <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00262"></a>00262     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00263"></a>00263   }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265   <span class="comment">// --- do it</span>
<a name="l00266"></a>00266   rc = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset, &amp;numMember, &amp;memberIDs); 
<a name="l00267"></a>00267   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00268"></a>00268     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error in getting members from subset."</span>);
<a name="l00269"></a>00269     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00270"></a>00270   }
<a name="l00271"></a>00271   rc = <a class="code" href="group__Subset.html#g40d47282abccd83987c83e8051064db2">fc_createSubset</a>(destMesh, newSubsetName, assoc, &amp;(*newSubset));
<a name="l00272"></a>00272   <span class="keywordflow">if</span> ( rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00273"></a>00273     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error creating subset."</span>);
<a name="l00274"></a>00274     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00275"></a>00275   }
<a name="l00276"></a>00276   rc = <a class="code" href="group__Subset.html#g47d34843c8d66c114c2c81e3a1fc14e4">fc_addArrayMembersToSubset</a>(*newSubset, numMember, memberIDs);
<a name="l00277"></a>00277   <span class="keywordflow">if</span> ( rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00278"></a>00278     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error adding members to a new subset."</span>);
<a name="l00279"></a>00279     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00280"></a>00280   }  
<a name="l00281"></a>00281   
<a name="l00282"></a>00282   <span class="comment">// cleanup</span>
<a name="l00283"></a>00283   free(memberIDs);
<a name="l00284"></a>00284 
<a name="l00285"></a>00285   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00286"></a>00286 }
<a name="l00287"></a>00287 <span class="comment"></span>
<a name="l00288"></a>00288 <span class="comment">/**</span>
<a name="l00289"></a>00289 <span class="comment"> * \ingroup Subset</span>
<a name="l00290"></a>00290 <span class="comment"> * \brief  Create copy subset associated with a different mesh entity type.</span>
<a name="l00291"></a>00291 <span class="comment"> *</span>
<a name="l00292"></a>00292 <span class="comment"> * \description</span>
<a name="l00293"></a>00293 <span class="comment"> *</span>
<a name="l00294"></a>00294 <span class="comment"> *    This routine is essentially the same as</span>
<a name="l00295"></a>00295 <span class="comment"> *    fc_changeMeshEntityType() but for a subset instead of a list of entity</span>
<a name="l00296"></a>00296 <span class="comment"> *    IDs.</span>
<a name="l00297"></a>00297 <span class="comment"> *</span>
<a name="l00298"></a>00298 <span class="comment"> *    If the new association type is of higher dimensionality than the old</span>
<a name="l00299"></a>00299 <span class="comment"> *    (e.g. new subset will be on element and old was on vertices), the</span>
<a name="l00300"></a>00300 <span class="comment"> *    'doStrict' flag determines whether to keep new entities if not all of</span>
<a name="l00301"></a>00301 <span class="comment"> *    their child entities are in the old subset. 1 = be strict and only have</span>
<a name="l00302"></a>00302 <span class="comment"> *    the entity in the new subset if all of it's children are present in the</span>
<a name="l00303"></a>00303 <span class="comment"> *    old subset. 0 = be lenient and add all entities that have at least one</span>
<a name="l00304"></a>00304 <span class="comment"> *    child in the old subset. </span>
<a name="l00305"></a>00305 <span class="comment"> *</span>
<a name="l00306"></a>00306 <span class="comment"> *    The new association type cannot be FC_AT_WHOLE_DATASET.</span>
<a name="l00307"></a>00307 <span class="comment"> *</span>
<a name="l00308"></a>00308 <span class="comment"> * \modifications</span>
<a name="l00309"></a>00309 <span class="comment"> *    - 11/29/04 WSK, created.</span>
<a name="l00310"></a>00310 <span class="comment"> */</span>
<a name="l00311"></a><a class="code" href="group__Subset.html#gb776198fa763b99d16d1512d1e75d818">00311</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#gb776198fa763b99d16d1512d1e75d818">fc_copySubsetWithNewAssociation</a>(
<a name="l00312"></a>00312   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,      <span class="comment">/**&lt; input - handle to subset to be copied */</span>
<a name="l00313"></a>00313   <span class="keywordtype">char</span>* newSubsetName,   <span class="comment">/**&lt; input - new subset's name */</span>
<a name="l00314"></a>00314   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> new_assoc,  <span class="comment">/**&lt; input - the output association type  */</span>
<a name="l00315"></a>00315   <span class="keywordtype">int</span> doStrict,          <span class="comment">/**&lt; input - flag for dropping incomplete entities */</span>
<a name="l00316"></a>00316   <a class="code" href="structFC__Subset.html">FC_Subset</a> *newSubset   <span class="comment">/**&lt; output - handle to new subset */</span>
<a name="l00317"></a>00317 ){
<a name="l00318"></a>00318   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc; 
<a name="l00319"></a>00319   <span class="keywordtype">int</span> numMember, *memberIDs, newNumMember, *newMemberIDs;
<a name="l00320"></a>00320   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh;
<a name="l00321"></a>00321   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l00322"></a>00322   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a> *subSlot;
<a name="l00323"></a>00323 
<a name="l00324"></a>00324   <span class="comment">// default returns</span>
<a name="l00325"></a>00325   <span class="keywordflow">if</span> (newSubset)
<a name="l00326"></a>00326     *newSubset = <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>;        
<a name="l00327"></a>00327  
<a name="l00328"></a>00328   <span class="comment">// check input - NULL name is o.k.</span>
<a name="l00329"></a>00329   <span class="keywordflow">if</span> (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset) || !<a class="code" href="group__DataTypes.html#g8f5259ca911a1f9ec4cecf5762dc1913">fc_isAssociationTypeValid</a>(new_assoc) ||
<a name="l00330"></a>00330       new_assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a> || new_assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a> ||
<a name="l00331"></a>00331       (doStrict != 0 &amp;&amp; doStrict != 1) || !newSubset) { 
<a name="l00332"></a>00332     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00333"></a>00333     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00334"></a>00334   }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336   <span class="comment">// check for null name</span>
<a name="l00337"></a>00337   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l00338"></a>00338   <span class="keywordflow">if</span> (newSubsetName == NULL)
<a name="l00339"></a>00339     newSubsetName = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l00340"></a>00340 
<a name="l00341"></a>00341   <span class="comment">// log message</span>
<a name="l00342"></a>00342   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Copying subset '%s' while changing association type"</span>,
<a name="l00343"></a>00343                       subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00344"></a>00344 
<a name="l00345"></a>00345   <span class="comment">// get other info from source subset &amp; dest mesh</span>
<a name="l00346"></a>00346   rc = <a class="code" href="group__Subset.html#gd546b0c5303f4c8a0f256662aff729a4">fc_getSubsetAssociationType</a>(subset, &amp;assoc);
<a name="l00347"></a>00347   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00348"></a>00348     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info from subset."</span>);
<a name="l00349"></a>00349     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00350"></a>00350   }
<a name="l00351"></a>00351   rc = <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(subset, &amp;mesh);
<a name="l00352"></a>00352   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00353"></a>00353     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get mesh from subset."</span>);
<a name="l00354"></a>00354     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00355"></a>00355   }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357   <span class="comment">// special case -- if assoc is the same, just call fc_copySubset()</span>
<a name="l00358"></a>00358   <span class="keywordflow">if</span> (new_assoc == assoc)
<a name="l00359"></a>00359     <span class="keywordflow">return</span> <a class="code" href="group__Subset.html#g8d62de2aecacfe4938e68a08153fd3c1">fc_copySubset</a>(subset, mesh, newSubsetName, newSubset);
<a name="l00360"></a>00360 
<a name="l00361"></a>00361   <span class="comment">// --- do it</span>
<a name="l00362"></a>00362   rc = <a class="code" href="group__Subset.html#g40d47282abccd83987c83e8051064db2">fc_createSubset</a>(mesh, newSubsetName, new_assoc, newSubset);
<a name="l00363"></a>00363   <span class="keywordflow">if</span> ( rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00364"></a>00364     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error creating subset."</span>);
<a name="l00365"></a>00365     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00366"></a>00366   }
<a name="l00367"></a>00367   rc = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset, &amp;numMember, &amp;memberIDs); 
<a name="l00368"></a>00368   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00369"></a>00369     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error in getting members from subset."</span>);
<a name="l00370"></a>00370     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00371"></a>00371   }
<a name="l00372"></a>00372   <span class="keywordflow">if</span> (numMember &gt; 0) {
<a name="l00373"></a>00373     rc = <a class="code" href="group__TopologyRelations.html#gf4ca2001668b08cc6c09a88f55e45ebe">fc_changeMeshEntityType</a>(mesh, assoc, numMember, memberIDs, new_assoc,
<a name="l00374"></a>00374                                  doStrict, &amp;newNumMember, &amp;newMemberIDs);
<a name="l00375"></a>00375     free(memberIDs);
<a name="l00376"></a>00376     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00377"></a>00377       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error changing member association"</span>);
<a name="l00378"></a>00378       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00379"></a>00379     }
<a name="l00380"></a>00380     <span class="keywordflow">if</span> (newNumMember &gt; 0) {
<a name="l00381"></a>00381       rc = <a class="code" href="group__Subset.html#g47d34843c8d66c114c2c81e3a1fc14e4">fc_addArrayMembersToSubset</a>(*newSubset, newNumMember, newMemberIDs);
<a name="l00382"></a>00382       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00383"></a>00383         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error adding members to a new subset."</span>);
<a name="l00384"></a>00384         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00385"></a>00385       }
<a name="l00386"></a>00386       free(newMemberIDs);
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388   }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 <span class="comment"></span>
<a name="l00393"></a>00393 <span class="comment">/**</span>
<a name="l00394"></a>00394 <span class="comment"> * \ingroup Subset</span>
<a name="l00395"></a>00395 <span class="comment"> * \brief  Create subset containing complement of the subset (NOT operator).</span>
<a name="l00396"></a>00396 <span class="comment"> *</span>
<a name="l00397"></a>00397 <span class="comment"> * \description</span>
<a name="l00398"></a>00398 <span class="comment"> *  </span>
<a name="l00399"></a>00399 <span class="comment"> *      Create new complement subset by performing logical NOT operation </span>
<a name="l00400"></a>00400 <span class="comment"> *      on a subset. New subset will be on the same mesh as original subset. </span>
<a name="l00401"></a>00401 <span class="comment"> *</span>
<a name="l00402"></a>00402 <span class="comment"> * \modifications</span>
<a name="l00403"></a>00403 <span class="comment"> *    - 05/21/04 RM, created. </span>
<a name="l00404"></a>00404 <span class="comment"> */</span>
<a name="l00405"></a><a class="code" href="group__Subset.html#g87e7ab1e0c28ec2d3f903f7564050bfa">00405</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g87e7ab1e0c28ec2d3f903f7564050bfa">fc_createSubsetComplement</a>(
<a name="l00406"></a>00406   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,       <span class="comment">/**&lt; input - handle to original subset       */</span>
<a name="l00407"></a>00407   <span class="keywordtype">char</span>* newSubsetName,    <span class="comment">/**&lt; input - new subset's name               */</span>
<a name="l00408"></a>00408   <a class="code" href="structFC__Subset.html">FC_Subset</a> *newSubset    <span class="comment">/**&lt; output - handle to new subset           */</span>
<a name="l00409"></a>00409 ){
<a name="l00410"></a>00410   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc, rc1, rc2;
<a name="l00411"></a>00411   <span class="keywordtype">int</span> i;
<a name="l00412"></a>00412   <span class="keywordtype">int</span> maskLength, *mask;
<a name="l00413"></a>00413   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a> *subSlot;
<a name="l00414"></a>00414   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh;
<a name="l00415"></a>00415   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l00416"></a>00416 
<a name="l00417"></a>00417   <span class="comment">// default returns</span>
<a name="l00418"></a>00418   <span class="keywordflow">if</span> (newSubset)
<a name="l00419"></a>00419     *newSubset = <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>;        
<a name="l00420"></a>00420  
<a name="l00421"></a>00421   <span class="comment">// check input</span>
<a name="l00422"></a>00422   <span class="keywordflow">if</span> (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset) || !newSubsetName || !newSubset) {
<a name="l00423"></a>00423     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00424"></a>00424     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00425"></a>00425   }
<a name="l00426"></a>00426   
<a name="l00427"></a>00427   <span class="comment">// log message</span>
<a name="l00428"></a>00428   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l00429"></a>00429   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Creating complement to subset '%s' with name '%s'"</span>,
<a name="l00430"></a>00430                       subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, newSubsetName);
<a name="l00431"></a>00431   
<a name="l00432"></a>00432   <span class="comment">// get subset members</span>
<a name="l00433"></a>00433   rc = <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(subset, &amp;mesh);
<a name="l00434"></a>00434   rc1 = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset, NULL, NULL, &amp;assoc);
<a name="l00435"></a>00435   rc2 = <a class="code" href="group__Subset.html#ga7568ce9f45cccaf92900791129a8211">fc_getSubsetMembersAsMask</a>(subset, &amp;maskLength, &amp;mask); 
<a name="l00436"></a>00436   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00437"></a>00437     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error in accessing subset's fields"</span>);
<a name="l00438"></a>00438     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00439"></a>00439   } 
<a name="l00440"></a>00440   
<a name="l00441"></a>00441   <span class="comment">// revert mask in place</span>
<a name="l00442"></a>00442   <span class="keywordflow">for</span> (i = 0; i &lt; maskLength; i++) 
<a name="l00443"></a>00443     mask[i] = ( mask[i] == 0 ) ? 1 : 0;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445   <span class="comment">// create the new subset</span>
<a name="l00446"></a>00446   rc = <a class="code" href="group__Subset.html#g40d47282abccd83987c83e8051064db2">fc_createSubset</a>(mesh, newSubsetName, assoc, &amp;(*newSubset));
<a name="l00447"></a>00447   <span class="keywordflow">if</span> (rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00448"></a>00448     free(mask);
<a name="l00449"></a>00449     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"error creating subset"</span>);
<a name="l00450"></a>00450     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00451"></a>00451   }
<a name="l00452"></a>00452   rc = <a class="code" href="group__Subset.html#gc0f4cc5152ec5e2627f7a6fcbfec12b7">fc_addMaskMembersToSubset</a>(*newSubset, maskLength, mask);
<a name="l00453"></a>00453   free(mask);
<a name="l00454"></a>00454 
<a name="l00455"></a>00455   <span class="keywordflow">return</span> rc;
<a name="l00456"></a>00456 }
<a name="l00457"></a>00457 <span class="comment"></span>
<a name="l00458"></a>00458 <span class="comment">/**</span>
<a name="l00459"></a>00459 <span class="comment"> * \ingroup Subset</span>
<a name="l00460"></a>00460 <span class="comment"> * \brief  Create subset based on intersection of two input subsets.</span>
<a name="l00461"></a>00461 <span class="comment"> *</span>
<a name="l00462"></a>00462 <span class="comment"> * \description</span>
<a name="l00463"></a>00463 <span class="comment"> *  </span>
<a name="l00464"></a>00464 <span class="comment"> *      Create new subset by performing logical operation (intersection)</span>
<a name="l00465"></a>00465 <span class="comment"> *      on two input subsets. The operation is given by a string and</span>
<a name="l00466"></a>00466 <span class="comment"> *      can have the following values: </span>
<a name="l00467"></a>00467 <span class="comment"> *       - \b "AND", \b "and", \b "&amp;&amp;" or \b "&amp;" ---  the logical AND operation</span>
<a name="l00468"></a>00468 <span class="comment"> *       - \b "OR", \b "or", \b "||" or \b "|"   ---  the logical OR op.</span>
<a name="l00469"></a>00469 <span class="comment"> *       - \b "XOR" \b "xor", or \b "^"        ---  the logical XOR  (OR-AND) op.</span>
<a name="l00470"></a>00470 <span class="comment"> *</span>
<a name="l00471"></a>00471 <span class="comment"> *      Subset's need to have the same association type.</span>
<a name="l00472"></a>00472 <span class="comment"> *</span>
<a name="l00473"></a>00473 <span class="comment"> *      FC_NULL_SUBSET is allowed for one of the subsets and behaves the</span>
<a name="l00474"></a>00474 <span class="comment"> *      same as if you had provided an empty subset. </span>
<a name="l00475"></a>00475 <span class="comment"> *</span>
<a name="l00476"></a>00476 <span class="comment"> * \todo ?Right now can only intersect sets on same mesh.</span>
<a name="l00477"></a>00477 <span class="comment"> *</span>
<a name="l00478"></a>00478 <span class="comment"> * \modifications</span>
<a name="l00479"></a>00479 <span class="comment"> *    - 05/18/04 RM, created.</span>
<a name="l00480"></a>00480 <span class="comment"> *    - 09/21/04 WSK, changed input checking &amp; cleanup.</span>
<a name="l00481"></a>00481 <span class="comment"> */</span>
<a name="l00482"></a><a class="code" href="group__Subset.html#gdc68d18522eac86b0c3eeb655e91f80b">00482</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#gdc68d18522eac86b0c3eeb655e91f80b">fc_createSubsetIntersection</a>(
<a name="l00483"></a>00483   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset1,    <span class="comment">/**&lt; input - first subset's handle               */</span>
<a name="l00484"></a>00484   <span class="keywordtype">char</span>* operation,      <span class="comment">/**&lt; input - string describing logical operation */</span>
<a name="l00485"></a>00485   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset2,    <span class="comment">/**&lt; input - second subset's handle              */</span>
<a name="l00486"></a>00486   <span class="keywordtype">char</span>* newSubsetName,  <span class="comment">/**&lt; output - new subset's name                  */</span>
<a name="l00487"></a>00487   <a class="code" href="structFC__Subset.html">FC_Subset</a> *newSubset  <span class="comment">/**&lt; output - new subset handle                  */</span>
<a name="l00488"></a>00488 ) {
<a name="l00489"></a>00489   <span class="keywordtype">int</span> ioper, i, j, k;
<a name="l00490"></a>00490   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc,rc1,rc2;
<a name="l00491"></a>00491   <a class="code" href="structFC__Subset.html">FC_Subset</a> tempSubset;
<a name="l00492"></a>00492   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh1, mesh2;
<a name="l00493"></a>00493   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc1, assoc2;
<a name="l00494"></a>00494   <span class="keywordtype">int</span> numMember1, *members1, numMember2, *members2;
<a name="l00495"></a>00495   <span class="keywordtype">int</span> maxNumMember, *newMembers, newNumMember;
<a name="l00496"></a>00496 
<a name="l00497"></a>00497   <span class="comment">// default returns</span>
<a name="l00498"></a>00498   <span class="keywordflow">if</span> (newSubset)
<a name="l00499"></a>00499     *newSubset = <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>;
<a name="l00500"></a>00500 
<a name="l00501"></a>00501   <span class="comment">// check input (1 NULL subset is o.k., but not both)</span>
<a name="l00502"></a>00502   <span class="keywordflow">if</span> (!newSubset || !operation || !newSubsetName || !newSubset ||
<a name="l00503"></a>00503       (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset1) &amp;&amp; !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset1,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)) ||
<a name="l00504"></a>00504       (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset2) &amp;&amp; !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset2,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)) ||
<a name="l00505"></a>00505       (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset1) &amp;&amp; !<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset2))   ) {
<a name="l00506"></a>00506     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00507"></a>00507     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00508"></a>00508   }
<a name="l00509"></a>00509 
<a name="l00510"></a>00510   <span class="comment">// check the ops</span>
<a name="l00511"></a>00511   <span class="keywordflow">if</span> (!strcmp(operation,<span class="stringliteral">"AND"</span>) || 
<a name="l00512"></a>00512       !strcmp(operation,<span class="stringliteral">"and"</span>) || 
<a name="l00513"></a>00513       !strcmp(operation,<span class="stringliteral">"&amp;&amp;"</span>)  || 
<a name="l00514"></a>00514       !strcmp(operation,<span class="stringliteral">"&amp;"</span>)      ) 
<a name="l00515"></a>00515     ioper = 0;
<a name="l00516"></a>00516   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(operation,<span class="stringliteral">"OR"</span>) ||
<a name="l00517"></a>00517            !strcmp(operation,<span class="stringliteral">"or"</span>) ||  
<a name="l00518"></a>00518            !strcmp(operation,<span class="stringliteral">"||"</span>) || 
<a name="l00519"></a>00519            !strcmp(operation,<span class="stringliteral">"|"</span>)      ) 
<a name="l00520"></a>00520     ioper = 1;
<a name="l00521"></a>00521   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(operation,<span class="stringliteral">"XOR"</span>) ||
<a name="l00522"></a>00522            !strcmp(operation,<span class="stringliteral">"xor"</span>) ||  
<a name="l00523"></a>00523            !strcmp(operation,<span class="stringliteral">"^"</span>)      )
<a name="l00524"></a>00524     ioper = 2;
<a name="l00525"></a>00525   <span class="keywordflow">else</span> {
<a name="l00526"></a>00526         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"unrecognized operation '%s'"</span>,operation);
<a name="l00527"></a>00527     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00528"></a>00528   }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530   <span class="comment">// ----- special case: one subset is FC_NULL_SUBSET </span>
<a name="l00531"></a>00531 
<a name="l00532"></a>00532   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset1, <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>) || 
<a name="l00533"></a>00533       <a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset2, <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)    ) {
<a name="l00534"></a>00534     <span class="comment">// identify non-null subset &amp; it's parent mesh</span>
<a name="l00535"></a>00535     <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset1, <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>))
<a name="l00536"></a>00536       tempSubset = subset1;
<a name="l00537"></a>00537     <span class="keywordflow">else</span>
<a name="l00538"></a>00538       tempSubset = subset2;
<a name="l00539"></a>00539     rc = <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(tempSubset, &amp;mesh1); 
<a name="l00540"></a>00540     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00541"></a>00541       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Can't get mesh from subset."</span>);
<a name="l00542"></a>00542       <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     <span class="comment">// if operation is "AND" return an empty subset of appropriate assoc </span>
<a name="l00546"></a>00546     <span class="keywordflow">if</span> (ioper == 0 ) {
<a name="l00547"></a>00547       rc = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(tempSubset, NULL, NULL, &amp;assoc1);
<a name="l00548"></a>00548       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) 
<a name="l00549"></a>00549         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00550"></a>00550       rc = <a class="code" href="group__Subset.html#g40d47282abccd83987c83e8051064db2">fc_createSubset</a>(mesh1, newSubsetName, assoc1, newSubset);
<a name="l00551"></a>00551       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00552"></a>00552         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00553"></a>00553     }
<a name="l00554"></a>00554     <span class="comment">// otherwise return a copy of the other subset  </span>
<a name="l00555"></a>00555     <span class="keywordflow">else</span> {
<a name="l00556"></a>00556       rc = <a class="code" href="group__Subset.html#g8d62de2aecacfe4938e68a08153fd3c1">fc_copySubset</a>(tempSubset, mesh1, newSubsetName, &amp;(*newSubset));
<a name="l00557"></a>00557       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00558"></a>00558         <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00559"></a>00559     }     
<a name="l00560"></a>00560     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;  <span class="comment">// return after special cases</span>
<a name="l00561"></a>00561   }
<a name="l00562"></a>00562   
<a name="l00563"></a>00563   <span class="comment">// check if subsets are defined on the same mesh, if not return input error</span>
<a name="l00564"></a>00564   rc1 = <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(subset1, &amp;mesh1);
<a name="l00565"></a>00565   rc2 = <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(subset2, &amp;mesh2);
<a name="l00566"></a>00566   <span class="keywordflow">if</span> (rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(mesh1,mesh2)) {
<a name="l00567"></a>00567     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"FC_INPUT_ERROR: Can't get mesh from subset, or "</span>
<a name="l00568"></a>00568                           <span class="stringliteral">"subsets defined on different meshes"</span>);
<a name="l00569"></a>00569     <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00570"></a>00570   } 
<a name="l00571"></a>00571   
<a name="l00572"></a>00572   <span class="comment">// get info about the subsets</span>
<a name="l00573"></a>00573   rc1 = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset1, NULL, NULL, &amp;assoc1);
<a name="l00574"></a>00574   rc2 = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset2, NULL, NULL, &amp;assoc2);
<a name="l00575"></a>00575   
<a name="l00576"></a>00576   <span class="comment">// check if both subsets have the same association</span>
<a name="l00577"></a>00577   <span class="keywordflow">if</span> (rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || assoc1 != assoc2 ) {
<a name="l00578"></a>00578     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"FC_INPUT_ERROR: Can't get info from subset, or "</span> 
<a name="l00579"></a>00579                           <span class="stringliteral">"subsets defined with different association type"</span>);
<a name="l00580"></a>00580     <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00581"></a>00581   }
<a name="l00582"></a>00582   
<a name="l00583"></a>00583   <span class="comment">// --- get new members</span>
<a name="l00584"></a>00584 
<a name="l00585"></a>00585   <span class="comment">// setup</span>
<a name="l00586"></a>00586   rc = <a class="code" href="group__Subset.html#g38ce08dfd51f3af35fd8004fa82509f9">fc_getSubsetMaxNumMember</a>(subset1, &amp;maxNumMember);
<a name="l00587"></a>00587   rc1 = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset1, &amp;numMember1, &amp;members1);
<a name="l00588"></a>00588   rc2 = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset2, &amp;numMember2, &amp;members2);
<a name="l00589"></a>00589   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00590"></a>00590     free(members1);
<a name="l00591"></a>00591     free(members2);
<a name="l00592"></a>00592     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00593"></a>00593   }
<a name="l00594"></a>00594   newMembers = (<span class="keywordtype">int</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*maxNumMember);
<a name="l00595"></a>00595   <span class="keywordflow">if</span> (!newMembers) {
<a name="l00596"></a>00596     free(members1);
<a name="l00597"></a>00597     free(members2);
<a name="l00598"></a>00598     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00599"></a>00599     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00600"></a>00600   }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602   <span class="comment">// Walk both arrays at same time, adding to newMembers when appropriate</span>
<a name="l00603"></a>00603   newNumMember = 0;
<a name="l00604"></a>00604   i = 0;
<a name="l00605"></a>00605   j = 0;
<a name="l00606"></a>00606   <span class="keywordflow">while</span> (i &lt; numMember1 &amp;&amp; j &lt; numMember2) {
<a name="l00607"></a>00607     <span class="keywordflow">if</span> (members1[i] &lt; members2[j]) { <span class="comment">// not the same</span>
<a name="l00608"></a>00608       <span class="keywordflow">if</span> (ioper == 1) { <span class="comment">// "OR"</span>
<a name="l00609"></a>00609         newMembers[newNumMember] = members1[i];
<a name="l00610"></a>00610         newNumMember++;
<a name="l00611"></a>00611       }
<a name="l00612"></a>00612       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ioper == 2) { <span class="comment">// "XOR"</span>
<a name="l00613"></a>00613         newMembers[newNumMember] = members1[i];
<a name="l00614"></a>00614         newNumMember++;
<a name="l00615"></a>00615       }
<a name="l00616"></a>00616       i++;
<a name="l00617"></a>00617     }
<a name="l00618"></a>00618     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (members1[i] &gt; members2[j]) { <span class="comment">// not the same</span>
<a name="l00619"></a>00619       <span class="keywordflow">if</span> (ioper == 1) { <span class="comment">// "OR"</span>
<a name="l00620"></a>00620         newMembers[newNumMember] = members2[j];
<a name="l00621"></a>00621         newNumMember++;
<a name="l00622"></a>00622       }
<a name="l00623"></a>00623       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ioper == 2) { <span class="comment">// "XOR"</span>
<a name="l00624"></a>00624         newMembers[newNumMember] = members2[j];
<a name="l00625"></a>00625         newNumMember++;
<a name="l00626"></a>00626       }
<a name="l00627"></a>00627       j++;
<a name="l00628"></a>00628     }
<a name="l00629"></a>00629     <span class="keywordflow">else</span> { <span class="comment">// the same</span>
<a name="l00630"></a>00630       <span class="keywordflow">if</span> (ioper == 0) { <span class="comment">// "AND"</span>
<a name="l00631"></a>00631         newMembers[newNumMember] = members1[i];
<a name="l00632"></a>00632         newNumMember++;
<a name="l00633"></a>00633       }
<a name="l00634"></a>00634       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ioper == 1) { <span class="comment">// "OR"</span>
<a name="l00635"></a>00635         newMembers[newNumMember] = members1[i];
<a name="l00636"></a>00636         newNumMember++;
<a name="l00637"></a>00637       }
<a name="l00638"></a>00638       i++;
<a name="l00639"></a>00639       j++;
<a name="l00640"></a>00640     }
<a name="l00641"></a>00641   }
<a name="l00642"></a>00642   <span class="keywordflow">for</span> (k = i; k &lt; numMember1; k++) {
<a name="l00643"></a>00643     <span class="keywordflow">if</span> (ioper &gt; 0) {
<a name="l00644"></a>00644       newMembers[newNumMember] = members1[k];
<a name="l00645"></a>00645       newNumMember++;
<a name="l00646"></a>00646     }
<a name="l00647"></a>00647   }
<a name="l00648"></a>00648   <span class="keywordflow">for</span> (k = j; k &lt; numMember2; k++) {
<a name="l00649"></a>00649     <span class="keywordflow">if</span> (ioper &gt; 0) {
<a name="l00650"></a>00650       newMembers[newNumMember] = members2[k];
<a name="l00651"></a>00651       newNumMember++;
<a name="l00652"></a>00652     }
<a name="l00653"></a>00653   }
<a name="l00654"></a>00654   free(members1);
<a name="l00655"></a>00655   free(members2);
<a name="l00656"></a>00656 
<a name="l00657"></a>00657   <span class="comment">// --- make the new subset</span>
<a name="l00658"></a>00658   rc = <a class="code" href="group__Subset.html#g40d47282abccd83987c83e8051064db2">fc_createSubset</a>(mesh1, newSubsetName, assoc1, newSubset);
<a name="l00659"></a>00659   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00660"></a>00660     free(newMembers);
<a name="l00661"></a>00661     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00662"></a>00662   }
<a name="l00663"></a>00663 
<a name="l00664"></a>00664   <span class="comment">// --- done if there are no members</span>
<a name="l00665"></a>00665   <span class="keywordflow">if</span> (newNumMember == 0) {
<a name="l00666"></a>00666     free(newMembers);
<a name="l00667"></a>00667     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00668"></a>00668   }
<a name="l00669"></a>00669   
<a name="l00670"></a>00670   rc = <a class="code" href="group__Subset.html#g47d34843c8d66c114c2c81e3a1fc14e4">fc_addArrayMembersToSubset</a>(*newSubset, newNumMember, newMembers);
<a name="l00671"></a>00671   free(newMembers); 
<a name="l00672"></a>00672   <span class="keywordflow">return</span> rc;
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 <span class="comment"></span>
<a name="l00675"></a>00675 <span class="comment">//@}</span>
<a name="l00676"></a>00676 <span class="comment"></span><span class="comment"></span>
<a name="l00677"></a>00677 <span class="comment">/** \name Get subset. */</span>
<a name="l00678"></a>00678 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l00679"></a>00679 <span class="comment">//@{</span>
<a name="l00680"></a>00680 <span class="comment"></span><span class="comment"></span>
<a name="l00681"></a>00681 <span class="comment">/**</span>
<a name="l00682"></a>00682 <span class="comment"> * \ingroup  Subset</span>
<a name="l00683"></a>00683 <span class="comment"> * \brief  Get the subsets in a mesh.</span>
<a name="l00684"></a>00684 <span class="comment"> *</span>
<a name="l00685"></a>00685 <span class="comment"> * \description</span>
<a name="l00686"></a>00686 <span class="comment"> *  </span>
<a name="l00687"></a>00687 <span class="comment"> *    This returns an array of the subsets in the mesh. The caller is</span>
<a name="l00688"></a>00688 <span class="comment"> *    responsible for freeing the array of mesh handles.</span>
<a name="l00689"></a>00689 <span class="comment"> *</span>
<a name="l00690"></a>00690 <span class="comment"> * \modifications  </span>
<a name="l00691"></a>00691 <span class="comment"> *   - 05/13/04 WSK Created.  </span>
<a name="l00692"></a>00692 <span class="comment"> *   - 9/9/04 WSK, changed to return subset handles instead of subset</span>
<a name="l00693"></a>00693 <span class="comment"> *               names.</span>
<a name="l00694"></a>00694 <span class="comment">  */</span>
<a name="l00695"></a><a class="code" href="group__Subset.html#g5c0185b0cab5ac7256fec095a98c3bd0">00695</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g5c0185b0cab5ac7256fec095a98c3bd0">fc_getSubsets</a>(
<a name="l00696"></a>00696  <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh,        <span class="comment">/**&lt; input - mesh */</span>
<a name="l00697"></a>00697  <span class="keywordtype">int</span> *numSubset,      <span class="comment">/**&lt; output - number of subsets */</span>
<a name="l00698"></a>00698  <a class="code" href="structFC__Subset.html">FC_Subset</a> **subsets  <span class="comment">/**&lt; output - array of subsets */</span>
<a name="l00699"></a>00699 ) {
<a name="l00700"></a>00700   <span class="keywordtype">int</span> i;
<a name="l00701"></a>00701   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l00702"></a>00702   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l00703"></a>00703   
<a name="l00704"></a>00704   <span class="comment">// set up defaults</span>
<a name="l00705"></a>00705   <span class="keywordflow">if</span> (numSubset != NULL)
<a name="l00706"></a>00706     *numSubset = -1;
<a name="l00707"></a>00707   <span class="keywordflow">if</span> (subsets != NULL)
<a name="l00708"></a>00708     *subsets = NULL;
<a name="l00709"></a>00709   
<a name="l00710"></a>00710   <span class="comment">// check input</span>
<a name="l00711"></a>00711   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l00712"></a>00712   <span class="keywordflow">if</span> (meshSlot == NULL || numSubset == NULL || subsets == NULL) {
<a name="l00713"></a>00713     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00714"></a>00714     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00715"></a>00715   }
<a name="l00716"></a>00716   
<a name="l00717"></a>00717   <span class="comment">// log message</span>
<a name="l00718"></a>00718   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting subsets from mesh '%s'"</span>, 
<a name="l00719"></a>00719                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00720"></a>00720 
<a name="l00721"></a>00721   <span class="comment">// get num subset</span>
<a name="l00722"></a>00722   *numSubset = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>;
<a name="l00723"></a>00723   
<a name="l00724"></a>00724   <span class="comment">// get subsets</span>
<a name="l00725"></a>00725   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a> &gt; 0) {
<a name="l00726"></a>00726     *subsets = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Subset.html">FC_Subset</a>) * meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>);
<a name="l00727"></a>00727     <span class="keywordflow">if</span> (*subsets == NULL) {
<a name="l00728"></a>00728       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00729"></a>00729       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00730"></a>00730     }
<a name="l00731"></a>00731     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>; i++) {
<a name="l00732"></a>00732       subSlot = <a class="code" href="group__PrivateSubset.html#g9329dd24399022501fa3519b32d9a947">_fc_getSubSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a>[i]);
<a name="l00733"></a>00733       <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>((*subsets)[i], subSlot);
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735   }
<a name="l00736"></a>00736   
<a name="l00737"></a>00737   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00738"></a>00738 }
<a name="l00739"></a>00739 
<a name="l00740"></a>00740 <span class="comment"></span>
<a name="l00741"></a>00741 <span class="comment">/**</span>
<a name="l00742"></a>00742 <span class="comment"> * \ingroup  Subset</span>
<a name="l00743"></a>00743 <span class="comment"> * \brief  Get the number of subsets in a mesh.</span>
<a name="l00744"></a>00744 <span class="comment"> *</span>
<a name="l00745"></a>00745 <span class="comment"> * \modifications  </span>
<a name="l00746"></a>00746 <span class="comment"> *    - 9/28/04 WSK created.</span>
<a name="l00747"></a>00747 <span class="comment"> */</span>
<a name="l00748"></a><a class="code" href="group__Subset.html#ge421b5a525d02512cd19d754567598f4">00748</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#ge421b5a525d02512cd19d754567598f4">fc_getNumSubset</a>(
<a name="l00749"></a>00749  <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh,        <span class="comment">/**&lt; input - mesh */</span>
<a name="l00750"></a>00750  <span class="keywordtype">int</span> *numSubset       <span class="comment">/**&lt; output - number of subsets */</span>
<a name="l00751"></a>00751 ) {
<a name="l00752"></a>00752   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l00753"></a>00753   
<a name="l00754"></a>00754   <span class="comment">// set up defaults</span>
<a name="l00755"></a>00755   <span class="keywordflow">if</span> (numSubset != NULL)
<a name="l00756"></a>00756     *numSubset = -1;
<a name="l00757"></a>00757   
<a name="l00758"></a>00758   <span class="comment">// check input</span>
<a name="l00759"></a>00759   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l00760"></a>00760   <span class="keywordflow">if</span> (meshSlot == NULL || numSubset == NULL) {
<a name="l00761"></a>00761     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00762"></a>00762     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00763"></a>00763   }
<a name="l00764"></a>00764   
<a name="l00765"></a>00765   <span class="comment">// log message</span>
<a name="l00766"></a>00766   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of subsets from mesh '%s'"</span>, 
<a name="l00767"></a>00767                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00768"></a>00768 
<a name="l00769"></a>00769   <span class="comment">// get num subset</span>
<a name="l00770"></a>00770   *numSubset = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>;
<a name="l00771"></a>00771 
<a name="l00772"></a>00772   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00773"></a>00773 }
<a name="l00774"></a>00774 <span class="comment"></span>
<a name="l00775"></a>00775 <span class="comment">/**</span>
<a name="l00776"></a>00776 <span class="comment"> * \ingroup  Subset</span>
<a name="l00777"></a>00777 <span class="comment"> * \brief  Get subsets of a given name from a mesh.</span>
<a name="l00778"></a>00778 <span class="comment"> *</span>
<a name="l00779"></a>00779 <span class="comment"> * \description</span>
<a name="l00780"></a>00780 <span class="comment"> *  </span>
<a name="l00781"></a>00781 <span class="comment"> *    Returns subset on the mesh with the specified name.</span>
<a name="l00782"></a>00782 <span class="comment"> *</span>
<a name="l00783"></a>00783 <span class="comment"> * \modifications  </span>
<a name="l00784"></a>00784 <span class="comment"> *   - 05/27/04 WSK Created.</span>
<a name="l00785"></a>00785 <span class="comment"> *   - 9/9/03 WSK, changed name and moved to mesh (to be next to</span>
<a name="l00786"></a>00786 <span class="comment"> *       fc_getSubsets) </span>
<a name="l00787"></a>00787 <span class="comment"> *   - 9/26/06 ACG returns array</span>
<a name="l00788"></a>00788 <span class="comment"> */</span>
<a name="l00789"></a><a class="code" href="group__Subset.html#g01a47f999da4ef36f72702e52837ecb0">00789</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g01a47f999da4ef36f72702e52837ecb0">fc_getSubsetByName</a>(
<a name="l00790"></a>00790   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh,           <span class="comment">/**&lt; input - mesh handle */</span>
<a name="l00791"></a>00791   <span class="keywordtype">char</span> *subName,          <span class="comment">/**&lt; input - subset name */</span>
<a name="l00792"></a>00792   <span class="keywordtype">int</span> *numSubsets,        <span class="comment">/**&lt; output - num matching */</span>
<a name="l00793"></a>00793   <a class="code" href="structFC__Subset.html">FC_Subset</a> **subsets   <span class="comment">/**&lt; output - subset handles */</span>
<a name="l00794"></a>00794 ) {
<a name="l00795"></a>00795   <span class="keywordtype">int</span> i;
<a name="l00796"></a>00796   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l00797"></a>00797   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a> *subSlot;
<a name="l00798"></a>00798   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset;
<a name="l00799"></a>00799 
<a name="l00800"></a>00800   <a class="code" href="structFC__Subset.html">FC_Subset</a> *lmatch = NULL;
<a name="l00801"></a>00801   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l00802"></a>00802 
<a name="l00803"></a>00803   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l00804"></a>00804   <span class="keywordflow">if</span> (numSubsets)
<a name="l00805"></a>00805     *numSubsets = -1;
<a name="l00806"></a>00806   <span class="keywordflow">if</span> (subsets)
<a name="l00807"></a>00807     *subsets = NULL;
<a name="l00808"></a>00808 
<a name="l00809"></a>00809   <span class="comment">// check input</span>
<a name="l00810"></a>00810   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l00811"></a>00811   <span class="keywordflow">if</span> (meshSlot == NULL || subName == NULL || !numSubsets || !subsets){
<a name="l00812"></a>00812     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00813"></a>00813     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00814"></a>00814   }
<a name="l00815"></a>00815   
<a name="l00816"></a>00816   <span class="comment">// log message</span>
<a name="l00817"></a>00817   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting subset '%s'"</span>, subName);
<a name="l00818"></a>00818 
<a name="l00819"></a>00819   numlmatch = 0;
<a name="l00820"></a>00820   maxnumlmatch = 0;
<a name="l00821"></a>00821 
<a name="l00822"></a>00822   
<a name="l00823"></a>00823   <span class="comment">// find the existing slot</span>
<a name="l00824"></a>00824   <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>; i++) {
<a name="l00825"></a>00825     subSlot = <a class="code" href="group__PrivateSubset.html#g9329dd24399022501fa3519b32d9a947">_fc_getSubSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a>[i]); 
<a name="l00826"></a>00826     if (!strcmp(subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, subName)) {
<a name="l00827"></a>00827       <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>(subset, subSlot);
<a name="l00828"></a>00828 
<a name="l00829"></a>00829       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l00830"></a>00830      lmatch = (<a class="code" href="structFC__Subset.html">FC_Subset</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Subset.html">FC_Subset</a>));
<a name="l00831"></a>00831      <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l00832"></a>00832        <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00833"></a>00833        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00834"></a>00834      }
<a name="l00835"></a>00835      numlmatch = 1;
<a name="l00836"></a>00836      maxnumlmatch = 1;
<a name="l00837"></a>00837      lmatch[0] = subset;
<a name="l00838"></a>00838       }<span class="keywordflow">else</span>{
<a name="l00839"></a>00839      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l00840"></a>00840        <a class="code" href="structFC__Subset.html">FC_Subset</a> *temp;
<a name="l00841"></a>00841        temp = (<a class="code" href="structFC__Subset.html">FC_Subset</a>*)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Subset.html">FC_Subset</a>));
<a name="l00842"></a>00842        <span class="keywordflow">if</span> (temp == NULL){
<a name="l00843"></a>00843          <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00844"></a>00844          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00845"></a>00845        }
<a name="l00846"></a>00846        maxnumlmatch*=2;
<a name="l00847"></a>00847        lmatch = temp;
<a name="l00848"></a>00848      }
<a name="l00849"></a>00849      lmatch[numlmatch] = subset;
<a name="l00850"></a>00850      numlmatch++;
<a name="l00851"></a>00851       }
<a name="l00852"></a>00852     }
<a name="l00853"></a>00853   }
<a name="l00854"></a>00854 
<a name="l00855"></a>00855   *numSubsets = numlmatch;
<a name="l00856"></a>00856   *subsets = lmatch;
<a name="l00857"></a>00857 
<a name="l00858"></a>00858   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00859"></a>00859 
<a name="l00860"></a>00860 }
<a name="l00861"></a>00861 <span class="comment"></span>
<a name="l00862"></a>00862 <span class="comment">//@}</span>
<a name="l00863"></a>00863 <span class="comment"></span><span class="comment"></span>
<a name="l00864"></a>00864 <span class="comment">/** \name Subset comparisons. */</span>
<a name="l00865"></a>00865 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l00866"></a>00866 <span class="comment">//@{</span>
<a name="l00867"></a>00867 <span class="comment"></span><span class="comment"></span>
<a name="l00868"></a>00868 <span class="comment">/**</span>
<a name="l00869"></a>00869 <span class="comment"> * \ingroup Subset</span>
<a name="l00870"></a>00870 <span class="comment"> * \brief Test if two subsets intersect.</span>
<a name="l00871"></a>00871 <span class="comment"> *</span>
<a name="l00872"></a>00872 <span class="comment"> * \description</span>
<a name="l00873"></a>00873 <span class="comment"> *  </span>
<a name="l00874"></a>00874 <span class="comment"> *      The indicator flag is set to true (1) if two subsets intersect and</span>
<a name="l00875"></a>00875 <span class="comment"> *      false (0) if they do not, and -1 in case of error.</span>
<a name="l00876"></a>00876 <span class="comment"> *</span>
<a name="l00877"></a>00877 <span class="comment"> *      Either input subset can be FC_NULL_SUBSET, but the routine will return</span>
<a name="l00878"></a>00878 <span class="comment"> *      early with an error if both are. Either subset can be empty, but the</span>
<a name="l00879"></a>00879 <span class="comment"> *      routine will return early with an error if both are.</span>
<a name="l00880"></a>00880 <span class="comment"> *</span>
<a name="l00881"></a>00881 <span class="comment"> *      Subsets must have the same associatation type and be defined on the</span>
<a name="l00882"></a>00882 <span class="comment"> *      same mesh.  These are the same constraints as in \ref</span>
<a name="l00883"></a>00883 <span class="comment"> *      fc_createSubsetIntersection().</span>
<a name="l00884"></a>00884 <span class="comment"> *</span>
<a name="l00885"></a>00885 <span class="comment"> * \modifications</span>
<a name="l00886"></a>00886 <span class="comment"> *    - 10/27/05 ACG created</span>
<a name="l00887"></a>00887 <span class="comment"> *    - 01/16/06 ACG making more efficient by copying guts of</span>
<a name="l00888"></a>00888 <span class="comment"> *            getSubsetIntersection but stopping when a match is found.</span>
<a name="l00889"></a>00889 <span class="comment"> */</span>
<a name="l00890"></a><a class="code" href="group__Subset.html#ge8dd6b44e551c0b7d28816784358919a">00890</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#ge8dd6b44e551c0b7d28816784358919a">fc_doSubsetsIntersect</a>(
<a name="l00891"></a>00891   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset1,   <span class="comment">/**&lt; input - subset */</span>
<a name="l00892"></a>00892   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset2,   <span class="comment">/**&lt; input - subset */</span>
<a name="l00893"></a>00893   <span class="keywordtype">int</span>* indicator        <span class="comment">/** output - indicator flag, 1 = they intersect */</span>
<a name="l00894"></a>00894  ){
<a name="l00895"></a>00895   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc1,rc2;
<a name="l00896"></a>00896   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh1, mesh2;
<a name="l00897"></a>00897   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc1, assoc2;
<a name="l00898"></a>00898   <span class="keywordtype">int</span> numMember1, *members1, numMember2, *members2;
<a name="l00899"></a>00899   <span class="keywordtype">int</span> i,j;
<a name="l00900"></a>00900 
<a name="l00901"></a>00901   <span class="keywordflow">if</span> (indicator)
<a name="l00902"></a>00902     *indicator = -1;
<a name="l00903"></a>00903 
<a name="l00904"></a>00904   <span class="comment">// check input (1 NULL subset is o.k., but not both)</span>
<a name="l00905"></a>00905   <span class="keywordflow">if</span> (!indicator || 
<a name="l00906"></a>00906       (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset1) &amp;&amp; !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset1,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)) ||
<a name="l00907"></a>00907       (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset2) &amp;&amp; !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset2,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)) ||
<a name="l00908"></a>00908       (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset1) &amp;&amp; !<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset2))   ) {
<a name="l00909"></a>00909     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00910"></a>00910     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00911"></a>00911   }
<a name="l00912"></a>00912 
<a name="l00913"></a>00913   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"doSubsetsIntersect ?"</span>);
<a name="l00914"></a>00914   
<a name="l00915"></a>00915   <span class="comment">//if one is NULL then return 0</span>
<a name="l00916"></a>00916   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset1,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>) ||
<a name="l00917"></a>00917       <a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset2,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)){
<a name="l00918"></a>00918     *indicator = 0;
<a name="l00919"></a>00919     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00920"></a>00920   }
<a name="l00921"></a>00921 
<a name="l00922"></a>00922   <span class="comment">// check if subsets are defined on the same mesh, if not return input error</span>
<a name="l00923"></a>00923   rc1 = <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(subset1, &amp;mesh1);
<a name="l00924"></a>00924   rc2 = <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(subset2, &amp;mesh2);
<a name="l00925"></a>00925   <span class="keywordflow">if</span> (rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(mesh1,mesh2)) {
<a name="l00926"></a>00926     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"FC_INPUT_ERROR: Can't get mesh from subset, or "</span>
<a name="l00927"></a>00927                           <span class="stringliteral">"subsets defined on different meshes"</span>);
<a name="l00928"></a>00928     <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00929"></a>00929   } 
<a name="l00930"></a>00930   
<a name="l00931"></a>00931   <span class="comment">// get info about the subsets</span>
<a name="l00932"></a>00932   rc1 = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset1, NULL, NULL, &amp;assoc1);
<a name="l00933"></a>00933   rc2 = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset2, NULL, NULL, &amp;assoc2);
<a name="l00934"></a>00934   
<a name="l00935"></a>00935   <span class="comment">// check if both subsets have the same association</span>
<a name="l00936"></a>00936   <span class="keywordflow">if</span> (rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || assoc1 != assoc2 ) {
<a name="l00937"></a>00937     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"FC_INPUT_ERROR: Can't get info from subset, or "</span> 
<a name="l00938"></a>00938                           <span class="stringliteral">"subsets defined with different association type"</span>);
<a name="l00939"></a>00939     <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00940"></a>00940   }
<a name="l00941"></a>00941 
<a name="l00942"></a>00942   <span class="comment">// setup</span>
<a name="l00943"></a>00943   rc1 = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset1, &amp;numMember1, &amp;members1);
<a name="l00944"></a>00944   rc2 = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset2, &amp;numMember2, &amp;members2);
<a name="l00945"></a>00945   <span class="keywordflow">if</span> (rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00946"></a>00946     free(members1);
<a name="l00947"></a>00947     free(members2);
<a name="l00948"></a>00948     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00949"></a>00949   }
<a name="l00950"></a>00950 
<a name="l00951"></a>00951   <span class="comment">//empty subsets</span>
<a name="l00952"></a>00952   <span class="keywordflow">if</span> (numMember1 == 0 &amp;&amp; numMember2 == 0){
<a name="l00953"></a>00953     free(members1);
<a name="l00954"></a>00954     free(members2);
<a name="l00955"></a>00955     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"FC_INPUT_ERROR: Can't do two empty subsets"</span>);
<a name="l00956"></a>00956     <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00957"></a>00957   }
<a name="l00958"></a>00958 
<a name="l00959"></a>00959   <span class="keywordflow">if</span> (numMember1 == 0 || numMember2 == 0){
<a name="l00960"></a>00960     free(members1);
<a name="l00961"></a>00961     free(members2);
<a name="l00962"></a>00962     *indicator = 0;
<a name="l00963"></a>00963     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00964"></a>00964   }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966 
<a name="l00967"></a>00967   <span class="comment">// Walk both arrays at same time</span>
<a name="l00968"></a>00968   i = 0;
<a name="l00969"></a>00969   j = 0;
<a name="l00970"></a>00970   <span class="keywordflow">while</span> (i &lt; numMember1 &amp;&amp; j &lt; numMember2) {
<a name="l00971"></a>00971     <span class="keywordflow">if</span> (members1[i] &lt; members2[j]) { <span class="comment">// not the same</span>
<a name="l00972"></a>00972       i++;
<a name="l00973"></a>00973     }
<a name="l00974"></a>00974     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (members1[i] &gt; members2[j]) { <span class="comment">// not the same</span>
<a name="l00975"></a>00975       j++;
<a name="l00976"></a>00976     }
<a name="l00977"></a>00977     <span class="keywordflow">else</span> { <span class="comment">// the same</span>
<a name="l00978"></a>00978       <span class="comment">//then they intersect</span>
<a name="l00979"></a>00979       free(members1);
<a name="l00980"></a>00980       free(members2);
<a name="l00981"></a>00981       *indicator = 1;
<a name="l00982"></a>00982       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00983"></a>00983     }
<a name="l00984"></a>00984   }
<a name="l00985"></a>00985 
<a name="l00986"></a>00986   <span class="comment">//havent found anything in common</span>
<a name="l00987"></a>00987   *indicator = 0;
<a name="l00988"></a>00988   free(members1);
<a name="l00989"></a>00989   free(members2);
<a name="l00990"></a>00990 
<a name="l00991"></a>00991   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00992"></a>00992 }
<a name="l00993"></a>00993 <span class="comment"></span>
<a name="l00994"></a>00994 <span class="comment">/**</span>
<a name="l00995"></a>00995 <span class="comment"> * \ingroup Subset</span>
<a name="l00996"></a>00996 <span class="comment"> * \brief Test if first subset is a superset of the second subset.</span>
<a name="l00997"></a>00997 <span class="comment"> *</span>
<a name="l00998"></a>00998 <span class="comment"> * \description</span>
<a name="l00999"></a>00999 <span class="comment"> *  </span>
<a name="l01000"></a>01000 <span class="comment"> *      The indicator flag is set to true (1) if the first subset is a superset</span>
<a name="l01001"></a>01001 <span class="comment"> *      of the second and false (0) if, not and -1 in case of error.</span>
<a name="l01002"></a>01002 <span class="comment"> *</span>
<a name="l01003"></a>01003 <span class="comment"> *      Either input subset can be FC_NULL_SUBSET, but the routine will return</span>
<a name="l01004"></a>01004 <span class="comment"> *      early with an error if both are. Either subset can be empty, but the</span>
<a name="l01005"></a>01005 <span class="comment"> *      routine will return early with an error if both are.</span>
<a name="l01006"></a>01006 <span class="comment"> *</span>
<a name="l01007"></a>01007 <span class="comment"> *      Subsets must have the same associatation type and be defined on the</span>
<a name="l01008"></a>01008 <span class="comment"> *      same mesh.  These are the same constraints as in \ref</span>
<a name="l01009"></a>01009 <span class="comment"> *      fc_createSubsetIntersection().</span>
<a name="l01010"></a>01010 <span class="comment"> *</span>
<a name="l01011"></a>01011 <span class="comment"> * \modifications</span>
<a name="l01012"></a>01012 <span class="comment"> *    - 02/13/06 ACG created</span>
<a name="l01013"></a>01013 <span class="comment"> *    - 09/28/06 ACG bug fix in walking the array and end condition</span>
<a name="l01014"></a>01014 <span class="comment"> */</span>
<a name="l01015"></a><a class="code" href="group__Subset.html#ga0565d59d7d77df8eeb4ff618cc58430">01015</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#ga0565d59d7d77df8eeb4ff618cc58430">fc_isSubsetSuperset</a>(
<a name="l01016"></a>01016   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset_super,   <span class="comment">/**&lt; input - subset */</span>
<a name="l01017"></a>01017   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset_sub,   <span class="comment">/**&lt; input - subset */</span>
<a name="l01018"></a>01018   <span class="keywordtype">int</span>* indicator        <span class="comment">/** output - indicator flag, 1 = is a superset */</span>
<a name="l01019"></a>01019  ){
<a name="l01020"></a>01020   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc1,rc2;
<a name="l01021"></a>01021   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh1, mesh2;
<a name="l01022"></a>01022   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc1, assoc2;
<a name="l01023"></a>01023   <span class="keywordtype">int</span> numMember1, *members1, numMember2, *members2;
<a name="l01024"></a>01024   <span class="keywordtype">int</span> i,j;
<a name="l01025"></a>01025 
<a name="l01026"></a>01026   <span class="keywordflow">if</span> (indicator)
<a name="l01027"></a>01027     *indicator = -1;
<a name="l01028"></a>01028 
<a name="l01029"></a>01029   <span class="comment">// check input (1 NULL subset is o.k., but not both)</span>
<a name="l01030"></a>01030   <span class="keywordflow">if</span> (!indicator || 
<a name="l01031"></a>01031       (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset_super) &amp;&amp; !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset_super,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)) ||
<a name="l01032"></a>01032       (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset_sub) &amp;&amp; !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset_sub,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)) ||
<a name="l01033"></a>01033       (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset_super) &amp;&amp; !<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset_sub))   ) {
<a name="l01034"></a>01034     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01035"></a>01035     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01036"></a>01036   }
<a name="l01037"></a>01037 
<a name="l01038"></a>01038   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"is Subset Superset ?"</span>);
<a name="l01039"></a>01039   
<a name="l01040"></a>01040   <span class="comment">//if one is NULL then return 0</span>
<a name="l01041"></a>01041   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset_super,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>) ||
<a name="l01042"></a>01042       <a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset_sub,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)){
<a name="l01043"></a>01043     *indicator = 0;
<a name="l01044"></a>01044     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01045"></a>01045   }
<a name="l01046"></a>01046 
<a name="l01047"></a>01047   <span class="comment">// check if subsets are defined on the same mesh, if not return input error</span>
<a name="l01048"></a>01048   rc1 = <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(subset_super, &amp;mesh1);
<a name="l01049"></a>01049   rc2 = <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(subset_sub, &amp;mesh2);
<a name="l01050"></a>01050   <span class="keywordflow">if</span> (rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(mesh1,mesh2)) {
<a name="l01051"></a>01051     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"FC_INPUT_ERROR: Can't get mesh from subset, or "</span>
<a name="l01052"></a>01052                           <span class="stringliteral">"subsets defined on different meshes"</span>);
<a name="l01053"></a>01053     <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01054"></a>01054   } 
<a name="l01055"></a>01055   
<a name="l01056"></a>01056   <span class="comment">// get info about the subsets</span>
<a name="l01057"></a>01057   rc1 = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset_super, NULL, NULL, &amp;assoc1);
<a name="l01058"></a>01058   rc2 = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset_sub, NULL, NULL, &amp;assoc2);
<a name="l01059"></a>01059   
<a name="l01060"></a>01060   <span class="comment">// check if both subsets have the same association</span>
<a name="l01061"></a>01061   <span class="keywordflow">if</span> (rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || assoc1 != assoc2 ) {
<a name="l01062"></a>01062     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"FC_INPUT_ERROR: Can't get info from subset, or "</span> 
<a name="l01063"></a>01063                           <span class="stringliteral">"subsets defined with different association type"</span>);
<a name="l01064"></a>01064     <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01065"></a>01065   }
<a name="l01066"></a>01066 
<a name="l01067"></a>01067   <span class="comment">// setup</span>
<a name="l01068"></a>01068   rc1 = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset_super, &amp;numMember1, &amp;members1);
<a name="l01069"></a>01069   rc2 = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset_sub, &amp;numMember2, &amp;members2);
<a name="l01070"></a>01070   <span class="keywordflow">if</span> (rc1 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || rc2 != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01071"></a>01071     free(members1);
<a name="l01072"></a>01072     free(members2);
<a name="l01073"></a>01073     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01074"></a>01074   }
<a name="l01075"></a>01075 
<a name="l01076"></a>01076   <span class="comment">//empty</span>
<a name="l01077"></a>01077   <span class="keywordflow">if</span> (numMember1 == 0 &amp;&amp; numMember2 == 0){
<a name="l01078"></a>01078     free(members1);
<a name="l01079"></a>01079     free(members2);
<a name="l01080"></a>01080     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"FC_INPUT_ERROR: Can't do two empty subsets"</span>);
<a name="l01081"></a>01081     <span class="keywordflow">return</span>  <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01082"></a>01082   }
<a name="l01083"></a>01083 
<a name="l01084"></a>01084   <span class="keywordflow">if</span> (numMember1 == 0 || numMember2 == 0){
<a name="l01085"></a>01085     free(members1);
<a name="l01086"></a>01086     free(members2);
<a name="l01087"></a>01087     *indicator = 0;
<a name="l01088"></a>01088     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01089"></a>01089   }
<a name="l01090"></a>01090 
<a name="l01091"></a>01091   <span class="keywordflow">if</span> (numMember1 &lt; numMember2){
<a name="l01092"></a>01092     free(members1);
<a name="l01093"></a>01093     free(members2);
<a name="l01094"></a>01094     *indicator = 0;
<a name="l01095"></a>01095     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01096"></a>01096   }
<a name="l01097"></a>01097 
<a name="l01098"></a>01098 
<a name="l01099"></a>01099   <span class="comment">// Walk both arrays at same time</span>
<a name="l01100"></a>01100   i = 0;
<a name="l01101"></a>01101   j = 0;
<a name="l01102"></a>01102   <span class="keywordflow">while</span> (i &lt; numMember1 &amp;&amp; j &lt; numMember2){
<a name="l01103"></a>01103     <span class="keywordflow">if</span> (members1[i] &gt; members2[j]){
<a name="l01104"></a>01104       free(members1);
<a name="l01105"></a>01105       free(members2);
<a name="l01106"></a>01106       *indicator = 0;
<a name="l01107"></a>01107       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01108"></a>01108     }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (members1[i] == members2[j]){
<a name="l01109"></a>01109       i++;
<a name="l01110"></a>01110       j++;
<a name="l01111"></a>01111     }<span class="keywordflow">else</span>{
<a name="l01112"></a>01112       i++;
<a name="l01113"></a>01113     }
<a name="l01114"></a>01114   }
<a name="l01115"></a>01115 
<a name="l01116"></a>01116   free(members1);
<a name="l01117"></a>01117   free(members2);
<a name="l01118"></a>01118   <span class="comment">//did we get the last one ?</span>
<a name="l01119"></a>01119   *indicator = (j == numMember2);
<a name="l01120"></a>01120   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01121"></a>01121 }
<a name="l01122"></a>01122 <span class="comment"></span>
<a name="l01123"></a>01123 <span class="comment">//@}</span>
<a name="l01124"></a>01124 <span class="comment"></span><span class="comment"></span>
<a name="l01125"></a>01125 <span class="comment">/** \name Change the name of a subset. */</span>
<a name="l01126"></a>01126 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l01127"></a>01127 <span class="comment">//@{</span>
<a name="l01128"></a>01128 <span class="comment"></span><span class="comment"></span>
<a name="l01129"></a>01129 <span class="comment">/**</span>
<a name="l01130"></a>01130 <span class="comment"> * \ingroup Subset</span>
<a name="l01131"></a>01131 <span class="comment"> * \brief  Change the name of a subset.</span>
<a name="l01132"></a>01132 <span class="comment"> *</span>
<a name="l01133"></a>01133 <span class="comment"> * \modifications</span>
<a name="l01134"></a>01134 <span class="comment"> *   - 8/24/2005 WSD. Created.</span>
<a name="l01135"></a>01135 <span class="comment"> */</span>
<a name="l01136"></a><a class="code" href="group__Subset.html#g5fc5615ab23de3d36bb444e3de13084f">01136</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g5fc5615ab23de3d36bb444e3de13084f">fc_changeSubsetName</a>(
<a name="l01137"></a>01137   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset, <span class="comment">/**&lt; Input - the subset. */</span>
<a name="l01138"></a>01138   <span class="keywordtype">char</span>* newName       <span class="comment">/**&lt; Input - new name for the subset. */</span>
<a name="l01139"></a>01139 ) {
<a name="l01140"></a>01140   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01141"></a>01141 
<a name="l01142"></a>01142   <span class="comment">// check input</span>
<a name="l01143"></a>01143   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01144"></a>01144   <span class="keywordflow">if</span> (subSlot == NULL || newName == NULL) {
<a name="l01145"></a>01145     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01146"></a>01146     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01147"></a>01147   }
<a name="l01148"></a>01148 
<a name="l01149"></a>01149   <span class="comment">// log message</span>
<a name="l01150"></a>01150   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Changing name of subset from '%s' to '%s'"</span>, 
<a name="l01151"></a>01151                       subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, newName);
<a name="l01152"></a>01152   
<a name="l01153"></a>01153   <span class="comment">// Do it</span>
<a name="l01154"></a>01154   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>, newName);
<a name="l01155"></a>01155 }
<a name="l01156"></a>01156 <span class="comment"></span>
<a name="l01157"></a>01157 <span class="comment">//@}</span>
<a name="l01158"></a>01158 <span class="comment"></span><span class="comment"></span>
<a name="l01159"></a>01159 <span class="comment">/** \name Add members to subset */</span>
<a name="l01160"></a>01160 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l01161"></a>01161 <span class="comment">//@{</span>
<a name="l01162"></a>01162 <span class="comment"></span><span class="comment"></span>
<a name="l01163"></a>01163 <span class="comment">/**</span>
<a name="l01164"></a>01164 <span class="comment"> * \ingroup Subset</span>
<a name="l01165"></a>01165 <span class="comment"> * \brief  Add member to a subset. </span>
<a name="l01166"></a>01166 <span class="comment"> *</span>
<a name="l01167"></a>01167 <span class="comment"> * \description  </span>
<a name="l01168"></a>01168 <span class="comment"> *</span>
<a name="l01169"></a>01169 <span class="comment"> *    Add member to a given subset.  Returns with an error if the member is</span>
<a name="l01170"></a>01170 <span class="comment"> *    outside of the valid range.</span>
<a name="l01171"></a>01171 <span class="comment"> *</span>
<a name="l01172"></a>01172 <span class="comment"> *    Members cannot be added to a committed subset (i.e. exists on disk).</span>
<a name="l01173"></a>01173 <span class="comment"> *</span>
<a name="l01174"></a>01174 <span class="comment"> * \modifications  </span>
<a name="l01175"></a>01175 <span class="comment"> *    - 04/30/04 RM, created. </span>
<a name="l01176"></a>01176 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01177"></a>01177 <span class="comment"> */</span>
<a name="l01178"></a><a class="code" href="group__Subset.html#gf105b25f063533c8bdc24a6e0f1d1002">01178</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#gf105b25f063533c8bdc24a6e0f1d1002">fc_addMemberToSubset</a>(
<a name="l01179"></a>01179   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,    <span class="comment">/**&lt; input - subset to add member to  */</span>
<a name="l01180"></a>01180   <span class="keywordtype">int</span> memberID         <span class="comment">/**&lt; input - ID of member to add    */</span>
<a name="l01181"></a>01181 ) {
<a name="l01182"></a>01182   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01183"></a>01183   <span class="keywordtype">int</span> ret;
<a name="l01184"></a>01184 
<a name="l01185"></a>01185   <span class="comment">// check input, subset-&gt;storageType should never be FC_ST_UNKNOWN,</span>
<a name="l01186"></a>01186   <span class="comment">// memberID has to be positive &gt;= 0  </span>
<a name="l01187"></a>01187   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01188"></a>01188   <span class="keywordflow">if</span>(!subSlot || memberID &lt; 0 || memberID &gt; subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>-1 ) { 
<a name="l01189"></a>01189     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01190"></a>01190     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01191"></a>01191   }
<a name="l01192"></a>01192 
<a name="l01193"></a>01193   <span class="comment">// can't modify a committed subset</span>
<a name="l01194"></a>01194   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a>) {
<a name="l01195"></a>01195     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Can't modify committed subset '%s'"</span>,
<a name="l01196"></a>01196                           subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01197"></a>01197     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01198"></a>01198   }
<a name="l01199"></a>01199 
<a name="l01200"></a>01200   <span class="comment">// no logging on purpose since this may get called over and over</span>
<a name="l01201"></a>01201 
<a name="l01202"></a>01202   <span class="comment">// add memberID to the subset</span>
<a name="l01203"></a>01203   ret = <a class="code" href="group__SimpleDataObjects.html#g64768f52c122c1cd322cbebac85979f2">fc_addIntToSortedIntArray</a>(&amp;subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>, memberID);
<a name="l01204"></a>01204   <span class="keywordflow">if</span> (ret &lt; 0) {
<a name="l01205"></a>01205     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to add int to sorted int array"</span>);
<a name="l01206"></a>01206     <span class="keywordflow">return</span> ret; <span class="comment">// an error occured</span>
<a name="l01207"></a>01207   }
<a name="l01208"></a>01208   subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a> += ret;
<a name="l01209"></a>01209  
<a name="l01210"></a>01210   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01211"></a>01211 }
<a name="l01212"></a>01212 <span class="comment"></span>
<a name="l01213"></a>01213 <span class="comment">/**</span>
<a name="l01214"></a>01214 <span class="comment"> * \ingroup Subset</span>
<a name="l01215"></a>01215 <span class="comment"> * \brief  Add members from an array to a subset. </span>
<a name="l01216"></a>01216 <span class="comment"> *</span>
<a name="l01217"></a>01217 <span class="comment"> * \description  </span>
<a name="l01218"></a>01218 <span class="comment"> *</span>
<a name="l01219"></a>01219 <span class="comment"> *    Add members given in an array to a subset. </span>
<a name="l01220"></a>01220 <span class="comment"> *    The operation is done on native subset representation type. </span>
<a name="l01221"></a>01221 <span class="comment"> *    \ref FC_INPUT_ERROR is returned if any of the input members are </span>
<a name="l01222"></a>01222 <span class="comment"> *    outside the valid range.</span>
<a name="l01223"></a>01223 <span class="comment"> *</span>
<a name="l01224"></a>01224 <span class="comment"> *    An empty array is o.k and will not return an error.</span>
<a name="l01225"></a>01225 <span class="comment"> *</span>
<a name="l01226"></a>01226 <span class="comment"> *    Members cannot be added to a committed subset (i.e. written to disk).</span>
<a name="l01227"></a>01227 <span class="comment"> *</span>
<a name="l01228"></a>01228 <span class="comment"> * \modifications  </span>
<a name="l01229"></a>01229 <span class="comment"> *    - 04/30/04 RM, created. </span>
<a name="l01230"></a>01230 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01231"></a>01231 <span class="comment"> *    - 06/02/06 WSD, added array specific imlementation instead of calling</span>
<a name="l01232"></a>01232 <span class="comment"> *                    fc_addMembersToSubset() which was not efficient enough.</span>
<a name="l01233"></a>01233 <span class="comment"> */</span>
<a name="l01234"></a><a class="code" href="group__Subset.html#g47d34843c8d66c114c2c81e3a1fc14e4">01234</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g47d34843c8d66c114c2c81e3a1fc14e4">fc_addArrayMembersToSubset</a>(
<a name="l01235"></a>01235   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,<span class="comment">/**&lt; input/output - subset handle                       */</span>
<a name="l01236"></a>01236   <span class="keywordtype">int</span> numMember,   <span class="comment">/**&lt; input - number of members in an input array       */</span>
<a name="l01237"></a>01237   <span class="keywordtype">int</span> *array       <span class="comment">/**&lt; input - pointer to array of member IDs */</span>
<a name="l01238"></a>01238 ) {
<a name="l01239"></a>01239   <span class="keywordtype">int</span> i;
<a name="l01240"></a>01240   <span class="keywordtype">int</span> ret;
<a name="l01241"></a>01241   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01242"></a>01242 
<a name="l01243"></a>01243   <span class="comment">// check input</span>
<a name="l01244"></a>01244   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01245"></a>01245   <span class="keywordflow">if</span>( !subSlot || numMember &lt; 0 || ( numMember &gt; 0 &amp;&amp; !array)) { 
<a name="l01246"></a>01246     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01247"></a>01247     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01248"></a>01248   }     
<a name="l01249"></a>01249   <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++) {
<a name="l01250"></a>01250     <span class="keywordflow">if</span> (array[i] &lt; 0 || array[i] &gt;= subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>) {
<a name="l01251"></a>01251       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01252"></a>01252       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01253"></a>01253     }
<a name="l01254"></a>01254   }
<a name="l01255"></a>01255 
<a name="l01256"></a>01256    <span class="comment">// can't modify a committed subset</span>
<a name="l01257"></a>01257   <span class="keywordflow">if</span> (subSlot-&gt;header.committed) {
<a name="l01258"></a>01258     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Can't modify committed subset '%s'"</span>,
<a name="l01259"></a>01259                           subSlot-&gt;header.name);
<a name="l01260"></a>01260     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01261"></a>01261   }
<a name="l01262"></a>01262 
<a name="l01263"></a>01263  <span class="comment">// no logging on purpose since this may get called over and over</span>
<a name="l01264"></a>01264 
<a name="l01265"></a>01265   <span class="comment">// trivial case, no members in an array</span>
<a name="l01266"></a>01266   <span class="keywordflow">if</span> (numMember == 0) 
<a name="l01267"></a>01267     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01268"></a>01268 
<a name="l01269"></a>01269   <span class="comment">// do it</span>
<a name="l01270"></a>01270   ret = <a class="code" href="group__SimpleDataObjects.html#gafdae6c0ab7a494dc1b21b3f0ba79543">fc_addIntArrayToSortedIntArray</a>(&amp;subSlot-&gt;sia, numMember, array, 0);
<a name="l01271"></a>01271   <span class="keywordflow">if</span> (ret &lt; 0) {
<a name="l01272"></a>01272     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to add int array to sorted int array"</span>);
<a name="l01273"></a>01273     <span class="keywordflow">return</span> ret;
<a name="l01274"></a>01274   }
<a name="l01275"></a>01275   subSlot-&gt;numMember += ret;
<a name="l01276"></a>01276 
<a name="l01277"></a>01277   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01278"></a>01278 }
<a name="l01279"></a>01279 <span class="comment"></span>
<a name="l01280"></a>01280 <span class="comment">/**</span>
<a name="l01281"></a>01281 <span class="comment"> * \ingroup Subset</span>
<a name="l01282"></a>01282 <span class="comment"> * \brief  Add members from a mask to a subset. </span>
<a name="l01283"></a>01283 <span class="comment"> *</span>
<a name="l01284"></a>01284 <span class="comment"> * \description</span>
<a name="l01285"></a>01285 <span class="comment"> *  </span>
<a name="l01286"></a>01286 <span class="comment"> *    Add members given by a mask to a subset.  The operation is done on native</span>
<a name="l01287"></a>01287 <span class="comment"> *    subset representation type.  FC_INPUT_ERROR is returned if the given mask</span>
<a name="l01288"></a>01288 <span class="comment"> *    has different size that the mask in subset.</span>
<a name="l01289"></a>01289 <span class="comment"> *</span>
<a name="l01290"></a>01290 <span class="comment"> *    A mask of zero length is o.k. and will not return an error.</span>
<a name="l01291"></a>01291 <span class="comment"> *</span>
<a name="l01292"></a>01292 <span class="comment"> *    Members cannot be added to a committed subset (i.e. written to disk).</span>
<a name="l01293"></a>01293 <span class="comment"> *</span>
<a name="l01294"></a>01294 <span class="comment"> * \modifications  </span>
<a name="l01295"></a>01295 <span class="comment"> *    - 04/30/04 RM, created. </span>
<a name="l01296"></a>01296 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01297"></a>01297 <span class="comment"> */</span>
<a name="l01298"></a><a class="code" href="group__Subset.html#gc0f4cc5152ec5e2627f7a6fcbfec12b7">01298</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#gc0f4cc5152ec5e2627f7a6fcbfec12b7">fc_addMaskMembersToSubset</a>(
<a name="l01299"></a>01299   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,  <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01300"></a>01300   <span class="keywordtype">int</span> maskLength,  <span class="comment">/**&lt; input - number of elements in an input mask */</span>
<a name="l01301"></a>01301   <span class="keywordtype">int</span> *mask          <span class="comment">/**&lt; input - pointer to input mask with subset members */</span>
<a name="l01302"></a>01302 ) {
<a name="l01303"></a>01303   <span class="keywordtype">int</span> i;
<a name="l01304"></a>01304   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;  
<a name="l01305"></a>01305   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01306"></a>01306 
<a name="l01307"></a>01307   <span class="comment">// check input</span>
<a name="l01308"></a>01308   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01309"></a>01309   <span class="keywordflow">if</span> ( !subSlot || maskLength &lt; 0 || (maskLength &gt; 0 &amp;&amp; !mask) ||
<a name="l01310"></a>01310        (maskLength &gt; 0  &amp;&amp; maskLength != subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>)) { 
<a name="l01311"></a>01311     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01312"></a>01312     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01313"></a>01313   } 
<a name="l01314"></a>01314 
<a name="l01315"></a>01315   <span class="comment">// no logging on purpose since this may get called over and over</span>
<a name="l01316"></a>01316 
<a name="l01317"></a>01317   <span class="comment">// can't modify a committed subset</span>
<a name="l01318"></a>01318   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a>) {
<a name="l01319"></a>01319     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Can't modify committed subset '%s'"</span>,
<a name="l01320"></a>01320                           subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01321"></a>01321     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01322"></a>01322   }
<a name="l01323"></a>01323 
<a name="l01324"></a>01324   <span class="comment">// trivial case, no elements in a mask</span>
<a name="l01325"></a>01325   <span class="keywordflow">if</span> (maskLength == 0) 
<a name="l01326"></a>01326     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01327"></a>01327 
<a name="l01328"></a>01328   <span class="keywordflow">for</span> (i = 0; i &lt; maskLength; i++) {
<a name="l01329"></a>01329     <span class="comment">// add member where mask == 1</span>
<a name="l01330"></a>01330     <span class="keywordflow">if</span> (mask[i] == 1) {
<a name="l01331"></a>01331       rc = <a class="code" href="group__Subset.html#gf105b25f063533c8bdc24a6e0f1d1002">fc_addMemberToSubset</a>(subset, i);
<a name="l01332"></a>01332       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> ) {
<a name="l01333"></a>01333         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to add member to subset '%s'"</span>,
<a name="l01334"></a>01334                               subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01335"></a>01335         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01336"></a>01336       }
<a name="l01337"></a>01337     }
<a name="l01338"></a>01338   }
<a name="l01339"></a>01339 
<a name="l01340"></a>01340   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01341"></a>01341 }
<a name="l01342"></a>01342 <span class="comment"></span>
<a name="l01343"></a>01343 <span class="comment">//@}</span>
<a name="l01344"></a>01344 <span class="comment"></span><span class="comment"></span>
<a name="l01345"></a>01345 <span class="comment">/** \name Delete members from a subset. */</span>
<a name="l01346"></a>01346 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l01347"></a>01347 <span class="comment">//@{</span>
<a name="l01348"></a>01348 <span class="comment"></span><span class="comment"></span>
<a name="l01349"></a>01349 <span class="comment">/**</span>
<a name="l01350"></a>01350 <span class="comment"> * \ingroup Subset</span>
<a name="l01351"></a>01351 <span class="comment"> * \brief  Delete member from a subset. </span>
<a name="l01352"></a>01352 <span class="comment"> *</span>
<a name="l01353"></a>01353 <span class="comment"> * \description </span>
<a name="l01354"></a>01354 <span class="comment"> *  </span>
<a name="l01355"></a>01355 <span class="comment"> *    Delete member from a given subset, does not change subset type--operation</span>
<a name="l01356"></a>01356 <span class="comment"> *    is done on the native subset type.  \ref FC_INPUT_ERROR is returned if</span>
<a name="l01357"></a>01357 <span class="comment"> *    the member is outside of the valid range.</span>
<a name="l01358"></a>01358 <span class="comment"> *</span>
<a name="l01359"></a>01359 <span class="comment"> *    Members cannot be deleted from a committed subset (i.e. written to disk).</span>
<a name="l01360"></a>01360 <span class="comment"> *</span>
<a name="l01361"></a>01361 <span class="comment"> * \modifications  </span>
<a name="l01362"></a>01362 <span class="comment"> *    - 05/03/04 RM, created. </span>
<a name="l01363"></a>01363 <span class="comment"> *    - 05/11/04 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01364"></a>01364 <span class="comment"> */</span>
<a name="l01365"></a><a class="code" href="group__Subset.html#g23b7ee4d227f2e58a9ab6e46e7caa92b">01365</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g23b7ee4d227f2e58a9ab6e46e7caa92b">fc_deleteMemberFromSubset</a>(
<a name="l01366"></a>01366   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,  <span class="comment">/**&lt; input/output - subset handle   */</span>
<a name="l01367"></a>01367   <span class="keywordtype">int</span> member         <span class="comment">/**&lt; input - member to delete       */</span>
<a name="l01368"></a>01368 ) {
<a name="l01369"></a>01369   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01370"></a>01370   <span class="keywordtype">int</span> ret;
<a name="l01371"></a>01371 
<a name="l01372"></a>01372   <span class="comment">// check input, subset-&gt;storageType should never be FC_ST_UNKNOWN,</span>
<a name="l01373"></a>01373   <span class="comment">// member has to be positive &gt;= 0  </span>
<a name="l01374"></a>01374   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01375"></a>01375   <span class="keywordflow">if</span> (!subSlot || member &lt; 0 || member &gt; subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>-1 ) { 
<a name="l01376"></a>01376     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01377"></a>01377     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01378"></a>01378   }
<a name="l01379"></a>01379   
<a name="l01380"></a>01380   <span class="comment">// can't modify a committed subset</span>
<a name="l01381"></a>01381   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a>) {
<a name="l01382"></a>01382     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Can't modify committed subset '%s'"</span>,
<a name="l01383"></a>01383                           subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01384"></a>01384     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01385"></a>01385   }
<a name="l01386"></a>01386 
<a name="l01387"></a>01387   <span class="comment">// no logging on purpose since this may get called over and over</span>
<a name="l01388"></a>01388 
<a name="l01389"></a>01389   <span class="comment">// delete member from the subset</span>
<a name="l01390"></a>01390   ret = <a class="code" href="group__SimpleDataObjects.html#g91742f8b36d51071647f7f40341d94bf">fc_deleteIntFromSortedIntArray</a>(&amp;subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>, member);
<a name="l01391"></a>01391   <span class="keywordflow">if</span> (ret &lt; 0) {
<a name="l01392"></a>01392     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to delete in from sorted int array"</span>);
<a name="l01393"></a>01393     <span class="keywordflow">return</span> ret;
<a name="l01394"></a>01394   }
<a name="l01395"></a>01395   subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a> -= ret;
<a name="l01396"></a>01396   
<a name="l01397"></a>01397   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01398"></a>01398 }
<a name="l01399"></a>01399 <span class="comment"></span>
<a name="l01400"></a>01400 <span class="comment">/**</span>
<a name="l01401"></a>01401 <span class="comment"> * \ingroup Subset</span>
<a name="l01402"></a>01402 <span class="comment"> * \brief  Delete array members from a subset. </span>
<a name="l01403"></a>01403 <span class="comment"> *</span>
<a name="l01404"></a>01404 <span class="comment"> * \description</span>
<a name="l01405"></a>01405 <span class="comment"> *  </span>
<a name="l01406"></a>01406 <span class="comment"> *    Delete members given in an array from a subset. </span>
<a name="l01407"></a>01407 <span class="comment"> *    The operation is done on native subset representation type. </span>
<a name="l01408"></a>01408 <span class="comment"> *    \ref FC_INPUT_ERROR will be returned if any of the array members </span>
<a name="l01409"></a>01409 <span class="comment"> *    are outside the valid range.</span>
<a name="l01410"></a>01410 <span class="comment"> *</span>
<a name="l01411"></a>01411 <span class="comment"> *    An empty array is o.k. and will not return an error.</span>
<a name="l01412"></a>01412 <span class="comment"> *</span>
<a name="l01413"></a>01413 <span class="comment"> *    Members cannot be deleted from a committed subset (i.e. written to disk).</span>
<a name="l01414"></a>01414 <span class="comment"> *</span>
<a name="l01415"></a>01415 <span class="comment"> * \modifications  </span>
<a name="l01416"></a>01416 <span class="comment"> *    - 05/03/04 RM, created. </span>
<a name="l01417"></a>01417 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01418"></a>01418 <span class="comment"> */</span>
<a name="l01419"></a><a class="code" href="group__Subset.html#g579517ce08ed210c295522bd797b9b38">01419</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g579517ce08ed210c295522bd797b9b38">fc_deleteArrayMembersFromSubset</a>(
<a name="l01420"></a>01420   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset, <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01421"></a>01421   <span class="keywordtype">int</span> numElement,   <span class="comment">/**&lt; input - number of elements in an input array */</span>
<a name="l01422"></a>01422   <span class="keywordtype">int</span> *array        <span class="comment">/**&lt; input - pointer to input array with subset members */</span>
<a name="l01423"></a>01423 ) {
<a name="l01424"></a>01424   <span class="keywordtype">int</span> i;
<a name="l01425"></a>01425   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l01426"></a>01426   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01427"></a>01427 
<a name="l01428"></a>01428   <span class="comment">// check input</span>
<a name="l01429"></a>01429   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01430"></a>01430   <span class="keywordflow">if</span> ( !subSlot || numElement &lt; 0 || (numElement &gt; 0 &amp;&amp; !array) ) { 
<a name="l01431"></a>01431     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01432"></a>01432     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01433"></a>01433   }     
<a name="l01434"></a>01434   <span class="keywordflow">for</span> (i = 0; i &lt; numElement; i++) {
<a name="l01435"></a>01435     <span class="keywordflow">if</span> (array[i] &lt; 0 || array[i] &gt;= subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>) {
<a name="l01436"></a>01436       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01437"></a>01437       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01438"></a>01438     }
<a name="l01439"></a>01439   }
<a name="l01440"></a>01440 
<a name="l01441"></a>01441   <span class="comment">// can't modify a committed subset</span>
<a name="l01442"></a>01442   <span class="keywordflow">if</span> (subSlot-&gt;header.committed) {
<a name="l01443"></a>01443     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Can't modify committed subset '%s'"</span>,
<a name="l01444"></a>01444                           subSlot-&gt;header.name);
<a name="l01445"></a>01445     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01446"></a>01446   }
<a name="l01447"></a>01447 
<a name="l01448"></a>01448   <span class="comment">// trivial case, no members in an array</span>
<a name="l01449"></a>01449   <span class="keywordflow">if</span> (numElement == 0) 
<a name="l01450"></a>01450     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01451"></a>01451 
<a name="l01452"></a>01452   <span class="comment">// do it</span>
<a name="l01453"></a>01453   <span class="keywordflow">for</span> (i = 0; i &lt; numElement; i++) {
<a name="l01454"></a>01454     rc = <a class="code" href="group__Subset.html#g23b7ee4d227f2e58a9ab6e46e7caa92b">fc_deleteMemberFromSubset</a>(subset, array[i]);
<a name="l01455"></a>01455     <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> ) {
<a name="l01456"></a>01456       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to delete member from subset '%s'"</span>,
<a name="l01457"></a>01457                             subSlot-&gt;header.name);
<a name="l01458"></a>01458       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01459"></a>01459     }
<a name="l01460"></a>01460   }
<a name="l01461"></a>01461 
<a name="l01462"></a>01462   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01463"></a>01463 }
<a name="l01464"></a>01464 <span class="comment"></span>
<a name="l01465"></a>01465 <span class="comment">/**</span>
<a name="l01466"></a>01466 <span class="comment"> * \ingroup Subset</span>
<a name="l01467"></a>01467 <span class="comment"> * \brief  Delete mask members from a subset. </span>
<a name="l01468"></a>01468 <span class="comment"> *</span>
<a name="l01469"></a>01469 <span class="comment"> * \description</span>
<a name="l01470"></a>01470 <span class="comment"> *  </span>
<a name="l01471"></a>01471 <span class="comment"> *    Delete members given by a mask from a subset. </span>
<a name="l01472"></a>01472 <span class="comment"> *    The operation is done on native subset representation type. </span>
<a name="l01473"></a>01473 <span class="comment"> *    \ref FC_INPUT_ERROR is returned if the given mask</span>
<a name="l01474"></a>01474 <span class="comment"> *    has different size that the mask in subset.</span>
<a name="l01475"></a>01475 <span class="comment"> *</span>
<a name="l01476"></a>01476 <span class="comment"> *    Members cannot be deleted from a committed subset (i.e. written to disk).</span>
<a name="l01477"></a>01477 <span class="comment"> *</span>
<a name="l01478"></a>01478 <span class="comment"> * \modifications  </span>
<a name="l01479"></a>01479 <span class="comment"> *    - 05/03/04 RM, created. </span>
<a name="l01480"></a>01480 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01481"></a>01481 <span class="comment"> */</span>
<a name="l01482"></a><a class="code" href="group__Subset.html#g81af31a761eb2aa0d9cc36ec9e8a797b">01482</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g81af31a761eb2aa0d9cc36ec9e8a797b">fc_deleteMaskMembersFromSubset</a>(
<a name="l01483"></a>01483   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,  <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01484"></a>01484   <span class="keywordtype">int</span> maskLength,  <span class="comment">/**&lt; input - number of elements in an input mask */</span>
<a name="l01485"></a>01485   <span class="keywordtype">int</span> *mask          <span class="comment">/**&lt; input - pointer to input mask with subset members */</span>
<a name="l01486"></a>01486 ) {
<a name="l01487"></a>01487   <span class="keywordtype">int</span> i;
<a name="l01488"></a>01488   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;  
<a name="l01489"></a>01489   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01490"></a>01490 
<a name="l01491"></a>01491   <span class="comment">// check input</span>
<a name="l01492"></a>01492   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01493"></a>01493   <span class="keywordflow">if</span> ( !subSlot || maskLength &lt; 0 || (maskLength &gt; 0 &amp;&amp; !mask) || 
<a name="l01494"></a>01494        (maskLength &gt; 0 &amp;&amp; maskLength != subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>) ) { 
<a name="l01495"></a>01495    <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01496"></a>01496     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01497"></a>01497   }  
<a name="l01498"></a>01498    
<a name="l01499"></a>01499   <span class="comment">// can't modify a committed subset</span>
<a name="l01500"></a>01500   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a>) {
<a name="l01501"></a>01501     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Can't modify committed subset '%s'"</span>,
<a name="l01502"></a>01502                           subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01503"></a>01503     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01504"></a>01504   }
<a name="l01505"></a>01505 
<a name="l01506"></a>01506   <span class="comment">// no logging on purpose since this may get called over and over</span>
<a name="l01507"></a>01507 
<a name="l01508"></a>01508   <span class="comment">// trivial case, no elements in a mask</span>
<a name="l01509"></a>01509   <span class="keywordflow">if</span> (maskLength == 0) 
<a name="l01510"></a>01510     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01511"></a>01511 
<a name="l01512"></a>01512   <span class="keywordflow">for</span> (i = 0; i &lt; maskLength; i++)
<a name="l01513"></a>01513     <span class="comment">// delete member where mask == 1</span>
<a name="l01514"></a>01514     <span class="keywordflow">if</span> (mask[i] == 1) {
<a name="l01515"></a>01515       rc = <a class="code" href="group__Subset.html#g23b7ee4d227f2e58a9ab6e46e7caa92b">fc_deleteMemberFromSubset</a>(subset, i);
<a name="l01516"></a>01516       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> ) {
<a name="l01517"></a>01517         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to delete member to subset '%s'"</span>,
<a name="l01518"></a>01518                               subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01519"></a>01519         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01520"></a>01520       }
<a name="l01521"></a>01521     }
<a name="l01522"></a>01522 
<a name="l01523"></a>01523   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01524"></a>01524 }
<a name="l01525"></a>01525 <span class="comment"></span>
<a name="l01526"></a>01526 <span class="comment">//@}</span>
<a name="l01527"></a>01527 <span class="comment"></span><span class="comment"></span>
<a name="l01528"></a>01528 <span class="comment">/** \name Release/delete subsets. */</span>
<a name="l01529"></a>01529 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l01530"></a>01530 <span class="comment">//@{</span>
<a name="l01531"></a>01531 <span class="comment"></span><span class="comment"></span>
<a name="l01532"></a>01532 <span class="comment">/**</span>
<a name="l01533"></a>01533 <span class="comment"> * \ingroup  Subset</span>
<a name="l01534"></a>01534 <span class="comment"> * \brief  Attempt to minimize subset's memory usage.</span>
<a name="l01535"></a>01535 <span class="comment"> *</span>
<a name="l01536"></a>01536 <span class="comment"> * \description</span>
<a name="l01537"></a>01537 <span class="comment"> *  </span>
<a name="l01538"></a>01538 <span class="comment"> *    Call to try and release un-needed memory in a  subset. </span>
<a name="l01539"></a>01539 <span class="comment"> *    If the subset has been saved to disk, the large data is </span>
<a name="l01540"></a>01540 <span class="comment"> *    released. If the subset has not been saved to disk, this </span>
<a name="l01541"></a>01541 <span class="comment"> *    will do nothing.</span>
<a name="l01542"></a>01542 <span class="comment"> *</span>
<a name="l01543"></a>01543 <span class="comment"> * \modifications  </span>
<a name="l01544"></a>01544 <span class="comment"> *    - 04/19/04 WSK Created.</span>
<a name="l01545"></a>01545 <span class="comment"> */</span>
<a name="l01546"></a><a class="code" href="group__Subset.html#g8a9796c7757ae6e8fe1021fe8429eb3e">01546</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g8a9796c7757ae6e8fe1021fe8429eb3e">fc_releaseSubset</a>(
<a name="l01547"></a>01547  <a class="code" href="structFC__Subset.html">FC_Subset</a> subset       <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01548"></a>01548 ) {
<a name="l01549"></a>01549   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01550"></a>01550   
<a name="l01551"></a>01551   <span class="comment">// special case: releasing a null handle is not an error</span>
<a name="l01552"></a>01552   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset, <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)) {
<a name="l01553"></a>01553     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"Releasing FC_NULL_SUBSET"</span>);
<a name="l01554"></a>01554     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01555"></a>01555   }
<a name="l01556"></a>01556 
<a name="l01557"></a>01557   <span class="comment">// check input</span>
<a name="l01558"></a>01558   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01559"></a>01559   <span class="keywordflow">if</span> (subSlot == NULL) {
<a name="l01560"></a>01560     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01561"></a>01561     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01562"></a>01562   }
<a name="l01563"></a>01563   
<a name="l01564"></a>01564   <span class="comment">// log message</span>
<a name="l01565"></a>01565   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Cleaning up subset '%s'"</span>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01566"></a>01566 
<a name="l01567"></a>01567   <span class="comment">// remove big data if this slot is committed</span>
<a name="l01568"></a>01568   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a> == 1) {
<a name="l01569"></a>01569     <a class="code" href="group__SimpleDataObjects.html#ga6ecd909b91f581633b4accbc88642b2">fc_freeSortedIntArray</a>(&amp;subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>);
<a name="l01570"></a>01570   }
<a name="l01571"></a>01571 
<a name="l01572"></a>01572   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01573"></a>01573 }
<a name="l01574"></a>01574 <span class="comment"></span>
<a name="l01575"></a>01575 <span class="comment">/**</span>
<a name="l01576"></a>01576 <span class="comment"> * \ingroup Subset</span>
<a name="l01577"></a>01577 <span class="comment"> * \brief  Delete a subset.</span>
<a name="l01578"></a>01578 <span class="comment"> *</span>
<a name="l01579"></a>01579 <span class="comment"> * \description</span>
<a name="l01580"></a>01580 <span class="comment"> * </span>
<a name="l01581"></a>01581 <span class="comment"> *    Call when this subset is no longer needed.</span>
<a name="l01582"></a>01582 <span class="comment"> *</span>
<a name="l01583"></a>01583 <span class="comment"> * \modifications  </span>
<a name="l01584"></a>01584 <span class="comment"> *    - 04/20/04 RM, created.</span>
<a name="l01585"></a>01585 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01586"></a>01586 <span class="comment"> *    - 9/9/04 WSK changed name to delete. Changed behavior so that</span>
<a name="l01587"></a>01587 <span class="comment"> *      delete always deletes no matter whether on disk or not.</span>
<a name="l01588"></a>01588 <span class="comment"> */</span>
<a name="l01589"></a><a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">01589</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">fc_deleteSubset</a>(
<a name="l01590"></a>01590   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset         <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01591"></a>01591 ) {
<a name="l01592"></a>01592   <span class="keywordtype">int</span> i, j;
<a name="l01593"></a>01593   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01594"></a>01594   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l01595"></a>01595          
<a name="l01596"></a>01596   <span class="comment">// special case: deleting a null handle is not an error</span>
<a name="l01597"></a>01597   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset, <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)) {
<a name="l01598"></a>01598     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"Deleting FC_NULL_SUBSET"</span>);
<a name="l01599"></a>01599     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01600"></a>01600   }
<a name="l01601"></a>01601 
<a name="l01602"></a>01602   <span class="comment">// check input</span>
<a name="l01603"></a>01603   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01604"></a>01604   <span class="keywordflow">if</span> (subSlot == NULL) {
<a name="l01605"></a>01605     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01606"></a>01606     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01607"></a>01607   }
<a name="l01608"></a>01608         
<a name="l01609"></a>01609   <span class="comment">// log message</span>
<a name="l01610"></a>01610   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Deleting subset '%s'"</span>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01611"></a>01611 
<a name="l01612"></a>01612   <span class="comment">// setup</span>
<a name="l01613"></a>01613   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#e2ea84949d74bb96696ee64123ff6f3d">mesh</a>);
<a name="l01614"></a>01614 
<a name="l01615"></a>01615   <span class="comment">// remove reference from mesh</span>
<a name="l01616"></a>01616   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a> == 1) {
<a name="l01617"></a>01617     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a>);
<a name="l01618"></a>01618     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a> = NULL;
<a name="l01619"></a>01619   }
<a name="l01620"></a>01620   <span class="keywordflow">else</span> {
<a name="l01621"></a>01621     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>; i++) {
<a name="l01622"></a>01622       <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a>[i] == subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#bcade4ee6957823bf234769051debf4d">slotID</a>)
<a name="l01623"></a>01623         <span class="keywordflow">break</span>;
<a name="l01624"></a>01624     }
<a name="l01625"></a>01625     <span class="keywordflow">for</span> (j = i+1; j &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>; j++) {
<a name="l01626"></a>01626       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a>[j-1] = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b7aef93eaf21275969081c52f719e55f">subIDs</a>[j];
<a name="l01627"></a>01627     }
<a name="l01628"></a>01628   }
<a name="l01629"></a>01629   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5ab5c220e7ebb0d0aaf9ac8072e26c48">numSub</a>--;
<a name="l01630"></a>01630 
<a name="l01631"></a>01631   <span class="comment">// clear &amp; delete slot</span>
<a name="l01632"></a>01632   <span class="keywordflow">return</span> <a class="code" href="group__PrivateSubset.html#g45d799a1be9520ae84747af360852ddb">_fc_deleteSubSlot</a>(subset);
<a name="l01633"></a>01633 }
<a name="l01634"></a>01634 <span class="comment"></span>
<a name="l01635"></a>01635 <span class="comment">//@}</span>
<a name="l01636"></a>01636 <span class="comment"></span><span class="comment"></span>
<a name="l01637"></a>01637 <span class="comment">/** \name Get subset metadata. */</span>
<a name="l01638"></a>01638 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l01639"></a>01639 <span class="comment">//@{</span>
<a name="l01640"></a>01640 <span class="comment"></span><span class="comment"></span>
<a name="l01641"></a>01641 <span class="comment">/**</span>
<a name="l01642"></a>01642 <span class="comment"> * \ingroup  Subset</span>
<a name="l01643"></a>01643 <span class="comment"> * \brief Check that the handle refers to a valid subset.</span>
<a name="l01644"></a>01644 <span class="comment"> *</span>
<a name="l01645"></a>01645 <span class="comment"> * \description</span>
<a name="l01646"></a>01646 <span class="comment"> *</span>
<a name="l01647"></a>01647 <span class="comment"> *    Returns 1 (true) if the handle is valid, and 0 (false) if it is not.</span>
<a name="l01648"></a>01648 <span class="comment"> *</span>
<a name="l01649"></a>01649 <span class="comment"> * \modifications  </span>
<a name="l01650"></a>01650 <span class="comment"> *    - 05/25/04 WSK Created.</span>
<a name="l01651"></a>01651 <span class="comment"> */</span>
<a name="l01652"></a><a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">01652</a> <span class="keywordtype">int</span> <a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(
<a name="l01653"></a>01653   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset  <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01654"></a>01654 ) {
<a name="l01655"></a>01655   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#gad0539bd0e7ba29168e2a05b2e0b5e33">_fc_isHandleValid</a>(subset.<a class="code" href="structFC__Subset.html#39286106efcb73ed5463903b97500d25">slotID</a>, subset.<a class="code" href="structFC__Subset.html#8b4120bf7ead38bee55e45cf09702d47">uID</a>, <a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a>,
<a name="l01656"></a>01656                            (<a class="code" href="struct__FC__SlotHeader.html">_FC_SlotHeader</a>**)<a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>);
<a name="l01657"></a>01657 }
<a name="l01658"></a>01658 <span class="comment"></span>
<a name="l01659"></a>01659 <span class="comment">/**</span>
<a name="l01660"></a>01660 <span class="comment"> * \ingroup Subset</span>
<a name="l01661"></a>01661 <span class="comment"> * \brief  Get subset name.</span>
<a name="l01662"></a>01662 <span class="comment"> *</span>
<a name="l01663"></a>01663 <span class="comment"> * \description</span>
<a name="l01664"></a>01664 <span class="comment"> *  </span>
<a name="l01665"></a>01665 <span class="comment"> *    Return copy of the name from the subset. User should free</span>
<a name="l01666"></a>01666 <span class="comment"> *    this memory later.</span>
<a name="l01667"></a>01667 <span class="comment"> *</span>
<a name="l01668"></a>01668 <span class="comment"> * \modifications  </span>
<a name="l01669"></a>01669 <span class="comment"> *    - 04/20/04 RM, created. </span>
<a name="l01670"></a>01670 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01671"></a>01671 <span class="comment"> */</span>
<a name="l01672"></a><a class="code" href="group__Subset.html#gf8d751f06ea68d6944e19816147d35a9">01672</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#gf8d751f06ea68d6944e19816147d35a9">fc_getSubsetName</a>(
<a name="l01673"></a>01673   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,    <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01674"></a>01674   <span class="keywordtype">char</span> **subsetName    <span class="comment">/**&lt; output - subset name  */</span>
<a name="l01675"></a>01675 ) {
<a name="l01676"></a>01676   <span class="keywordtype">char</span> *name;
<a name="l01677"></a>01677   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01678"></a>01678 
<a name="l01679"></a>01679   <span class="comment">// default return</span>
<a name="l01680"></a>01680   <span class="keywordflow">if</span>(subsetName)
<a name="l01681"></a>01681     *subsetName = NULL;
<a name="l01682"></a>01682         
<a name="l01683"></a>01683   <span class="comment">// check input</span>
<a name="l01684"></a>01684   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01685"></a>01685   <span class="keywordflow">if</span>(subSlot == NULL || subsetName == NULL) { 
<a name="l01686"></a>01686     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01687"></a>01687     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01688"></a>01688   }
<a name="l01689"></a>01689   
<a name="l01690"></a>01690   <span class="comment">// log message</span>
<a name="l01691"></a>01691   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting name for subset '%s'"</span>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01692"></a>01692 
<a name="l01693"></a>01693   <span class="comment">// copy name</span>
<a name="l01694"></a>01694   name = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l01695"></a>01695   *subsetName = malloc(strlen(name) + 1);
<a name="l01696"></a>01696   <span class="keywordflow">if</span> (*subsetName == NULL) {
<a name="l01697"></a>01697     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01698"></a>01698     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01699"></a>01699   }
<a name="l01700"></a>01700   strcpy(*subsetName, name); 
<a name="l01701"></a>01701 
<a name="l01702"></a>01702   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01703"></a>01703 } 
<a name="l01704"></a>01704 <span class="comment"></span>
<a name="l01705"></a>01705 <span class="comment">/**</span>
<a name="l01706"></a>01706 <span class="comment"> * \ingroup Subset</span>
<a name="l01707"></a>01707 <span class="comment"> * \brief  Get the parent mesh of the subset.</span>
<a name="l01708"></a>01708 <span class="comment"> *</span>
<a name="l01709"></a>01709 <span class="comment"> * \modifications  </span>
<a name="l01710"></a>01710 <span class="comment"> *    - 04/20/04 RM, created. </span>
<a name="l01711"></a>01711 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01712"></a>01712 <span class="comment"> */</span>
<a name="l01713"></a><a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">01713</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g095c5b064f4ae81a17682666aadd420b">fc_getMeshFromSubset</a>(
<a name="l01714"></a>01714   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,   <span class="comment">/**&lt; input - subset handle   */</span>
<a name="l01715"></a>01715   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> *mesh       <span class="comment">/**&lt; output - mesh handle    */</span> 
<a name="l01716"></a>01716 ) {
<a name="l01717"></a>01717   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01718"></a>01718   
<a name="l01719"></a>01719   <span class="comment">// default return</span>
<a name="l01720"></a>01720   <span class="keywordflow">if</span> (mesh) 
<a name="l01721"></a>01721     *mesh = <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>;
<a name="l01722"></a>01722 
<a name="l01723"></a>01723   <span class="comment">// check input   </span>
<a name="l01724"></a>01724   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01725"></a>01725   <span class="keywordflow">if</span>(!subSlot || !mesh) { 
<a name="l01726"></a>01726     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01727"></a>01727     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01728"></a>01728   }  
<a name="l01729"></a>01729 
<a name="l01730"></a>01730   <span class="comment">// log message</span>
<a name="l01731"></a>01731   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting mesh from subset '%s'"</span>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01732"></a>01732   
<a name="l01733"></a>01733   <span class="comment">// return requested value</span>
<a name="l01734"></a>01734   *mesh = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#e2ea84949d74bb96696ee64123ff6f3d">mesh</a>; 
<a name="l01735"></a>01735 
<a name="l01736"></a>01736   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01737"></a>01737 } 
<a name="l01738"></a>01738 <span class="comment"></span>
<a name="l01739"></a>01739 <span class="comment">/**</span>
<a name="l01740"></a>01740 <span class="comment"> * \ingroup Subset</span>
<a name="l01741"></a>01741 <span class="comment"> * \brief  Get information about a subset</span>
<a name="l01742"></a>01742 <span class="comment"> *</span>
<a name="l01743"></a>01743 <span class="comment"> * \description</span>
<a name="l01744"></a>01744 <span class="comment"> *  </span>
<a name="l01745"></a>01745 <span class="comment"> *    Get number of elements in a subset, subset type and its association. </span>
<a name="l01746"></a>01746 <span class="comment"> *    Set an output argument to NULL if you don't need it to be returned.</span>
<a name="l01747"></a>01747 <span class="comment"> *</span>
<a name="l01748"></a>01748 <span class="comment"> * \modifications  </span>
<a name="l01749"></a>01749 <span class="comment"> *    - 04/20/04 RM, created. </span>
<a name="l01750"></a>01750 <span class="comment"> *    - 05/11/04 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01751"></a>01751 <span class="comment"> *    - 05/17/04 RM, added maxNumMember into return parameters</span>
<a name="l01752"></a>01752 <span class="comment"> *    - 09/21/04 WSK, removed storage type from arguments.</span>
<a name="l01753"></a>01753 <span class="comment"> */</span>
<a name="l01754"></a><a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">01754</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(
<a name="l01755"></a>01755   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,          <span class="comment">/**&lt; input - subset handle                   */</span>
<a name="l01756"></a>01756   <span class="keywordtype">int</span> *numMember,    <span class="comment">/**&lt; output - optional, number of members in subset */</span>
<a name="l01757"></a>01757   <span class="keywordtype">int</span> *maxNumMember,         <span class="comment">/**&lt; output - optional, maximum value Member */</span>
<a name="l01758"></a>01758   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> *assoc  <span class="comment">/**&lt; output - optional, association type     */</span>
<a name="l01759"></a>01759 ) {
<a name="l01760"></a>01760   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01761"></a>01761 
<a name="l01762"></a>01762   <span class="comment">// default return values</span>
<a name="l01763"></a>01763   <span class="keywordflow">if</span> (numMember)
<a name="l01764"></a>01764     *numMember = -1;
<a name="l01765"></a>01765   <span class="keywordflow">if</span> (maxNumMember)
<a name="l01766"></a>01766     *maxNumMember = -1;
<a name="l01767"></a>01767   <span class="keywordflow">if</span> (assoc)
<a name="l01768"></a>01768     *assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>;
<a name="l01769"></a>01769 
<a name="l01770"></a>01770   <span class="comment">// check input   </span>
<a name="l01771"></a>01771   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01772"></a>01772   <span class="keywordflow">if</span> (subSlot == NULL || (!numMember &amp;&amp; !maxNumMember &amp;&amp; !assoc)) {
<a name="l01773"></a>01773      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01774"></a>01774     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01775"></a>01775   }
<a name="l01776"></a>01776  
<a name="l01777"></a>01777   <span class="comment">// log message</span>
<a name="l01778"></a>01778   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting info for subset '%s'"</span>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01779"></a>01779 
<a name="l01780"></a>01780   <span class="comment">// fill in requested values</span>
<a name="l01781"></a>01781   <span class="keywordflow">if</span> (numMember) 
<a name="l01782"></a>01782     *numMember = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a>;
<a name="l01783"></a>01783   <span class="keywordflow">if</span> (maxNumMember)
<a name="l01784"></a>01784     *maxNumMember = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>;
<a name="l01785"></a>01785   <span class="keywordflow">if</span> (assoc)
<a name="l01786"></a>01786     *assoc = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#4c72118524caf5d218cbec9b87836521">assoc</a>;
<a name="l01787"></a>01787 
<a name="l01788"></a>01788   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01789"></a>01789         
<a name="l01790"></a>01790 }       
<a name="l01791"></a>01791         <span class="comment"></span>
<a name="l01792"></a>01792 <span class="comment">/**</span>
<a name="l01793"></a>01793 <span class="comment"> * \ingroup Subset</span>
<a name="l01794"></a>01794 <span class="comment"> * \brief  Get number of members in a subset.</span>
<a name="l01795"></a>01795 <span class="comment"> *</span>
<a name="l01796"></a>01796 <span class="comment"> * \modifications  </span>
<a name="l01797"></a>01797 <span class="comment"> *    - 04/20/04 RM, created. </span>
<a name="l01798"></a>01798 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01799"></a>01799 <span class="comment"> */</span>
<a name="l01800"></a><a class="code" href="group__Subset.html#g8b932d306fb8f41ef49677f803fd9fd1">01800</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g8b932d306fb8f41ef49677f803fd9fd1">fc_getSubsetNumMember</a>(
<a name="l01801"></a>01801   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,   <span class="comment">/**&lt; input - subset handle                     */</span>
<a name="l01802"></a>01802   <span class="keywordtype">int</span> *numMember      <span class="comment">/**&lt; output - number of members in the subset  */</span> 
<a name="l01803"></a>01803 ) {
<a name="l01804"></a>01804   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01805"></a>01805 
<a name="l01806"></a>01806   <span class="comment">// default return value</span>
<a name="l01807"></a>01807   <span class="keywordflow">if</span> (numMember)
<a name="l01808"></a>01808     *numMember = -1;
<a name="l01809"></a>01809 
<a name="l01810"></a>01810   <span class="comment">// check input</span>
<a name="l01811"></a>01811   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01812"></a>01812   <span class="keywordflow">if</span>(subSlot == NULL || !numMember) { 
<a name="l01813"></a>01813     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01814"></a>01814      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01815"></a>01815   }  
<a name="l01816"></a>01816 
<a name="l01817"></a>01817   <span class="comment">// log message</span>
<a name="l01818"></a>01818   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of members in the subset '%s'"</span>, 
<a name="l01819"></a>01819                        subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01820"></a>01820 
<a name="l01821"></a>01821   *numMember = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a>; 
<a name="l01822"></a>01822 
<a name="l01823"></a>01823   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01824"></a>01824 } 
<a name="l01825"></a>01825 <span class="comment"></span>
<a name="l01826"></a>01826 <span class="comment">/**</span>
<a name="l01827"></a>01827 <span class="comment"> * \ingroup Subset</span>
<a name="l01828"></a>01828 <span class="comment"> * \brief  Get the maximum possible number of members a subset could have. </span>
<a name="l01829"></a>01829 <span class="comment"> *</span>
<a name="l01830"></a>01830 <span class="comment"> * \description </span>
<a name="l01831"></a>01831 <span class="comment"> * </span>
<a name="l01832"></a>01832 <span class="comment"> *    This number should be equal to the number of mesh subentities</span>
<a name="l01833"></a>01833 <span class="comment"> *    (e.g. vertices, edges, elements, etc). This is the maximum </span>
<a name="l01834"></a>01834 <span class="comment"> *    possible number of members and is also the length of the subset</span>
<a name="l01835"></a>01835 <span class="comment"> *    mask.</span>
<a name="l01836"></a>01836 <span class="comment"> *</span>
<a name="l01837"></a>01837 <span class="comment"> * \modifications  </span>
<a name="l01838"></a>01838 <span class="comment"> *    - 05/17/04 RM, created.</span>
<a name="l01839"></a>01839 <span class="comment"> */</span>
<a name="l01840"></a><a class="code" href="group__Subset.html#g38ce08dfd51f3af35fd8004fa82509f9">01840</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g38ce08dfd51f3af35fd8004fa82509f9">fc_getSubsetMaxNumMember</a>(
<a name="l01841"></a>01841   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,  <span class="comment">/**&lt; input  - subset handle                             */</span>
<a name="l01842"></a>01842   <span class="keywordtype">int</span> *maxNumMember  <span class="comment">/**&lt; output - maximum number the subset member can have */</span> 
<a name="l01843"></a>01843 ) {
<a name="l01844"></a>01844   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01845"></a>01845 
<a name="l01846"></a>01846   <span class="comment">// default return value</span>
<a name="l01847"></a>01847   <span class="keywordflow">if</span> (maxNumMember)
<a name="l01848"></a>01848     *maxNumMember = -1;
<a name="l01849"></a>01849 
<a name="l01850"></a>01850   <span class="comment">// check input   </span>
<a name="l01851"></a>01851   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01852"></a>01852   <span class="keywordflow">if</span>(subSlot == NULL || !maxNumMember) { 
<a name="l01853"></a>01853     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01854"></a>01854     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01855"></a>01855   }  
<a name="l01856"></a>01856 
<a name="l01857"></a>01857   <span class="comment">// log message</span>
<a name="l01858"></a>01858   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting maximum possible number of members for subset "</span>
<a name="l01859"></a>01859                       <span class="stringliteral">"'%s'"</span>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01860"></a>01860 
<a name="l01861"></a>01861   <span class="comment">// fill in requested value</span>
<a name="l01862"></a>01862   *maxNumMember = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>; 
<a name="l01863"></a>01863     
<a name="l01864"></a>01864   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01865"></a>01865 } 
<a name="l01866"></a>01866 <span class="comment"></span>
<a name="l01867"></a>01867 <span class="comment">/**</span>
<a name="l01868"></a>01868 <span class="comment"> * \ingroup Subset</span>
<a name="l01869"></a>01869 <span class="comment"> * \brief  Get subset's association type.</span>
<a name="l01870"></a>01870 <span class="comment"> *</span>
<a name="l01871"></a>01871 <span class="comment"> * \modifications  </span>
<a name="l01872"></a>01872 <span class="comment"> *    - 09/20/04 WSK, created.</span>
<a name="l01873"></a>01873 <span class="comment"> */</span>
<a name="l01874"></a><a class="code" href="group__Subset.html#gd546b0c5303f4c8a0f256662aff729a4">01874</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#gd546b0c5303f4c8a0f256662aff729a4">fc_getSubsetAssociationType</a>(
<a name="l01875"></a>01875   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,   <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01876"></a>01876   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> *assoc  <span class="comment">/**&lt; output - association type */</span> 
<a name="l01877"></a>01877 ) {
<a name="l01878"></a>01878   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a> *subSlot;
<a name="l01879"></a>01879 
<a name="l01880"></a>01880   <span class="comment">// default return value</span>
<a name="l01881"></a>01881   <span class="keywordflow">if</span> (assoc)
<a name="l01882"></a>01882     *assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>;
<a name="l01883"></a>01883 
<a name="l01884"></a>01884   <span class="comment">// check input   </span>
<a name="l01885"></a>01885   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01886"></a>01886   <span class="keywordflow">if</span> (subSlot == NULL || !assoc) { 
<a name="l01887"></a>01887     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01888"></a>01888     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01889"></a>01889   }  
<a name="l01890"></a>01890 
<a name="l01891"></a>01891   <span class="comment">// log message</span>
<a name="l01892"></a>01892   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting association type for subset '%s'"</span>, 
<a name="l01893"></a>01893                       subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01894"></a>01894 
<a name="l01895"></a>01895   <span class="comment">// fill in requested value</span>
<a name="l01896"></a>01896   *assoc = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#4c72118524caf5d218cbec9b87836521">assoc</a>;
<a name="l01897"></a>01897 
<a name="l01898"></a>01898   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01899"></a>01899 } 
<a name="l01900"></a>01900 <span class="comment"></span>
<a name="l01901"></a>01901 <span class="comment">//@}</span>
<a name="l01902"></a>01902 <span class="comment"></span><span class="comment"></span>
<a name="l01903"></a>01903 <span class="comment">/** \name Get/query subset big data. */</span>
<a name="l01904"></a>01904 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l01905"></a>01905 <span class="comment">//@{</span>
<a name="l01906"></a>01906 <span class="comment"></span><span class="comment"></span>
<a name="l01907"></a>01907 <span class="comment">/**</span>
<a name="l01908"></a>01908 <span class="comment"> * \ingroup Subset</span>
<a name="l01909"></a>01909 <span class="comment"> * \brief  Check to see if a member is in a subset.</span>
<a name="l01910"></a>01910 <span class="comment"> *</span>
<a name="l01911"></a>01911 <span class="comment"> * \description</span>
<a name="l01912"></a>01912 <span class="comment"> *  </span>
<a name="l01913"></a>01913 <span class="comment"> *    Check to see if a member is in a subset. Returns 1 if the member is</span>
<a name="l01914"></a>01914 <span class="comment"> *    present and 0 if not. If an error occurs, return an error code (always</span>
<a name="l01915"></a>01915 <span class="comment"> *    less than 1).</span>
<a name="l01916"></a>01916 <span class="comment"> *</span>
<a name="l01917"></a>01917 <span class="comment"> * \modifications  </span>
<a name="l01918"></a>01918 <span class="comment"> *    - 2006/8/17 WSK, created.</span>
<a name="l01919"></a>01919 <span class="comment"> */</span>
<a name="l01920"></a><a class="code" href="group__Subset.html#ge786dd4486b757ba00e4e78359a460bc">01920</a> <span class="keywordtype">int</span> <a class="code" href="group__Subset.html#ge786dd4486b757ba00e4e78359a460bc">fc_isMemberInSubset</a>(
<a name="l01921"></a>01921   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset, <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01922"></a>01922   <span class="keywordtype">int</span> memberID      <span class="comment">/**&lt; input - member ID */</span>
<a name="l01923"></a>01923 ) {
<a name="l01924"></a>01924   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l01925"></a>01925   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01926"></a>01926 
<a name="l01927"></a>01927   <span class="comment">// check args</span>
<a name="l01928"></a>01928   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01929"></a>01929   <span class="keywordflow">if</span> (!subSlot) {
<a name="l01930"></a>01930     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01931"></a>01931     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01932"></a>01932   }
<a name="l01933"></a>01933 
<a name="l01934"></a>01934   <span class="comment">// easy case 1: out of range</span>
<a name="l01935"></a>01935   <span class="keywordflow">if</span> (memberID &lt; 0 || memberID &gt;= subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>) {
<a name="l01936"></a>01936     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"Asked for member ID (%d) out of range (0-%d)"</span>,
<a name="l01937"></a>01937                    memberID, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>-1);
<a name="l01938"></a>01938     <span class="keywordflow">return</span> 0;
<a name="l01939"></a>01939   }
<a name="l01940"></a>01940 
<a name="l01941"></a>01941   <span class="comment">// easy case 2: empty</span>
<a name="l01942"></a>01942   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a> &lt; 1) 
<a name="l01943"></a>01943     <span class="keywordflow">return</span> 0;
<a name="l01944"></a>01944 
<a name="l01945"></a>01945   <span class="comment">// lazy member fetching done here</span>
<a name="l01946"></a>01946   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a> == 1 &amp;&amp; subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>.<a class="code" href="structFC__SortedIntArray.html#7788cf6104dcf23fe03af42ab8a65ce9">numVal</a> == 0) {
<a name="l01947"></a>01947     rc = <a class="code" href="group__PrivateFileIO.html#g8cf27614f4ebc6794bb90aed061495e6">_fc_readSubsetMembers</a>(subset);
<a name="l01948"></a>01948     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01949"></a>01949       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Lazy loading of members of subset '%s' failed"</span>,
<a name="l01950"></a>01950                             subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01951"></a>01951       <span class="keywordflow">return</span> rc;
<a name="l01952"></a>01952     }
<a name="l01953"></a>01953   }
<a name="l01954"></a>01954 
<a name="l01955"></a>01955   <span class="comment">// general case</span>
<a name="l01956"></a>01956   <span class="keywordflow">return</span> <a class="code" href="group__SimpleDataObjects.html#g767cf2f73bd364f145e7d0c53573694e">fc_isIntInSortedIntArray</a>(&amp;subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>, memberID);
<a name="l01957"></a>01957 }
<a name="l01958"></a>01958 <span class="comment"></span>
<a name="l01959"></a>01959 <span class="comment">/**</span>
<a name="l01960"></a>01960 <span class="comment"> * \ingroup Subset</span>
<a name="l01961"></a>01961 <span class="comment"> * \brief  Get a copy of subset members as array. </span>
<a name="l01962"></a>01962 <span class="comment"> *</span>
<a name="l01963"></a>01963 <span class="comment"> * \description</span>
<a name="l01964"></a>01964 <span class="comment"> *  </span>
<a name="l01965"></a>01965 <span class="comment"> *    Get a copy of a subset's members as array.  Note </span>
<a name="l01966"></a>01966 <span class="comment"> *    It's user's responsibility to deallocate array's memory.</span>
<a name="l01967"></a>01967 <span class="comment"> *    The operation is done on native subset representation type.</span>
<a name="l01968"></a>01968 <span class="comment"> *</span>
<a name="l01969"></a>01969 <span class="comment"> * \modifications  </span>
<a name="l01970"></a>01970 <span class="comment"> *    - 04/30/04 RM, created. </span>
<a name="l01971"></a>01971 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l01972"></a>01972 <span class="comment"> */</span>
<a name="l01973"></a><a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">01973</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a> (
<a name="l01974"></a>01974   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset, <span class="comment">/**&lt; input - subset handle */</span>
<a name="l01975"></a>01975   <span class="keywordtype">int</span> *numMember,  <span class="comment">/**&lt; output - number of members in output array */</span>
<a name="l01976"></a>01976   <span class="keywordtype">int</span> **array     <span class="comment">/**&lt; output - pointer to output array with subset members */</span>
<a name="l01977"></a>01977 ) {
<a name="l01978"></a>01978   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l01979"></a>01979   <span class="keywordtype">int</span> i;
<a name="l01980"></a>01980   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l01981"></a>01981 
<a name="l01982"></a>01982   <span class="comment">// default returns</span>
<a name="l01983"></a>01983   <span class="keywordflow">if</span>(numMember)
<a name="l01984"></a>01984     *numMember = -1;
<a name="l01985"></a>01985   <span class="keywordflow">if</span>(array)
<a name="l01986"></a>01986     *array = NULL;
<a name="l01987"></a>01987 
<a name="l01988"></a>01988   <span class="comment">// check input</span>
<a name="l01989"></a>01989   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l01990"></a>01990   <span class="keywordflow">if</span> (!subSlot || !numMember || !array) { 
<a name="l01991"></a>01991     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01992"></a>01992     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01993"></a>01993   }
<a name="l01994"></a>01994 
<a name="l01995"></a>01995   <span class="comment">// FIX? log?</span>
<a name="l01996"></a>01996 
<a name="l01997"></a>01997   <span class="comment">// trivial case, no members in subset </span>
<a name="l01998"></a>01998   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a> == 0) {
<a name="l01999"></a>01999     *numMember = 0;
<a name="l02000"></a>02000     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02001"></a>02001   }
<a name="l02002"></a>02002 
<a name="l02003"></a>02003   <span class="comment">// lazy member fetching done here</span>
<a name="l02004"></a>02004   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a> == 1 &amp;&amp; subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>.<a class="code" href="structFC__SortedIntArray.html#7788cf6104dcf23fe03af42ab8a65ce9">numVal</a> == 0) {
<a name="l02005"></a>02005     rc = <a class="code" href="group__PrivateFileIO.html#g8cf27614f4ebc6794bb90aed061495e6">_fc_readSubsetMembers</a>(subset);
<a name="l02006"></a>02006     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l02007"></a>02007       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Lazy loading of members of subset '%s' failed"</span>,
<a name="l02008"></a>02008                             subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02009"></a>02009       <span class="keywordflow">return</span> rc;
<a name="l02010"></a>02010     }
<a name="l02011"></a>02011   }
<a name="l02012"></a>02012 
<a name="l02013"></a>02013   <span class="comment">// allocate memory for resulting array, copy subset members into it</span>
<a name="l02014"></a>02014   *array = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a>);  
<a name="l02015"></a>02015   <span class="keywordflow">if</span>(!(*array)) {
<a name="l02016"></a>02016     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02017"></a>02017     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02018"></a>02018   }
<a name="l02019"></a>02019   <span class="comment">//FIX: why doesn't this work?</span>
<a name="l02020"></a>02020   <span class="comment">//memcpy(*array, subSlot-&gt;sia.vals, subSlot-&gt;numMember*sizeof(int));</span>
<a name="l02021"></a>02021   <span class="keywordflow">for</span> (i = 0; i &lt; subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a>; i++)
<a name="l02022"></a>02022     (*array)[i] = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>.<a class="code" href="structFC__SortedIntArray.html#60520a789b3d255c10053389b65bab10">vals</a>[i];
<a name="l02023"></a>02023   *numMember = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a>;
<a name="l02024"></a>02024  
<a name="l02025"></a>02025   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02026"></a>02026 }
<a name="l02027"></a>02027 <span class="comment"></span>
<a name="l02028"></a>02028 <span class="comment">/**</span>
<a name="l02029"></a>02029 <span class="comment"> * \ingroup Subset</span>
<a name="l02030"></a>02030 <span class="comment"> * \brief  Get a copy of subset members as mask. </span>
<a name="l02031"></a>02031 <span class="comment"> *</span>
<a name="l02032"></a>02032 <span class="comment"> * \description</span>
<a name="l02033"></a>02033 <span class="comment"> *  </span>
<a name="l02034"></a>02034 <span class="comment"> *    Get a copy of a subset's members as mask array.  Note </span>
<a name="l02035"></a>02035 <span class="comment"> *    It's user's responsibility to deallocate mask's memory.  </span>
<a name="l02036"></a>02036 <span class="comment"> *</span>
<a name="l02037"></a>02037 <span class="comment"> * \modifications  </span>
<a name="l02038"></a>02038 <span class="comment"> *    - 04/30/04 RM, created. </span>
<a name="l02039"></a>02039 <span class="comment"> *    - 05/11/05 WSK, changed to reflect changes to FC_Subset.</span>
<a name="l02040"></a>02040 <span class="comment"> */</span>
<a name="l02041"></a><a class="code" href="group__Subset.html#ga7568ce9f45cccaf92900791129a8211">02041</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#ga7568ce9f45cccaf92900791129a8211">fc_getSubsetMembersAsMask</a>(
<a name="l02042"></a>02042   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,   <span class="comment">/**&lt; input - subset handle */</span>
<a name="l02043"></a>02043   <span class="keywordtype">int</span> *maskLength,  <span class="comment">/**&lt; output - length of mask array */</span>
<a name="l02044"></a>02044   <span class="keywordtype">int</span> **mask          <span class="comment">/**&lt; output - pointer to output mask array */</span>
<a name="l02045"></a>02045 ) {
<a name="l02046"></a>02046   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l02047"></a>02047   <span class="keywordtype">int</span> i;  
<a name="l02048"></a>02048   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l02049"></a>02049 
<a name="l02050"></a>02050   <span class="comment">// default returns</span>
<a name="l02051"></a>02051   <span class="keywordflow">if</span>(maskLength)
<a name="l02052"></a>02052     *maskLength = -1;
<a name="l02053"></a>02053   <span class="keywordflow">if</span>(mask)
<a name="l02054"></a>02054     *mask = NULL;
<a name="l02055"></a>02055 
<a name="l02056"></a>02056   <span class="comment">// check input</span>
<a name="l02057"></a>02057   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l02058"></a>02058   <span class="keywordflow">if</span> ( !subSlot || !maskLength || !mask) { 
<a name="l02059"></a>02059     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02060"></a>02060     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02061"></a>02061   }     
<a name="l02062"></a>02062 
<a name="l02063"></a>02063   <span class="comment">// FIX? log?</span>
<a name="l02064"></a>02064 
<a name="l02065"></a>02065   <span class="comment">// lazy member fetching done here</span>
<a name="l02066"></a>02066   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a> == 1 &amp;&amp; subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>.<a class="code" href="structFC__SortedIntArray.html#7788cf6104dcf23fe03af42ab8a65ce9">numVal</a> == 0) {
<a name="l02067"></a>02067     rc = <a class="code" href="group__PrivateFileIO.html#g8cf27614f4ebc6794bb90aed061495e6">_fc_readSubsetMembers</a>(subset);
<a name="l02068"></a>02068     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l02069"></a>02069       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Lazy loading of members of subset '%s' failed"</span>,
<a name="l02070"></a>02070                             subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02071"></a>02071       <span class="keywordflow">return</span> rc;
<a name="l02072"></a>02072     }
<a name="l02073"></a>02073   }
<a name="l02074"></a>02074 
<a name="l02075"></a>02075   <span class="comment">// allocate memory for resulting mask array, initialize to zeros</span>
<a name="l02076"></a>02076   *mask = (<span class="keywordtype">int</span>*)calloc(subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l02077"></a>02077   <span class="keywordflow">if</span> (!(*mask)) {
<a name="l02078"></a>02078     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02079"></a>02079     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02080"></a>02080   }
<a name="l02081"></a>02081 
<a name="l02082"></a>02082   <span class="comment">// and length</span>
<a name="l02083"></a>02083   *maskLength = subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>;
<a name="l02084"></a>02084 
<a name="l02085"></a>02085   <span class="comment">// trivial case, no members in subset</span>
<a name="l02086"></a>02086   <span class="keywordflow">if</span> (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a> == 0) 
<a name="l02087"></a>02087     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02088"></a>02088 
<a name="l02089"></a>02089   <span class="keywordflow">for</span> (i = 0; i &lt; subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a>; i++) {
<a name="l02090"></a>02090     (*mask)[subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>.<a class="code" href="structFC__SortedIntArray.html#60520a789b3d255c10053389b65bab10">vals</a>[i]] = 1; 
<a name="l02091"></a>02091   }
<a name="l02092"></a>02092 
<a name="l02093"></a>02093   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02094"></a>02094 }
<a name="l02095"></a>02095 <span class="comment"></span>
<a name="l02096"></a>02096 <span class="comment">//@}</span>
<a name="l02097"></a>02097 <span class="comment"></span><span class="comment"></span>
<a name="l02098"></a>02098 <span class="comment">/** \name Print subset. */</span>
<a name="l02099"></a>02099 <span class="comment">//-------------------------------</span><span class="comment"></span>
<a name="l02100"></a>02100 <span class="comment">//@{</span>
<a name="l02101"></a>02101 <span class="comment"></span><span class="comment"></span>
<a name="l02102"></a>02102 <span class="comment">/**</span>
<a name="l02103"></a>02103 <span class="comment"> * \ingroup  Subset</span>
<a name="l02104"></a>02104 <span class="comment"> * \brief Print subset meta data to stdout, and optionally the member IDs.</span>
<a name="l02105"></a>02105 <span class="comment"> *</span>
<a name="l02106"></a>02106 <span class="comment"> * \modifications </span>
<a name="l02107"></a>02107 <span class="comment"> *    - 05/24/04 WSK, created.</span>
<a name="l02108"></a>02108 <span class="comment"> */</span>
<a name="l02109"></a><a class="code" href="group__Subset.html#g6ad11070801e0195f84c5576b2cadfe6">02109</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g6ad11070801e0195f84c5576b2cadfe6">fc_printSubset</a>(
<a name="l02110"></a>02110   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,   <span class="comment">/**&lt; input - the subset */</span>
<a name="l02111"></a>02111   <span class="keywordtype">char</span>* label,        <span class="comment">/**&lt; input - label to prepend subset name with, </span>
<a name="l02112"></a>02112 <span class="comment">                                     can be NULL */</span>
<a name="l02113"></a>02113   <span class="keywordtype">int</span> print_members   <span class="comment">/**&lt; input - 1 = print the member IDs. */</span>
<a name="l02114"></a>02114 ) {
<a name="l02115"></a>02115   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l02116"></a>02116   <span class="keywordtype">int</span> i;
<a name="l02117"></a>02117   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l02118"></a>02118   <span class="keywordtype">int</span> maxNumMember, numMember;
<a name="l02119"></a>02119   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l02120"></a>02120   <span class="keywordtype">int</span>* members;
<a name="l02121"></a>02121 
<a name="l02122"></a>02122   <span class="comment">// special case: printing a null handle is not an error</span>
<a name="l02123"></a>02123   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(subset, <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)) {
<a name="l02124"></a>02124     printf(<span class="stringliteral">"Subset: FC_NULL_SUBSET\n"</span>);
<a name="l02125"></a>02125     fflush(NULL);
<a name="l02126"></a>02126     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02127"></a>02127   }
<a name="l02128"></a>02128 
<a name="l02129"></a>02129   <span class="comment">// check input</span>
<a name="l02130"></a>02130   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l02131"></a>02131   <span class="keywordflow">if</span> (subSlot == NULL) {
<a name="l02132"></a>02132     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02133"></a>02133     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02134"></a>02134   }
<a name="l02135"></a>02135 
<a name="l02136"></a>02136   <span class="comment">// log message</span>
<a name="l02137"></a>02137   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Printing subset '%s'"</span>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02138"></a>02138 
<a name="l02139"></a>02139   <span class="comment">// print label &amp; var name</span>
<a name="l02140"></a>02140   <span class="keywordflow">if</span> (label)
<a name="l02141"></a>02141     printf(<span class="stringliteral">"%s: "</span>, label);
<a name="l02142"></a>02142   <span class="keywordflow">else</span>
<a name="l02143"></a>02143     printf(<span class="stringliteral">"Subset: "</span>);
<a name="l02144"></a>02144   printf(<span class="stringliteral">"'%s'\n"</span>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02145"></a>02145   fflush(NULL);
<a name="l02146"></a>02146 
<a name="l02147"></a>02147   <span class="comment">// print meta data</span>
<a name="l02148"></a>02148   rc = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset, &amp;numMember, &amp;maxNumMember, &amp;assoc);
<a name="l02149"></a>02149   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l02150"></a>02150     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for subset '%s'"</span>,
<a name="l02151"></a>02151                           subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02152"></a>02152     <span class="keywordflow">return</span> rc;
<a name="l02153"></a>02153   }
<a name="l02154"></a>02154   printf(<span class="stringliteral">"%snumMember = %d, maxNumMember = %d\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, 
<a name="l02155"></a>02155          numMember, maxNumMember);
<a name="l02156"></a>02156   printf(<span class="stringliteral">"%sassoc = %s\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(assoc));
<a name="l02157"></a>02157   fflush(NULL);
<a name="l02158"></a>02158 
<a name="l02159"></a>02159   <span class="comment">// print values</span>
<a name="l02160"></a>02160   <span class="keywordflow">if</span> (print_members &amp;&amp; numMember &gt; 0) {
<a name="l02161"></a>02161     rc = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset, &amp;numMember, &amp;members);
<a name="l02162"></a>02162     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l02163"></a>02163       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get members for subset '%s'"</span>,
<a name="l02164"></a>02164                             subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02165"></a>02165       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02166"></a>02166     }
<a name="l02167"></a>02167     
<a name="l02168"></a>02168     <span class="comment">// print the members</span>
<a name="l02169"></a>02169     printf(<span class="stringliteral">"%sMember IDs:\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>);
<a name="l02170"></a>02170     <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++) 
<a name="l02171"></a>02171       printf(<span class="stringliteral">"%s%s%d:  %6d\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, i, members[i]);
<a name="l02172"></a>02172     fflush(NULL);
<a name="l02173"></a>02173 
<a name="l02174"></a>02174     free(members);
<a name="l02175"></a>02175   }
<a name="l02176"></a>02176 
<a name="l02177"></a>02177   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02178"></a>02178 }
<a name="l02179"></a>02179 <span class="comment"></span>
<a name="l02180"></a>02180 <span class="comment">/**</span>
<a name="l02181"></a>02181 <span class="comment"> * \ingroup  Subset</span>
<a name="l02182"></a>02182 <span class="comment"> * \brief Print the subset of a mesh.</span>
<a name="l02183"></a>02183 <span class="comment"> *</span>
<a name="l02184"></a>02184 <span class="comment"> * \description</span>
<a name="l02185"></a>02185 <span class="comment"> * </span>
<a name="l02186"></a>02186 <span class="comment"> *    If the association is the vertices, this will print the coordinates.</span>
<a name="l02187"></a>02187 <span class="comment"> *    If the association is not the vertices, this will print the</span>
<a name="l02188"></a>02188 <span class="comment"> *    appropriate connectivities.</span>
<a name="l02189"></a>02189 <span class="comment"> *</span>
<a name="l02190"></a>02190 <span class="comment"> *    This routine can be used with a subset on a different mesh,</span>
<a name="l02191"></a>02191 <span class="comment"> *    as long as the meshes are similar enough (i.e. same number of</span>
<a name="l02192"></a>02192 <span class="comment"> *    mesh subentities for the association type).</span>
<a name="l02193"></a>02193 <span class="comment"> *</span>
<a name="l02194"></a>02194 <span class="comment"> * \modifications </span>
<a name="l02195"></a>02195 <span class="comment"> *    - 11/23/03 WSK Created to replace lots and lots of too specific</span>
<a name="l02196"></a>02196 <span class="comment"> *      printBLAH routines.</span>
<a name="l02197"></a>02197 <span class="comment"> *    - 05/24/04 WSK Changed to printing a subset of a mesh.</span>
<a name="l02198"></a>02198 <span class="comment"> *    - 12/15/04 WSK Fixed up - can handle edges &amp; faces.</span>
<a name="l02199"></a>02199 <span class="comment"> */</span>
<a name="l02200"></a><a class="code" href="group__Subset.html#gd206e26ebc409f607e6e1e8c228c1c16">02200</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#gd206e26ebc409f607e6e1e8c228c1c16">fc_printSubsetOfMesh</a>(
<a name="l02201"></a>02201   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,   <span class="comment">/**&lt; input - subset */</span>
<a name="l02202"></a>02202   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh        <span class="comment">/**&lt; input - mesh */</span>
<a name="l02203"></a>02203 ) {
<a name="l02204"></a>02204   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l02205"></a>02205   <span class="keywordtype">int</span> i, j;
<a name="l02206"></a>02206   <span class="keywordtype">int</span> dim, numMember, maxNumMember, *members, numEntity;
<a name="l02207"></a>02207   <span class="keywordtype">char</span>* meshName, *subsetName;
<a name="l02208"></a>02208   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l02209"></a>02209   <a class="code" href="group__DataTypes.html#g5d0bf8bd47afb81d89d4c5d60c7d62b4">FC_ElementType</a> elemType;
<a name="l02210"></a>02210   
<a name="l02211"></a>02211   <span class="comment">// check input</span>
<a name="l02212"></a>02212   <span class="keywordflow">if</span> (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset) || !<a class="code" href="group__Mesh.html#gdc4cdd6e7f6a9151458bcb2c25715fd5">fc_isMeshValid</a>(mesh)) {
<a name="l02213"></a>02213     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02214"></a>02214     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02215"></a>02215   }    
<a name="l02216"></a>02216 
<a name="l02217"></a>02217   <span class="comment">// get meta data</span>
<a name="l02218"></a>02218   rc = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset, &amp;numMember, &amp;maxNumMember, &amp;assoc);
<a name="l02219"></a>02219   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02220"></a>02220     <span class="keywordflow">return</span> rc;
<a name="l02221"></a>02221   rc = <a class="code" href="group__Mesh.html#gf169a555056c84bdfd59839bab4f8d76">fc_getMeshNumEntity</a>(mesh, assoc, &amp;numEntity);
<a name="l02222"></a>02222   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02223"></a>02223     <span class="keywordflow">return</span> rc;
<a name="l02224"></a>02224   
<a name="l02225"></a>02225   <span class="comment">// a little more checking - have to have same total number of entity</span>
<a name="l02226"></a>02226   <span class="keywordflow">if</span> (maxNumMember != numEntity) {
<a name="l02227"></a>02227     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Subset and mesh do not have similar enough "</span>
<a name="l02228"></a>02228                           <span class="stringliteral">"associations"</span>);
<a name="l02229"></a>02229     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02230"></a>02230   }
<a name="l02231"></a>02231 
<a name="l02232"></a>02232   <span class="comment">// get some more info</span>
<a name="l02233"></a>02233   rc = <a class="code" href="group__Mesh.html#g9f5a1b484e4b5ab4e0e137bfe34e10d6">fc_getMeshName</a>(mesh, &amp;meshName);
<a name="l02234"></a>02234   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02235"></a>02235     <span class="keywordflow">return</span> rc;
<a name="l02236"></a>02236   rc = <a class="code" href="group__Subset.html#gf8d751f06ea68d6944e19816147d35a9">fc_getSubsetName</a>(subset, &amp;subsetName);
<a name="l02237"></a>02237   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02238"></a>02238     <span class="keywordflow">return</span> rc;
<a name="l02239"></a>02239   rc = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset, &amp;numMember, &amp;members);
<a name="l02240"></a>02240   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02241"></a>02241     <span class="keywordflow">return</span> rc;
<a name="l02242"></a>02242 
<a name="l02243"></a>02243   <span class="comment">// log message</span>
<a name="l02244"></a>02244   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Printing subset '%s' of mesh '%s'"</span>, subsetName,
<a name="l02245"></a>02245                       meshName);
<a name="l02246"></a>02246   
<a name="l02247"></a>02247   <span class="comment">// print meta data</span>
<a name="l02248"></a>02248   printf(<span class="stringliteral">"Subset '%s' of Mesh '%s'\n"</span>, subsetName, meshName);
<a name="l02249"></a>02249   printf(<span class="stringliteral">"%snumMember = %d (of %d), assoc = %s, "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, numMember, 
<a name="l02250"></a>02250          maxNumMember, <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(assoc));
<a name="l02251"></a>02251   fflush(NULL);
<a name="l02252"></a>02252   <span class="keywordflow">switch</span>(assoc) {
<a name="l02253"></a>02253   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fb5fd66bec9d026fbfab895c518842d4">FC_AT_EDGE</a>: <span class="comment">// fall through to FC_AT_WHOLE_MESH</span>
<a name="l02254"></a>02254   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>:
<a name="l02255"></a>02255     printf(<span class="stringliteral">"\n"</span>);
<a name="l02256"></a>02256     <span class="keywordflow">break</span>;
<a name="l02257"></a>02257   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>: 
<a name="l02258"></a>02258     <a class="code" href="group__Mesh.html#geaea4205623196e6b1b58da0b4b82b20">fc_getMeshDim</a>(mesh, &amp;dim);
<a name="l02259"></a>02259     printf(<span class="stringliteral">"dim = %d\n"</span>, dim);
<a name="l02260"></a>02260     <span class="keywordflow">break</span>;
<a name="l02261"></a>02261   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a>:
<a name="l02262"></a>02262     <a class="code" href="group__Mesh.html#gb9414508dbdae090770e51de63b305dc">fc_getMeshFaceType</a>(mesh, &amp;elemType);
<a name="l02263"></a>02263     printf(<span class="stringliteral">"faceType = %s\n"</span>, <a class="code" href="group__DataTypes.html#gb3fcc2417d4e38eb3cbd511a42048acd">fc_getElementTypeText</a>(elemType));
<a name="l02264"></a>02264     <span class="keywordflow">break</span>;
<a name="l02265"></a>02265   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a>:
<a name="l02266"></a>02266     <a class="code" href="group__Mesh.html#g3bb6165352ed68a9dd86957ebae28008">fc_getMeshElementType</a>(mesh, &amp;elemType);
<a name="l02267"></a>02267     printf(<span class="stringliteral">"elemType = %s\n"</span>, <a class="code" href="group__DataTypes.html#gb3fcc2417d4e38eb3cbd511a42048acd">fc_getElementTypeText</a>(elemType));
<a name="l02268"></a>02268     <span class="keywordflow">break</span>;
<a name="l02269"></a>02269   <span class="keywordflow">default</span>:
<a name="l02270"></a>02270     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02271"></a>02271   }
<a name="l02272"></a>02272   fflush(NULL);
<a name="l02273"></a>02273 
<a name="l02274"></a>02274   <span class="comment">// print the data</span>
<a name="l02275"></a>02275   <span class="keywordflow">if</span> (numMember &gt; 0) {
<a name="l02276"></a>02276 
<a name="l02277"></a>02277     <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>) { 
<a name="l02278"></a>02278       ; <span class="comment">// do nothing</span>
<a name="l02279"></a>02279     }
<a name="l02280"></a>02280 
<a name="l02281"></a>02281     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>) { <span class="comment">// print coords of members</span>
<a name="l02282"></a>02282       <span class="keywordtype">double</span>* coords;      
<a name="l02283"></a>02283       rc = <a class="code" href="group__Mesh.html#g44d09391731a139c4efc2c4fb2eda4e7">fc_getMeshCoordsPtr</a>(mesh, &amp;coords);
<a name="l02284"></a>02284       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02285"></a>02285         <span class="keywordflow">return</span> rc;
<a name="l02286"></a>02286       printf(<span class="stringliteral">"%sVertex Coordinates:\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>);
<a name="l02287"></a>02287       <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++) {
<a name="l02288"></a>02288         printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, members[i]);
<a name="l02289"></a>02289         <span class="keywordflow">for</span> (j = 0; j &lt; dim; j++)
<a name="l02290"></a>02290           printf(<span class="stringliteral">"%11g "</span>, coords[members[i]*dim +j]);
<a name="l02291"></a>02291         printf(<span class="stringliteral">"\n"</span>);
<a name="l02292"></a>02292       }
<a name="l02293"></a>02293       fflush(NULL);
<a name="l02294"></a>02294     }
<a name="l02295"></a>02295 
<a name="l02296"></a>02296     <span class="keywordflow">else</span> { <span class="comment">// print connectivities of members</span>
<a name="l02297"></a>02297       <span class="keywordtype">int</span>* conns;
<a name="l02298"></a>02298       <span class="keywordtype">int</span> numVertPerEntity = 0, *numVertPerFace = NULL, numVert;
<a name="l02299"></a>02299 
<a name="l02300"></a>02300       <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fb5fd66bec9d026fbfab895c518842d4">FC_AT_EDGE</a>) {
<a name="l02301"></a>02301         numVertPerEntity = 2;
<a name="l02302"></a>02302         rc = <a class="code" href="group__Mesh.html#gf2e80f30f86823573a2a2e516234eab8">fc_getMeshEdgeConnsPtr</a>(mesh, &amp;conns);
<a name="l02303"></a>02303         <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02304"></a>02304           <span class="keywordflow">return</span> rc;
<a name="l02305"></a>02305         printf(<span class="stringliteral">"%sEdge connectivities:\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>);
<a name="l02306"></a>02306       }
<a name="l02307"></a>02307       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a> &amp;&amp; elemType == <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b4b477e20533563cf70ccd322b0e21afa4">FC_ET_MIXED</a>) {
<a name="l02308"></a>02308         rc = <a class="code" href="group__Mesh.html#g216435eac0f72ad3ccb35e44b2df6ca5">fc_getMeshFaceConnsPtr</a>(mesh, &amp;numVertPerFace, &amp;numVertPerEntity, 
<a name="l02309"></a>02309                                     &amp;conns);
<a name="l02310"></a>02310         <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02311"></a>02311           <span class="keywordflow">return</span> rc;
<a name="l02312"></a>02312         printf(<span class="stringliteral">"%sFace connectivities (3 or 4 vertices per face):\n"</span>,
<a name="l02313"></a>02313                <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>);
<a name="l02314"></a>02314       }
<a name="l02315"></a>02315       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a>) {
<a name="l02316"></a>02316         rc = <a class="code" href="group__Mesh.html#g216435eac0f72ad3ccb35e44b2df6ca5">fc_getMeshFaceConnsPtr</a>(mesh, NULL, &amp;numVertPerEntity, &amp;conns);
<a name="l02317"></a>02317         <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02318"></a>02318           <span class="keywordflow">return</span> rc;
<a name="l02319"></a>02319         printf(<span class="stringliteral">"%sFace connectivities (%d vertices per face):\n"</span>,
<a name="l02320"></a>02320                <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, numVertPerEntity);
<a name="l02321"></a>02321       }
<a name="l02322"></a>02322       <span class="keywordflow">else</span> {
<a name="l02323"></a>02323         numVertPerEntity = <a class="code" href="group__DataTypes.html#gf75ed80296bf7b5631bf464ea4a4de25">fc_getElementTypeNumVertex</a>(elemType);
<a name="l02324"></a>02324         rc = <a class="code" href="group__Mesh.html#g71ce3ca34963dcc548b6a7c38aa17fd9">fc_getMeshElementConnsPtr</a>(mesh, &amp;conns);
<a name="l02325"></a>02325         <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02326"></a>02326           <span class="keywordflow">return</span> rc;
<a name="l02327"></a>02327         printf(<span class="stringliteral">"%sElement connectivities (%d vertices per element):\n"</span>, 
<a name="l02328"></a>02328                <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, numVertPerEntity);
<a name="l02329"></a>02329       }
<a name="l02330"></a>02330       fflush(NULL);
<a name="l02331"></a>02331 
<a name="l02332"></a>02332       <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++) {
<a name="l02333"></a>02333         printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, members[i]);
<a name="l02334"></a>02334         <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a> &amp;&amp; elemType == <a class="code" href="group__DataTypes.html#gg5d0bf8bd47afb81d89d4c5d60c7d62b4b477e20533563cf70ccd322b0e21afa4">FC_ET_MIXED</a>) 
<a name="l02335"></a>02335           numVert = numVertPerFace[members[i]];
<a name="l02336"></a>02336         <span class="keywordflow">else</span> 
<a name="l02337"></a>02337           numVert = numVertPerEntity;
<a name="l02338"></a>02338         <span class="keywordflow">for</span> (j = 0; j &lt; numVert; j++)
<a name="l02339"></a>02339           printf(<span class="stringliteral">"%6d "</span>, conns[members[i]*numVertPerEntity + j]);
<a name="l02340"></a>02340         printf(<span class="stringliteral">"\n"</span>);
<a name="l02341"></a>02341       }
<a name="l02342"></a>02342       fflush(NULL);
<a name="l02343"></a>02343     }
<a name="l02344"></a>02344   } 
<a name="l02345"></a>02345 
<a name="l02346"></a>02346   <span class="comment">// cleanup</span>
<a name="l02347"></a>02347   free(members);
<a name="l02348"></a>02348   free(meshName);
<a name="l02349"></a>02349   free(subsetName);
<a name="l02350"></a>02350 
<a name="l02351"></a>02351   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02352"></a>02352 }
<a name="l02353"></a>02353 <span class="comment"></span>
<a name="l02354"></a>02354 <span class="comment">/**</span>
<a name="l02355"></a>02355 <span class="comment"> * \ingroup  Subset</span>
<a name="l02356"></a>02356 <span class="comment"> * \brief Print the subset of a variable.</span>
<a name="l02357"></a>02357 <span class="comment"> *</span>
<a name="l02358"></a>02358 <span class="comment"> * \description</span>
<a name="l02359"></a>02359 <span class="comment"> * </span>
<a name="l02360"></a>02360 <span class="comment"> *    Print the data values on the subset of the mesh. This only works</span>
<a name="l02361"></a>02361 <span class="comment"> *    if the subset and variable share the same association type, and</span>
<a name="l02362"></a>02362 <span class="comment"> *    their parent meshes are similar enough (i.e. same number of</span>
<a name="l02363"></a>02363 <span class="comment"> *    mesh subentities for association type).</span>
<a name="l02364"></a>02364 <span class="comment"> *</span>
<a name="l02365"></a>02365 <span class="comment"> * \modifications </span>
<a name="l02366"></a>02366 <span class="comment"> *    - 11/26/03 WSK Created.</span>
<a name="l02367"></a>02367 <span class="comment"> *    - 05/24/04 WSK Changed to printing a subset of a variable.</span>
<a name="l02368"></a>02368 <span class="comment"> */</span>
<a name="l02369"></a><a class="code" href="group__Subset.html#g3af9be91b8aac9fdb3537e3800c71c08">02369</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__Subset.html#g3af9be91b8aac9fdb3537e3800c71c08">fc_printSubsetOfVariable</a>(
<a name="l02370"></a>02370   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset,       <span class="comment">/**&lt; input - subset */</span>
<a name="l02371"></a>02371   <a class="code" href="structFC__Variable.html">FC_Variable</a> variable    <span class="comment">/**&lt; input - variable */</span>
<a name="l02372"></a>02372 ) {
<a name="l02373"></a>02373   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l02374"></a>02374   <span class="keywordtype">int</span> i, j;
<a name="l02375"></a>02375   <span class="keywordtype">int</span> numDataPoint, numComp, numMember, maxNumMember, *members;
<a name="l02376"></a>02376   <span class="keywordtype">char</span>* varName, *subsetName;
<a name="l02377"></a>02377   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc, temp_assoc;
<a name="l02378"></a>02378   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> dataType;
<a name="l02379"></a>02379   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathType;
<a name="l02380"></a>02380   
<a name="l02381"></a>02381   <span class="comment">// check input</span>
<a name="l02382"></a>02382   <span class="keywordflow">if</span> (!<a class="code" href="group__Subset.html#g4ceb4c71219255a80166405a22773952">fc_isSubsetValid</a>(subset) || !<a class="code" href="group__Variable.html#g888dc4800278e9343a1c35599fa82d63">fc_isVariableValid</a>(variable)) {
<a name="l02383"></a>02383     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02384"></a>02384     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02385"></a>02385   }
<a name="l02386"></a>02386 
<a name="l02387"></a>02387   <span class="comment">// get meta data</span>
<a name="l02388"></a>02388   rc = <a class="code" href="group__Subset.html#g23f364364af36ff74b89ffecf1c4ae28">fc_getSubsetInfo</a>(subset, &amp;numMember, &amp;maxNumMember, &amp;temp_assoc);
<a name="l02389"></a>02389   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02390"></a>02390     <span class="keywordflow">return</span> rc;
<a name="l02391"></a>02391   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(variable, &amp;numDataPoint, &amp;numComp, &amp;assoc, 
<a name="l02392"></a>02392                           &amp;mathType, &amp;dataType);
<a name="l02393"></a>02393   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02394"></a>02394     <span class="keywordflow">return</span> rc;
<a name="l02395"></a>02395 
<a name="l02396"></a>02396   <span class="comment">// a little more checking - have to have same total number of entity</span>
<a name="l02397"></a>02397   <span class="keywordflow">if</span> (temp_assoc != assoc || maxNumMember != numDataPoint) {
<a name="l02398"></a>02398     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Subset and mesh do not have similar enough "</span>
<a name="l02399"></a>02399                           <span class="stringliteral">"associations"</span>);
<a name="l02400"></a>02400     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02401"></a>02401   }
<a name="l02402"></a>02402 
<a name="l02403"></a>02403   rc = <a class="code" href="group__Variable.html#g3ec29251d717c5d0ca4ecfd9824f67b1">fc_getVariableName</a>(variable, &amp;varName);
<a name="l02404"></a>02404   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02405"></a>02405     <span class="keywordflow">return</span> rc;
<a name="l02406"></a>02406   rc = <a class="code" href="group__Subset.html#gf8d751f06ea68d6944e19816147d35a9">fc_getSubsetName</a>(subset, &amp;subsetName);
<a name="l02407"></a>02407   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02408"></a>02408     <span class="keywordflow">return</span> rc;
<a name="l02409"></a>02409   rc = <a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(subset, &amp;numMember, &amp;members);
<a name="l02410"></a>02410   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02411"></a>02411     <span class="keywordflow">return</span> rc;
<a name="l02412"></a>02412 
<a name="l02413"></a>02413   <span class="comment">// log message</span>
<a name="l02414"></a>02414   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Printing subset '%s' of variable '%s'"</span>, subsetName,
<a name="l02415"></a>02415                       varName);
<a name="l02416"></a>02416 
<a name="l02417"></a>02417   <span class="comment">// print meta data</span>
<a name="l02418"></a>02418   printf(<span class="stringliteral">"Subset '%s' of Variable '%s'\n"</span>, subsetName, varName);
<a name="l02419"></a>02419   printf(<span class="stringliteral">"%snumMember = %d (of %d), numComponent = %d\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>,
<a name="l02420"></a>02420          numMember, maxNumMember, numComp);
<a name="l02421"></a>02421   printf(<span class="stringliteral">"%sassoc = %s, mathType = %s, dataType = %s\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, 
<a name="l02422"></a>02422          <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(assoc), <a class="code" href="group__DataTypes.html#g75a3d1b2b701f9ee9cf45b5ea350ee3e">fc_getMathTypeText</a>(mathType), 
<a name="l02423"></a>02423          <a class="code" href="group__DataTypes.html#g6720a592eace2d7459eb410a3b29cd2f">fc_getDataTypeText</a>(dataType));
<a name="l02424"></a>02424   fflush(NULL);
<a name="l02425"></a>02425   
<a name="l02426"></a>02426   <span class="keywordflow">if</span> (numMember &gt; 0) {
<a name="l02427"></a>02427 
<a name="l02428"></a>02428     <span class="comment">// print the values</span>
<a name="l02429"></a>02429     <span class="keywordtype">void</span>* dbuf;
<a name="l02430"></a>02430     rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(variable, &amp;dbuf);
<a name="l02431"></a>02431     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02432"></a>02432       <span class="keywordflow">return</span> rc;
<a name="l02433"></a>02433     printf(<span class="stringliteral">"%sData:\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>);
<a name="l02434"></a>02434     fflush(NULL);
<a name="l02435"></a>02435     <span class="keywordflow">switch</span> (dataType) {
<a name="l02436"></a>02436     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>: 
<a name="l02437"></a>02437       {
<a name="l02438"></a>02438         <span class="keywordtype">char</span>* cast_buf = (<span class="keywordtype">char</span> *)dbuf;
<a name="l02439"></a>02439         <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++) {
<a name="l02440"></a>02440           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, members[i]);
<a name="l02441"></a>02441           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l02442"></a>02442             printf(<span class="stringliteral">"%c "</span>, cast_buf[members[i]*numComp + j]);
<a name="l02443"></a>02443           printf(<span class="stringliteral">"\n"</span>);
<a name="l02444"></a>02444         }
<a name="l02445"></a>02445       }
<a name="l02446"></a>02446       <span class="keywordflow">break</span>;
<a name="l02447"></a>02447     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>:
<a name="l02448"></a>02448       {
<a name="l02449"></a>02449         <span class="keywordtype">int</span>* cast_buf = (<span class="keywordtype">int</span> *)dbuf;
<a name="l02450"></a>02450         <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++) {
<a name="l02451"></a>02451           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, members[i]);
<a name="l02452"></a>02452           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l02453"></a>02453             printf(<span class="stringliteral">"%6d "</span>, cast_buf[members[i]*numComp + j]);
<a name="l02454"></a>02454           printf(<span class="stringliteral">"\n"</span>);
<a name="l02455"></a>02455         }
<a name="l02456"></a>02456       }
<a name="l02457"></a>02457       <span class="keywordflow">break</span>;
<a name="l02458"></a>02458     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>:
<a name="l02459"></a>02459       {
<a name="l02460"></a>02460         <span class="keywordtype">float</span>* cast_buf = (<span class="keywordtype">float</span> *)dbuf;
<a name="l02461"></a>02461         <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++) {
<a name="l02462"></a>02462           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, members[i]);
<a name="l02463"></a>02463           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l02464"></a>02464             printf(<span class="stringliteral">"%11.6g "</span>, cast_buf[members[i]*numComp + j]);
<a name="l02465"></a>02465           printf(<span class="stringliteral">"\n"</span>);
<a name="l02466"></a>02466         }
<a name="l02467"></a>02467       }
<a name="l02468"></a>02468       <span class="keywordflow">break</span>;
<a name="l02469"></a>02469     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>:
<a name="l02470"></a>02470       {
<a name="l02471"></a>02471         <span class="keywordtype">double</span>* cast_buf = (<span class="keywordtype">double</span> *)dbuf;
<a name="l02472"></a>02472         <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++) {
<a name="l02473"></a>02473           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, members[i]);
<a name="l02474"></a>02474           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l02475"></a>02475             <span class="comment">// print the same way as in fc_printVariable()</span>
<a name="l02476"></a>02476             printf(<span class="stringliteral">"%16.11g "</span>, cast_buf[members[i]*numComp + j]);
<a name="l02477"></a>02477           printf(<span class="stringliteral">"\n"</span>);
<a name="l02478"></a>02478         }
<a name="l02479"></a>02479       }
<a name="l02480"></a>02480       <span class="keywordflow">break</span>;
<a name="l02481"></a>02481     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>:
<a name="l02482"></a>02482       printf(<span class="stringliteral">"Cannot print data type '%s'\n"</span>, <a class="code" href="group__DataTypes.html#g6720a592eace2d7459eb410a3b29cd2f">fc_getDataTypeText</a>(dataType));
<a name="l02483"></a>02483     }
<a name="l02484"></a>02484     fflush(NULL);
<a name="l02485"></a>02485   }
<a name="l02486"></a>02486 
<a name="l02487"></a>02487   <span class="comment">// cleanup</span>
<a name="l02488"></a>02488   free(members);
<a name="l02489"></a>02489   free(varName);
<a name="l02490"></a>02490   free(subsetName);
<a name="l02491"></a>02491 
<a name="l02492"></a>02492   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02493"></a>02493 }
<a name="l02494"></a>02494 <span class="comment"></span>
<a name="l02495"></a>02495 <span class="comment">//@}</span>
<a name="l02496"></a>02496 <span class="comment"></span><span class="comment"></span>
<a name="l02497"></a>02497 <span class="comment">/**</span>
<a name="l02498"></a>02498 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02499"></a>02499 <span class="comment"> * \brief  Initialize a subset slot</span>
<a name="l02500"></a>02500 <span class="comment"> *</span>
<a name="l02501"></a>02501 <span class="comment"> * \modifications  </span>
<a name="l02502"></a>02502 <span class="comment"> *    - 05/11/04 WSK. Created.</span>
<a name="l02503"></a>02503 <span class="comment"> */</span>
<a name="l02504"></a><a class="code" href="group__PrivateSubset.html#g88c406b4e5dc7320adec023f3af32ebb">02504</a> <span class="keywordtype">void</span> <a class="code" href="group__PrivateSubset.html#g88c406b4e5dc7320adec023f3af32ebb">_fc_initSubSlot</a>(
<a name="l02505"></a>02505   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot    <span class="comment">/**&lt; input - the subset slot to initialize */</span>
<a name="l02506"></a>02506 ) {
<a name="l02507"></a>02507   <span class="keywordflow">if</span> (subSlot != NULL) {
<a name="l02508"></a>02508     <a class="code" href="group__PrivateTable.html#gbcaa23dfe9ec68cdc993be66d56f615e">_fc_initSlotHeader</a>(&amp;subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>);
<a name="l02509"></a>02509     subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#e2ea84949d74bb96696ee64123ff6f3d">mesh</a> = <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>;
<a name="l02510"></a>02510     subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#4c72118524caf5d218cbec9b87836521">assoc</a> = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>;
<a name="l02511"></a>02511     subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a> = 0;
<a name="l02512"></a>02512     subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a> = 0;
<a name="l02513"></a>02513     <a class="code" href="group__SimpleDataObjects.html#g06e00500dd0122a9ad53fdeb52649de7">fc_initSortedIntArray</a>(&amp;subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>);
<a name="l02514"></a>02514   }
<a name="l02515"></a>02515 }
<a name="l02516"></a>02516 <span class="comment"></span>
<a name="l02517"></a>02517 <span class="comment">/**</span>
<a name="l02518"></a>02518 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02519"></a>02519 <span class="comment"> * \brief Release non-necessary resources in a subset slot.</span>
<a name="l02520"></a>02520 <span class="comment"> *</span>
<a name="l02521"></a>02521 <span class="comment"> * \description</span>
<a name="l02522"></a>02522 <span class="comment"> * </span>
<a name="l02523"></a>02523 <span class="comment"> *    Releases the members</span>
<a name="l02524"></a>02524 <span class="comment"> *</span>
<a name="l02525"></a>02525 <span class="comment"> * \modifications</span>
<a name="l02526"></a>02526 <span class="comment"> *    - 05/11/04 WSK Created.</span>
<a name="l02527"></a>02527 <span class="comment"> */</span>
<a name="l02528"></a><a class="code" href="group__PrivateSubset.html#gba43d5c1960fd39598b6f522c150fe52">02528</a> <span class="keywordtype">void</span> <a class="code" href="group__PrivateSubset.html#gba43d5c1960fd39598b6f522c150fe52">_fc_releaseSubSlot</a>(
<a name="l02529"></a>02529   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlotp       <span class="comment">/**&lt; input - subset slot */</span>
<a name="l02530"></a>02530 ) {
<a name="l02531"></a>02531 
<a name="l02532"></a>02532   <span class="keywordflow">if</span> (subSlotp) {  
<a name="l02533"></a>02533     <span class="comment">// release big data</span>
<a name="l02534"></a>02534     <a class="code" href="group__SimpleDataObjects.html#ga6ecd909b91f581633b4accbc88642b2">fc_freeSortedIntArray</a>(&amp;subSlotp-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>);
<a name="l02535"></a>02535   }
<a name="l02536"></a>02536   <span class="keywordflow">return</span>;
<a name="l02537"></a>02537 }
<a name="l02538"></a>02538 <span class="comment"></span>
<a name="l02539"></a>02539 <span class="comment">/**</span>
<a name="l02540"></a>02540 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02541"></a>02541 <span class="comment"> * \brief   Clear a subset slot.</span>
<a name="l02542"></a>02542 <span class="comment"> *</span>
<a name="l02543"></a>02543 <span class="comment"> * \description</span>
<a name="l02544"></a>02544 <span class="comment"> *  </span>
<a name="l02545"></a>02545 <span class="comment"> *    Releases all dynamically allocated resources in a variable,</span>
<a name="l02546"></a>02546 <span class="comment"> *    and reinitializes all members.</span>
<a name="l02547"></a>02547 <span class="comment"> *</span>
<a name="l02548"></a>02548 <span class="comment"> * \modifications  </span>
<a name="l02549"></a>02549 <span class="comment"> *    - 05/11/04 WSK Created.</span>
<a name="l02550"></a>02550 <span class="comment"> */</span>
<a name="l02551"></a><a class="code" href="group__PrivateSubset.html#g9702b39a35b654e6e1b51e9662b99baa">02551</a> <span class="keywordtype">void</span> <a class="code" href="group__PrivateSubset.html#g9702b39a35b654e6e1b51e9662b99baa">_fc_clearSubSlot</a>(
<a name="l02552"></a>02552  <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlotp       <span class="comment">/**&lt; input - subset slot */</span>
<a name="l02553"></a>02553 ) {
<a name="l02554"></a>02554   <span class="keywordflow">if</span> (subSlotp != NULL) {
<a name="l02555"></a>02555     <span class="comment">// free big data</span>
<a name="l02556"></a>02556     <a class="code" href="group__PrivateSubset.html#gba43d5c1960fd39598b6f522c150fe52">_fc_releaseSubSlot</a>(subSlotp);
<a name="l02557"></a>02557 
<a name="l02558"></a>02558     <span class="comment">// free other dynamic arrays, if any</span>
<a name="l02559"></a>02559 
<a name="l02560"></a>02560     <span class="comment">// clear table header</span>
<a name="l02561"></a>02561     <a class="code" href="group__PrivateTable.html#geda51a6251d829ec903a93c67c0d6391">_fc_clearSlotHeader</a>(&amp;subSlotp-&gt;header);
<a name="l02562"></a>02562 
<a name="l02563"></a>02563     <span class="comment">// reinit</span>
<a name="l02564"></a>02564     <a class="code" href="group__PrivateSubset.html#g88c406b4e5dc7320adec023f3af32ebb">_fc_initSubSlot</a>(subSlotp);
<a name="l02565"></a>02565   }
<a name="l02566"></a>02566 }
<a name="l02567"></a>02567 
<a name="l02568"></a>02568 <span class="comment"></span>
<a name="l02569"></a>02569 <span class="comment">/**</span>
<a name="l02570"></a>02570 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02571"></a>02571 <span class="comment"> * \brief  Get the size of the subset table.</span>
<a name="l02572"></a>02572 <span class="comment"> *</span>
<a name="l02573"></a>02573 <span class="comment"> * \modifications  </span>
<a name="l02574"></a>02574 <span class="comment"> *   - 05/21/04 WSK Created.</span>
<a name="l02575"></a>02575 <span class="comment"> */</span>
<a name="l02576"></a><a class="code" href="group__PrivateSubset.html#g54b25ce78048f6d6b7ac098073dfc1f7">02576</a> <span class="keywordtype">int</span> <a class="code" href="group__PrivateSubset.html#g54b25ce78048f6d6b7ac098073dfc1f7">_fc_getSubTableSize</a>() {
<a name="l02577"></a>02577   <span class="keywordflow">return</span> <a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a>;
<a name="l02578"></a>02578 }
<a name="l02579"></a>02579 <span class="comment"></span>
<a name="l02580"></a>02580 <span class="comment">/**</span>
<a name="l02581"></a>02581 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02582"></a>02582 <span class="comment"> * \brief Get a subset slot from a subset handle.</span>
<a name="l02583"></a>02583 <span class="comment"> *</span>
<a name="l02584"></a>02584 <span class="comment"> * \description</span>
<a name="l02585"></a>02585 <span class="comment"> * </span>
<a name="l02586"></a>02586 <span class="comment"> *    The slot id of the subset handle is used to find the</span>
<a name="l02587"></a>02587 <span class="comment"> *    the slot in the subset table. The identity is then</span>
<a name="l02588"></a>02588 <span class="comment"> *    verified by checking that the slot and the handle's</span>
<a name="l02589"></a>02589 <span class="comment"> *    uIDs are the same. On success, a pointer to the slot </span>
<a name="l02590"></a>02590 <span class="comment"> *    is returned. Otherwise a NULL pointer is returned.</span>
<a name="l02591"></a>02591 <span class="comment"> *</span>
<a name="l02592"></a>02592 <span class="comment"> * \modifications </span>
<a name="l02593"></a>02593 <span class="comment"> *   - 05/11/04 WSK Created</span>
<a name="l02594"></a>02594 <span class="comment"> *   - 05/25/04 WSK Changed to call new _fc_isHandleValid common to all tables.</span>
<a name="l02595"></a>02595 <span class="comment"> */</span>
<a name="l02596"></a><a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">02596</a> <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(
<a name="l02597"></a>02597   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset    <span class="comment">/**&lt; input - subset */</span>
<a name="l02598"></a>02598 ) {
<a name="l02599"></a>02599   <span class="keywordflow">if</span> (<a class="code" href="group__PrivateTable.html#gad0539bd0e7ba29168e2a05b2e0b5e33">_fc_isHandleValid</a>(subset.<a class="code" href="structFC__Subset.html#39286106efcb73ed5463903b97500d25">slotID</a>, subset.<a class="code" href="structFC__Subset.html#8b4120bf7ead38bee55e45cf09702d47">uID</a>, <a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a>,
<a name="l02600"></a>02600                         (<a class="code" href="struct__FC__SlotHeader.html">_FC_SlotHeader</a>**)<a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>))
<a name="l02601"></a>02601     <span class="keywordflow">return</span> <a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>[subset.<a class="code" href="structFC__Subset.html#39286106efcb73ed5463903b97500d25">slotID</a>];
<a name="l02602"></a>02602   <span class="keywordflow">else</span>
<a name="l02603"></a>02603     <span class="keywordflow">return</span> NULL;
<a name="l02604"></a>02604 }
<a name="l02605"></a>02605 <span class="comment"></span>
<a name="l02606"></a>02606 <span class="comment">/**</span>
<a name="l02607"></a>02607 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02608"></a>02608 <span class="comment"> * \brief Get a subset slot based on ID.</span>
<a name="l02609"></a>02609 <span class="comment"> *</span>
<a name="l02610"></a>02610 <span class="comment"> * \description</span>
<a name="l02611"></a>02611 <span class="comment"> * </span>
<a name="l02612"></a>02612 <span class="comment"> *    The _FC_SubSlot at the requested slotID is returned. This should</span>
<a name="l02613"></a>02613 <span class="comment"> *    only be used when you really know that it is the slot you want</span>
<a name="l02614"></a>02614 <span class="comment"> *    because there is no checking of the uID like with _fc_getSubSlot.</span>
<a name="l02615"></a>02615 <span class="comment"> *    The only checking is that the slotID is exists in the table and</span>
<a name="l02616"></a>02616 <span class="comment"> *    that the uID is &gt; 0 (i.e. it is not empty).</span>
<a name="l02617"></a>02617 <span class="comment"> *</span>
<a name="l02618"></a>02618 <span class="comment"> * \modifications </span>
<a name="l02619"></a>02619 <span class="comment"> *    - 05/11/04 WSK Created.</span>
<a name="l02620"></a>02620 <span class="comment"> *    - 05/25/04 WSK Changed to call new _fc_getSlot() common to all tables.</span>
<a name="l02621"></a>02621 <span class="comment"> */</span>
<a name="l02622"></a><a class="code" href="group__PrivateSubset.html#g9329dd24399022501fa3519b32d9a947">02622</a> <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* <a class="code" href="group__PrivateSubset.html#g9329dd24399022501fa3519b32d9a947">_fc_getSubSlotFromID</a>(
<a name="l02623"></a>02623   <span class="keywordtype">int</span> subID
<a name="l02624"></a>02624 ) {
<a name="l02625"></a>02625   <span class="keywordflow">return</span> (<a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>*) <a class="code" href="group__PrivateTable.html#g4ac70eb6636dc2c2e6b04d1a69ecfd53">_fc_getSlot</a>(subID, <a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a>, 
<a name="l02626"></a>02626                                    (<a class="code" href="struct__FC__SlotHeader.html">_FC_SlotHeader</a>**)<a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>);
<a name="l02627"></a>02627 }
<a name="l02628"></a>02628 <span class="comment"></span>
<a name="l02629"></a>02629 <span class="comment">/**</span>
<a name="l02630"></a>02630 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02631"></a>02631 <span class="comment"> * \brief Delete the subset slot associated with the subset handle.</span>
<a name="l02632"></a>02632 <span class="comment"> *</span>
<a name="l02633"></a>02633 <span class="comment"> * \description </span>
<a name="l02634"></a>02634 <span class="comment"> *    </span>
<a name="l02635"></a>02635 <span class="comment"> *    This routine clears the dynamic data in the slot and then</span>
<a name="l02636"></a>02636 <span class="comment"> *    deletes the slot from the table.</span>
<a name="l02637"></a>02637 <span class="comment"> *</span>
<a name="l02638"></a>02638 <span class="comment"> * \modifications</span>
<a name="l02639"></a>02639 <span class="comment"> *   - 12/20/2005 WSD. Created.</span>
<a name="l02640"></a>02640 <span class="comment"> */</span>
<a name="l02641"></a><a class="code" href="group__PrivateSubset.html#g45d799a1be9520ae84747af360852ddb">02641</a> <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> <a class="code" href="group__PrivateSubset.html#g45d799a1be9520ae84747af360852ddb">_fc_deleteSubSlot</a>(
<a name="l02642"></a>02642   <a class="code" href="structFC__Subset.html">FC_Subset</a> subset    <span class="comment">/**&lt; input - subset */</span>
<a name="l02643"></a>02643 ) {
<a name="l02644"></a>02644   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l02645"></a>02645   
<a name="l02646"></a>02646   subSlot = <a class="code" href="group__PrivateSubset.html#g8f78520bce8753ac1e5fda62c47862da">_fc_getSubSlot</a>(subset);
<a name="l02647"></a>02647   <span class="keywordflow">if</span> (subSlot == NULL) {
<a name="l02648"></a>02648     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02649"></a>02649     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02650"></a>02650   }
<a name="l02651"></a>02651 
<a name="l02652"></a>02652   <span class="comment">// do it</span>
<a name="l02653"></a>02653   <a class="code" href="group__PrivateSubset.html#g9702b39a35b654e6e1b51e9662b99baa">_fc_clearSubSlot</a>(subSlot);
<a name="l02654"></a>02654   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#gda92df98e0b218e6e9a8d5fd9fe61fbd">_fc_deleteSlot</a>(subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>.<a class="code" href="struct__FC__SlotHeader.html#bcade4ee6957823bf234769051debf4d">slotID</a>, <a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a>, 
<a name="l02655"></a>02655                (<a class="code" href="struct__FC__SlotHeader.html">_FC_SlotHeader</a>**)<a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>, &amp;<a class="code" href="group__PrivateSubset.html#g3e1c0c1ffd48c43e3bc25969ea4bf1e3">subOpenSlots</a>);
<a name="l02656"></a>02656 }
<a name="l02657"></a>02657 <span class="comment"></span>
<a name="l02658"></a>02658 <span class="comment">/**</span>
<a name="l02659"></a>02659 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02660"></a>02660 <span class="comment"> * \brief   Get an empty subset slot from the subset table.</span>
<a name="l02661"></a>02661 <span class="comment"> *</span>
<a name="l02662"></a>02662 <span class="comment"> * \description</span>
<a name="l02663"></a>02663 <span class="comment"> *  </span>
<a name="l02664"></a>02664 <span class="comment"> *    Will return a new slot or NULL. A NULL means a memory error occurred.</span>
<a name="l02665"></a>02665 <span class="comment"> *</span>
<a name="l02666"></a>02666 <span class="comment"> * \modifications  </span>
<a name="l02667"></a>02667 <span class="comment"> *    - 5/11/04 WSK  Created.</span>
<a name="l02668"></a>02668 <span class="comment"> */</span>
<a name="l02669"></a><a class="code" href="group__PrivateSubset.html#g8499ff7fa9118ca91195cc523c8246ea">02669</a> <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* <a class="code" href="group__PrivateSubset.html#g8499ff7fa9118ca91195cc523c8246ea">_fc_getNewSubSlot</a>() {
<a name="l02670"></a>02670   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l02671"></a>02671 
<a name="l02672"></a>02672   subSlot = (<a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>*) <a class="code" href="group__PrivateTable.html#ge34ab73a6222765edfc4134ca3519c5f">_fc_getNewSlot</a>(&amp;<a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a>, 
<a name="l02673"></a>02673                            (<a class="code" href="struct__FC__SlotHeader.html">_FC_SlotHeader</a>***)&amp;<a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>, 
<a name="l02674"></a>02674                            &amp;<a class="code" href="group__PrivateSubset.html#g3e1c0c1ffd48c43e3bc25969ea4bf1e3">subOpenSlots</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>));
<a name="l02675"></a>02675   <a class="code" href="group__PrivateSubset.html#g88c406b4e5dc7320adec023f3af32ebb">_fc_initSubSlot</a>(subSlot);
<a name="l02676"></a>02676 
<a name="l02677"></a>02677   <span class="keywordflow">return</span> subSlot;
<a name="l02678"></a>02678 }
<a name="l02679"></a>02679 <span class="comment"></span>
<a name="l02680"></a>02680 <span class="comment">/**</span>
<a name="l02681"></a>02681 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02682"></a>02682 <span class="comment"> * \brief  Print the contents of the Subset Table (\ref subTable) to stderr.</span>
<a name="l02683"></a>02683 <span class="comment"> *</span>
<a name="l02684"></a>02684 <span class="comment"> * \description</span>
<a name="l02685"></a>02685 <span class="comment"> *</span>
<a name="l02686"></a>02686 <span class="comment"> *    Prints the contents of the Subset Table in a human readable form.</span>
<a name="l02687"></a>02687 <span class="comment"> *    It takes a string to use as a label for this print out of the table.</span>
<a name="l02688"></a>02688 <span class="comment"> *    Pass NULL if you don't want a label.</span>
<a name="l02689"></a>02689 <span class="comment"> *</span>
<a name="l02690"></a>02690 <span class="comment"> * \modifications </span>
<a name="l02691"></a>02691 <span class="comment"> *    - 12/8/04 WSK created.</span>
<a name="l02692"></a>02692 <span class="comment"> */</span>
<a name="l02693"></a><a class="code" href="group__PrivateSubset.html#gb26c56c8f01a318fe37827484b0da30f">02693</a> <span class="keywordtype">void</span> <a class="code" href="group__PrivateSubset.html#gb26c56c8f01a318fe37827484b0da30f">_fc_printSubTable</a>(
<a name="l02694"></a>02694   <span class="keywordtype">char</span> *label  <span class="comment">/**&lt; Input - label for this version the table (without a</span>
<a name="l02695"></a>02695 <span class="comment">                           trailing \\n) pass NULL if no label is desired */</span>
<a name="l02696"></a>02696 ) {
<a name="l02697"></a>02697   <span class="keywordtype">int</span> i;
<a name="l02698"></a>02698   <a class="code" href="struct__FC__SubSlot.html">_FC_SubSlot</a>* subSlot;
<a name="l02699"></a>02699   
<a name="l02700"></a>02700   <span class="comment">// print table heading</span>
<a name="l02701"></a>02701   fprintf(stderr, <a class="code" href="group__PrivateTable.html#gd709d7ba7ba84abe5e6a7a91f037934a">TABLE_DIVIDER_STRING</a>);
<a name="l02702"></a>02702   fprintf(stderr, <span class="stringliteral">"Subset Table (subTable):\n"</span>);
<a name="l02703"></a>02703   <span class="keywordflow">if</span> (label != NULL)
<a name="l02704"></a>02704     fprintf(stderr, <span class="stringliteral">"%s\n"</span>, label);
<a name="l02705"></a>02705   fprintf(stderr, <a class="code" href="group__PrivateTable.html#gd709d7ba7ba84abe5e6a7a91f037934a">TABLE_DIVIDER_STRING</a>);
<a name="l02706"></a>02706   fflush(NULL);
<a name="l02707"></a>02707 
<a name="l02708"></a>02708   <span class="comment">// We're done if it's empty</span>
<a name="l02709"></a>02709   <span class="keywordflow">if</span> (<a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a> &lt; 1) {
<a name="l02710"></a>02710     fprintf(stderr, <span class="stringliteral">"(empty)\n"</span>);
<a name="l02711"></a>02711     fprintf(stderr, <span class="stringliteral">"\n"</span>);
<a name="l02712"></a>02712     fflush(NULL);
<a name="l02713"></a>02713     <span class="keywordflow">return</span>;
<a name="l02714"></a>02714   }
<a name="l02715"></a>02715 
<a name="l02716"></a>02716   <span class="comment">// print contents for each slot</span>
<a name="l02717"></a>02717   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a>; i++) {
<a name="l02718"></a>02718     subSlot = <a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>[i];
<a name="l02719"></a>02719     fprintf(stderr, <span class="stringliteral">"%3d: %s\n"</span>, i, (subSlot) ? <span class="stringliteral">"exists"</span> : <span class="stringliteral">"NULL"</span>);
<a name="l02720"></a>02720     <span class="keywordflow">if</span> (subSlot == NULL)
<a name="l02721"></a>02721       <span class="keywordflow">continue</span>;
<a name="l02722"></a>02722     <a class="code" href="group__PrivateTable.html#g3cef5fb6e331e782f8a7f14bd0f9bbe8">_fc_printSlotHeader</a>(subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#3d4cf6721e221bdaa68d1ea3b2709aaa">header</a>);
<a name="l02723"></a>02723     fprintf(stderr, <span class="stringliteral">"     FC_Mesh = { %d, %d }\n"</span>, 
<a name="l02724"></a>02724             subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#e2ea84949d74bb96696ee64123ff6f3d">mesh</a>.<a class="code" href="structFC__Mesh.html#b84364c484f4f2d00281f9b34053916c">slotID</a>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#e2ea84949d74bb96696ee64123ff6f3d">mesh</a>.<a class="code" href="structFC__Mesh.html#da0e6172f801029a61963ea3a2301681">uID</a>);
<a name="l02725"></a>02725     fprintf(stderr, <span class="stringliteral">"     assoc = %s, numMember = %d, maxNumMember = %d\n"</span>,
<a name="l02726"></a>02726             <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#4c72118524caf5d218cbec9b87836521">assoc</a>), subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#c996e79182eb5f9075a59a3aca66d2b4">numMember</a>,
<a name="l02727"></a>02727             subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#046404aeffbd5ce91369586668f0d81e">maxNumMember</a>);
<a name="l02728"></a>02728     fprintf(stderr, <span class="stringliteral">"     sia.numVal = %d, sia.maxNumVal = %d, sia.vals = %s\n"</span>,
<a name="l02729"></a>02729          subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>.<a class="code" href="structFC__SortedIntArray.html#7788cf6104dcf23fe03af42ab8a65ce9">numVal</a>, subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>.<a class="code" href="structFC__SortedIntArray.html#2aaa7c200b44d283a5afd99828c3e9b0">maxNumVal</a>,
<a name="l02730"></a>02730          (subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#d1229d95b8376773bca78f5cfb50093c">sia</a>.<a class="code" href="structFC__SortedIntArray.html#60520a789b3d255c10053389b65bab10">vals</a>) ? <span class="stringliteral">"exists"</span> :<span class="stringliteral">"NULL"</span>); 
<a name="l02731"></a>02731   }
<a name="l02732"></a>02732   fprintf(stderr, <span class="stringliteral">"\n"</span>);
<a name="l02733"></a>02733   fflush(NULL);
<a name="l02734"></a>02734 
<a name="l02735"></a>02735   <span class="keywordflow">return</span>;
<a name="l02736"></a>02736 }
<a name="l02737"></a>02737 <span class="comment"></span>
<a name="l02738"></a>02738 <span class="comment">/**</span>
<a name="l02739"></a>02739 <span class="comment"> * \ingroup  PrivateSubset</span>
<a name="l02740"></a>02740 <span class="comment"> * \brief  Free all entries in the subset table</span>
<a name="l02741"></a>02741 <span class="comment"> *</span>
<a name="l02742"></a>02742 <span class="comment"> * \description</span>
<a name="l02743"></a>02743 <span class="comment"> *</span>
<a name="l02744"></a>02744 <span class="comment"> *    This should only be called after making sure that</span>
<a name="l02745"></a>02745 <span class="comment"> *    all slots have been cleared.</span>
<a name="l02746"></a>02746 <span class="comment"> *</span>
<a name="l02747"></a>02747 <span class="comment"> * \modifications  </span>
<a name="l02748"></a>02748 <span class="comment"> *   - 05/21/04 WSK Created.</span>
<a name="l02749"></a>02749 <span class="comment"> */</span>
<a name="l02750"></a><a class="code" href="group__PrivateSubset.html#g8b461ba21906fc8d4596f04a7355f04a">02750</a> <span class="keywordtype">void</span> <a class="code" href="group__PrivateSubset.html#g8b461ba21906fc8d4596f04a7355f04a">_fc_freeSubTable</a>() {
<a name="l02751"></a>02751   <span class="keywordtype">int</span> i;
<a name="l02752"></a>02752   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__PrivateSubset.html#g86dac4dab39cd361bb11ca0a67f1a123">subTableSize</a>; i++) {
<a name="l02753"></a>02753     <a class="code" href="group__PrivateSubset.html#g9702b39a35b654e6e1b51e9662b99baa">_fc_clearSubSlot</a>(<a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>[i]);
<a name="l02754"></a>02754     free(<a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>[i]);
<a name="l02755"></a>02755   }
<a name="l02756"></a>02756   free(<a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a>);
<a name="l02757"></a>02757   <a class="code" href="group__SimpleDataObjects.html#ga6ecd909b91f581633b4accbc88642b2">fc_freeSortedIntArray</a>(&amp;<a class="code" href="group__PrivateSubset.html#g3e1c0c1ffd48c43e3bc25969ea4bf1e3">subOpenSlots</a>);
<a name="l02758"></a>02758   subTableSize = 0;
<a name="l02759"></a>02759   <a class="code" href="group__PrivateSubset.html#g2329f2f40e9784d99743ea854cc8be4d">subTable</a> = NULL;
<a name="l02760"></a>02760 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Oct 31 11:09:58 2007 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
