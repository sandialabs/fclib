<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>FCLib: Dataset</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Dataset<br>
<small>
[<a class="el" href="group__DataInterface.html">Data Interface</a>]</small>
</h1>
<p>
<div class="dynheader">
Collaboration diagram for Dataset:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__Dataset.gif" border="0" alt="" usemap="#group____Dataset_map">
<map name="group____Dataset_map">
<area shape="rect" href="group__DataInterface.html" title="Primary interface between computational routines and actual data." alt="" coords="5,5,131,32"><area shape="rect" href="group__PrivateDataset.html" title="(Private)" alt="" coords="305,5,385,32"></map></td></tr></table></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Operations on datasets. 
<p>
<b>Description:</b> <p>
(For an explanation of general data manipulations, see <a class="el" href="group__DataInterface.html">Data Interface</a>.) 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateDataset.html">(Private)</a></td></tr>

<tr><td colspan="2"><br><h2>Create new dataset from scratch.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#g14025fd46757f6fd2943b3bcdcab39d0">fc_createDataset</a> (char *name, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> *dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new dataset.  <a href="#g14025fd46757f6fd2943b3bcdcab39d0"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Other ways to get new datasets.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#gabfac5090a96b64ab0ef6d8687a8ad6a">fc_copyDataset</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> src_ds, char *newName, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> *<a class="el" href="subsetter_8c.html#6cbd4565ecacc63bef6c1aec4d27f712">new_ds</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a dataset.  <a href="#gabfac5090a96b64ab0ef6d8687a8ad6a"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get existing datasets.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#g94999d6245043aa639ce75d4ba8cee40">fc_getDatasets</a> (int *numDataset, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> **datasets)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a list of datasets in the library.  <a href="#g94999d6245043aa639ce75d4ba8cee40"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#g2bb5f64bb1d7de150e15db49620f4088">fc_getNumDataset</a> (int *numDataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return number of datasets in the library.  <a href="#g2bb5f64bb1d7de150e15db49620f4088"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#ga7d9abfbba19d9af6cd35e4ce13a4308">fc_getDatasetByName</a> (char *datasetName, int *numDatasets, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> **datasets)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets all datasets with a given name.  <a href="#ga7d9abfbba19d9af6cd35e4ce13a4308"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Change the name of a dataset.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#g7c81170793aea61bca2aeb30dff03214">fc_changeDatasetName</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *newName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the name of a dataset.  <a href="#g7c81170793aea61bca2aeb30dff03214"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Release/delete datasets.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#g8f8d73f92846fad0339460f92dc1ea43">fc_releaseDataset</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to minimize dataset's memory usage.  <a href="#g8f8d73f92846fad0339460f92dc1ea43"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#g34fa9d41751a903d238574a800456d78">fc_deleteDataset</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a dataset.  <a href="#g34fa9d41751a903d238574a800456d78"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get dataset metadata.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#gbff33f569a0182d65a40cf46c98dcf54">fc_isDatasetValid</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that the handle refers to a valid dataset.  <a href="#gbff33f569a0182d65a40cf46c98dcf54"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#gf6ce6ef4b5b3aebbd1d694c4e8d55969">fc_getDatasetName</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char **dsName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return name of a dataset.  <a href="#gf6ce6ef4b5b3aebbd1d694c4e8d55969"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Print dataset.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Dataset.html#g96cd43db8b9ccbf304e79834fe2178a7">fc_printDataset</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *label)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print dataset meta data to stdout.  <a href="#g96cd43db8b9ccbf304e79834fe2178a7"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g7c81170793aea61bca2aeb30dff03214"></a><!-- doxytag: member="dataset.c::fc_changeDatasetName" ref="g7c81170793aea61bca2aeb30dff03214" args="(FC_Dataset dataset, char *newName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_changeDatasetName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the name of a dataset. 
<p>
<b>Description:</b> <p>
This does not affect the name of the file the dataset is associated with.<p>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD. Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
Input - the dataset. </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - new name for the dataset. </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00542">542</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="gaplines_8c-source.html#l00433">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00545"></a>00545   {
<a name="l00546"></a>00546   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00547"></a>00547 
<a name="l00548"></a>00548   <span class="comment">// check input</span>
<a name="l00549"></a>00549   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l00550"></a>00550   <span class="keywordflow">if</span> (dsSlot == NULL || newName == NULL) {
<a name="l00551"></a>00551     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00552"></a>00552     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00553"></a>00553   }
<a name="l00554"></a>00554 
<a name="l00555"></a>00555   <span class="comment">// log message</span>
<a name="l00556"></a>00556   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Changing name of dataset from '%s' to '%s'"</span>, 
<a name="l00557"></a>00557                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l00558"></a>00558   
<a name="l00559"></a>00559   <span class="comment">// Do it</span>
<a name="l00560"></a>00560   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>, newName);
<a name="l00561"></a>00561 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gabfac5090a96b64ab0ef6d8687a8ad6a"></a><!-- doxytag: member="dataset.c::fc_copyDataset" ref="gabfac5090a96b64ab0ef6d8687a8ad6a" args="(FC_Dataset src_ds, char *newName, FC_Dataset *new_ds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copyDataset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>src_ds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a> *&nbsp;</td>
          <td class="paramname"> <em>new_ds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a dataset. 
<p>
<b>Description:</b> <p>
Create a copy of a dataset with the given name. This routine will copy all subentities (sequences &amp; meshes).<p>
<b>Modifications:</b> <ul>
<li>2003-NOV-11 WSK Created</li><li>9/21/2006 WSD Added copying of global vars. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_ds</em>&nbsp;</td><td>
Input - the source dataset to be copied </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new dataset, a NULL value is a flag to use the name of the source dataset </td></tr>
<tr><td valign="top"><em>new_ds</em>&nbsp;</td><td>
Output - handle to the new dataset </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00172">172</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06082">_fc_getMeshSlotFromID()</a>, <a class="el" href="sequence_8c-source.html#l02142">_fc_getSeqSlot()</a>, <a class="el" href="sequence_8c-source.html#l02170">_fc_getSeqSlotFromID()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="sequenceP_8h-source.html#l00084">_FC_SeqSlot::coords</a>, <a class="el" href="sequenceP_8h-source.html#l00082">_FC_SeqSlot::datatype</a>, <a class="el" href="variable_8c-source.html#l00818">fc_copyGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l00724">fc_copyGlobalVariable()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="sequence_8c-source.html#l00310">fc_copySequence()</a>, <a class="el" href="dataset_8c-source.html#l00116">fc_createDataset()</a>, <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="sequence_8c-source.html#l01737">fc_getSequenceCoordsPtr()</a>, <a class="el" href="sequence_8c-source.html#l01612">fc_getSequenceInfo()</a>, <a class="el" href="sequence_8c-source.html#l01527">fc_getSequenceName()</a>, <a class="el" href="sequence_8c-source.html#l01150">fc_getSequences()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00764">FC_NULL_DATASET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8c-source.html#l00741">fc_sizeofDataType()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="sequenceP_8h-source.html#l00075">_FC_SeqSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00093">_FC_DsSlot::meshIDs</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>, <a class="el" href="datasetP_8h-source.html#l00092">_FC_DsSlot::numMesh</a>, <a class="el" href="datasetP_8h-source.html#l00088">_FC_DsSlot::numSeq</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00089">_FC_DsSlot::seqIDs</a>, <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>, and <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00177"></a>00177   { 
<a name="l00178"></a>00178   <span class="keywordtype">int</span> i, j;
<a name="l00179"></a>00179   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00180"></a>00180   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* src_dsSlot;
<a name="l00181"></a>00181 
<a name="l00182"></a>00182   <span class="comment">// default return</span>
<a name="l00183"></a>00183   <span class="keywordflow">if</span> (new_ds)
<a name="l00184"></a>00184     *new_ds = <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>;
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="comment">// check input</span>
<a name="l00187"></a>00187   src_dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(src_ds);
<a name="l00188"></a>00188   <span class="keywordflow">if</span> (src_dsSlot == NULL || new_ds == NULL) {
<a name="l00189"></a>00189     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00190"></a>00190     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00191"></a>00191   }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   <span class="comment">// test for NULL name</span>
<a name="l00194"></a>00194   <span class="keywordflow">if</span> (newName == NULL)
<a name="l00195"></a>00195     newName = src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l00196"></a>00196 
<a name="l00197"></a>00197   <span class="comment">// log message</span>
<a name="l00198"></a>00198   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Copying dataset '%s' to '%s'"</span>, src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>,
<a name="l00199"></a>00199                       newName);
<a name="l00200"></a>00200 
<a name="l00201"></a>00201   <span class="comment">// create new dataset with new name</span>
<a name="l00202"></a>00202   rc = <a class="code" href="group__Dataset.html#g14025fd46757f6fd2943b3bcdcab39d0" title="Create a new dataset.">fc_createDataset</a>(newName, new_ds);
<a name="l00203"></a>00203   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00204"></a>00204     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new dataset '%s'"</span>,
<a name="l00205"></a>00205                           newName);
<a name="l00206"></a>00206     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00207"></a>00207   }
<a name="l00208"></a>00208 
<a name="l00209"></a>00209   <span class="comment">// copy the sequences</span>
<a name="l00210"></a>00210   <span class="keywordflow">for</span> (i = 0; i &lt; src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#bc767920afa6b50bbdbe53bc8775da44">numSeq</a>; i++) {
<a name="l00211"></a>00211     <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> src_seq, new_seq;
<a name="l00212"></a>00212     <a class="code" href="struct__FC__SeqSlot.html" title="Sequence Slot Structure for the Sequence Table.">_FC_SeqSlot</a>* src_seqSlot = <a class="code" href="group__PrivateSequence.html#g2bb68d6a6d7c4859bbb787dd41f19b44" title="Get a sequence slot based on ID.">_fc_getSeqSlotFromID</a>(src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a433ea28ed65096f2eec575bd1cd9e80">seqIDs</a>[i]);
<a name="l00213"></a>00213     <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(src_seq, src_seqSlot);
<a name="l00214"></a>00214     rc = <a class="code" href="group__Sequence.html#g75c324c79f7f053ef9e7c568dcb7bc5b" title="Copy a sequence.">fc_copySequence</a>(src_seq, *new_ds, NULL, &amp;new_seq);
<a name="l00215"></a>00215     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00216"></a>00216       <a class="code" href="group__Dataset.html#g34fa9d41751a903d238574a800456d78" title="Delete a dataset.">fc_deleteDataset</a>(*new_ds);
<a name="l00217"></a>00217       *new_ds = <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>;
<a name="l00218"></a>00218       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy sequence '%s'"</span>,
<a name="l00219"></a>00219                             src_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#c5e5166b76af0f8c08946df88105d729">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00220"></a>00220       <span class="keywordflow">return</span> rc;
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222   }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224   <span class="comment">// copy the global vars</span>
<a name="l00225"></a>00225   <span class="keywordflow">for</span> (i = 0; i &lt; src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>; i++) {
<a name="l00226"></a>00226     <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> src_var, new_var;
<a name="l00227"></a>00227     <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* src_varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#865385a15cb135b3d8db2c4d70452798">basicVarIDs</a>[i]);
<a name="l00228"></a>00228     <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(src_var, src_varSlot);
<a name="l00229"></a>00229     rc = <a class="code" href="group__Variable.html#gf29e653a0f5cc6b29dc84796563a0583" title="Copy a global variable.">fc_copyGlobalVariable</a>(src_var, *new_ds, NULL, &amp;new_var);
<a name="l00230"></a>00230     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00231"></a>00231       <a class="code" href="group__Dataset.html#g34fa9d41751a903d238574a800456d78" title="Delete a dataset.">fc_deleteDataset</a>(*new_ds);
<a name="l00232"></a>00232       *new_ds = <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>;
<a name="l00233"></a>00233       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy global var '%s'"</span>,
<a name="l00234"></a>00234                    src_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00235"></a>00235       <span class="keywordflow">return</span> rc;
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237   }
<a name="l00238"></a>00238   
<a name="l00239"></a>00239   <span class="comment">// copy the global seq vars</span>
<a name="l00240"></a>00240   <span class="comment">// (similar to code in fc_copyMesh())</span>
<a name="l00241"></a>00241   <span class="keywordflow">for</span> (i = 0; i &lt; src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>; i++) {
<a name="l00242"></a>00242     <span class="keywordtype">int</span> numStep = src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a>[i];
<a name="l00243"></a>00243     <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> src_seqVar[numStep], *new_seqVar;
<a name="l00244"></a>00244     <span class="keywordtype">int</span> temp_numSeq;
<a name="l00245"></a>00245     <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> dest_seq, *temp_seqs;
<a name="l00246"></a>00246     <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* src_varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>[i][0]);
<a name="l00247"></a>00247     <a class="code" href="struct__FC__SeqSlot.html" title="Sequence Slot Structure for the Sequence Table.">_FC_SeqSlot</a>* src_seqSlot = <a class="code" href="group__PrivateSequence.html#g311b52c3aa6307afba63b26ad035afe5" title="Get a sequence slot from a sequence handle.">_fc_getSeqSlot</a>(src_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#bf719e972f05ce7ba74975fcdbccfd1a">sequence</a>);
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     <span class="comment">// find the appropriate new sequence from the dest sequences</span>
<a name="l00250"></a>00250     rc = <a class="code" href="group__Sequence.html#g0ad1217500f245d78aaad5c79f960ba1" title="Get the sequences in a dataset.">fc_getSequences</a>(*new_ds, &amp;temp_numSeq, &amp;temp_seqs);
<a name="l00251"></a>00251     <span class="keywordflow">for</span> (j = 0; j &lt; temp_numSeq; j++) {
<a name="l00252"></a>00252       <span class="keywordtype">char</span>* temp_name;
<a name="l00253"></a>00253       <span class="keywordtype">int</span> temp_numStep;
<a name="l00254"></a>00254       <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> temp_dataType;
<a name="l00255"></a>00255       <span class="keywordtype">void</span>* temp_coords;
<a name="l00256"></a>00256       rc = <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(temp_seqs[j], &amp;temp_name);
<a name="l00257"></a>00257       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00258"></a>00258           <span class="keywordflow">return</span> rc;
<a name="l00259"></a>00259       rc = <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(temp_seqs[j], &amp;temp_numStep, &amp;temp_dataType);
<a name="l00260"></a>00260       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00261"></a>00261      <span class="keywordflow">return</span> rc;
<a name="l00262"></a>00262       rc = <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(temp_seqs[j], &amp;temp_coords);
<a name="l00263"></a>00263       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00264"></a>00264           <span class="keywordflow">return</span> rc;
<a name="l00265"></a>00265       <span class="keywordflow">if</span> (!strcmp(temp_name, src_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#c5e5166b76af0f8c08946df88105d729">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>) &amp;&amp;
<a name="l00266"></a>00266        temp_numStep == src_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a> &amp;&amp;
<a name="l00267"></a>00267        temp_dataType == src_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#c6a4bdad57705f33fe78820efa2f1c75">datatype</a> &amp;&amp;
<a name="l00268"></a>00268        !memcmp(temp_coords, src_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#41434461d092594ae5c6f7475bfe05fd">coords</a>, src_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a> * 
<a name="l00269"></a>00269             <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(src_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#c6a4bdad57705f33fe78820efa2f1c75">datatype</a>))) {
<a name="l00270"></a>00270        free(temp_name);
<a name="l00271"></a>00271        dest_seq = temp_seqs[j];
<a name="l00272"></a>00272        <span class="keywordflow">break</span>;
<a name="l00273"></a>00273       }
<a name="l00274"></a>00274       free(temp_name);
<a name="l00275"></a>00275     }
<a name="l00276"></a>00276     free(temp_seqs);
<a name="l00277"></a>00277 
<a name="l00278"></a>00278     <span class="comment">// assemble handles</span>
<a name="l00279"></a>00279     <span class="keywordflow">for</span> (j = 0; j &lt; numStep; j++) {
<a name="l00280"></a>00280       src_varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>[i][j]);
<a name="l00281"></a>00281       <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(src_seqVar[j], src_varSlot);
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     rc = <a class="code" href="group__Variable.html#gbfe8d161124e5e9e184337d03bfc69dc" title="Copy a global sequence variable.">fc_copyGlobalSeqVariable</a>(numStep, src_seqVar, *new_ds, dest_seq,
<a name="l00286"></a>00286                       NULL, &amp;new_seqVar);
<a name="l00287"></a>00287     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00288"></a>00288       <a class="code" href="group__Dataset.html#g34fa9d41751a903d238574a800456d78" title="Delete a dataset.">fc_deleteDataset</a>(*new_ds);
<a name="l00289"></a>00289         *new_ds = <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>;
<a name="l00290"></a>00290       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy global var '%s'"</span>,
<a name="l00291"></a>00291                    src_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00292"></a>00292       <span class="keywordflow">return</span> rc;
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294     free(new_seqVar);
<a name="l00295"></a>00295   }
<a name="l00296"></a>00296 
<a name="l00297"></a>00297   <span class="comment">// copy the meshes</span>
<a name="l00298"></a>00298   <span class="keywordflow">for</span> (i = 0; i &lt; src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>; i++) {
<a name="l00299"></a>00299     <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> src_mesh, new_mesh;
<a name="l00300"></a>00300     <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* src_meshSlot = <a class="code" href="group__PrivateMesh.html#gc021ac32931e613adb63450683845fd7" title="Get a mesh slot based on ID.">_fc_getMeshSlotFromID</a>(src_dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a>[i]);
<a name="l00301"></a>00301     <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(src_mesh, src_meshSlot);
<a name="l00302"></a>00302     rc = <a class="code" href="group__Mesh.html#g13cefebd04b8d1c1586737e32fc6ae2b" title="Copy a mesh.">fc_copyMesh</a>(src_mesh, *new_ds, NULL, 1, 1, 1, 1, &amp;new_mesh);
<a name="l00303"></a>00303     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00304"></a>00304       <a class="code" href="group__Dataset.html#g34fa9d41751a903d238574a800456d78" title="Delete a dataset.">fc_deleteDataset</a>(*new_ds);
<a name="l00305"></a>00305       *new_ds = <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>;
<a name="l00306"></a>00306       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy mesh '%s'"</span>,
<a name="l00307"></a>00307                             src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00308"></a>00308       <span class="keywordflow">return</span> rc;
<a name="l00309"></a>00309     }
<a name="l00310"></a>00310   }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00313"></a>00313 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g14025fd46757f6fd2943b3bcdcab39d0"></a><!-- doxytag: member="dataset.c::fc_createDataset" ref="g14025fd46757f6fd2943b3bcdcab39d0" args="(char *name, FC_Dataset *dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createDataset           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a> *&nbsp;</td>
          <td class="paramname"> <em>dataset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new dataset. 
<p>
<b>Description:</b> <p>
Create a new, in memory, dataset.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>name</em>&nbsp;</td><td>
input - name for new dataset </td></tr>
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
output - new dataset </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00116">116</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01000">_fc_getNewDsSlot()</a>, <a class="el" href="library_8c-source.html#l00326">_fc_isLibraryInit()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00764">FC_NULL_DATASET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, and <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l00472">_fc_loadExodusDataset()</a>, <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>, <a class="el" href="dataset_8c-source.html#l00172">fc_copyDataset()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, <a class="el" href="elemdeath__ex1_8c-source.html#l00147">main()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00198">setupDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00119"></a>00119   {
<a name="l00120"></a>00120   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00121"></a>00121   
<a name="l00122"></a>00122   <span class="comment">// default return</span>
<a name="l00123"></a>00123   <span class="keywordflow">if</span> (dataset != NULL)
<a name="l00124"></a>00124     *dataset = <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>;
<a name="l00125"></a>00125   
<a name="l00126"></a>00126   <span class="comment">// check input</span>
<a name="l00127"></a>00127   <span class="keywordflow">if</span> (name == NULL || dataset == NULL) {
<a name="l00128"></a>00128     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00129"></a>00129     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00130"></a>00130   }
<a name="l00131"></a>00131 
<a name="l00132"></a>00132   <span class="comment">// make sure library is ready, return error if it's not</span>
<a name="l00133"></a>00133   <span class="keywordflow">if</span> (!<a class="code" href="group__PrivateLibrary.html#gf9f265c931b08a543728abc285ac61ac" title="Check initialization state of library.">_fc_isLibraryInit</a>()) {
<a name="l00134"></a>00134     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot create a dataset until library is initialized."</span>);
<a name="l00135"></a>00135     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00136"></a>00136   }
<a name="l00137"></a>00137     
<a name="l00138"></a>00138   <span class="comment">// log message</span>
<a name="l00139"></a>00139   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new dataset '%s'"</span>, name);
<a name="l00140"></a>00140 
<a name="l00141"></a>00141   <span class="comment">// get an open slot</span>
<a name="l00142"></a>00142   dsSlot = <a class="code" href="group__PrivateDataset.html#gb6c138f7dd9344a88108682b87f454dd" title="Get an empty dataset slot from the dataset table.">_fc_getNewDsSlot</a>();
<a name="l00143"></a>00143   <span class="keywordflow">if</span> (dsSlot == NULL) {
<a name="l00144"></a>00144     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00145"></a>00145     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00146"></a>00146   }
<a name="l00147"></a>00147   
<a name="l00148"></a>00148   <span class="comment">// table header information</span>
<a name="l00149"></a>00149   <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(*dataset, dsSlot);
<a name="l00150"></a>00150   <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>), name);
<a name="l00151"></a>00151   
<a name="l00152"></a>00152   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00153"></a>00153 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g34fa9d41751a903d238574a800456d78"></a><!-- doxytag: member="dataset.c::fc_deleteDataset" ref="g34fa9d41751a903d238574a800456d78" args="(FC_Dataset dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_deleteDataset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a dataset. 
<p>
<b>Description:</b> <p>
Call when this dataset is no longer needed. It deletes the dataset and all of it's children including it's meshes, variables, etc.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>Aug 5, 2002 W Koegler Now calls _fc_killDsSlot so that fc_closeDataset and fc_openDataset can use the same code to release the dsTable slot.</li><li>11/20/03 RM, added more input checking, if dataset closed with default handle <a class="el" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941">FC_NULL_DATASET</a> then do nothing and return success (issue warning if <a class="el" href="group__Library.html#gd5ab439275b301213065adfc55e04798" title="Get the current verbosity level of the library.">fc_getLibraryVerbosity()</a>).</li><li>9/21/2006 WSD added deleting of member global vars </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset to be deleted </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00659">659</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="fileio_8c-source.html#l02209">_fc_closeDataset()</a>, <a class="el" href="dataset_8c-source.html#l01075">_fc_deleteDsSlot()</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="mesh_8c-source.html#l02626">fc_deleteMesh()</a>, <a class="el" href="sequence_8c-source.html#l01427">fc_deleteSequence()</a>, <a class="el" href="variable_8c-source.html#l05062">fc_deleteSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04980">fc_deleteVariable()</a>, <a class="el" href="variable_8c-source.html#l03492">fc_getGlobalSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l03432">fc_getGlobalVariables()</a>, <a class="el" href="mesh_8c-source.html#l02183">fc_getMeshes()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="sequence_8c-source.html#l01150">fc_getSequences()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00764">FC_NULL_DATASET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00172">fc_copyDataset()</a>, <a class="el" href="library_8c-source.html#l00256">fc_finalLibrary()</a>, and <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00661"></a>00661   {
<a name="l00662"></a>00662   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00663"></a>00663   <span class="keywordtype">int</span> i;
<a name="l00664"></a>00664   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00665"></a>00665   <span class="keywordtype">int</span> numSequence, numMesh, numVar, numSeqVar, *numStepPerVar;
<a name="l00666"></a>00666   <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> *sequences;
<a name="l00667"></a>00667   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> *meshes;
<a name="l00668"></a>00668   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *variables, **seqVariables;
<a name="l00669"></a>00669   
<a name="l00670"></a>00670   <span class="comment">// special case: deleting a null handle is not an error</span>
<a name="l00671"></a>00671   <span class="keywordflow">if</span> ( <a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dataset, <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>)) {
<a name="l00672"></a>00672     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Deleting FC_NULL_DATASET."</span>);
<a name="l00673"></a>00673     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00674"></a>00674   }
<a name="l00675"></a>00675   
<a name="l00676"></a>00676   <span class="comment">// check input</span>
<a name="l00677"></a>00677   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l00678"></a>00678   <span class="keywordflow">if</span> (dsSlot == NULL) {
<a name="l00679"></a>00679     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00680"></a>00680     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00681"></a>00681   }
<a name="l00682"></a>00682   
<a name="l00683"></a>00683   <span class="comment">// log message</span>
<a name="l00684"></a>00684   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Deleting dataset '%s'"</span>, dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00685"></a>00685 
<a name="l00686"></a>00686   <span class="comment">// free up any file IO related stuff</span>
<a name="l00687"></a>00687   <span class="keywordflow">if</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a>) {
<a name="l00688"></a>00688     rc = <a class="code" href="group__PrivateFileIO.html#g74d69e0aedc5f4ff41bc7dc474b734ee" title="Close a dataset.">_fc_closeDataset</a>(dataset);
<a name="l00689"></a>00689     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00690"></a>00690       <span class="keywordflow">return</span> rc;
<a name="l00691"></a>00691   }
<a name="l00692"></a>00692 
<a name="l00693"></a>00693   <span class="comment">// delete member global vars</span>
<a name="l00694"></a>00694   rc = <a class="code" href="group__Variable.html#g1d1333786398ddc0cd571156691272ea" title="Get the global variables in a dataset.">fc_getGlobalVariables</a>(dataset, &amp;numVar, &amp;variables);
<a name="l00695"></a>00695   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00696"></a>00696     <span class="keywordflow">return</span> rc;
<a name="l00697"></a>00697   <span class="keywordflow">for</span> (i = 0; i &lt; numVar; i++) {
<a name="l00698"></a>00698     rc = <a class="code" href="group__Variable.html#g1de53216125d0074933ecf6006f1796a" title="Delete a variable.">fc_deleteVariable</a>(variables[i]);
<a name="l00699"></a>00699     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00700"></a>00700       <span class="keywordflow">return</span> rc;
<a name="l00701"></a>00701   }
<a name="l00702"></a>00702   free(variables);
<a name="l00703"></a>00703 
<a name="l00704"></a>00704   <span class="comment">// delete member global seq vars</span>
<a name="l00705"></a>00705   rc = <a class="code" href="group__Variable.html#g3085ad2d7a4be9f81eb0eccaa19ade10" title="Get the global sequence variables in a dataset.">fc_getGlobalSeqVariables</a>(dataset, &amp;numSeqVar, &amp;numStepPerVar, 
<a name="l00706"></a>00706                     &amp;seqVariables);
<a name="l00707"></a>00707   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00708"></a>00708     <span class="keywordflow">return</span> rc;
<a name="l00709"></a>00709   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++) {
<a name="l00710"></a>00710     rc = <a class="code" href="group__Variable.html#gef5ebe119abe1d217a216f0faad0e667" title="Delete a sequence variable.">fc_deleteSeqVariable</a>(numStepPerVar[i], seqVariables[i]);
<a name="l00711"></a>00711     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00712"></a>00712       <span class="keywordflow">return</span> rc;
<a name="l00713"></a>00713   }
<a name="l00714"></a>00714   free(numStepPerVar);
<a name="l00715"></a>00715   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++)
<a name="l00716"></a>00716     free(seqVariables[i]);
<a name="l00717"></a>00717   free(seqVariables);
<a name="l00718"></a>00718   
<a name="l00719"></a>00719   <span class="comment">// delete member meshes</span>
<a name="l00720"></a>00720   rc = <a class="code" href="group__Mesh.html#gcb092c2c909dd536c0120830890a9f36" title="Get the meshes in a dataset.">fc_getMeshes</a>(dataset, &amp;numMesh, &amp;meshes);
<a name="l00721"></a>00721   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00722"></a>00722     <span class="keywordflow">return</span> rc;
<a name="l00723"></a>00723   <span class="keywordflow">for</span> (i = 0; i &lt; numMesh; i++) {
<a name="l00724"></a>00724     rc = <a class="code" href="group__Mesh.html#g7e846c58fe79c1f2bac817a2b7ed692e" title="Delete a mesh.">fc_deleteMesh</a>(meshes[i]);
<a name="l00725"></a>00725     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00726"></a>00726       <span class="keywordflow">return</span> rc;
<a name="l00727"></a>00727   }
<a name="l00728"></a>00728   free(meshes);
<a name="l00729"></a>00729 
<a name="l00730"></a>00730   <span class="comment">// delete member sequences</span>
<a name="l00731"></a>00731   rc = <a class="code" href="group__Sequence.html#g0ad1217500f245d78aaad5c79f960ba1" title="Get the sequences in a dataset.">fc_getSequences</a>(dataset, &amp;numSequence, &amp;sequences);
<a name="l00732"></a>00732   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00733"></a>00733     <span class="keywordflow">return</span> rc;
<a name="l00734"></a>00734   <span class="keywordflow">for</span> (i = 0; i &lt; numSequence; i++) {
<a name="l00735"></a>00735     rc = <a class="code" href="group__Sequence.html#ga14671e26b688c9f1e05fb966169b4d6" title="Delete a sequence.">fc_deleteSequence</a>(sequences[i]);
<a name="l00736"></a>00736     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00737"></a>00737       <span class="keywordflow">return</span> rc;
<a name="l00738"></a>00738   }
<a name="l00739"></a>00739   free(sequences);
<a name="l00740"></a>00740   
<a name="l00741"></a>00741   <span class="comment">// clear &amp; delete slot</span>
<a name="l00742"></a>00742   <span class="keywordflow">return</span> <a class="code" href="group__PrivateDataset.html#g58f8fcf134605a2333440a38a5caa00c" title="Delete the dataset slot associated with the dataset handle.">_fc_deleteDsSlot</a>(dataset);
<a name="l00743"></a>00743 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ga7d9abfbba19d9af6cd35e4ce13a4308"></a><!-- doxytag: member="dataset.c::fc_getDatasetByName" ref="ga7d9abfbba19d9af6cd35e4ce13a4308" args="(char *datasetName, int *numDatasets, FC_Dataset **datasets)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getDatasetByName           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>datasetName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numDatasets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a> **&nbsp;</td>
          <td class="paramname"> <em>datasets</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets all datasets with a given name. 
<p>
<b>Description:</b> <p>
Return the handles of all datasets with the given name.<p>
<b>Modifications:</b> <ul>
<li>9/8/04 WSK, created.</li><li>9/21/06 ACG now returns multiple matching items. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>datasetName</em>&nbsp;</td><td>
input - name of dataset to find </td></tr>
<tr><td valign="top"><em>numDatasets</em>&nbsp;</td><td>
output - num matching datasets </td></tr>
<tr><td valign="top"><em>datasets</em>&nbsp;</td><td>
output - dataset handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00447">447</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01056">_fc_getDsSlotFromID()</a>, <a class="el" href="dataset_8c-source.html#l00980">_fc_getDsTableSize()</a>, <a class="el" href="library_8c-source.html#l00326">_fc_isLibraryInit()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00451"></a>00451   {
<a name="l00452"></a>00452   <span class="keywordtype">int</span> i;
<a name="l00453"></a>00453   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00454"></a>00454   <a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a> dataset;
<a name="l00455"></a>00455   <a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a> *lmatch = NULL;
<a name="l00456"></a>00456   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l00457"></a>00457   
<a name="l00458"></a>00458   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l00459"></a>00459   <span class="keywordflow">if</span> (numDatasets)
<a name="l00460"></a>00460     *numDatasets = -1;
<a name="l00461"></a>00461   <span class="keywordflow">if</span> (datasets)
<a name="l00462"></a>00462     *datasets = NULL;
<a name="l00463"></a>00463   
<a name="l00464"></a>00464   <span class="comment">// call on uninitialized library is an error</span>
<a name="l00465"></a>00465   <span class="keywordflow">if</span> (!<a class="code" href="group__PrivateLibrary.html#gf9f265c931b08a543728abc285ac61ac" title="Check initialization state of library.">_fc_isLibraryInit</a>()) {
<a name="l00466"></a>00466     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Library has not been initialized"</span>);
<a name="l00467"></a>00467     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00468"></a>00468   }
<a name="l00469"></a>00469 
<a name="l00470"></a>00470   <span class="comment">// check input</span>
<a name="l00471"></a>00471   <span class="keywordflow">if</span> (datasetName == NULL || !datasets || !numDatasets) {
<a name="l00472"></a>00472     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00473"></a>00473     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00474"></a>00474   }
<a name="l00475"></a>00475 
<a name="l00476"></a>00476   <span class="comment">// log message</span>
<a name="l00477"></a>00477   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting dataset '%s'"</span>, datasetName);
<a name="l00478"></a>00478 
<a name="l00479"></a>00479   numlmatch = 0;
<a name="l00480"></a>00480   maxnumlmatch = 0;
<a name="l00481"></a>00481   
<a name="l00482"></a>00482   <span class="comment">// look for existing slot with the matching name</span>
<a name="l00483"></a>00483   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__PrivateDataset.html#gedb0fc260a27f153891bdbd15c9c0545" title="Get the size of the dataset table.">_fc_getDsTableSize</a>(); i++) {
<a name="l00484"></a>00484     dsSlot = <a class="code" href="group__PrivateDataset.html#g9e72020734d603610761daa8f78c8caa" title="Get a dataset slot based on ID.">_fc_getDsSlotFromID</a>(i);
<a name="l00485"></a>00485     <span class="keywordflow">if</span> (dsSlot) {
<a name="l00486"></a>00486       <span class="keywordflow">if</span> (!strcmp(datasetName, dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>)) {
<a name="l00487"></a>00487         <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(dataset, dsSlot);
<a name="l00488"></a>00488 
<a name="l00489"></a>00489      <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l00490"></a>00490        lmatch = (<a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a>));
<a name="l00491"></a>00491        <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l00492"></a>00492          <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, 
<a name="l00493"></a>00493                       <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00494"></a>00494          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00495"></a>00495        }
<a name="l00496"></a>00496        numlmatch = 1;
<a name="l00497"></a>00497        maxnumlmatch = 1;
<a name="l00498"></a>00498        lmatch[0] = dataset;
<a name="l00499"></a>00499      }<span class="keywordflow">else</span>{
<a name="l00500"></a>00500        <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l00501"></a>00501          <a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a> *temp;
<a name="l00502"></a>00502          temp = (<a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a>*)realloc(lmatch,
<a name="l00503"></a>00503                          (2*numlmatch)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a>));
<a name="l00504"></a>00504          <span class="keywordflow">if</span> (temp == NULL){
<a name="l00505"></a>00505            <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>,
<a name="l00506"></a>00506                         <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00507"></a>00507            <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00508"></a>00508          }
<a name="l00509"></a>00509          maxnumlmatch*=2;
<a name="l00510"></a>00510          lmatch = temp;
<a name="l00511"></a>00511        }
<a name="l00512"></a>00512        lmatch[numlmatch] = dataset;
<a name="l00513"></a>00513        numlmatch++;
<a name="l00514"></a>00514      }
<a name="l00515"></a>00515       }
<a name="l00516"></a>00516     }
<a name="l00517"></a>00517   }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519   *numDatasets = numlmatch;
<a name="l00520"></a>00520   *datasets = lmatch;
<a name="l00521"></a>00521 
<a name="l00522"></a>00522   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00523"></a>00523 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gf6ce6ef4b5b3aebbd1d694c4e8d55969"></a><!-- doxytag: member="dataset.c::fc_getDatasetName" ref="gf6ce6ef4b5b3aebbd1d694c4e8d55969" args="(FC_Dataset dataset, char **dsName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getDatasetName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>dsName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return name of a dataset. 
<p>
<b>Description:</b> <p>
Return the name associated with a dataset handle. Spaced is allocated for the string so it needs to be freed by the user when finished.<p>
<b>Modifications:</b> <ul>
<li>Aug, 9, 2002. W Koegler Created.</li><li>11/21/03 RM, added checking for NULL dataset handle default return filename as NULL if anything is wrong </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>dsName</em>&nbsp;</td><td>
output - dataset name, space allocated here and must be freed by user when finished </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00784">784</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="library_8c-source.html#l00256">fc_finalLibrary()</a>, and <a class="el" href="gaplines_8c-source.html#l00433">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00788"></a>00788   {
<a name="l00789"></a>00789   <span class="keywordtype">char</span> *cp;
<a name="l00790"></a>00790   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00791"></a>00791   
<a name="l00792"></a>00792   <span class="comment">// default return value</span>
<a name="l00793"></a>00793   <span class="keywordflow">if</span> (dsName)
<a name="l00794"></a>00794     *dsName = NULL;
<a name="l00795"></a>00795   
<a name="l00796"></a>00796   <span class="comment">// check input</span>
<a name="l00797"></a>00797   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l00798"></a>00798   <span class="keywordflow">if</span> (dsSlot == NULL || dsName == NULL) {
<a name="l00799"></a>00799     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00800"></a>00800     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00801"></a>00801   }
<a name="l00802"></a>00802   
<a name="l00803"></a>00803   <span class="comment">// log message</span>
<a name="l00804"></a>00804   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting name for dataset '%s'"</span>, dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00805"></a>00805 
<a name="l00806"></a>00806   <span class="comment">// copy name</span>
<a name="l00807"></a>00807   cp = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l00808"></a>00808   *dsName = malloc(strlen(cp) + 1);
<a name="l00809"></a>00809   <span class="keywordflow">if</span> (*dsName == NULL) {
<a name="l00810"></a>00810     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00811"></a>00811     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00812"></a>00812   }
<a name="l00813"></a>00813   strcpy(*dsName, cp);
<a name="l00814"></a>00814   
<a name="l00815"></a>00815   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00816"></a>00816 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g94999d6245043aa639ce75d4ba8cee40"></a><!-- doxytag: member="dataset.c::fc_getDatasets" ref="g94999d6245043aa639ce75d4ba8cee40" args="(int *numDataset, FC_Dataset **datasets)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getDatasets           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numDataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a> **&nbsp;</td>
          <td class="paramname"> <em>datasets</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a list of datasets in the library. 
<p>
<b>Description:</b> <p>
Returns an array of handles for the existing datasets. The user is responsible for freeing the array of handles.<p>
<b>Modifications:</b> <ul>
<li>9/8/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numDataset</em>&nbsp;</td><td>
output - number of existing datasets </td></tr>
<tr><td valign="top"><em>datasets</em>&nbsp;</td><td>
output - array of dataset (optional) </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00333">333</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01056">_fc_getDsSlotFromID()</a>, <a class="el" href="dataset_8c-source.html#l00980">_fc_getDsTableSize()</a>, <a class="el" href="library_8c-source.html#l00326">_fc_isLibraryInit()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00336"></a>00336   {
<a name="l00337"></a>00337   <span class="keywordtype">int</span> i;
<a name="l00338"></a>00338   <span class="keywordtype">int</span> num;
<a name="l00339"></a>00339   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00340"></a>00340   
<a name="l00341"></a>00341   <span class="comment">// default return values</span>
<a name="l00342"></a>00342   <span class="keywordflow">if</span> (numDataset != NULL) 
<a name="l00343"></a>00343     *numDataset = -1;
<a name="l00344"></a>00344   <span class="keywordflow">if</span> (datasets != NULL)
<a name="l00345"></a>00345     *datasets = NULL;  
<a name="l00346"></a>00346   
<a name="l00347"></a>00347   <span class="comment">// call on uninitialized library is an error</span>
<a name="l00348"></a>00348   <span class="keywordflow">if</span> (!<a class="code" href="group__PrivateLibrary.html#gf9f265c931b08a543728abc285ac61ac" title="Check initialization state of library.">_fc_isLibraryInit</a>()) {
<a name="l00349"></a>00349     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Library has not been initialized"</span>);
<a name="l00350"></a>00350     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00351"></a>00351   }
<a name="l00352"></a>00352 
<a name="l00353"></a>00353   <span class="comment">// check input</span>
<a name="l00354"></a>00354   <span class="keywordflow">if</span> (numDataset == NULL || datasets == NULL) {
<a name="l00355"></a>00355     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00356"></a>00356     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00357"></a>00357   }
<a name="l00358"></a>00358   
<a name="l00359"></a>00359   <span class="comment">// log message</span>
<a name="l00360"></a>00360   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting datasets"</span>);
<a name="l00361"></a>00361   
<a name="l00362"></a>00362   <span class="comment">// count datasets</span>
<a name="l00363"></a>00363   num = 0;
<a name="l00364"></a>00364   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__PrivateDataset.html#gedb0fc260a27f153891bdbd15c9c0545" title="Get the size of the dataset table.">_fc_getDsTableSize</a>(); i++) {
<a name="l00365"></a>00365     dsSlot = <a class="code" href="group__PrivateDataset.html#g9e72020734d603610761daa8f78c8caa" title="Get a dataset slot based on ID.">_fc_getDsSlotFromID</a>(i);
<a name="l00366"></a>00366     <span class="keywordflow">if</span> (dsSlot) 
<a name="l00367"></a>00367       num++;
<a name="l00368"></a>00368   }
<a name="l00369"></a>00369   *numDataset = num;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371   <span class="comment">// get handles</span>
<a name="l00372"></a>00372   <span class="keywordflow">if</span> (num &gt; 0) {
<a name="l00373"></a>00373     *datasets = (<a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a>*)malloc(num*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a>));
<a name="l00374"></a>00374     <span class="keywordflow">if</span> (*datasets == NULL) {
<a name="l00375"></a>00375       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00376"></a>00376       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00377"></a>00377     }
<a name="l00378"></a>00378     num = 0;
<a name="l00379"></a>00379     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__PrivateDataset.html#gedb0fc260a27f153891bdbd15c9c0545" title="Get the size of the dataset table.">_fc_getDsTableSize</a>(); i++) {
<a name="l00380"></a>00380       dsSlot = <a class="code" href="group__PrivateDataset.html#g9e72020734d603610761daa8f78c8caa" title="Get a dataset slot based on ID.">_fc_getDsSlotFromID</a>(i);
<a name="l00381"></a>00381       <span class="keywordflow">if</span> (dsSlot) {
<a name="l00382"></a>00382         <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>((*datasets)[num], dsSlot);
<a name="l00383"></a>00383         num++;
<a name="l00384"></a>00384       }
<a name="l00385"></a>00385     }
<a name="l00386"></a>00386   }
<a name="l00387"></a>00387   
<a name="l00388"></a>00388   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00389"></a>00389 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g2bb5f64bb1d7de150e15db49620f4088"></a><!-- doxytag: member="dataset.c::fc_getNumDataset" ref="g2bb5f64bb1d7de150e15db49620f4088" args="(int *numDataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getNumDataset           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numDataset</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return number of datasets in the library. 
<p>
<b>Modifications:</b> <ul>
<li>9/28/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numDataset</em>&nbsp;</td><td>
output - number of existing datasets </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00398">398</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01056">_fc_getDsSlotFromID()</a>, <a class="el" href="dataset_8c-source.html#l00980">_fc_getDsTableSize()</a>, <a class="el" href="library_8c-source.html#l00326">_fc_isLibraryInit()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00400"></a>00400   {
<a name="l00401"></a>00401   <span class="keywordtype">int</span> i, num;
<a name="l00402"></a>00402   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00403"></a>00403   
<a name="l00404"></a>00404   <span class="comment">// default return values</span>
<a name="l00405"></a>00405   <span class="keywordflow">if</span> (numDataset != NULL) 
<a name="l00406"></a>00406     *numDataset = -1;
<a name="l00407"></a>00407   
<a name="l00408"></a>00408   <span class="comment">// call on uninitialized library is an error</span>
<a name="l00409"></a>00409   <span class="keywordflow">if</span> (!<a class="code" href="group__PrivateLibrary.html#gf9f265c931b08a543728abc285ac61ac" title="Check initialization state of library.">_fc_isLibraryInit</a>()) {
<a name="l00410"></a>00410     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Library has not been initialized"</span>);
<a name="l00411"></a>00411     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00412"></a>00412   }
<a name="l00413"></a>00413 
<a name="l00414"></a>00414   <span class="comment">// check input</span>
<a name="l00415"></a>00415   <span class="keywordflow">if</span> (numDataset == NULL) {
<a name="l00416"></a>00416     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00417"></a>00417     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00418"></a>00418   }
<a name="l00419"></a>00419   
<a name="l00420"></a>00420   <span class="comment">// log message</span>
<a name="l00421"></a>00421   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of datasets"</span>);
<a name="l00422"></a>00422   
<a name="l00423"></a>00423   <span class="comment">// count datasets</span>
<a name="l00424"></a>00424   num = 0;
<a name="l00425"></a>00425   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__PrivateDataset.html#gedb0fc260a27f153891bdbd15c9c0545" title="Get the size of the dataset table.">_fc_getDsTableSize</a>(); i++) {
<a name="l00426"></a>00426     dsSlot = <a class="code" href="group__PrivateDataset.html#g9e72020734d603610761daa8f78c8caa" title="Get a dataset slot based on ID.">_fc_getDsSlotFromID</a>(i);
<a name="l00427"></a>00427     <span class="keywordflow">if</span> (dsSlot) 
<a name="l00428"></a>00428       num++;
<a name="l00429"></a>00429   }
<a name="l00430"></a>00430   *numDataset = num;
<a name="l00431"></a>00431   
<a name="l00432"></a>00432   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00433"></a>00433 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gbff33f569a0182d65a40cf46c98dcf54"></a><!-- doxytag: member="dataset.c::fc_isDatasetValid" ref="gbff33f569a0182d65a40cf46c98dcf54" args="(FC_Dataset dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isDatasetValid           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that the handle refers to a valid dataset. 
<p>
<b>Description:</b> <p>
Returns 1 (true) if the handle is valid, and 0 (false) if it is not.<p>
<b>Modifications:</b> <ul>
<li>05/25/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00762">762</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="table_8c-source.html#l00332">_fc_isHandleValid()</a>, <a class="el" href="dataset_8c-source.html#l00088">dsTableSize</a>, <a class="el" href="base_8h-source.html#l00241">FC_Dataset::slotID</a>, and <a class="el" href="base_8h-source.html#l00242">FC_Dataset::uID</a>.</p>

<p>Referenced by <a class="el" href="fileio_8c-source.html#l00462">_fc_makeMeshFromFiles()</a>, <a class="el" href="variable_8c-source.html#l00724">fc_copyGlobalVariable()</a>, <a class="el" href="geom_8c-source.html#l01069">fc_createBoundingBoxMesh()</a>, <a class="el" href="mesh_8c-source.html#l01748">fc_createSimpleHexMesh()</a>, and <a class="el" href="mesh_8c-source.html#l01949">fc_createSphereMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00764"></a>00764   {
<a name="l00765"></a>00765   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#g7da0137a7b29468ab994bb65e96ebf99" title="Check that a handle is valid.">_fc_isHandleValid</a>(dataset.<a class="code" href="structFC__Dataset.html#2ecee4f74a35d7c94586e08268e85dd4">slotID</a>, dataset.<a class="code" href="structFC__Dataset.html#12d28f07a8b9a49824a93860c2776d90">uID</a>, <a class="code" href="group__PrivateDataset.html#g35a68d25f69b84c1fa18fdd88f028516" title="The number of allocated slots in the dataset table.">dsTableSize</a>,
<a name="l00766"></a>00766                            (<a class="code" href="struct__FC__SlotHeader.html" title="Slot Header.">_FC_SlotHeader</a>**)<a class="code" href="group__PrivateDataset.html#gc0be9174ef4f6911320a9ca8f1ff9982" title="The datasest table.">dsTable</a>);
<a name="l00767"></a>00767 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g96cd43db8b9ccbf304e79834fe2178a7"></a><!-- doxytag: member="dataset.c::fc_printDataset" ref="g96cd43db8b9ccbf304e79834fe2178a7" args="(FC_Dataset dataset, char *label)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_printDataset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>label</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print dataset meta data to stdout. 
<p>
<b>Modifications:</b> <ul>
<li>11/20/03 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>label</em>&nbsp;</td><td>
input - label to prepend dataset name with, can be NULL </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00831">831</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l03742">fc_getNumGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l03708">fc_getNumGlobalVariable()</a>, <a class="el" href="mesh_8c-source.html#l02235">fc_getNumMesh()</a>, <a class="el" href="sequence_8c-source.html#l01202">fc_getNumSequence()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00764">FC_NULL_DATASET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00057">INDENT_STR</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="fcdump_8c-source.html#l00194">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00835"></a>00835   {
<a name="l00836"></a>00836   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00837"></a>00837   <span class="keywordtype">int</span> numMesh, numSeq;
<a name="l00838"></a>00838   <span class="keywordtype">int</span> numGlbVar, numGlbSeqVar;
<a name="l00839"></a>00839   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00840"></a>00840 
<a name="l00841"></a>00841   <span class="comment">// special case: printing a null handle is not an error</span>
<a name="l00842"></a>00842   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dataset, <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>)) {
<a name="l00843"></a>00843     printf(<span class="stringliteral">"Dataset: FC_NULL_DATASET\n"</span>);
<a name="l00844"></a>00844     fflush(NULL);
<a name="l00845"></a>00845     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00846"></a>00846   }
<a name="l00847"></a>00847 
<a name="l00848"></a>00848   <span class="comment">// check input</span>
<a name="l00849"></a>00849   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l00850"></a>00850   <span class="keywordflow">if</span> (dsSlot == NULL) {
<a name="l00851"></a>00851     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00852"></a>00852     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00853"></a>00853   }
<a name="l00854"></a>00854 
<a name="l00855"></a>00855   <span class="comment">// log message</span>
<a name="l00856"></a>00856   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Printing dataset '%s'"</span>, dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00857"></a>00857 
<a name="l00858"></a>00858   <span class="comment">// print label &amp; var name</span>
<a name="l00859"></a>00859   <span class="keywordflow">if</span> (label)
<a name="l00860"></a>00860     printf(<span class="stringliteral">"%s: "</span>, label);
<a name="l00861"></a>00861   <span class="keywordflow">else</span>
<a name="l00862"></a>00862     printf(<span class="stringliteral">"Dataset: "</span>);
<a name="l00863"></a>00863   printf(<span class="stringliteral">"'%s'\n"</span>, dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00864"></a>00864   fflush(NULL);
<a name="l00865"></a>00865 
<a name="l00866"></a>00866   <span class="comment">// print meta data</span>
<a name="l00867"></a>00867   rc = <a class="code" href="group__Sequence.html#g0a34e117ec28b745d0ed26801edcd36e" title="Get the number of sequences in a dataset.">fc_getNumSequence</a>(dataset, &amp;numSeq);
<a name="l00868"></a>00868   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00869"></a>00869     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get sequences for dataset '%s'"</span>,
<a name="l00870"></a>00870                           dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00871"></a>00871     <span class="keywordflow">return</span> rc;
<a name="l00872"></a>00872   }
<a name="l00873"></a>00873   rc = <a class="code" href="group__Variable.html#g522738705c0e998327bd392d8f5d66a4" title="Get the number of global variables in a dataset.">fc_getNumGlobalVariable</a>(dataset, &amp;numGlbVar);
<a name="l00874"></a>00874   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00875"></a>00875     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get global vars for dataset '%s'"</span>,
<a name="l00876"></a>00876                           dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00877"></a>00877     <span class="keywordflow">return</span> rc;
<a name="l00878"></a>00878   }
<a name="l00879"></a>00879   rc = <a class="code" href="group__Variable.html#gef65d06d104b737698472ec2e863a495" title="Get the number of global sequence variables in a dataset.">fc_getNumGlobalSeqVariable</a>(dataset, &amp;numGlbSeqVar);
<a name="l00880"></a>00880   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00881"></a>00881     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get global seq vars for dataset '%s'"</span>,
<a name="l00882"></a>00882                           dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00883"></a>00883     <span class="keywordflow">return</span> rc;
<a name="l00884"></a>00884   }
<a name="l00885"></a>00885   rc = <a class="code" href="group__Mesh.html#g52cbaab898bdb451fa44b96ccdc9a206" title="Get the the number of meshes in a dataset.">fc_getNumMesh</a>(dataset, &amp;numMesh);
<a name="l00886"></a>00886   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00887"></a>00887     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get meshes for dataset '%s'"</span>,
<a name="l00888"></a>00888                           dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00889"></a>00889     <span class="keywordflow">return</span> rc;
<a name="l00890"></a>00890   }
<a name="l00891"></a>00891   printf(<span class="stringliteral">"%snumSeq = %d, numGlbVar = %d, numGlbSeqVar = %d, numMesh = %d\n"</span>,
<a name="l00892"></a>00892          <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, numSeq, numGlbVar, numGlbSeqVar, numMesh);
<a name="l00893"></a>00893   fflush(NULL);
<a name="l00894"></a>00894 
<a name="l00895"></a>00895   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00896"></a>00896 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8f8d73f92846fad0339460f92dc1ea43"></a><!-- doxytag: member="dataset.c::fc_releaseDataset" ref="g8f8d73f92846fad0339460f92dc1ea43" args="(FC_Dataset dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_releaseDataset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to minimize dataset's memory usage. 
<p>
<b>Description:</b> <p>
Call to try to release un-needed memory in a dataset. It the dataset has been saved to disk, the large data is released. If the dataset has not be saved to disk, all large data is saved.<p>
This function will recursively call release on it's child sequences and meshes (and they will call their children).<p>
<b>Modifications:</b> <ul>
<li>9/27/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="dataset_8c-source.html#l00585">585</a> of file <a class="el" href="dataset_8c-source.html">dataset.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l03492">fc_getGlobalSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l03432">fc_getGlobalVariables()</a>, <a class="el" href="mesh_8c-source.html#l02183">fc_getMeshes()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="sequence_8c-source.html#l01150">fc_getSequences()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00764">FC_NULL_DATASET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="mesh_8c-source.html#l02417">fc_releaseMesh()</a>, <a class="el" href="sequence_8c-source.html#l01376">fc_releaseSequence()</a>, <a class="el" href="variable_8c-source.html#l04926">fc_releaseSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04879">fc_releaseVariable()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00587"></a>00587   {
<a name="l00588"></a>00588   <span class="keywordtype">int</span> i;
<a name="l00589"></a>00589   <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> *sequences;
<a name="l00590"></a>00590   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> *meshes;
<a name="l00591"></a>00591   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *variables, **seqVariables;
<a name="l00592"></a>00592   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00593"></a>00593   <span class="keywordtype">int</span> numSequence, numMesh, numVar, numSeqVar, *numSteps;
<a name="l00594"></a>00594   
<a name="l00595"></a>00595   <span class="comment">// special case: releasing a null handle is not an error</span>
<a name="l00596"></a>00596   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dataset, <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>)) {
<a name="l00597"></a>00597     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Releasing FC_NULL_DATASET"</span>);
<a name="l00598"></a>00598     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00599"></a>00599   }
<a name="l00600"></a>00600 
<a name="l00601"></a>00601   <span class="comment">// check input</span>
<a name="l00602"></a>00602   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l00603"></a>00603   <span class="keywordflow">if</span> (dsSlot == NULL) {
<a name="l00604"></a>00604     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00605"></a>00605     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00606"></a>00606   }
<a name="l00607"></a>00607   
<a name="l00608"></a>00608   <span class="comment">// log message</span>
<a name="l00609"></a>00609   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Cleaning up dataset '%s'"</span>, dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00610"></a>00610 
<a name="l00611"></a>00611   <span class="comment">// call release on children sequences &amp; meshes &amp; global vars</span>
<a name="l00612"></a>00612   <a class="code" href="group__Sequence.html#g0ad1217500f245d78aaad5c79f960ba1" title="Get the sequences in a dataset.">fc_getSequences</a>(dataset, &amp;numSequence, &amp;sequences);
<a name="l00613"></a>00613   <span class="keywordflow">for</span> (i = 0; i &lt; numSequence; i++) 
<a name="l00614"></a>00614     <a class="code" href="group__Sequence.html#g9cf943a9d8be39fea7de788bb90e848c" title="Attempt to minimize sequence&amp;#39;s memory usage.">fc_releaseSequence</a>(sequences[i]); 
<a name="l00615"></a>00615   free(sequences);
<a name="l00616"></a>00616   <a class="code" href="group__Mesh.html#gcb092c2c909dd536c0120830890a9f36" title="Get the meshes in a dataset.">fc_getMeshes</a>(dataset, &amp;numMesh, &amp;meshes);
<a name="l00617"></a>00617   <span class="keywordflow">for</span> (i = 0; i &lt; numMesh; i++) 
<a name="l00618"></a>00618     <a class="code" href="group__Mesh.html#g0b36a706a38302af3c13f8970b1d1673" title="Attempt to minimize mesh&amp;#39;s memory usage.">fc_releaseMesh</a>(meshes[i]);
<a name="l00619"></a>00619   free(meshes);
<a name="l00620"></a>00620   <a class="code" href="group__Variable.html#g1d1333786398ddc0cd571156691272ea" title="Get the global variables in a dataset.">fc_getGlobalVariables</a>(dataset, &amp;numVar, &amp;variables);
<a name="l00621"></a>00621   <span class="keywordflow">for</span> (i = 0; i &lt; numVar; i++)
<a name="l00622"></a>00622     <a class="code" href="group__Variable.html#g4e487fa33c14f78243670167c0275736" title="Attempt to minimize variable&amp;#39;s memory usage.">fc_releaseVariable</a>(variables[i]);
<a name="l00623"></a>00623   free(variables);
<a name="l00624"></a>00624   <a class="code" href="group__Variable.html#g3085ad2d7a4be9f81eb0eccaa19ade10" title="Get the global sequence variables in a dataset.">fc_getGlobalSeqVariables</a>(dataset, &amp;numSeqVar, &amp;numSteps, &amp;seqVariables);
<a name="l00625"></a>00625   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++)
<a name="l00626"></a>00626     <a class="code" href="group__Variable.html#g85ea5aa3d396cb31211be62175f45245" title="Attempt to minimize variable&amp;#39;s memory usage.">fc_releaseSeqVariable</a>(numSteps[i], seqVariables[i]);
<a name="l00627"></a>00627   free(numSteps);
<a name="l00628"></a>00628   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++)
<a name="l00629"></a>00629     free(seqVariables[i]);
<a name="l00630"></a>00630   free(seqVariables);
<a name="l00631"></a>00631   
<a name="l00632"></a>00632   <span class="comment">// no big data</span>
<a name="l00633"></a>00633   <span class="comment">//if (dsSlot-&gt;header.committed == 1) {</span>
<a name="l00634"></a>00634   <span class="comment">//}</span>
<a name="l00635"></a>00635 
<a name="l00636"></a>00636   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00637"></a>00637 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 27 13:26:17 2008 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
