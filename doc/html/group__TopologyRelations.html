<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>FCLib: Topological Relations</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Topological Relations<br>
<small>
[<a class="el" href="group__API.html">FCLib API</a>]</small>
</h1>
<p>
<div class="dynheader">
Collaboration diagram for Topological Relations:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__TopologyRelations.gif" border="0" alt="" usemap="#group____TopologyRelations_map">
<map name="group____TopologyRelations_map">
<area shape="rect" href="group__PrivateTopologyRelations.html" title="(Private)" alt="" coords="367,5,447,32"><area shape="rect" href="group__API.html" title="Feature Characterization Library." alt="" coords="7,5,92,32"></map></td></tr></table></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Relationships between elements and vertices of the mesh. 
<p>
<b>Description:</b> <p>
The topology functions compute relationships between elements and vertices of the mesh itself, with no consideration of the actual physical coordinates of the vertices. So topology functions include ones such as compute which elements share a vertex, which vertices are part of an element, which vertices are part of an element which shares a face with a given element, etc. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateTopologyRelations.html">(Private)</a></td></tr>

<tr><td colspan="2"><br><h2>Membership relations.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TopologyRelations.html#g08edc0183a4bb0e44eb226ea75177fd8">fc_getMeshEntityChildren</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> parent_assoc, int parentID, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> child_assoc, int *numChild, int **childIDs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the entities which make up the specified entity.  <a href="#g08edc0183a4bb0e44eb226ea75177fd8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TopologyRelations.html#gba61056e95c00bf595ffd8bd7ae631fc">fc_getMeshEntityParents</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> child_assoc, int childID, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> parent_assoc, int *numParent, int **parentIDs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the entities which own the specified entity.  <a href="#gba61056e95c00bf595ffd8bd7ae631fc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TopologyRelations.html#gd652ffb3bbe366c1a882a4e0fa34c499">fc_changeMeshEntityType</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> old_assoc, int numOldID, int *oldIDs, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> new_assoc, int <a class="el" href="subsetter_8c.html#a5132f7621c6dc0ab225ba797836ebe1">doStrict</a>, int *numNewID, int **newIDs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the type of mesh entities.  <a href="#gd652ffb3bbe366c1a882a4e0fa34c499"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Neighbors.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TopologyRelations.html#g6ee1028bf4343f79d907b41cc0d108c4">fc_getMeshEntityNeighbors</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int entityID, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> assoc, int shared_dim, int *numNbr, int **nbrIDs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the neighbors of a mesh subentity.  <a href="#g6ee1028bf4343f79d907b41cc0d108c4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TopologyRelations.html#g90b1b90dfd00245a14d585f3b7f0bf6d">fc_getSubsetNeighbors</a> (<a class="el" href="structFC__Subset.html">FC_Subset</a> subset, int level, int shared_dim, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> *nbr_assoc, int *numNbr, int **nbrIDs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the neighbors of a subset.  <a href="#g90b1b90dfd00245a14d585f3b7f0bf6d"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Create connected components.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TopologyRelations.html#g45c86dc9ebd4835c3f96efdf2a6003d9">fc_segment</a> (<a class="el" href="structFC__Subset.html">FC_Subset</a> subset, int shared_dim, int *numSubset, <a class="el" href="structFC__Subset.html">FC_Subset</a> **newSubsets)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Created separate connected components.  <a href="#g45c86dc9ebd4835c3f96efdf2a6003d9"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Skins.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TopologyRelations.html#gba256da3e22e892863b569dbfcdcabf5">fc_getSubsetSkin</a> (<a class="el" href="structFC__Subset.html">FC_Subset</a> subset, <a class="el" href="structFC__Subset.html">FC_Subset</a> *skin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a skin of the subset.  <a href="#gba256da3e22e892863b569dbfcdcabf5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TopologyRelations.html#gc9cf699133b0d472adf19df31c8ce3bf">fc_getMeshSkin</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="structFC__Subset.html">FC_Subset</a> *skin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create skin of the mesh.  <a href="#gc9cf699133b0d472adf19df31c8ce3bf"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gd652ffb3bbe366c1a882a4e0fa34c499"></a><!-- doxytag: member="topo.c::fc_changeMeshEntityType" ref="gd652ffb3bbe366c1a882a4e0fa34c499" args="(FC_Mesh mesh, FC_AssociationType old_assoc, int numOldID, int *oldIDs, FC_AssociationType new_assoc, int doStrict, int *numNewID, int **newIDs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_changeMeshEntityType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>old_assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numOldID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>oldIDs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>new_assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doStrict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numNewID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>newIDs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the type of mesh entities. 
<p>
<b>Description:</b> <p>
Given an array of mesh entities, return an array of mesh entities of a different type that correspond to the same part of the mesh.<p>
If the new association type is of higher dimensionality than the old (e.g. new subset will be on element and old was on vertices), the 'doStrict' flag determines whether to keep new entities if not all of their child entities are in the old subset. 1 = be strict and only have the entity in the new subset if all of it's children are present in the old subset. 0 = be lenient and add all entities that have at least one child in the old subset.<p>
Entities cannot be of association type FC_AT_WHOLE_DATASET.<p>
<b>Modifications:</b> <ul>
<li>08/24/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>old_assoc</em>&nbsp;</td><td>
input - the input association type </td></tr>
<tr><td valign="top"><em>numOldID</em>&nbsp;</td><td>
input - the number of old entities </td></tr>
<tr><td valign="top"><em>oldIDs</em>&nbsp;</td><td>
input - array of old entities' IDs </td></tr>
<tr><td valign="top"><em>new_assoc</em>&nbsp;</td><td>
input - the output association type </td></tr>
<tr><td valign="top"><em>doStrict</em>&nbsp;</td><td>
input - flag for dropping incomplete entities </td></tr>
<tr><td valign="top"><em>numNewID</em>&nbsp;</td><td>
output - the number of new entities </td></tr>
<tr><td valign="top"><em>newIDs</em>&nbsp;</td><td>
output - array of new entities' IDs </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="topo_8c-source.html#l00369">369</a> of file <a class="el" href="topo_8c-source.html">topo.c</a>.</p>

<p>References <a class="el" href="storage_8c-source.html#l01698">_fc_deleteEntryFromSortedIntArray()</a>, <a class="el" href="storage_8c-source.html#l00441">fc_addIntArrayToSortedIntArray()</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="storage_8c-source.html#l01363">fc_convertSortedIntArrayToIntArray()</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="topo_8c-source.html#l00279">fc_getMeshEntityParents()</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="storage_8c-source.html#l00095">fc_initSortedIntArray()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00286">fc_isAssociationTypeValid()</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="storage_8h-source.html#l00099">FC_SortedIntArray::numVal</a>, and <a class="el" href="storage_8h-source.html#l00101">FC_SortedIntArray::vals</a>.</p>

<p>Referenced by <a class="el" href="geom_8c-source.html#l02256">_fc_getSubsetDiameterCore()</a>, <a class="el" href="geom_8c-source.html#l02382">_fc_getSubsetsDiameterCore()</a>, <a class="el" href="geom_8c-source.html#l05303">_fc_getSubsetsProximityCore()</a>, <a class="el" href="subset_8c-source.html#l00869">fc_copySubsetWithNewAssociation()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="geom_8c-source.html#l00956">fc_getDisplacedSubsetBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l03036">fc_getDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l05704">fc_getEntitiesWithinBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l05786">fc_getEntitiesWithinSphere()</a>, <a class="el" href="geom_8c-source.html#l00847">fc_getSubsetBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l02940">fc_getSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l03267">fc_getVariableWeightedDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l03138">fc_getVariableWeightedSubsetCentroid()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00378"></a>00378   {
<a name="l00379"></a>00379   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00380"></a>00380   <span class="keywordtype">int</span> i, j;
<a name="l00381"></a>00381   <span class="keywordtype">int</span> numOldEntity, numTempID, *tempIDs;
<a name="l00382"></a>00382   <a class="code" href="structFC__SortedIntArray.html" title="Sorted, exclusive, self-exanding int array.">FC_SortedIntArray</a> sia;
<a name="l00383"></a>00383   <span class="keywordtype">int</span> *mask;
<a name="l00384"></a>00384   
<a name="l00385"></a>00385   <span class="comment">// default return values</span>
<a name="l00386"></a>00386   <span class="keywordflow">if</span> (numNewID)
<a name="l00387"></a>00387     *numNewID = -1;
<a name="l00388"></a>00388   <span class="keywordflow">if</span> (newIDs)
<a name="l00389"></a>00389     *newIDs = NULL;
<a name="l00390"></a>00390 
<a name="l00391"></a>00391   <span class="comment">// check input</span>
<a name="l00392"></a>00392   <span class="keywordflow">if</span> (!<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(mesh) || !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(old_assoc) || 
<a name="l00393"></a>00393       old_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || old_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> ||
<a name="l00394"></a>00394       numOldID &lt; 0 || (numOldID &gt; 0 &amp;&amp; !oldIDs) || 
<a name="l00395"></a>00395       !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(new_assoc) || 
<a name="l00396"></a>00396       new_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || new_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> ||
<a name="l00397"></a>00397       (<a class="code" href="subsetter_8c.html#a5132f7621c6dc0ab225ba797836ebe1">doStrict</a> != 0 &amp;&amp; <a class="code" href="subsetter_8c.html#a5132f7621c6dc0ab225ba797836ebe1">doStrict</a> != 1) || !numNewID || !newIDs) {
<a name="l00398"></a>00398     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00399"></a>00399     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00400"></a>00400   }
<a name="l00401"></a>00401   rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(mesh, old_assoc, &amp;numOldEntity);
<a name="l00402"></a>00402   <span class="keywordflow">for</span> (i = 0; i &lt; numOldID; i++) {
<a name="l00403"></a>00403     <span class="keywordflow">if</span> (oldIDs[i] &lt; 0 || oldIDs[i] &gt; numOldEntity) {
<a name="l00404"></a>00404       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00405"></a>00405       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407   }
<a name="l00408"></a>00408 
<a name="l00409"></a>00409   <span class="comment">// log message</span>
<a name="l00410"></a>00410   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Changing mesh entity type"</span>);
<a name="l00411"></a>00411 
<a name="l00412"></a>00412   <span class="comment">// trivial case - empty old array</span>
<a name="l00413"></a>00413   <span class="keywordflow">if</span> (numOldID == 0) {
<a name="l00414"></a>00414     *numNewID = 0;
<a name="l00415"></a>00415     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00416"></a>00416   }
<a name="l00417"></a>00417   
<a name="l00418"></a>00418   <span class="comment">// get list of all new association type (lenient)</span>
<a name="l00419"></a>00419   <a class="code" href="group__SimpleDataObjects.html#g2a977bec6f7ae75297a4dcf7ec079bb7" title="Initialize a sorted int array.">fc_initSortedIntArray</a>(&amp;sia);
<a name="l00420"></a>00420   <span class="keywordflow">for</span> (i = 0; i &lt; numOldID; i++) {
<a name="l00421"></a>00421     <span class="keywordflow">if</span> (new_assoc &lt; old_assoc)
<a name="l00422"></a>00422       <a class="code" href="group__TopologyRelations.html#g08edc0183a4bb0e44eb226ea75177fd8" title="Get the entities which make up the specified entity.">fc_getMeshEntityChildren</a>(mesh, old_assoc, oldIDs[i], new_assoc,
<a name="l00423"></a>00423                                &amp;numTempID, &amp;tempIDs);
<a name="l00424"></a>00424     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_assoc &gt; old_assoc)
<a name="l00425"></a>00425       <a class="code" href="group__TopologyRelations.html#gba61056e95c00bf595ffd8bd7ae631fc" title="Get the entities which own the specified entity.">fc_getMeshEntityParents</a>(mesh, old_assoc, oldIDs[i], new_assoc,
<a name="l00426"></a>00426                               &amp;numTempID, &amp;tempIDs);
<a name="l00427"></a>00427     <span class="keywordflow">else</span> {
<a name="l00428"></a>00428       numTempID = 1;
<a name="l00429"></a>00429       tempIDs = &amp;oldIDs[i];
<a name="l00430"></a>00430     }
<a name="l00431"></a>00431     <a class="code" href="group__SimpleDataObjects.html#gf842f060b1f39a0acfc54421bbe0865a" title="Add an array of ints to a sorted int array.">fc_addIntArrayToSortedIntArray</a>(&amp;sia, numTempID, tempIDs, 0);
<a name="l00432"></a>00432     <span class="keywordflow">if</span> (new_assoc != old_assoc)
<a name="l00433"></a>00433       free(tempIDs);
<a name="l00434"></a>00434   }
<a name="l00435"></a>00435   
<a name="l00436"></a>00436   <span class="comment">// if strict, remove from members that don't have all of their children</span>
<a name="l00437"></a>00437   <span class="keywordflow">if</span> (<a class="code" href="subsetter_8c.html#a5132f7621c6dc0ab225ba797836ebe1">doStrict</a> &amp;&amp; new_assoc &gt; old_assoc) {
<a name="l00438"></a>00438     <span class="comment">// make mask for easy lookup of old members</span>
<a name="l00439"></a>00439     mask = calloc(numOldEntity, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00440"></a>00440     <span class="keywordflow">if</span> (!mask)
<a name="l00441"></a>00441       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00442"></a>00442     <span class="keywordflow">for</span> (i = 0; i &lt; numOldID; i++)
<a name="l00443"></a>00443       mask[oldIDs[i]] = 1;
<a name="l00444"></a>00444     
<a name="l00445"></a>00445     <span class="comment">// walk sia and remove members</span>
<a name="l00446"></a>00446     j = 0;
<a name="l00447"></a>00447     <span class="keywordflow">while</span> (j &lt; sia.<a class="code" href="structFC__SortedIntArray.html#41c02abac0e388a077675863f16c325f">numVal</a>) {
<a name="l00448"></a>00448       <span class="keywordtype">int</span> notFound = 0;
<a name="l00449"></a>00449       <a class="code" href="group__TopologyRelations.html#g08edc0183a4bb0e44eb226ea75177fd8" title="Get the entities which make up the specified entity.">fc_getMeshEntityChildren</a>(mesh, new_assoc, sia.<a class="code" href="structFC__SortedIntArray.html#fa5b781371ed7570eeecaac539f10426">vals</a>[j], old_assoc,
<a name="l00450"></a>00450                                &amp;numTempID, &amp;tempIDs);
<a name="l00451"></a>00451       <span class="keywordflow">for</span> (i = 0; i &lt; numTempID; i++) {
<a name="l00452"></a>00452         <span class="keywordflow">if</span> (mask[tempIDs[i]] == 0) {
<a name="l00453"></a>00453           notFound = 1;
<a name="l00454"></a>00454           <span class="keywordflow">break</span>;
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456       }
<a name="l00457"></a>00457       free(tempIDs);
<a name="l00458"></a>00458       <span class="keywordflow">if</span> (notFound) { <span class="comment">// remove this node</span>
<a name="l00459"></a>00459      <a class="code" href="group__PrivateSimpleDataObjects.html#gf6d4e209d3c0693b211a89889556b75f" title="Remove an entry at a specified location from a sorted int array.">_fc_deleteEntryFromSortedIntArray</a>(&amp;sia, j);
<a name="l00460"></a>00460       }
<a name="l00461"></a>00461       <span class="keywordflow">else</span> {
<a name="l00462"></a>00462      j++;
<a name="l00463"></a>00463       }
<a name="l00464"></a>00464     }
<a name="l00465"></a>00465     
<a name="l00466"></a>00466     free(mask);
<a name="l00467"></a>00467   }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469   <span class="comment">// convert sia to array</span>
<a name="l00470"></a>00470   <span class="keywordflow">return</span> <a class="code" href="group__SimpleDataObjects.html#g964b6f06b28b9587ae2fbd18fe2b7e9e" title="Convert sorted int array to array.">fc_convertSortedIntArrayToIntArray</a>(&amp;sia, numNewID, newIDs);
<a name="l00471"></a>00471 }     
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g08edc0183a4bb0e44eb226ea75177fd8"></a><!-- doxytag: member="topo.c::fc_getMeshEntityChildren" ref="g08edc0183a4bb0e44eb226ea75177fd8" args="(FC_Mesh mesh, FC_AssociationType parent_assoc, int parentID, FC_AssociationType child_assoc, int *numChild, int **childIDs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshEntityChildren           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>parent_assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>parentID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>child_assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numChild</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>childIDs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the entities which make up the specified entity. 
<p>
<b>Description:</b> <p>
Given an entity on a mesh (e.g. vertex, element, etc) find the specified type of children of that entity. The specified child has to have a topological dimensionality less than the parent entity. (E.g., vertices and edges can be children of a face, but elements cannot.)<p>
Entities cannot be of association FC_AT_WHOLE_DATASET<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000098">Todo:</a></b></dt><dd>Make sure this only calls the edge/face stuff when it's needed Clean up!</dd></dl>
<b>Modifications:</b> <ul>
<li>07/16/04 WSK Created.</li><li>11/01/2005 WSD. Fixed up so lazy building of edges &amp; faces doesn't get called where not needed. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>parent_assoc</em>&nbsp;</td><td>
input - the parent's entity type </td></tr>
<tr><td valign="top"><em>parentID</em>&nbsp;</td><td>
input - the parent's ID (e.g. element ID, etc) </td></tr>
<tr><td valign="top"><em>child_assoc</em>&nbsp;</td><td>
input - the type of mesh entities to return (must have topo dimensionality &lt; parent_assoc. </td></tr>
<tr><td valign="top"><em>numChild</em>&nbsp;</td><td>
output - the number of children </td></tr>
<tr><td valign="top"><em>childIDs</em>&nbsp;</td><td>
output - array of child IDs </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="topo_8c-source.html#l00116">116</a> of file <a class="el" href="topo_8c-source.html">topo.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l04509">_fc_getMeshElementParentsOfFacesPtr()</a>, <a class="el" href="storage_8c-source.html#l00397">fc_addIntToSortedIntArray()</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="storage_8c-source.html#l01363">fc_convertSortedIntArrayToIntArray()</a>, <a class="el" href="base_8c-source.html#l00586">fc_getElementTypeNumEdge()</a>, <a class="el" href="base_8c-source.html#l00662">fc_getElementTypeNumEntity()</a>, <a class="el" href="mesh_8c-source.html#l03571">fc_getMeshEdgeConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03762">fc_getMeshElementConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03821">fc_getMeshElementToEdgeConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03880">fc_getMeshElementToFaceConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03061">fc_getMeshElementType()</a>, <a class="el" href="mesh_8c-source.html#l03371">fc_getMeshEntityElementType()</a>, <a class="el" href="mesh_8c-source.html#l03691">fc_getMeshFaceConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="storage_8c-source.html#l00095">fc_initSortedIntArray()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00286">fc_isAssociationTypeValid()</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="shape_8c-source.html#l00593">_fc_buildFaceInfoListFromShape()</a>, <a class="el" href="shape_8c-source.html#l00402">_fc_buildFaceInfoListFromSubset()</a>, <a class="el" href="geom_8c-source.html#l07629">_fc_doesElementContainPoint()</a>, <a class="el" href="topo_8c-source.html#l00369">fc_changeMeshEntityType()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="shape_8c-source.html#l03873">fc_getPlanarSideNormal()</a>, <a class="el" href="shape_8c-source.html#l04008">fc_getSideNormalMeanSdev()</a>, and <a class="el" href="topo_8c-source.html#l01645">fc_getSubsetSkin()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00125"></a>00125   {
<a name="l00126"></a>00126   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00127"></a>00127   <span class="keywordtype">int</span> i, j, k;
<a name="l00128"></a>00128   <span class="keywordtype">int</span> numParent;
<a name="l00129"></a>00129   <a class="code" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a" title="Possible element types.">FC_ElementType</a> elemType;
<a name="l00130"></a>00130   <span class="keywordtype">int</span> maxNumChildPerParent, *parentToChildConns;
<a name="l00131"></a>00131   
<a name="l00132"></a>00132   <span class="comment">// default return values</span>
<a name="l00133"></a>00133   <span class="keywordflow">if</span> (numChild)
<a name="l00134"></a>00134     *numChild = -1;
<a name="l00135"></a>00135   <span class="keywordflow">if</span> (childIDs)
<a name="l00136"></a>00136     *childIDs = NULL;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138   <span class="comment">// check input</span>
<a name="l00139"></a>00139   <span class="keywordflow">if</span> (!<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(mesh) || !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(parent_assoc) || 
<a name="l00140"></a>00140       parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> ||
<a name="l00141"></a>00141       parentID &lt; 0 || !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(child_assoc) || 
<a name="l00142"></a>00142       child_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || parent_assoc &lt;= child_assoc || 
<a name="l00143"></a>00143       !numChild || !childIDs) {
<a name="l00144"></a>00144     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00145"></a>00145     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00146"></a>00146   }
<a name="l00147"></a>00147   rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(mesh, parent_assoc, &amp;numParent);
<a name="l00148"></a>00148   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a> || parentID &gt;= numParent) {
<a name="l00149"></a>00149         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>)); 
<a name="l00150"></a>00150     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00151"></a>00151   }
<a name="l00152"></a>00152 
<a name="l00153"></a>00153   <span class="comment">// log message</span>
<a name="l00154"></a>00154   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting entities which make up the specified entity."</span>);
<a name="l00155"></a>00155   
<a name="l00156"></a>00156   <span class="comment">// special case 1: if whole, return list that is all of the child entities</span>
<a name="l00157"></a>00157   <span class="keywordflow">if</span> (parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>) {
<a name="l00158"></a>00158     rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(mesh, child_assoc, numChild);
<a name="l00159"></a>00159     <span class="keywordflow">if</span> (*numChild &gt; 0) {
<a name="l00160"></a>00160       *childIDs = (<span class="keywordtype">int</span>*)malloc(*numChild*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00161"></a>00161       <span class="keywordflow">if</span> (*childIDs == NULL) {
<a name="l00162"></a>00162         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00163"></a>00163         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00164"></a>00164       }
<a name="l00165"></a>00165       <span class="keywordflow">for</span> (i = 0; i &lt; *numChild; i++)
<a name="l00166"></a>00166         (*childIDs)[i] = i;
<a name="l00167"></a>00167     }
<a name="l00168"></a>00168     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00169"></a>00169   }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="comment">// special case 2: face-&gt;edge conns don't exist on the mesh, so do</span>
<a name="l00172"></a>00172   <span class="comment">// a local calc</span>
<a name="l00173"></a>00173   <span class="keywordflow">if</span> (child_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a> &amp;&amp; parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>) {
<a name="l00174"></a>00174     <span class="keywordtype">int</span> elemID, edgeID, found;
<a name="l00175"></a>00175     <span class="keywordtype">int</span> numEdgePerElem, *edgeConns, *elemToEdgeConns;
<a name="l00176"></a>00176     <span class="keywordtype">int</span> *numVertPerFace, maxNumVertPerFace, *faceConns;
<a name="l00177"></a>00177     <span class="keywordtype">int</span> *numElemPerFace, **elemParentsPerFace;
<a name="l00178"></a>00178     <a class="code" href="structFC__SortedIntArray.html" title="Sorted, exclusive, self-exanding int array.">FC_SortedIntArray</a> sia;
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="comment">// setup</span>
<a name="l00181"></a>00181     rc = <a class="code" href="group__Mesh.html#g1c1684ecf98e82a0ab18f7f9dbdddfc5" title="Returns type of elements in the mesh.">fc_getMeshElementType</a>(mesh, &amp;elemType);
<a name="l00182"></a>00182     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00183"></a>00183       <span class="keywordflow">return</span> rc; 
<a name="l00184"></a>00184     rc = <a class="code" href="group__Mesh.html#gcae096882dec5f984503869f5f64acfc" title="Return edge connectivities.">fc_getMeshEdgeConnsPtr</a>(mesh, &amp;edgeConns);
<a name="l00185"></a>00185     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00186"></a>00186       <span class="keywordflow">return</span> rc; 
<a name="l00187"></a>00187     rc = <a class="code" href="group__Mesh.html#g8e318f4b17572413004acf14b18deb2b" title="Return face connectivities.">fc_getMeshFaceConnsPtr</a>(mesh, &amp;numVertPerFace, &amp;maxNumVertPerFace,
<a name="l00188"></a>00188                                 &amp;faceConns);
<a name="l00189"></a>00189     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00190"></a>00190       <span class="keywordflow">return</span> rc; 
<a name="l00191"></a>00191     rc = <a class="code" href="group__Mesh.html#gcc3f8cb48b0c2673d9e0ce0d4eba2878" title="Return element to edge connectivities.">fc_getMeshElementToEdgeConnsPtr</a>(mesh, &amp;elemToEdgeConns);
<a name="l00192"></a>00192     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00193"></a>00193       <span class="keywordflow">return</span> rc; 
<a name="l00194"></a>00194     rc = <a class="code" href="group__PrivateMesh.html#g540b5f94172bea7ef0e2fcf41bf42425" title="Return parent elements of the faces.">_fc_getMeshElementParentsOfFacesPtr</a>(mesh, &amp;numElemPerFace,
<a name="l00195"></a>00195                                           &amp;elemParentsPerFace);
<a name="l00196"></a>00196     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00197"></a>00197       <span class="keywordflow">return</span> rc;
<a name="l00198"></a>00198     numEdgePerElem = <a class="code" href="group__DataTypes.html#gf2ce1082614c4a5cd5481c00c89a7e67" title="Returns number of edges in a type of element.">fc_getElementTypeNumEdge</a>(elemType);
<a name="l00199"></a>00199 
<a name="l00200"></a>00200     <span class="comment">// Get an element that owns the face</span>
<a name="l00201"></a>00201     elemID = elemParentsPerFace[parentID][0];
<a name="l00202"></a>00202     <span class="comment">// For each edge in element, if edge's verts are all in the face, add!</span>
<a name="l00203"></a>00203     <a class="code" href="group__SimpleDataObjects.html#g2a977bec6f7ae75297a4dcf7ec079bb7" title="Initialize a sorted int array.">fc_initSortedIntArray</a>(&amp;sia);
<a name="l00204"></a>00204     <span class="keywordflow">for</span> (i = 0; i &lt; numEdgePerElem; i++) {
<a name="l00205"></a>00205       edgeID = elemToEdgeConns[elemID*numEdgePerElem+i];
<a name="l00206"></a>00206       found = 0;
<a name="l00207"></a>00207       <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++) 
<a name="l00208"></a>00208         <span class="keywordflow">for</span> (k = 0; k &lt; numVertPerFace[parentID]; k++)
<a name="l00209"></a>00209           <span class="keywordflow">if</span> (edgeConns[edgeID*2+j] == 
<a name="l00210"></a>00210               faceConns[parentID*maxNumVertPerFace+k]) 
<a name="l00211"></a>00211             found++;
<a name="l00212"></a>00212       <span class="keywordflow">if</span> (found == 2) { <span class="comment">// both verts matched!</span>
<a name="l00213"></a>00213         <span class="keywordtype">int</span> ret = <a class="code" href="group__SimpleDataObjects.html#gb73f9478dbfb63fadf5e93f8bdfe8c42" title="Add an int to a sorted int array.">fc_addIntToSortedIntArray</a>(&amp;sia, edgeID);
<a name="l00214"></a>00214         <span class="keywordflow">if</span> (ret &lt; 0) {
<a name="l00215"></a>00215           <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to add edge to sia"</span>);
<a name="l00216"></a>00216           <span class="keywordflow">return</span> ret;
<a name="l00217"></a>00217         }
<a name="l00218"></a>00218       }
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="comment">// all done</span>
<a name="l00222"></a>00222     rc = <a class="code" href="group__SimpleDataObjects.html#g964b6f06b28b9587ae2fbd18fe2b7e9e" title="Convert sorted int array to array.">fc_convertSortedIntArrayToIntArray</a>(&amp;sia, numChild, childIDs);
<a name="l00223"></a>00223     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00224"></a>00224       <span class="keywordflow">return</span> rc;
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00227"></a>00227   }
<a name="l00228"></a>00228 
<a name="l00229"></a>00229   <span class="comment">// Get numChild &amp; ids</span>
<a name="l00230"></a>00230   rc = <a class="code" href="group__Mesh.html#gfc269313fe6595610ac3eb54cef327c7" title="Get the element type of the mesh entity.">fc_getMeshEntityElementType</a>(mesh, parent_assoc, parentID, &amp;elemType);
<a name="l00231"></a>00231   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00232"></a>00232     <span class="keywordflow">return</span> rc;
<a name="l00233"></a>00233   *numChild = <a class="code" href="group__DataTypes.html#g4d91fcd45e4fa5dc1a744896841b426b" title="Returns number of the entity type in a type of element.">fc_getElementTypeNumEntity</a>(elemType, child_assoc);
<a name="l00234"></a>00234   <span class="keywordflow">if</span> (*numChild &gt; 0) {
<a name="l00235"></a>00235     *childIDs = (<span class="keywordtype">int</span>*)malloc(*numChild*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00236"></a>00236     <span class="keywordflow">if</span> (*childIDs == NULL) {
<a name="l00237"></a>00237       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00238"></a>00238       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240     maxNumChildPerParent = *numChild;
<a name="l00241"></a>00241     <span class="keywordflow">if</span> (child_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a> &amp;&amp; parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>)
<a name="l00242"></a>00242       rc = <a class="code" href="group__Mesh.html#gcae096882dec5f984503869f5f64acfc" title="Return edge connectivities.">fc_getMeshEdgeConnsPtr</a>(mesh, &amp;parentToChildConns);
<a name="l00243"></a>00243     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (child_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a> &amp;&amp; parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>)
<a name="l00244"></a>00244       rc = <a class="code" href="group__Mesh.html#g8e318f4b17572413004acf14b18deb2b" title="Return face connectivities.">fc_getMeshFaceConnsPtr</a>(mesh, NULL, &amp;maxNumChildPerParent,
<a name="l00245"></a>00245                                   &amp;parentToChildConns);
<a name="l00246"></a>00246     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (child_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a> &amp;&amp; parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>) 
<a name="l00247"></a>00247       rc = <a class="code" href="group__Mesh.html#g19906bcae562d226991740da142000c0" title="Return element to vertex connectivities for the mesh.">fc_getMeshElementConnsPtr</a>(mesh, &amp;parentToChildConns);
<a name="l00248"></a>00248     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (child_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a> &amp;&amp; parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>) 
<a name="l00249"></a>00249       rc = <a class="code" href="group__Mesh.html#gcc3f8cb48b0c2673d9e0ce0d4eba2878" title="Return element to edge connectivities.">fc_getMeshElementToEdgeConnsPtr</a>(mesh, &amp;parentToChildConns);
<a name="l00250"></a>00250     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (child_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a> &amp;&amp; parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>) 
<a name="l00251"></a>00251       rc = <a class="code" href="group__Mesh.html#g7f17910148b4237e84ca374845688cfc" title="Return element to face connectivities.">fc_getMeshElementToFaceConnsPtr</a>(mesh, &amp;parentToChildConns);
<a name="l00252"></a>00252     memcpy(*childIDs, &amp;parentToChildConns[parentID*maxNumChildPerParent], 
<a name="l00253"></a>00253            *numChild*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00254"></a>00254   }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00257"></a>00257 }     
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g6ee1028bf4343f79d907b41cc0d108c4"></a><!-- doxytag: member="topo.c::fc_getMeshEntityNeighbors" ref="g6ee1028bf4343f79d907b41cc0d108c4" args="(FC_Mesh mesh, int entityID, FC_AssociationType assoc, int shared_dim, int *numNbr, int **nbrIDs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshEntityNeighbors           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>entityID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>shared_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numNbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>nbrIDs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the neighbors of a mesh subentity. 
<p>
<b>Description:</b> <p>
Given an entity on a mesh (e.g. vertex, element, etc) find the neighbors of that entity. The returned entities will be of the same type as the initial entity. The order indicates the depth of the neighbors, i.e. an order of 1 will return the immediate neighbors of the entity, an order of 2 will return the immediate neighbors and also the neighbors of the neighbors, etc.<p>
The shared_dim parameter indicates the minimum dimensionality of the overlap (or shared parts) neighbors. In general, the shared_dim has to be less than the dimensionality of the entity and/or equal to 0 (vertices and point elements are special cases where shared_dim = dim = 0). Also, as the shared_dim increases, the condition for being neighbors becomes more stringent. For example, in a hex mesh, you can request element neighbors that share a face (share_dim = 2) or element neighbors that share an edge (share_dim = 1, this includes the face neighbors too) or element neighbors that share a vertex (share_dim = 0, this includes face and edge neighbors).<p>
Entities cannot be of association type FC_AT_WHOLE_DATASET.<p>
<b>Modifications:</b> <ul>
<li>07/09/04 WSK Created to replace all of the entity specific neighbor routines like fc_getElementVertexNeighbors() with a single general purpose routine. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>entityID</em>&nbsp;</td><td>
input - mesh entity ID (e.g. vertex ID, etc) </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
input - the type of mesh entity </td></tr>
<tr><td valign="top"><em>shared_dim</em>&nbsp;</td><td>
input - the minimum dimensionality of shared part of neighbors </td></tr>
<tr><td valign="top"><em>numNbr</em>&nbsp;</td><td>
output - the number of neighbors </td></tr>
<tr><td valign="top"><em>nbrIDs</em>&nbsp;</td><td>
output - array of neighbor IDs </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="topo_8c-source.html#l00510">510</a> of file <a class="el" href="topo_8c-source.html">topo.c</a>.</p>

<p>References <a class="el" href="topo_8c-source.html#l01072">_fc_getEdgeNeighbors()</a>, <a class="el" href="topo_8c-source.html#l01259">_fc_getElementNeighbors()</a>, <a class="el" href="topo_8c-source.html#l01149">_fc_getFaceNeighbors()</a>, <a class="el" href="topo_8c-source.html#l01007">_fc_getVertexNeighbors()</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00286">fc_isAssociationTypeValid()</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="shape_8c-source.html#l00893">_fc_createShapePartsFromFaceInfoList()</a>, <a class="el" href="topo_8c-source.html#l01341">_fc_growNeighborList()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00342">fc_makeSpanningTree()</a>, <a class="el" href="topo_8c-source.html#l01432">fc_segment()</a>, and <a class="el" href="ex3__createCharactrztn_8c-source.html#l00081">myCharacterizationFunkyAve()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00518"></a>00518   {
<a name="l00519"></a>00519   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00520"></a>00520   <span class="keywordtype">int</span> numEntity;
<a name="l00521"></a>00521   
<a name="l00522"></a>00522   <span class="comment">// default return values</span>
<a name="l00523"></a>00523   <span class="keywordflow">if</span> (numNbr)
<a name="l00524"></a>00524     *numNbr = -1;
<a name="l00525"></a>00525   <span class="keywordflow">if</span> (nbrIDs)
<a name="l00526"></a>00526     *nbrIDs = NULL;
<a name="l00527"></a>00527 
<a name="l00528"></a>00528   <span class="comment">// check input</span>
<a name="l00529"></a>00529   <span class="keywordflow">if</span> (!<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(mesh) || entityID &lt; 0 ||
<a name="l00530"></a>00530       !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(assoc) || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || 
<a name="l00531"></a>00531       assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> ||
<a name="l00532"></a>00532       shared_dim &lt; 0 || shared_dim &gt; 2 || !numNbr || !nbrIDs) {
<a name="l00533"></a>00533     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00534"></a>00534     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00535"></a>00535   }
<a name="l00536"></a>00536   rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(mesh, assoc, &amp;numEntity);
<a name="l00537"></a>00537   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a> || entityID &gt;= numEntity) {
<a name="l00538"></a>00538     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00539"></a>00539     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00540"></a>00540   }
<a name="l00541"></a>00541 
<a name="l00542"></a>00542   <span class="comment">// log message</span>
<a name="l00543"></a>00543   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting the neighbors of a mesh subentity."</span>);
<a name="l00544"></a>00544 
<a name="l00545"></a>00545   <span class="comment">// fill up list of neighbors by calling recursive functions</span>
<a name="l00546"></a>00546   <span class="keywordflow">switch</span> (assoc) {
<a name="l00547"></a>00547   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>:
<a name="l00548"></a>00548     <span class="keywordflow">if</span> (shared_dim != 0)
<a name="l00549"></a>00549       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00550"></a>00550     <span class="keywordflow">else</span>
<a name="l00551"></a>00551       <span class="keywordflow">return</span> <a class="code" href="group__PrivateTopologyRelations.html#gf2e4a6939b02d61548079bc0d164cdeb" title="Get vertices which are neighbors of this vertex.">_fc_getVertexNeighbors</a>(mesh, entityID, numNbr, nbrIDs);
<a name="l00552"></a>00552   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>:
<a name="l00553"></a>00553     <span class="keywordflow">if</span> (shared_dim != 0)
<a name="l00554"></a>00554       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00555"></a>00555     <span class="keywordflow">else</span>
<a name="l00556"></a>00556       <span class="keywordflow">return</span> <a class="code" href="group__PrivateTopologyRelations.html#ga97907c6e81b24c2e3e50a9546ae3171" title="Get edges which are neighbors of this edge.">_fc_getEdgeNeighbors</a>(mesh, entityID, numNbr, nbrIDs);
<a name="l00557"></a>00557   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:
<a name="l00558"></a>00558     <span class="keywordflow">return</span> <a class="code" href="group__PrivateTopologyRelations.html#g1343dbb569834571a9aa6f8c77007d68" title="Get faces which are neighbors of this faces.">_fc_getFaceNeighbors</a>(mesh, entityID, shared_dim, numNbr, nbrIDs);
<a name="l00559"></a>00559   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>:
<a name="l00560"></a>00560     <span class="keywordflow">return</span> <a class="code" href="group__PrivateTopologyRelations.html#g5dc5005142d498e07a21953ec8c475e8" title="Get the neighbors of an element.">_fc_getElementNeighbors</a>(mesh, entityID, shared_dim, numNbr, nbrIDs);
<a name="l00561"></a>00561   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>:
<a name="l00562"></a>00562     *numNbr = 0;
<a name="l00563"></a>00563     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00564"></a>00564   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>: <span class="comment">// shouldn't reach here</span>
<a name="l00565"></a>00565     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00566"></a>00566   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a>:
<a name="l00567"></a>00567     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Unknown association type"</span>);
<a name="l00568"></a>00568     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00569"></a>00569   }
<a name="l00570"></a>00570   
<a name="l00571"></a>00571   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>; <span class="comment">// should never get here </span>
<a name="l00572"></a>00572 }     
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gba61056e95c00bf595ffd8bd7ae631fc"></a><!-- doxytag: member="topo.c::fc_getMeshEntityParents" ref="gba61056e95c00bf595ffd8bd7ae631fc" args="(FC_Mesh mesh, FC_AssociationType child_assoc, int childID, FC_AssociationType parent_assoc, int *numParent, int **parentIDs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshEntityParents           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>child_assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>childID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>parent_assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>parentIDs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the entities which own the specified entity. 
<p>
<b>Description:</b> <p>
Given an entity on a mesh (e.g. vertex, element, etc) find the specified type of parents of that entity. The specified parent has to have a topological dimensionality greater than the child entity. (E.g, faces and elements can be parents of an edge, but vertices cannot.)<p>
This type of information is sometimes called adjacencies, e.g. get the elements adjacent to the given vertex.<p>
Entities cannot be of association type FC_AT_WHOLE_DATASET.<p>
<b>Modifications:</b> <ul>
<li>07/09/04 WSK Created to replace fc_getElementIDsWithVertex with a more general purpose routine. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>child_assoc</em>&nbsp;</td><td>
input - the child's entity type </td></tr>
<tr><td valign="top"><em>childID</em>&nbsp;</td><td>
input - the child's ID (e.g. vertex ID, etc) </td></tr>
<tr><td valign="top"><em>parent_assoc</em>&nbsp;</td><td>
input - the type of mesh entities to return (must have topo dimensionality &gt; child_assoc. </td></tr>
<tr><td valign="top"><em>numParent</em>&nbsp;</td><td>
output - the number of parents </td></tr>
<tr><td valign="top"><em>parentIDs</em>&nbsp;</td><td>
output - array of parent IDs </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="topo_8c-source.html#l00279">279</a> of file <a class="el" href="topo_8c-source.html">topo.c</a>.</p>

<p>References <a class="el" href="topo_8c-source.html#l00798">_fc_getEdgeParents()</a>, <a class="el" href="topo_8c-source.html#l00922">_fc_getFaceParents()</a>, <a class="el" href="topo_8c-source.html#l00696">_fc_getVertexParents()</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00286">fc_isAssociationTypeValid()</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="topo_8c-source.html#l00369">fc_changeMeshEntityType()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, and <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00288"></a>00288   {
<a name="l00289"></a>00289   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00290"></a>00290   <span class="keywordtype">int</span> numEntity;
<a name="l00291"></a>00291   
<a name="l00292"></a>00292   <span class="comment">// default return values</span>
<a name="l00293"></a>00293   <span class="keywordflow">if</span> (numParent)
<a name="l00294"></a>00294     *numParent = -1;
<a name="l00295"></a>00295   <span class="keywordflow">if</span> (parentIDs)
<a name="l00296"></a>00296     *parentIDs = NULL;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298   <span class="comment">// check input</span>
<a name="l00299"></a>00299   <span class="keywordflow">if</span> (!<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(mesh) || !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(child_assoc) ||
<a name="l00300"></a>00300       child_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || childID &lt; 0 || 
<a name="l00301"></a>00301       !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(parent_assoc) || parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a>
<a name="l00302"></a>00302       || parent_assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> || parent_assoc &lt;= child_assoc ||
<a name="l00303"></a>00303       !numParent || !parentIDs) {
<a name="l00304"></a>00304     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00305"></a>00305     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00306"></a>00306   }
<a name="l00307"></a>00307   rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(mesh, child_assoc, &amp;numEntity);
<a name="l00308"></a>00308   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a> || childID &gt;= numEntity) {
<a name="l00309"></a>00309     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00310"></a>00310     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00311"></a>00311   }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313   <span class="comment">// log message</span>
<a name="l00314"></a>00314   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting the entities which own the specified entity."</span>);
<a name="l00315"></a>00315 
<a name="l00316"></a>00316   <span class="comment">// call a helper</span>
<a name="l00317"></a>00317   <span class="keywordflow">switch</span>(child_assoc) {
<a name="l00318"></a>00318   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>: 
<a name="l00319"></a>00319     <span class="keywordflow">return</span> <a class="code" href="group__PrivateTopologyRelations.html#g37ea1b7c3c6f17d0497acf53b978f798" title="Get mesh entities which contain the given vertex.">_fc_getVertexParents</a>(mesh, childID, parent_assoc, numParent, 
<a name="l00320"></a>00320                                 parentIDs);
<a name="l00321"></a>00321   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>:
<a name="l00322"></a>00322     <span class="keywordflow">return</span> <a class="code" href="group__PrivateTopologyRelations.html#g05b0c3e39b4592754ab154589c743098" title="Get mesh entities which contain the given edge.">_fc_getEdgeParents</a>(mesh, childID, parent_assoc, numParent, 
<a name="l00323"></a>00323                               parentIDs);
<a name="l00324"></a>00324   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:   
<a name="l00325"></a>00325     <span class="keywordflow">return</span> <a class="code" href="group__PrivateTopologyRelations.html#ga3c8e49eccdc11c03dab603207b2762d" title="Get mesh entities which contain the given face.">_fc_getFaceParents</a>(mesh, childID, parent_assoc, numParent, 
<a name="l00326"></a>00326                               parentIDs);
<a name="l00327"></a>00327   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>:
<a name="l00328"></a>00328     *numParent = 1;
<a name="l00329"></a>00329     *parentIDs = (<span class="keywordtype">int</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00330"></a>00330     <span class="keywordflow">if</span> (*parentIDs == NULL) {
<a name="l00331"></a>00331       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00332"></a>00332       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00333"></a>00333     }
<a name="l00334"></a>00334     (*parentIDs)[0] = 0;
<a name="l00335"></a>00335     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00336"></a>00336   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>: <span class="comment">// shouldn't reach here</span>
<a name="l00337"></a>00337   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>: <span class="comment">// shouldn't reach here</span>
<a name="l00338"></a>00338   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a>: <span class="comment">// shouldn't reach here</span>
<a name="l00339"></a>00339     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Input Error: Wrong association type"</span>);
<a name="l00340"></a>00340     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00341"></a>00341   }
<a name="l00342"></a>00342 
<a name="l00343"></a>00343   <span class="comment">// should never get here</span>
<a name="l00344"></a>00344   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00345"></a>00345 }     
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gc9cf699133b0d472adf19df31c8ce3bf"></a><!-- doxytag: member="topo.c::fc_getMeshSkin" ref="gc9cf699133b0d472adf19df31c8ce3bf" args="(FC_Mesh mesh, FC_Subset *skin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshSkin           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a> *&nbsp;</td>
          <td class="paramname"> <em>skin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create skin of the mesh. 
<p>
<b>Description:</b> <p>
This function creates a subset which contains the "skin" of the mesh. The topo dimensionality of the skin will always be 1 less than the topo dimensionality of the mesh's elements (e.g. the skin of a hex mesh will be faces, and the skin of an edge mesh will be verticies).<p>
This routine is similar to fc_getSubsetSkin.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000101">Todo:</a></b></dt><dd>?Let user name skin.</dd></dl>
<b>Modifications:</b> <ul>
<li>09/03/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>skin</em>&nbsp;</td><td>
output - subset with skin of the mesh </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="topo_8c-source.html#l01792">1792</a> of file <a class="el" href="topo_8c-source.html">topo.c</a>.</p>

<p>References <a class="el" href="subset_8c-source.html#l02008">fc_addMemberToSubset()</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="subset_8c-source.html#l00135">fc_createSubset()</a>, <a class="el" href="subset_8c-source.html#l02482">fc_deleteSubset()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="topo_8c-source.html#l01645">fc_getSubsetSkin()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, <a class="el" href="base_8c-source.html#l00784">FC_NULL_SUBSET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="elemdeath_8c-source.html#l00262">fc_getDecayedSkin()</a>, <a class="el" href="elemdeath_8c-source.html#l00130">fc_getExposedSkin()</a>, and <a class="el" href="elemdeath__ex1_8c-source.html#l00147">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01795"></a>01795   {
<a name="l01796"></a>01796   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01797"></a>01797   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a> temp_subset;
<a name="l01798"></a>01798 
<a name="l01799"></a>01799   <span class="comment">//---default return values</span>
<a name="l01800"></a>01800   <span class="keywordflow">if</span> (skin)
<a name="l01801"></a>01801     *skin = <a class="code" href="group__Handles.html#gd007f5eb6e7e7f2febca17b53420fd15" title="Null (default) subset handle.">FC_NULL_SUBSET</a>;
<a name="l01802"></a>01802 
<a name="l01803"></a>01803   <span class="comment">// check input</span>
<a name="l01804"></a>01804   <span class="keywordflow">if</span> (!<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(mesh) || !skin) {
<a name="l01805"></a>01805     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01806"></a>01806     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01807"></a>01807   }
<a name="l01808"></a>01808 
<a name="l01809"></a>01809   <span class="comment">// log message</span>
<a name="l01810"></a>01810   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new subset which is the skin of the mesh"</span>);
<a name="l01811"></a>01811 
<a name="l01812"></a>01812   <span class="comment">// create a temp subset which is the whole mesh &amp; call fc_getSubsetSkin()</span>
<a name="l01813"></a>01813   rc = <a class="code" href="group__Subset.html#gccbfd6035cd0b949a4fac98888348e88" title="Create a new subset on a specified mesh.">fc_createSubset</a>(mesh, <span class="stringliteral">"fc_getMeshSkin temp subset"</span>, <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>,
<a name="l01814"></a>01814                        &amp;temp_subset);
<a name="l01815"></a>01815   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01816"></a>01816     <a class="code" href="group__Subset.html#g550d0636e4f35c29d6dbc427b3165a24" title="Delete a subset.">fc_deleteSubset</a>(temp_subset);
<a name="l01817"></a>01817     <span class="keywordflow">return</span> rc;
<a name="l01818"></a>01818   }
<a name="l01819"></a>01819   <a class="code" href="group__Subset.html#g5ed37876a6f144458716efed8cb78dbe" title="Add member to a subset.">fc_addMemberToSubset</a>(temp_subset, 0);
<a name="l01820"></a>01820 
<a name="l01821"></a>01821   <span class="comment">// do it</span>
<a name="l01822"></a>01822   rc = <a class="code" href="group__TopologyRelations.html#gba256da3e22e892863b569dbfcdcabf5" title="Create a skin of the subset.">fc_getSubsetSkin</a>(temp_subset, skin);
<a name="l01823"></a>01823   <a class="code" href="group__Subset.html#g550d0636e4f35c29d6dbc427b3165a24" title="Delete a subset.">fc_deleteSubset</a>(temp_subset);
<a name="l01824"></a>01824   <span class="keywordflow">return</span> rc;
<a name="l01825"></a>01825 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g90b1b90dfd00245a14d585f3b7f0bf6d"></a><!-- doxytag: member="topo.c::fc_getSubsetNeighbors" ref="g90b1b90dfd00245a14d585f3b7f0bf6d" args="(FC_Subset subset, int level, int shared_dim, FC_AssociationType *nbr_assoc, int *numNbr, int **nbrIDs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getSubsetNeighbors           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a>&nbsp;</td>
          <td class="paramname"> <em>subset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>shared_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> *&nbsp;</td>
          <td class="paramname"> <em>nbr_assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numNbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>nbrIDs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the neighbors of a subset. 
<p>
<b>Description:</b> <p>
This routine will return the neighbors of a subset. Neighbor type is determined by association type of the subset and the argument 'shared_dim' (see fc_getMeshEntityNeighbors for more on neighbors). Level indicates the depth of the neighbors where a level of 1 will return the the first layer of neighbors immediately surrounding the subset members, level 2 will return two layers of neighbors (neighbors of the neighbors), etc.<p>
The shared_dim parameter indicates the minimum dimensionality of the overlap (or shared parts) neighbors. In general, the shared_dim has to be less than the dimensionality of the subset's entities and/or equal to 0 (vertices and point elements are special cases where shared_dim = dim = 0). Also, as the shared_dim increases, the condition for being neighbors becomes more stringent. For example, in a hex mesh, you can request element neighbors that share a face (share_dim = 2) or element neighbors that share an edge (share_dim = 1, this includes the face neighbors too) or element neighbors that share a vertex (share_dim = 0, this includes face and edge neighbors).<p>
<b>Modifications:</b> <ul>
<li>07/023/04 WSK Created so that I can get rid of recursive getNeighbors calls. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>subset</em>&nbsp;</td><td>
input - subset </td></tr>
<tr><td valign="top"><em>level</em>&nbsp;</td><td>
input - depth of neighbors to return, 1 or greater </td></tr>
<tr><td valign="top"><em>shared_dim</em>&nbsp;</td><td>
input - the minimum dimensionality of shared part of neighbors </td></tr>
<tr><td valign="top"><em>nbr_assoc</em>&nbsp;</td><td>
output - the type of mesh entity </td></tr>
<tr><td valign="top"><em>numNbr</em>&nbsp;</td><td>
output - the number of neighbors </td></tr>
<tr><td valign="top"><em>nbrIDs</em>&nbsp;</td><td>
output - array of neighbor IDs </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="topo_8c-source.html#l00603">603</a> of file <a class="el" href="topo_8c-source.html">topo.c</a>.</p>

<p>References <a class="el" href="topo_8c-source.html#l01341">_fc_growNeighborList()</a>, <a class="el" href="storage_8c-source.html#l00441">fc_addIntArrayToSortedIntArray()</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="storage_8c-source.html#l01363">fc_convertSortedIntArrayToIntArray()</a>, <a class="el" href="storage_8c-source.html#l00591">fc_deleteIntFromSortedIntArray()</a>, <a class="el" href="storage_8c-source.html#l00846">fc_freeSortedIntArray()</a>, <a class="el" href="subset_8c-source.html#l02741">fc_getMeshFromSubset()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="subset_8c-source.html#l02782">fc_getSubsetInfo()</a>, <a class="el" href="subset_8c-source.html#l03001">fc_getSubsetMembersAsArray()</a>, <a class="el" href="storage_8c-source.html#l00095">fc_initSortedIntArray()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="subset_8c-source.html#l02622">fc_isSubsetValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="shape_8c-source.html#l03142">fc_createSideAdjacencyMatrix()</a>, and <a class="el" href="elemdeath_8c-source.html#l01072">fc_subsetPlusNeighborGreaterSegmentationMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00611"></a>00611   {
<a name="l00612"></a>00612   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00613"></a>00613   <span class="keywordtype">int</span> i;
<a name="l00614"></a>00614   <span class="keywordtype">int</span> maxNumMember, numMember, *memberIDs;
<a name="l00615"></a>00615   <span class="keywordtype">int</span> *checked;
<a name="l00616"></a>00616   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh;
<a name="l00617"></a>00617   <a class="code" href="structFC__SortedIntArray.html" title="Sorted, exclusive, self-exanding int array.">FC_SortedIntArray</a> members_list, nbrs_list;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619   <span class="comment">// default return values</span>
<a name="l00620"></a>00620   <span class="keywordflow">if</span> (nbr_assoc)
<a name="l00621"></a>00621     *nbr_assoc = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a>;
<a name="l00622"></a>00622   <span class="keywordflow">if</span> (numNbr)
<a name="l00623"></a>00623     *numNbr = -1;
<a name="l00624"></a>00624   <span class="keywordflow">if</span> (nbrIDs)
<a name="l00625"></a>00625     *nbrIDs = NULL;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627   <span class="comment">// check input</span>
<a name="l00628"></a>00628   <span class="keywordflow">if</span> (!<a class="code" href="group__Subset.html#g63bf248cb60435e458ea038036d6af90" title="Check that the handle refers to a valid subset.">fc_isSubsetValid</a>(subset) ||  level &lt; 1 || shared_dim &lt; 0 || 
<a name="l00629"></a>00629       shared_dim &gt; 2 || !nbr_assoc  || !numNbr || !nbrIDs) {
<a name="l00630"></a>00630     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00631"></a>00631     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00632"></a>00632   }
<a name="l00633"></a>00633 
<a name="l00634"></a>00634   <span class="comment">// log message</span>
<a name="l00635"></a>00635   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting the neighbors of a subset."</span>);
<a name="l00636"></a>00636 
<a name="l00637"></a>00637   <span class="comment">// get info from subset</span>
<a name="l00638"></a>00638   rc = <a class="code" href="group__Subset.html#g815857d0e2d573d0418a3892229c0d83" title="Get information about a subset.">fc_getSubsetInfo</a>(subset, &amp;numMember, &amp;maxNumMember, nbr_assoc);
<a name="l00639"></a>00639   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00640"></a>00640     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Error getting info from subset."</span>);
<a name="l00641"></a>00641     <span class="keywordflow">return</span> rc;
<a name="l00642"></a>00642   }
<a name="l00643"></a>00643   rc = <a class="code" href="group__Subset.html#g6cebfda6e20e2a518636838b170185da" title="Get a copy of subset members as array.">fc_getSubsetMembersAsArray</a>(subset, &amp;numMember, &amp;memberIDs);
<a name="l00644"></a>00644   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00645"></a>00645     <span class="keywordflow">return</span> rc;
<a name="l00646"></a>00646   rc = <a class="code" href="group__Subset.html#gddbb3a2f8c43289a3c3754f1546462bc" title="Get the parent mesh of the subset.">fc_getMeshFromSubset</a>(subset, &amp;mesh);
<a name="l00647"></a>00647   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00648"></a>00648     <span class="keywordflow">return</span> rc;  
<a name="l00649"></a>00649   <a class="code" href="group__SimpleDataObjects.html#g2a977bec6f7ae75297a4dcf7ec079bb7" title="Initialize a sorted int array.">fc_initSortedIntArray</a>(&amp;members_list);
<a name="l00650"></a>00650   <a class="code" href="group__SimpleDataObjects.html#gf842f060b1f39a0acfc54421bbe0865a" title="Add an array of ints to a sorted int array.">fc_addIntArrayToSortedIntArray</a>(&amp;members_list, numMember, memberIDs, 1);
<a name="l00651"></a>00651   
<a name="l00652"></a>00652   <span class="comment">// Recursively expand the nbrs_list</span>
<a name="l00653"></a>00653   checked = calloc(maxNumMember, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00654"></a>00654   <span class="keywordflow">if</span> (checked == NULL) {
<a name="l00655"></a>00655     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00656"></a>00656     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00657"></a>00657   }
<a name="l00658"></a>00658   <a class="code" href="group__SimpleDataObjects.html#g2a977bec6f7ae75297a4dcf7ec079bb7" title="Initialize a sorted int array.">fc_initSortedIntArray</a>(&amp;nbrs_list);
<a name="l00659"></a>00659   rc = <a class="code" href="group__PrivateTopologyRelations.html#g02cb3c4ef2956582d868077999c93ce6" title="Get the neighbors of a group of mesh entities.">_fc_growNeighborList</a>(mesh, &amp;members_list, *nbr_assoc, level, shared_dim,
<a name="l00660"></a>00660                              checked, &amp;nbrs_list);
<a name="l00661"></a>00661   free(checked);
<a name="l00662"></a>00662   <a class="code" href="group__SimpleDataObjects.html#g20daa2fb7f38e75da823116f5c41a579" title="Free the sorted int array&amp;#39;s values.">fc_freeSortedIntArray</a>(&amp;members_list);
<a name="l00663"></a>00663   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00664"></a>00664     *nbr_assoc = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a>;
<a name="l00665"></a>00665     free(memberIDs);
<a name="l00666"></a>00666     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Error growing neighbor list."</span>);
<a name="l00667"></a>00667     <span class="keywordflow">return</span> rc;
<a name="l00668"></a>00668   }
<a name="l00669"></a>00669 
<a name="l00670"></a>00670   <span class="comment">// make sure current members are not in list</span>
<a name="l00671"></a>00671   <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++)
<a name="l00672"></a>00672     <a class="code" href="group__SimpleDataObjects.html#gc800f634fb42d44a6c31d79743a6864c" title="Remove an int from a sorted int array.">fc_deleteIntFromSortedIntArray</a>(&amp;nbrs_list, memberIDs[i]);
<a name="l00673"></a>00673   free(memberIDs);
<a name="l00674"></a>00674 
<a name="l00675"></a>00675   <span class="comment">// convert nbrs_list to array</span>
<a name="l00676"></a>00676   rc = <a class="code" href="group__SimpleDataObjects.html#g964b6f06b28b9587ae2fbd18fe2b7e9e" title="Convert sorted int array to array.">fc_convertSortedIntArrayToIntArray</a>(&amp;nbrs_list, numNbr, nbrIDs);
<a name="l00677"></a>00677 
<a name="l00678"></a>00678   <span class="keywordflow">return</span> rc;
<a name="l00679"></a>00679 }     
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gba256da3e22e892863b569dbfcdcabf5"></a><!-- doxytag: member="topo.c::fc_getSubsetSkin" ref="gba256da3e22e892863b569dbfcdcabf5" args="(FC_Subset subset, FC_Subset *skin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getSubsetSkin           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a>&nbsp;</td>
          <td class="paramname"> <em>subset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a> *&nbsp;</td>
          <td class="paramname"> <em>skin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a skin of the subset. 
<p>
<b>Description:</b> <p>
This function creates a subset which contains the "skin" of the original subset. The topo dimensionality of the skin will always be 1 less than the topo dimensionality of the original subset's members. (e.g. the skin of a subset containing 3D elements will be faces, the skin of an edge subset will be vertices).<p>
This may change: for now, it is an error to try to create a skin of an empty subset.<p>
The skin of a subset is found by iterating over the "skins" of the original mesh entities and determining which skin elements are only seen once. The list of unique skins of the original mesh entities will be the skin of the entire subset.<p>
Be warned that behavior on subsets associated with entities that are not elements may not be what you expect. For example, if you have a subset which consists of the six faces of a hex element, the generated skin will be empty because the edges of the faces all belong to more than one face.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000100">Todo:</a></b></dt><dd>Decide what to do if no members in original subset. Error or not? If not, return null handle or empty subset?</dd></dl>
<b>Modifications:</b> <ul>
<li>09/03/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>subset</em>&nbsp;</td><td>
input - subset </td></tr>
<tr><td valign="top"><em>skin</em>&nbsp;</td><td>
output - array of segmented regions </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="topo_8c-source.html#l01645">1645</a> of file <a class="el" href="topo_8c-source.html">topo.c</a>.</p>

<p>References <a class="el" href="subset_8c-source.html#l02008">fc_addMemberToSubset()</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="subset_8c-source.html#l00135">fc_createSubset()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00477">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00514">fc_getElementTypeTopoDim()</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="mesh_8c-source.html#l03371">fc_getMeshEntityElementType()</a>, <a class="el" href="subset_8c-source.html#l02741">fc_getMeshFromSubset()</a>, <a class="el" href="mesh_8c-source.html#l03025">fc_getMeshNumElement()</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="subset_8c-source.html#l02782">fc_getSubsetInfo()</a>, <a class="el" href="subset_8c-source.html#l03001">fc_getSubsetMembersAsArray()</a>, <a class="el" href="subset_8c-source.html#l02700">fc_getSubsetName()</a>, <a class="el" href="subset_8c-source.html#l02828">fc_getSubsetNumMember()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00286">fc_isAssociationTypeValid()</a>, <a class="el" href="subset_8c-source.html#l02622">fc_isSubsetValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00784">FC_NULL_SUBSET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="elemdeath_8c-source.html#l00262">fc_getDecayedSkin()</a>, <a class="el" href="elemdeath_8c-source.html#l00130">fc_getExposedSkin()</a>, and <a class="el" href="topo_8c-source.html#l01792">fc_getMeshSkin()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01648"></a>01648   {
<a name="l01649"></a>01649   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01650"></a>01650   <span class="keywordtype">int</span> i, j;
<a name="l01651"></a>01651   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc_orig, assoc_skin;
<a name="l01652"></a>01652   <span class="keywordtype">char</span>* temp_name, *subset_name;
<a name="l01653"></a>01653   <span class="keywordtype">int</span> numMember, *memberIDs, maxNumSkin, *counts, numChild, *childIDs;
<a name="l01654"></a>01654   <span class="keywordtype">int</span> topodim_orig;
<a name="l01655"></a>01655   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh;
<a name="l01656"></a>01656   <a class="code" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a" title="Possible element types.">FC_ElementType</a> elemType;
<a name="l01657"></a>01657 
<a name="l01658"></a>01658   <span class="comment">//---default return values</span>
<a name="l01659"></a>01659   <span class="keywordflow">if</span> (skin)
<a name="l01660"></a>01660     *skin = <a class="code" href="group__Handles.html#gd007f5eb6e7e7f2febca17b53420fd15" title="Null (default) subset handle.">FC_NULL_SUBSET</a>;
<a name="l01661"></a>01661 
<a name="l01662"></a>01662   <span class="comment">// check input</span>
<a name="l01663"></a>01663   <span class="keywordflow">if</span> (!<a class="code" href="group__Subset.html#g63bf248cb60435e458ea038036d6af90" title="Check that the handle refers to a valid subset.">fc_isSubsetValid</a>(subset) || !skin) {
<a name="l01664"></a>01664     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01665"></a>01665     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01666"></a>01666   }
<a name="l01667"></a>01667 
<a name="l01668"></a>01668   <span class="comment">// log message</span>
<a name="l01669"></a>01669   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new subset which is the skin of this subset"</span>);
<a name="l01670"></a>01670 
<a name="l01671"></a>01671   <span class="comment">// Get info from subset and a little more checking</span>
<a name="l01672"></a>01672   rc = <a class="code" href="group__Subset.html#gdf7851470403bb379426110abf7923ba" title="Get number of members in a subset.">fc_getSubsetNumMember</a>(subset, &amp;numMember);
<a name="l01673"></a>01673   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01674"></a>01674     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01675"></a>01675   rc = <a class="code" href="group__Subset.html#g815857d0e2d573d0418a3892229c0d83" title="Get information about a subset.">fc_getSubsetInfo</a>(subset, NULL, NULL, &amp;assoc_orig); 
<a name="l01676"></a>01676   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01677"></a>01677     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01678"></a>01678   rc = <a class="code" href="group__Subset.html#gddbb3a2f8c43289a3c3754f1546462bc" title="Get the parent mesh of the subset.">fc_getMeshFromSubset</a>(subset, &amp;mesh);
<a name="l01679"></a>01679   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01680"></a>01680     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01681"></a>01681   <span class="keywordflow">if</span> (numMember &lt; 1) {
<a name="l01682"></a>01682     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Can't create skin of empty subset"</span>);
<a name="l01683"></a>01683     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01684"></a>01684   }
<a name="l01685"></a>01685   <span class="keywordflow">if</span> (!<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(assoc_orig) || assoc_orig == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> ||
<a name="l01686"></a>01686       assoc_orig == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>) {
<a name="l01687"></a>01687     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Can't handle subset with association type %s"</span>,
<a name="l01688"></a>01688                           <a class="code" href="group__DataTypes.html#g615e96c3b13331857b5ba45d597c49de" title="Return the name of the FC_AssociationType&amp;#39;s value.">fc_getAssociationTypeText</a>(assoc_orig));
<a name="l01689"></a>01689     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01690"></a>01690   }
<a name="l01691"></a>01691 
<a name="l01692"></a>01692   <span class="comment">// Get members -- If subset is whole, get all elements</span>
<a name="l01693"></a>01693   <span class="keywordflow">if</span> (assoc_orig == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>) {
<a name="l01694"></a>01694     assoc_orig = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>;
<a name="l01695"></a>01695     rc = <a class="code" href="group__Mesh.html#g8bcadefbf0728724adf77ef52c1f3732" title="Returns number of elements in a mesh.">fc_getMeshNumElement</a>(mesh, &amp;numMember);
<a name="l01696"></a>01696     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01697"></a>01697       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01698"></a>01698     memberIDs = malloc(numMember*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01699"></a>01699     <span class="keywordflow">if</span> (!memberIDs) {
<a name="l01700"></a>01700       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01701"></a>01701       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01702"></a>01702     }
<a name="l01703"></a>01703     <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++)
<a name="l01704"></a>01704       memberIDs[i] = i;
<a name="l01705"></a>01705   }
<a name="l01706"></a>01706   <span class="keywordflow">else</span> {
<a name="l01707"></a>01707     rc = <a class="code" href="group__Subset.html#g6cebfda6e20e2a518636838b170185da" title="Get a copy of subset members as array.">fc_getSubsetMembersAsArray</a>(subset, &amp;numMember, &amp;memberIDs);
<a name="l01708"></a>01708     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01709"></a>01709       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01710"></a>01710   }
<a name="l01711"></a>01711 
<a name="l01712"></a>01712   <span class="comment">// determine topodim of the members</span>
<a name="l01713"></a>01713   rc = <a class="code" href="group__Mesh.html#gfc269313fe6595610ac3eb54cef327c7" title="Get the element type of the mesh entity.">fc_getMeshEntityElementType</a>(mesh, assoc_orig, 0, &amp;elemType);
<a name="l01714"></a>01714   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01715"></a>01715     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01716"></a>01716   topodim_orig = <a class="code" href="group__DataTypes.html#g88ee850817d024de6ff86aea039b4997" title="Returns number of topological dimensions for a type of element.">fc_getElementTypeTopoDim</a>(elemType);
<a name="l01717"></a>01717 
<a name="l01718"></a>01718   <span class="comment">// count children of the members</span>
<a name="l01719"></a>01719   <span class="keywordflow">switch</span> (topodim_orig) {
<a name="l01720"></a>01720   <span class="keywordflow">case</span> 3:  assoc_skin = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>;    <span class="keywordflow">break</span>;
<a name="l01721"></a>01721   <span class="keywordflow">case</span> 2:  assoc_skin = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>;    <span class="keywordflow">break</span>;
<a name="l01722"></a>01722   <span class="keywordflow">case</span> 1:  assoc_skin = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>;  <span class="keywordflow">break</span>;
<a name="l01723"></a>01723   <span class="keywordflow">default</span>:
<a name="l01724"></a>01724     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Invalid topodim '%d'"</span>, topodim_orig);
<a name="l01725"></a>01725     free(memberIDs);
<a name="l01726"></a>01726     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01727"></a>01727   }
<a name="l01728"></a>01728   rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(mesh, assoc_skin, &amp;maxNumSkin);
<a name="l01729"></a>01729   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01730"></a>01730     <span class="keywordflow">return</span> rc;
<a name="l01731"></a>01731   counts = calloc(maxNumSkin, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01732"></a>01732   <span class="keywordflow">if</span> (!counts) {
<a name="l01733"></a>01733     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01734"></a>01734     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01735"></a>01735   }
<a name="l01736"></a>01736   <span class="keywordflow">for</span> (i = 0; i &lt; numMember; i++) {
<a name="l01737"></a>01737     <a class="code" href="group__TopologyRelations.html#g08edc0183a4bb0e44eb226ea75177fd8" title="Get the entities which make up the specified entity.">fc_getMeshEntityChildren</a>(mesh, assoc_orig, memberIDs[i], assoc_skin,
<a name="l01738"></a>01738                              &amp;numChild, &amp;childIDs);
<a name="l01739"></a>01739     <span class="keywordflow">for</span> (j = 0; j &lt; numChild; j++)
<a name="l01740"></a>01740       counts[childIDs[j]]++;
<a name="l01741"></a>01741     free(childIDs);
<a name="l01742"></a>01742   }
<a name="l01743"></a>01743   free(memberIDs);
<a name="l01744"></a>01744 
<a name="l01745"></a>01745   <span class="comment">// create new subset</span>
<a name="l01746"></a>01746   rc = <a class="code" href="group__Subset.html#g429e404a267e2f574e2578aa5d0aaa35" title="Get subset name.">fc_getSubsetName</a>(subset, &amp;subset_name);
<a name="l01747"></a>01747   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01748"></a>01748     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01749"></a>01749   temp_name = malloc((strlen(subset_name)+10)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l01750"></a>01750   sprintf(temp_name, <span class="stringliteral">"%s_skin"</span>, subset_name);
<a name="l01751"></a>01751   free(subset_name);
<a name="l01752"></a>01752   rc = <a class="code" href="group__Subset.html#gccbfd6035cd0b949a4fac98888348e88" title="Create a new subset on a specified mesh.">fc_createSubset</a>(mesh, temp_name, assoc_skin, skin);
<a name="l01753"></a>01753   free(temp_name);
<a name="l01754"></a>01754   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01755"></a>01755     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Error creating subset."</span>);
<a name="l01756"></a>01756     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01757"></a>01757   }
<a name="l01758"></a>01758 
<a name="l01759"></a>01759   <span class="comment">// stuff in new members</span>
<a name="l01760"></a>01760   <span class="keywordflow">for</span> (i = maxNumSkin-1; i &gt;= 0; i--) {
<a name="l01761"></a>01761     <span class="keywordflow">if</span> (counts[i] == 1) {
<a name="l01762"></a>01762       <a class="code" href="group__Subset.html#g5ed37876a6f144458716efed8cb78dbe" title="Add member to a subset.">fc_addMemberToSubset</a>(*skin, i);
<a name="l01763"></a>01763     }
<a name="l01764"></a>01764   }
<a name="l01765"></a>01765 
<a name="l01766"></a>01766   <span class="comment">// cleanup</span>
<a name="l01767"></a>01767   free(counts);
<a name="l01768"></a>01768 
<a name="l01769"></a>01769   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01770"></a>01770 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g45c86dc9ebd4835c3f96efdf2a6003d9"></a><!-- doxytag: member="topo.c::fc_segment" ref="g45c86dc9ebd4835c3f96efdf2a6003d9" args="(FC_Subset subset, int shared_dim, int *numSubset, FC_Subset **newSubsets)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_segment           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a>&nbsp;</td>
          <td class="paramname"> <em>subset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>shared_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSubset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a> **&nbsp;</td>
          <td class="paramname"> <em>newSubsets</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Created separate connected components. 
<p>
<b>Description:</b> <p>
This function takes a subset and separates into separate connected regions. It returns the number of regions and a new subset for each region. The new subsets will be named as the name of the original subset, postpended with "_Seg#" where # will be the index into the array of returned subsets.<p>
Mesh subentities (e.g. elements, vertices, etc) are considered to be connected if they are neighbors. The type of neighborship relation is specified by the minimum shared dim (see fc_getMeshEntityNeighbors). The most common value of shared_dim is 0.<p>
<b>Modifications:</b> <ul>
<li>02/06/04 WSK, created.</li><li>06/29/04 RM, combined _fc_segment() into <a class="el" href="group__TopologyRelations.html#g45c86dc9ebd4835c3f96efdf2a6003d9" title="Created separate connected components.">fc_segment()</a>, changed interface to take subset as input and return subsets </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>subset</em>&nbsp;</td><td>
input - subset </td></tr>
<tr><td valign="top"><em>shared_dim</em>&nbsp;</td><td>
input - the minimum dimensionality of shared part of neighbors </td></tr>
<tr><td valign="top"><em>numSubset</em>&nbsp;</td><td>
output - number of new subsets </td></tr>
<tr><td valign="top"><em>newSubsets</em>&nbsp;</td><td>
output - array of segmented regions </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="topo_8c-source.html#l01432">1432</a> of file <a class="el" href="topo_8c-source.html">topo.c</a>.</p>

<p>References <a class="el" href="storage_8c-source.html#l01531">_fc_expandIntArray()</a>, <a class="el" href="subset_8c-source.html#l03800">_fc_getSubSlot()</a>, <a class="el" href="subset_8c-source.html#l02064">fc_addArrayMembersToSubset()</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="storage_8c-source.html#l01301">fc_convertIntArrayToSortedIntArray()</a>, <a class="el" href="subset_8c-source.html#l00135">fc_createSubset()</a>, <a class="el" href="storage_8c-source.html#l00591">fc_deleteIntFromSortedIntArray()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="storage_8c-source.html#l00846">fc_freeSortedIntArray()</a>, <a class="el" href="topo_8c-source.html#l00510">fc_getMeshEntityNeighbors()</a>, <a class="el" href="subset_8c-source.html#l02741">fc_getMeshFromSubset()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="storage_8c-source.html#l00633">fc_getSortedIntArrayFront()</a>, <a class="el" href="subset_8c-source.html#l02782">fc_getSubsetInfo()</a>, <a class="el" href="subset_8c-source.html#l03001">fc_getSubsetMembersAsArray()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="storage_8c-source.html#l00721">fc_popSortedIntArrayFront()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="subsetP_8h-source.html#l00074">_FC_SubSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="storage_8h-source.html#l00099">FC_SortedIntArray::numVal</a>.</p>

<p>Referenced by <a class="el" href="volumeSegments_8c-source.html#l00334">calcSegmentsVolumes()</a>, <a class="el" href="tears_8c-source.html#l00686">calcShapeIntersection()</a>, <a class="el" href="elemdeath_8c-source.html#l00778">fc_subsetSegmentsMesh()</a>, <a class="el" href="elemdeath_8c-source.html#l00898">fc_subsetSegmentsSubset()</a>, <a class="el" href="threshBoundBox_8c-source.html#l00454">find_and_print_bbs()</a>, <a class="el" href="elemdeath__ex1_8c-source.html#l00147">main()</a>, <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>, and <a class="el" href="screwBreaks_8c-source.html#l00439">segmentMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01438"></a>01438   {
<a name="l01439"></a>01439   <span class="keywordtype">int</span> i;
<a name="l01440"></a>01440   <span class="keywordtype">int</span> ret;
<a name="l01441"></a>01441   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01442"></a>01442   <span class="keywordtype">int</span> numSegment = 0;
<a name="l01443"></a>01443   <span class="keywordtype">int</span> numMember, *memberIDs;
<a name="l01444"></a>01444   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a> *segments = NULL;
<a name="l01445"></a>01445   <a class="code" href="structFC__SortedIntArray.html" title="Sorted, exclusive, self-exanding int array.">FC_SortedIntArray</a> orig_list;  <span class="comment">// the starting list, will end empty</span>
<a name="l01446"></a>01446   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l01447"></a>01447   <a class="code" href="struct__FC__SubSlot.html" title="Struct describing subset elements.">_FC_SubSlot</a> *subsetSlot;
<a name="l01448"></a>01448   <span class="keywordtype">char</span>* temp_name, *subsetName;
<a name="l01449"></a>01449   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh;
<a name="l01450"></a>01450   <span class="keywordtype">int</span> key, numID, maxNumID, *IDs; <span class="comment">// not using an sia for ids - don't need sort</span>
<a name="l01451"></a>01451   <span class="keywordtype">int</span> numWorking, maxNumWorking, *workingIDs; <span class="comment">// also don't need sort</span>
<a name="l01452"></a>01452   <span class="keywordtype">void</span>* temp;
<a name="l01453"></a>01453 
<a name="l01454"></a>01454   <span class="comment">//---default return values</span>
<a name="l01455"></a>01455   <span class="keywordflow">if</span> (numSubset)
<a name="l01456"></a>01456     *numSubset = -1;
<a name="l01457"></a>01457   <span class="keywordflow">if</span> (newSubsets)
<a name="l01458"></a>01458     *newSubsets = NULL;
<a name="l01459"></a>01459 
<a name="l01460"></a>01460   <span class="comment">// check input</span>
<a name="l01461"></a>01461   subsetSlot = <a class="code" href="group__PrivateSubset.html#gfcfa40671d6a71442d882bf0926d7895" title="Get a subset slot from a subset handle.">_fc_getSubSlot</a>(subset);
<a name="l01462"></a>01462   <span class="keywordflow">if</span> (!subsetSlot || shared_dim &lt; 0 || shared_dim &gt; 2 || !numSubset || 
<a name="l01463"></a>01463       !newSubsets) { 
<a name="l01464"></a>01464     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01465"></a>01465     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01466"></a>01466   }
<a name="l01467"></a>01467   rc = <a class="code" href="group__Subset.html#g815857d0e2d573d0418a3892229c0d83" title="Get information about a subset.">fc_getSubsetInfo</a>(subset, NULL, NULL, &amp;assoc); 
<a name="l01468"></a>01468   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01469"></a>01469     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01470"></a>01470   <span class="keywordflow">if</span> ( ( (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a> || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>) &amp;&amp; shared_dim &gt; 0) ||
<a name="l01471"></a>01471        (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a> &amp;&amp; shared_dim &gt; 1) ) {
<a name="l01472"></a>01472     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01473"></a>01473     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01474"></a>01474   }
<a name="l01475"></a>01475 
<a name="l01476"></a>01476   <span class="comment">// log message</span>
<a name="l01477"></a>01477   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Segmenting subset '%s'"</span>, subsetSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#07d50e7e118f4d4c1c7c70caa2d9d2f6">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l01478"></a>01478 
<a name="l01479"></a>01479   <span class="comment">// Get more info from subset</span>
<a name="l01480"></a>01480   rc = <a class="code" href="group__Subset.html#gddbb3a2f8c43289a3c3754f1546462bc" title="Get the parent mesh of the subset.">fc_getMeshFromSubset</a>(subset, &amp;mesh);
<a name="l01481"></a>01481   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01482"></a>01482     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01483"></a>01483   rc = <a class="code" href="group__Subset.html#g6cebfda6e20e2a518636838b170185da" title="Get a copy of subset members as array.">fc_getSubsetMembersAsArray</a>(subset, &amp;numMember, &amp;memberIDs);
<a name="l01484"></a>01484   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01485"></a>01485     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01486"></a>01486   subsetName = subsetSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#07d50e7e118f4d4c1c7c70caa2d9d2f6">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l01487"></a>01487 
<a name="l01488"></a>01488   <span class="comment">// trivial case, if no members, not an error, return success</span>
<a name="l01489"></a>01489   <span class="keywordflow">if</span> (numMember == 0) {
<a name="l01490"></a>01490     *numSubset = 0;
<a name="l01491"></a>01491     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01492"></a>01492   }
<a name="l01493"></a>01493 
<a name="l01494"></a>01494   <span class="comment">// convert memberIDs to orig list</span>
<a name="l01495"></a>01495   rc = <a class="code" href="group__SimpleDataObjects.html#gfae48dc7d1998fe49a86de7f58e42906" title="Convert int array (no duplicates) to sorted int array.">fc_convertIntArrayToSortedIntArray</a>(numMember, memberIDs, 1, &amp;orig_list);
<a name="l01496"></a>01496   <span class="keywordflow">if</span> (rc &lt; <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01497"></a>01497     <span class="keywordflow">return</span> rc;
<a name="l01498"></a>01498 
<a name="l01499"></a>01499   <span class="comment">// setup space for names of segments</span>
<a name="l01500"></a>01500   temp_name = malloc((strlen(subsetName)+20)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l01501"></a>01501   <span class="keywordflow">if</span> (temp_name == NULL) {
<a name="l01502"></a>01502     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01503"></a>01503     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01504"></a>01504   }
<a name="l01505"></a>01505   
<a name="l01506"></a>01506   <span class="comment">//---segment the linked list</span>
<a name="l01507"></a>01507   numSegment = 0;
<a name="l01508"></a>01508   <span class="keywordflow">while</span> (orig_list.<a class="code" href="structFC__SortedIntArray.html#41c02abac0e388a077675863f16c325f">numVal</a> &gt; 0) { <span class="comment">// each pass will create a new subset</span>
<a name="l01509"></a>01509 
<a name="l01510"></a>01510     <span class="comment">// FIX change all to back 'cause more efficient</span>
<a name="l01511"></a>01511 
<a name="l01512"></a>01512     <span class="comment">// initialize working list &amp; segment list</span>
<a name="l01513"></a>01513     numWorking = 0;
<a name="l01514"></a>01514     maxNumWorking = 0;
<a name="l01515"></a>01515     workingIDs = NULL;
<a name="l01516"></a>01516     numID = 0;
<a name="l01517"></a>01517     maxNumID = 0;
<a name="l01518"></a>01518     IDs = NULL;
<a name="l01519"></a>01519 
<a name="l01520"></a>01520     <span class="comment">// remove starting ID (seed) from orig list ...</span>
<a name="l01521"></a>01521     <a class="code" href="group__SimpleDataObjects.html#gd267fbe896aab5525734e8f04c5eb302" title="Get first value in the sorted int array (WARNING: does not check for empty array)...">fc_getSortedIntArrayFront</a>(&amp;orig_list, &amp;key);
<a name="l01522"></a>01522     <a class="code" href="group__SimpleDataObjects.html#gf4fe205564397985079af4abe96d5d44" title="Delete the first value in a sorted int array.">fc_popSortedIntArrayFront</a>(&amp;orig_list);
<a name="l01523"></a>01523 
<a name="l01524"></a>01524     <span class="comment">// ... &amp; add to working &amp; segment lists</span>
<a name="l01525"></a>01525     <a class="code" href="group__PrivateSimpleDataObjects.html#g9fa1b9c5b9ee199fa7f82a666f15dc4b" title="Expand an int array.">_fc_expandIntArray</a>(&amp;maxNumWorking, &amp;workingIDs);
<a name="l01526"></a>01526     <a class="code" href="group__PrivateSimpleDataObjects.html#g9fa1b9c5b9ee199fa7f82a666f15dc4b" title="Expand an int array.">_fc_expandIntArray</a>(&amp;maxNumID, &amp;IDs);
<a name="l01527"></a>01527     workingIDs[0] = key;
<a name="l01528"></a>01528     numWorking++;
<a name="l01529"></a>01529     IDs[0] = key;
<a name="l01530"></a>01530     numID++;
<a name="l01531"></a>01531 
<a name="l01532"></a>01532     <span class="comment">// "grow" connected region from seed by checking neighbors recursively</span>
<a name="l01533"></a>01533     <span class="keywordflow">while</span> (numWorking &gt; 0) {
<a name="l01534"></a>01534       <span class="keywordtype">int</span> numNeighbor, *neighborIDs;
<a name="l01535"></a>01535 
<a name="l01536"></a>01536       <span class="comment">// can stop early if orig_list is empty</span>
<a name="l01537"></a>01537       <span class="keywordflow">if</span> (orig_list.<a class="code" href="structFC__SortedIntArray.html#41c02abac0e388a077675863f16c325f">numVal</a> == 0) 
<a name="l01538"></a>01538         <span class="keywordflow">break</span>;
<a name="l01539"></a>01539 
<a name="l01540"></a>01540       <span class="comment">// remove 1st entity from working list</span>
<a name="l01541"></a>01541       key = workingIDs[numWorking-1];
<a name="l01542"></a>01542       numWorking--;
<a name="l01543"></a>01543 
<a name="l01544"></a>01544       <span class="comment">// Move neighbors of that entity that are in the orig</span>
<a name="l01545"></a>01545       <span class="comment">// list to the segments list &amp; also the working list</span>
<a name="l01546"></a>01546       rc = <a class="code" href="group__TopologyRelations.html#g6ee1028bf4343f79d907b41cc0d108c4" title="Get the neighbors of a mesh subentity.">fc_getMeshEntityNeighbors</a>(mesh, key, assoc, shared_dim,
<a name="l01547"></a>01547                                      &amp;numNeighbor, &amp;neighborIDs);
<a name="l01548"></a>01548       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01549"></a>01549         <span class="keywordflow">return</span> rc;
<a name="l01550"></a>01550       <span class="keywordflow">for</span> (i = 0; i &lt; numNeighbor; i++) {
<a name="l01551"></a>01551         ret = <a class="code" href="group__SimpleDataObjects.html#gc800f634fb42d44a6c31d79743a6864c" title="Remove an int from a sorted int array.">fc_deleteIntFromSortedIntArray</a>(&amp;orig_list, neighborIDs[i]);
<a name="l01552"></a>01552         <span class="keywordflow">if</span> (ret &gt; 0) { <span class="comment">// found one</span>
<a name="l01553"></a>01553        <span class="keywordflow">if</span> (numWorking == maxNumWorking) {
<a name="l01554"></a>01554          rc = <a class="code" href="group__PrivateSimpleDataObjects.html#g9fa1b9c5b9ee199fa7f82a666f15dc4b" title="Expand an int array.">_fc_expandIntArray</a>(&amp;maxNumWorking, &amp;workingIDs);
<a name="l01555"></a>01555          <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01556"></a>01556            <span class="keywordflow">return</span> rc;
<a name="l01557"></a>01557        }
<a name="l01558"></a>01558        <span class="keywordflow">if</span> (numID == maxNumID) {
<a name="l01559"></a>01559          rc = <a class="code" href="group__PrivateSimpleDataObjects.html#g9fa1b9c5b9ee199fa7f82a666f15dc4b" title="Expand an int array.">_fc_expandIntArray</a>(&amp;maxNumID, &amp;IDs);
<a name="l01560"></a>01560          rc = <a class="code" href="group__PrivateSimpleDataObjects.html#g9fa1b9c5b9ee199fa7f82a666f15dc4b" title="Expand an int array.">_fc_expandIntArray</a>(&amp;maxNumWorking, &amp;workingIDs);
<a name="l01561"></a>01561          <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01562"></a>01562            <span class="keywordflow">return</span> rc;
<a name="l01563"></a>01563        }
<a name="l01564"></a>01564        workingIDs[numWorking] = neighborIDs[i];
<a name="l01565"></a>01565        numWorking++;
<a name="l01566"></a>01566        IDs[numID] = neighborIDs[i];
<a name="l01567"></a>01567        numID++;
<a name="l01568"></a>01568         }
<a name="l01569"></a>01569       }
<a name="l01570"></a>01570       free(neighborIDs);
<a name="l01571"></a>01571     }
<a name="l01572"></a>01572 
<a name="l01573"></a>01573     <span class="comment">// create subset from list of IDs</span>
<a name="l01574"></a>01574     temp = realloc(segments, (numSegment+1)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>));
<a name="l01575"></a>01575     <span class="keywordflow">if</span> (temp == NULL) {
<a name="l01576"></a>01576       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01577"></a>01577       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01578"></a>01578     }
<a name="l01579"></a>01579     segments = temp;
<a name="l01580"></a>01580     sprintf(temp_name, <span class="stringliteral">"%s_Seg%d"</span>, subsetName, numSegment);
<a name="l01581"></a>01581     rc = <a class="code" href="group__Subset.html#gccbfd6035cd0b949a4fac98888348e88" title="Create a new subset on a specified mesh.">fc_createSubset</a>(mesh, temp_name, assoc, &amp;segments[numSegment]);
<a name="l01582"></a>01582     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01583"></a>01583       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"cannot create newSubset[%d]"</span>, numSegment);
<a name="l01584"></a>01584       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>; 
<a name="l01585"></a>01585     }
<a name="l01586"></a>01586     rc = <a class="code" href="group__Subset.html#g123bb2337bd35a1915aa736270ed3d40" title="Add members from an array to a subset.">fc_addArrayMembersToSubset</a>(segments[numSegment], numID, IDs);
<a name="l01587"></a>01587     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01588"></a>01588       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"cannot add members to newSubset[%d]"</span>, numSegment);
<a name="l01589"></a>01589       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>; 
<a name="l01590"></a>01590     }
<a name="l01591"></a>01591     free(workingIDs);
<a name="l01592"></a>01592     free(IDs);
<a name="l01593"></a>01593     numSegment++;
<a name="l01594"></a>01594   }
<a name="l01595"></a>01595 
<a name="l01596"></a>01596   <span class="comment">// cleanup (orig_list is empty)</span>
<a name="l01597"></a>01597   free(temp_name);
<a name="l01598"></a>01598   <a class="code" href="group__SimpleDataObjects.html#g20daa2fb7f38e75da823116f5c41a579" title="Free the sorted int array&amp;#39;s values.">fc_freeSortedIntArray</a>(&amp;orig_list);
<a name="l01599"></a>01599 
<a name="l01600"></a>01600   <span class="comment">// return values</span>
<a name="l01601"></a>01601   *numSubset = numSegment;
<a name="l01602"></a>01602   *newSubsets = segments;
<a name="l01603"></a>01603 
<a name="l01604"></a>01604   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01605"></a>01605 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 27 13:26:18 2008 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
