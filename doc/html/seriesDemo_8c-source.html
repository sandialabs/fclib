<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FCLib: examples/seriesDemo.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>examples/seriesDemo.c</h1><a href="seriesDemo_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (2000) Sandia Corporation. Under the terms of Contract</span>
<a name="l00003"></a>00003 <span class="comment"> * DE-AC04-94AL85000 with Sandia Corporation, the U.S. Government retains</span>
<a name="l00004"></a>00004 <span class="comment"> * certain rights in this software.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00007"></a>00007 <span class="comment"> * modification, are permitted provided that the following conditions are met:</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *   * Redistributions of source code must retain the above copyright</span>
<a name="l00010"></a>00010 <span class="comment"> *     notice, this list of conditions and the following disclaimer.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> *   * Redistributions in binary form must reproduce the above copyright</span>
<a name="l00013"></a>00013 <span class="comment"> *     notice, this list of conditions and the following disclaimer in the</span>
<a name="l00014"></a>00014 <span class="comment"> *     documentation and/or other materials provided with the</span>
<a name="l00015"></a>00015 <span class="comment"> *     distribution.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> *   * Neither the name of Sandia nor the names of any contributors may</span>
<a name="l00018"></a>00018 <span class="comment"> *     be used to endorse or promote products derived from this software</span>
<a name="l00019"></a>00019 <span class="comment"> *     without specific prior written permission.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> *   * Modified source versions must be plainly marked as such, and must</span>
<a name="l00022"></a>00022 <span class="comment"> *     not be misrepresented as being the original software.</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"</span>
<a name="l00025"></a>00025 <span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00026"></a>00026 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00027"></a>00027 <span class="comment"> * ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHORS OR CONTRIBUTORS BE LIABLE FOR</span>
<a name="l00028"></a>00028 <span class="comment"> * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<a name="l00029"></a>00029 <span class="comment"> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00030"></a>00030 <span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00031"></a>00031 <span class="comment"> * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00032"></a>00032 <span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<a name="l00033"></a>00033 <span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span>
<a name="l00034"></a>00034 <span class="comment"> * DAMAGE.</span>
<a name="l00035"></a>00035 <span class="comment"> */</span>
<a name="l00036"></a>00036 <span class="comment"></span>
<a name="l00037"></a>00037 <span class="comment">/**</span>
<a name="l00038"></a>00038 <span class="comment"> * \file seriesDemo.c</span>
<a name="l00039"></a>00039 <span class="comment"> * \brief demo on how to do shiftAndScale of SeqVars</span>
<a name="l00040"></a>00040 <span class="comment"> *        and some analyses.</span>
<a name="l00041"></a>00041 <span class="comment"> *</span>
<a name="l00042"></a>00042 <span class="comment"> * $Source: /usr/local/Repositories/fcdmf/fclib/examples/seriesDemo.c,v $</span>
<a name="l00043"></a>00043 <span class="comment"> * $Revision: 1.9 $</span>
<a name="l00044"></a>00044 <span class="comment"> * $Date: 2006/10/19 03:14:49 $</span>
<a name="l00045"></a>00045 <span class="comment"> *</span>
<a name="l00046"></a>00046 <span class="comment"> * \description</span>
<a name="l00047"></a>00047 <span class="comment"> *</span>
<a name="l00048"></a>00048 <span class="comment"> *   Demo of doing shift and scale on some seqvars and</span>
<a name="l00049"></a>00049 <span class="comment"> *   some analyses. Writes gnuplotable results into</span>
<a name="l00050"></a>00050 <span class="comment"> *   seriesDemo.out and gnuplot file seriesDemo.gnu.</span>
<a name="l00051"></a>00051 <span class="comment"> *   Run output file by starting gnuplot and loading</span>
<a name="l00052"></a>00052 <span class="comment"> *   seriesDemo.gnu.</span>
<a name="l00053"></a>00053 <span class="comment"> *</span>
<a name="l00054"></a>00054 <span class="comment"> *   Suggested usage:</span>
<a name="l00055"></a>00055 <span class="comment"> *     1) run the demo and save STDOUT to a file: ./seriesDemo &gt; output</span>
<a name="l00056"></a>00056 <span class="comment"> *     2) start gnuplot: gnuplot </span>
<a name="l00057"></a>00057 <span class="comment"> *     3) in gnuplot: load "seriesDemo.gnu"</span>
<a name="l00058"></a>00058 <span class="comment"> *     4) read the instruction as they come up on screen to</span>
<a name="l00059"></a>00059 <span class="comment"> *        see what the demo is about</span>
<a name="l00060"></a>00060 <span class="comment"> *     5) then look through the seriesDemo.c code and STDOUT file</span>
<a name="l00061"></a>00061 <span class="comment"> *         </span>
<a name="l00062"></a>00062 <span class="comment"> *</span>
<a name="l00063"></a>00063 <span class="comment"> * \modifications</span>
<a name="l00064"></a>00064 <span class="comment"> *   - 06/14/05 ACG Created.</span>
<a name="l00065"></a>00065 <span class="comment"> *   - 01/20/06 ACG changed data to use sin wave, added eucdist</span>
<a name="l00066"></a>00066 <span class="comment"> *     analysis as well, made output more verbose for gnuplot,</span>
<a name="l00067"></a>00067 <span class="comment"> *     and enhanced the output to STDOUT</span>
<a name="l00068"></a>00068 <span class="comment"> */</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="preprocessor">#include &lt;<a class="code" href="fc_8h.html">fc.h</a>&gt;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="comment">//int main(int argc, char** argv) {</span>
<a name="l00075"></a><a class="code" href="seriesDemo_8c.html#5ad1c26f00c2399d3a5c7850100212d0">00075</a> <span class="keywordtype">int</span> <a class="code" href="analyzeSpotWelds_8c.html#24e6ce6d053864cf5fb7af941457bb0e">main</a>(<span class="keywordtype">void</span>){
<a name="l00076"></a>00076   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00077"></a>00077   <a class="code" href="structFC__Dataset.html">FC_Dataset</a> dataset;
<a name="l00078"></a>00078   
<a name="l00079"></a>00079   <a class="code" href="structFC__Sequence.html">FC_Sequence</a> *seqs, *compseqs, seqintersect, ss_seq;
<a name="l00080"></a>00080   <span class="keywordtype">int</span> numSeqs = 2;
<a name="l00081"></a>00081   <span class="keywordtype">int</span> numStepIntersect;
<a name="l00082"></a>00082   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh;
<a name="l00083"></a>00083   <a class="code" href="structFC__Variable.html">FC_Variable</a> **seqvars, **compseqvars, **seqvarsIntersect, *ss_seqvar;
<a name="l00084"></a>00084   <span class="keywordtype">int</span> numSeqVars = numSeqs;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086   <span class="keywordtype">int</span> numStep = 9;
<a name="l00087"></a>00087   <span class="comment">//seq 1 is seq 0 shifted by 5 and with twice the frequency</span>
<a name="l00088"></a>00088   <span class="keywordtype">double</span> seqvals0[9] = {0,1,2,3,4,5,6,7,8};
<a name="l00089"></a>00089   <span class="keywordtype">double</span> seqvals1[9] = {5.0,5.5,6.0,6.5,7.0,7.5,8.0,8.5,9.0};
<a name="l00090"></a>00090   <span class="keywordtype">double</span> datavals[9];
<a name="l00091"></a>00091   <span class="keywordtype">void</span>* seqcoords;
<a name="l00092"></a>00092 
<a name="l00093"></a>00093   <a class="code" href="structFC__Variable.html">FC_Variable</a> areavar,eucvar;
<a name="l00094"></a>00094   <span class="keywordtype">double</span> *areadata, *eucdata;
<a name="l00095"></a>00095   <span class="keywordtype">double</span> results[3][2];
<a name="l00096"></a>00096   <span class="keywordtype">int</span> i,j,casex;
<a name="l00097"></a>00097 
<a name="l00098"></a>00098   FILE *<a class="code" href="seriesAnalyzer_8c.html#623fdb867c17192a41184c268fc5c32f">fpout</a>, *<a class="code" href="seriesAnalyzer_8c.html#c23d5b9e5153fbf32d50319e79e22c16">fpgnu</a>; 
<a name="l00099"></a>00099   <span class="keywordtype">char</span> *fileout = <span class="stringliteral">"seriesDemo.out"</span>;
<a name="l00100"></a>00100   <span class="keywordtype">char</span> *filegnu = <span class="stringliteral">"seriesDemo.gnu"</span>;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 
<a name="l00103"></a>00103   <span class="comment">//get datavals for a sin wave</span>
<a name="l00104"></a>00104   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++){
<a name="l00105"></a>00105     datavals[i] = sin(seqvals0[i]*2*<a class="code" href="group__MiscUtilities.html#g0143d40c3cb2fd8d5ed18838b108c1b0">FC_PI</a>/(<span class="keywordtype">double</span>)(numStep-1))+3;
<a name="l00106"></a>00106   }
<a name="l00107"></a>00107 
<a name="l00108"></a>00108   rc = <a class="code" href="group__Library.html#gf13f047de6d44c9028d4944bc29867db">fc_setLibraryVerbosity</a>(<a class="code" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a3995521f4f1526a6565b08e663106dd6e7">FC_WARNING_MESSAGES</a>);
<a name="l00109"></a>00109   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00110"></a>00110     exit(rc);
<a name="l00111"></a>00111   rc = <a class="code" href="group__Library.html#g355d03ffe3f8c560e9343716f78af097">fc_initLibrary</a>();
<a name="l00112"></a>00112   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00113"></a>00113     exit(rc);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115   <span class="comment">// make a dataset to play in</span>
<a name="l00116"></a>00116   rc = <a class="code" href="group__Dataset.html#g5be8a0c38bf48b00203ab1598d06b863">fc_createDataset</a>(<span class="stringliteral">"temp dataset"</span>, &amp;dataset);
<a name="l00117"></a>00117   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l00118"></a>00118     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"abort: failed to create dataset"</span>);
<a name="l00119"></a>00119     exit(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>);
<a name="l00120"></a>00120   }
<a name="l00121"></a>00121   rc = <a class="code" href="group__Mesh.html#gfeb2fbc7f7fce6d00b6946d43b56e0bb">fc_createMesh</a>(dataset,<span class="stringliteral">"mesh"</span>,&amp;mesh);
<a name="l00122"></a>00122   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l00123"></a>00123     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"abort: failed to create mesh"</span>);
<a name="l00124"></a>00124     exit(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>);
<a name="l00125"></a>00125   }
<a name="l00126"></a>00126 
<a name="l00127"></a>00127   <span class="comment">//now make original sequences and seqvars</span>
<a name="l00128"></a>00128   <span class="comment">//seq 1 is seq 0 shifted and scaled, so the tests cases will</span>
<a name="l00129"></a>00129   <span class="comment">// unshift and unscale it and see what happens.</span>
<a name="l00130"></a>00130   seqs = (<a class="code" href="structFC__Sequence.html">FC_Sequence</a>*)malloc(numSeqs*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Sequence.html">FC_Sequence</a>));
<a name="l00131"></a>00131   compseqs = (FC_Sequence*)malloc(numSeqs*<span class="keyword">sizeof</span>(FC_Sequence));
<a name="l00132"></a>00132   seqvars = (<a class="code" href="structFC__Variable.html">FC_Variable</a>**)malloc(numSeqVars*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>*));
<a name="l00133"></a>00133   compseqvars = (FC_Variable**)malloc(numSeqVars*<span class="keyword">sizeof</span>(FC_Variable*));
<a name="l00134"></a>00134   seqvarsIntersect = (FC_Variable**)malloc(numSeqVars*<span class="keyword">sizeof</span>(FC_Variable*));
<a name="l00135"></a>00135 
<a name="l00136"></a>00136   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqs; i++){
<a name="l00137"></a>00137     <span class="keywordtype">char</span> *name,*seqname;
<a name="l00138"></a>00138     <span class="keywordtype">double</span>* scoords;
<a name="l00139"></a>00139     name = (i == 0 ? <span class="stringliteral">"sv0"</span>:<span class="stringliteral">"sv1"</span>);
<a name="l00140"></a>00140     seqname = (i == 0 ? <span class="stringliteral">"s0"</span>:<span class="stringliteral">"s1"</span>);
<a name="l00141"></a>00141     scoords = (i == 0 ? seqvals0:seqvals1);
<a name="l00142"></a>00142     rc = <a class="code" href="group__Sequence.html#g7f88e0eb0db536a4d213c003a0ab798c">fc_createSequence</a>(dataset, seqname, &amp;(seqs[i]));
<a name="l00143"></a>00143     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l00144"></a>00144       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"abort: failed to create sequence"</span>);
<a name="l00145"></a>00145       exit(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>);
<a name="l00146"></a>00146     }
<a name="l00147"></a>00147     rc = <a class="code" href="group__Sequence.html#g159398af1c86b8385325088c6c73a5db">fc_setSequenceCoords</a>(seqs[i], numStep, <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>,
<a name="l00148"></a>00148                      (<span class="keywordtype">void</span>*)scoords);
<a name="l00149"></a>00149     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l00150"></a>00150       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"abort: failed to set sequence coords"</span>);
<a name="l00151"></a>00151       exit(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>);
<a name="l00152"></a>00152     }
<a name="l00153"></a>00153     rc = <a class="code" href="group__Variable.html#gada4bacc9679592ff8b27c538570c1da">fc_createSeqVariable</a>(mesh,seqs[i],name,&amp;numStep,&amp;(seqvars[i]));
<a name="l00154"></a>00154     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l00155"></a>00155       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"abort: failed to create seqvar"</span>);
<a name="l00156"></a>00156       exit(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>);
<a name="l00157"></a>00157     }
<a name="l00158"></a>00158     <span class="keywordflow">for</span> (j = 0; j &lt; numStep; j++){
<a name="l00159"></a>00159       rc = <a class="code" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData</a>(seqvars[i][j],1,1,<a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>,
<a name="l00160"></a>00160                      <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>,<a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>,
<a name="l00161"></a>00161                      &amp;datavals[j]);
<a name="l00162"></a>00162       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l00163"></a>00163      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"abort: failed to set seqvar coords"</span>);
<a name="l00164"></a>00164      exit(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>);
<a name="l00165"></a>00165       }
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167   }
<a name="l00168"></a>00168 
<a name="l00169"></a>00169   fpout = fopen(fileout,<span class="stringliteral">"w"</span>);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="comment">//print orig sequences &amp; write to file</span>
<a name="l00172"></a>00172   printf(<span class="stringliteral">"ORIGINAL SEQS &amp; VARS:\n"</span>);
<a name="l00173"></a>00173   fprintf(fpout,<span class="stringliteral">"# ORIGINAL SEQS &amp; VARS:\n"</span>);
<a name="l00174"></a>00174   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVars; i++){
<a name="l00175"></a>00175     rc = <a class="code" href="group__Sequence.html#gc55deb72bd96a0e32e471f07463d3cc8">fc_printSequence</a>(seqs[i],<span class="stringliteral">"ORIG SEQ"</span>,1);
<a name="l00176"></a>00176     rc = <a class="code" href="group__Variable.html#gcdec47a673b9054bcf3208fcdbd4c541">fc_printSeqVariable</a>(numStep,seqvars[i],<span class="stringliteral">"ORIG SEQVAR"</span>,1);
<a name="l00177"></a>00177     rc = <a class="code" href="group__Sequence.html#g38e90553b530ed6e4ebeb28df20eade8">fc_getSequenceCoordsPtr</a>(seqs[i],&amp;seqcoords);
<a name="l00178"></a>00178     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get seq coords"</span>);
<a name="l00179"></a>00179     fprintf(fpout,<span class="stringliteral">"#\tsv%d: (time val)\n"</span>,i);
<a name="l00180"></a>00180     <span class="keywordflow">for</span> (j = 0; j &lt; numStep; j++){
<a name="l00181"></a>00181       <span class="keywordtype">double</span> *dataa;
<a name="l00182"></a>00182       rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(seqvars[i][j],(<span class="keywordtype">void</span>**)&amp;dataa);
<a name="l00183"></a>00183       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get seq var vals"</span>);
<a name="l00184"></a>00184       fprintf(fpout,<span class="stringliteral">"%10g %10g\n"</span>,((<span class="keywordtype">double</span>*)seqcoords)[j],dataa[0]);
<a name="l00185"></a>00185     }
<a name="l00186"></a>00186     printf(<span class="stringliteral">"\n"</span>);
<a name="l00187"></a>00187     fprintf(fpout,<span class="stringliteral">"\n\n"</span>);
<a name="l00188"></a>00188   }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 
<a name="l00191"></a>00191   <span class="comment">// examine 3 cases: 1) direct diff 2) shift and diff 3) shift and scale and diff</span>
<a name="l00192"></a>00192   <span class="comment">// (case 3 will be identical seqvars)</span>
<a name="l00193"></a>00193   <span class="keywordflow">for</span> (casex = 0; casex &lt;3; casex++){
<a name="l00194"></a>00194     printf(<span class="stringliteral">"\n\n------------------------------------------------------\n"</span>);
<a name="l00195"></a>00195     printf(<span class="stringliteral">"CASE %d:\n"</span>,casex);
<a name="l00196"></a>00196     fprintf(fpout,<span class="stringliteral">"#CASE %d:\n"</span>,casex);
<a name="l00197"></a>00197 
<a name="l00198"></a>00198     <span class="comment">//first get the starting seq vars for the case:</span>
<a name="l00199"></a>00199     compseqvars[0] = seqvars[0];
<a name="l00200"></a>00200     compseqs[0] = seqs[0];
<a name="l00201"></a>00201     <span class="keywordflow">switch</span> (casex){
<a name="l00202"></a>00202     <span class="keywordflow">case</span> 0:
<a name="l00203"></a>00203       <span class="comment">//do nothing - direct diff</span>
<a name="l00204"></a>00204       printf(<span class="stringliteral">"This case uses the original seqvars.\n"</span>);
<a name="l00205"></a>00205       compseqvars[1] = seqvars[1];
<a name="l00206"></a>00206       compseqs[1] = seqs[1];
<a name="l00207"></a>00207       <span class="keywordflow">break</span>;
<a name="l00208"></a>00208     <span class="keywordflow">default</span>:
<a name="l00209"></a>00209       {
<a name="l00210"></a>00210      <span class="keywordtype">double</span> shift,scale;
<a name="l00211"></a>00211      shift = -5.0;
<a name="l00212"></a>00212      scale =  (casex == 2? 2.0 : 1.0);
<a name="l00213"></a>00213      printf(<span class="stringliteral">"This case shifts the second seqvar by %g and scales it by %g.\n"</span>,
<a name="l00214"></a>00214             shift, scale);
<a name="l00215"></a>00215      <span class="comment">// shift and scale seqvar 1:</span>
<a name="l00216"></a>00216      rc = <a class="code" href="group__Sequence.html#g280929f36644937212a6188aecc29d3a">fc_shiftAndScaleSequence</a>(seqs[1],dataset,shift,scale,<span class="stringliteral">"ss_seq"</span>,&amp;ss_seq);
<a name="l00217"></a>00217      <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get shifted and scaled sequence"</span>);
<a name="l00218"></a>00218      <span class="comment">//now get new seq var on the new seq</span>
<a name="l00219"></a>00219      rc = <a class="code" href="group__Variable.html#g0f742eca08d99bdb19862fe375f4f3d9">fc_copySeqVariable</a> (numStep,seqvars[1],mesh,ss_seq, <span class="stringliteral">"ss_seqvar"</span>,
<a name="l00220"></a>00220                      &amp;ss_seqvar);
<a name="l00221"></a>00221      <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get shifted and scaled sequence var"</span>);
<a name="l00222"></a>00222      compseqvars[1] = ss_seqvar;
<a name="l00223"></a>00223      compseqs[1] = ss_seq;
<a name="l00224"></a>00224      <span class="keywordflow">break</span>;
<a name="l00225"></a>00225       }
<a name="l00226"></a>00226     }
<a name="l00227"></a>00227 
<a name="l00228"></a>00228     <span class="comment">//display seq vars used for this case &amp; write to file</span>
<a name="l00229"></a>00229     printf(<span class="stringliteral">"\n\ninitial seqs &amp; seqvars for this case:\n"</span>);
<a name="l00230"></a>00230     fprintf(fpout,<span class="stringliteral">"#initial seqs &amp; seqvars for this case:\n"</span>);
<a name="l00231"></a>00231     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVars; i++){
<a name="l00232"></a>00232       rc = <a class="code" href="group__Sequence.html#gc55deb72bd96a0e32e471f07463d3cc8">fc_printSequence</a>(compseqs[i],<span class="stringliteral">"ORIG SEQ"</span>,1);
<a name="l00233"></a>00233       rc = <a class="code" href="group__Variable.html#gcdec47a673b9054bcf3208fcdbd4c541">fc_printSeqVariable</a>(numStep,compseqvars[i],<span class="stringliteral">"ORIG SEQVAR"</span>,1);
<a name="l00234"></a>00234       rc = <a class="code" href="group__Sequence.html#g38e90553b530ed6e4ebeb28df20eade8">fc_getSequenceCoordsPtr</a>(compseqs[i],&amp;seqcoords);
<a name="l00235"></a>00235       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get seq coords"</span>);
<a name="l00236"></a>00236       fprintf(fpout,<span class="stringliteral">"#\tsv%d: (time val)\n"</span>,i);
<a name="l00237"></a>00237       <span class="keywordflow">for</span> (j = 0; j &lt; numStep; j++){
<a name="l00238"></a>00238      <span class="keywordtype">double</span> *dataa;
<a name="l00239"></a>00239      rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(compseqvars[i][j],(<span class="keywordtype">void</span>**)&amp;dataa);
<a name="l00240"></a>00240      <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get seq var vals"</span>);
<a name="l00241"></a>00241      fprintf(fpout,<span class="stringliteral">"%10g %10g\n"</span>,((<span class="keywordtype">double</span>*)seqcoords)[j],dataa[0]);
<a name="l00242"></a>00242       }
<a name="l00243"></a>00243       printf(<span class="stringliteral">"\n"</span>);
<a name="l00244"></a>00244       fprintf(fpout,<span class="stringliteral">"\n\n"</span>);
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246     
<a name="l00247"></a>00247     <span class="comment">//now need to put them on the same seq in order to do the analyses</span>
<a name="l00248"></a>00248     <span class="comment">//frist get intersecting sequence</span>
<a name="l00249"></a>00249     rc = <a class="code" href="group__Sequence.html#gbcd143b93a0040e056b5cfd5c10aff4b">fc_createIntersectingRegularSequence</a>(numSeqs,compseqs,0,
<a name="l00250"></a>00250                                <span class="stringliteral">"seqintersect"</span>, &amp;seqintersect);
<a name="l00251"></a>00251     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get intersecting sequence"</span>);
<a name="l00252"></a>00252     <span class="comment">//    printf("\n\nseq after intersection:\n"); </span>
<a name="l00253"></a>00253     <span class="comment">//    rc = fc_printSequence(seqintersect,"seqintersect",1);</span>
<a name="l00254"></a>00254     rc = <a class="code" href="group__Sequence.html#g556f33fb72c8f5c2f2a3bba5177094a1">fc_getSequenceNumStep</a>(seqintersect,&amp;numStepIntersect);
<a name="l00255"></a>00255     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get numsteps on new sequence"</span>);
<a name="l00256"></a>00256     
<a name="l00257"></a>00257     <span class="comment">//then put them all on the same seq and display them</span>
<a name="l00258"></a>00258     printf(<span class="stringliteral">"\n\norig seqvars for this case interpolated onto the same sequence:\n"</span>);
<a name="l00259"></a>00259     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVars; i++){
<a name="l00260"></a>00260       <span class="keywordtype">char</span> *name1,*name2;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262       <span class="comment">//now do linear interpolation </span>
<a name="l00263"></a>00263       name1 = NULL;
<a name="l00264"></a>00264       rc = <a class="code" href="group__Variable.html#g3ec29251d717c5d0ca4ecfd9824f67b1">fc_getVariableName</a>(compseqvars[i][0],&amp;name1);
<a name="l00265"></a>00265       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get name of comp seqvar"</span>);
<a name="l00266"></a>00266       name2 = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)*strlen(name1)+20);
<a name="l00267"></a>00267       strcpy(name2,name1);
<a name="l00268"></a>00268       strcat(name2,<span class="stringliteral">"_newcase"</span>);
<a name="l00269"></a>00269       rc = <a class="code" href="group__Series.html#g9bc7f1c54302382160978929158177c5">fc_linearInterpolation</a>(numStep, compseqvars[i], seqintersect,
<a name="l00270"></a>00270                       name1,&amp;seqvarsIntersect[i]);
<a name="l00271"></a>00271       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to create linear interpolation of seqvar"</span>);
<a name="l00272"></a>00272       rc = <a class="code" href="group__Sequence.html#gc55deb72bd96a0e32e471f07463d3cc8">fc_printSequence</a>(seqintersect,<span class="stringliteral">"COMMON SEQUENCE"</span>,1);
<a name="l00273"></a>00273       <a class="code" href="group__Variable.html#gcdec47a673b9054bcf3208fcdbd4c541">fc_printSeqVariable</a>(numStepIntersect,compseqvars[i],
<a name="l00274"></a>00274                  (i == 0 ? <span class="stringliteral">"INTERPOLATED REF SEQVAR"</span> : <span class="stringliteral">"INTERPOLATED COMP SEQVAR"</span>),1);
<a name="l00275"></a>00275       free(name1);
<a name="l00276"></a>00276       free(name2);
<a name="l00277"></a>00277     }
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 
<a name="l00280"></a>00280     <span class="comment">//writing them out to output file as well in gnuplottable format</span>
<a name="l00281"></a>00281     fprintf(fpout,<span class="stringliteral">"#comp seqs &amp; seqvars for this case:\n"</span>);
<a name="l00282"></a>00282     rc = <a class="code" href="group__Sequence.html#g38e90553b530ed6e4ebeb28df20eade8">fc_getSequenceCoordsPtr</a>(seqintersect,&amp;seqcoords);
<a name="l00283"></a>00283     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get seq coords"</span>);
<a name="l00284"></a>00284     <span class="keywordflow">for</span> (j = 0; j &lt; numStepIntersect; j++){
<a name="l00285"></a>00285       <span class="keywordtype">double</span> *dataa, *datab;
<a name="l00286"></a>00286       rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(seqvarsIntersect[0][j],(<span class="keywordtype">void</span>**)&amp;dataa);
<a name="l00287"></a>00287       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get seq var vals"</span>);
<a name="l00288"></a>00288       rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(seqvarsIntersect[1][j],(<span class="keywordtype">void</span>**)&amp;datab);
<a name="l00289"></a>00289       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get seq var vals"</span>);
<a name="l00290"></a>00290       fprintf(fpout,<span class="stringliteral">"%10g %10g %10g\n"</span>,((<span class="keywordtype">double</span>*)seqcoords)[j],dataa[0],datab[0]);
<a name="l00291"></a>00291     }
<a name="l00292"></a>00292     fprintf(fpout,<span class="stringliteral">"\n\n"</span>);
<a name="l00293"></a>00293 
<a name="l00294"></a>00294     <span class="comment">//now do dimensionless area and eucdistance</span>
<a name="l00295"></a>00295     rc =  <a class="code" href="group__Series.html#g97f84644570c862ff3f640f36faa106a">fc_dimensionlessAreaBetweenCurves</a>(numStepIntersect,
<a name="l00296"></a>00296                                seqvarsIntersect[0],
<a name="l00297"></a>00297                                seqvarsIntersect[1],
<a name="l00298"></a>00298                                <span class="stringliteral">"area"</span>, &amp;areavar);
<a name="l00299"></a>00299     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to calc dimensionless area"</span>);
<a name="l00300"></a>00300     rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(areavar,(<span class="keywordtype">void</span>**)&amp;areadata); <span class="comment">//know this is a double</span>
<a name="l00301"></a>00301     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get area data"</span>);
<a name="l00302"></a>00302     rc =  <a class="code" href="group__Series.html#g87f0226955da23c1cd9f0698d9843707">fc_euclideanDistanceBetweenCurves</a>(numStepIntersect,
<a name="l00303"></a>00303                                seqvarsIntersect[0],
<a name="l00304"></a>00304                                seqvarsIntersect[1],
<a name="l00305"></a>00305                                <span class="stringliteral">"euc"</span>, &amp;eucvar);
<a name="l00306"></a>00306     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to calc euc distance"</span>);
<a name="l00307"></a>00307     rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(eucvar,(<span class="keywordtype">void</span>**)&amp;eucdata); <span class="comment">//know this is a double</span>
<a name="l00308"></a>00308     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get area data"</span>);
<a name="l00309"></a>00309     rc=<a class="code" href="group__Sequence.html#g38e90553b530ed6e4ebeb28df20eade8">fc_getSequenceCoordsPtr</a>(seqintersect,&amp;seqcoords);
<a name="l00310"></a>00310     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get seq coords"</span>);
<a name="l00311"></a>00311     <span class="comment">//area data and eucdata have only 1 data point since the original seq vars </span>
<a name="l00312"></a>00312     <span class="comment">//only had 1 data point per timestep</span>
<a name="l00313"></a>00313     results[casex][0] = areadata[0]; <span class="comment">//for gnuplot file    </span>
<a name="l00314"></a>00314     results[casex][1] = eucdata[0]; <span class="comment">//for gnuplot file    </span>
<a name="l00315"></a>00315     printf(<span class="stringliteral">"\n\ncase %d: DP = %d range = [%4g,%4g] dimensionless area  = %10g eucdistance = %10g\n\n"</span>,
<a name="l00316"></a>00316         casex, 
<a name="l00317"></a>00317         numStepIntersect,
<a name="l00318"></a>00318         ((<span class="keywordtype">double</span>*)seqcoords)[0],
<a name="l00319"></a>00319         ((<span class="keywordtype">double</span>*)seqcoords)[numStepIntersect-1],
<a name="l00320"></a>00320         areadata[0],eucdata[0]);
<a name="l00321"></a>00321     fprintf(fpout,<span class="stringliteral">"#RESULT: case %d: DP = %d range = [%4g,%4g] dimensionlessarea = %10g eucdistance = %10g\n\n\n"</span>,
<a name="l00322"></a>00322          casex,numStepIntersect,
<a name="l00323"></a>00323         ((<span class="keywordtype">double</span>*)seqcoords)[0],
<a name="l00324"></a>00324         ((<span class="keywordtype">double</span>*)seqcoords)[numStepIntersect-1],
<a name="l00325"></a>00325         areadata[0],eucdata[0]);
<a name="l00326"></a>00326 
<a name="l00327"></a>00327     <span class="comment">//clean up</span>
<a name="l00328"></a>00328     rc = <a class="code" href="group__Variable.html#g2f48fcbd551131488dd5757c27364656">fc_deleteVariable</a>(areavar);
<a name="l00329"></a>00329     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to clean up area var"</span>);
<a name="l00330"></a>00330     <span class="keywordflow">for</span> (i = 0; i&lt; numSeqVars; i++){
<a name="l00331"></a>00331       rc = <a class="code" href="group__Variable.html#g57341fab4863efe2c35476aee509f20d">fc_deleteSeqVariable</a>(numStepIntersect,seqvarsIntersect[i]);
<a name="l00332"></a>00332       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to clean up seqvars intersect"</span>);
<a name="l00333"></a>00333       free(seqvarsIntersect[i]);
<a name="l00334"></a>00334     }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336     rc = <a class="code" href="group__Sequence.html#gf23403070ab8aa0a4d172f3cc0293754">fc_deleteSequence</a>(seqintersect);
<a name="l00337"></a>00337     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to clean up seq intersect"</span>);
<a name="l00338"></a>00338 
<a name="l00339"></a>00339     <span class="comment">//clean up if we used a shiftandscale</span>
<a name="l00340"></a>00340     <span class="keywordflow">if</span> (casex !=0){
<a name="l00341"></a>00341       rc = <a class="code" href="group__Variable.html#g57341fab4863efe2c35476aee509f20d">fc_deleteSeqVariable</a>(numStep,ss_seqvar);
<a name="l00342"></a>00342       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to clean up ss seqvar"</span>);
<a name="l00343"></a>00343       free(ss_seqvar);
<a name="l00344"></a>00344       rc = <a class="code" href="group__Sequence.html#gf23403070ab8aa0a4d172f3cc0293754">fc_deleteSequence</a>(ss_seq);
<a name="l00345"></a>00345       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to clean up ss seq"</span>);
<a name="l00346"></a>00346     }
<a name="l00347"></a>00347   }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349   {
<a name="l00350"></a>00350     <span class="comment">//writing out gnuplot file</span>
<a name="l00351"></a>00351     fpgnu = fopen(filegnu,<span class="stringliteral">"w"</span>);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     <span class="comment">//first print orig seqs</span>
<a name="l00354"></a>00354     fprintf(fpgnu,<span class="stringliteral">"set title \"ORIG SEQVARS\"\n"</span>);
<a name="l00355"></a>00355     fprintf(fpgnu,<span class="stringliteral">"plot \"%s\" index 0 title \"%s\" with lines\n"</span>,
<a name="l00356"></a>00356          fileout,<span class="stringliteral">"ORIG SV0"</span>);
<a name="l00357"></a>00357     fprintf(fpgnu,<span class="stringliteral">"replot \"%s\" index 1 title \"%s\" with lines\n"</span>,
<a name="l00358"></a>00358            fileout,<span class="stringliteral">"ORIG SV1"</span>);
<a name="l00359"></a>00359     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"This example demonstrates series analyses. Analyses for\" \n"</span>);
<a name="l00360"></a>00360     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"3 different pairs of seq vars are considered.\" \n"</span>);
<a name="l00361"></a>00361     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00362"></a>00362     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"Two sequence variables are shown in the plot in red and green.\" \n"</span>);
<a name="l00363"></a>00363     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"For each case we use the red seqvar and a variation on the green\" \n"</span>);
<a name="l00364"></a>00364     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"seqvar, in order to see how the variation alters the results\" \n"</span>);
<a name="l00365"></a>00365     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"of the analyses. The altered version of the green curve will be\" \n"</span>);
<a name="l00366"></a>00366     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"shown in blue.\" \n"</span>);
<a name="l00367"></a>00367     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00368"></a>00368     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"We want to do the analyses using the red and blue seqvars.\" \n"</span>);
<a name="l00369"></a>00369     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"However, in order to do the analyses, the two seq vars \" \n"</span>);
<a name="l00370"></a>00370     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"must be on the same sequence. Therefore, we find the\" \n"</span>);
<a name="l00371"></a>00371     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"overlapping time region of the two seqvars and interpolate\" \n"</span>);
<a name="l00372"></a>00372     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"the seqvars to make new seq vars over this region. The\" \n"</span>);
<a name="l00373"></a>00373     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"resulting seqvars that are actually used for the analyses will\" \n"</span>);
<a name="l00374"></a>00374     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"be shown in magenta and teal, for the red and green seqvars,\" \n"</span>);
<a name="l00375"></a>00375     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"respectively.\" \n"</span>); 
<a name="l00376"></a>00376     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00377"></a>00377     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"Results of the dimensionlessArea and euclideanDistance \" \n"</span>);
<a name="l00378"></a>00378     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"analyses for each case will be shown in the title of the plot.\" \n"</span>);
<a name="l00379"></a>00379     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"Note that the dimensionlessArea result is dependent on the\" \n"</span>);
<a name="l00380"></a>00380     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"max value of the reference function over that range.\" \n"</span>);
<a name="l00381"></a>00381     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"Also note that the euclidean distance is dependent upon.\" \n"</span>);
<a name="l00382"></a>00382     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"the number of datapoints in the range. Therefore, these values\" \n"</span>);
<a name="l00383"></a>00383     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"should be considered with caution.\" \n"</span>);
<a name="l00384"></a>00384     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00385"></a>00385     fprintf(fpgnu,<span class="stringliteral">"pause -1 \"Hit return to see the cases...\" \n"</span>);
<a name="l00386"></a>00386 
<a name="l00387"></a>00387     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++){
<a name="l00388"></a>00388       <span class="keywordtype">char</span>* casestring;
<a name="l00389"></a>00389       fprintf(fpgnu,<span class="stringliteral">"pause 0\"CASE %d:\" \n"</span>,i);
<a name="l00390"></a>00390       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00391"></a>00391 
<a name="l00392"></a>00392       fprintf(fpgnu,<span class="stringliteral">"set title \"CASE %d\" \n"</span>,i);
<a name="l00393"></a>00393       fprintf(fpgnu,<span class="stringliteral">"plot \"%s\" index 0 title \"%s\" with lines\n"</span>,
<a name="l00394"></a>00394            fileout,<span class="stringliteral">"ORIG SV0"</span>);
<a name="l00395"></a>00395       fprintf(fpgnu,<span class="stringliteral">"replot \"%s\" index 1 title \"%s\" with lines\n"</span>,
<a name="l00396"></a>00396          fileout,<span class="stringliteral">"ORIG_SV1"</span>);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"First we see the original red and green seqvars.\" \n"</span>);
<a name="l00399"></a>00399       fprintf(fpgnu,<span class="stringliteral">"pause -1 \"Hit return to show the variation on the green seqvar...\"\n"</span>);
<a name="l00400"></a>00400       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00401"></a>00401 
<a name="l00402"></a>00402       <span class="keywordflow">switch</span>(i){
<a name="l00403"></a>00403       <span class="keywordflow">case</span> 0:
<a name="l00404"></a>00404      casestring = <span class="stringliteral">"THISCASE_SV1 = ORIG_SV1"</span>;
<a name="l00405"></a>00405      <span class="keywordflow">break</span>;
<a name="l00406"></a>00406       <span class="keywordflow">case</span> 1:
<a name="l00407"></a>00407      casestring = <span class="stringliteral">"THISCASE_SV1 = ORIG_SV1 shifted by -5"</span>;
<a name="l00408"></a>00408      <span class="keywordflow">break</span>;
<a name="l00409"></a>00409       <span class="keywordflow">case</span> 2:
<a name="l00410"></a>00410      casestring = <span class="stringliteral">"THISCASE_SV1 = ORIG_SV1 shifted by -5 and scaled by 2"</span>;
<a name="l00411"></a>00411      <span class="keywordflow">break</span>;
<a name="l00412"></a>00412       <span class="keywordflow">default</span>:
<a name="l00413"></a>00413      casestring = <span class="stringliteral">""</span>;
<a name="l00414"></a>00414      <span class="keywordflow">break</span>;
<a name="l00415"></a>00415       }
<a name="l00416"></a>00416 
<a name="l00417"></a>00417       fprintf(fpgnu,<span class="stringliteral">"replot \"%s\" index %d title \"%s\" with lines\n"</span>,
<a name="l00418"></a>00418          fileout,3+3*i,casestring);
<a name="l00419"></a>00419 
<a name="l00420"></a>00420       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"The variation on the green seqvar is now shown in blue.\"\n"</span>);
<a name="l00421"></a>00421       fprintf(fpgnu,<span class="stringliteral">"pause -1 \"Hit return to put vars on intersecting seq...\"\n"</span>);
<a name="l00422"></a>00422       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00423"></a>00423 
<a name="l00424"></a>00424       fprintf(fpgnu,<span class="stringliteral">"set title \"CASE %d - DIM AREA = %10g EUC DIST = %10g\" \n"</span>,i,results[i][0],results[i][1]);
<a name="l00425"></a>00425       fprintf(fpgnu,<span class="stringliteral">"replot \"%s\" index %d using 1:2 title \"%s\" with lines\n"</span>,
<a name="l00426"></a>00426          fileout,4+3*i,<span class="stringliteral">"CASE_INTSV0"</span>);
<a name="l00427"></a>00427       fprintf(fpgnu,<span class="stringliteral">"replot \"%s\" index %d using 1:3 title \"%s\" with lines\n"</span>,
<a name="l00428"></a>00428            fileout,4+3*i,<span class="stringliteral">"CASE_INT1SV1"</span>);
<a name="l00429"></a>00429 
<a name="l00430"></a>00430       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"The red and blue curves are interpolated over\"\n"</span>);
<a name="l00431"></a>00431       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"the overlapping time region. The resulting curves\"\n"</span>);
<a name="l00432"></a>00432       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"are shown in magneta (red) and teal (blue).\"\n"</span>);
<a name="l00433"></a>00433       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00434"></a>00434 
<a name="l00435"></a>00435       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"Values for the analyses based on these curves are\"\n"</span>);
<a name="l00436"></a>00436       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"given in the plot title.\"\n"</span>);
<a name="l00437"></a>00437       fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00438"></a>00438       <span class="keywordflow">if</span> (i !=2 ){
<a name="l00439"></a>00439      fprintf(fpgnu,<span class="stringliteral">"pause -1 \"Hit return to move to case %d...\"\n"</span>,i+1);
<a name="l00440"></a>00440      fprintf(fpgnu,<span class="stringliteral">"pause 0 \"\" \n"</span>);
<a name="l00441"></a>00441       }
<a name="l00442"></a>00442     }
<a name="l00443"></a>00443     fprintf(fpgnu,<span class="stringliteral">"pause 0 \"Finished.\" \n"</span>);
<a name="l00444"></a>00444   }
<a name="l00445"></a>00445 
<a name="l00446"></a>00446 
<a name="l00447"></a>00447   printf(<span class="stringliteral">"FINAL CLEANUP\n"</span>);
<a name="l00448"></a>00448   <span class="comment">//clean up</span>
<a name="l00449"></a>00449 
<a name="l00450"></a>00450   fclose(fpout);
<a name="l00451"></a>00451   free(seqvarsIntersect);
<a name="l00452"></a>00452 
<a name="l00453"></a>00453   <span class="keywordflow">for</span> (i = 0; i&lt; numSeqVars; i++){
<a name="l00454"></a>00454     rc = <a class="code" href="group__Variable.html#g57341fab4863efe2c35476aee509f20d">fc_deleteSeqVariable</a>(numStep,seqvars[i]);
<a name="l00455"></a>00455     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to clean up seqvar"</span>);
<a name="l00456"></a>00456     rc = <a class="code" href="group__Sequence.html#gf23403070ab8aa0a4d172f3cc0293754">fc_deleteSequence</a>(seqs[i]);
<a name="l00457"></a>00457     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to clean up seq"</span>);
<a name="l00458"></a>00458     free(seqvars[i]);
<a name="l00459"></a>00459   }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461   free(seqvars);
<a name="l00462"></a>00462   free(seqs);
<a name="l00463"></a>00463   free(compseqvars); <span class="comment">// just pointers</span>
<a name="l00464"></a>00464   free(compseqs); <span class="comment">// just pointers</span>
<a name="l00465"></a>00465 
<a name="l00466"></a>00466   rc = <a class="code" href="group__Mesh.html#gc3572be7c4803b339a6110f2c3980e8e">fc_deleteMesh</a>(mesh);
<a name="l00467"></a>00467   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to clean up mesh"</span>);
<a name="l00468"></a>00468   rc = <a class="code" href="group__Dataset.html#gbcd9a9a1b5ca718ac61d0707836703a7">fc_deleteDataset</a>(dataset);
<a name="l00469"></a>00469   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to clean up dataset"</span>);
<a name="l00470"></a>00470 
<a name="l00471"></a>00471   rc = <a class="code" href="group__Library.html#g68cec1422dde03b636cf039faafa7baa">fc_finalLibrary</a>();
<a name="l00472"></a>00472   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to finalize library"</span>);
<a name="l00473"></a>00473   exit(0);
<a name="l00474"></a>00474 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Oct 31 11:09:58 2007 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
