<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FCLib: tools/screwBreaks.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>tools/screwBreaks.c</h1><a href="screwBreaks_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (2000) Sandia Corporation. Under the terms of Contract</span>
<a name="l00003"></a>00003 <span class="comment"> * DE-AC04-94AL85000 with Sandia Corporation, the U.S. Government retains</span>
<a name="l00004"></a>00004 <span class="comment"> * certain rights in this software.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00007"></a>00007 <span class="comment"> * modification, are permitted provided that the following conditions are met:</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *   * Redistributions of source code must retain the above copyright</span>
<a name="l00010"></a>00010 <span class="comment"> *     notice, this list of conditions and the following disclaimer.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> *   * Redistributions in binary form must reproduce the above copyright</span>
<a name="l00013"></a>00013 <span class="comment"> *     notice, this list of conditions and the following disclaimer in the</span>
<a name="l00014"></a>00014 <span class="comment"> *     documentation and/or other materials provided with the</span>
<a name="l00015"></a>00015 <span class="comment"> *     distribution.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> *   * Neither the name of Sandia nor the names of any contributors may</span>
<a name="l00018"></a>00018 <span class="comment"> *     be used to endorse or promote products derived from this software</span>
<a name="l00019"></a>00019 <span class="comment"> *     without specific prior written permission.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> *   * Modified source versions must be plainly marked as such, and must</span>
<a name="l00022"></a>00022 <span class="comment"> *     not be misrepresented as being the original software.</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"</span>
<a name="l00025"></a>00025 <span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00026"></a>00026 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00027"></a>00027 <span class="comment"> * ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHORS OR CONTRIBUTORS BE LIABLE FOR</span>
<a name="l00028"></a>00028 <span class="comment"> * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<a name="l00029"></a>00029 <span class="comment"> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00030"></a>00030 <span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00031"></a>00031 <span class="comment"> * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00032"></a>00032 <span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<a name="l00033"></a>00033 <span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span>
<a name="l00034"></a>00034 <span class="comment"> * DAMAGE.</span>
<a name="l00035"></a>00035 <span class="comment"> */</span>
<a name="l00036"></a>00036 <span class="comment"></span>
<a name="l00037"></a>00037 <span class="comment">/**</span>
<a name="l00038"></a>00038 <span class="comment"> * \file screwBreaks.c</span>
<a name="l00039"></a>00039 <span class="comment"> * \brief screw breaking analysis</span>
<a name="l00040"></a>00040 <span class="comment"> *</span>
<a name="l00041"></a>00041 <span class="comment"> * $Source: /usr/local/Repositories/fcdmf/fclib/tools/screwBreaks.c,v $</span>
<a name="l00042"></a>00042 <span class="comment"> * $Revision: 1.26 $</span>
<a name="l00043"></a>00043 <span class="comment"> * $Date: 2006/10/16 20:04:39 $</span>
<a name="l00044"></a>00044 <span class="comment"> *</span>
<a name="l00045"></a>00045 <span class="comment"> * \description</span>
<a name="l00046"></a>00046 <span class="comment"> *</span>
<a name="l00047"></a>00047 <span class="comment"> *    DEAD VARS:</span>
<a name="l00048"></a>00048 <span class="comment"> *    User specifies elements to be considered dead</span>
<a name="l00049"></a>00049 <span class="comment"> *    by a number of variables and threshold values</span>
<a name="l00050"></a>00050 <span class="comment"> *    for each specified on the command line. The dead</span>
<a name="l00051"></a>00051 <span class="comment"> *    set is thus the union of all the specified sets.</span>
<a name="l00052"></a>00052 <span class="comment"> *</span>
<a name="l00053"></a>00053 <span class="comment"> *    BREAKAGE CONDITIONS:</span>
<a name="l00054"></a>00054 <span class="comment"> *    Tool reports when the screws first break or when</span>
<a name="l00055"></a>00055 <span class="comment"> *    any screw side entirely erodes due to the dead set. </span>
<a name="l00056"></a>00056 <span class="comment"> *    The eroded case means the screw has separated</span>
<a name="l00057"></a>00057 <span class="comment"> *    from whatever that side was attached to (this</span>
<a name="l00058"></a>00058 <span class="comment"> *    is typically a tie surface, which is therefore</span>
<a name="l00059"></a>00059 <span class="comment"> *    a special case breakage condition, where the</span>
<a name="l00060"></a>00060 <span class="comment"> *    screw has not split into pieces.). Also gives</span>
<a name="l00061"></a>00061 <span class="comment"> *    total number of broken screws.</span>
<a name="l00062"></a>00062 <span class="comment"> *</span>
<a name="l00063"></a>00063 <span class="comment"> *    BREAKAGE RATIO:</span>
<a name="l00064"></a>00064 <span class="comment"> *    Tool also reports the breakage ratio. This is a rough</span>
<a name="l00065"></a>00065 <span class="comment"> *    estimate of the accumulated cross sectional area of</span>
<a name="l00066"></a>00066 <span class="comment"> *    the dead elements in the column above the screw base.</span>
<a name="l00067"></a>00067 <span class="comment"> *    The screw base is the smallest side which is</span>
<a name="l00068"></a>00068 <span class="comment"> *    connected to only one other side - in a normal shaped</span>
<a name="l00069"></a>00069 <span class="comment"> *    screw this is the bottom circular section. In a </span>
<a name="l00070"></a>00070 <span class="comment"> *    regular cylinder this will be either one of the</span>
<a name="l00071"></a>00071 <span class="comment"> *    two circular sections. This calculation considers</span>
<a name="l00072"></a>00072 <span class="comment"> *    the non-displaced areas and locations of the elements.</span>
<a name="l00073"></a>00073 <span class="comment"> *</span>
<a name="l00074"></a>00074 <span class="comment"> *    Explicitly, the breakage ratio is determined by</span>
<a name="l00075"></a>00075 <span class="comment"> *    1) projecting the dead elements in the screw and</span>
<a name="l00076"></a>00076 <span class="comment"> *    the base surface elements both onto a plane with</span>
<a name="l00077"></a>00077 <span class="comment"> *    normal = normal of the screw base. 2) determining which</span>
<a name="l00078"></a>00078 <span class="comment"> *    elements in the screw base are overlapped by the projected</span>
<a name="l00079"></a>00079 <span class="comment"> *    elements - this is done by comparing the bounding</span>
<a name="l00080"></a>00080 <span class="comment"> *    boxes of the projected dead elements and the screw</span>
<a name="l00081"></a>00081 <span class="comment"> *    base elements and is therefore an overestimation of</span>
<a name="l00082"></a>00082 <span class="comment"> *    overlap 3) summing the area of the overlapped screw</span>
<a name="l00083"></a>00083 <span class="comment"> *    base faces 4) calculating the ratio relative to</span>
<a name="l00084"></a>00084 <span class="comment"> *    the complete screw base area. Be careful how</span>
<a name="l00085"></a>00085 <span class="comment"> *    you use this measure - it is an overestimation and</span>
<a name="l00086"></a>00086 <span class="comment"> *    does not take into consideration how far the</span>
<a name="l00087"></a>00087 <span class="comment"> *    dead elements are relative to one another. </span>
<a name="l00088"></a>00088 <span class="comment"> *</span>
<a name="l00089"></a>00089 <span class="comment"> *    RESULT OUTPUT:</span>
<a name="l00090"></a>00090 <span class="comment"> *    Results are presented in the following fashion:</span>
<a name="l00091"></a>00091 <span class="comment"> *    Every output line lists the Mesh, ScrewID and the timestep #,</span>
<a name="l00092"></a>00092 <span class="comment"> *    to make it easy to grep through an output file. Screw breakage</span>
<a name="l00093"></a>00093 <span class="comment"> *    ratios are reported for all time steps for each screw, up</span>
<a name="l00094"></a>00094 <span class="comment"> *    until the screw is broken (or is eroded).</span>
<a name="l00095"></a>00095 <span class="comment"> *</span>
<a name="l00096"></a>00096 <span class="comment"> *    SCREWS:</span>
<a name="l00097"></a>00097 <span class="comment"> *    The screwmeshes must consist entirely of distinct screws,</span>
<a name="l00098"></a>00098 <span class="comment"> *    but there can be multiple screws in each screwmesh.</span>
<a name="l00099"></a>00099 <span class="comment"> *    Screws are defined by segmenting the screwmesh -- there</span>
<a name="l00100"></a>00100 <span class="comment"> *    is nothing to check that there is anything screw-like</span>
<a name="l00101"></a>00101 <span class="comment"> *    about the screws, other than there must be at least one</span>
<a name="l00102"></a>00102 <span class="comment"> *    distinct "end" which is used in the calculation of the</span>
<a name="l00103"></a>00103 <span class="comment"> *    breakage ratio.</span>
<a name="l00104"></a>00104 <span class="comment"> *</span>
<a name="l00105"></a>00105 <span class="comment"> *    Screws are identified by an arbitary identifier</span>
<a name="l00106"></a>00106 <span class="comment"> *    which will be the same from run to run, as long</span>
<a name="l00107"></a>00107 <span class="comment"> *    as the mesh is identical - renumberings of the</span>
<a name="l00108"></a>00108 <span class="comment"> *    mesh verticies, etc, even if it is topologically</span>
<a name="l00109"></a>00109 <span class="comment"> *    the same may result in a different screw identifier.</span>
<a name="l00110"></a>00110 <span class="comment"> *</span>
<a name="l00111"></a>00111 <span class="comment"> *    Screwmeshes should be input by the same name they have</span>
<a name="l00112"></a>00112 <span class="comment"> *    if you run the fcdump tool on the dataset.(This</span>
<a name="l00113"></a>00113 <span class="comment"> *    name may be different than that given it by different</span>
<a name="l00114"></a>00114 <span class="comment"> *    tools - i.e., may be a different name than appears</span>
<a name="l00115"></a>00115 <span class="comment"> *    in ensight).</span>
<a name="l00116"></a>00116 <span class="comment"> *</span>
<a name="l00117"></a>00117 <span class="comment"> *    OTHER:</span>
<a name="l00118"></a>00118 <span class="comment"> *    Seg_dim is the segmenation_dimension for determining</span>
<a name="l00119"></a>00119 <span class="comment"> *    breakage, defaults to 0. The segmentation dimension </span>
<a name="l00120"></a>00120 <span class="comment"> *    is used to specify the conditions for which live regions</span>
<a name="l00121"></a>00121 <span class="comment"> *    in each screw are considered separate. If 2 regions are</span>
<a name="l00122"></a>00122 <span class="comment"> *    to be considered separate if no element in one region</span>
<a name="l00123"></a>00123 <span class="comment"> *    shares a face with any element in another region (but they</span>
<a name="l00124"></a>00124 <span class="comment"> *    may share edges and verticies), then seg_dim =2. If the</span>
<a name="l00125"></a>00125 <span class="comment"> *    elements in the 2 regions cannot share faces or edges, but</span>
<a name="l00126"></a>00126 <span class="comment"> *    may share verticies, choose seg_dim = 1. If the elements</span>
<a name="l00127"></a>00127 <span class="comment"> *    in the two regions cannot share even verticies, </span>
<a name="l00128"></a>00128 <span class="comment"> *    then seg_dim = 0.</span>
<a name="l00129"></a>00129 <span class="comment"> *</span>
<a name="l00130"></a>00130 <span class="comment"> * \todo</span>
<a name="l00131"></a>00131 <span class="comment"> *    - Note: if we decide to drop the breakage ratio, then this</span>
<a name="l00132"></a>00132 <span class="comment"> *      would be generally useful, since the constraint on the</span>
<a name="l00133"></a>00133 <span class="comment"> *      shapes having an identifiable base is only necessary for </span>
<a name="l00134"></a>00134 <span class="comment"> *      calculating the BR. We could potentially drop that</span>
<a name="l00135"></a>00135 <span class="comment"> *      since we now have the damage variable as something we</span>
<a name="l00136"></a>00136 <span class="comment"> *      can loop through to get closeness to breaking.</span>
<a name="l00137"></a>00137 <span class="comment"> *    - also print out screw verticies or bounding box, so can</span>
<a name="l00138"></a>00138 <span class="comment"> *      ID screws from run to run.</span>
<a name="l00139"></a>00139 <span class="comment"> *</span>
<a name="l00140"></a>00140 <span class="comment"> * \modifications</span>
<a name="l00141"></a>00141 <span class="comment"> *   - 03/09/2006 ACG created. Modification of screw.c.</span>
<a name="l00142"></a>00142 <span class="comment"> *   - 03/14/2006 ACG changed flag for seg_dim, removed</span>
<a name="l00143"></a>00143 <span class="comment"> *                    writeout of nonbroken screws.   </span>
<a name="l00144"></a>00144 <span class="comment"> *   - 03/14/2006 ACG added breakage ratio</span>
<a name="l00145"></a>00145 <span class="comment"> *   - 03/20/2006 ACG commented out local normal function</span>
<a name="l00146"></a>00146 <span class="comment"> *                    since now have fc_getPlanarSideNormal</span>
<a name="l00147"></a>00147 <span class="comment"> *   - 03/22/2006 ACG user can specify more than 1 variable</span>
<a name="l00148"></a>00148 <span class="comment"> *                    and cutoff for the dead set.</span>
<a name="l00149"></a>00149 <span class="comment"> *   - 03/22/2006 ACG removed commented out screwbasenormal function</span>
<a name="l00150"></a>00150 <span class="comment"> *   - 03/24/2006 ACG switching to more general shape screws - </span>
<a name="l00151"></a>00151 <span class="comment"> *                    using getShapeEnds rather than getScrewSides</span>
<a name="l00152"></a>00152 <span class="comment"> *   - 03/24/2006 ACG struct for screw and deathvars for clarity</span>
<a name="l00153"></a>00153 <span class="comment"> *   - 03/24/2006 ACG put proj function into its own subroutine.</span>
<a name="l00154"></a>00154 <span class="comment"> *                    now projects to</span>
<a name="l00155"></a>00155 <span class="comment"> *                    smallest end, no matter what the shape.</span>
<a name="l00156"></a>00156 <span class="comment"> *   - 03/26/2006 ACG moved some stuff into subroutines for clarity. Trying</span>
<a name="l00157"></a>00157 <span class="comment"> *                    to do that with screwBuild but ive got a memory leak...</span>
<a name="l00158"></a>00158 <span class="comment"> *   - 03/26/2006 ACG added loop to check all sides erosion, untested. Moved</span>
<a name="l00159"></a>00159 <span class="comment"> *                    broken, eroded into their own subroutines for symmetry</span>
<a name="l00160"></a>00160 <span class="comment"> *   - 03/27/2006 ACG added printscrew - note IDS start at zero per mesh and</span>
<a name="l00161"></a>00161 <span class="comment"> *                    therefore match ensight format id, but not the lsdyna ids</span>
<a name="l00162"></a>00162 <span class="comment"> *                    (ie, cant match up element ids looking at d3plot file)</span>
<a name="l00163"></a>00163 <span class="comment"> *   - 03/27/2006 ACG WSK fixed memory leak</span>
<a name="l00164"></a>00164 <span class="comment"> *   - 03/28/2006 ACG verified projection results, which resulted in bug fix</span>
<a name="l00165"></a>00165 <span class="comment"> *                    on geom</span>
<a name="l00166"></a>00166 <span class="comment"> *   - 03/28/2006 ACG moved to tools from sandbox (was screw_tool.c)</span>
<a name="l00167"></a>00167 <span class="comment"> *   - 03/29/2006 ACG documentation changes</span>
<a name="l00168"></a>00168 <span class="comment"> *   - 03/29/2006 ACG removed option to specify screwmesh by number becuase</span>
<a name="l00169"></a>00169 <span class="comment"> *                    that might get confused with the material ID. now must</span>
<a name="l00170"></a>00170 <span class="comment"> *                    specify mesh bysame name it has when you do fcdump.</span>
<a name="l00171"></a>00171 <span class="comment"> *   - 05/09/2006 ACG Now outputing info on each screw for all timesteps</span>
<a name="l00172"></a>00172 <span class="comment"> *                    for each screw, up until the screw is broken, even if</span>
<a name="l00173"></a>00173 <span class="comment"> *                    there are no dead elements in the screw. (WSK wanted this)</span>
<a name="l00174"></a>00174 <span class="comment"> *   - 05/09/2006 ACG handles multiple screw meshes (specified on teh command line)</span>
<a name="l00175"></a>00175 <span class="comment"> *   - 05/22/2006 WSD In no mesh names are supplied on the command line, this</span>
<a name="l00176"></a>00176 <span class="comment"> *                    will attemp to find all meshes with 'screw' or 'scrw'</span>
<a name="l00177"></a>00177 <span class="comment"> *                    in the name (case insensitive).</span>
<a name="l00178"></a>00178 <span class="comment"> *   - 05/22/2006 WSD Fiddled with output. Now there is always exactly 1 line</span>
<a name="l00179"></a>00179 <span class="comment"> *                    of output per screw per timestep. At the first break</span>
<a name="l00180"></a>00180 <span class="comment"> *                    it does not report BR any more. And after the first break</span>
<a name="l00181"></a>00181 <span class="comment"> *                    it know prints a line "*** still broken ***".</span>
<a name="l00182"></a>00182 <span class="comment"> *   - 06/02/2006 ACG updated for new fc_getSubsetSies interface </span>
<a name="l00183"></a>00183 <span class="comment"> *   - 06/12/2006 WSD Prints values of sequence. Prints screw bounding boxes.</span>
<a name="l00184"></a>00184 <span class="comment"> *   - 06/28/2006 ACG uses new shape interface</span>
<a name="l00185"></a>00185 <span class="comment">*/</span>
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00188"></a>00188 <span class="preprocessor">#include "<a class="code" href="fc_8h.html">fc.h</a>"</span>
<a name="l00189"></a>00189 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 
<a name="l00192"></a><a class="code" href="structscrewinfo.html">00192</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00193"></a>00193   <span class="comment">//keeping everything for future use, although now we will just want the "base".</span>
<a name="l00194"></a><a class="code" href="structscrewinfo.html#5fb59f6880ab0ebc60373b7db4e2ccfe">00194</a>   <a class="code" href="structFC__Subset.html">FC_Subset</a> whole;
<a name="l00195"></a><a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">00195</a>   <a class="code" href="structFC__Shape.html">FC_Shape</a> shape;
<a name="l00196"></a><a class="code" href="structscrewinfo.html#28c0816c247ce3ef4d121d2994e824e1">00196</a>   <span class="keywordtype">int</span> baseID;
<a name="l00197"></a><a class="code" href="structscrewinfo.html#7f2141ece5d4e4146ba02ebed43dae3d">00197</a>   <span class="keywordtype">double</span> baseArea;
<a name="l00198"></a><a class="code" href="structscrewinfo.html#924956b656029269e80bc8633528415b">00198</a>   <a class="code" href="group__SimpleDataObjects.html#g9687c6aad22d56c60f87659f533869c2">FC_Coords</a> baseNormal;
<a name="l00199"></a><a class="code" href="structscrewinfo.html#1b558974df29e734b90dd5de90054d19">00199</a>   <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a>;
<a name="l00200"></a><a class="code" href="structscrewinfo.html#b588e770c5c7058fd27110609f68d419">00200</a>   <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#155332580fbaac66aa0531315c8ceae8">eroded</a>;
<a name="l00201"></a>00201 } <a class="code" href="structscrewinfo.html">screwinfo</a>;
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 <span class="keyword">typedef</span> <span class="keyword">struct</span>{
<a name="l00204"></a><a class="code" href="structdeathvarinfo.html#1ebd5a95b4c6e28486008caed06d2728">00204</a>   <span class="keywordtype">char</span>* name;
<a name="l00205"></a><a class="code" href="structdeathvarinfo.html#b70b406afadea0a12dda1670415c1249">00205</a>   <span class="keywordtype">char</span>* op;
<a name="l00206"></a>00206   <span class="keywordtype">double</span> val;
<a name="l00207"></a><a class="code" href="structdeathvarinfo.html#1c3d8ee7cbee16aa84da2990885ecb27">00207</a>   <a class="code" href="structFC__Variable.html">FC_Variable</a> *elemdeath;
<a name="l00208"></a>00208 } <a class="code" href="structdeathvarinfo.html">deathvarinfo</a>;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#9c0d57c7d79473a58d460a2658b55ccf">parser</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>**argv, 
<a name="l00212"></a>00212             <span class="keywordtype">char</span>** file_name, <span class="keywordtype">int</span>* numscrewmeshes, <span class="keywordtype">char</span> ***screwmesh_names,
<a name="l00213"></a>00213             <a class="code" href="group__DataTypes.html#g6c0891f21e34bad1d8b2bc7c76193a39">FC_VerbosityLevel</a> *verbose_level, 
<a name="l00214"></a>00214             <span class="keywordtype">int</span>* numdeathvars, <a class="code" href="structdeathvarinfo.html">deathvarinfo</a>** deathvars,
<a name="l00215"></a>00215             <span class="keywordtype">int</span> *seg_dim);
<a name="l00216"></a>00216 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#b08fd837c127178de53d1a59b2be95d4">hasScrewInStr</a>(<span class="keywordtype">char</span>* name);
<a name="l00217"></a>00217 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="gaplines_8c.html#cb3a46b4682216fa4a7faaa40e499a38">parseDeathVarSet</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv, <span class="keywordtype">int</span> *idx, <span class="keywordtype">int</span> *numvars,
<a name="l00218"></a>00218                    <a class="code" href="structdeathvarinfo.html">deathvarinfo</a>** deathvars);
<a name="l00219"></a>00219 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#3c7d3cd775a711ed8dc491f0a7dcecf4">printDeathVarSet</a>(<span class="keywordtype">int</span> numvars, <a class="code" href="structdeathvarinfo.html">deathvarinfo</a> *deathvars);
<a name="l00220"></a>00220 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#7cdd0ea8972d4c479db6af7542cbd3f0">segmentMesh</a>(<a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh, <span class="keywordtype">int</span> shared_dim,
<a name="l00221"></a>00221                  <span class="keywordtype">int</span> *numsegs, <a class="code" href="structFC__Subset.html">FC_Subset</a> **segs);
<a name="l00222"></a>00222 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#06a8f3bedc4bc394d495d5c51272e086">screwInit</a>(<a class="code" href="structscrewinfo.html">screwinfo</a> *screw);
<a name="l00223"></a>00223 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#5acce2ff13dd0460935d9a4151fa1e17">printScrew</a>(<a class="code" href="structscrewinfo.html">screwinfo</a> screw, <span class="keywordtype">char</span>* screwmeshname, <span class="keywordtype">int</span> screwID, <span class="keywordtype">int</span> verb);
<a name="l00224"></a>00224 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#fb214c8ee97531fc590aba2b31ce8119">buildScrews</a>(<a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh, <span class="keywordtype">int</span> *numScrews, <a class="code" href="structscrewinfo.html">screwinfo</a>** screws);
<a name="l00225"></a>00225 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#084bcf4ccb0f893f7b1cffbd3549f0b2">getDeathThresholdSubset</a>(<a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh,<span class="keywordtype">int</span> numdeathvars,
<a name="l00226"></a>00226                        <a class="code" href="structdeathvarinfo.html">deathvarinfo</a>* deathvars,
<a name="l00227"></a>00227                        <span class="keywordtype">int</span> timestep,
<a name="l00228"></a>00228                        <a class="code" href="structFC__Subset.html">FC_Subset</a>* threshold);
<a name="l00229"></a>00229 <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="screwBreaks_8c.html#d56dddfefd5e19aeb6c70fbd903bc955">projection</a>(<a class="code" href="structFC__Subset.html">FC_Subset</a> deadscrew, <a class="code" href="structscrewinfo.html">screwinfo</a> screw);
<a name="l00230"></a>00230 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a>(<a class="code" href="structFC__Subset.html">FC_Subset</a> deadscrew, <span class="keywordtype">int</span> seg_dim, <a class="code" href="structscrewinfo.html">screwinfo</a>* screw);
<a name="l00231"></a>00231 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#155332580fbaac66aa0531315c8ceae8">eroded</a>(<a class="code" href="structFC__Subset.html">FC_Subset</a> deadscrew, <a class="code" href="structscrewinfo.html">screwinfo</a>* screw);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 
<a name="l00234"></a><a class="code" href="screwBreaks_8c.html#9c0d57c7d79473a58d460a2658b55ccf">00234</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#9c0d57c7d79473a58d460a2658b55ccf">parser</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv, <span class="keywordtype">char</span>** file_name,
<a name="l00235"></a>00235             <span class="keywordtype">int</span>* numscrewmeshes, <span class="keywordtype">char</span> ***screwmesh_names,
<a name="l00236"></a>00236             <a class="code" href="group__DataTypes.html#g6c0891f21e34bad1d8b2bc7c76193a39">FC_VerbosityLevel</a>* verbose_level,
<a name="l00237"></a>00237             <span class="keywordtype">int</span> *numdeathvars, <a class="code" href="structdeathvarinfo.html">deathvarinfo</a>** deathvars,
<a name="l00238"></a>00238             <span class="keywordtype">int</span> *seg_dim){
<a name="l00239"></a>00239   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00240"></a>00240   <span class="keywordtype">char</span>** names;
<a name="l00241"></a>00241   <span class="keywordtype">int</span> i, j, nmesh;
<a name="l00242"></a>00242 
<a name="l00243"></a>00243   <span class="comment">// handle arguments</span>
<a name="l00244"></a>00244   <span class="keywordflow">if</span> (argc &lt; 2){
<a name="l00245"></a>00245   usage:
<a name="l00246"></a>00246     printf(<span class="stringliteral">"Usage: %s  [options] file [screwmesh_name(s)]\n"</span>, 
<a name="l00247"></a>00247         argv[0]);
<a name="l00248"></a>00248     printf(<span class="stringliteral">"options: \n"</span>);
<a name="l00249"></a>00249     printf(<span class="stringliteral">"   -h            : print this help message\n"</span>);
<a name="l00250"></a>00250     printf(<span class="stringliteral">"   -v            : verbose: print warning and error messages\n"</span>);
<a name="l00251"></a>00251     printf(<span class="stringliteral">"   -V            : very verbose: prints log and error messages\n"</span>);
<a name="l00252"></a>00252     printf(<span class="stringliteral">"   -n            : number of vars that will specify element death\n"</span>);
<a name="l00253"></a>00253     printf(<span class="stringliteral">"                   followed by var_name, op, value triads. Default is\n"</span>);
<a name="l00254"></a>00254     printf(<span class="stringliteral">"                   Only 1 triad of \"elem_death\" &lt;= 0\n"</span>);
<a name="l00255"></a>00255     printf(<span class="stringliteral">"   -b seg_dim    : segmentation_dimension for determining breakage\n"</span>);
<a name="l00256"></a>00256     printf(<span class="stringliteral">"                   (default is 0)\n"</span>);
<a name="l00257"></a>00257     printf(<span class="stringliteral">"\n"</span>);
<a name="l00258"></a>00258     printf(<span class="stringliteral">"Examples:\n"</span>);
<a name="l00259"></a>00259     printf(<span class="stringliteral">"   ./screwBreaks -b 1 -n 2 elem_death \"&lt;=\" 0 elem_var_8 \"&gt;\" 0.1 ~wkoegle/Work/fcdmf/Data/screw-preload/d3plot Material_ID_1 \n"</span>);
<a name="l00260"></a>00260     printf(<span class="stringliteral">"   ./screwBreaks ~wkoegle/Work/fcdmf/Data/hatch_run1/d3plot\n"</span>);
<a name="l00261"></a>00261     printf(<span class="stringliteral">"   ./screwBreaks ~wkoegle/Work/fcdmf/Data/run30-EMMI-screws/d3plot Material_ID_25 Material_ID_49 &gt; junk; grep \"Screw 0\" junk\n"</span>);
<a name="l00262"></a>00262     printf(<span class="stringliteral">"\n"</span>);
<a name="l00263"></a>00263     printf(<span class="stringliteral">"Output: Prints Breakage Ratio and notification of when screws first break.\n"</span>);
<a name="l00264"></a>00264     printf(<span class="stringliteral">"Stops printing out info for a screw once it has broken.\n"</span>);
<a name="l00265"></a>00265     printf(<span class="stringliteral">"\n"</span>);
<a name="l00266"></a>00266     printf(<span class="stringliteral">"Note: Screws can be normal screw shape or cylindrical etc. Only constraint is\n"</span>);
<a name="l00267"></a>00267     printf(<span class="stringliteral">"that they have an identifiable base for the Breakage Ratio calculation.\n"</span>);
<a name="l00268"></a>00268     exit(-1);
<a name="l00269"></a>00269   }
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   nmesh = 0;
<a name="l00273"></a>00273   names = NULL;
<a name="l00274"></a>00274   <span class="keywordflow">for</span> (i = 1; i &lt; argc; i++) {
<a name="l00275"></a>00275     <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">"-v"</span>)) {
<a name="l00276"></a>00276       *verbose_level = <a class="code" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a3995521f4f1526a6565b08e663106dd6e7">FC_WARNING_MESSAGES</a>;
<a name="l00277"></a>00277     }
<a name="l00278"></a>00278     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">"-V"</span>)) {
<a name="l00279"></a>00279       *verbose_level = <a class="code" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a395a6192ba586cd970dd36a49cd8862714">FC_LOG_MESSAGES</a>;
<a name="l00280"></a>00280     }
<a name="l00281"></a>00281     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(argv[i], <span class="stringliteral">"-h"</span>, 2))
<a name="l00282"></a>00282       <span class="keywordflow">goto</span> usage;
<a name="l00283"></a>00283     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">"-n"</span>)) {      
<a name="l00284"></a>00284       i++;
<a name="l00285"></a>00285       rc = <a class="code" href="gaplines_8c.html#cb3a46b4682216fa4a7faaa40e499a38">parseDeathVarSet</a>(argc,argv,&amp;i, numdeathvars,deathvars);
<a name="l00286"></a>00286       <span class="keywordflow">if</span> (rc!= <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l00287"></a>00287      <span class="keywordflow">goto</span> usage;
<a name="l00288"></a>00288       }
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">"-b"</span>)) {
<a name="l00291"></a>00291       i++;
<a name="l00292"></a>00292       <span class="keywordflow">if</span> (i &lt; argc){
<a name="l00293"></a>00293      *seg_dim = atoi(argv[i]);
<a name="l00294"></a>00294       }<span class="keywordflow">else</span>{
<a name="l00295"></a>00295      <span class="keywordflow">goto</span> usage;
<a name="l00296"></a>00296       }
<a name="l00297"></a>00297     }<span class="keywordflow">else</span>{ 
<a name="l00298"></a>00298       *file_name = argv[i];
<a name="l00299"></a>00299       <span class="comment">// optional mesh names</span>
<a name="l00300"></a>00300       <span class="keywordflow">for</span> (j = i+1; j &lt; argc; j++) {
<a name="l00301"></a>00301      <span class="keywordtype">void</span>* tmp;
<a name="l00302"></a>00302      <span class="keywordflow">if</span> (!strncmp(argv[j],<span class="stringliteral">"-"</span>,1))
<a name="l00303"></a>00303        <span class="keywordflow">break</span>;
<a name="l00304"></a>00304      tmp = (<span class="keywordtype">char</span>**)realloc(names, (nmesh+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
<a name="l00305"></a>00305      <span class="keywordflow">if</span> (!tmp)
<a name="l00306"></a>00306        <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>);
<a name="l00307"></a>00307      names = tmp;
<a name="l00308"></a>00308      names[nmesh] = (<span class="keywordtype">char</span>*)malloc((strlen(argv[j])+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l00309"></a>00309      strcpy(names[nmesh], argv[j]);
<a name="l00310"></a>00310      nmesh++;
<a name="l00311"></a>00311      i++;
<a name="l00312"></a>00312       }
<a name="l00313"></a>00313     }
<a name="l00314"></a>00314   }
<a name="l00315"></a>00315   *screwmesh_names = names;
<a name="l00316"></a>00316   *numscrewmeshes = nmesh;
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <span class="comment">// test args</span>
<a name="l00319"></a>00319   <span class="keywordflow">if</span> (!(*file_name))
<a name="l00320"></a>00320     <span class="keywordflow">goto</span> usage;
<a name="l00321"></a>00321   <span class="keywordflow">if</span> (*seg_dim &lt; 0 || *seg_dim &gt; 2){
<a name="l00322"></a>00322     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Invalid seg dim %d\n"</span>,*seg_dim);
<a name="l00323"></a>00323     exit(-1);
<a name="l00324"></a>00324   }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326   <span class="keywordflow">if</span> (*numdeathvars == 0){ <span class="comment">//default vals</span>
<a name="l00327"></a>00327     *numdeathvars = 1;
<a name="l00328"></a>00328     (*deathvars) = (<a class="code" href="structdeathvarinfo.html">deathvarinfo</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structdeathvarinfo.html">deathvarinfo</a>));
<a name="l00329"></a>00329     <span class="keywordflow">if</span> (deathvars == NULL){
<a name="l00330"></a>00330       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00331"></a>00331       exit(-1);
<a name="l00332"></a>00332     }
<a name="l00333"></a>00333     (*deathvars)[0].name = <span class="stringliteral">"elem_death"</span>;
<a name="l00334"></a>00334     (*deathvars)[0].op = <span class="stringliteral">"&lt;="</span>;
<a name="l00335"></a>00335     (*deathvars[0]).val = 0;
<a name="l00336"></a>00336   }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338   <span class="keywordflow">if</span> (0){
<a name="l00339"></a>00339     <a class="code" href="screwBreaks_8c.html#3c7d3cd775a711ed8dc491f0a7dcecf4">printDeathVarSet</a>(*numdeathvars,*deathvars);
<a name="l00340"></a>00340   }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 <span class="comment">// if any case of 'screw' or 'scrw' in name, return 1 (true) </span>
<a name="l00346"></a><a class="code" href="screwBreaks_8c.html#b08fd837c127178de53d1a59b2be95d4">00346</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#b08fd837c127178de53d1a59b2be95d4">hasScrewInStr</a>(<span class="keywordtype">char</span>* name) {
<a name="l00347"></a>00347   <span class="keywordtype">int</span> i;
<a name="l00348"></a>00348   <span class="keywordtype">int</span> len = strlen(name);
<a name="l00349"></a>00349 
<a name="l00350"></a>00350   <span class="comment">// scan string</span>
<a name="l00351"></a>00351   <span class="keywordflow">for</span> (i = 0; i &lt; len-3; i++) {
<a name="l00352"></a>00352     <span class="keywordflow">if</span> (name[i] == <span class="charliteral">'s'</span> || name[i] == <span class="charliteral">'S'</span>) {
<a name="l00353"></a>00353       <span class="keywordflow">if</span> (!strncasecmp(&amp;name[i], <span class="stringliteral">"screw"</span>, 5) ||
<a name="l00354"></a>00354        !strncasecmp(&amp;name[i], <span class="stringliteral">"scrw"</span>, 4)) {
<a name="l00355"></a>00355      <span class="keywordflow">return</span> 1;
<a name="l00356"></a>00356       }
<a name="l00357"></a>00357     }
<a name="l00358"></a>00358   }
<a name="l00359"></a>00359 
<a name="l00360"></a>00360   <span class="comment">// didnt' find one</span>
<a name="l00361"></a>00361   <span class="keywordflow">return</span> 0;
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00364"></a><a class="code" href="screwBreaks_8c.html#cb3a46b4682216fa4a7faaa40e499a38">00364</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="gaplines_8c.html#cb3a46b4682216fa4a7faaa40e499a38">parseDeathVarSet</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv, <span class="keywordtype">int</span> *idx, <span class="keywordtype">int</span> *numvars, 
<a name="l00365"></a>00365                    <a class="code" href="structdeathvarinfo.html">deathvarinfo</a> **deathvars){
<a name="l00366"></a>00366   <span class="keywordtype">long</span> lcheck;
<a name="l00367"></a>00367   <span class="keywordtype">double</span> dcheck;
<a name="l00368"></a>00368   <span class="keywordtype">int</span> nvars;
<a name="l00369"></a>00369 
<a name="l00370"></a>00370   <span class="keywordtype">char</span>* end_ptr;
<a name="l00371"></a>00371   <span class="keywordtype">int</span> i,j;
<a name="l00372"></a>00372 
<a name="l00373"></a>00373   <span class="keywordflow">if</span> (*numvars !=0){
<a name="l00374"></a>00374     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Invalid deathvar syntax: already have death vars"</span>);
<a name="l00375"></a>00375     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00376"></a>00376   }
<a name="l00377"></a>00377    
<a name="l00378"></a>00378 
<a name="l00379"></a>00379   i = *idx;
<a name="l00380"></a>00380   <span class="keywordflow">if</span> (argc &lt; *idx+1){
<a name="l00381"></a>00381     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Invalid deathvar syntax: cant get num vars"</span>);
<a name="l00382"></a>00382     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>; <span class="comment">//cant get the num of vars</span>
<a name="l00383"></a>00383   }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385   lcheck =  strtol(argv[i], &amp;end_ptr,10);
<a name="l00386"></a>00386   <span class="keywordflow">if</span> (*end_ptr == <span class="charliteral">'\0'</span>){ <span class="comment">//its a number</span>
<a name="l00387"></a>00387     nvars = (int)lcheck;
<a name="l00388"></a>00388   }<span class="keywordflow">else</span> { <span class="comment">//not a number</span>
<a name="l00389"></a>00389     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00390"></a>00390   }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392   <span class="keywordflow">if</span> (nvars == 0){
<a name="l00393"></a>00393     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Invalid deathvar syntax: no death vars"</span>);
<a name="l00394"></a>00394     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00395"></a>00395   }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397   <span class="keywordflow">if</span> (argc &lt; i+3*nvars+1){
<a name="l00398"></a>00398     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Invalid deathvar syntax: not enough args for num vars"</span>);
<a name="l00399"></a>00399     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00400"></a>00400   }
<a name="l00401"></a>00401 
<a name="l00402"></a>00402   *deathvars = (<a class="code" href="structdeathvarinfo.html">deathvarinfo</a>*)malloc(nvars*<span class="keyword">sizeof</span>(<a class="code" href="structdeathvarinfo.html">deathvarinfo</a>));
<a name="l00403"></a>00403   <span class="keywordflow">if</span> (!deathvars){
<a name="l00404"></a>00404     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00405"></a>00405     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00406"></a>00406   }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408   i++;
<a name="l00409"></a>00409   <span class="keywordflow">for</span>(j = 0; j &lt; nvars; j++){
<a name="l00410"></a>00410     (*deathvars)[j].name = argv[i++];
<a name="l00411"></a>00411     (*deathvars)[j].op = argv[i++];
<a name="l00412"></a>00412     dcheck =  strtod(argv[i++], &amp;end_ptr);
<a name="l00413"></a>00413     <span class="keywordflow">if</span> (*end_ptr == <span class="charliteral">'\0'</span>){ <span class="comment">//its a number</span>
<a name="l00414"></a>00414       (*deathvars)[j].val = dcheck;
<a name="l00415"></a>00415     } <span class="keywordflow">else</span>{
<a name="l00416"></a>00416       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Invalid deathvar syntax: non-numerical value for cutoff"</span>);
<a name="l00417"></a>00417       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00418"></a>00418     }
<a name="l00419"></a>00419   }
<a name="l00420"></a>00420 
<a name="l00421"></a>00421   *numvars = nvars;           
<a name="l00422"></a>00422   *idx = i-1;
<a name="l00423"></a>00423 
<a name="l00424"></a>00424   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00425"></a>00425 }
<a name="l00426"></a>00426 
<a name="l00427"></a>00427 
<a name="l00428"></a><a class="code" href="screwBreaks_8c.html#3c7d3cd775a711ed8dc491f0a7dcecf4">00428</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#3c7d3cd775a711ed8dc491f0a7dcecf4">printDeathVarSet</a>(<span class="keywordtype">int</span> numvars, <a class="code" href="structdeathvarinfo.html">deathvarinfo</a> *deathvars){
<a name="l00429"></a>00429   <span class="keywordtype">int</span> i; 
<a name="l00430"></a>00430 
<a name="l00431"></a>00431   printf(<span class="stringliteral">"Deathvars (%d):\n"</span>,numvars);
<a name="l00432"></a>00432   <span class="keywordflow">for</span> (i = 0; i &lt; numvars; i++){
<a name="l00433"></a>00433     printf(<span class="stringliteral">"%s %s %12.4f\n"</span>,deathvars[i].name,deathvars[i].op,
<a name="l00434"></a>00434         deathvars[i].val);
<a name="l00435"></a>00435   }
<a name="l00436"></a>00436   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00437"></a>00437 }
<a name="l00438"></a>00438 
<a name="l00439"></a><a class="code" href="screwBreaks_8c.html#7cdd0ea8972d4c479db6af7542cbd3f0">00439</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#7cdd0ea8972d4c479db6af7542cbd3f0">segmentMesh</a>(<a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh, <span class="keywordtype">int</span> shared_dim,
<a name="l00440"></a>00440                  <span class="keywordtype">int</span> *numsegs, <a class="code" href="structFC__Subset.html">FC_Subset</a> **segs){
<a name="l00441"></a>00441   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00442"></a>00442   <a class="code" href="structFC__Subset.html">FC_Subset</a> whole;
<a name="l00443"></a>00443   <span class="keywordtype">int</span> numMem;
<a name="l00444"></a>00444   <span class="keywordtype">int</span> k;
<a name="l00445"></a>00445 
<a name="l00446"></a>00446   rc = <a class="code" href="group__Mesh.html#g83a0b8188d49812c8d6d4c883cb8e9c4">fc_getMeshNumElement</a>(mesh, &amp;numMem);
<a name="l00447"></a>00447   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"cant get mesh numelem"</span>);
<a name="l00448"></a>00448 
<a name="l00449"></a>00449   rc = <a class="code" href="group__Subset.html#g40d47282abccd83987c83e8051064db2">fc_createSubset</a>(mesh, <span class="stringliteral">"whole"</span>, <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a>, &amp;whole);
<a name="l00450"></a>00450   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"cant create whole mesh"</span>);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452   <span class="keywordflow">for</span> (k = 0; k &lt; numMem; k++){
<a name="l00453"></a>00453     rc = <a class="code" href="group__Subset.html#gf105b25f063533c8bdc24a6e0f1d1002">fc_addMemberToSubset</a>(whole,k);
<a name="l00454"></a>00454     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"cant add member to subset"</span>);
<a name="l00455"></a>00455   }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457   rc = <a class="code" href="group__TopologyRelations.html#g7a5c5ff506dab80fe40ae60a76b3d886">fc_segment</a>(whole, shared_dim,numsegs,segs);
<a name="l00458"></a>00458   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"cant segment mesh"</span>);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460   <a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">fc_deleteSubset</a>(whole);
<a name="l00461"></a>00461 
<a name="l00462"></a>00462   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00463"></a>00463 }
<a name="l00464"></a>00464 
<a name="l00465"></a>00465 
<a name="l00466"></a><a class="code" href="screwBreaks_8c.html#06a8f3bedc4bc394d495d5c51272e086">00466</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#06a8f3bedc4bc394d495d5c51272e086">screwInit</a>(<a class="code" href="structscrewinfo.html">screwinfo</a> *screw){
<a name="l00467"></a>00467   (*screw).whole = <a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>;
<a name="l00468"></a>00468   <span class="comment">//shape gets allocation defaults</span>
<a name="l00469"></a>00469   (*screw).baseID = -1;
<a name="l00470"></a>00470   (*screw).baseArea = 0;
<a name="l00471"></a>00471   (*screw).baseNormal[0] = 0;
<a name="l00472"></a>00472   (*screw).baseNormal[1] = 0;
<a name="l00473"></a>00473   (*screw).baseNormal[2] = 0;
<a name="l00474"></a>00474   (*screw).broken = 0;
<a name="l00475"></a>00475   (*screw).eroded = 0;
<a name="l00476"></a>00476 
<a name="l00477"></a>00477   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00478"></a>00478 }
<a name="l00479"></a>00479 
<a name="l00480"></a>00480 
<a name="l00481"></a><a class="code" href="screwBreaks_8c.html#5acce2ff13dd0460935d9a4151fa1e17">00481</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#5acce2ff13dd0460935d9a4151fa1e17">printScrew</a>(<a class="code" href="structscrewinfo.html">screwinfo</a> screw, <span class="keywordtype">char</span>* screwmeshname, <span class="keywordtype">int</span> screwID, <span class="keywordtype">int</span> verb){
<a name="l00482"></a>00482   <span class="keywordtype">int</span> i;
<a name="l00483"></a>00483 
<a name="l00484"></a>00484   printf(<span class="stringliteral">"Mesh %20s Screw %d: numSides = %d, baseID = %d base area = %6.2f proj norm = (%3.2f, %3.2f, %3.2f)\n"</span>,
<a name="l00485"></a>00485       screwmeshname, screwID,screw.<a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">shape</a>.<a class="code" href="structFC__Shape.html#0bf1533a6d673f68e4a2b2544f3920d2">numSides</a>,screw.<a class="code" href="structscrewinfo.html#28c0816c247ce3ef4d121d2994e824e1">baseID</a>,screw.<a class="code" href="structscrewinfo.html#7f2141ece5d4e4146ba02ebed43dae3d">baseArea</a>,
<a name="l00486"></a>00486       screw.<a class="code" href="structscrewinfo.html#924956b656029269e80bc8633528415b">baseNormal</a>[0],screw.<a class="code" href="structscrewinfo.html#924956b656029269e80bc8633528415b">baseNormal</a>[1],screw.<a class="code" href="structscrewinfo.html#924956b656029269e80bc8633528415b">baseNormal</a>[2]);
<a name="l00487"></a>00487   <span class="keywordflow">if</span> (verb){
<a name="l00488"></a>00488     <span class="keywordflow">for</span> (i = 0; i  &lt; screw.<a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">shape</a>.<a class="code" href="structFC__Shape.html#0bf1533a6d673f68e4a2b2544f3920d2">numSides</a>; i++){
<a name="l00489"></a>00489       <span class="keywordflow">if</span> (i == screw.<a class="code" href="structscrewinfo.html#28c0816c247ce3ef4d121d2994e824e1">baseID</a>){
<a name="l00490"></a>00490      printf(<span class="stringliteral">"Side %d:\n"</span>,i);
<a name="l00491"></a>00491      <a class="code" href="group__Subset.html#g6ad11070801e0195f84c5576b2cadfe6">fc_printSubset</a>(screw.<a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">shape</a>.<a class="code" href="structFC__Shape.html#287a16f0313b8ba291887b7fc22a03df">faces</a>[i],<span class="stringliteral">"faces"</span>,1);
<a name="l00492"></a>00492      <a class="code" href="group__Subset.html#g6ad11070801e0195f84c5576b2cadfe6">fc_printSubset</a>(screw.<a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">shape</a>.<a class="code" href="structFC__Shape.html#20606b248ab02e8bb2683fd4c82c038d">elems</a>[i],<span class="stringliteral">"elems"</span>,1);
<a name="l00493"></a>00493       }
<a name="l00494"></a>00494     }
<a name="l00495"></a>00495   }
<a name="l00496"></a>00496   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00497"></a>00497 }
<a name="l00498"></a>00498 
<a name="l00499"></a>00499 
<a name="l00500"></a><a class="code" href="screwBreaks_8c.html#fb214c8ee97531fc590aba2b31ce8119">00500</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#fb214c8ee97531fc590aba2b31ce8119">buildScrews</a>(<a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh, <span class="keywordtype">int</span> *nScrews, <a class="code" href="structscrewinfo.html">screwinfo</a>** scr){
<a name="l00501"></a>00501   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00502"></a>00502   <a class="code" href="structFC__Subset.html">FC_Subset</a> *screwsegs;
<a name="l00503"></a>00503   <span class="keywordtype">int</span> numScrews;
<a name="l00504"></a>00504   <a class="code" href="structscrewinfo.html">screwinfo</a> *screws;
<a name="l00505"></a>00505 
<a name="l00506"></a>00506   <span class="keywordtype">int</span> screwsideangle = 80;
<a name="l00507"></a>00507   <span class="keywordtype">int</span> screwshareddim = 0;
<a name="l00508"></a>00508   <span class="keywordtype">int</span> i;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510   
<a name="l00511"></a>00511   <span class="comment">//segment mesh to get the screws</span>
<a name="l00512"></a>00512   <span class="comment">//cant use the screw function becuase 1) we want the whole segments for</span>
<a name="l00513"></a>00513   <span class="comment">//the projection 2) this does the plug shaped screws as well</span>
<a name="l00514"></a>00514   rc = <a class="code" href="screwBreaks_8c.html#7cdd0ea8972d4c479db6af7542cbd3f0">segmentMesh</a>(mesh,0, &amp;numScrews, &amp;screwsegs);
<a name="l00515"></a>00515   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Can't segment mesh to get screws"</span>);
<a name="l00516"></a>00516   <span class="comment">//  printf("num screws = %d\n",numScrews);</span>
<a name="l00517"></a>00517 
<a name="l00518"></a>00518   screws = malloc(numScrews*<span class="keyword">sizeof</span>(<a class="code" href="structscrewinfo.html">screwinfo</a>)); 
<a name="l00519"></a>00519   <span class="keywordflow">if</span> (screws == NULL){
<a name="l00520"></a>00520     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00521"></a>00521     exit(-1);
<a name="l00522"></a>00522   }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524   <span class="keywordflow">for</span> (i = 0; i &lt; numScrews; i++){
<a name="l00525"></a>00525     <span class="keywordtype">int</span> numEnds, *endArray;
<a name="l00526"></a>00526     <a class="code" href="structFC__Shape.html">FC_Shape</a> *shapes;
<a name="l00527"></a>00527     <span class="keywordtype">int</span> numShapes;
<a name="l00528"></a>00528 
<a name="l00529"></a>00529     <a class="code" href="screwBreaks_8c.html#06a8f3bedc4bc394d495d5c51272e086">screwInit</a>(&amp;(screws[i]));
<a name="l00530"></a>00530 
<a name="l00531"></a>00531     screws[i].<a class="code" href="structscrewinfo.html#5fb59f6880ab0ebc60373b7db4e2ccfe">whole</a> = screwsegs[i];
<a name="l00532"></a>00532     <span class="comment">//this will get them in some random order</span>
<a name="l00533"></a>00533     rc = <a class="code" href="group__Shape.html#g676c7405326649504e5c52fb700fecf4">fc_getSubsetShapes</a>(screws[i].whole,screwsideangle,screwshareddim,
<a name="l00534"></a>00534                     &amp;numShapes,&amp;shapes);
<a name="l00535"></a>00535     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a> || numShapes &lt;= 1){
<a name="l00536"></a>00536       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Can't get screw shape - aborting"</span>);
<a name="l00537"></a>00537     }
<a name="l00538"></a>00538     
<a name="l00539"></a>00539     screws[i].<a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">shape</a> = shapes[0];
<a name="l00540"></a>00540     free(shapes); <span class="comment">//but not the shape</span>
<a name="l00541"></a>00541 
<a name="l00542"></a>00542     <span class="comment">//now get the smallest end for the projection</span>
<a name="l00543"></a>00543     rc = <a class="code" href="group__Shape.html#gd862089595d35c47e3a5e3b8b0e63c35">fc_getShapeEnds</a>(&amp;screws[i].shape, &amp;numEnds,&amp;endArray);
<a name="l00544"></a>00544     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l00545"></a>00545       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Can't get screwsubset ends - aborting"</span>);
<a name="l00546"></a>00546     }
<a name="l00547"></a>00547 
<a name="l00548"></a>00548     <span class="comment">// early exit</span>
<a name="l00549"></a>00549     <span class="comment">// Question: we are rejecting the whole mesh, but we could just dump </span>
<a name="l00550"></a>00550     <span class="comment">// non-screw segemnts? YES we could, but not today AG 6/28/06</span>
<a name="l00551"></a>00551     <span class="keywordflow">if</span> (numEnds &lt;= 1) {
<a name="l00552"></a>00552       <span class="comment">// FIX: probably have within screw data to cleanup</span>
<a name="l00553"></a>00553       <span class="comment">// need a screwFinal</span>
<a name="l00554"></a>00554       <a class="code" href="group__Shape.html#g472eb5141c2ac7917aae158bb6181eb5">fc_freeShape</a>(&amp;screws[i].shape);
<a name="l00555"></a>00555       free(screws);
<a name="l00556"></a>00556       free(screwsegs);
<a name="l00557"></a>00557       <span class="keywordflow">return</span> 1;
<a name="l00558"></a>00558     } 
<a name="l00559"></a>00559 
<a name="l00560"></a>00560     screws[i].<a class="code" href="structscrewinfo.html#28c0816c247ce3ef4d121d2994e824e1">baseID</a> = endArray[0];
<a name="l00561"></a>00561     free(endArray);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563     rc = <a class="code" href="group__GeometricRelations.html#gcf76b8606254cc1a1c610ccd31760cdf">fc_getSubsetArea</a>(screws[i].shape.faces[screws[i].<a class="code" href="structscrewinfo.html#28c0816c247ce3ef4d121d2994e824e1">baseID</a>],
<a name="l00564"></a>00564                  &amp;screws[i].<a class="code" href="structscrewinfo.html#7f2141ece5d4e4146ba02ebed43dae3d">baseArea</a>);
<a name="l00565"></a>00565     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc,<span class="stringliteral">"Can't get screwbase area"</span>);
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     rc = <a class="code" href="group__Shape.html#gc863b878d91c35618d1095b72ef6a0bb">fc_getPlanarSideNormal</a>(&amp;screws[i].shape,screws[i].baseID,
<a name="l00568"></a>00568                     &amp;(screws[i].baseNormal));
<a name="l00569"></a>00569     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc,<span class="stringliteral">"Can't get screwbase normal"</span>);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571 
<a name="l00572"></a>00572   }
<a name="l00573"></a>00573   
<a name="l00574"></a>00574   *nScrews = numScrews;
<a name="l00575"></a>00575   *scr = screws;
<a name="l00576"></a>00576 
<a name="l00577"></a>00577   free(screwsegs);
<a name="l00578"></a>00578 
<a name="l00579"></a>00579   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00580"></a>00580 }
<a name="l00581"></a>00581 
<a name="l00582"></a>00582 
<a name="l00583"></a><a class="code" href="screwBreaks_8c.html#084bcf4ccb0f893f7b1cffbd3549f0b2">00583</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#084bcf4ccb0f893f7b1cffbd3549f0b2">getDeathThresholdSubset</a>(<a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh, <span class="keywordtype">int</span> numdeathvars,
<a name="l00584"></a>00584                        <a class="code" href="structdeathvarinfo.html">deathvarinfo</a>* deathvars, 
<a name="l00585"></a>00585                        <span class="keywordtype">int</span> timestep,
<a name="l00586"></a>00586                        <a class="code" href="structFC__Subset.html">FC_Subset</a>* threshold){
<a name="l00587"></a>00587   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00588"></a>00588   <span class="keywordtype">int</span> k;
<a name="l00589"></a>00589 
<a name="l00590"></a>00590   rc = <a class="code" href="group__Subset.html#g40d47282abccd83987c83e8051064db2">fc_createSubset</a>(mesh,<span class="stringliteral">"threshold"</span>,<a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a>,threshold);
<a name="l00591"></a>00591   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc,<span class="stringliteral">"failed to create empty threshold subset"</span>);
<a name="l00592"></a>00592   <span class="comment">//get dead regions for this timestep</span>
<a name="l00593"></a>00593   <span class="keywordflow">for</span> (k = 0; k &lt; numdeathvars; k++){
<a name="l00594"></a>00594     <a class="code" href="structFC__Subset.html">FC_Subset</a> deathset;
<a name="l00595"></a>00595     <span class="keywordtype">int</span> *arr, nummem;
<a name="l00596"></a>00596 
<a name="l00597"></a>00597     rc = <a class="code" href="group__Threshold.html#g96adad55812ccdee300831275ea3b355">fc_createThresholdSubset</a>(deathvars[k].elemdeath[timestep], 
<a name="l00598"></a>00598                       deathvars[k].op,
<a name="l00599"></a>00599                       deathvars[k].val,
<a name="l00600"></a>00600                       <span class="stringliteral">"temp"</span>, &amp;deathset);
<a name="l00601"></a>00601     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Failed to theshold using op '%s' and value '%g'"</span>,
<a name="l00602"></a>00602                 deathvars[k].op, deathvars[k].val);
<a name="l00603"></a>00603     
<a name="l00604"></a>00604     rc=<a class="code" href="group__Subset.html#g7a79d4d1e13846ae12abe55ef2db3c3d">fc_getSubsetMembersAsArray</a>(deathset,&amp;nummem,&amp;arr);
<a name="l00605"></a>00605     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"cant get dead subset members"</span>);
<a name="l00606"></a>00606     rc = <a class="code" href="group__Subset.html#g47d34843c8d66c114c2c81e3a1fc14e4">fc_addArrayMembersToSubset</a>(*threshold,nummem,arr);
<a name="l00607"></a>00607     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"cant add dead subset members to threshold subset"</span>);
<a name="l00608"></a>00608     
<a name="l00609"></a>00609     free(arr);
<a name="l00610"></a>00610     <a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">fc_deleteSubset</a>(deathset);
<a name="l00611"></a>00611   }
<a name="l00612"></a>00612 
<a name="l00613"></a>00613   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00614"></a>00614 }
<a name="l00615"></a>00615 
<a name="l00616"></a>00616 
<a name="l00617"></a><a class="code" href="screwBreaks_8c.html#d56dddfefd5e19aeb6c70fbd903bc955">00617</a> <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="screwBreaks_8c.html#d56dddfefd5e19aeb6c70fbd903bc955">projection</a>(<a class="code" href="structFC__Subset.html">FC_Subset</a> deadscrew, <a class="code" href="structscrewinfo.html">screwinfo</a> screw){
<a name="l00618"></a>00618   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00619"></a>00619   <a class="code" href="structFC__Subset.html">FC_Subset</a> maskedScrewBaseIDS;
<a name="l00620"></a>00620   <a class="code" href="structFC__Subset.html">FC_Subset</a> decayedBase;
<a name="l00621"></a>00621   <span class="keywordtype">double</span> ret = 0.0;
<a name="l00622"></a>00622   <span class="keywordtype">int</span> num1;
<a name="l00623"></a>00623 
<a name="l00624"></a>00624   <span class="comment">//  fc_printSubset(deadscrew,"deadset",0);</span>
<a name="l00625"></a>00625   <span class="comment">//  fc_printSubset(screw.elems[screw.baseID],"screwbase",1);</span>
<a name="l00626"></a>00626   rc = <a class="code" href="group__Subset.html#g8b932d306fb8f41ef49677f803fd9fd1">fc_getSubsetNumMember</a>(deadscrew,&amp;num1);
<a name="l00627"></a>00627   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"cant get subset num members"</span>);
<a name="l00628"></a>00628   <span class="keywordflow">if</span> (num1){
<a name="l00629"></a>00629     rc = <a class="code" href="group__GeometricRelations.html#g95b267fcaa314e0fcddd0c72b53ccbeb">fc_projectedSubsetElementBoundingBoxIntersection</a>(deadscrew,
<a name="l00630"></a>00630                                      screw.<a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">shape</a>.<a class="code" href="structFC__Shape.html#20606b248ab02e8bb2683fd4c82c038d">elems</a>[screw.<a class="code" href="structscrewinfo.html#28c0816c247ce3ef4d121d2994e824e1">baseID</a>],
<a name="l00631"></a>00631                                      screw.<a class="code" href="structscrewinfo.html#924956b656029269e80bc8633528415b">baseNormal</a>,
<a name="l00632"></a>00632                                      &amp;maskedScrewBaseIDS);
<a name="l00633"></a>00633     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Failed to get projected BBox Intersection"</span>);
<a name="l00634"></a>00634     
<a name="l00635"></a>00635     <span class="comment">//Now we want the areas of the maskedIDS relative to the area of the</span>
<a name="l00636"></a>00636     <span class="comment">//full base.</span>
<a name="l00637"></a>00637     rc = <a class="code" href="group__ElemDeath.html#g97e9b3fb4f3a93e7d301f8e95b76bb8e">fc_getDecayedSkin</a>(maskedScrewBaseIDS,&amp;screw.<a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">shape</a>.<a class="code" href="structFC__Shape.html#287a16f0313b8ba291887b7fc22a03df">faces</a>[screw.<a class="code" href="structscrewinfo.html#28c0816c247ce3ef4d121d2994e824e1">baseID</a>],
<a name="l00638"></a>00638                   &amp;decayedBase); <span class="comment">//go from elem-&gt;faces</span>
<a name="l00639"></a>00639     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Failed to get decayed skin"</span>);
<a name="l00640"></a>00640     <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(decayedBase,<a class="code" href="group__Handles.html#g05b02ab7a13c2ad72dd9a0862fc11356">FC_NULL_SUBSET</a>)){
<a name="l00641"></a>00641       rc = <a class="code" href="group__GeometricRelations.html#gcf76b8606254cc1a1c610ccd31760cdf">fc_getSubsetArea</a>(decayedBase,&amp;ret);
<a name="l00642"></a>00642       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Failed to get areas"</span>);
<a name="l00643"></a>00643       <a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">fc_deleteSubset</a>(decayedBase);
<a name="l00644"></a>00644     }
<a name="l00645"></a>00645     <a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">fc_deleteSubset</a>(maskedScrewBaseIDS);
<a name="l00646"></a>00646   }
<a name="l00647"></a>00647 
<a name="l00648"></a>00648   <span class="keywordflow">return</span> ret;
<a name="l00649"></a>00649 }
<a name="l00650"></a>00650 
<a name="l00651"></a>00651 
<a name="l00652"></a><a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">00652</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a>(<a class="code" href="structFC__Subset.html">FC_Subset</a> deadscrew, <span class="keywordtype">int</span> seg_dim, <a class="code" href="structscrewinfo.html">screwinfo</a> *screw){
<a name="l00653"></a>00653   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00654"></a>00654   <a class="code" href="structFC__Subset.html">FC_Subset</a> *livesegments;
<a name="l00655"></a>00655   <span class="keywordtype">int</span> numliveseg;
<a name="l00656"></a>00656   <span class="keywordtype">int</span> k;
<a name="l00657"></a>00657 
<a name="l00658"></a>00658   <span class="comment">//segment live regions</span>
<a name="l00659"></a>00659   rc = <a class="code" href="group__ElemDeath.html#g0371b6ec91633a487a0aa87fab4c465d">fc_subsetSegmentsSubset</a>(deadscrew, screw-&gt;<a class="code" href="structscrewinfo.html#5fb59f6880ab0ebc60373b7db4e2ccfe">whole</a>,
<a name="l00660"></a>00660                       seg_dim,<span class="stringliteral">"live"</span>,&amp;numliveseg, &amp;livesegments);
<a name="l00661"></a>00661   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Failed in subsetSegmentsSubset"</span>);
<a name="l00662"></a>00662      
<a name="l00663"></a>00663   <span class="keywordflow">if</span> (numliveseg &gt; 1){
<a name="l00664"></a>00664     screw-&gt;<a class="code" href="structscrewinfo.html#1b558974df29e734b90dd5de90054d19">broken</a> = 1;
<a name="l00665"></a>00665   }
<a name="l00666"></a>00666      
<a name="l00667"></a>00667   <span class="keywordflow">for</span> (k = 0; k &lt; numliveseg; k++){
<a name="l00668"></a>00668     <a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">fc_deleteSubset</a>(livesegments[k]);
<a name="l00669"></a>00669   }
<a name="l00670"></a>00670   free(livesegments);
<a name="l00671"></a>00671 
<a name="l00672"></a>00672   <span class="keywordflow">return</span> screw-&gt;<a class="code" href="structscrewinfo.html#1b558974df29e734b90dd5de90054d19">broken</a>;
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 
<a name="l00675"></a>00675 
<a name="l00676"></a><a class="code" href="screwBreaks_8c.html#155332580fbaac66aa0531315c8ceae8">00676</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="screwBreaks_8c.html#155332580fbaac66aa0531315c8ceae8">eroded</a>(<a class="code" href="structFC__Subset.html">FC_Subset</a> deadscrew, <a class="code" href="structscrewinfo.html">screwinfo</a> *screw){
<a name="l00677"></a>00677   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00678"></a>00678   <span class="keywordtype">int</span> *flag;
<a name="l00679"></a>00679   <span class="keywordtype">int</span> k;
<a name="l00680"></a>00680 
<a name="l00681"></a>00681   rc = <a class="code" href="group__ElemDeath.html#g00cb2083be4d7e89847683b947fc8fdd">fc_getShapeSidesDecayType</a>(deadscrew,&amp;(screw-&gt;<a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">shape</a>),&amp;flag);
<a name="l00682"></a>00682   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Can't get decayed shape "</span>);
<a name="l00683"></a>00683   <span class="keywordflow">for</span> (k = 0; k &lt; screw-&gt;<a class="code" href="structscrewinfo.html#8b92d4b84539a07def858db47aff34ce">shape</a>.<a class="code" href="structFC__Shape.html#0bf1533a6d673f68e4a2b2544f3920d2">numSides</a>; k++){
<a name="l00684"></a>00684     <span class="keywordflow">if</span> (flag[k] ==2){
<a name="l00685"></a>00685       screw-&gt;<a class="code" href="structscrewinfo.html#b588e770c5c7058fd27110609f68d419">eroded</a> = 1;
<a name="l00686"></a>00686       <span class="keywordflow">break</span>;
<a name="l00687"></a>00687     }
<a name="l00688"></a>00688   }
<a name="l00689"></a>00689   free(flag);
<a name="l00690"></a>00690   <span class="keywordflow">return</span> screw-&gt;<a class="code" href="structscrewinfo.html#b588e770c5c7058fd27110609f68d419">eroded</a>;
<a name="l00691"></a>00691 }
<a name="l00692"></a>00692 
<a name="l00693"></a>00693 
<a name="l00694"></a>00694 
<a name="l00695"></a>00695 <span class="comment">/*******************************************************************</span>
<a name="l00696"></a>00696 <span class="comment"> *</span>
<a name="l00697"></a>00697 <span class="comment"> *   MAIN</span>
<a name="l00698"></a>00698 <span class="comment"> *</span>
<a name="l00699"></a>00699 <span class="comment"> ******************************************************************/</span>
<a name="l00700"></a><a class="code" href="screwBreaks_8c.html#24e6ce6d053864cf5fb7af941457bb0e">00700</a> <span class="keywordtype">int</span> <a class="code" href="analyzeSpotWelds_8c.html#24e6ce6d053864cf5fb7af941457bb0e">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv) {
<a name="l00701"></a>00701   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00702"></a>00702   <a class="code" href="structFC__Dataset.html">FC_Dataset</a> dataset;
<a name="l00703"></a>00703   <a class="code" href="structFC__Sequence.html">FC_Sequence</a> *sequences, sequence;
<a name="l00704"></a>00704   <a class="code" href="structFC__Mesh.html">FC_Mesh</a>* meshes, *screwmeshes;
<a name="l00705"></a>00705 
<a name="l00706"></a>00706   <a class="code" href="structscrewinfo.html">screwinfo</a> *screws;
<a name="l00707"></a>00707   <span class="keywordtype">int</span> numMesh, numSeq, numStep;
<a name="l00708"></a>00708   <span class="keywordtype">int</span> numScrews;
<a name="l00709"></a>00709 
<a name="l00710"></a>00710   <span class="keywordtype">int</span> seg_dim = 0;
<a name="l00711"></a>00711   <span class="keywordtype">char</span>* file_name = NULL;
<a name="l00712"></a>00712   <span class="keywordtype">char</span>** screwmesh_names;
<a name="l00713"></a>00713   <span class="keywordtype">int</span> numscrewmeshes = 0;
<a name="l00714"></a>00714   <span class="keywordtype">int</span> numdeathvars = 0;
<a name="l00715"></a>00715   <a class="code" href="structdeathvarinfo.html">deathvarinfo</a> *deathvars;
<a name="l00716"></a>00716   <span class="keywordtype">int</span> tscrews = 0;
<a name="l00717"></a>00717   <span class="keywordtype">int</span> tscrewsbroken = 0;
<a name="l00718"></a>00718 
<a name="l00719"></a>00719   <a class="code" href="group__DataTypes.html#g6c0891f21e34bad1d8b2bc7c76193a39">FC_VerbosityLevel</a> verbose_level = <a class="code" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a399cb0ad9c1f97775f8954860a08d78144">FC_QUIET</a>;
<a name="l00720"></a>00720   <span class="keywordtype">int</span> i,j,imesh;
<a name="l00721"></a>00721   
<a name="l00722"></a>00722   rc = <a class="code" href="screwBreaks_8c.html#9c0d57c7d79473a58d460a2658b55ccf">parser</a>(argc,argv, &amp;file_name, &amp;numscrewmeshes,&amp;screwmesh_names,
<a name="l00723"></a>00723            &amp;verbose_level, &amp;numdeathvars, &amp;deathvars, &amp;seg_dim);
<a name="l00724"></a>00724   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc,<span class="stringliteral">"can't parse args"</span>);
<a name="l00725"></a>00725 
<a name="l00726"></a>00726   <span class="comment">// init library and load dataset </span>
<a name="l00727"></a>00727   rc = <a class="code" href="group__Library.html#gf13f047de6d44c9028d4944bc29867db">fc_setLibraryVerbosity</a>(verbose_level);
<a name="l00728"></a>00728   <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(rc);
<a name="l00729"></a>00729   rc = <a class="code" href="group__Library.html#g355d03ffe3f8c560e9343716f78af097">fc_initLibrary</a>();
<a name="l00730"></a>00730   <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(rc);
<a name="l00731"></a>00731   rc = <a class="code" href="group__FileIO.html#g953a8c4a7feb785e0091b7cf58626092">fc_loadDataset</a>(file_name, &amp;dataset);
<a name="l00732"></a>00732   <span class="keywordflow">if</span> (rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l00733"></a>00733     printf(<span class="stringliteral">"Failed to load dataset %s\n"</span>,file_name);
<a name="l00734"></a>00734     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Failed to load dataset '%s'"</span>, file_name);
<a name="l00735"></a>00735   }
<a name="l00736"></a>00736   
<a name="l00737"></a>00737   <span class="comment">// Get number of meshes and mesh names</span>
<a name="l00738"></a>00738   rc = <a class="code" href="group__Mesh.html#ge71cd0e179143c6d82d58b9cc78cc436">fc_getMeshes</a>(dataset, &amp;numMesh, &amp;meshes);
<a name="l00739"></a>00739   <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(rc);
<a name="l00740"></a>00740 
<a name="l00741"></a>00741   <span class="comment">// Get the screw meshes</span>
<a name="l00742"></a>00742   screwmeshes = (<a class="code" href="structFC__Mesh.html">FC_Mesh</a>*)malloc(numMesh*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Mesh.html">FC_Mesh</a>)); <span class="comment">// numMesh is max</span>
<a name="l00743"></a>00743   <span class="keywordflow">if</span> (!screwmeshes)
<a name="l00744"></a>00744     <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>);
<a name="l00745"></a>00745   <span class="keywordflow">if</span> (numscrewmeshes &gt; 0) {
<a name="l00746"></a>00746     <span class="keywordflow">for</span> (imesh = 0; imesh &lt; numscrewmeshes; imesh++) {
<a name="l00747"></a>00747       FC_Mesh *returnMeshes;
<a name="l00748"></a>00748       <span class="keywordtype">int</span> numReturnMeshes;
<a name="l00749"></a>00749       rc = <a class="code" href="group__Mesh.html#g8f35371531555da3b336a94d7ce3053d">fc_getMeshByName</a>(dataset, screwmesh_names[imesh], 
<a name="l00750"></a>00750                    &amp;numReturnMeshes,&amp;returnMeshes);
<a name="l00751"></a>00751       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Failed to get mesh by name"</span>);
<a name="l00752"></a>00752       <span class="keywordflow">if</span> (numReturnMeshes != 1){
<a name="l00753"></a>00753      <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Problems finding (unique) mesh '%s' - found %d matches"</span>,
<a name="l00754"></a>00754                     screwmesh_names[imesh],numReturnMeshes);
<a name="l00755"></a>00755       }
<a name="l00756"></a>00756       screwmeshes[imesh] = returnMeshes[0];
<a name="l00757"></a>00757       free(returnMeshes);
<a name="l00758"></a>00758     }
<a name="l00759"></a>00759   }
<a name="l00760"></a>00760   <span class="keywordflow">else</span> {
<a name="l00761"></a>00761     <span class="keywordtype">char</span>* temp_name;
<a name="l00762"></a>00762     screwmesh_names = (<span class="keywordtype">char</span>**)malloc(numMesh*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
<a name="l00763"></a>00763     <span class="keywordflow">if</span> (!screwmesh_names)
<a name="l00764"></a>00764       <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(FC_MEMORY_ERROR);
<a name="l00765"></a>00765     <span class="keywordflow">for</span> (imesh = 0; imesh &lt; numMesh; imesh++) {
<a name="l00766"></a>00766       rc = <a class="code" href="group__Mesh.html#g9f5a1b484e4b5ab4e0e137bfe34e10d6">fc_getMeshName</a>(meshes[imesh], &amp;temp_name);
<a name="l00767"></a>00767       <span class="keywordflow">if</span> (<a class="code" href="screwBreaks_8c.html#b08fd837c127178de53d1a59b2be95d4">hasScrewInStr</a>(temp_name)) {
<a name="l00768"></a>00768      screwmeshes[numscrewmeshes] = meshes[imesh];
<a name="l00769"></a>00769      screwmesh_names[numscrewmeshes] = temp_name;
<a name="l00770"></a>00770      numscrewmeshes++;
<a name="l00771"></a>00771       }
<a name="l00772"></a>00772       <span class="keywordflow">else</span> {
<a name="l00773"></a>00773      free(temp_name);
<a name="l00774"></a>00774       }
<a name="l00775"></a>00775     }
<a name="l00776"></a>00776     <span class="keywordflow">if</span> (numscrewmeshes &lt; 1) 
<a name="l00777"></a>00777       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, 
<a name="l00778"></a>00778       <span class="stringliteral">"No meshes with 'screw' or 'scrw' in the name were found"</span>);
<a name="l00779"></a>00779   }
<a name="l00780"></a>00780   <span class="keywordflow">if</span> (numscrewmeshes &lt; numMesh) {
<a name="l00781"></a>00781     realloc(screwmeshes, numscrewmeshes*<span class="keyword">sizeof</span>(FC_Mesh)); <span class="comment">// shrink to actual</span>
<a name="l00782"></a>00782   }
<a name="l00783"></a>00783 
<a name="l00784"></a>00784   <span class="comment">// get the sequence</span>
<a name="l00785"></a>00785   rc = <a class="code" href="group__Sequence.html#g4e9e6506fc7e6ce22310105003a21789">fc_getSequences</a>(dataset, &amp;numSeq, &amp;sequences);
<a name="l00786"></a>00786   <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get sequences"</span>);
<a name="l00787"></a>00787   <span class="keywordflow">if</span> (numSeq &lt; 1) {
<a name="l00788"></a>00788     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <span class="stringliteral">"expecting at least one sequence"</span>);
<a name="l00789"></a>00789   }
<a name="l00790"></a>00790   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numSeq &gt; 1) {
<a name="l00791"></a>00791     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"Expected only 1 sequence not %d, will use "</span>
<a name="l00792"></a>00792                    <span class="stringliteral">"first one"</span>, numSeq);
<a name="l00793"></a>00793   }
<a name="l00794"></a>00794   sequence = sequences[0];
<a name="l00795"></a>00795   free(sequences);
<a name="l00796"></a>00796   
<a name="l00797"></a>00797   <span class="comment">// header</span>
<a name="l00798"></a>00798   printf(<span class="stringliteral">"Screw characterizations for dataset '%s'\n"</span>, file_name);
<a name="l00799"></a>00799   <span class="keywordflow">if</span> (numMesh &lt; 0) {
<a name="l00800"></a>00800     printf(<span class="stringliteral">"No meshes found\n"</span>);
<a name="l00801"></a>00801     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"No meshes were found\n"</span>);
<a name="l00802"></a>00802     exit(-1);
<a name="l00803"></a>00803   }
<a name="l00804"></a>00804 
<a name="l00805"></a>00805   printf(<span class="stringliteral">"Sequence values:\n"</span>);
<a name="l00806"></a>00806   {
<a name="l00807"></a>00807     <span class="keywordtype">double</span>* coords;
<a name="l00808"></a>00808     rc = <a class="code" href="group__Sequence.html#g556f33fb72c8f5c2f2a3bba5177094a1">fc_getSequenceNumStep</a>(sequence, &amp;numStep);
<a name="l00809"></a>00809     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get sequence numStep"</span>);
<a name="l00810"></a>00810     rc = <a class="code" href="group__Sequence.html#g71cc991334f68976219fae136693ff38">fc_getSequenceCoordsAsDataType</a>(sequence, <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>, 
<a name="l00811"></a>00811                          (<span class="keywordtype">void</span>**)&amp;coords);
<a name="l00812"></a>00812     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to get coords as double"</span>);
<a name="l00813"></a>00813     <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++)
<a name="l00814"></a>00814       printf(<span class="stringliteral">"  Step %d: %g\n"</span>, i, coords[i]);
<a name="l00815"></a>00815     fflush(NULL);
<a name="l00816"></a>00816     free(coords);
<a name="l00817"></a>00817   }
<a name="l00818"></a>00818 
<a name="l00819"></a>00819   printf(<span class="stringliteral">"%d mesh(es):\n"</span>, numscrewmeshes);
<a name="l00820"></a>00820   fflush(NULL);
<a name="l00821"></a>00821   
<a name="l00822"></a>00822   <span class="keywordflow">for</span> (imesh = 0; imesh &lt; numscrewmeshes; imesh++){
<a name="l00823"></a>00823     <span class="keywordtype">char</span>* screwmesh_name = screwmesh_names[imesh];
<a name="l00824"></a>00824     <span class="keywordtype">int</span> numBrokePerStep[numStep];
<a name="l00825"></a>00825     <span class="keywordtype">int</span>* brokenScrewIDs[numStep];
<a name="l00826"></a>00826 
<a name="l00827"></a>00827     <span class="comment">// initialize summary info</span>
<a name="l00828"></a>00828     <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l00829"></a>00829       numBrokePerStep[i] = 0;
<a name="l00830"></a>00830       brokenScrewIDs[i] = NULL;
<a name="l00831"></a>00831     }
<a name="l00832"></a>00832 
<a name="l00833"></a>00833     <span class="keywordflow">for</span> (i = 0; i &lt; numdeathvars; i++){
<a name="l00834"></a>00834       rc = <a class="code" href="group__Variable.html#g81cdc76a742e4bbf85fcbf5deba8c0e7">fc_getOrGenerateUniqueSeqVariableByName</a>(screwmeshes[imesh], deathvars[i].name,
<a name="l00835"></a>00835                                  &amp;numStep, &amp;deathvars[i].elemdeath);
<a name="l00836"></a>00836       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Failed to find element death variable '%s'"</span>,
<a name="l00837"></a>00837                   deathvars[i].name);
<a name="l00838"></a>00838       <span class="keywordflow">if</span> (!deathvars[i].elemdeath){
<a name="l00839"></a>00839      <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>,
<a name="l00840"></a>00840                     <span class="stringliteral">"Failed to find element death variable '%s'"</span>,
<a name="l00841"></a>00841                     deathvars[i].name);
<a name="l00842"></a>00842       }
<a name="l00843"></a>00843     }
<a name="l00844"></a>00844     
<a name="l00845"></a>00845     rc = <a class="code" href="screwBreaks_8c.html#fb214c8ee97531fc590aba2b31ce8119">buildScrews</a>(screwmeshes[imesh],&amp;numScrews,&amp;screws);
<a name="l00846"></a>00846     <span class="keywordflow">if</span> (rc == 1) {
<a name="l00847"></a>00847       printf(<span class="stringliteral">"WARNING: Mesh %s does not look like screws and will be ignored\n"</span>,
<a name="l00848"></a>00848           screwmesh_names[imesh]);
<a name="l00849"></a>00849       <span class="keywordflow">continue</span>;
<a name="l00850"></a>00850     }
<a name="l00851"></a>00851     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc,<span class="stringliteral">"Cant build the screws"</span>);
<a name="l00852"></a>00852     
<a name="l00853"></a>00853 
<a name="l00854"></a>00854     printf(<span class="stringliteral">"Mesh %d: '%s' has %d screws\n"</span>, imesh, screwmesh_name, numScrews);
<a name="l00855"></a>00855     printf(<span class="stringliteral">"Screw bounding boxes at Step 0:\n"</span>);
<a name="l00856"></a>00856     <span class="keywordflow">for</span> (i = 0; i &lt; numScrews; i++) {
<a name="l00857"></a>00857       <span class="keywordtype">int</span> numDim;
<a name="l00858"></a>00858       <a class="code" href="group__SimpleDataObjects.html#g9687c6aad22d56c60f87659f533869c2">FC_Coords</a> lowers, uppers;
<a name="l00859"></a>00859       rc = <a class="code" href="group__GeometricRelations.html#gea0c3be70612767ac91c6c9b6d9b8be2">fc_getSubsetBoundingBox</a>(screws[i].whole, &amp;numDim, &amp;lowers, &amp;uppers);
<a name="l00860"></a>00860       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Failed to get screw bounding box"</span>);
<a name="l00861"></a>00861       printf(<span class="stringliteral">"  Screw %d: [ %g"</span>, i, lowers[0]);
<a name="l00862"></a>00862       <span class="keywordflow">for</span> (j = 1; j &lt; numDim; j++)
<a name="l00863"></a>00863      printf(<span class="stringliteral">", %g"</span>, lowers[j]);
<a name="l00864"></a>00864       printf(<span class="stringliteral">" ] - [ %g"</span>, uppers[0]);
<a name="l00865"></a>00865       <span class="keywordflow">for</span> (j = 1; j &lt; numDim; j++)
<a name="l00866"></a>00866      printf(<span class="stringliteral">", %g"</span>, uppers[j]);
<a name="l00867"></a>00867       printf(<span class="stringliteral">" ]\n"</span>);
<a name="l00868"></a>00868     }
<a name="l00869"></a>00869     fflush(NULL);
<a name="l00870"></a>00870     
<a name="l00871"></a>00871     <span class="comment">//------------------dead analysis----------------------------------//</span>
<a name="l00872"></a>00872     <span class="keywordflow">for</span> (j = 0; j &lt; numStep; j++){
<a name="l00873"></a>00873       <a class="code" href="structFC__Subset.html">FC_Subset</a> threshold;
<a name="l00874"></a>00874       <span class="keywordtype">int</span> num;
<a name="l00875"></a>00875       
<a name="l00876"></a>00876       <span class="comment">// break out if no unbroken or eroded screws left to check</span>
<a name="l00877"></a>00877       num = 0;
<a name="l00878"></a>00878       <span class="keywordflow">for</span> (i = 0; i &lt; numScrews; i++){
<a name="l00879"></a>00879      <span class="keywordflow">if</span> (!(screws[i].<a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a> || screws[i].<a class="code" href="screwBreaks_8c.html#155332580fbaac66aa0531315c8ceae8">eroded</a>)){
<a name="l00880"></a>00880        num = 1;
<a name="l00881"></a>00881        <span class="keywordflow">break</span>;
<a name="l00882"></a>00882      }
<a name="l00883"></a>00883       }
<a name="l00884"></a>00884       <span class="keywordflow">if</span> (num == 0){
<a name="l00885"></a>00885      <span class="keywordflow">break</span>;
<a name="l00886"></a>00886       }
<a name="l00887"></a>00887 
<a name="l00888"></a>00888       rc = <a class="code" href="screwBreaks_8c.html#084bcf4ccb0f893f7b1cffbd3549f0b2">getDeathThresholdSubset</a>(screwmeshes[imesh],numdeathvars,
<a name="l00889"></a>00889                        deathvars,j,&amp;threshold);
<a name="l00890"></a>00890       <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc,<span class="stringliteral">"cant get death subset"</span>);
<a name="l00891"></a>00891       <span class="comment">//    fc_printSubset(threshold,"communal",0);</span>
<a name="l00892"></a>00892     
<a name="l00893"></a>00893       <span class="keywordflow">for</span> (i = 0; i &lt; numScrews; i++){
<a name="l00894"></a>00894      <a class="code" href="structFC__Subset.html">FC_Subset</a> deadscrew;
<a name="l00895"></a>00895      <span class="keywordtype">double</span> projArea;
<a name="l00896"></a>00896      <span class="keywordtype">int</span> broke = 0, erode = 0;
<a name="l00897"></a>00897      
<a name="l00898"></a>00898      <span class="keywordflow">if</span> (!screws[i].<a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a> &amp;&amp; !screws[i].<a class="code" href="screwBreaks_8c.html#155332580fbaac66aa0531315c8ceae8">eroded</a>){ 
<a name="l00899"></a>00899      
<a name="l00900"></a>00900        <span class="comment">//get the dead part of the screw at this time step</span>
<a name="l00901"></a>00901        rc = <a class="code" href="group__Subset.html#gdc68d18522eac86b0c3eeb655e91f80b">fc_createSubsetIntersection</a>(threshold,<span class="stringliteral">"AND"</span>,screws[i].whole,<span class="stringliteral">"dead"</span>,
<a name="l00902"></a>00902                             &amp;deadscrew);
<a name="l00903"></a>00903        <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Cant get dead screw bits"</span>);
<a name="l00904"></a>00904        
<a name="l00905"></a>00905        rc = <a class="code" href="group__Subset.html#g8b932d306fb8f41ef49677f803fd9fd1">fc_getSubsetNumMember</a>(deadscrew,&amp;num);
<a name="l00906"></a>00906        <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"Cant get num dead elements"</span>);
<a name="l00907"></a>00907        
<a name="l00908"></a>00908        
<a name="l00909"></a>00909        <span class="comment">//-------------------broken-------------------------------------//</span>
<a name="l00910"></a>00910        broke = <a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a>(deadscrew, seg_dim, &amp;screws[i]);
<a name="l00911"></a>00911        
<a name="l00912"></a>00912        <span class="comment">//-------------------eroded-------------------------------------//</span>
<a name="l00913"></a>00913        <span class="keywordflow">if</span> (!screws[i].<a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a>) {
<a name="l00914"></a>00914          erode = <a class="code" href="screwBreaks_8c.html#155332580fbaac66aa0531315c8ceae8">eroded</a>(deadscrew,&amp;screws[i]);
<a name="l00915"></a>00915        }
<a name="l00916"></a>00916 
<a name="l00917"></a>00917        <span class="comment">//-------------------projection-------------------------------------//</span>
<a name="l00918"></a>00918        <span class="keywordflow">if</span> (!screws[i].broken &amp;&amp; !screws[i].eroded) {
<a name="l00919"></a>00919          projArea = <a class="code" href="screwBreaks_8c.html#d56dddfefd5e19aeb6c70fbd903bc955">projection</a>(deadscrew,screws[i]);
<a name="l00920"></a>00920        }
<a name="l00921"></a>00921 
<a name="l00922"></a>00922        <a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">fc_deleteSubset</a>(deadscrew);
<a name="l00923"></a>00923      }
<a name="l00924"></a>00924 
<a name="l00925"></a>00925      <span class="comment">// print results</span>
<a name="l00926"></a>00926      printf(<span class="stringliteral">"Mesh %-20s Screw %-3d Step %-3d "</span>, screwmesh_name, i, j);
<a name="l00927"></a>00927      <span class="keywordflow">if</span> (broke) {
<a name="l00928"></a>00928        printf(<span class="stringliteral">"First broken"</span>);
<a name="l00929"></a>00929      }
<a name="l00930"></a>00930      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (erode) {
<a name="l00931"></a>00931        printf(<span class="stringliteral">"First broken, side eroded"</span>);
<a name="l00932"></a>00932      }
<a name="l00933"></a>00933      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (screws[i].<a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a> || screws[i].eroded) {
<a name="l00934"></a>00934        printf(<span class="stringliteral">"*** still broken ***"</span>);
<a name="l00935"></a>00935      } 
<a name="l00936"></a>00936      <span class="keywordflow">else</span> {
<a name="l00937"></a>00937        printf(<span class="stringliteral">"BR =%6.2f (%7.2f/%7.2f)"</span>,(projArea/screws[i].baseArea),projArea,
<a name="l00938"></a>00938            screws[i].baseArea);
<a name="l00939"></a>00939      }
<a name="l00940"></a>00940      printf(<span class="stringliteral">"\n"</span>);
<a name="l00941"></a>00941      
<a name="l00942"></a>00942      <span class="comment">// collect summary info</span>
<a name="l00943"></a>00943      <span class="keywordflow">if</span> (broke || erode) {
<a name="l00944"></a>00944        <span class="keywordtype">void</span>* temp;
<a name="l00945"></a>00945        temp = realloc(brokenScrewIDs[j], (numBrokePerStep[j]+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00946"></a>00946        <span class="keywordflow">if</span> (!temp) 
<a name="l00947"></a>00947          <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(FC_MEMORY_ERROR);
<a name="l00948"></a>00948        brokenScrewIDs[j] = temp;
<a name="l00949"></a>00949        brokenScrewIDs[j][numBrokePerStep[j]] = i;
<a name="l00950"></a>00950        numBrokePerStep[j]++;
<a name="l00951"></a>00951      }
<a name="l00952"></a>00952 
<a name="l00953"></a>00953      <span class="comment">//diagnostic</span>
<a name="l00954"></a>00954      <span class="keywordflow">if</span> (0){
<a name="l00955"></a>00955        <span class="keywordflow">if</span> (screws[i].<a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a> || screws[i].eroded){
<a name="l00956"></a>00956          <a class="code" href="screwBreaks_8c.html#5acce2ff13dd0460935d9a4151fa1e17">printScrew</a>(screws[i],screwmesh_name,i,1);
<a name="l00957"></a>00957        }
<a name="l00958"></a>00958      }
<a name="l00959"></a>00959 
<a name="l00960"></a>00960       } <span class="comment">//for each screw</span>
<a name="l00961"></a>00961       <a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">fc_deleteSubset</a>(threshold);
<a name="l00962"></a>00962     } <span class="comment">//for each timestep</span>
<a name="l00963"></a>00963 
<a name="l00964"></a>00964     <span class="comment">//final writeout    </span>
<a name="l00965"></a>00965     i = 0;
<a name="l00966"></a>00966     <span class="keywordflow">for</span> (j = 0; j &lt; numScrews; j++){
<a name="l00967"></a>00967       <span class="keywordflow">if</span> (screws[j].<a class="code" href="screwBreaks_8c.html#d97959937abd86c20a00aaed795f6777">broken</a> || screws[j].<a class="code" href="screwBreaks_8c.html#155332580fbaac66aa0531315c8ceae8">eroded</a>){
<a name="l00968"></a>00968      i++;
<a name="l00969"></a>00969       }
<a name="l00970"></a>00970     }
<a name="l00971"></a>00971     printf(<span class="stringliteral">"Mesh %-20s Broken/Total screws: %d/%d\n"</span>,screwmesh_name, i,numScrews);
<a name="l00972"></a>00972     tscrews+=numScrews;
<a name="l00973"></a>00973     tscrewsbroken +=i;
<a name="l00974"></a>00974 
<a name="l00975"></a>00975     <span class="comment">// print summary info</span>
<a name="l00976"></a>00976     <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l00977"></a>00977       <span class="keywordflow">if</span> (numBrokePerStep[i] &gt; 0) {
<a name="l00978"></a>00978      printf(<span class="stringliteral">"  %d screw(s) broke at Step %d: %d"</span>, numBrokePerStep[i],
<a name="l00979"></a>00979             i, brokenScrewIDs[i][0]);
<a name="l00980"></a>00980      <span class="keywordflow">for</span> (j = 1; j &lt; numBrokePerStep[i]; j++)
<a name="l00981"></a>00981        printf(<span class="stringliteral">", %d"</span>, brokenScrewIDs[i][j]);
<a name="l00982"></a>00982      printf(<span class="stringliteral">"\n"</span>);
<a name="l00983"></a>00983      free(brokenScrewIDs[i]);
<a name="l00984"></a>00984       }
<a name="l00985"></a>00985     }
<a name="l00986"></a>00986 
<a name="l00987"></a>00987     <span class="comment">//cleanup after this mesh</span>
<a name="l00988"></a>00988     <span class="keywordflow">for</span> (i = 0; i &lt; numdeathvars; i++){ <span class="comment">//release the deathvar on this mesh</span>
<a name="l00989"></a>00989       <a class="code" href="group__Variable.html#g57341fab4863efe2c35476aee509f20d">fc_deleteSeqVariable</a>(numStep,deathvars[i].elemdeath);
<a name="l00990"></a>00990       free(deathvars[i].elemdeath);
<a name="l00991"></a>00991     }
<a name="l00992"></a>00992     
<a name="l00993"></a>00993     <span class="keywordflow">for</span> (i = 0; i &lt; numScrews; i++){
<a name="l00994"></a>00994       <a class="code" href="group__Shape.html#g472eb5141c2ac7917aae158bb6181eb5">fc_freeShape</a>(&amp;screws[i].shape);
<a name="l00995"></a>00995       <a class="code" href="group__Subset.html#gfdcc399692041499cc461916a9973558">fc_deleteSubset</a>(screws[i].whole);
<a name="l00996"></a>00996     }
<a name="l00997"></a>00997     free(screws);
<a name="l00998"></a>00998   }
<a name="l00999"></a>00999   printf(<span class="stringliteral">"All %d Mesh(es) %10s Broken/Total screws: %d/%d\n"</span>,numscrewmeshes,<span class="stringliteral">" "</span>,
<a name="l01000"></a>01000       tscrewsbroken,tscrews);
<a name="l01001"></a>01001 
<a name="l01002"></a>01002   <span class="comment">//clean up after all meshes</span>
<a name="l01003"></a>01003   free(meshes);
<a name="l01004"></a>01004   <span class="keywordflow">for</span> (i = 0; i &lt; numscrewmeshes; i++)
<a name="l01005"></a>01005     free(screwmesh_names[i]);
<a name="l01006"></a>01006   free(screwmesh_names);
<a name="l01007"></a>01007   <span class="comment">// deathvars[i].elemdeath has already been freed</span>
<a name="l01008"></a>01008   free(deathvars);      <span class="comment">//dont need to free name or op since assigned from argv </span>
<a name="l01009"></a>01009 
<a name="l01010"></a>01010   <span class="comment">// shut down</span>
<a name="l01011"></a>01011   <a class="code" href="group__Dataset.html#gbcd9a9a1b5ca718ac61d0707836703a7">fc_deleteDataset</a>(dataset);
<a name="l01012"></a>01012   <a class="code" href="group__Library.html#g68cec1422dde03b636cf039faafa7baa">fc_finalLibrary</a>();
<a name="l01013"></a>01013 
<a name="l01014"></a>01014   exit(0);
<a name="l01015"></a>01015 
<a name="l01016"></a>01016 }
<a name="l01017"></a>01017 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Oct 31 11:09:59 2007 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
