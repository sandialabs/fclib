<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>FCLib: examples/ex1_intro.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>examples/ex1_intro.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Example of basic use of the library. 
<p>
<b>Description:</b> <p>
This is an annotated example that walks through the use of basic aspects of the Feature Characterization Library (FCLib). It covers basic data access (getting handles and querying meta data) and a simple example of applying feature tracking and FCLib characterizations.<p>
See <a class="el" href="ex2__bigDataAccess_8c.html" title="Example of accessing big data.">ex2_bigDataAccess.c</a> for details of accessing the big data arrays and <a class="el" href="ex3__createCharactrztn_8c.html" title="Example of creating a new characterization.">ex3_createCharactrztn.c</a> for details about creating your own characterization.<p>
NOTE: If you are looking at this file through the Doxygen interface, all objects and functions are linked to their documentation--so follow the links for more details!<p>
NOTE: Don't forget to try running the program while looking at this file.<p>
<dl class="rcs" compact><dt><b>Source</b></dt><dd>/home/Repositories/fcdmf/fclib/examples/ex1_intro.c,v </dd></dl>
<dl class="rcs" compact><dt><b>Revision</b></dt><dd>1.5 </dd></dl>
<dl class="rcs" compact><dt><b>Date</b></dt><dd>2006/09/26 03:57:16 </dd></dl>
<p>
<b>Modifications:</b> <ul>
<li>11/18/04 WSK, created. </li></ul>

<p>Definition in file <a class="el" href="ex1__intro_8c-source.html">ex1_intro.c</a>.</p>

<p>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;<a class="el" href="fc_8h-source.html">fc.h</a>&gt;</code><br>

<p>
<div class="dynheader">
Include dependency graph for ex1_intro.c:</div>
<div class="dynsection">
<p><center><img src="ex1__intro_8c__incl.gif" border="0" usemap="#examples/ex1_intro.c_map" alt=""></center>
<map name="examples/ex1_intro.c_map">
<area shape="rect" href="fc_8h.html" title="Master header file for FCLib." alt="" coords="1285,84,1333,111"><area shape="rect" href="base_8h.html" title="Public declarations for Data Types, Data Interface, and Handles Modules." alt="" coords="195,161,264,188"><area shape="rect" href="storage_8h.html" title="Public declarations for Simple Data Objects Module." alt="" coords="288,161,376,188"><area shape="rect" href="library_8h.html" title="Public declarations for the Library Module." alt="" coords="400,161,477,188"><area shape="rect" href="dataset_8h.html" title="Public declarations for the Dataset Module." alt="" coords="501,161,589,188"><area shape="rect" href="sequence_8h.html" title="Public declarations for the Sequence Module." alt="" coords="613,161,717,188"><area shape="rect" href="mesh_8h.html" title="Public declarations for the Mesh Module." alt="" coords="741,161,816,188"><area shape="rect" href="subset_8h.html" title="Public declarations for Subset module." alt="" coords="840,161,920,188"><area shape="rect" href="variable_8h.html" title="Public declarations for Variable Module." alt="" coords="944,161,1037,188"><area shape="rect" href="feature_8h.html" title="Public declarations for Features module." alt="" coords="1061,161,1149,188"><area shape="rect" href="shape_8h.html" title="Declarations for Shape module." alt="" coords="1173,161,1251,188"><area shape="rect" href="fileio_8h.html" title="Public declarations for File IO module." alt="" coords="1275,161,1344,188"><area shape="rect" href="error_8h.html" title="Declarations for Error Handling Module." alt="" coords="1368,161,1435,188"><area shape="rect" href="geom_8h.html" title="Public declarations for Geometric Relations module." alt="" coords="1459,161,1536,188"><area shape="rect" href="statistics_8h.html" title="Public declarations for Statistics Routines module." alt="" coords="1487,239,1583,265"><area shape="rect" href="sierra_8h.html" title="Public declarations for the Sierra module." alt="" coords="1611,161,1685,188"><area shape="rect" href="threshold_8h.html" title="Public declarations for Threshold module." alt="" coords="1709,161,1811,188"><area shape="rect" href="elemdeath_8h.html" title="Declarations for Element Death module." alt="" coords="1835,161,1949,188"><area shape="rect" href="series_8h.html" title="Public declarations for Series Routines module." alt="" coords="1973,161,2048,188"><area shape="rect" href="topo_8h.html" title="Public declarations for Topological Relations module." alt="" coords="2072,161,2139,188"><area shape="rect" href="util_8h.html" title="Public declarations for Utilities module." alt="" coords="2163,161,2219,188"><area shape="rect" href="track_8h.html" title="Declaration of tracking routines." alt="" coords="2243,161,2312,188"><area shape="rect" href="varmath_8h.html" title="Public declarations for Variable Math module." alt="" coords="2336,161,2432,188"><area shape="rect" href="custom_8h.html" title="Declarations for Custom module." alt="" coords="2456,161,2544,188"></map>
</div>

<p>
<a href="ex1__intro_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ex1__intro_8c.html#840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="840291bc02cba5474a4cb46a9b9566fe"></a><!-- doxytag: member="ex1_intro.c::main" ref="840291bc02cba5474a4cb46a9b9566fe" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="ex1__intro_8c-source.html#l00069">69</a> of file <a class="el" href="ex1__intro_8c-source.html">ex1_intro.c</a>.</p>

<p>References <a class="el" href="feature_8c-source.html#l00126">fc_createFeatureGroup()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="subset_8c-source.html#l02482">fc_deleteSubset()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="error_8h-source.html#l00116">fc_exitIfErrorPrintf</a>, <a class="el" href="feature_8c-source.html#l00478">fc_featureGroup_getNumFeature()</a>, <a class="el" href="library_8c-source.html#l00256">fc_finalLibrary()</a>, <a class="el" href="feature_8c-source.html#l00177">fc_freeFeatureGroup()</a>, <a class="el" href="base_8c-source.html#l00477">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00419">fc_getDataTypeText()</a>, <a class="el" href="base_8c-source.html#l00385">fc_getElementTypeText()</a>, <a class="el" href="feature_8c-source.html#l00986">fc_getFeatureChildIDs()</a>, <a class="el" href="feature_8c-source.html#l00901">fc_getFeatureParentIDs()</a>, <a class="el" href="feature_8c-source.html#l00741">fc_getFeatureROIs()</a>, <a class="el" href="mesh_8c-source.html#l02285">fc_getMeshByName()</a>, <a class="el" href="mesh_8c-source.html#l02183">fc_getMeshes()</a>, <a class="el" href="mesh_8c-source.html#l02848">fc_getMeshInfo()</a>, <a class="el" href="mesh_8c-source.html#l02762">fc_getMeshName()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05317">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="sequence_8c-source.html#l01612">fc_getSequenceInfo()</a>, <a class="el" href="sequence_8c-source.html#l01527">fc_getSequenceName()</a>, <a class="el" href="sequence_8c-source.html#l01150">fc_getSequences()</a>, <a class="el" href="variable_8c-source.html#l04392">fc_getSeqVariableByName()</a>, <a class="el" href="variable_8c-source.html#l03637">fc_getSeqVariables()</a>, <a class="el" href="geom_8c-source.html#l02940">fc_getSubsetCentroid()</a>, <a class="el" href="subset_8c-source.html#l02782">fc_getSubsetInfo()</a>, <a class="el" href="subset_8c-source.html#l02700">fc_getSubsetName()</a>, <a class="el" href="subset_8c-source.html#l01253">fc_getSubsets()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="variable_8c-source.html#l05276">fc_getVariableName()</a>, <a class="el" href="variable_8c-source.html#l03573">fc_getVariables()</a>, <a class="el" href="statistics_8c-source.html#l00394">fc_getVariableSubsetMinMax()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="library_8c-source.html#l00208">fc_initLibrary()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="fileio_8c-source.html#l01565">fc_loadDataset()</a>, <a class="el" href="topo_8c-source.html#l01432">fc_segment()</a>, <a class="el" href="library_8c-source.html#l00146">fc_setLibraryVerbosity()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="track_8c-source.html#l00159">fc_trackAllSteps()</a>, <a class="el" href="base_8h-source.html#l00083">FC_WARNING_MESSAGES</a>, <a class="el" href="subsetter_8c-source.html#l00121">featureGroup</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>, <a class="el" href="subsetter_8c-source.html#l00119">numROIPerStep</a>, <a class="el" href="subsetter_8c-source.html#l00120">ROIsPerStep</a>, and <a class="el" href="subsetter_8c-source.html#l00109">threshold</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00070"></a>00070 {
<a name="l00071"></a>00071   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00072"></a>00072   <span class="keywordtype">int</span> i, j;
<a name="l00073"></a>00073   <span class="keywordtype">int</span> numSequence, numMesh, numSubset, numVariable, numSeqVariable;
<a name="l00074"></a>00074   <span class="keywordtype">int</span> numReturnSeqVariables, *numStepPerReturnSeqVar;
<a name="l00075"></a>00075   <span class="keywordtype">int</span> numCompareMesh;
<a name="l00076"></a>00076   <span class="keywordtype">int</span> numStep, topodim, dim, numVertex, numElement, *numStepPerSeqVar;
<a name="l00077"></a>00077   <span class="keywordtype">int</span> numMember, maxNumMember, numDataPoint, <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>;
<a name="l00078"></a>00078   <span class="keywordtype">int</span> numSegment, *<a class="code" href="subsetter_8c.html#4d076e66ce25f90703e238516183dcbc">numROIPerStep</a>, numFeature, numROI, *stepIDs;
<a name="l00079"></a>00079   <span class="keywordtype">int</span> numParent, *parentIDs, numChild, *childIDs;
<a name="l00080"></a>00080   <span class="keywordtype">double</span> <a class="code" href="subsetter_8c.html#fcfbedec6ebde62c6a091ce335836ef1">threshold</a>, maxTemperature;
<a name="l00081"></a>00081   <a class="code" href="group__SimpleDataObjects.html#gf0a2bdabac4a21b42f4b480baf9128d7" title="Coordinates data structure.">FC_Coords</a> centroid;
<a name="l00082"></a>00082   <a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a> dataset;
<a name="l00083"></a>00083   <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> *sequences, sequence;
<a name="l00084"></a>00084   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> *meshes, mesh, *comparemeshes;
<a name="l00085"></a>00085   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a> *subsets, thresholdSubset, *segments, **<a class="code" href="subsetter_8c.html#e63d36d016a677a53880fac0dd84ffec">ROIsPerStep</a>, *ROIs;
<a name="l00086"></a>00086   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *variables, **seqVariables, *seqVariable, **returnSeqVariables;
<a name="l00087"></a>00087   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> dataType;
<a name="l00088"></a>00088   <a class="code" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a" title="Possible element types.">FC_ElementType</a> elemType;
<a name="l00089"></a>00089   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assocType;
<a name="l00090"></a>00090   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathType;
<a name="l00091"></a>00091   <a class="code" href="structFC__FeatureGroup.html" title="Feature Group object.">FC_FeatureGroup</a> *<a class="code" href="subsetter_8c.html#d8d4bde49e4bab386241fed1f7664cbc">featureGroup</a>;
<a name="l00092"></a>00092   <span class="keywordtype">char</span> char_buf[1024];
<a name="l00093"></a>00093   <span class="keywordtype">char</span> dataset_name[1024];
<a name="l00094"></a>00094   <span class="keywordtype">char</span> mesh_name[1024];
<a name="l00095"></a>00095   <span class="keywordtype">char</span> seqVariable_name[1024];
<a name="l00096"></a>00096   <span class="keywordtype">char</span> *temp_name;
<a name="l00097"></a>00097 
<a name="l00098"></a>00098   printf(<span class="stringliteral">"Running ex1_intro ...\n"</span>);
<a name="l00099"></a>00099   printf(<span class="stringliteral">"\n"</span>);
<a name="l00100"></a>00100 
<a name="l00101"></a>00101   <span class="comment">// --- Setting up the library</span>
<a name="l00102"></a>00102 
<a name="l00103"></a>00103   <span class="comment">// The very first step is to initialize the library. </span>
<a name="l00104"></a>00104   <span class="comment">// The only thing you can do before that is to set the library verbosity</span>
<a name="l00105"></a>00105   <span class="comment">// which instructs all library functions on how much to print to stdout.</span>
<a name="l00106"></a>00106   <span class="comment">// Here we've chosen to have the library report error and warning messages.</span>
<a name="l00107"></a>00107   rc = <a class="code" href="group__Library.html#gc54575c50a63dd29c694c78315d8fcf2" title="Set the library verbosity level.">fc_setLibraryVerbosity</a>(<a class="code" href="group__DataTypes.html#gg1ceb59a5b485f8bcbcb8acad4cfb9323d5f8d0b704dba62980776bac1283a741">FC_WARNING_MESSAGES</a>);
<a name="l00108"></a>00108   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00109"></a>00109     exit(rc);
<a name="l00110"></a>00110   rc = <a class="code" href="group__Library.html#g18b26962103ffc9596657386d55a93af" title="Setup Feature Characterization Library for use.">fc_initLibrary</a>();
<a name="l00111"></a>00111   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00112"></a>00112     exit(rc);
<a name="l00113"></a>00113 
<a name="l00114"></a>00114   <span class="comment">// Most function calls in FCLib return an FC_ReturnCode object (which is an </span>
<a name="l00115"></a>00115   <span class="comment">// enumerated type). You should always check the return code to make sure</span>
<a name="l00116"></a>00116   <span class="comment">// that the function completed as expected and to handle errors</span>
<a name="l00117"></a>00117   <span class="comment">// appropriately. An error may indicated something horrible has gone wrong</span>
<a name="l00118"></a>00118   <span class="comment">// (memory allocation error) or it may indicate that you passed incompatible</span>
<a name="l00119"></a>00119   <span class="comment">// arguments to a function.  </span>
<a name="l00120"></a>00120 
<a name="l00121"></a>00121   <span class="comment">// This is an example of what you can expect to see if an error message is</span>
<a name="l00122"></a>00122   <span class="comment">// generated: Calling fc_initLibrary() more than once is an error, so we</span>
<a name="l00123"></a>00123   <span class="comment">// should see an error message ...</span>
<a name="l00124"></a>00124   printf(<span class="stringliteral">"About to call fc_initLibrary() a second time ...\n"</span>);
<a name="l00125"></a>00125   printf(<span class="stringliteral">"(Message format = 'MessageType:function[file:line#]:message')\n"</span>);
<a name="l00126"></a>00126   rc = <a class="code" href="group__Library.html#g18b26962103ffc9596657386d55a93af" title="Setup Feature Characterization Library for use.">fc_initLibrary</a>(); <span class="comment">// this generates the message</span>
<a name="l00127"></a>00127   <span class="comment">// ... and it should also return an error FC_ErrorCode.</span>
<a name="l00128"></a>00128   printf(<span class="stringliteral">"... the type of error you get is: %s\n"</span>, 
<a name="l00129"></a>00129          <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(rc));
<a name="l00130"></a>00130   printf(<span class="stringliteral">"\n"</span>);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132   <span class="comment">// FC_ReturnCode and many other small data objects (e.g. FC_ElementType,</span>
<a name="l00133"></a>00133   <span class="comment">// FC_DataType, etc) in FCLib are enumerated types. All enumerated types have</span>
<a name="l00134"></a>00134   <span class="comment">// a function of the form fc_get&lt;Type&gt;TypeText() that returns a string</span>
<a name="l00135"></a>00135   <span class="comment">// that prints the name of the enumerated value.</span>
<a name="l00136"></a>00136 
<a name="l00137"></a>00137   <span class="comment">// --- A note about "returned" values.</span>
<a name="l00138"></a>00138 
<a name="l00139"></a>00139   <span class="comment">// Technically in C, functions return a single value, which for most cases</span>
<a name="l00140"></a>00140   <span class="comment">// in the library will be an FC_ReturnCode value. This means that most</span>
<a name="l00141"></a>00141   <span class="comment">// of the "returned" values from FCLib functions are not returned at</span>
<a name="l00142"></a>00142   <span class="comment">// all, but are values assigned to arguments passed into the functions.</span>
<a name="l00143"></a>00143   <span class="comment">// For the remainder of the documentation, the used of "returned" will</span>
<a name="l00144"></a>00144   <span class="comment">// usually mean a value returned via the arguments of the function.</span>
<a name="l00145"></a>00145   <span class="comment">// In the Doxygen documentation, these arguments are labeled as "output"</span>
<a name="l00146"></a>00146   <span class="comment">// arguments.</span>
<a name="l00147"></a>00147 
<a name="l00148"></a>00148   <span class="comment">// --- Playing with Datasets, Meshes &amp; Variables (&amp; Sequences &amp; Subsets)</span>
<a name="l00149"></a>00149 
<a name="l00150"></a>00150   <span class="comment">// The major data objects of the library are Datasets, Sequences, Meshes,</span>
<a name="l00151"></a>00151   <span class="comment">// Subsets and Variables. These objects are managed by the library and are</span>
<a name="l00152"></a>00152   <span class="comment">// manipulated by the user via opaque handles (FC_Dataset, FC_Mesh, etc).</span>
<a name="l00153"></a>00153   <span class="comment">// The data objects are organized hierarchically with Datasets containing</span>
<a name="l00154"></a>00154   <span class="comment">// Sequences and Meshes, and Meshes containing Subsets and Variables.</span>
<a name="l00155"></a>00155   <span class="comment">// In general, data objects are added to and deleted from the library by </span>
<a name="l00156"></a>00156   <span class="comment">// create and delete calls. A delete call will remove the object, and all</span>
<a name="l00157"></a>00157   <span class="comment">// of the objects it contains, from the library.</span>
<a name="l00158"></a>00158  
<a name="l00159"></a>00159   <span class="comment">// The Dataset object is a container for the other objects and is usually</span>
<a name="l00160"></a>00160   <span class="comment">// associated with a database file. Our next step is to load a dataset by</span>
<a name="l00161"></a>00161   <span class="comment">// providing the file name. Here is an example of a value "returned" by</span>
<a name="l00162"></a>00162   <span class="comment">// the functions--we pass in a pointer to where we want the dataset handle</span>
<a name="l00163"></a>00163   <span class="comment">// to be stored.</span>
<a name="l00164"></a>00164   strcpy(dataset_name, <span class="stringliteral">"../data/gen_multivar_seq.ex2"</span>);
<a name="l00165"></a>00165   rc = <a class="code" href="group__FileIO.html#g77b8250a472752e14bda28962116a66b" title="Load a dataset and it&amp;#39;s members from a file.">fc_loadDataset</a>(dataset_name, &amp;dataset);
<a name="l00166"></a>00166   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00167"></a>00167     exit(rc);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169   <span class="comment">// Loading a dataset creates all of the data objects that it contains for</span>
<a name="l00170"></a>00170   <span class="comment">// you, but you will still need to get their handles. There are a variety</span>
<a name="l00171"></a>00171   <span class="comment">// of ways to do this. Here we ask the dataset for all of its sequences</span>
<a name="l00172"></a>00172   <span class="comment">// and meshes (next we will query their metadata).</span>
<a name="l00173"></a>00173   rc = <a class="code" href="group__Sequence.html#g0ad1217500f245d78aaad5c79f960ba1" title="Get the sequences in a dataset.">fc_getSequences</a>(dataset, &amp;numSequence, &amp;sequences);
<a name="l00174"></a>00174   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00175"></a>00175     exit(rc);
<a name="l00176"></a>00176   rc = <a class="code" href="group__Mesh.html#gcb092c2c909dd536c0120830890a9f36" title="Get the meshes in a dataset.">fc_getMeshes</a>(dataset, &amp;numMesh, &amp;meshes);
<a name="l00177"></a>00177   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00178"></a>00178     exit(rc);
<a name="l00179"></a>00179   printf(<span class="stringliteral">"Dataset '%s' has %d sequences and %d meshes\n"</span>, dataset_name, 
<a name="l00180"></a>00180          numSequence, numMesh);
<a name="l00181"></a>00181   printf(<span class="stringliteral">"\n"</span>);
<a name="l00182"></a>00182 
<a name="l00183"></a>00183   <span class="comment">// A sequence is a container for coordinates orthogonal to the space</span>
<a name="l00184"></a>00184   <span class="comment">// coordinates of the dataset. The most common type of sequence is</span>
<a name="l00185"></a>00185   <span class="comment">// a time series. Here we query each sequence for name &amp; metadata.</span>
<a name="l00186"></a>00186   printf(<span class="stringliteral">"Sequences:\n"</span>);
<a name="l00187"></a>00187   <span class="keywordflow">for</span> (i = 0; i &lt; numSequence; i++) {
<a name="l00188"></a>00188     <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(sequences[i], &amp;temp_name);
<a name="l00189"></a>00189     <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(sequences[i], &amp;numStep, &amp;dataType);
<a name="l00190"></a>00190     printf(<span class="stringliteral">"Sequence #%d: name = '%s'\n"</span>, i, temp_name);
<a name="l00191"></a>00191     printf(<span class="stringliteral">"              numStep = %d, dataType = %s\n"</span>, numStep,
<a name="l00192"></a>00192            <a class="code" href="group__DataTypes.html#g688d0934eac6d388ad21c461e22fd19f" title="Return the name of the FC_DataType&amp;#39;s value.">fc_getDataTypeText</a>(dataType));
<a name="l00193"></a>00193     <span class="comment">// make sure you free the sequence name when you are done with it</span>
<a name="l00194"></a>00194     free(temp_name);
<a name="l00195"></a>00195   }
<a name="l00196"></a>00196   printf(<span class="stringliteral">"\n"</span>);
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <span class="comment">// Again we see that the values that are "returned" by library calls are </span>
<a name="l00199"></a>00199   <span class="comment">// actually function arguments that pass a pointer to the thing to be</span>
<a name="l00200"></a>00200   <span class="comment">// returned; the second and third arguments of fc_getSequenceInfo() are</span>
<a name="l00201"></a>00201   <span class="comment">// output arguments. If one of the output arguments is an array, as is </span>
<a name="l00202"></a>00202   <span class="comment">// temp_name above, then the user is usually responsible for freeing the</span>
<a name="l00203"></a>00203   <span class="comment">// array which was  dynamically allocated. This is documented for each </span>
<a name="l00204"></a>00204   <span class="comment">// function.</span>
<a name="l00205"></a>00205 
<a name="l00206"></a>00206   <span class="comment">// As with sequences, each mesh can be queried for name &amp; meta data</span>
<a name="l00207"></a>00207   printf(<span class="stringliteral">"Meshes:\n"</span>);
<a name="l00208"></a>00208   <span class="keywordflow">for</span> (i = 0; i &lt; numMesh; i++) {
<a name="l00209"></a>00209     <a class="code" href="group__Mesh.html#g3d701a44941883311e4940d7d3b4146a" title="Return name of a mesh.">fc_getMeshName</a>(meshes[i], &amp;temp_name);
<a name="l00210"></a>00210     <a class="code" href="group__Mesh.html#ged61b1f684fc2a6ac489c10841cdb591" title="Get information about a mesh.">fc_getMeshInfo</a>(meshes[i], &amp;topodim, &amp;dim, &amp;numVertex, &amp;numElement, 
<a name="l00211"></a>00211                    &amp;elemType);
<a name="l00212"></a>00212     printf(<span class="stringliteral">"Mesh #%d: name = '%s'\n"</span>, i, temp_name);
<a name="l00213"></a>00213     printf(<span class="stringliteral">"          topodim = %d, dim = %d\n"</span>, topodim, dim);
<a name="l00214"></a>00214     printf(<span class="stringliteral">"          numVertex = %d, numElement = %d, elemType = %s\n"</span>, 
<a name="l00215"></a>00215            numVertex, numElement, <a class="code" href="group__DataTypes.html#g4152b6e700d60abe601b48ce595db9a7" title="Return the name of the FC_ElementType&amp;#39;s value.">fc_getElementTypeText</a>(elemType)); 
<a name="l00216"></a>00216     <span class="comment">// make sure you free the mesh name when you are done with it</span>
<a name="l00217"></a>00217     free(temp_name);
<a name="l00218"></a>00218   }
<a name="l00219"></a>00219   printf(<span class="stringliteral">"\n"</span>);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   <span class="comment">// Alternately, if you known the name of the mesh of interest, you can</span>
<a name="l00222"></a>00222   <span class="comment">// ask for that directly from the dataset. This will return all meshes</span>
<a name="l00223"></a>00223   <span class="comment">// of the same name. In this case we check to make sure there is only</span>
<a name="l00224"></a>00224   <span class="comment">// one mesh of the asked for name.</span>
<a name="l00225"></a>00225   strcpy(mesh_name, <span class="stringliteral">"hex mesh"</span>);
<a name="l00226"></a>00226   rc = <a class="code" href="group__Mesh.html#gb72987c2bf83a19f208df925bc8af86b" title="Get all meshes with a given name from the dataset.">fc_getMeshByName</a>(dataset, mesh_name, &amp;numCompareMesh,&amp;comparemeshes);
<a name="l00227"></a>00227   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00228"></a>00228     exit(rc);
<a name="l00229"></a>00229   <span class="keywordflow">if</span> (numCompareMesh != 1){
<a name="l00230"></a>00230     printf(<span class="stringliteral">"Did not find a unique mesh '%s'\n"</span>,mesh_name);
<a name="l00231"></a>00231     exit(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>);
<a name="l00232"></a>00232   }
<a name="l00233"></a>00233   mesh = comparemeshes[0];
<a name="l00234"></a>00234   free(comparemeshes);
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   <span class="comment">// This is how you could figure out which of the meshes gotten from the</span>
<a name="l00237"></a>00237   <span class="comment">// dataset using fc_getMeshes() is the same as the one you just got</span>
<a name="l00238"></a>00238   <span class="comment">// by asking for it by name. Because the data objects are only handles</span>
<a name="l00239"></a>00239   <span class="comment">// (that the library uses to look up the data), directly comparing the</span>
<a name="l00240"></a>00240   <span class="comment">// handles will only tell you if you are looking at the same handle--</span>
<a name="l00241"></a>00241   <span class="comment">// you need to use FC_HANDLE_EQUIV() to ask the library if the</span>
<a name="l00242"></a>00242   <span class="comment">// two handles are referring to the same object. </span>
<a name="l00243"></a>00243    <span class="keywordflow">for</span> (i = 0; i &lt; numMesh; i++) {
<a name="l00244"></a>00244     <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(mesh, meshes[i]))
<a name="l00245"></a>00245       printf(<span class="stringliteral">"Mesh #%d is the same mesh as '%s'\n"</span>, i, mesh_name);
<a name="l00246"></a>00246     <span class="keywordflow">else</span>
<a name="l00247"></a>00247       printf(<span class="stringliteral">"Mesh #%d is NOT the same mesh as '%s'\n"</span>, i, mesh_name);
<a name="l00248"></a>00248   }
<a name="l00249"></a>00249   printf(<span class="stringliteral">"\n"</span>);
<a name="l00250"></a>00250 
<a name="l00251"></a>00251   <span class="comment">// Datasets contain sequences and meshes. Meshes in turn contain subsets</span>
<a name="l00252"></a>00252   <span class="comment">// and variables.</span>
<a name="l00253"></a>00253   rc = <a class="code" href="group__Subset.html#gb12aea784bf43ec6a29a8e51a3c0da51" title="Get the subsets in a mesh.">fc_getSubsets</a>(mesh, &amp;numSubset, &amp;subsets);
<a name="l00254"></a>00254   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00255"></a>00255     exit(rc);
<a name="l00256"></a>00256   rc = <a class="code" href="group__Variable.html#ga96777675a667d79871c93c54729bde4" title="Get the variables in a mesh.">fc_getVariables</a>(mesh, &amp;numVariable, &amp;variables);
<a name="l00257"></a>00257   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00258"></a>00258     exit(rc);
<a name="l00259"></a>00259   rc = <a class="code" href="group__Variable.html#g01bf1b0d9b1de983115a461216039449" title="Get the sequence variables in a mesh.">fc_getSeqVariables</a>(mesh, &amp;numSeqVariable, &amp;numStepPerSeqVar,
<a name="l00260"></a>00260                  &amp;seqVariables);
<a name="l00261"></a>00261   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00262"></a>00262     exit(rc);
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <span class="comment">// A subset is a collection of mesh entities (mesh entities are vertices,</span>
<a name="l00265"></a>00265   <span class="comment">// edges, faces, or elements of the mesh). FC_AssociationType is an</span>
<a name="l00266"></a>00266   <span class="comment">// enumerated type that specifies the type of mesh entity. (maxNumMember</span>
<a name="l00267"></a>00267   <span class="comment">// is equal to the number of that type of entity in the parent mesh).</span>
<a name="l00268"></a>00268   printf(<span class="stringliteral">"Subsets in mesh '%s':\n"</span>, mesh_name);
<a name="l00269"></a>00269   <span class="keywordflow">for</span> (i = 0; i &lt; numSubset; i++) {
<a name="l00270"></a>00270     <a class="code" href="group__Subset.html#g429e404a267e2f574e2578aa5d0aaa35" title="Get subset name.">fc_getSubsetName</a>(subsets[i], &amp;temp_name);
<a name="l00271"></a>00271     <a class="code" href="group__Subset.html#g815857d0e2d573d0418a3892229c0d83" title="Get information about a subset.">fc_getSubsetInfo</a>(subsets[i], &amp;numMember, &amp;maxNumMember, &amp;assocType);
<a name="l00272"></a>00272     printf(<span class="stringliteral">"Subset #%d: name = '%s'\n"</span>, i, temp_name);
<a name="l00273"></a>00273     printf(<span class="stringliteral">"            numMember = %d, maxNumMember = %d\n"</span>, numMember, 
<a name="l00274"></a>00274            maxNumMember);
<a name="l00275"></a>00275     printf(<span class="stringliteral">"            assocType = %s\n"</span>, 
<a name="l00276"></a>00276            <a class="code" href="group__DataTypes.html#g615e96c3b13331857b5ba45d597c49de" title="Return the name of the FC_AssociationType&amp;#39;s value.">fc_getAssociationTypeText</a>(assocType)); 
<a name="l00277"></a>00277     <span class="comment">// make sure you free the subset name when you are done with it</span>
<a name="l00278"></a>00278     free(temp_name);
<a name="l00279"></a>00279   }
<a name="l00280"></a>00280   printf(<span class="stringliteral">"\n"</span>);
<a name="l00281"></a>00281 
<a name="l00282"></a>00282   <span class="comment">// Variables are the field data that is stored on a mesh (e.g. a temperature</span>
<a name="l00283"></a>00283   <span class="comment">// field). In FCLib, variables come in two flavors based on whether they</span>
<a name="l00284"></a>00284   <span class="comment">// vary over a sequence or not. In all cases the basic unit of operation</span>
<a name="l00285"></a>00285   <span class="comment">// is the variable handle, FC_Variable. A variable that does not vary</span>
<a name="l00286"></a>00286   <span class="comment">// over a sequence has a single variable handle, while a variable that</span>
<a name="l00287"></a>00287   <span class="comment">// does vary over a sequence is an array of variable handles. This second</span>
<a name="l00288"></a>00288   <span class="comment">// type of variables is distinguished from the first by calling it a</span>
<a name="l00289"></a>00289   <span class="comment">// sequence variable. </span>
<a name="l00290"></a>00290   printf(<span class="stringliteral">"Variables in mesh '%s':\n"</span>, mesh_name);
<a name="l00291"></a>00291   <span class="keywordflow">for</span> (i = 0; i &lt; numVariable; i++) {
<a name="l00292"></a>00292     <a class="code" href="group__Variable.html#g233584b319c5dd90a13582fc9ac3484e" title="Return name of a variable.">fc_getVariableName</a>(variables[i], &amp;temp_name);
<a name="l00293"></a>00293     <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(variables[i], &amp;numDataPoint, &amp;numComponent, &amp;assocType,
<a name="l00294"></a>00294                        &amp;mathType, &amp;dataType);
<a name="l00295"></a>00295     printf(<span class="stringliteral">"Variable #%d: name = '%s'\n"</span>, i, temp_name);
<a name="l00296"></a>00296     printf(<span class="stringliteral">"              numDataPoint = %d, numComponent = %d\n"</span>, 
<a name="l00297"></a>00297            numDataPoint, numComponent);
<a name="l00298"></a>00298     printf(<span class="stringliteral">"              assocType = %s\n"</span>, 
<a name="l00299"></a>00299            <a class="code" href="group__DataTypes.html#g615e96c3b13331857b5ba45d597c49de" title="Return the name of the FC_AssociationType&amp;#39;s value.">fc_getAssociationTypeText</a>(assocType)); 
<a name="l00300"></a>00300     <span class="comment">// make sure you free the variable name when you are done with it</span>
<a name="l00301"></a>00301     free(temp_name);
<a name="l00302"></a>00302   }
<a name="l00303"></a>00303   printf(<span class="stringliteral">"\n"</span>);
<a name="l00304"></a>00304 
<a name="l00305"></a>00305   <span class="comment">// A sequence variable is the pair of an int giving the length of the </span>
<a name="l00306"></a>00306   <span class="comment">// handle array and the handle array itself. Functions specifically</span>
<a name="l00307"></a>00307   <span class="comment">// for sequence variables need both of these. Many other functions</span>
<a name="l00308"></a>00308   <span class="comment">// you will have to apply to sequence variables manually by looping</span>
<a name="l00309"></a>00309   <span class="comment">// over the steps and applying them--as we will see later.</span>
<a name="l00310"></a>00310   <span class="comment">// Here we only bother to get info on the first step since the metadata</span>
<a name="l00311"></a>00311   <span class="comment">// should be the same for all steps of the sequence variable.</span>
<a name="l00312"></a>00312   printf(<span class="stringliteral">"Sequence Variables in mesh '%s':\n"</span>, mesh_name);
<a name="l00313"></a>00313   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVariable; i++) {
<a name="l00314"></a>00314     <a class="code" href="group__Variable.html#g233584b319c5dd90a13582fc9ac3484e" title="Return name of a variable.">fc_getVariableName</a>(seqVariables[i][0], &amp;temp_name);
<a name="l00315"></a>00315     <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(seqVariables[i][0], &amp;numDataPoint, &amp;numComponent, 
<a name="l00316"></a>00316                        &amp;assocType, &amp;mathType, &amp;dataType);
<a name="l00317"></a>00317     printf(<span class="stringliteral">"SeqVariable #%d: name = '%s'\n"</span>, i, temp_name);
<a name="l00318"></a>00318     printf(<span class="stringliteral">"                 numStep = %d\n"</span>, numStepPerSeqVar[i]);
<a name="l00319"></a>00319     printf(<span class="stringliteral">"                 numDataPoint = %d, numComponent = %d\n"</span>, 
<a name="l00320"></a>00320            numDataPoint, numComponent);
<a name="l00321"></a>00321     printf(<span class="stringliteral">"                 assocType = %s\n"</span>, 
<a name="l00322"></a>00322            <a class="code" href="group__DataTypes.html#g615e96c3b13331857b5ba45d597c49de" title="Return the name of the FC_AssociationType&amp;#39;s value.">fc_getAssociationTypeText</a>(assocType)); 
<a name="l00323"></a>00323     <span class="comment">// make sure you free the seqVariable name when you are done with it</span>
<a name="l00324"></a>00324     free(temp_name);
<a name="l00325"></a>00325   }
<a name="l00326"></a>00326   printf(<span class="stringliteral">"\n"</span>);
<a name="l00327"></a>00327 
<a name="l00328"></a>00328   <span class="comment">// Again, if we know the name of the sequence variable we are interested</span>
<a name="l00329"></a>00329   <span class="comment">// in (or any of the other major data objects) we can ask for it by name.</span>
<a name="l00330"></a>00330   strcpy(seqVariable_name, <span class="stringliteral">"temperature per vertex"</span>);
<a name="l00331"></a>00331   rc = <a class="code" href="group__Variable.html#g23372bf294117d6761d750446516f0d3" title="Get sequence variables of a given name from the mesh.">fc_getSeqVariableByName</a>(mesh, seqVariable_name, &amp;numReturnSeqVariables,
<a name="l00332"></a>00332                       &amp;numStepPerReturnSeqVar, &amp;returnSeqVariables);
<a name="l00333"></a>00333   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00334"></a>00334     exit(rc);
<a name="l00335"></a>00335   <span class="keywordflow">if</span> (numReturnSeqVariables != 1){
<a name="l00336"></a>00336     <a class="code" href="error_8h.html#ed3cf62a82d02c561c0b9c80756fcab9">fc_exitIfErrorPrintf</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>, <span class="stringliteral">"Can't find (unique) variable '%s'"</span>,
<a name="l00337"></a>00337                  seqVariable_name);
<a name="l00338"></a>00338   }
<a name="l00339"></a>00339   seqVariable = returnSeqVariables[0];
<a name="l00340"></a>00340   numStep = numStepPerReturnSeqVar[0];
<a name="l00341"></a>00341   free(returnSeqVariables);
<a name="l00342"></a>00342   free(numStepPerReturnSeqVar);
<a name="l00343"></a>00343   
<a name="l00344"></a>00344   <span class="comment">// Usually there is only one sequence in a dataset, but there can be</span>
<a name="l00345"></a>00345   <span class="comment">// more and a mesh may have sequence variables that are on different</span>
<a name="l00346"></a>00346   <span class="comment">// sequences. You can get the handle of the sequence that a sequence</span>
<a name="l00347"></a>00347   <span class="comment">// variable is on by using fc_getSequenceFromSeqVariable() as we do</span>
<a name="l00348"></a>00348   <span class="comment">// here for the first sequence variable.</span>
<a name="l00349"></a>00349   rc = <a class="code" href="group__Variable.html#g314a992ec5ba07d7075f1172b13ef166" title="Get the parent sequence of a sequence variable.">fc_getSequenceFromSeqVariable</a>(numStep, seqVariable, &amp;sequence);
<a name="l00350"></a>00350   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00351"></a>00351     exit(rc);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353   <span class="comment">// Before moving on, let's cleanup up some allocated memory that we</span>
<a name="l00354"></a>00354   <span class="comment">// no longer want. We are only deleting the arrays of handles--the</span>
<a name="l00355"></a>00355   <span class="comment">// subset and variables still exist and we can get them again.</span>
<a name="l00356"></a>00356   free(sequences);
<a name="l00357"></a>00357   free(meshes);
<a name="l00358"></a>00358   free(subsets);
<a name="l00359"></a>00359   free(variables);
<a name="l00360"></a>00360   free(numStepPerSeqVar);
<a name="l00361"></a>00361   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVariable; i++)
<a name="l00362"></a>00362     free(seqVariables[i]);
<a name="l00363"></a>00363   free(seqVariables);
<a name="l00364"></a>00364 
<a name="l00365"></a>00365   <span class="comment">// --- Performing a characterization</span>
<a name="l00366"></a>00366 
<a name="l00367"></a>00367   <span class="comment">// Let's do a characterization by examining hot spots in the temperature</span>
<a name="l00368"></a>00368   <span class="comment">// sequence variable on the hex mesh. First we'll find the hot spots in each</span>
<a name="l00369"></a>00369   <span class="comment">// time step. Then we'll track them so we know their behavior over time.</span>
<a name="l00370"></a>00370   <span class="comment">// Finally we'll characterize them by doing some basic statistics</span>
<a name="l00371"></a>00371   <span class="comment">// and also finding their centroids.</span>
<a name="l00372"></a>00372 
<a name="l00373"></a>00373   <span class="comment">// Let's define a hot spot as a region with a temperature greater than 100.</span>
<a name="l00374"></a>00374   <span class="comment">// To find these regions in the first step we first threshold the first step</span>
<a name="l00375"></a>00375   <span class="comment">// of our sequence variable to create a subset that has ALL of the</span>
<a name="l00376"></a>00376   <span class="comment">// mesh entities that have values greater than 100. Then we separate</span>
<a name="l00377"></a>00377   <span class="comment">// these entities into separate connected components. The second argument</span>
<a name="l00378"></a>00378   <span class="comment">// of fc_segment is a flag to tell the segmentation algorithm how to</span>
<a name="l00379"></a>00379   <span class="comment">// judge connectedness.</span>
<a name="l00380"></a>00380   printf(<span class="stringliteral">"Finding hot spots:\n"</span>);
<a name="l00381"></a>00381   threshold = 100.;
<a name="l00382"></a>00382   rc = <a class="code" href="group__Threshold.html#g6419d82dbacbe4aed0a6e2cde7c3d146" title="Create thresholded region.">fc_createThresholdSubset</a>(seqVariable[0], <span class="stringliteral">"&gt;"</span>, 100., 
<a name="l00383"></a>00383                                 <span class="stringliteral">"Step0_ThresholdSubset"</span>, &amp;thresholdSubset);
<a name="l00384"></a>00384   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00385"></a>00385     exit(rc);
<a name="l00386"></a>00386   rc = <a class="code" href="group__TopologyRelations.html#g45c86dc9ebd4835c3f96efdf2a6003d9" title="Created separate connected components.">fc_segment</a>(thresholdSubset, 0, &amp;numSegment, &amp;segments);
<a name="l00387"></a>00387   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00388"></a>00388     exit(rc);
<a name="l00389"></a>00389   printf(<span class="stringliteral">"Found %d hot spots in step#0 of sequence variable '%s'\n"</span>,
<a name="l00390"></a>00390          numSegment, seqVariable_name);
<a name="l00391"></a>00391   
<a name="l00392"></a>00392   <span class="comment">// We created an intermediate subset that we won't need again so let's</span>
<a name="l00393"></a>00393   <span class="comment">// delete it.  Note that further calls with this handle will report</span>
<a name="l00394"></a>00394   <span class="comment">// errors.</span>
<a name="l00395"></a>00395   rc = <a class="code" href="group__Subset.html#g550d0636e4f35c29d6dbc427b3165a24" title="Delete a subset.">fc_deleteSubset</a>(thresholdSubset);
<a name="l00396"></a>00396   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00397"></a>00397     exit(rc);
<a name="l00398"></a>00398 
<a name="l00399"></a>00399   <span class="comment">// The segment (a single connected component) will from now on be</span>
<a name="l00400"></a>00400   <span class="comment">// called an ROI (region of interest). Technically, an ROI is the subset </span>
<a name="l00401"></a>00401   <span class="comment">// handle plus the stepID. Let's store the current ROI and find others in the</span>
<a name="l00402"></a>00402   <span class="comment">// rest of the seqVariable's steps.</span>
<a name="l00403"></a>00403   numROIPerStep = (<span class="keywordtype">int</span>*)malloc(numStep*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00404"></a>00404   ROIsPerStep = (<a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>**)malloc(numStep*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a>*));
<a name="l00405"></a>00405   numROIPerStep[0] = numSegment;
<a name="l00406"></a>00406   ROIsPerStep[0] = segments;
<a name="l00407"></a>00407   <span class="keywordflow">for</span> (i = 1; i &lt; numStep; i++) {
<a name="l00408"></a>00408     sprintf(char_buf, <span class="stringliteral">"Step%d_ThresholdSubset"</span>, i);
<a name="l00409"></a>00409     rc = <a class="code" href="group__Threshold.html#g6419d82dbacbe4aed0a6e2cde7c3d146" title="Create thresholded region.">fc_createThresholdSubset</a>(seqVariable[i], <span class="stringliteral">"&gt;"</span>, 100., 
<a name="l00410"></a>00410                                   char_buf, &amp;thresholdSubset);
<a name="l00411"></a>00411     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00412"></a>00412       exit(rc);
<a name="l00413"></a>00413     rc = <a class="code" href="group__TopologyRelations.html#g45c86dc9ebd4835c3f96efdf2a6003d9" title="Created separate connected components.">fc_segment</a>(thresholdSubset, 0, &amp;numSegment, &amp;segments);
<a name="l00414"></a>00414     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00415"></a>00415       exit(rc);
<a name="l00416"></a>00416     printf(<span class="stringliteral">"Found %d hot spots in step#%d of sequence variable '%s'\n"</span>,
<a name="l00417"></a>00417            numSegment, i, seqVariable_name);
<a name="l00418"></a>00418     rc = <a class="code" href="group__Subset.html#g550d0636e4f35c29d6dbc427b3165a24" title="Delete a subset.">fc_deleteSubset</a>(thresholdSubset);
<a name="l00419"></a>00419     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00420"></a>00420       exit(rc);
<a name="l00421"></a>00421     numROIPerStep[i] = numSegment;
<a name="l00422"></a>00422     ROIsPerStep[i] = segments;
<a name="l00423"></a>00423   }
<a name="l00424"></a>00424   printf(<span class="stringliteral">"\n"</span>);
<a name="l00425"></a>00425   
<a name="l00426"></a>00426   <span class="comment">// Although we've found all of the ROIs, there is still some</span>
<a name="l00427"></a>00427   <span class="comment">// important information missing: how do we know which ROIs from</span>
<a name="l00428"></a>00428   <span class="comment">// different time steps are really the same hot spot? ROI#0 from step#1</span>
<a name="l00429"></a>00429   <span class="comment">// is not necessary the same hot spot as ROI#0 from step#2. Also, at step#5</span>
<a name="l00430"></a>00430   <span class="comment">// we suddenly only have 1 hot spot when there used to be two. Did one hot</span>
<a name="l00431"></a>00431   <span class="comment">// spot disappear? Did the two hot spots merge into one? Or is it a </span>
<a name="l00432"></a>00432   <span class="comment">// completely new hot spot? To figure this out we introduce feature tracking.</span>
<a name="l00433"></a>00433   <span class="comment">// Features are structures that exist over time and are therefore essentially</span>
<a name="l00434"></a>00434   <span class="comment">// a series of ROIs. In FCLib, features are stored in an object called</span>
<a name="l00435"></a>00435   <span class="comment">// a feature group. fc_trackAllSteps() is used to create the feature</span>
<a name="l00436"></a>00436   <span class="comment">// group from the ROIs. </span>
<a name="l00437"></a>00437   rc = <a class="code" href="group__Features.html#g8267eb0702817ed89cdb46635cf3d97d" title="Create a new Feature Group.">fc_createFeatureGroup</a>(&amp;featureGroup);
<a name="l00438"></a>00438   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00439"></a>00439     exit(rc);
<a name="l00440"></a>00440   rc = <a class="code" href="group__FeatureTracking.html#g993f13a1cdda004e273ddd21f8877cad" title="Track and create features.">fc_trackAllSteps</a>(numStep, numROIPerStep, ROIsPerStep, featureGroup);
<a name="l00441"></a>00441   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00442"></a>00442     exit(rc);
<a name="l00443"></a>00443 
<a name="l00444"></a>00444   <span class="comment">// Intemediate cleanup: All of the ROIs are now organized within the feature</span>
<a name="l00445"></a>00445   <span class="comment">// group so we don't need our old organization of the data any more.</span>
<a name="l00446"></a>00446   <span class="comment">// Again, we are only cleaning up handles, the ROIs still exists.</span>
<a name="l00447"></a>00447   free(numROIPerStep);
<a name="l00448"></a>00448   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++)
<a name="l00449"></a>00449     free(ROIsPerStep[i]);
<a name="l00450"></a>00450   free(ROIsPerStep);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452   <span class="comment">// Now you can ask the group about features</span>
<a name="l00453"></a>00453   rc = <a class="code" href="group__Features.html#gc8999b4dde0ae7507582e6f0b650c6ac" title="Get the number of Features in the Feature Group.">fc_featureGroup_getNumFeature</a>(featureGroup, &amp;numFeature);
<a name="l00454"></a>00454   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00455"></a>00455     exit(rc);
<a name="l00456"></a>00456   printf(<span class="stringliteral">"Found %d features:\n"</span>, numFeature);
<a name="l00457"></a>00457 
<a name="l00458"></a>00458   <span class="comment">// Now report the characterizations for each feature - a feature is</span>
<a name="l00459"></a>00459   <span class="comment">// accessed by the feature Group and the feature ID.</span>
<a name="l00460"></a>00460   <span class="keywordflow">for</span> (i = 0; i &lt; numFeature; i++) {
<a name="l00461"></a>00461     rc = <a class="code" href="group__Features.html#g5aa19adbb9a2b4ea327bde6f2c9f3530" title="Get the ROIs in a feature.">fc_getFeatureROIs</a>(featureGroup, i, &amp;numROI, &amp;stepIDs, &amp;ROIs);
<a name="l00462"></a>00462     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00463"></a>00463       exit(rc);
<a name="l00464"></a>00464     rc = <a class="code" href="group__Features.html#g0e91db0154faf9cc2cd50946ce86dab9" title="Get the parents of a feature.">fc_getFeatureParentIDs</a>(featureGroup, i, &amp;numParent, &amp;parentIDs);
<a name="l00465"></a>00465     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00466"></a>00466       exit(rc);
<a name="l00467"></a>00467     rc = <a class="code" href="group__Features.html#gf0fc90f846d2ae96821d51a16fa73453" title="Get the children of a feature.">fc_getFeatureChildIDs</a>(featureGroup, i, &amp;numChild, &amp;childIDs);
<a name="l00468"></a>00468     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00469"></a>00469       exit(rc);
<a name="l00470"></a>00470     printf(<span class="stringliteral">"Feature #%d:\n"</span>, i);
<a name="l00471"></a>00471     printf(<span class="stringliteral">"    numParent = %d, IDs = "</span>, numParent);
<a name="l00472"></a>00472     <span class="keywordflow">if</span> (numParent &gt; 0) {
<a name="l00473"></a>00473       printf(<span class="stringliteral">"%d"</span>, parentIDs[0]);
<a name="l00474"></a>00474       <span class="keywordflow">for</span> (j = 1; j &lt; numParent; j++)
<a name="l00475"></a>00475         printf(<span class="stringliteral">", %d"</span>, parentIDs[1]);
<a name="l00476"></a>00476     }
<a name="l00477"></a>00477     printf(<span class="stringliteral">"\n"</span>);
<a name="l00478"></a>00478     printf(<span class="stringliteral">"    numChild  = %d, IDs = "</span>, numChild);
<a name="l00479"></a>00479     <span class="keywordflow">if</span> (numChild &gt; 0) {
<a name="l00480"></a>00480       printf(<span class="stringliteral">"%d"</span>, childIDs[0]);
<a name="l00481"></a>00481       <span class="keywordflow">for</span> (j = 1; j &lt; numChild; j++)
<a name="l00482"></a>00482         printf(<span class="stringliteral">", %d"</span>, childIDs[1]);
<a name="l00483"></a>00483     }
<a name="l00484"></a>00484     printf(<span class="stringliteral">"\n"</span>);
<a name="l00485"></a>00485     printf(<span class="stringliteral">"    numStep = %d\n"</span>, numROI);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="comment">// Do the characterizations, these are per step (ROI) of the feature</span>
<a name="l00488"></a>00488     <span class="comment">//   1) get ROI maximum temperature</span>
<a name="l00489"></a>00489     <span class="comment">//   2) get ROI centroid</span>
<a name="l00490"></a>00490     <span class="keywordflow">for</span> (j = 0; j &lt; numROI; j++) {
<a name="l00491"></a>00491       rc = <a class="code" href="group__Statistics.html#g7b44d38b8800d8c619af4b6b52d58759" title="Find min &amp;amp; max data values in a subset of a variable.">fc_getVariableSubsetMinMax</a>(seqVariable[stepIDs[j]], ROIs[j], NULL,
<a name="l00492"></a>00492                                       NULL, &amp;maxTemperature, NULL);
<a name="l00493"></a>00493       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00494"></a>00494         exit(rc);
<a name="l00495"></a>00495       rc = <a class="code" href="group__GeometricRelations.html#gae122de1ff7f8213d3270cedf67c18b2" title="Compute centroid of a subset.">fc_getSubsetCentroid</a>(ROIs[j], &amp;dim, &amp;centroid);
<a name="l00496"></a>00496       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00497"></a>00497         exit(rc);
<a name="l00498"></a>00498       printf(<span class="stringliteral">"    Step#%d: maxTemp = %f\n"</span>, stepIDs[j], maxTemperature);
<a name="l00499"></a>00499       printf(<span class="stringliteral">"             centroid = (%f, %f, %f)\n"</span>, centroid[0], 
<a name="l00500"></a>00500              centroid[1], centroid[2]);
<a name="l00501"></a>00501     }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503     <span class="comment">// cleanup</span>
<a name="l00504"></a>00504     free(stepIDs);
<a name="l00505"></a>00505     free(ROIs);
<a name="l00506"></a>00506     free(parentIDs);
<a name="l00507"></a>00507     free(childIDs);
<a name="l00508"></a>00508   }
<a name="l00509"></a>00509   printf(<span class="stringliteral">"\n"</span>);
<a name="l00510"></a>00510 
<a name="l00511"></a>00511   <span class="comment">// cleanup</span>
<a name="l00512"></a>00512   <a class="code" href="group__Features.html#gf03a731433438d5b565026b23d338fa6" title="Free memory associated with a feature group.">fc_freeFeatureGroup</a>(featureGroup);
<a name="l00513"></a>00513   free(seqVariable);
<a name="l00514"></a>00514 
<a name="l00515"></a>00515   <span class="comment">// --- All done</span>
<a name="l00516"></a>00516 
<a name="l00517"></a>00517   <span class="comment">// When you are all done it is a good idea to finalize the library.</span>
<a name="l00518"></a>00518   <span class="comment">// This will automatically delete all datasets (and deleting a</span>
<a name="l00519"></a>00519   <span class="comment">// dataset automatically deletes all of its sequences &amp; meshes &amp; etc.)</span>
<a name="l00520"></a>00520   <a class="code" href="group__Library.html#g29ff0e41fb4f58b55489bc875ac32b2f" title="Cleanup when done using Feature Characterization Library.">fc_finalLibrary</a>();
<a name="l00521"></a>00521 
<a name="l00522"></a>00522   <span class="comment">// Bye!</span>
<a name="l00523"></a>00523   printf(<span class="stringliteral">"... finished running ex1_intro\n"</span>);
<a name="l00524"></a>00524   exit(0);
<a name="l00525"></a>00525 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 27 13:25:51 2008 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
