<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>FCLib: Mesh</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Mesh<br>
<small>
[<a class="el" href="group__DataInterface.html">Data Interface</a>]</small>
</h1>
<p>
<div class="dynheader">
Collaboration diagram for Mesh:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__Mesh.gif" border="0" alt="" usemap="#group____Mesh_map">
<map name="group____Mesh_map">
<area shape="rect" href="group__PrivateMesh.html" title="(Private)" alt="" coords="287,5,367,32"><area shape="rect" href="group__DataInterface.html" title="Primary interface between computational routines and actual data." alt="" coords="5,5,131,32"></map></td></tr></table></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Operations on meshes. 
<p>
<b>Description:</b> <p>
(For an explanation of general data manipulations, see <a class="el" href="group__DataInterface.html">Data Interface</a>.) 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateMesh.html">(Private)</a></td></tr>

<tr><td colspan="2"><br><h2>Create new mesh from scratch.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g3928a328006617330e735ca1644e7cb3">fc_createMesh</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *meshname, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> *mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new mesh.  <a href="#g3928a328006617330e735ca1644e7cb3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gbe7f568d5b8fe72693ad308d15194e01">fc_setMeshCoords</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int dim, int numVertex, double *coords)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the mesh coordinates by copy.  <a href="#gbe7f568d5b8fe72693ad308d15194e01"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g00fb04104cb0c5a6638cca5027b4b1df">fc_setMeshCoordsPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int dim, int numVertex, double *coords)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the pointer to the mesh coordinates.  <a href="#g00fb04104cb0c5a6638cca5027b4b1df"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gd7bb8a0f67d6c0b44edbfe864a53b218">fc_setMeshElementConns</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> elemType, int numElem, int *connectivities)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the mesh element to vertex connectivities by copy.  <a href="#gd7bb8a0f67d6c0b44edbfe864a53b218"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g73caf4cfc1c9d8b302d880735a67cd2a">fc_setMeshElementConnsPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> elemType, int numElem, int *connectivities)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the pointer to the mesh element connectivities.  <a href="#g73caf4cfc1c9d8b302d880735a67cd2a"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Other ways to get new meshes.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g13cefebd04b8d1c1586737e32fc6ae2b">fc_copyMesh</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> src_mesh, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> dest_ds, char *newName, int doCopyVar, int doCopySeqVar, int doCopySubset, int doCopySeqSubset, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> *new_mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a mesh.  <a href="#g13cefebd04b8d1c1586737e32fc6ae2b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g13ed8e3d8db0f8452d15bc3249b1c33d">fc_createSubsetMesh</a> (<a class="el" href="structFC__Subset.html">FC_Subset</a> subset, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> dest_ds, int <a class="el" href="subsetter_8c.html#a5132f7621c6dc0ab225ba797836ebe1">doStrict</a>, int doCopyVar, int doCopySeqVar, int doCopySubset, int doCopySeqSubset, char *newName, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> *new_mesh, <a class="el" href="structFC__Variable.html">FC_Variable</a> *vertmap, <a class="el" href="structFC__Variable.html">FC_Variable</a> *elemmap)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new mesh which is the subset of another mesh.  <a href="#g13ed8e3d8db0f8452d15bc3249b1c33d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gaab63abd2e3988110ddf40e1e797ef69">fc_createSimpleHexMesh</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *newName, int N, int M, int P, double *lower_coords, double *upper_coords, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> *new_mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a simple hex mesh.  <a href="#gaab63abd2e3988110ddf40e1e797ef69"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gf1655114af25cd7cc43cd9549a16d0bd">fc_createSphereMesh</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *newName, <a class="el" href="group__SimpleDataObjects.html#gf0a2bdabac4a21b42f4b480baf9128d7">FC_Coords</a> center, double radius, int requestedNodes, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> *new_mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a simple sphere mesh.  <a href="#gf1655114af25cd7cc43cd9549a16d0bd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g57c475cb784b009f4ed3518e15b96768">fc_setSphereDisplacementVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> displacement_var, <a class="el" href="group__SimpleDataObjects.html#gf0a2bdabac4a21b42f4b480baf9128d7">FC_Coords</a> new_center, double new_radius)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update a displacement variable for a sphere to have a new center and radius.  <a href="#g57c475cb784b009f4ed3518e15b96768"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gfa2a138c204d9d34d1e1c213f2b46f1c">_fc_setSphereCoords</a> (int numVerts, <a class="el" href="group__SimpleDataObjects.html#gf0a2bdabac4a21b42f4b480baf9128d7">FC_Coords</a> center, double radius, double *coords)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set coordinates for a sphere mesh.  <a href="#gfa2a138c204d9d34d1e1c213f2b46f1c"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get existing meshes.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gcb092c2c909dd536c0120830890a9f36">fc_getMeshes</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numMesh, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> **meshes)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the meshes in a dataset.  <a href="#gcb092c2c909dd536c0120830890a9f36"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g52cbaab898bdb451fa44b96ccdc9a206">fc_getNumMesh</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numMesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the the number of meshes in a dataset.  <a href="#g52cbaab898bdb451fa44b96ccdc9a206"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gb72987c2bf83a19f208df925bc8af86b">fc_getMeshByName</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *meshname, int *numMeshes, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> **meshes)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get all meshes with a given name from the dataset.  <a href="#gb72987c2bf83a19f208df925bc8af86b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Change the name of a mesh.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g40a408fd73b9322f7ed37313195f7392">fc_changeMeshName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *newName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the name of a mesh.  <a href="#g40a408fd73b9322f7ed37313195f7392"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Release/delete meshes.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g0b36a706a38302af3c13f8970b1d1673">fc_releaseMesh</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to minimize mesh's memory usage.  <a href="#g0b36a706a38302af3c13f8970b1d1673"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g7e846c58fe79c1f2bac817a2b7ed692e">fc_deleteMesh</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a mesh.  <a href="#g7e846c58fe79c1f2bac817a2b7ed692e"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get mesh metadata.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6">fc_isMeshValid</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that the handle refers to a valid mesh.  <a href="#gab6b9ca1bc6e1e7d549ce9fcd396a5e6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g3d701a44941883311e4940d7d3b4146a">fc_getMeshName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char **meshname)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return name of a mesh.  <a href="#g3d701a44941883311e4940d7d3b4146a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#ge4b575375abe8d1d6d19f4a8c61f3ace">fc_getDatasetFromMesh</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> *dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the parent dataset of the mesh.  <a href="#ge4b575375abe8d1d6d19f4a8c61f3ace"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#ged61b1f684fc2a6ac489c10841cdb591">fc_getMeshInfo</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *topodim, int *dim, int *numVertex, int *numElement, <a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *elemType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get information about a mesh.  <a href="#ged61b1f684fc2a6ac489c10841cdb591"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gcba52ba9ff6c1a6903fec0fe1796c659">fc_getMeshTopodim</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *topodim)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the topological dimensionality of the mesh.  <a href="#gcba52ba9ff6c1a6903fec0fe1796c659"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g1dbe9de126f08baea03de91a37b0258b">fc_getMeshDim</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *dim)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns dimensionality of the mesh coordinates.  <a href="#g1dbe9de126f08baea03de91a37b0258b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g9dca153475c9927e7497fd827cfd5562">fc_getMeshNumVertex</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numVertex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of vertices in a mesh.  <a href="#g9dca153475c9927e7497fd827cfd5562"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g8bcadefbf0728724adf77ef52c1f3732">fc_getMeshNumElement</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numElem)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns number of elements in a mesh.  <a href="#g8bcadefbf0728724adf77ef52c1f3732"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g1c1684ecf98e82a0ab18f7f9dbdddfc5">fc_getMeshElementType</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *elemType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns type of elements in the mesh.  <a href="#g1c1684ecf98e82a0ab18f7f9dbdddfc5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g5ae1bc6adbd87df4eb017c1c521f4225">fc_getMeshEdgeFaceInfo</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numEdge, int *numFace, <a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *faceType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get information about edges and faces in a mesh.  <a href="#g5ae1bc6adbd87df4eb017c1c521f4225"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g82f4aa5cf3a4a5011ae65cab2ed1a8c1">fc_getMeshNumEdge</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numEdge)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get number of edges in a mesh.  <a href="#g82f4aa5cf3a4a5011ae65cab2ed1a8c1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g8c619c146c0850895098f5dbfb487418">fc_getMeshNumFace</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numFace)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get number of faces in a mesh.  <a href="#g8c619c146c0850895098f5dbfb487418"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g847f92c370cfa4d85fdd8d4be7d9b88c">fc_getMeshFaceType</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *faceType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get element type of the face in the mesh.  <a href="#g847f92c370cfa4d85fdd8d4be7d9b88c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc">fc_getMeshNumEntity</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> assoc, int *numEntity)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns number of a type of mesh entity.  <a href="#g12d76ae817fee1f4ea941aad228923bc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gfc269313fe6595610ac3eb54cef327c7">fc_getMeshEntityElementType</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> assoc, int ID, <a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *elemType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the element type of the mesh entity.  <a href="#gfc269313fe6595610ac3eb54cef327c7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get mesh big data.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gff8561557c19ae03be9ff18cc73a6823">fc_getMeshCoordsPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, double **coords_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the vertex coordinates of the mesh.  <a href="#gff8561557c19ae03be9ff18cc73a6823"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gf9c8eec4537a70152e562330fd1ac5a7">fc_getMeshCoordsAsVariable</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="structFC__Variable.html">FC_Variable</a> *coords_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the vertex coordinates of the mesh as a variable.  <a href="#gf9c8eec4537a70152e562330fd1ac5a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gcae096882dec5f984503869f5f64acfc">fc_getMeshEdgeConnsPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int **conns_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return edge connectivities.  <a href="#gcae096882dec5f984503869f5f64acfc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gcb5601b14ced6179dd454ed35585d21d">fc_getMeshFaceTypesPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> **faceTypes_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return face types.  <a href="#gcb5601b14ced6179dd454ed35585d21d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g8e318f4b17572413004acf14b18deb2b">fc_getMeshFaceConnsPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int **numVertPerFace_p, int *maxNumVertPerFace_p, int **conns_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return face connectivities.  <a href="#g8e318f4b17572413004acf14b18deb2b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g19906bcae562d226991740da142000c0">fc_getMeshElementConnsPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int **conns_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return element to vertex connectivities for the mesh.  <a href="#g19906bcae562d226991740da142000c0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gcc3f8cb48b0c2673d9e0ce0d4eba2878">fc_getMeshElementToEdgeConnsPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int **elemToEdgeConns_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return element to edge connectivities.  <a href="#gcc3f8cb48b0c2673d9e0ce0d4eba2878"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g7f17910148b4237e84ca374845688cfc">fc_getMeshElementToFaceConnsPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int **elemToFaceConns_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return element to face connectivities.  <a href="#g7f17910148b4237e84ca374845688cfc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#gfcea3747b7482cb7317b2aa54e7b1f8c">fc_getMeshElementFaceOrientsPtr</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int **elemFaceOrients_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return element's face's orientations relative to global faces.  <a href="#gfcea3747b7482cb7317b2aa54e7b1f8c"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Print mesh.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mesh.html#g997dddca0418a14d3d3a2d2f7a76d622">fc_printMesh</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *label, int print_edgeConns, int print_faceConns, int print_elemConns, int print_coords)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print mesh meta data to stdout, and optionally the connections and/or coordinates.  <a href="#g997dddca0418a14d3d3a2d2f7a76d622"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gfa2a138c204d9d34d1e1c213f2b46f1c"></a><!-- doxytag: member="mesh.c::_fc_setSphereCoords" ref="gfa2a138c204d9d34d1e1c213f2b46f1c" args="(int numVerts, FC_Coords center, double radius, double *coords)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> _fc_setSphereCoords           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numVerts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SimpleDataObjects.html#gf0a2bdabac4a21b42f4b480baf9128d7">FC_Coords</a>&nbsp;</td>
          <td class="paramname"> <em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>coords</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set coordinates for a sphere mesh. 
<p>
<b>Description:</b> <p>
This function creates a spehere mesh.<p>
Note: numVerts must equal sqrt((numVerts-2)^2)+2 Note: the user supplies the coords array. This function just fills it in (no boundary checks are performed)<p>
<b>Modifications:</b> <ul>
<li>04/08/2008 CDU Created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numVerts</em>&nbsp;</td><td>
Input - the number of vertices that describe the sphere. </td></tr>
<tr><td valign="top"><em>center</em>&nbsp;</td><td>
Input - coordinate for where sphere's center is located </td></tr>
<tr><td valign="top"><em>radius</em>&nbsp;</td><td>
Input - the radius of the spehere </td></tr>
<tr><td valign="top"><em>coords</em>&nbsp;</td><td>
Output - the pre-allocated array that holds the vertex coordinates </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l01875">1875</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l01949">fc_createSphereMesh()</a>, and <a class="el" href="mesh_8c-source.html#l02091">fc_setSphereDisplacementVariable()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01880"></a>01880  {
<a name="l01881"></a>01881 
<a name="l01882"></a>01882   <span class="keywordtype">int</span> numPlane;
<a name="l01883"></a>01883   <span class="keywordtype">int</span> place, zcount, i;
<a name="l01884"></a>01884   <span class="keyword">const</span> <span class="keywordtype">int</span> numDim=3;
<a name="l01885"></a>01885   <span class="keywordtype">double</span> phi, theta;
<a name="l01886"></a>01886   <span class="keyword">const</span> <span class="keywordtype">double</span> toRad = (M_PI/180.0);
<a name="l01887"></a>01887  
<a name="l01888"></a>01888   <span class="comment">//quick check to make sure not null ptr</span>
<a name="l01889"></a>01889   <span class="keywordflow">if</span>(!center || !coords){
<a name="l01890"></a>01890     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01891"></a>01891     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01892"></a>01892   }
<a name="l01893"></a>01893 
<a name="l01894"></a>01894   <span class="comment">//Verify that we were given something with the right number of coordinates</span>
<a name="l01895"></a>01895   numPlane = sqrt(numVerts-2);
<a name="l01896"></a>01896   <span class="keywordflow">if</span>(numPlane*numPlane != numVerts-2){
<a name="l01897"></a>01897     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s : given a number vertices that isn't sqrt((numVerts-2)^2)+2 == numVerts"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01898"></a>01898     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01899"></a>01899   }
<a name="l01900"></a>01900 
<a name="l01901"></a>01901   <span class="comment">//Work your way down all of the planes and all the circles</span>
<a name="l01902"></a>01902   place =0;
<a name="l01903"></a>01903   phi  =180.0/(double)(numPlane+1);
<a name="l01904"></a>01904   theta=360.0/(double)numPlane;
<a name="l01905"></a>01905   <span class="keywordflow">for</span>(zcount=1; zcount&lt;=numPlane; zcount++){
<a name="l01906"></a>01906     <span class="keywordtype">double</span> zplane = cos((<span class="keywordtype">double</span>)zcount*phi*toRad);
<a name="l01907"></a>01907     <span class="keywordflow">for</span>(i=0;i&lt;numPlane; i++){
<a name="l01908"></a>01908       <span class="keywordtype">double</span> r=sqrt(1-zplane*zplane);
<a name="l01909"></a>01909       coords[place*numDim+0] = center[0] + radius*(r*cos(theta*(<span class="keywordtype">double</span>)i*toRad));
<a name="l01910"></a>01910       coords[place*numDim+1] = center[1] + radius*(r*sin(theta*(<span class="keywordtype">double</span>)i*toRad));
<a name="l01911"></a>01911       coords[place*numDim+2] = center[2] + radius*zplane;
<a name="l01912"></a>01912       <span class="comment">//printf("(Plane %d Spot %d) &lt;%.3lf, %.3lf, %.3lf&gt;\n", zcount, place,</span>
<a name="l01913"></a>01913       <span class="comment">//     coords[place*numDim+0],coords[place*numDim+1],coords[place*numDim+2]);  </span>
<a name="l01914"></a>01914       place++;
<a name="l01915"></a>01915     }
<a name="l01916"></a>01916   }
<a name="l01917"></a>01917   <span class="comment">//Top</span>
<a name="l01918"></a>01918   coords[place*numDim+0] = center[0] + 0.0;
<a name="l01919"></a>01919   coords[place*numDim+1] = center[1] + 0.0;
<a name="l01920"></a>01920   coords[place*numDim+2] = center[2] + radius;
<a name="l01921"></a>01921   place++;
<a name="l01922"></a>01922 
<a name="l01923"></a>01923   <span class="comment">//Bottom</span>
<a name="l01924"></a>01924   coords[place*numDim+0] = center[0] + 0.0;
<a name="l01925"></a>01925   coords[place*numDim+1] = center[1] + 0.0;
<a name="l01926"></a>01926   coords[place*numDim+2] = center[2] - radius;
<a name="l01927"></a>01927   place++;
<a name="l01928"></a>01928 
<a name="l01929"></a>01929   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01930"></a>01930 
<a name="l01931"></a>01931 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g40a408fd73b9322f7ed37313195f7392"></a><!-- doxytag: member="mesh.c::fc_changeMeshName" ref="g40a408fd73b9322f7ed37313195f7392" args="(FC_Mesh mesh, char *newName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_changeMeshName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the name of a mesh. 
<p>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD. Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
Input - the mesh. </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - new name for the mesh. </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02369">2369</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02372"></a>02372   {
<a name="l02373"></a>02373   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02374"></a>02374 
<a name="l02375"></a>02375   <span class="comment">// check input</span>
<a name="l02376"></a>02376   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l02377"></a>02377   <span class="keywordflow">if</span> (meshSlot == NULL || newName == NULL) {
<a name="l02378"></a>02378     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02379"></a>02379     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02380"></a>02380   }
<a name="l02381"></a>02381 
<a name="l02382"></a>02382   <span class="comment">// log message</span>
<a name="l02383"></a>02383   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Changing name of mesh from '%s' to '%s'"</span>, 
<a name="l02384"></a>02384                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l02385"></a>02385   
<a name="l02386"></a>02386   <span class="comment">// Do it</span>
<a name="l02387"></a>02387   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>, newName);
<a name="l02388"></a>02388 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g13cefebd04b8d1c1586737e32fc6ae2b"></a><!-- doxytag: member="mesh.c::fc_copyMesh" ref="g13cefebd04b8d1c1586737e32fc6ae2b" args="(FC_Mesh src_mesh, FC_Dataset dest_ds, char *newName, int doCopyVar, int doCopySeqVar, int doCopySubset, int doCopySeqSubset, FC_Mesh *new_mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copyMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>src_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dest_ds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doCopyVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doCopySeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doCopySubset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doCopySeqSubset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> *&nbsp;</td>
          <td class="paramname"> <em>new_mesh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a mesh. 
<p>
<b>Description:</b> <p>
Create a copy of a mesh, in the specified dataset, with the given name. There is a flag to copy only the geom vs copying subsets and variables on the mesh.<p>
Note: if you chose to copy the sub/var, if there are any sequence subsets/variables on the mesh, this routine may copy their related sequences if they do not exist in the destination dataset.<p>
Note that this does not copy the globals, since those are on the dataset and not on the mesh<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000052">Todo:</a></b></dt><dd><ul>
<li>Should better define what constitutes an appropriate sequence when copying sequence variables. Right now very conservative: expects to find essentially the same sequence: same name &amp; same data values.</li><li>test doCopy = 0 option</li><li>test individual copy flags</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>2003-NOV-11 WSK Created</li><li>10/4/04 WSK, changed internals so they call more routines and go to the structs less often.</li><li>01/12/08 ACG - option to only copy geom</li><li>03/07/08 ACG - copy seq subset</li><li>06/17/08 ACG - individual copy flags </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_mesh</em>&nbsp;</td><td>
Input - the source mesh to be copied </td></tr>
<tr><td valign="top"><em>dest_ds</em>&nbsp;</td><td>
Input - the destination dataset to be copied into </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new mesh, a NULL value is a flag to use the name of the source mesh </td></tr>
<tr><td valign="top"><em>doCopyVar</em>&nbsp;</td><td>
Input - 1 to copy over the var </td></tr>
<tr><td valign="top"><em>doCopySeqVar</em>&nbsp;</td><td>
Input - 1 to copy over the seqvar </td></tr>
<tr><td valign="top"><em>doCopySubset</em>&nbsp;</td><td>
Input - 1 to copy over the subsets </td></tr>
<tr><td valign="top"><em>doCopySeqSubset</em>&nbsp;</td><td>
Input - 1 to copy over the seqsubsets </td></tr>
<tr><td valign="top"><em>new_mesh</em>&nbsp;</td><td>
Output - handle to the new mesh </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l00471">471</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::coordVarID</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="subset_8c-source.html#l00438">fc_copySeqSubset()</a>, <a class="el" href="sequence_8c-source.html#l00310">fc_copySequence()</a>, <a class="el" href="variable_8c-source.html#l02328">fc_copySeqVariable()</a>, <a class="el" href="subset_8c-source.html#l00351">fc_copySubset()</a>, <a class="el" href="variable_8c-source.html#l00929">fc_copyVariable()</a>, <a class="el" href="mesh_8c-source.html#l00119">fc_createMesh()</a>, <a class="el" href="mesh_8c-source.html#l03497">fc_getMeshCoordsAsVariable()</a>, <a class="el" href="mesh_8c-source.html#l03436">fc_getMeshCoordsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03762">fc_getMeshElementConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l02848">fc_getMeshInfo()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="subset_8c-source.html#l01313">fc_getSeqSubsets()</a>, <a class="el" href="sequence_8c-source.html#l01737">fc_getSequenceCoordsPtr()</a>, <a class="el" href="subset_8c-source.html#l03131">fc_getSequenceFromSeqSubset()</a>, <a class="el" href="variable_8c-source.html#l05317">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="sequence_8c-source.html#l01612">fc_getSequenceInfo()</a>, <a class="el" href="sequence_8c-source.html#l01527">fc_getSequenceName()</a>, <a class="el" href="sequence_8c-source.html#l01150">fc_getSequences()</a>, <a class="el" href="variable_8c-source.html#l03637">fc_getSeqVariables()</a>, <a class="el" href="subset_8c-source.html#l01253">fc_getSubsets()</a>, <a class="el" href="variable_8c-source.html#l03573">fc_getVariables()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="base_8c-source.html#l00769">FC_NULL_SEQUENCE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="mesh_8c-source.html#l00193">fc_setMeshCoords()</a>, <a class="el" href="mesh_8c-source.html#l00321">fc_setMeshElementConns()</a>, <a class="el" href="base_8c-source.html#l00741">fc_sizeofDataType()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00172">fc_copyDataset()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, and <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00481"></a>00481   { 
<a name="l00482"></a>00482   <span class="keywordtype">int</span> i, j;
<a name="l00483"></a>00483   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00484"></a>00484   <span class="keywordtype">int</span> topodim, dim, numVert, numElem;
<a name="l00485"></a>00485   <span class="keywordtype">int</span> numSubset, numSeqSub, numVariable, numSeqVar, *numStepPerSeq;
<a name="l00486"></a>00486   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a> *subsets, new_subset, **seqSubs, *new_seqSub;
<a name="l00487"></a>00487   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *variables, new_var, **seqVars, *new_seqVar;
<a name="l00488"></a>00488   <a class="code" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a" title="Possible element types.">FC_ElementType</a> elemType;
<a name="l00489"></a>00489   <span class="keywordtype">double</span> *coords;
<a name="l00490"></a>00490   <span class="keywordtype">int</span>* conns;
<a name="l00491"></a>00491   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dest_dsSlot;
<a name="l00492"></a>00492   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* src_meshSlot;
<a name="l00493"></a>00493   
<a name="l00494"></a>00494   <span class="comment">// default return value</span>
<a name="l00495"></a>00495   <span class="keywordflow">if</span> (new_mesh)
<a name="l00496"></a>00496     *new_mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498   <span class="comment">// check input</span>
<a name="l00499"></a>00499   dest_dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dest_ds);
<a name="l00500"></a>00500   src_meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(src_mesh);
<a name="l00501"></a>00501   <span class="keywordflow">if</span> (dest_dsSlot == NULL || src_meshSlot == NULL || new_mesh == NULL
<a name="l00502"></a>00502       || (doCopyVar &lt; 0 || doCopyVar &gt; 1 ) 
<a name="l00503"></a>00503       || (doCopySeqVar &lt; 0 || doCopySeqVar &gt; 1 ) 
<a name="l00504"></a>00504       || (doCopySubset &lt; 0 || doCopySubset &gt; 1 ) 
<a name="l00505"></a>00505       || (doCopySeqSubset &lt; 0 || doCopySeqSubset &gt; 1 )){ 
<a name="l00506"></a>00506     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00507"></a>00507     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00508"></a>00508   }
<a name="l00509"></a>00509 
<a name="l00510"></a>00510   <span class="comment">// test for NULL name</span>
<a name="l00511"></a>00511   <span class="keywordflow">if</span> (newName == NULL)
<a name="l00512"></a>00512     newName = src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514   <span class="comment">// log message</span>
<a name="l00515"></a>00515   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Copying mesh '%s' to '%s'"</span>, src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, 
<a name="l00516"></a>00516                       newName);
<a name="l00517"></a>00517 
<a name="l00518"></a>00518   <span class="comment">// get src data</span>
<a name="l00519"></a>00519   rc = <a class="code" href="group__Mesh.html#ged61b1f684fc2a6ac489c10841cdb591" title="Get information about a mesh.">fc_getMeshInfo</a>(src_mesh, &amp;topodim, &amp;dim, &amp;numVert, &amp;numElem,
<a name="l00520"></a>00520                         &amp;elemType);
<a name="l00521"></a>00521   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00522"></a>00522     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for mesh '%s'"</span>,
<a name="l00523"></a>00523                           src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00524"></a>00524     <span class="keywordflow">return</span> rc;
<a name="l00525"></a>00525   }
<a name="l00526"></a>00526   rc = <a class="code" href="group__Mesh.html#gff8561557c19ae03be9ff18cc73a6823" title="Return the vertex coordinates of the mesh.">fc_getMeshCoordsPtr</a>(src_mesh, &amp;coords);
<a name="l00527"></a>00527   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00528"></a>00528     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get coords for mesh '%s'"</span>,
<a name="l00529"></a>00529                           src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00530"></a>00530     <span class="keywordflow">return</span> rc;
<a name="l00531"></a>00531   }
<a name="l00532"></a>00532   rc = <a class="code" href="group__Mesh.html#g19906bcae562d226991740da142000c0" title="Return element to vertex connectivities for the mesh.">fc_getMeshElementConnsPtr</a>(src_mesh, &amp;conns);
<a name="l00533"></a>00533   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00534"></a>00534     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get connectivities for mesh '%s'"</span>,
<a name="l00535"></a>00535                           src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00536"></a>00536     <span class="keywordflow">return</span> rc;
<a name="l00537"></a>00537   }
<a name="l00538"></a>00538 
<a name="l00539"></a>00539   <span class="comment">// create new mesh </span>
<a name="l00540"></a>00540   rc = <a class="code" href="group__Mesh.html#g3928a328006617330e735ca1644e7cb3" title="Create a new mesh.">fc_createMesh</a>(dest_ds, newName, new_mesh);
<a name="l00541"></a>00541   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00542"></a>00542     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get create new mesh '%s'"</span>, newName);
<a name="l00543"></a>00543     <span class="keywordflow">return</span> rc;
<a name="l00544"></a>00544   }
<a name="l00545"></a>00545   rc = <a class="code" href="group__Mesh.html#gbe7f568d5b8fe72693ad308d15194e01" title="Set the mesh coordinates by copy.">fc_setMeshCoords</a>(*new_mesh, dim, numVert, coords);
<a name="l00546"></a>00546   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00547"></a>00547     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set vertices on mesh '%s'"</span>, newName);
<a name="l00548"></a>00548     <span class="keywordflow">return</span> rc;
<a name="l00549"></a>00549   }
<a name="l00550"></a>00550   rc = <a class="code" href="group__Mesh.html#gd7bb8a0f67d6c0b44edbfe864a53b218" title="Set the mesh element to vertex connectivities by copy.">fc_setMeshElementConns</a>(*new_mesh, elemType, numElem, conns);
<a name="l00551"></a>00551   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00552"></a>00552     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set elements on mesh '%s'"</span>, newName);
<a name="l00553"></a>00553     <span class="keywordflow">return</span> rc;
<a name="l00554"></a>00554   }
<a name="l00555"></a>00555 
<a name="l00556"></a>00556   <span class="keywordflow">if</span> (doCopyVar == 0 &amp;&amp; doCopySeqVar == 0 &amp;&amp; doCopySubset == 0 &amp;&amp; doCopySeqSubset == 0){
<a name="l00557"></a>00557     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00558"></a>00558   }
<a name="l00559"></a>00559 
<a name="l00560"></a>00560   <span class="comment">// Note: if you change behavior here, might want to change in</span>
<a name="l00561"></a>00561   <span class="comment">// fc_createSubsetMesh() too</span>
<a name="l00562"></a>00562   <span class="keywordflow">if</span> (doCopySubset){
<a name="l00563"></a>00563     <span class="comment">// copy the subsets</span>
<a name="l00564"></a>00564     rc = <a class="code" href="group__Subset.html#gb12aea784bf43ec6a29a8e51a3c0da51" title="Get the subsets in a mesh.">fc_getSubsets</a>(src_mesh, &amp;numSubset, &amp;subsets);
<a name="l00565"></a>00565     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00566"></a>00566       <span class="keywordflow">return</span> rc;
<a name="l00567"></a>00567     <span class="keywordflow">for</span> (i = 0; i &lt; numSubset; i++) {
<a name="l00568"></a>00568       rc = <a class="code" href="group__Subset.html#g8c233583d14e8205bbfe4aca0d196772" title="Copy subset to a new subset.">fc_copySubset</a>(subsets[i], *new_mesh, NULL, &amp;new_subset);
<a name="l00569"></a>00569       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00570"></a>00570      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy member subset"</span>);
<a name="l00571"></a>00571      <span class="keywordflow">return</span> rc;
<a name="l00572"></a>00572       }
<a name="l00573"></a>00573     }
<a name="l00574"></a>00574     free(subsets);
<a name="l00575"></a>00575   }
<a name="l00576"></a>00576 
<a name="l00577"></a>00577 
<a name="l00578"></a>00578   <span class="keywordflow">if</span> (doCopyVar){
<a name="l00579"></a>00579     <span class="comment">// copy the basic variables</span>
<a name="l00580"></a>00580     rc = <a class="code" href="group__Variable.html#ga96777675a667d79871c93c54729bde4" title="Get the variables in a mesh.">fc_getVariables</a>(src_mesh, &amp;numVariable, &amp;variables);
<a name="l00581"></a>00581     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00582"></a>00582       <span class="keywordflow">return</span> rc;
<a name="l00583"></a>00583     <span class="keywordflow">for</span> (i = 0; i &lt; numVariable; i++) {
<a name="l00584"></a>00584       <span class="comment">// do something different for the mesh 'coords as variable'</span>
<a name="l00585"></a>00585       <span class="keywordflow">if</span> (variables[i].slotID == src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1b0cc0e72b434224e2f804cbe0f20485">coordVarID</a>) {
<a name="l00586"></a>00586      rc = <a class="code" href="group__Mesh.html#gf9c8eec4537a70152e562330fd1ac5a7" title="Return the vertex coordinates of the mesh as a variable.">fc_getMeshCoordsAsVariable</a>(*new_mesh, &amp;new_var);
<a name="l00587"></a>00587      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00588"></a>00588        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create copy of coords variable"</span>);
<a name="l00589"></a>00589        <span class="keywordflow">return</span> rc;
<a name="l00590"></a>00590      }
<a name="l00591"></a>00591       }
<a name="l00592"></a>00592       <span class="comment">// normal path for variables</span>
<a name="l00593"></a>00593       <span class="keywordflow">else</span> {
<a name="l00594"></a>00594      rc = <a class="code" href="group__Variable.html#g0af7d0d18023362f816693cd354bcbfb" title="Copy a variable.">fc_copyVariable</a>(variables[i], *new_mesh, NULL, &amp;new_var);
<a name="l00595"></a>00595      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00596"></a>00596        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy member variable"</span>);
<a name="l00597"></a>00597        <span class="keywordflow">return</span> rc;
<a name="l00598"></a>00598      }
<a name="l00599"></a>00599       }
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601     free(variables);
<a name="l00602"></a>00602   }
<a name="l00603"></a>00603 
<a name="l00604"></a>00604 
<a name="l00605"></a>00605   <span class="keywordflow">if</span> (doCopySeqVar){
<a name="l00606"></a>00606     <span class="comment">// copy the sequence variables</span>
<a name="l00607"></a>00607     rc = <a class="code" href="group__Variable.html#g01bf1b0d9b1de983115a461216039449" title="Get the sequence variables in a mesh.">fc_getSeqVariables</a>(src_mesh, &amp;numSeqVar, &amp;numStepPerSeq, &amp;seqVars);
<a name="l00608"></a>00608     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00609"></a>00609       <span class="keywordflow">return</span> rc;
<a name="l00610"></a>00610     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++) {
<a name="l00611"></a>00611       <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> src_seq, dest_seq;
<a name="l00612"></a>00612       
<a name="l00613"></a>00613       <span class="comment">// look for appropriate sequence on the destination dataset</span>
<a name="l00614"></a>00614       rc = <a class="code" href="group__Variable.html#g314a992ec5ba07d7075f1172b13ef166" title="Get the parent sequence of a sequence variable.">fc_getSequenceFromSeqVariable</a>(numStepPerSeq[i], seqVars[i],
<a name="l00615"></a>00615                           &amp;src_seq);
<a name="l00616"></a>00616       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00617"></a>00617      <span class="keywordflow">return</span> rc;
<a name="l00618"></a>00618       dest_seq = <a class="code" href="group__Handles.html#g0a14f0b308f914048dba4a54e6dc36ea" title="Null (default) sequence handle.">FC_NULL_SEQUENCE</a>;
<a name="l00619"></a>00619       <span class="comment">// if we are in the same dataset, reuse the same sequence</span>
<a name="l00620"></a>00620       <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_ds, src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>)) 
<a name="l00621"></a>00621      dest_seq = src_seq;
<a name="l00622"></a>00622       <span class="keywordflow">else</span> { <span class="comment">// look for an appropriate sequence in dest_ds</span>
<a name="l00623"></a>00623      <span class="keywordtype">int</span> dest_numSequence, src_numStep, dest_numStep;
<a name="l00624"></a>00624      <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> *dest_sequences;
<a name="l00625"></a>00625      <span class="keywordtype">char</span>* src_name, *dest_name;
<a name="l00626"></a>00626      <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> src_dataType, dest_dataType;
<a name="l00627"></a>00627      <span class="keywordtype">void</span>* src_coords_p, *dest_coords_p;
<a name="l00628"></a>00628 
<a name="l00629"></a>00629      <span class="comment">// collect src sequence info      </span>
<a name="l00630"></a>00630      rc = <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(src_seq, &amp;src_name);
<a name="l00631"></a>00631      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00632"></a>00632        <span class="keywordflow">return</span> rc;
<a name="l00633"></a>00633      rc = <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(src_seq, &amp;src_numStep, &amp;src_dataType); 
<a name="l00634"></a>00634      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00635"></a>00635        <span class="keywordflow">return</span> rc;
<a name="l00636"></a>00636      rc = <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(src_seq, &amp;src_coords_p);
<a name="l00637"></a>00637      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00638"></a>00638        <span class="keywordflow">return</span> rc;
<a name="l00639"></a>00639  
<a name="l00640"></a>00640      <span class="comment">// compare to dest sequences</span>
<a name="l00641"></a>00641      rc = <a class="code" href="group__Sequence.html#g0ad1217500f245d78aaad5c79f960ba1" title="Get the sequences in a dataset.">fc_getSequences</a>(dest_ds, &amp;dest_numSequence, &amp;dest_sequences);
<a name="l00642"></a>00642      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00643"></a>00643        <span class="keywordflow">return</span> rc;
<a name="l00644"></a>00644      <span class="keywordflow">for</span> (j = 0; j &lt; dest_numSequence; j++) {
<a name="l00645"></a>00645        rc = <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(dest_sequences[j], &amp;dest_name);
<a name="l00646"></a>00646        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00647"></a>00647          <span class="keywordflow">return</span> rc;
<a name="l00648"></a>00648        rc = <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(dest_sequences[j], &amp;dest_numStep,
<a name="l00649"></a>00649                       &amp;dest_dataType); 
<a name="l00650"></a>00650        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00651"></a>00651          <span class="keywordflow">return</span> rc;
<a name="l00652"></a>00652        rc = <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(dest_sequences[j], &amp;dest_coords_p);
<a name="l00653"></a>00653        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00654"></a>00654          <span class="keywordflow">return</span> rc;
<a name="l00655"></a>00655        <span class="comment">// compare (?checking actual coords values might be too stringent)</span>
<a name="l00656"></a>00656        <span class="keywordflow">if</span> (!strcmp(dest_name, src_name) &amp;&amp; dest_numStep == src_numStep &amp;&amp; 
<a name="l00657"></a>00657            dest_dataType == src_dataType &amp;&amp; 
<a name="l00658"></a>00658            !memcmp(dest_coords_p, src_coords_p, 
<a name="l00659"></a>00659                 <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(src_dataType))) {
<a name="l00660"></a>00660 
<a name="l00661"></a>00661          free(dest_name);
<a name="l00662"></a>00662          
<a name="l00663"></a>00663          <span class="comment">// passed all tests, this is the match</span>
<a name="l00664"></a>00664          dest_seq = dest_sequences[j];
<a name="l00665"></a>00665          <span class="keywordflow">break</span>;
<a name="l00666"></a>00666        }
<a name="l00667"></a>00667        free(dest_name);
<a name="l00668"></a>00668      }
<a name="l00669"></a>00669      free(dest_sequences);
<a name="l00670"></a>00670      free(src_name);
<a name="l00671"></a>00671       }
<a name="l00672"></a>00672       <span class="comment">// if failed to find one, just copy it</span>
<a name="l00673"></a>00673       <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_seq, <a class="code" href="group__Handles.html#g0a14f0b308f914048dba4a54e6dc36ea" title="Null (default) sequence handle.">FC_NULL_SEQUENCE</a>)) {
<a name="l00674"></a>00674      rc = <a class="code" href="group__Sequence.html#g75c324c79f7f053ef9e7c568dcb7bc5b" title="Copy a sequence.">fc_copySequence</a>(src_seq, dest_ds, NULL, &amp;dest_seq);
<a name="l00675"></a>00675      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00676"></a>00676        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy sequence needed for seqVar"</span>);
<a name="l00677"></a>00677        <span class="keywordflow">return</span> rc;
<a name="l00678"></a>00678      }
<a name="l00679"></a>00679       }
<a name="l00680"></a>00680       
<a name="l00681"></a>00681       <span class="comment">// copy the sequence variables</span>
<a name="l00682"></a>00682       rc = <a class="code" href="group__Variable.html#gaf25870a6c8032440b6d5565ccc083cb" title="Copy a sequence variable.">fc_copySeqVariable</a>(numStepPerSeq[i], seqVars[i], *new_mesh, dest_seq,
<a name="l00683"></a>00683                      NULL, &amp;new_seqVar);
<a name="l00684"></a>00684       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00685"></a>00685      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy member sequence variable"</span>);
<a name="l00686"></a>00686      <span class="keywordflow">return</span> rc;
<a name="l00687"></a>00687       }
<a name="l00688"></a>00688       free(new_seqVar);
<a name="l00689"></a>00689       free(seqVars[i]);
<a name="l00690"></a>00690     }
<a name="l00691"></a>00691     free(numStepPerSeq);
<a name="l00692"></a>00692     free(seqVars);
<a name="l00693"></a>00693   }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695   <span class="keywordflow">if</span> (doCopySeqSubset){
<a name="l00696"></a>00696     <span class="comment">// copy the sequence subsets</span>
<a name="l00697"></a>00697     rc = <a class="code" href="group__Subset.html#g17815a36b74d5568de04398ca4bd4bf4" title="Get the seq subsets in a mesh.">fc_getSeqSubsets</a>(src_mesh, &amp;numSeqSub, &amp;numStepPerSeq, &amp;seqSubs);
<a name="l00698"></a>00698     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00699"></a>00699       <span class="keywordflow">return</span> rc;
<a name="l00700"></a>00700     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqSub; i++) {
<a name="l00701"></a>00701       <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> src_seq, dest_seq;
<a name="l00702"></a>00702       
<a name="l00703"></a>00703       <span class="comment">// look for appropriate sequence on the destination dataset</span>
<a name="l00704"></a>00704       rc = <a class="code" href="group__Subset.html#g4d796035b6229c73cc05488aae16c5bd" title="Get the parent sequence of a seq subset.">fc_getSequenceFromSeqSubset</a>(numStepPerSeq[i], seqSubs[i],
<a name="l00705"></a>00705                                        &amp;src_seq);
<a name="l00706"></a>00706       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00707"></a>00707      <span class="keywordflow">return</span> rc;
<a name="l00708"></a>00708       dest_seq = <a class="code" href="group__Handles.html#g0a14f0b308f914048dba4a54e6dc36ea" title="Null (default) sequence handle.">FC_NULL_SEQUENCE</a>;
<a name="l00709"></a>00709       <span class="comment">// if we are in the same dataset, reuse the same sequence</span>
<a name="l00710"></a>00710       <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_ds, src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>)) 
<a name="l00711"></a>00711      dest_seq = src_seq;
<a name="l00712"></a>00712       <span class="keywordflow">else</span> { <span class="comment">// look for an appropriate sequence in dest_ds</span>
<a name="l00713"></a>00713      <span class="keywordtype">int</span> dest_numSequence, src_numStep, dest_numStep;
<a name="l00714"></a>00714      <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> *dest_sequences;
<a name="l00715"></a>00715      <span class="keywordtype">char</span>* src_name, *dest_name;
<a name="l00716"></a>00716      <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> src_dataType, dest_dataType;
<a name="l00717"></a>00717      <span class="keywordtype">void</span>* src_coords_p, *dest_coords_p;
<a name="l00718"></a>00718 
<a name="l00719"></a>00719      <span class="comment">// collect src sequence info      </span>
<a name="l00720"></a>00720      rc = <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(src_seq, &amp;src_name);
<a name="l00721"></a>00721      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00722"></a>00722        <span class="keywordflow">return</span> rc;
<a name="l00723"></a>00723      rc = <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(src_seq, &amp;src_numStep, &amp;src_dataType); 
<a name="l00724"></a>00724      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00725"></a>00725        <span class="keywordflow">return</span> rc;
<a name="l00726"></a>00726      rc = <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(src_seq, &amp;src_coords_p);
<a name="l00727"></a>00727      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00728"></a>00728        <span class="keywordflow">return</span> rc;
<a name="l00729"></a>00729  
<a name="l00730"></a>00730      <span class="comment">// compare to dest sequences</span>
<a name="l00731"></a>00731      rc = <a class="code" href="group__Sequence.html#g0ad1217500f245d78aaad5c79f960ba1" title="Get the sequences in a dataset.">fc_getSequences</a>(dest_ds, &amp;dest_numSequence, &amp;dest_sequences);
<a name="l00732"></a>00732      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00733"></a>00733        <span class="keywordflow">return</span> rc;
<a name="l00734"></a>00734      <span class="keywordflow">for</span> (j = 0; j &lt; dest_numSequence; j++) {
<a name="l00735"></a>00735        rc = <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(dest_sequences[j], &amp;dest_name);
<a name="l00736"></a>00736        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00737"></a>00737          <span class="keywordflow">return</span> rc;
<a name="l00738"></a>00738        rc = <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(dest_sequences[j], &amp;dest_numStep,
<a name="l00739"></a>00739                       &amp;dest_dataType); 
<a name="l00740"></a>00740        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00741"></a>00741          <span class="keywordflow">return</span> rc;
<a name="l00742"></a>00742        rc = <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(dest_sequences[j], &amp;dest_coords_p);
<a name="l00743"></a>00743        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00744"></a>00744          <span class="keywordflow">return</span> rc;
<a name="l00745"></a>00745        <span class="comment">// compare (?checking actual coords values might be too stringent)</span>
<a name="l00746"></a>00746        <span class="keywordflow">if</span> (!strcmp(dest_name, src_name) &amp;&amp; dest_numStep == src_numStep &amp;&amp; 
<a name="l00747"></a>00747            dest_dataType == src_dataType &amp;&amp; 
<a name="l00748"></a>00748            !memcmp(dest_coords_p, src_coords_p, 
<a name="l00749"></a>00749                 <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(src_dataType))) {
<a name="l00750"></a>00750 
<a name="l00751"></a>00751          free(dest_name);
<a name="l00752"></a>00752          
<a name="l00753"></a>00753          <span class="comment">// passed all tests, this is the match</span>
<a name="l00754"></a>00754          dest_seq = dest_sequences[j];
<a name="l00755"></a>00755          <span class="keywordflow">break</span>;
<a name="l00756"></a>00756        }
<a name="l00757"></a>00757        free(dest_name);
<a name="l00758"></a>00758      }
<a name="l00759"></a>00759      free(dest_sequences);
<a name="l00760"></a>00760      free(src_name);
<a name="l00761"></a>00761       }
<a name="l00762"></a>00762       <span class="comment">// if failed to find one, just copy it</span>
<a name="l00763"></a>00763       <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_seq, <a class="code" href="group__Handles.html#g0a14f0b308f914048dba4a54e6dc36ea" title="Null (default) sequence handle.">FC_NULL_SEQUENCE</a>)) {
<a name="l00764"></a>00764      rc = <a class="code" href="group__Sequence.html#g75c324c79f7f053ef9e7c568dcb7bc5b" title="Copy a sequence.">fc_copySequence</a>(src_seq, dest_ds, NULL, &amp;dest_seq);
<a name="l00765"></a>00765      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00766"></a>00766        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy sequence needed for seqSub"</span>);
<a name="l00767"></a>00767        <span class="keywordflow">return</span> rc;
<a name="l00768"></a>00768      }
<a name="l00769"></a>00769       }
<a name="l00770"></a>00770 
<a name="l00771"></a>00771       <span class="comment">// copy the sequence subsets</span>
<a name="l00772"></a>00772       rc = <a class="code" href="group__Subset.html#g7616467eaa4ac4794dfe02ae05ce3289" title="Copy seq subset.">fc_copySeqSubset</a>(numStepPerSeq[i], seqSubs[i], *new_mesh, dest_seq,
<a name="l00773"></a>00773                             NULL, &amp;new_seqSub);
<a name="l00774"></a>00774       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00775"></a>00775      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy member sequence sub"</span>);
<a name="l00776"></a>00776      <span class="keywordflow">return</span> rc;
<a name="l00777"></a>00777       }
<a name="l00778"></a>00778       free(new_seqSub);
<a name="l00779"></a>00779       free(seqSubs[i]);
<a name="l00780"></a>00780     }
<a name="l00781"></a>00781     free(numStepPerSeq);
<a name="l00782"></a>00782     free(seqSubs);
<a name="l00783"></a>00783   }
<a name="l00784"></a>00784 
<a name="l00785"></a>00785   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00786"></a>00786 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3928a328006617330e735ca1644e7cb3"></a><!-- doxytag: member="mesh.c::fc_createMesh" ref="g3928a328006617330e735ca1644e7cb3" args="(FC_Dataset dataset, char *meshname, FC_Mesh *mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>meshname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> *&nbsp;</td>
          <td class="paramname"> <em>mesh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new mesh. 
<p>
<b>Description:</b> <p>
Create a new, in-memory, mesh.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle to associate mesh with </td></tr>
<tr><td valign="top"><em>meshname</em>&nbsp;</td><td>
input - new mesh name </td></tr>
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
output - mesh handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l00119">119</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06024">_fc_getNewMeshSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00093">_FC_DsSlot::meshIDs</a>, <a class="el" href="datasetP_8h-source.html#l00092">_FC_DsSlot::numMesh</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l00472">_fc_loadExodusDataset()</a>, <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>, <a class="el" href="fileio_8c-source.html#l00462">_fc_makeMeshFromFiles()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="geom_8c-source.html#l01069">fc_createBoundingBoxMesh()</a>, <a class="el" href="mesh_8c-source.html#l01748">fc_createSimpleHexMesh()</a>, <a class="el" href="mesh_8c-source.html#l01949">fc_createSphereMesh()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00198">setupDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00123"></a>00123   {
<a name="l00124"></a>00124   <span class="keywordtype">int</span> *tempslotIDs;
<a name="l00125"></a>00125   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00126"></a>00126   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l00127"></a>00127   
<a name="l00128"></a>00128   <span class="comment">// default returns</span>
<a name="l00129"></a>00129   <span class="keywordflow">if</span> (mesh)
<a name="l00130"></a>00130     *mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l00131"></a>00131   
<a name="l00132"></a>00132   <span class="comment">// check input</span>
<a name="l00133"></a>00133   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l00134"></a>00134   <span class="keywordflow">if</span> (dsSlot == NULL || !meshname || !mesh) {
<a name="l00135"></a>00135     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00136"></a>00136     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00137"></a>00137   }
<a name="l00138"></a>00138   
<a name="l00139"></a>00139   <span class="comment">// log message</span>
<a name="l00140"></a>00140   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new mesh '%s'"</span>, meshname);
<a name="l00141"></a>00141   
<a name="l00142"></a>00142   <span class="comment">// get an open slot</span>
<a name="l00143"></a>00143   meshSlot = <a class="code" href="group__PrivateMesh.html#gdca263276038544504d7ce3001ed5030" title="Get an empty mesh slot from the mesh table.">_fc_getNewMeshSlot</a>();
<a name="l00144"></a>00144   <span class="keywordflow">if</span> (meshSlot == NULL) {
<a name="l00145"></a>00145     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00146"></a>00146     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00147"></a>00147   }
<a name="l00148"></a>00148   
<a name="l00149"></a>00149   <span class="comment">// table header information</span>
<a name="l00150"></a>00150   <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(*mesh, meshSlot);
<a name="l00151"></a>00151   <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>), meshname);
<a name="l00152"></a>00152   
<a name="l00153"></a>00153   <span class="comment">// set back and forth references</span>
<a name="l00154"></a>00154   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a> = dataset;
<a name="l00155"></a>00155   
<a name="l00156"></a>00156   <span class="comment">// update owning dataset with info about this new mesh</span>
<a name="l00157"></a>00157   tempslotIDs = realloc(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>+1));
<a name="l00158"></a>00158   <span class="keywordflow">if</span> (tempslotIDs == NULL) {
<a name="l00159"></a>00159     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00160"></a>00160     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00161"></a>00161   }
<a name="l00162"></a>00162   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a> = tempslotIDs;
<a name="l00163"></a>00163   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a>[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>] = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a9f69eb1eb640814d30ffec3d30077a5">slotID</a>;
<a name="l00164"></a>00164   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>++;
<a name="l00165"></a>00165   
<a name="l00166"></a>00166   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00167"></a>00167 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gaab63abd2e3988110ddf40e1e797ef69"></a><!-- doxytag: member="mesh.c::fc_createSimpleHexMesh" ref="gaab63abd2e3988110ddf40e1e797ef69" args="(FC_Dataset dataset, char *newName, int N, int M, int P, double *lower_coords, double *upper_coords, FC_Mesh *new_mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createSimpleHexMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>N</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>M</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>P</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>lower_coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>upper_coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> *&nbsp;</td>
          <td class="paramname"> <em>new_mesh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a simple hex mesh. 
<p>
<b>Description:</b> <p>
This function creates a hex mesh which is a regular parallelpiped (if all the sides are the same length, a cube). The number of elements in each dimension are given by N, M, &amp; K. The coordinates are specified by giving the coordinates of the lower and upper corners of the mesh.<p>
<b>Modifications:</b> <ul>
<li>11/09/2005 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
Input - dataset handle to associate mesh with </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new mesh </td></tr>
<tr><td valign="top"><em>N</em>&nbsp;</td><td>
Input - number of elements in the x direction </td></tr>
<tr><td valign="top"><em>M</em>&nbsp;</td><td>
Input - number of elements in the y direction </td></tr>
<tr><td valign="top"><em>P</em>&nbsp;</td><td>
Input - number of elements in the z direction </td></tr>
<tr><td valign="top"><em>lower_coords</em>&nbsp;</td><td>
Input - the coordinates of lower corner. </td></tr>
<tr><td valign="top"><em>upper_coords</em>&nbsp;</td><td>
Input - the coordinates of upper corner. </td></tr>
<tr><td valign="top"><em>new_mesh</em>&nbsp;</td><td>
output - new mesh handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l01748">1748</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l00119">fc_createMesh()</a>, <a class="el" href="mesh_8c-source.html#l02626">fc_deleteMesh()</a>, <a class="el" href="base_8h-source.html#l00127">FC_ET_HEX</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="dataset_8c-source.html#l00762">fc_isDatasetValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="mesh_8c-source.html#l00259">fc_setMeshCoordsPtr()</a>, <a class="el" href="mesh_8c-source.html#l00391">fc_setMeshElementConnsPtr()</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="elemdeath__ex1_8c-source.html#l00147">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01757"></a>01757   {
<a name="l01758"></a>01758   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01759"></a>01759   <span class="keywordtype">int</span> i, j, k;
<a name="l01760"></a>01760   <span class="keywordtype">int</span> numElemPerDim[3] = { N, M, P }, eindex, vindex;
<a name="l01761"></a>01761   <span class="keywordtype">int</span> numDim = 3, numVertPerElem = 8;
<a name="l01762"></a>01762   <span class="keywordtype">int</span> numVert, numElem;
<a name="l01763"></a>01763   <span class="keywordtype">double</span> side_lengths[3];
<a name="l01764"></a>01764   <span class="keywordtype">int</span> *conns;
<a name="l01765"></a>01765   <span class="keywordtype">double</span>* coords;
<a name="l01766"></a>01766 
<a name="l01767"></a>01767   <span class="comment">// default output</span>
<a name="l01768"></a>01768   <span class="keywordflow">if</span> (new_mesh)
<a name="l01769"></a>01769     *new_mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l01770"></a>01770 
<a name="l01771"></a>01771   <span class="comment">// check input</span>
<a name="l01772"></a>01772   <span class="keywordflow">if</span> (!<a class="code" href="group__Dataset.html#gbff33f569a0182d65a40cf46c98dcf54" title="Check that the handle refers to a valid dataset.">fc_isDatasetValid</a>(dataset) || !newName || N &lt; 1 || M &lt; 1 || P &lt; 1 || 
<a name="l01773"></a>01773       !lower_coords || !upper_coords || !new_mesh) {
<a name="l01774"></a>01774     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01775"></a>01775     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01776"></a>01776   }
<a name="l01777"></a>01777   <span class="keywordflow">for</span> (i = 0; i &lt; numDim; i++) {
<a name="l01778"></a>01778     <span class="keywordflow">if</span> (lower_coords[i] &gt;= upper_coords[i]) {
<a name="l01779"></a>01779       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Upper coords for dim%d must be greater than lower "</span>
<a name="l01780"></a>01780                             <span class="stringliteral">"coords"</span>, i);
<a name="l01781"></a>01781       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01782"></a>01782     }
<a name="l01783"></a>01783   }
<a name="l01784"></a>01784 
<a name="l01785"></a>01785   <span class="comment">// log message</span>
<a name="l01786"></a>01786   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating simple hex mesh '%s'"</span>, newName);
<a name="l01787"></a>01787 
<a name="l01788"></a>01788   <span class="comment">// Set up</span>
<a name="l01789"></a>01789   numVert = (M+1)*(N+1)*(P+1);
<a name="l01790"></a>01790   numElem = M*N*P;
<a name="l01791"></a>01791   conns = (<span class="keywordtype">int</span>*)malloc(numElem*numVertPerElem*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01792"></a>01792   coords = (<span class="keywordtype">double</span>*)malloc(numVert*numDim*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l01793"></a>01793   <span class="keywordflow">if</span> (!conns || !coords) {
<a name="l01794"></a>01794     free(conns);
<a name="l01795"></a>01795     free(coords);
<a name="l01796"></a>01796     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01797"></a>01797     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01798"></a>01798   }
<a name="l01799"></a>01799   <span class="keywordflow">for</span> (i = 0; i &lt; numDim; i++)
<a name="l01800"></a>01800     side_lengths[i] = (upper_coords[i] - lower_coords[i])/numElemPerDim[i];
<a name="l01801"></a>01801 
<a name="l01802"></a>01802   <span class="comment">// Make coords</span>
<a name="l01803"></a>01803   <span class="keywordflow">for</span> (k = 0; k &lt; P+1; k++) {
<a name="l01804"></a>01804     <span class="keywordflow">for</span> (j = 0; j &lt; M+1; j++) {
<a name="l01805"></a>01805       <span class="keywordflow">for</span> (i = 0; i &lt; N+1; i++) {
<a name="l01806"></a>01806         vindex = k*(N+1)*(M+1) + j*(N+1) + i;
<a name="l01807"></a>01807         coords[vindex*numDim] =   i*side_lengths[0] + lower_coords[0];
<a name="l01808"></a>01808         coords[vindex*numDim+1] = j*side_lengths[1] + lower_coords[1];
<a name="l01809"></a>01809         coords[vindex*numDim+2] = k*side_lengths[2] + lower_coords[2];
<a name="l01810"></a>01810       }
<a name="l01811"></a>01811     }
<a name="l01812"></a>01812   }
<a name="l01813"></a>01813 
<a name="l01814"></a>01814   <span class="comment">// Make conns</span>
<a name="l01815"></a>01815   <span class="keywordflow">for</span> (k = 0; k &lt; P; k++) {
<a name="l01816"></a>01816     <span class="keywordflow">for</span> (j = 0; j &lt; M; j++) {
<a name="l01817"></a>01817       <span class="keywordflow">for</span> (i = 0; i &lt; N; i++) {
<a name="l01818"></a>01818         eindex = k*N*M + j*N + i;
<a name="l01819"></a>01819         vindex = k*(N+1)*(M+1) + j*(N+1) + i; <span class="comment">// index of lowest vert</span>
<a name="l01820"></a>01820         conns[eindex*numVertPerElem]   = vindex;
<a name="l01821"></a>01821         conns[eindex*numVertPerElem+1] = vindex + 1;
<a name="l01822"></a>01822         vindex = k*(N+1)*(M+1) + (j+1)*(N+1) + i;
<a name="l01823"></a>01823         conns[eindex*numVertPerElem+2] = vindex + 1;
<a name="l01824"></a>01824         conns[eindex*numVertPerElem+3] = vindex;
<a name="l01825"></a>01825         vindex = (k+1)*(N+1)*(M+1) + j*(N+1) + i;
<a name="l01826"></a>01826         conns[eindex*numVertPerElem+4] = vindex;
<a name="l01827"></a>01827         conns[eindex*numVertPerElem+5] = vindex + 1;
<a name="l01828"></a>01828         vindex = (k+1)*(N+1)*(M+1) + (j+1)*(N+1) + i;
<a name="l01829"></a>01829         conns[eindex*numVertPerElem+6] = vindex + 1;
<a name="l01830"></a>01830         conns[eindex*numVertPerElem+7] = vindex;
<a name="l01831"></a>01831       }
<a name="l01832"></a>01832     }
<a name="l01833"></a>01833   }
<a name="l01834"></a>01834 
<a name="l01835"></a>01835   <span class="comment">// Make the mesh</span>
<a name="l01836"></a>01836   rc = <a class="code" href="group__Mesh.html#g3928a328006617330e735ca1644e7cb3" title="Create a new mesh.">fc_createMesh</a>(dataset, newName, new_mesh);
<a name="l01837"></a>01837   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01838"></a>01838     free(coords);
<a name="l01839"></a>01839     free(conns);
<a name="l01840"></a>01840     <span class="keywordflow">return</span> rc;
<a name="l01841"></a>01841   }
<a name="l01842"></a>01842   rc = <a class="code" href="group__Mesh.html#g00fb04104cb0c5a6638cca5027b4b1df" title="Set the pointer to the mesh coordinates.">fc_setMeshCoordsPtr</a>(*new_mesh, numDim, numVert, coords);
<a name="l01843"></a>01843   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01844"></a>01844     free(conns);
<a name="l01845"></a>01845     <a class="code" href="group__Mesh.html#g7e846c58fe79c1f2bac817a2b7ed692e" title="Delete a mesh.">fc_deleteMesh</a>(*new_mesh);
<a name="l01846"></a>01846     <span class="keywordflow">return</span> rc;
<a name="l01847"></a>01847   }
<a name="l01848"></a>01848   rc = <a class="code" href="group__Mesh.html#g73caf4cfc1c9d8b302d880735a67cd2a" title="Set the pointer to the mesh element connectivities.">fc_setMeshElementConnsPtr</a>(*new_mesh, <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a3d933c1932ea3f8dcc2968395e68767b">FC_ET_HEX</a>, numElem, conns);
<a name="l01849"></a>01849   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01850"></a>01850     <a class="code" href="group__Mesh.html#g7e846c58fe79c1f2bac817a2b7ed692e" title="Delete a mesh.">fc_deleteMesh</a>(*new_mesh);
<a name="l01851"></a>01851     <span class="keywordflow">return</span> rc;
<a name="l01852"></a>01852   }
<a name="l01853"></a>01853 
<a name="l01854"></a>01854   <span class="comment">// All done!</span>
<a name="l01855"></a>01855   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01856"></a>01856 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gf1655114af25cd7cc43cd9549a16d0bd"></a><!-- doxytag: member="mesh.c::fc_createSphereMesh" ref="gf1655114af25cd7cc43cd9549a16d0bd" args="(FC_Dataset dataset, char *newName, FC_Coords center, double radius, int requestedNodes, FC_Mesh *new_mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createSphereMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SimpleDataObjects.html#gf0a2bdabac4a21b42f4b480baf9128d7">FC_Coords</a>&nbsp;</td>
          <td class="paramname"> <em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>requestedNodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> *&nbsp;</td>
          <td class="paramname"> <em>new_mesh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a simple sphere mesh. 
<p>
<b>Description:</b> <p>
This function creates a spehere mesh.<p>
Note: While the user can request a particular number of nodes, this function will round the actual number of nodes to a value that matches numNodes = sqrt(numNodes-2)^2+2.<p>
<b>Modifications:</b> <ul>
<li>04/08/2008 CDU Created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
Input - Dataset handle to associate sphere with </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new mesh </td></tr>
<tr><td valign="top"><em>center</em>&nbsp;</td><td>
Input - xyz coordinate of the sphere's center </td></tr>
<tr><td valign="top"><em>radius</em>&nbsp;</td><td>
Input - radius of the sphere </td></tr>
<tr><td valign="top"><em>requestedNodes</em>&nbsp;</td><td>
Input - Requested number of mesh nodes (or 0 for default) </td></tr>
<tr><td valign="top"><em>new_mesh</em>&nbsp;</td><td>
Output - new mesh handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l01949">1949</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l01875">_fc_setSphereCoords()</a>, <a class="el" href="mesh_8c-source.html#l00119">fc_createMesh()</a>, <a class="el" href="mesh_8c-source.html#l02626">fc_deleteMesh()</a>, <a class="el" href="base_8h-source.html#l00122">FC_ET_TRI</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="dataset_8c-source.html#l00762">fc_isDatasetValid()</a>, <a class="el" href="util_8c-source.html#l00668">fc_lteqd()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="mesh_8c-source.html#l00259">fc_setMeshCoordsPtr()</a>, <a class="el" href="mesh_8c-source.html#l00391">fc_setMeshElementConnsPtr()</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01956"></a>01956  {
<a name="l01957"></a>01957 
<a name="l01958"></a>01958   <span class="keyword">const</span> <span class="keywordtype">int</span> numDim=3;
<a name="l01959"></a>01959   <span class="keyword">const</span> <span class="keywordtype">int</span> def_numNodes=38; <span class="comment">//6^2 + 2</span>
<a name="l01960"></a>01960 
<a name="l01961"></a>01961   <span class="keywordtype">int</span> i,j;
<a name="l01962"></a>01962   <span class="keywordtype">int</span>    *conns;
<a name="l01963"></a>01963   <span class="keywordtype">double</span> *coords;
<a name="l01964"></a>01964   <span class="keywordtype">int</span> numVerts;
<a name="l01965"></a>01965   
<a name="l01966"></a>01966   <span class="keywordtype">int</span> place;
<a name="l01967"></a>01967   <span class="keywordtype">int</span> numPlane;
<a name="l01968"></a>01968   <span class="keywordtype">int</span> numElem, numVertPerElem;
<a name="l01969"></a>01969   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01970"></a>01970   <span class="keywordtype">int</span> a,b,c,d, offset;
<a name="l01971"></a>01971   
<a name="l01972"></a>01972   <span class="comment">//Default output</span>
<a name="l01973"></a>01973   <span class="keywordflow">if</span>(new_mesh)
<a name="l01974"></a>01974     *new_mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l01975"></a>01975 
<a name="l01976"></a>01976   <span class="comment">//Check input</span>
<a name="l01977"></a>01977   <span class="keywordflow">if</span>(!<a class="code" href="group__Dataset.html#gbff33f569a0182d65a40cf46c98dcf54" title="Check that the handle refers to a valid dataset.">fc_isDatasetValid</a>(dataset) || !newName || !center || <a class="code" href="group__PublicFloatingPoint.html#g8aaadf1df0008173eda4adc00905d951" title="Test if the first double is less than or equal to the second double, assuming double...">fc_lteqd</a>(radius,0.0) || !new_mesh){
<a name="l01978"></a>01978     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01979"></a>01979     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01980"></a>01980   }
<a name="l01981"></a>01981 
<a name="l01982"></a>01982   <span class="comment">//Set the requested nodes if user didn't give us anything</span>
<a name="l01983"></a>01983   <span class="keywordflow">if</span>(requestedNodes&lt;1)
<a name="l01984"></a>01984     requestedNodes = def_numNodes;
<a name="l01985"></a>01985 
<a name="l01986"></a>01986 
<a name="l01987"></a>01987   numPlane = sqrt(requestedNodes);
<a name="l01988"></a>01988   numVerts = numPlane*numPlane + 2;
<a name="l01989"></a>01989   
<a name="l01990"></a>01990   <span class="comment">//Allocate the coordinates</span>
<a name="l01991"></a>01991   coords = (<span class="keywordtype">double</span> *) calloc( numVerts*numDim, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l01992"></a>01992   <span class="keywordflow">if</span>(!coords){
<a name="l01993"></a>01993     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01994"></a>01994     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01995"></a>01995   }
<a name="l01996"></a>01996 
<a name="l01997"></a>01997   <span class="comment">//Set the coordinates</span>
<a name="l01998"></a>01998   rc = <a class="code" href="group__Mesh.html#gfa2a138c204d9d34d1e1c213f2b46f1c" title="Set coordinates for a sphere mesh.">_fc_setSphereCoords</a>(numVerts, center, radius, coords);
<a name="l01999"></a>01999   <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){ 
<a name="l02000"></a>02000     free(coords);
<a name="l02001"></a>02001     <span class="keywordflow">return</span> rc;
<a name="l02002"></a>02002   }
<a name="l02003"></a>02003 
<a name="l02004"></a>02004   <span class="comment">//Add to the mesh</span>
<a name="l02005"></a>02005   rc = <a class="code" href="group__Mesh.html#g3928a328006617330e735ca1644e7cb3" title="Create a new mesh.">fc_createMesh</a>(dataset, newName, new_mesh);
<a name="l02006"></a>02006   <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){ 
<a name="l02007"></a>02007     *new_mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l02008"></a>02008     free(coords);
<a name="l02009"></a>02009     <span class="keywordflow">return</span> rc;
<a name="l02010"></a>02010   }
<a name="l02011"></a>02011 
<a name="l02012"></a>02012   <span class="comment">//Note: if successful, we don't control coords any more</span>
<a name="l02013"></a>02013   rc = <a class="code" href="group__Mesh.html#g00fb04104cb0c5a6638cca5027b4b1df" title="Set the pointer to the mesh coordinates.">fc_setMeshCoordsPtr</a>(*new_mesh, numDim, numVerts, coords);
<a name="l02014"></a>02014   <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){ 
<a name="l02015"></a>02015     <a class="code" href="group__Mesh.html#g7e846c58fe79c1f2bac817a2b7ed692e" title="Delete a mesh.">fc_deleteMesh</a>(*new_mesh);
<a name="l02016"></a>02016     *new_mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l02017"></a>02017     free(coords);
<a name="l02018"></a>02018     <span class="keywordflow">return</span> rc;
<a name="l02019"></a>02019   }
<a name="l02020"></a>02020 
<a name="l02021"></a>02021   <span class="comment">//Setup connectivity</span>
<a name="l02022"></a>02022   numVertPerElem=3;
<a name="l02023"></a>02023   numElem = ((2*numPlane)*(numPlane-1) + <span class="comment">//2tri/side * all planes but top/bottom</span>
<a name="l02024"></a>02024           (2*numPlane));               <span class="comment">//Top and bottom</span>
<a name="l02025"></a>02025   conns = (<span class="keywordtype">int</span> *)calloc(numElem*numVertPerElem,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l02026"></a>02026   <span class="keywordflow">if</span>(!conns){
<a name="l02027"></a>02027     <a class="code" href="group__Mesh.html#g7e846c58fe79c1f2bac817a2b7ed692e" title="Delete a mesh.">fc_deleteMesh</a>(*new_mesh);
<a name="l02028"></a>02028     *new_mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l02029"></a>02029     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02030"></a>02030     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02031"></a>02031   }
<a name="l02032"></a>02032 
<a name="l02033"></a>02033   <span class="comment">//Link up all the triangles (excluding top and bottom)</span>
<a name="l02034"></a>02034   place=0;
<a name="l02035"></a>02035   <span class="keywordflow">for</span>(i=1; i&lt;numPlane; i++){   <span class="comment">//Each plane</span>
<a name="l02036"></a>02036     <span class="keywordflow">for</span>(j=0; j&lt;numPlane; j++){ <span class="comment">//each point in a plane</span>
<a name="l02037"></a>02037       a = (i*numPlane)     + j;
<a name="l02038"></a>02038       b = ((i-1)*numPlane) + j;
<a name="l02039"></a>02039       c = ((i-1)*numPlane) + (j+1)%numPlane;
<a name="l02040"></a>02040       d = (i*numPlane)     + (j+1)%numPlane;
<a name="l02041"></a>02041 
<a name="l02042"></a>02042       <span class="comment">//Top triangle</span>
<a name="l02043"></a>02043       conns[place++] = a;
<a name="l02044"></a>02044       conns[place++] = b;
<a name="l02045"></a>02045       conns[place++] = c;
<a name="l02046"></a>02046       
<a name="l02047"></a>02047       <span class="comment">//bottom triangle</span>
<a name="l02048"></a>02048       conns[place++] = a;
<a name="l02049"></a>02049       conns[place++] = c;
<a name="l02050"></a>02050       conns[place++] = d;      
<a name="l02051"></a>02051       <span class="comment">//printf("place now %d (max elem=%d) %d %d %d %d\n", place, numElem, a,b,c,d);</span>
<a name="l02052"></a>02052     }
<a name="l02053"></a>02053   }
<a name="l02054"></a>02054 
<a name="l02055"></a>02055   <span class="comment">//Connect the top or bottom elements</span>
<a name="l02056"></a>02056   <span class="keywordflow">for</span>(i=0; i&lt;2;i++){
<a name="l02057"></a>02057     a      = numVerts-2+i; <span class="comment">//Top or bottom node</span>
<a name="l02058"></a>02058     offset = (i==0) ? 0 : numVerts-2-numPlane; 
<a name="l02059"></a>02059     <span class="keywordflow">for</span>(j=0;j&lt;numPlane; j++){
<a name="l02060"></a>02060       conns[place++] = a;
<a name="l02061"></a>02061       conns[place++] = offset + j;
<a name="l02062"></a>02062       conns[place++] = offset + (j+1)%numPlane;
<a name="l02063"></a>02063     }
<a name="l02064"></a>02064   }
<a name="l02065"></a>02065   
<a name="l02066"></a>02066   <span class="comment">//Pass the connection into the mesh. Note: if ok, don't need to free conns</span>
<a name="l02067"></a>02067   rc = <a class="code" href="group__Mesh.html#g73caf4cfc1c9d8b302d880735a67cd2a" title="Set the pointer to the mesh element connectivities.">fc_setMeshElementConnsPtr</a>(*new_mesh, <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884af79268373ad06101e34987c127cb50b5">FC_ET_TRI</a>, numElem, conns);
<a name="l02068"></a>02068   <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){ 
<a name="l02069"></a>02069     <a class="code" href="group__Mesh.html#g7e846c58fe79c1f2bac817a2b7ed692e" title="Delete a mesh.">fc_deleteMesh</a>(*new_mesh);
<a name="l02070"></a>02070     *new_mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l02071"></a>02071     free(conns);
<a name="l02072"></a>02072     <span class="keywordflow">return</span> rc;
<a name="l02073"></a>02073   }
<a name="l02074"></a>02074   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02075"></a>02075   
<a name="l02076"></a>02076 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g13ed8e3d8db0f8452d15bc3249b1c33d"></a><!-- doxytag: member="mesh.c::fc_createSubsetMesh" ref="g13ed8e3d8db0f8452d15bc3249b1c33d" args="(FC_Subset subset, FC_Dataset dest_ds, int doStrict, int doCopyVar, int doCopySeqVar, int doCopySubset, int doCopySeqSubset, char *newName, FC_Mesh *new_mesh, FC_Variable *vertmap, FC_Variable *elemmap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createSubsetMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Subset.html">FC_Subset</a>&nbsp;</td>
          <td class="paramname"> <em>subset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dest_ds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doStrict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doCopyVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doCopySeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doCopySubset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>doCopySeqSubset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> *&nbsp;</td>
          <td class="paramname"> <em>new_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>vertmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>elemmap</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new mesh which is the subset of another mesh. 
<p>
<b>Description:</b> <p>
This function extracts a selected subset of a mesh as elements. Point and element indices are renumbered to maintain the correct vertex and element relationships. This does mean the correspondence between vertices and elements extracted in the subset and the original dataset are now lost, but will be stored in the special variables FC_VERTEXMAP, FC_ELEMENTMAP on the new mesh which will store the id of the original mesh entities, if they handles passed in are not null.<p>
There are flags to determine whether subsets, seq subsets, variables and sequence variables will be copied over or not. NOTE: if you set them all to 0, only the geom is copied, NOTE: If they are to be copied, then all subsets and seq subsets are copied even if they have no members in the new mesh (they'll just be empty subsets). The original subset is also copied. NOTE: If they are not to be copied, note that the sequences will also be lost. NOTE: If you dont copy them over now, you wont be able to later because the numbering will have changed. There may be functions added later to allows this (like what is being done with regionmesh in variable)<p>
If the association type of the subset is of lesser dimensionality than FC_AT_ELEMENT, the 'doStrict' flag determines whether to keep new entities if not all of their child entities are in the old subset. 1 = be strict and only have the entity in the new subset if all of it's children are present in the old subset. 0 = be lenient and add all entities that have at least one child in the old subset (see also fc_changeMeshEntityType).<p>
NOTE: An FC_NULL_DATASET handle can be returned with no error if there is no appropriate dataset to make. (E.g. if the marked lists are all 0, or you want a 0 level mesh but not enough vertices are marked to get whole elements.)<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000053">Todo:</a></b></dt><dd><ul>
<li>internals could probably be made more efficient spacewise?</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>2003-NOV-20 W Koegler Replace all 6 of old subset routines with new multipurpose routine.</li><li>08/20/04 WSK Changed to used new topo routine for figuring out which elements to keep.</li><li>10/2/04 WSK fixing up recursive subsetting of member subsets variables &amp; seq vars.</li><li>01/07/2008 ACG adding flag for not copying subsets, seq vars etc over.</li><li>03/07/2008 ACG adding seq subset copy</li><li>04/25/2008 ACG mapping vars</li><li>06/17/2008 ACG changing copy flag to per type (var, seqvar, subset etc) individual copy flag </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>subset</em>&nbsp;</td><td>
input - subset </td></tr>
<tr><td valign="top"><em>dest_ds</em>&nbsp;</td><td>
input - dataset to put the new mesh on </td></tr>
<tr><td valign="top"><em>doStrict</em>&nbsp;</td><td>
input - flag for dropping incomplete entities </td></tr>
<tr><td valign="top"><em>doCopyVar</em>&nbsp;</td><td>
Input - 1 to copy over the var </td></tr>
<tr><td valign="top"><em>doCopySeqVar</em>&nbsp;</td><td>
Input - 1 to copy over the seqvar </td></tr>
<tr><td valign="top"><em>doCopySubset</em>&nbsp;</td><td>
Input - 1 to copy over the subsets </td></tr>
<tr><td valign="top"><em>doCopySeqSubset</em>&nbsp;</td><td>
Input - 1 to copy over the seqsubsets </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new mesh, a NULL value is a flag to use the name of the source mesh </td></tr>
<tr><td valign="top"><em>new_mesh</em>&nbsp;</td><td>
Output - new mesh handle </td></tr>
<tr><td valign="top"><em>vertmap</em>&nbsp;</td><td>
Output - handle to a variable on the new mesh with the vertex mapping </td></tr>
<tr><td valign="top"><em>elemmap</em>&nbsp;</td><td>
Output - handle to a variable on the new mesh with the elem mapping </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l00845">845</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="subset_8c-source.html#l03800">_fc_getSubSlot()</a>, <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::coordVarID</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="storage_8c-source.html#l00441">fc_addIntArrayToSortedIntArray()</a>, <a class="el" href="subset_8c-source.html#l02008">fc_addMemberToSubset()</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="topo_8c-source.html#l00369">fc_changeMeshEntityType()</a>, <a class="el" href="storage_8c-source.html#l01363">fc_convertSortedIntArrayToIntArray()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="sequence_8c-source.html#l00310">fc_copySequence()</a>, <a class="el" href="mesh_8c-source.html#l00119">fc_createMesh()</a>, <a class="el" href="subset_8c-source.html#l00219">fc_createSeqSubset()</a>, <a class="el" href="variable_8c-source.html#l00350">fc_createSeqVariable()</a>, <a class="el" href="subset_8c-source.html#l00135">fc_createSubset()</a>, <a class="el" href="variable_8c-source.html#l00286">fc_createVariable()</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00586">fc_getElementTypeNumEdge()</a>, <a class="el" href="base_8c-source.html#l00622">fc_getElementTypeNumFace()</a>, <a class="el" href="base_8c-source.html#l00550">fc_getElementTypeNumVertex()</a>, <a class="el" href="mesh_8c-source.html#l03497">fc_getMeshCoordsAsVariable()</a>, <a class="el" href="mesh_8c-source.html#l03436">fc_getMeshCoordsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03762">fc_getMeshElementConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03821">fc_getMeshElementToEdgeConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03880">fc_getMeshElementToFaceConnsPtr()</a>, <a class="el" href="subset_8c-source.html#l02741">fc_getMeshFromSubset()</a>, <a class="el" href="mesh_8c-source.html#l02848">fc_getMeshInfo()</a>, <a class="el" href="mesh_8c-source.html#l03025">fc_getMeshNumElement()</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="subset_8c-source.html#l01313">fc_getSeqSubsets()</a>, <a class="el" href="sequence_8c-source.html#l01737">fc_getSequenceCoordsPtr()</a>, <a class="el" href="subset_8c-source.html#l03131">fc_getSequenceFromSeqSubset()</a>, <a class="el" href="variable_8c-source.html#l05317">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="sequence_8c-source.html#l01612">fc_getSequenceInfo()</a>, <a class="el" href="sequence_8c-source.html#l01527">fc_getSequenceName()</a>, <a class="el" href="sequence_8c-source.html#l01150">fc_getSequences()</a>, <a class="el" href="variable_8c-source.html#l03637">fc_getSeqVariables()</a>, <a class="el" href="subset_8c-source.html#l02902">fc_getSubsetAssociationType()</a>, <a class="el" href="subset_8c-source.html#l02782">fc_getSubsetInfo()</a>, <a class="el" href="subset_8c-source.html#l03001">fc_getSubsetMembersAsArray()</a>, <a class="el" href="subset_8c-source.html#l02700">fc_getSubsetName()</a>, <a class="el" href="subset_8c-source.html#l01253">fc_getSubsets()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="variable_8c-source.html#l05276">fc_getVariableName()</a>, <a class="el" href="variable_8c-source.html#l03573">fc_getVariables()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="storage_8c-source.html#l00095">fc_initSortedIntArray()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8h-source.html#l00170">FC_MT_SCALAR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="base_8c-source.html#l00769">FC_NULL_SEQUENCE</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="mesh_8c-source.html#l00259">fc_setMeshCoordsPtr()</a>, <a class="el" href="mesh_8c-source.html#l00391">fc_setMeshElementConnsPtr()</a>, <a class="el" href="variable_8c-source.html#l00604">fc_setVariableDataPtr()</a>, <a class="el" href="base_8c-source.html#l00741">fc_sizeofDataType()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="subsetP_8h-source.html#l00075">_FC_SubSlot::mesh</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="subsetter_8c-source.html#l00115">var_name</a>.</p>

<p>Referenced by <a class="el" href="gaplines_8c-source.html#l00433">main()</a>, and <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00858"></a>00858   {
<a name="l00859"></a>00859   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00860"></a>00860   <span class="keywordtype">int</span> i, j, k; 
<a name="l00861"></a>00861   <span class="comment">// original mesh</span>
<a name="l00862"></a>00862   <span class="keywordtype">int</span> numVert, numElem, dim, numVertPerElem, numEdgePerElem, numFacePerElem;
<a name="l00863"></a>00863   <span class="keywordtype">int</span> subset_numVert, subset_numElem;
<a name="l00864"></a>00864   <span class="comment">// index by old ID, get new ID (-1 = doesn't exist)</span>
<a name="l00865"></a>00865   <span class="keywordtype">int</span> *vertLUNewToOld, *elemLUNewToOld, *vertLUOldToNew, *elemLUOldToNew;
<a name="l00866"></a>00866   <span class="keywordtype">int</span> *edgeLUOldToNew = NULL, *faceLUOldToNew = NULL;
<a name="l00867"></a>00867   <span class="keywordtype">int</span> *edgeLUNewToOld = NULL, *faceLUNewToOld = NULL;
<a name="l00868"></a>00868   <span class="keywordtype">int</span> wholeLUOldToNew[1] = { 0 }, wholeLUNewToOld[1] = { 0 };
<a name="l00869"></a>00869   <span class="keywordtype">int</span> *LUOldToNew, *LUNewToOld;
<a name="l00870"></a>00870   <span class="keywordtype">int</span>* src_conns, *new_conns;
<a name="l00871"></a>00871   <span class="keywordtype">double</span>* src_coords, *new_coords;
<a name="l00872"></a>00872   <span class="keywordtype">int</span> numSubset, numVariable, numSeqVar, numSeqSub, *numStepPerSeqVar, *numStepPerSeqSub;
<a name="l00873"></a>00873   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a> *subsets, new_subset, **seqSubs, *new_seqSub;
<a name="l00874"></a>00874   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *variables, new_variable, **seqVars, *new_seqVar;
<a name="l00875"></a>00875   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dest_dsSlot;
<a name="l00876"></a>00876   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* src_meshSlot;
<a name="l00877"></a>00877   <a class="code" href="struct__FC__SubSlot.html" title="Struct describing subset elements.">_FC_SubSlot</a>* subSlot;
<a name="l00878"></a>00878   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> src_mesh;
<a name="l00879"></a>00879   <a class="code" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a" title="Possible element types.">FC_ElementType</a> elemType;
<a name="l00880"></a>00880   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc, subset_assoc;
<a name="l00881"></a>00881   <span class="keywordtype">int</span> numOrig, *origIDs;
<a name="l00882"></a>00882   <a class="code" href="structFC__SortedIntArray.html" title="Sorted, exclusive, self-exanding int array.">FC_SortedIntArray</a> list;
<a name="l00883"></a>00883   <span class="keywordtype">int</span> usingEdge, usingFace;
<a name="l00884"></a>00884 
<a name="l00885"></a>00885   <span class="comment">// default output</span>
<a name="l00886"></a>00886   <span class="keywordflow">if</span> (new_mesh)
<a name="l00887"></a>00887     *new_mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l00888"></a>00888   <span class="keywordflow">if</span> (elemmap)
<a name="l00889"></a>00889     *elemmap = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l00890"></a>00890   <span class="keywordflow">if</span> (vertmap)
<a name="l00891"></a>00891     *vertmap = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l00892"></a>00892   
<a name="l00893"></a>00893   <span class="comment">// check input</span>
<a name="l00894"></a>00894   subSlot = <a class="code" href="group__PrivateSubset.html#gfcfa40671d6a71442d882bf0926d7895" title="Get a subset slot from a subset handle.">_fc_getSubSlot</a>(subset);
<a name="l00895"></a>00895   dest_dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dest_ds);
<a name="l00896"></a>00896   <span class="keywordflow">if</span> (subSlot == NULL || dest_dsSlot == NULL || new_mesh == NULL || 
<a name="l00897"></a>00897       !(doCopyVar == 1  || doCopyVar == 0) ||
<a name="l00898"></a>00898       !(doCopySeqVar == 1  || doCopySeqVar == 0) ||
<a name="l00899"></a>00899       !(doCopySubset == 1  || doCopySubset == 0) ||
<a name="l00900"></a>00900       !(doCopySeqSubset == 1  || doCopySeqSubset == 0)){
<a name="l00901"></a>00901     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00902"></a>00902     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00903"></a>00903   }
<a name="l00904"></a>00904   src_meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(subSlot-&gt;<a class="code" href="struct__FC__SubSlot.html#62d7d3fdde10983984b076625afa02c5">mesh</a>);
<a name="l00905"></a>00905   <span class="keywordflow">if</span> (src_meshSlot == NULL) {
<a name="l00906"></a>00906     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Bad library state, subset o.k. but mesh bad, ??"</span>);
<a name="l00907"></a>00907     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00908"></a>00908   }
<a name="l00909"></a>00909    
<a name="l00910"></a>00910  <span class="comment">// test for NULL name</span>
<a name="l00911"></a>00911   <span class="keywordflow">if</span> (newName == NULL)
<a name="l00912"></a>00912     newName = src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l00913"></a>00913   
<a name="l00914"></a>00914   <span class="comment">// log message</span>
<a name="l00915"></a>00915   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new mesh '%s' from a subset '%s' of mesh "</span>
<a name="l00916"></a>00916                       <span class="stringliteral">"'%s'"</span>, newName, <span class="stringliteral">"subName"</span>, src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00917"></a>00917 
<a name="l00918"></a>00918   <span class="comment">// get subset &amp; mesh info</span>
<a name="l00919"></a>00919   rc = <a class="code" href="group__Subset.html#g815857d0e2d573d0418a3892229c0d83" title="Get information about a subset.">fc_getSubsetInfo</a>(subset, &amp;numOrig, NULL, &amp;assoc);
<a name="l00920"></a>00920   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00921"></a>00921     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get subset info"</span>);
<a name="l00922"></a>00922     <span class="keywordflow">return</span> rc;
<a name="l00923"></a>00923   }
<a name="l00924"></a>00924   rc = <a class="code" href="group__Subset.html#gddbb3a2f8c43289a3c3754f1546462bc" title="Get the parent mesh of the subset.">fc_getMeshFromSubset</a>(subset, &amp;src_mesh);
<a name="l00925"></a>00925   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00926"></a>00926     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get subset's parent mesh"</span>);
<a name="l00927"></a>00927     <span class="keywordflow">return</span> rc;
<a name="l00928"></a>00928   }
<a name="l00929"></a>00929   <span class="comment">// get some mesh info</span>
<a name="l00930"></a>00930   rc = <a class="code" href="group__Mesh.html#ged61b1f684fc2a6ac489c10841cdb591" title="Get information about a mesh.">fc_getMeshInfo</a>(src_mesh, NULL, &amp;dim, &amp;numVert, &amp;numElem, &amp;elemType);
<a name="l00931"></a>00931   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00932"></a>00932     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for mesh '%s'"</span>,
<a name="l00933"></a>00933                           src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00934"></a>00934     <span class="keywordflow">return</span> rc;
<a name="l00935"></a>00935   }
<a name="l00936"></a>00936 
<a name="l00937"></a>00937   <span class="comment">// trivial case: assoc = FC_AT_WHOLE_MESH</span>
<a name="l00938"></a>00938   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>) {
<a name="l00939"></a>00939     <span class="keywordflow">if</span> (numOrig &gt; 0) {
<a name="l00940"></a>00940       rc = <a class="code" href="group__Mesh.html#g13cefebd04b8d1c1586737e32fc6ae2b" title="Copy a mesh.">fc_copyMesh</a>(src_mesh, dest_ds, newName, doCopyVar, doCopySeqVar,
<a name="l00941"></a>00941                  doCopySubset, doCopySeqSubset, new_mesh);
<a name="l00942"></a>00942       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00943"></a>00943      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy mesh"</span>);
<a name="l00944"></a>00944      <span class="keywordflow">return</span> rc;
<a name="l00945"></a>00945       }
<a name="l00946"></a>00946       <span class="keywordflow">if</span> (elemmap != NULL){
<a name="l00947"></a>00947      <span class="keywordtype">int</span>* allelems = (<span class="keywordtype">int</span>*)malloc(numElem*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00948"></a>00948      <span class="keywordflow">if</span> (!allelems){
<a name="l00949"></a>00949        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00950"></a>00950      }
<a name="l00951"></a>00951      <span class="keywordflow">for</span> (i = 0; i &lt; numElem; i++){
<a name="l00952"></a>00952        allelems[i] = i;
<a name="l00953"></a>00953      }
<a name="l00954"></a>00954      rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(*new_mesh,<span class="stringliteral">"FC_ELEMENTMAP"</span>,elemmap);
<a name="l00955"></a>00955      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l00956"></a>00956        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot create elemmap var"</span>);
<a name="l00957"></a>00957        <span class="keywordflow">return</span> rc;
<a name="l00958"></a>00958      }
<a name="l00959"></a>00959      rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(*elemmap, numElem,1,<a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>, <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>,
<a name="l00960"></a>00960                        <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>, allelems);
<a name="l00961"></a>00961      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l00962"></a>00962        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot set elemmap var data"</span>);
<a name="l00963"></a>00963        <span class="keywordflow">return</span> rc;
<a name="l00964"></a>00964      }
<a name="l00965"></a>00965       }
<a name="l00966"></a>00966 
<a name="l00967"></a>00967       <span class="keywordflow">if</span> (vertmap != NULL){
<a name="l00968"></a>00968      <span class="keywordtype">int</span>* allverts = (<span class="keywordtype">int</span>*)malloc(numVert*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00969"></a>00969      <span class="keywordflow">if</span> (!allverts){
<a name="l00970"></a>00970        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00971"></a>00971      }
<a name="l00972"></a>00972      <span class="keywordflow">for</span> (i = 0; i &lt; numVert; i++){
<a name="l00973"></a>00973        allverts[i] = i;
<a name="l00974"></a>00974      }
<a name="l00975"></a>00975      rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(*new_mesh,<span class="stringliteral">"FC_VERTEXMAP"</span>,vertmap);
<a name="l00976"></a>00976      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l00977"></a>00977        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot create vertmap var"</span>);
<a name="l00978"></a>00978        <span class="keywordflow">return</span> rc;
<a name="l00979"></a>00979      }
<a name="l00980"></a>00980      rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(*vertmap, numVert,1,<a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>, <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>,
<a name="l00981"></a>00981                        <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>, allverts);
<a name="l00982"></a>00982      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l00983"></a>00983        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot set vertmap var data"</span>);
<a name="l00984"></a>00984        <span class="keywordflow">return</span> rc;
<a name="l00985"></a>00985      }
<a name="l00986"></a>00986       }
<a name="l00987"></a>00987     }
<a name="l00988"></a>00988 
<a name="l00989"></a>00989     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00990"></a>00990   }
<a name="l00991"></a>00991   
<a name="l00992"></a>00992   <span class="comment">// get the elements that correspond with the subset</span>
<a name="l00993"></a>00993   <span class="comment">//so the change is actually based on the corresponding elements, after</span>
<a name="l00994"></a>00994   <span class="comment">//being subject to the doStrict constraint</span>
<a name="l00995"></a>00995   rc = <a class="code" href="group__Subset.html#g6cebfda6e20e2a518636838b170185da" title="Get a copy of subset members as array.">fc_getSubsetMembersAsArray</a>(subset, &amp;numOrig, &amp;origIDs);
<a name="l00996"></a>00996   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00997"></a>00997     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get subset members"</span>);
<a name="l00998"></a>00998     <span class="keywordflow">return</span> rc;
<a name="l00999"></a>00999   }
<a name="l01000"></a>01000   rc = <a class="code" href="group__TopologyRelations.html#gd652ffb3bbe366c1a882a4e0fa34c499" title="Change the type of mesh entities.">fc_changeMeshEntityType</a>(src_mesh, assoc, numOrig, origIDs, 
<a name="l01001"></a>01001                                <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>, <a class="code" href="subsetter_8c.html#a5132f7621c6dc0ab225ba797836ebe1">doStrict</a>, &amp;subset_numElem, 
<a name="l01002"></a>01002                                &amp;elemLUNewToOld);
<a name="l01003"></a>01003   free(origIDs);
<a name="l01004"></a>01004   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01005"></a>01005     <span class="keywordflow">return</span> rc;
<a name="l01006"></a>01006   }
<a name="l01007"></a>01007 
<a name="l01008"></a>01008   <span class="comment">// more trivial cases: no elements or all elements</span>
<a name="l01009"></a>01009   <span class="keywordflow">if</span> (subset_numElem == 0) {
<a name="l01010"></a>01010     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01011"></a>01011   }
<a name="l01012"></a>01012   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (subset_numElem == numElem) {
<a name="l01013"></a>01013     rc = <a class="code" href="group__Mesh.html#g13cefebd04b8d1c1586737e32fc6ae2b" title="Copy a mesh.">fc_copyMesh</a>(src_mesh, dest_ds, newName, doCopyVar, doCopySeqVar,
<a name="l01014"></a>01014                doCopySubset, doCopySeqSubset, new_mesh);
<a name="l01015"></a>01015     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01016"></a>01016       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy mesh"</span>);
<a name="l01017"></a>01017       <span class="keywordflow">return</span> rc;
<a name="l01018"></a>01018     }
<a name="l01019"></a>01019     free(elemLUNewToOld);
<a name="l01020"></a>01020 
<a name="l01021"></a>01021     <span class="keywordflow">if</span> (elemmap != NULL){
<a name="l01022"></a>01022       <span class="keywordtype">int</span> *allelems = (<span class="keywordtype">int</span>*)malloc(numElem*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01023"></a>01023       <span class="keywordflow">if</span> (!allelems){
<a name="l01024"></a>01024      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01025"></a>01025       }
<a name="l01026"></a>01026       <span class="keywordflow">for</span> (i = 0; i &lt; numElem; i++){
<a name="l01027"></a>01027      allelems[i] = i;
<a name="l01028"></a>01028       }
<a name="l01029"></a>01029       rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(*new_mesh,<span class="stringliteral">"FC_ELEMENTMAP"</span>,elemmap);
<a name="l01030"></a>01030       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01031"></a>01031      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot create elemmap var"</span>);
<a name="l01032"></a>01032      <span class="keywordflow">return</span> rc;
<a name="l01033"></a>01033       }
<a name="l01034"></a>01034       rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(*elemmap, numElem,1,<a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>, <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>,
<a name="l01035"></a>01035                      <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>, allelems);
<a name="l01036"></a>01036       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01037"></a>01037      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot set elemmap var data"</span>);
<a name="l01038"></a>01038      <span class="keywordflow">return</span> rc;
<a name="l01039"></a>01039       }
<a name="l01040"></a>01040     }
<a name="l01041"></a>01041 
<a name="l01042"></a>01042     <span class="keywordflow">if</span> (vertmap != NULL){
<a name="l01043"></a>01043       <span class="keywordtype">int</span>* allverts = (<span class="keywordtype">int</span>*)malloc(numVert*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01044"></a>01044       <span class="keywordflow">if</span> (!allverts){
<a name="l01045"></a>01045      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01046"></a>01046       }
<a name="l01047"></a>01047       <span class="keywordflow">for</span> (i = 0; i &lt; numVert; i++){
<a name="l01048"></a>01048      allverts[i] = i;
<a name="l01049"></a>01049       }
<a name="l01050"></a>01050       rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(*new_mesh,<span class="stringliteral">"FC_VERTEXMAP"</span>,vertmap);
<a name="l01051"></a>01051       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01052"></a>01052      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot create vertmap var"</span>);
<a name="l01053"></a>01053      <span class="keywordflow">return</span> rc;
<a name="l01054"></a>01054       }
<a name="l01055"></a>01055       rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(*vertmap, numVert,1,<a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>, <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>,
<a name="l01056"></a>01056                      <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>, allverts);
<a name="l01057"></a>01057       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01058"></a>01058      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot set vertmap var data"</span>);
<a name="l01059"></a>01059      <span class="keywordflow">return</span> rc;
<a name="l01060"></a>01060       }
<a name="l01061"></a>01061     }
<a name="l01062"></a>01062     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01063"></a>01063   }
<a name="l01064"></a>01064 
<a name="l01065"></a>01065   <span class="comment">// more mesh info</span>
<a name="l01066"></a>01066   numVertPerElem = <a class="code" href="group__DataTypes.html#g2a400f7126e79f149032162c87c4eee8" title="Returns number of vertices in a type of element.">fc_getElementTypeNumVertex</a>(elemType);
<a name="l01067"></a>01067   numEdgePerElem = <a class="code" href="group__DataTypes.html#gf2ce1082614c4a5cd5481c00c89a7e67" title="Returns number of edges in a type of element.">fc_getElementTypeNumEdge</a>(elemType);
<a name="l01068"></a>01068   numFacePerElem = <a class="code" href="group__DataTypes.html#g1cffd2eb82ec74e749ca93a6cb623e4a" title="Returns number of faces in a type of element.">fc_getElementTypeNumFace</a>(elemType);
<a name="l01069"></a>01069   rc = <a class="code" href="group__Mesh.html#g19906bcae562d226991740da142000c0" title="Return element to vertex connectivities for the mesh.">fc_getMeshElementConnsPtr</a>(src_mesh, &amp;src_conns);
<a name="l01070"></a>01070   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01071"></a>01071     <span class="keywordflow">return</span> rc;
<a name="l01072"></a>01072 
<a name="l01073"></a>01073   <span class="comment">// make element lookup tables</span>
<a name="l01074"></a>01074   elemLUOldToNew = malloc(numElem*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01075"></a>01075   <span class="keywordflow">if</span> (elemLUOldToNew == NULL) {
<a name="l01076"></a>01076     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01077"></a>01077     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01078"></a>01078   }
<a name="l01079"></a>01079   <span class="keywordflow">for</span> (i = 0; i &lt; numElem; i++)
<a name="l01080"></a>01080     elemLUOldToNew[i] = -1;
<a name="l01081"></a>01081   <span class="keywordflow">for</span> (i = 0; i &lt; subset_numElem; i++) 
<a name="l01082"></a>01082     elemLUOldToNew[elemLUNewToOld[i]] = i;
<a name="l01083"></a>01083 
<a name="l01084"></a>01084  <span class="comment">// Figure out which vertices are going to be kept &amp; make lookup tables</span>
<a name="l01085"></a>01085   <a class="code" href="group__SimpleDataObjects.html#g2a977bec6f7ae75297a4dcf7ec079bb7" title="Initialize a sorted int array.">fc_initSortedIntArray</a>(&amp;list);
<a name="l01086"></a>01086   <span class="keywordflow">for</span> (i = 0; i &lt; subset_numElem; i++) {
<a name="l01087"></a>01087     <span class="keywordtype">int</span> ret = <a class="code" href="group__SimpleDataObjects.html#gf842f060b1f39a0acfc54421bbe0865a" title="Add an array of ints to a sorted int array.">fc_addIntArrayToSortedIntArray</a>(&amp;list, numVertPerElem,
<a name="l01088"></a>01088                               &amp;src_conns[elemLUNewToOld[i]*numVertPerElem], 0);
<a name="l01089"></a>01089     <span class="keywordflow">if</span> (ret &lt; 0) {
<a name="l01090"></a>01090       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to add ids to sia"</span>);
<a name="l01091"></a>01091       <span class="keywordflow">return</span> ret;    
<a name="l01092"></a>01092     }
<a name="l01093"></a>01093   }
<a name="l01094"></a>01094   rc = <a class="code" href="group__SimpleDataObjects.html#g964b6f06b28b9587ae2fbd18fe2b7e9e" title="Convert sorted int array to array.">fc_convertSortedIntArrayToIntArray</a>(&amp;list, &amp;subset_numVert, &amp;vertLUNewToOld);
<a name="l01095"></a>01095   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01096"></a>01096     <span class="keywordflow">return</span> rc;
<a name="l01097"></a>01097   vertLUOldToNew = malloc(numVert*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01098"></a>01098   <span class="keywordflow">if</span> (vertLUOldToNew == NULL) {
<a name="l01099"></a>01099     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01100"></a>01100     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01101"></a>01101   }
<a name="l01102"></a>01102   <span class="keywordflow">for</span> (i = 0; i &lt; numVert; i++)
<a name="l01103"></a>01103     vertLUOldToNew[i] = -1;
<a name="l01104"></a>01104   <span class="keywordflow">for</span> (i = 0; i &lt; subset_numVert; i++)
<a name="l01105"></a>01105     vertLUOldToNew[vertLUNewToOld[i]] = i;
<a name="l01106"></a>01106 
<a name="l01107"></a>01107   <span class="comment">// make element-&gt;vertex conns</span>
<a name="l01108"></a>01108   new_conns = malloc(subset_numElem * numVertPerElem * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01109"></a>01109   <span class="keywordflow">if</span> (new_conns == NULL) {
<a name="l01110"></a>01110     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01111"></a>01111     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01112"></a>01112   }
<a name="l01113"></a>01113   <span class="keywordflow">for</span> (i = 0; i &lt; subset_numElem; i++)
<a name="l01114"></a>01114     <span class="keywordflow">for</span> (j = 0; j &lt; numVertPerElem; j++) 
<a name="l01115"></a>01115       new_conns[i*numVertPerElem + j] = 
<a name="l01116"></a>01116         vertLUOldToNew[src_conns[elemLUNewToOld[i]*numVertPerElem+j]];
<a name="l01117"></a>01117 
<a name="l01118"></a>01118   <span class="comment">// determine new coords</span>
<a name="l01119"></a>01119   new_coords = malloc(subset_numVert * dim * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l01120"></a>01120   <span class="keywordflow">if</span> (new_coords == NULL) {
<a name="l01121"></a>01121     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01122"></a>01122     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01123"></a>01123   }
<a name="l01124"></a>01124   rc = <a class="code" href="group__Mesh.html#gff8561557c19ae03be9ff18cc73a6823" title="Return the vertex coordinates of the mesh.">fc_getMeshCoordsPtr</a>(src_mesh, &amp;src_coords);
<a name="l01125"></a>01125   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01126"></a>01126     <span class="keywordflow">return</span> rc;
<a name="l01127"></a>01127   <span class="keywordflow">for</span> (i = 0; i &lt; subset_numVert; i++)
<a name="l01128"></a>01128     memcpy(&amp;(new_coords[i*dim]), &amp;(src_coords[vertLUNewToOld[i]*dim]), 
<a name="l01129"></a>01129            dim*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l01130"></a>01130   
<a name="l01131"></a>01131   <span class="comment">// create new mesh</span>
<a name="l01132"></a>01132   rc = <a class="code" href="group__Mesh.html#g3928a328006617330e735ca1644e7cb3" title="Create a new mesh.">fc_createMesh</a>(dest_ds, newName, new_mesh);
<a name="l01133"></a>01133   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01134"></a>01134     <span class="keywordflow">return</span> rc;
<a name="l01135"></a>01135   rc = <a class="code" href="group__Mesh.html#g00fb04104cb0c5a6638cca5027b4b1df" title="Set the pointer to the mesh coordinates.">fc_setMeshCoordsPtr</a>(*new_mesh, dim, subset_numVert, new_coords);
<a name="l01136"></a>01136   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01137"></a>01137     <span class="keywordflow">return</span> rc;
<a name="l01138"></a>01138   rc = <a class="code" href="group__Mesh.html#g73caf4cfc1c9d8b302d880735a67cd2a" title="Set the pointer to the mesh element connectivities.">fc_setMeshElementConnsPtr</a>(*new_mesh, elemType, subset_numElem, 
<a name="l01139"></a>01139                                  new_conns);
<a name="l01140"></a>01140   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01141"></a>01141     <span class="keywordflow">return</span> rc;
<a name="l01142"></a>01142 
<a name="l01143"></a>01143   <span class="keywordflow">if</span> (elemmap != NULL){
<a name="l01144"></a>01144     rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(*new_mesh,<span class="stringliteral">"FC_ELEMENTMAP"</span>,elemmap);
<a name="l01145"></a>01145     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01146"></a>01146       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot create elemmap var"</span>);
<a name="l01147"></a>01147       <span class="keywordflow">return</span> rc;
<a name="l01148"></a>01148     }
<a name="l01149"></a>01149     rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(*elemmap, subset_numElem,1,<a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>, <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>,
<a name="l01150"></a>01150                       <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>, (<span class="keywordtype">void</span>*)elemLUNewToOld);
<a name="l01151"></a>01151     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01152"></a>01152       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot set elemmap var data"</span>);
<a name="l01153"></a>01153       <span class="keywordflow">return</span> rc;
<a name="l01154"></a>01154     }
<a name="l01155"></a>01155   }
<a name="l01156"></a>01156 
<a name="l01157"></a>01157   <span class="keywordflow">if</span> (vertmap != NULL){
<a name="l01158"></a>01158     rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(*new_mesh,<span class="stringliteral">"FC_VERTEXMAP"</span>,vertmap);
<a name="l01159"></a>01159     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01160"></a>01160       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot create vertmap var"</span>);
<a name="l01161"></a>01161       <span class="keywordflow">return</span> rc;
<a name="l01162"></a>01162     }
<a name="l01163"></a>01163     rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(*vertmap, subset_numVert,1,<a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>, <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>,
<a name="l01164"></a>01164                       <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>, (<span class="keywordtype">void</span>*)vertLUNewToOld);
<a name="l01165"></a>01165     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01166"></a>01166       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot set vertmap var data"</span>);
<a name="l01167"></a>01167       <span class="keywordflow">return</span> rc;
<a name="l01168"></a>01168     }
<a name="l01169"></a>01169   }
<a name="l01170"></a>01170 
<a name="l01171"></a>01171   <span class="keywordflow">if</span> (doCopyVar == 0 &amp;&amp; doCopySeqVar == 0 &amp;&amp; doCopySubset == 0 &amp;&amp; doCopySeqSubset == 0){
<a name="l01172"></a>01172     <span class="comment">//free stuff and exit</span>
<a name="l01173"></a>01173     free(vertLUOldToNew);
<a name="l01174"></a>01174     free(edgeLUOldToNew);
<a name="l01175"></a>01175     free(faceLUOldToNew);
<a name="l01176"></a>01176     free(elemLUOldToNew);
<a name="l01177"></a>01177     free(edgeLUNewToOld);
<a name="l01178"></a>01178     free(faceLUNewToOld);
<a name="l01179"></a>01179     <span class="keywordflow">if</span> (elemmap == NULL) free(elemLUNewToOld);
<a name="l01180"></a>01180     <span class="keywordflow">if</span> (vertmap == NULL) free(vertLUNewToOld);
<a name="l01181"></a>01181     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01182"></a>01182   }
<a name="l01183"></a>01183 
<a name="l01184"></a>01184 
<a name="l01185"></a>01185   <span class="comment">// Get subsets &amp; variables for use now &amp; later</span>
<a name="l01186"></a>01186   rc = <a class="code" href="group__Subset.html#gb12aea784bf43ec6a29a8e51a3c0da51" title="Get the subsets in a mesh.">fc_getSubsets</a>(src_mesh, &amp;numSubset, &amp;subsets);
<a name="l01187"></a>01187   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01188"></a>01188     <span class="keywordflow">return</span> rc;
<a name="l01189"></a>01189   rc = <a class="code" href="group__Subset.html#g17815a36b74d5568de04398ca4bd4bf4" title="Get the seq subsets in a mesh.">fc_getSeqSubsets</a>(src_mesh, &amp;numSeqSub, &amp;numStepPerSeqSub, &amp;seqSubs);
<a name="l01190"></a>01190   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01191"></a>01191     <span class="keywordflow">return</span> rc;
<a name="l01192"></a>01192   rc = <a class="code" href="group__Variable.html#ga96777675a667d79871c93c54729bde4" title="Get the variables in a mesh.">fc_getVariables</a>(src_mesh, &amp;numVariable, &amp;variables);
<a name="l01193"></a>01193   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01194"></a>01194     <span class="keywordflow">return</span> rc;
<a name="l01195"></a>01195   rc = <a class="code" href="group__Variable.html#g01bf1b0d9b1de983115a461216039449" title="Get the sequence variables in a mesh.">fc_getSeqVariables</a>(src_mesh, &amp;numSeqVar, &amp;numStepPerSeqVar, &amp;seqVars);
<a name="l01196"></a>01196   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01197"></a>01197     <span class="keywordflow">return</span> rc;
<a name="l01198"></a>01198 
<a name="l01199"></a>01199   <span class="comment">// Build edge &amp; face lu tables only if there are edge or face </span>
<a name="l01200"></a>01200   <span class="comment">// subsets or variables</span>
<a name="l01201"></a>01201   usingEdge = 0;
<a name="l01202"></a>01202   usingFace = 0;
<a name="l01203"></a>01203 
<a name="l01204"></a>01204   <span class="keywordflow">if</span> (doCopySubset){
<a name="l01205"></a>01205     <span class="keywordflow">for</span> (i = 0; i &lt; numSubset; i++) {
<a name="l01206"></a>01206       <a class="code" href="group__Subset.html#g815857d0e2d573d0418a3892229c0d83" title="Get information about a subset.">fc_getSubsetInfo</a>(subsets[i], NULL, NULL, &amp;assoc);
<a name="l01207"></a>01207       <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>)
<a name="l01208"></a>01208      usingEdge = 1;
<a name="l01209"></a>01209       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>)
<a name="l01210"></a>01210      usingFace = 1;
<a name="l01211"></a>01211     }
<a name="l01212"></a>01212   }
<a name="l01213"></a>01213   <span class="keywordflow">if</span> (doCopySeqSubset){
<a name="l01214"></a>01214     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqSub; i++) {
<a name="l01215"></a>01215       <a class="code" href="group__Subset.html#g815857d0e2d573d0418a3892229c0d83" title="Get information about a subset.">fc_getSubsetInfo</a>(seqSubs[i][0], NULL, NULL, &amp;assoc);
<a name="l01216"></a>01216       <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>)
<a name="l01217"></a>01217      usingEdge = 1;
<a name="l01218"></a>01218       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>)
<a name="l01219"></a>01219      usingFace = 1;
<a name="l01220"></a>01220     }
<a name="l01221"></a>01221   }
<a name="l01222"></a>01222   <span class="keywordflow">if</span> (doCopyVar){
<a name="l01223"></a>01223     <span class="keywordflow">for</span> (i = 0; i &lt; numVariable; i++) {
<a name="l01224"></a>01224       <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(variables[i], NULL, NULL, &amp;assoc, NULL, NULL);
<a name="l01225"></a>01225       <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>)
<a name="l01226"></a>01226      usingEdge = 1;
<a name="l01227"></a>01227       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>)
<a name="l01228"></a>01228      usingFace = 1;
<a name="l01229"></a>01229     }    
<a name="l01230"></a>01230   }
<a name="l01231"></a>01231   <span class="keywordflow">if</span> (doCopySeqVar){
<a name="l01232"></a>01232     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++) {
<a name="l01233"></a>01233       <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(seqVars[i][0], NULL, NULL, &amp;assoc, NULL, NULL);
<a name="l01234"></a>01234       <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>)
<a name="l01235"></a>01235      usingEdge = 1;
<a name="l01236"></a>01236       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>)
<a name="l01237"></a>01237      usingFace = 1;
<a name="l01238"></a>01238     }    
<a name="l01239"></a>01239   }
<a name="l01240"></a>01240   <span class="keywordflow">if</span> (usingEdge) {
<a name="l01241"></a>01241     <span class="keywordtype">int</span> numEdge, new_numElement, new_numEdge;
<a name="l01242"></a>01242     <span class="keywordtype">int</span> *src_elemToEdgeConns, *new_elemToEdgeConns;
<a name="l01243"></a>01243 
<a name="l01244"></a>01244     <span class="comment">// initialize old to new lookup tables</span>
<a name="l01245"></a>01245     <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(src_mesh, <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>, &amp;numEdge);
<a name="l01246"></a>01246     <span class="keywordflow">if</span> (numEdge &gt; 0) {
<a name="l01247"></a>01247       edgeLUOldToNew = malloc(numEdge*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01248"></a>01248       <span class="keywordflow">if</span> (edgeLUOldToNew == NULL) {
<a name="l01249"></a>01249         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01250"></a>01250         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01251"></a>01251       }
<a name="l01252"></a>01252       <span class="keywordflow">for</span> (i = 0; i &lt; numEdge; i++)
<a name="l01253"></a>01253         edgeLUOldToNew[i] = -1;
<a name="l01254"></a>01254     }
<a name="l01255"></a>01255 
<a name="l01256"></a>01256     <span class="comment">// create new to old lu (&amp; force building of edges &amp; faces on new mesh)</span>
<a name="l01257"></a>01257     <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(*new_mesh, <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>, &amp;new_numEdge);
<a name="l01258"></a>01258     <span class="keywordflow">if</span> (new_numEdge &gt; 0) {
<a name="l01259"></a>01259       edgeLUNewToOld = malloc(new_numEdge*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01260"></a>01260        <span class="keywordflow">if</span> (edgeLUOldToNew == NULL) {
<a name="l01261"></a>01261         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01262"></a>01262         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01263"></a>01263       }
<a name="l01264"></a>01264     }
<a name="l01265"></a>01265 
<a name="l01266"></a>01266     <span class="comment">// create lookups</span>
<a name="l01267"></a>01267     <a class="code" href="group__Mesh.html#g8bcadefbf0728724adf77ef52c1f3732" title="Returns number of elements in a mesh.">fc_getMeshNumElement</a>(*new_mesh, &amp;new_numElement);
<a name="l01268"></a>01268     rc = <a class="code" href="group__Mesh.html#gcc3f8cb48b0c2673d9e0ce0d4eba2878" title="Return element to edge connectivities.">fc_getMeshElementToEdgeConnsPtr</a>(src_mesh, &amp;src_elemToEdgeConns);
<a name="l01269"></a>01269     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01270"></a>01270       <span class="keywordflow">return</span> rc;
<a name="l01271"></a>01271     rc = <a class="code" href="group__Mesh.html#gcc3f8cb48b0c2673d9e0ce0d4eba2878" title="Return element to edge connectivities.">fc_getMeshElementToEdgeConnsPtr</a>(*new_mesh, &amp;new_elemToEdgeConns);
<a name="l01272"></a>01272     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01273"></a>01273       <span class="keywordflow">return</span> rc;
<a name="l01274"></a>01274     <span class="keywordflow">for</span> (i = 0; i &lt; new_numElement; i++) {
<a name="l01275"></a>01275       <span class="keywordtype">int</span>* new_edgeIDs = &amp;new_elemToEdgeConns[i*numEdgePerElem];
<a name="l01276"></a>01276       <span class="keywordtype">int</span>* old_edgeIDs = &amp;src_elemToEdgeConns[elemLUNewToOld[i]*numEdgePerElem];
<a name="l01277"></a>01277       <span class="keywordflow">for</span> (j = 0; j &lt; numEdgePerElem; j++) {
<a name="l01278"></a>01278         edgeLUNewToOld[new_edgeIDs[j]] = old_edgeIDs[j];
<a name="l01279"></a>01279         edgeLUOldToNew[old_edgeIDs[j]] = new_edgeIDs[j];
<a name="l01280"></a>01280       }
<a name="l01281"></a>01281     }
<a name="l01282"></a>01282   }
<a name="l01283"></a>01283   <span class="keywordflow">if</span> (usingFace) {
<a name="l01284"></a>01284     <span class="keywordtype">int</span> numFace, new_numElement, new_numFace;
<a name="l01285"></a>01285     <span class="keywordtype">int</span> *src_elemToFaceConns, *new_elemToFaceConns;
<a name="l01286"></a>01286 
<a name="l01287"></a>01287     <span class="comment">// initialize old to new lookup tables</span>
<a name="l01288"></a>01288     <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(src_mesh, <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>, &amp;numFace);
<a name="l01289"></a>01289     <span class="keywordflow">if</span> (numFace &gt; 0) {
<a name="l01290"></a>01290       faceLUOldToNew = malloc(numFace*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01291"></a>01291       <span class="keywordflow">if</span> (faceLUOldToNew == NULL) {
<a name="l01292"></a>01292         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01293"></a>01293         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01294"></a>01294       }
<a name="l01295"></a>01295       <span class="keywordflow">for</span> (i = 0; i &lt; numFace; i++)
<a name="l01296"></a>01296         faceLUOldToNew[i] = -1;
<a name="l01297"></a>01297     }
<a name="l01298"></a>01298 
<a name="l01299"></a>01299     <span class="comment">// create new to old lu (&amp; force building of edges &amp; faces on new mesh)</span>
<a name="l01300"></a>01300     <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(*new_mesh, <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>, &amp;new_numFace);
<a name="l01301"></a>01301     <span class="keywordflow">if</span> (new_numFace &gt; 0) {
<a name="l01302"></a>01302       faceLUNewToOld = malloc(new_numFace*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01303"></a>01303        <span class="keywordflow">if</span> (faceLUOldToNew == NULL) {
<a name="l01304"></a>01304         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01305"></a>01305         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01306"></a>01306       }
<a name="l01307"></a>01307     }     
<a name="l01308"></a>01308 
<a name="l01309"></a>01309     <span class="comment">// create lookups</span>
<a name="l01310"></a>01310     <a class="code" href="group__Mesh.html#g8bcadefbf0728724adf77ef52c1f3732" title="Returns number of elements in a mesh.">fc_getMeshNumElement</a>(*new_mesh, &amp;new_numElement);
<a name="l01311"></a>01311     rc = <a class="code" href="group__Mesh.html#g7f17910148b4237e84ca374845688cfc" title="Return element to face connectivities.">fc_getMeshElementToFaceConnsPtr</a>(src_mesh, &amp;src_elemToFaceConns);
<a name="l01312"></a>01312     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01313"></a>01313       <span class="keywordflow">return</span> rc;
<a name="l01314"></a>01314     rc = <a class="code" href="group__Mesh.html#g7f17910148b4237e84ca374845688cfc" title="Return element to face connectivities.">fc_getMeshElementToFaceConnsPtr</a>(*new_mesh, &amp;new_elemToFaceConns);
<a name="l01315"></a>01315     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01316"></a>01316       <span class="keywordflow">return</span> rc;
<a name="l01317"></a>01317     <span class="keywordflow">for</span> (i = 0; i &lt; new_numElement; i++) {
<a name="l01318"></a>01318       <span class="keywordtype">int</span>* new_faceIDs = &amp;new_elemToFaceConns[i*numFacePerElem];
<a name="l01319"></a>01319       <span class="keywordtype">int</span>* old_faceIDs = &amp;src_elemToFaceConns[elemLUNewToOld[i]*numFacePerElem];
<a name="l01320"></a>01320       <span class="keywordflow">for</span> (j = 0; j &lt; numFacePerElem; j++) {
<a name="l01321"></a>01321         faceLUNewToOld[new_faceIDs[j]] = old_faceIDs[j];
<a name="l01322"></a>01322         faceLUOldToNew[old_faceIDs[j]] = new_faceIDs[j];
<a name="l01323"></a>01323       }
<a name="l01324"></a>01324     }
<a name="l01325"></a>01325   }
<a name="l01326"></a>01326 
<a name="l01327"></a>01327   <span class="comment">// copy stuff -- a lot like in fc_copyMesh</span>
<a name="l01328"></a>01328 
<a name="l01329"></a>01329   <span class="comment">// copy subsets</span>
<a name="l01330"></a>01330   <span class="keywordflow">if</span> (doCopySubset){
<a name="l01331"></a>01331     <span class="keywordflow">for</span> (i = 0; i &lt; numSubset; i++) {
<a name="l01332"></a>01332       <span class="keywordtype">int</span> numMember, *memberIDs;
<a name="l01333"></a>01333       <span class="keywordtype">char</span>* subset_name;
<a name="l01334"></a>01334       
<a name="l01335"></a>01335       <span class="comment">// create the new subset</span>
<a name="l01336"></a>01336       rc = <a class="code" href="group__Subset.html#g7e34b0e8a2f9d42c44f0ee4ea00f5e8a" title="Get subset&amp;#39;s association type.">fc_getSubsetAssociationType</a>(subsets[i], &amp;subset_assoc);
<a name="l01337"></a>01337       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01338"></a>01338      <span class="keywordflow">return</span> rc;
<a name="l01339"></a>01339       rc = <a class="code" href="group__Subset.html#g429e404a267e2f574e2578aa5d0aaa35" title="Get subset name.">fc_getSubsetName</a>(subsets[i], &amp;subset_name);
<a name="l01340"></a>01340       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01341"></a>01341      <span class="keywordflow">return</span> rc;
<a name="l01342"></a>01342       rc = <a class="code" href="group__Subset.html#gccbfd6035cd0b949a4fac98888348e88" title="Create a new subset on a specified mesh.">fc_createSubset</a>(*new_mesh, subset_name, subset_assoc, &amp;new_subset);
<a name="l01343"></a>01343       free(subset_name);
<a name="l01344"></a>01344       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01345"></a>01345      <span class="keywordflow">return</span> rc;
<a name="l01346"></a>01346     
<a name="l01347"></a>01347       <span class="comment">// Add the members that are in the new subset (i.e. have a new ID)</span>
<a name="l01348"></a>01348       <span class="keywordflow">switch</span> (subset_assoc) {
<a name="l01349"></a>01349       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>:   LUOldToNew = vertLUOldToNew;   <span class="keywordflow">break</span>;
<a name="l01350"></a>01350       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>:     LUOldToNew = edgeLUOldToNew;   <span class="keywordflow">break</span>;
<a name="l01351"></a>01351       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:     LUOldToNew = faceLUOldToNew;   <span class="keywordflow">break</span>;
<a name="l01352"></a>01352      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>:  LUOldToNew = elemLUOldToNew;   <span class="keywordflow">break</span>;
<a name="l01353"></a>01353      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>:    LUOldToNew = wholeLUOldToNew;  <span class="keywordflow">break</span>;
<a name="l01354"></a>01354       <span class="keywordflow">default</span>:
<a name="l01355"></a>01355      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Should never reach this point!"</span>);
<a name="l01356"></a>01356      <span class="keywordflow">return</span> rc;
<a name="l01357"></a>01357       }
<a name="l01358"></a>01358       rc = <a class="code" href="group__Subset.html#g6cebfda6e20e2a518636838b170185da" title="Get a copy of subset members as array.">fc_getSubsetMembersAsArray</a>(subsets[i], &amp;numMember, &amp;memberIDs);
<a name="l01359"></a>01359       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01360"></a>01360      <span class="keywordflow">return</span> rc;
<a name="l01361"></a>01361       <span class="keywordflow">for</span> (j = 0; j &lt; numMember; j++) {
<a name="l01362"></a>01362      <span class="keywordflow">if</span> (LUOldToNew[memberIDs[j]] &gt; -1) {
<a name="l01363"></a>01363        rc = <a class="code" href="group__Subset.html#g5ed37876a6f144458716efed8cb78dbe" title="Add member to a subset.">fc_addMemberToSubset</a>(new_subset, LUOldToNew[memberIDs[j]]);
<a name="l01364"></a>01364        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01365"></a>01365          <span class="keywordflow">return</span> rc;
<a name="l01366"></a>01366      }
<a name="l01367"></a>01367       }
<a name="l01368"></a>01368       free(memberIDs);
<a name="l01369"></a>01369     }
<a name="l01370"></a>01370     free(subsets);
<a name="l01371"></a>01371   } <span class="keywordflow">else</span> {
<a name="l01372"></a>01372     free(subsets);
<a name="l01373"></a>01373   }
<a name="l01374"></a>01374 
<a name="l01375"></a>01375 
<a name="l01376"></a>01376   <span class="comment">// copy the basic variables</span>
<a name="l01377"></a>01377   <span class="keywordflow">if</span> (doCopyVar){
<a name="l01378"></a>01378     <span class="keywordflow">for</span> (i = 0; i &lt; numVariable; i++) {
<a name="l01379"></a>01379       <span class="comment">// do something different for the mesh 'coords as variable'</span>
<a name="l01380"></a>01380       <span class="keywordflow">if</span> (variables[i].slotID == src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1b0cc0e72b434224e2f804cbe0f20485">coordVarID</a>) {
<a name="l01381"></a>01381      rc = <a class="code" href="group__Mesh.html#gf9c8eec4537a70152e562330fd1ac5a7" title="Return the vertex coordinates of the mesh as a variable.">fc_getMeshCoordsAsVariable</a>(*new_mesh, &amp;new_variable);
<a name="l01382"></a>01382      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01383"></a>01383        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create copy of coords variable"</span>);
<a name="l01384"></a>01384        <span class="keywordflow">return</span> rc;
<a name="l01385"></a>01385      }
<a name="l01386"></a>01386       }
<a name="l01387"></a>01387       <span class="keywordflow">else</span> { <span class="comment">// normal path for variables</span>
<a name="l01388"></a>01388      <span class="keywordtype">int</span> numDataPoint, numComp, new_numDataPoint, size;
<a name="l01389"></a>01389      <span class="keywordtype">char</span>* <a class="code" href="subsetter_8c.html#4b703ba1f7a1288de40089aa611b9abf">var_name</a>;
<a name="l01390"></a>01390      <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> var_assoc;
<a name="l01391"></a>01391      <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype;
<a name="l01392"></a>01392      <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype;
<a name="l01393"></a>01393      <span class="keywordtype">void</span>* src_data, *new_data;
<a name="l01394"></a>01394       
<a name="l01395"></a>01395      <span class="comment">// make the variable</span>
<a name="l01396"></a>01396      rc = <a class="code" href="group__Variable.html#g233584b319c5dd90a13582fc9ac3484e" title="Return name of a variable.">fc_getVariableName</a>(variables[i], &amp;var_name);
<a name="l01397"></a>01397      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01398"></a>01398        <span class="keywordflow">return</span> rc;
<a name="l01399"></a>01399      rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(*new_mesh, var_name, &amp;new_variable);
<a name="l01400"></a>01400      free(var_name);
<a name="l01401"></a>01401      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01402"></a>01402        <span class="keywordflow">return</span> rc;
<a name="l01403"></a>01403 
<a name="l01404"></a>01404      <span class="comment">// get the original data</span>
<a name="l01405"></a>01405      rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(variables[i], &amp;numDataPoint, &amp;numComp, 
<a name="l01406"></a>01406                     &amp;var_assoc, &amp;mathtype, &amp;datatype);
<a name="l01407"></a>01407      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01408"></a>01408        <span class="keywordflow">return</span> rc;
<a name="l01409"></a>01409      <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(variables[i], &amp;src_data);
<a name="l01410"></a>01410      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01411"></a>01411        <span class="keywordflow">return</span> rc;
<a name="l01412"></a>01412 
<a name="l01413"></a>01413      <span class="comment">// create subset of data</span>
<a name="l01414"></a>01414      rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(*new_mesh, var_assoc, &amp;new_numDataPoint);
<a name="l01415"></a>01415      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01416"></a>01416        <span class="keywordflow">return</span> rc;
<a name="l01417"></a>01417      size = <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(datatype)*numComp;
<a name="l01418"></a>01418      new_data = malloc(new_numDataPoint*size);
<a name="l01419"></a>01419      <span class="keywordflow">if</span> (new_data == NULL) {
<a name="l01420"></a>01420        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01421"></a>01421        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01422"></a>01422      }
<a name="l01423"></a>01423      <span class="keywordflow">switch</span> (var_assoc) {
<a name="l01424"></a>01424      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>:   LUNewToOld = vertLUNewToOld;   <span class="keywordflow">break</span>;
<a name="l01425"></a>01425      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>:     LUNewToOld = edgeLUNewToOld;   <span class="keywordflow">break</span>;
<a name="l01426"></a>01426      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:     LUNewToOld = faceLUNewToOld;   <span class="keywordflow">break</span>;
<a name="l01427"></a>01427      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>:  LUNewToOld = elemLUNewToOld;   <span class="keywordflow">break</span>;
<a name="l01428"></a>01428      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>:    LUNewToOld = wholeLUNewToOld;  <span class="keywordflow">break</span>;
<a name="l01429"></a>01429      <span class="keywordflow">default</span>:
<a name="l01430"></a>01430        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Should never reach this point!"</span>);
<a name="l01431"></a>01431        <span class="keywordflow">return</span> rc;
<a name="l01432"></a>01432      }
<a name="l01433"></a>01433      <span class="keywordflow">for</span> (j = 0; j &lt; new_numDataPoint; j++)
<a name="l01434"></a>01434        memcpy((<span class="keywordtype">char</span>*)new_data + j*size, 
<a name="l01435"></a>01435            (<span class="keywordtype">char</span>*)src_data + LUNewToOld[j]*size, size);
<a name="l01436"></a>01436      
<a name="l01437"></a>01437      <span class="comment">// set the data</span>
<a name="l01438"></a>01438      rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(new_variable, new_numDataPoint, numComp, 
<a name="l01439"></a>01439                        var_assoc, mathtype, datatype, new_data);
<a name="l01440"></a>01440      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01441"></a>01441        <span class="keywordflow">return</span> rc;
<a name="l01442"></a>01442       }
<a name="l01443"></a>01443     }
<a name="l01444"></a>01444     free(variables);
<a name="l01445"></a>01445   } <span class="keywordflow">else</span> {
<a name="l01446"></a>01446     free(variables);
<a name="l01447"></a>01447   }
<a name="l01448"></a>01448 
<a name="l01449"></a>01449   
<a name="l01450"></a>01450   <span class="keywordflow">if</span> (doCopySeqVar){
<a name="l01451"></a>01451     <span class="comment">// copy the sequence vars</span>
<a name="l01452"></a>01452     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++) {
<a name="l01453"></a>01453       <span class="keywordtype">int</span> numStep;
<a name="l01454"></a>01454       <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> src_seq, dest_seq;
<a name="l01455"></a>01455       <span class="keywordtype">char</span>* var_name;
<a name="l01456"></a>01456       
<a name="l01457"></a>01457       <span class="comment">// look for appropriate sequence on the destination dataset</span>
<a name="l01458"></a>01458       rc = <a class="code" href="group__Variable.html#g314a992ec5ba07d7075f1172b13ef166" title="Get the parent sequence of a sequence variable.">fc_getSequenceFromSeqVariable</a>(numStepPerSeqVar[i], seqVars[i],
<a name="l01459"></a>01459                           &amp;src_seq);
<a name="l01460"></a>01460       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01461"></a>01461      <span class="keywordflow">return</span> rc;
<a name="l01462"></a>01462       dest_seq = <a class="code" href="group__Handles.html#g0a14f0b308f914048dba4a54e6dc36ea" title="Null (default) sequence handle.">FC_NULL_SEQUENCE</a>;
<a name="l01463"></a>01463       <span class="comment">// if we are in the same dataset, reuse the same sequence</span>
<a name="l01464"></a>01464       <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_ds, src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>)) 
<a name="l01465"></a>01465      dest_seq = src_seq;
<a name="l01466"></a>01466       <span class="keywordflow">else</span> { <span class="comment">// look for an appropriate sequence in dest_ds</span>
<a name="l01467"></a>01467      <span class="keywordtype">int</span> dest_numSequence, src_numStep, dest_numStep;
<a name="l01468"></a>01468      <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> *dest_sequences;
<a name="l01469"></a>01469      <span class="keywordtype">char</span>* src_name, *dest_name;
<a name="l01470"></a>01470      <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> src_dataType, dest_dataType;
<a name="l01471"></a>01471      <span class="keywordtype">void</span>* src_coords_p, *dest_coords_p;
<a name="l01472"></a>01472 
<a name="l01473"></a>01473      <span class="comment">// collect src sequence info      </span>
<a name="l01474"></a>01474      rc = <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(src_seq, &amp;src_name);
<a name="l01475"></a>01475      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01476"></a>01476        <span class="keywordflow">return</span> rc;
<a name="l01477"></a>01477      rc = <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(src_seq, &amp;src_numStep, &amp;src_dataType); 
<a name="l01478"></a>01478      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01479"></a>01479        <span class="keywordflow">return</span> rc;
<a name="l01480"></a>01480      rc = <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(src_seq, &amp;src_coords_p);
<a name="l01481"></a>01481      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01482"></a>01482        <span class="keywordflow">return</span> rc;
<a name="l01483"></a>01483      
<a name="l01484"></a>01484      <span class="comment">// compare to dest sequences</span>
<a name="l01485"></a>01485      rc = <a class="code" href="group__Sequence.html#g0ad1217500f245d78aaad5c79f960ba1" title="Get the sequences in a dataset.">fc_getSequences</a>(dest_ds, &amp;dest_numSequence, &amp;dest_sequences);
<a name="l01486"></a>01486      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01487"></a>01487        <span class="keywordflow">return</span> rc;
<a name="l01488"></a>01488      <span class="keywordflow">for</span> (j = 0; j &lt; dest_numSequence; j++) {
<a name="l01489"></a>01489        rc = <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(dest_sequences[j], &amp;dest_name);
<a name="l01490"></a>01490        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01491"></a>01491          <span class="keywordflow">return</span> rc;
<a name="l01492"></a>01492        rc = <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(dest_sequences[j], &amp;dest_numStep,
<a name="l01493"></a>01493                       &amp;dest_dataType); 
<a name="l01494"></a>01494        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01495"></a>01495          <span class="keywordflow">return</span> rc;
<a name="l01496"></a>01496        rc = <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(dest_sequences[j], &amp;dest_coords_p);
<a name="l01497"></a>01497        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01498"></a>01498          <span class="keywordflow">return</span> rc;
<a name="l01499"></a>01499        <span class="comment">// compare (?checking actual coords values might be too stringent)</span>
<a name="l01500"></a>01500        <span class="keywordflow">if</span> (!strcmp(dest_name, src_name) &amp;&amp; dest_numStep == src_numStep &amp;&amp; 
<a name="l01501"></a>01501            dest_dataType == src_dataType &amp;&amp; 
<a name="l01502"></a>01502            !memcmp(dest_coords_p, src_coords_p, 
<a name="l01503"></a>01503                 <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(src_dataType))) {
<a name="l01504"></a>01504          free(dest_name);
<a name="l01505"></a>01505          <span class="comment">// passed all tests, this is the match</span>
<a name="l01506"></a>01506          dest_seq = dest_sequences[j];
<a name="l01507"></a>01507          <span class="keywordflow">break</span>;
<a name="l01508"></a>01508        }
<a name="l01509"></a>01509        free(dest_name);
<a name="l01510"></a>01510      }
<a name="l01511"></a>01511      free(dest_sequences);
<a name="l01512"></a>01512      free(src_name);
<a name="l01513"></a>01513       }
<a name="l01514"></a>01514       <span class="comment">// if failed to find one, just copy it</span>
<a name="l01515"></a>01515       <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_seq, <a class="code" href="group__Handles.html#g0a14f0b308f914048dba4a54e6dc36ea" title="Null (default) sequence handle.">FC_NULL_SEQUENCE</a>)) {
<a name="l01516"></a>01516      rc = <a class="code" href="group__Sequence.html#g75c324c79f7f053ef9e7c568dcb7bc5b" title="Copy a sequence.">fc_copySequence</a>(src_seq, dest_ds, NULL, &amp;dest_seq);
<a name="l01517"></a>01517      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01518"></a>01518        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy sequence needed for seqVar"</span>);
<a name="l01519"></a>01519        <span class="keywordflow">return</span> rc;
<a name="l01520"></a>01520      }
<a name="l01521"></a>01521       }
<a name="l01522"></a>01522 
<a name="l01523"></a>01523       <span class="comment">// make the seq variable</span>
<a name="l01524"></a>01524       rc = <a class="code" href="group__Variable.html#g233584b319c5dd90a13582fc9ac3484e" title="Return name of a variable.">fc_getVariableName</a>(seqVars[i][0], &amp;var_name);
<a name="l01525"></a>01525       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01526"></a>01526      <span class="keywordflow">return</span> rc;
<a name="l01527"></a>01527       rc = <a class="code" href="group__Variable.html#g05d5098e68c1761ac851b2509dfbea70" title="Create a new sequence variable.">fc_createSeqVariable</a>(*new_mesh, dest_seq, var_name, &amp;numStep,
<a name="l01528"></a>01528                     &amp;new_seqVar);
<a name="l01529"></a>01529       free(var_name);
<a name="l01530"></a>01530       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01531"></a>01531      <span class="keywordflow">return</span> rc;
<a name="l01532"></a>01532       
<a name="l01533"></a>01533       <span class="comment">// set data on steps</span>
<a name="l01534"></a>01534       <span class="keywordflow">for</span> (j = 0; j &lt; numStepPerSeqVar[i]; j++) {
<a name="l01535"></a>01535      <span class="keywordtype">int</span> numDataPoint, numComp, new_numDataPoint, size;
<a name="l01536"></a>01536      <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> var_assoc;
<a name="l01537"></a>01537      <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype;
<a name="l01538"></a>01538      <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype;
<a name="l01539"></a>01539      <span class="keywordtype">void</span>* src_data, *new_data;
<a name="l01540"></a>01540 
<a name="l01541"></a>01541      <span class="comment">// get the original data</span>
<a name="l01542"></a>01542      rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(seqVars[i][j], &amp;numDataPoint, &amp;numComp, 
<a name="l01543"></a>01543                     &amp;var_assoc, &amp;mathtype, &amp;datatype);
<a name="l01544"></a>01544      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01545"></a>01545        <span class="keywordflow">return</span> rc;
<a name="l01546"></a>01546      <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(seqVars[i][j], &amp;src_data);
<a name="l01547"></a>01547      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01548"></a>01548        <span class="keywordflow">return</span> rc;
<a name="l01549"></a>01549     
<a name="l01550"></a>01550      <span class="comment">// create subset of data</span>
<a name="l01551"></a>01551      rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(*new_mesh, var_assoc, &amp;new_numDataPoint);
<a name="l01552"></a>01552      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01553"></a>01553        <span class="keywordflow">return</span> rc;
<a name="l01554"></a>01554      size = <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(datatype)*numComp;
<a name="l01555"></a>01555      new_data = malloc(new_numDataPoint*size);
<a name="l01556"></a>01556      <span class="keywordflow">if</span> (new_data == NULL) {
<a name="l01557"></a>01557        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01558"></a>01558        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01559"></a>01559      }
<a name="l01560"></a>01560      <span class="keywordflow">switch</span> (var_assoc) {
<a name="l01561"></a>01561      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>:   LUNewToOld = vertLUNewToOld;   <span class="keywordflow">break</span>;
<a name="l01562"></a>01562      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>:     LUNewToOld = edgeLUNewToOld;   <span class="keywordflow">break</span>;
<a name="l01563"></a>01563      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:     LUNewToOld = faceLUNewToOld;   <span class="keywordflow">break</span>;
<a name="l01564"></a>01564      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>:  LUNewToOld = elemLUNewToOld;   <span class="keywordflow">break</span>;
<a name="l01565"></a>01565      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>:    LUNewToOld = wholeLUNewToOld;  <span class="keywordflow">break</span>;
<a name="l01566"></a>01566      <span class="keywordflow">default</span>:
<a name="l01567"></a>01567        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Should never reach this point!"</span>);
<a name="l01568"></a>01568        <span class="keywordflow">return</span> rc;
<a name="l01569"></a>01569      }
<a name="l01570"></a>01570      <span class="keywordflow">for</span> (k = 0; k &lt; new_numDataPoint; k++)
<a name="l01571"></a>01571        memcpy((<span class="keywordtype">char</span>*)new_data + k*size, 
<a name="l01572"></a>01572            (<span class="keywordtype">char</span>*)src_data + LUNewToOld[k]*size, size);
<a name="l01573"></a>01573      
<a name="l01574"></a>01574      <span class="comment">// set the data</span>
<a name="l01575"></a>01575      rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(new_seqVar[j], new_numDataPoint, numComp, 
<a name="l01576"></a>01576                        var_assoc, mathtype, datatype, new_data);
<a name="l01577"></a>01577      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01578"></a>01578        <span class="keywordflow">return</span> rc;
<a name="l01579"></a>01579       }
<a name="l01580"></a>01580       free(new_seqVar);
<a name="l01581"></a>01581       free(seqVars[i]);
<a name="l01582"></a>01582     }
<a name="l01583"></a>01583     free(numStepPerSeqVar);
<a name="l01584"></a>01584     free(seqVars);
<a name="l01585"></a>01585   } <span class="keywordflow">else</span> {
<a name="l01586"></a>01586     <span class="keywordflow">for</span>(i = 0; i &lt; numSeqVar; i++)
<a name="l01587"></a>01587       free(seqVars[i]);
<a name="l01588"></a>01588     free(numStepPerSeqVar);
<a name="l01589"></a>01589     free(seqVars);
<a name="l01590"></a>01590   }
<a name="l01591"></a>01591 
<a name="l01592"></a>01592 
<a name="l01593"></a>01593 
<a name="l01594"></a>01594   <span class="comment">// copy the sequence subsets</span>
<a name="l01595"></a>01595   <span class="keywordflow">if</span> (doCopySeqSubset){
<a name="l01596"></a>01596     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqSub; i++) {
<a name="l01597"></a>01597       <span class="keywordtype">int</span> numStep;
<a name="l01598"></a>01598       <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> src_seq, dest_seq;
<a name="l01599"></a>01599       <span class="keywordtype">char</span>* sub_name;
<a name="l01600"></a>01600       
<a name="l01601"></a>01601       <span class="comment">// look for appropriate sequence on the destination dataset</span>
<a name="l01602"></a>01602       rc = <a class="code" href="group__Subset.html#g4d796035b6229c73cc05488aae16c5bd" title="Get the parent sequence of a seq subset.">fc_getSequenceFromSeqSubset</a>(numStepPerSeqSub[i], seqSubs[i],
<a name="l01603"></a>01603                                        &amp;src_seq);
<a name="l01604"></a>01604       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01605"></a>01605      <span class="keywordflow">return</span> rc;
<a name="l01606"></a>01606       dest_seq = <a class="code" href="group__Handles.html#g0a14f0b308f914048dba4a54e6dc36ea" title="Null (default) sequence handle.">FC_NULL_SEQUENCE</a>;
<a name="l01607"></a>01607       <span class="comment">// if we are in the same dataset, reuse the same sequence</span>
<a name="l01608"></a>01608       <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_ds, src_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>)) 
<a name="l01609"></a>01609      dest_seq = src_seq;
<a name="l01610"></a>01610       <span class="keywordflow">else</span> { <span class="comment">// look for an appropriate sequence in dest_ds</span>
<a name="l01611"></a>01611      <span class="keywordtype">int</span> dest_numSequence, src_numStep, dest_numStep;
<a name="l01612"></a>01612      <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> *dest_sequences;
<a name="l01613"></a>01613      <span class="keywordtype">char</span>* src_name, *dest_name;
<a name="l01614"></a>01614      <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> src_dataType, dest_dataType;
<a name="l01615"></a>01615      <span class="keywordtype">void</span>* src_coords_p, *dest_coords_p;
<a name="l01616"></a>01616      
<a name="l01617"></a>01617      <span class="comment">// collect src sequence info      </span>
<a name="l01618"></a>01618      rc = <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(src_seq, &amp;src_name);
<a name="l01619"></a>01619      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01620"></a>01620        <span class="keywordflow">return</span> rc;
<a name="l01621"></a>01621      rc = <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(src_seq, &amp;src_numStep, &amp;src_dataType); 
<a name="l01622"></a>01622      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01623"></a>01623        <span class="keywordflow">return</span> rc;
<a name="l01624"></a>01624      rc = <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(src_seq, &amp;src_coords_p);
<a name="l01625"></a>01625      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01626"></a>01626        <span class="keywordflow">return</span> rc;
<a name="l01627"></a>01627      
<a name="l01628"></a>01628      <span class="comment">// compare to dest sequences</span>
<a name="l01629"></a>01629      rc = <a class="code" href="group__Sequence.html#g0ad1217500f245d78aaad5c79f960ba1" title="Get the sequences in a dataset.">fc_getSequences</a>(dest_ds, &amp;dest_numSequence, &amp;dest_sequences);
<a name="l01630"></a>01630      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01631"></a>01631        <span class="keywordflow">return</span> rc;
<a name="l01632"></a>01632      <span class="keywordflow">for</span> (j = 0; j &lt; dest_numSequence; j++) {
<a name="l01633"></a>01633        rc = <a class="code" href="group__Sequence.html#g94959dc695412dd18bd1e968b1ce3d59" title="Return name of a sequence.">fc_getSequenceName</a>(dest_sequences[j], &amp;dest_name);
<a name="l01634"></a>01634        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01635"></a>01635          <span class="keywordflow">return</span> rc;
<a name="l01636"></a>01636        rc = <a class="code" href="group__Sequence.html#g39b5198d7c58288101f909fac5569f71" title="Get information about a sequence.">fc_getSequenceInfo</a>(dest_sequences[j], &amp;dest_numStep,
<a name="l01637"></a>01637                       &amp;dest_dataType); 
<a name="l01638"></a>01638        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01639"></a>01639          <span class="keywordflow">return</span> rc;
<a name="l01640"></a>01640        rc = <a class="code" href="group__Sequence.html#ga88160e25be202c8de18ac89edf876c6" title="Get sequence coordinates.">fc_getSequenceCoordsPtr</a>(dest_sequences[j], &amp;dest_coords_p);
<a name="l01641"></a>01641        <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01642"></a>01642          <span class="keywordflow">return</span> rc;
<a name="l01643"></a>01643        <span class="comment">// compare (?checking actual coords values might be too stringent)</span>
<a name="l01644"></a>01644        <span class="keywordflow">if</span> (!strcmp(dest_name, src_name) &amp;&amp; dest_numStep == src_numStep &amp;&amp; 
<a name="l01645"></a>01645            dest_dataType == src_dataType &amp;&amp; 
<a name="l01646"></a>01646            !memcmp(dest_coords_p, src_coords_p, 
<a name="l01647"></a>01647                 <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(src_dataType))) {
<a name="l01648"></a>01648          free(dest_name);
<a name="l01649"></a>01649          <span class="comment">// passed all tests, this is the match</span>
<a name="l01650"></a>01650          dest_seq = dest_sequences[j];
<a name="l01651"></a>01651          <span class="keywordflow">break</span>;
<a name="l01652"></a>01652        }
<a name="l01653"></a>01653        free(dest_name);
<a name="l01654"></a>01654      }
<a name="l01655"></a>01655      free(dest_sequences);
<a name="l01656"></a>01656      free(src_name);
<a name="l01657"></a>01657       }
<a name="l01658"></a>01658       <span class="comment">// if failed to find one, just copy it</span>
<a name="l01659"></a>01659       <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_seq, <a class="code" href="group__Handles.html#g0a14f0b308f914048dba4a54e6dc36ea" title="Null (default) sequence handle.">FC_NULL_SEQUENCE</a>)) {
<a name="l01660"></a>01660      rc = <a class="code" href="group__Sequence.html#g75c324c79f7f053ef9e7c568dcb7bc5b" title="Copy a sequence.">fc_copySequence</a>(src_seq, dest_ds, NULL, &amp;dest_seq);
<a name="l01661"></a>01661      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01662"></a>01662        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to copy sequence needed for seqVar"</span>);
<a name="l01663"></a>01663        <span class="keywordflow">return</span> rc;
<a name="l01664"></a>01664      }
<a name="l01665"></a>01665       }
<a name="l01666"></a>01666 
<a name="l01667"></a>01667       <span class="comment">// make the seq sub</span>
<a name="l01668"></a>01668       rc = <a class="code" href="group__Subset.html#g429e404a267e2f574e2578aa5d0aaa35" title="Get subset name.">fc_getSubsetName</a>(seqSubs[i][0], &amp;sub_name);
<a name="l01669"></a>01669       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01670"></a>01670      <span class="keywordflow">return</span> rc;
<a name="l01671"></a>01671       rc = <a class="code" href="group__Subset.html#g7e34b0e8a2f9d42c44f0ee4ea00f5e8a" title="Get subset&amp;#39;s association type.">fc_getSubsetAssociationType</a>(seqSubs[i][0], &amp;subset_assoc);
<a name="l01672"></a>01672       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01673"></a>01673      <span class="keywordflow">return</span> rc;
<a name="l01674"></a>01674       rc = <a class="code" href="group__Subset.html#g191b1ead181046000179a07f01f4c75b" title="Create a new sequence subset on a specified mesh.">fc_createSeqSubset</a>(*new_mesh, dest_seq, sub_name, subset_assoc, &amp;numStep,
<a name="l01675"></a>01675                               &amp;new_seqSub);
<a name="l01676"></a>01676       free(sub_name);
<a name="l01677"></a>01677       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01678"></a>01678      <span class="keywordflow">return</span> rc;
<a name="l01679"></a>01679       
<a name="l01680"></a>01680       <span class="comment">// set data on steps</span>
<a name="l01681"></a>01681       <span class="keywordflow">for</span> (j = 0; j &lt; numStepPerSeqSub[i]; j++) {
<a name="l01682"></a>01682      <span class="keywordtype">int</span> numMember, *memberIDs;
<a name="l01683"></a>01683      
<a name="l01684"></a>01684      <span class="comment">// get the original data</span>
<a name="l01685"></a>01685      <span class="comment">// Add the members that are in the new subset (i.e. have a new ID)</span>
<a name="l01686"></a>01686      <span class="keywordflow">switch</span> (subset_assoc) {
<a name="l01687"></a>01687      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>:   LUOldToNew = vertLUOldToNew;   <span class="keywordflow">break</span>;
<a name="l01688"></a>01688      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>:     LUOldToNew = edgeLUOldToNew;   <span class="keywordflow">break</span>;
<a name="l01689"></a>01689      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:     LUOldToNew = faceLUOldToNew;   <span class="keywordflow">break</span>;
<a name="l01690"></a>01690      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>:  LUOldToNew = elemLUOldToNew;   <span class="keywordflow">break</span>;
<a name="l01691"></a>01691      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>:    LUOldToNew = wholeLUOldToNew;  <span class="keywordflow">break</span>;
<a name="l01692"></a>01692      <span class="keywordflow">default</span>:
<a name="l01693"></a>01693        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Should never reach this point!"</span>);
<a name="l01694"></a>01694        <span class="keywordflow">return</span> rc;
<a name="l01695"></a>01695      }
<a name="l01696"></a>01696      rc = <a class="code" href="group__Subset.html#g6cebfda6e20e2a518636838b170185da" title="Get a copy of subset members as array.">fc_getSubsetMembersAsArray</a>(seqSubs[i][j], &amp;numMember, &amp;memberIDs);
<a name="l01697"></a>01697      <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01698"></a>01698        <span class="keywordflow">return</span> rc;
<a name="l01699"></a>01699      <span class="keywordflow">for</span> (k = 0; k &lt; numMember; k++) {
<a name="l01700"></a>01700        <span class="keywordflow">if</span> (LUOldToNew[memberIDs[k]] &gt; -1) {
<a name="l01701"></a>01701          rc = <a class="code" href="group__Subset.html#g5ed37876a6f144458716efed8cb78dbe" title="Add member to a subset.">fc_addMemberToSubset</a>(new_seqSub[j], LUOldToNew[memberIDs[k]]);
<a name="l01702"></a>01702          <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l01703"></a>01703            <span class="keywordflow">return</span> rc;
<a name="l01704"></a>01704        }
<a name="l01705"></a>01705      }
<a name="l01706"></a>01706      <span class="keywordflow">if</span> (memberIDs) free(memberIDs); <span class="comment">//could have been empty subset</span>
<a name="l01707"></a>01707       }
<a name="l01708"></a>01708       free(new_seqSub);
<a name="l01709"></a>01709       free(seqSubs[i]);
<a name="l01710"></a>01710     }
<a name="l01711"></a>01711     free(numStepPerSeqSub);
<a name="l01712"></a>01712     free(seqSubs);
<a name="l01713"></a>01713   } <span class="keywordflow">else</span> {
<a name="l01714"></a>01714     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqSub; i++)
<a name="l01715"></a>01715       free(seqSubs[i]);
<a name="l01716"></a>01716     free(numStepPerSeqSub);
<a name="l01717"></a>01717     free(seqSubs);
<a name="l01718"></a>01718   }
<a name="l01719"></a>01719 
<a name="l01720"></a>01720   
<a name="l01721"></a>01721 
<a name="l01722"></a>01722   <span class="comment">// cleanup</span>
<a name="l01723"></a>01723   <span class="keywordflow">if</span> (vertLUOldToNew) free(vertLUOldToNew);
<a name="l01724"></a>01724   <span class="keywordflow">if</span> (edgeLUOldToNew) free(edgeLUOldToNew);
<a name="l01725"></a>01725   <span class="keywordflow">if</span> (faceLUOldToNew) free(faceLUOldToNew);
<a name="l01726"></a>01726   <span class="keywordflow">if</span> (elemLUOldToNew) free(elemLUOldToNew);
<a name="l01727"></a>01727   <span class="keywordflow">if</span> (edgeLUNewToOld) free(edgeLUNewToOld);
<a name="l01728"></a>01728   <span class="keywordflow">if</span> (faceLUNewToOld) free(faceLUNewToOld);
<a name="l01729"></a>01729   <span class="keywordflow">if</span> (elemmap == NULL) free(elemLUNewToOld);
<a name="l01730"></a>01730   <span class="keywordflow">if</span> (vertmap == NULL) free(vertLUNewToOld);
<a name="l01731"></a>01731   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01732"></a>01732 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g7e846c58fe79c1f2bac817a2b7ed692e"></a><!-- doxytag: member="mesh.c::fc_deleteMesh" ref="g7e846c58fe79c1f2bac817a2b7ed692e" args="(FC_Mesh mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_deleteMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a mesh. 
<p>
<b>Description:</b> <p>
Call when this mesh is no longer needed. This automatically deletes all of the mesh's subsets and variables.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/01/03 WSK Changed so it removes an uncommitted mesh form the owning dataset's meshID list.</li><li>12/03/03 RM, added more input checking, if mesh is FC_NULL_MESH, then do nothing and return success (issue warning if <a class="el" href="group__Library.html#gd5ab439275b301213065adfc55e04798" title="Get the current verbosity level of the library.">fc_getLibraryVerbosity()</a>).</li><li>9/9/04 WSK changed name to delete. Changed behavior so that delete always deletes no matter whether on disk or not.</li><li>03/04/08 ACG added deleting seq subsets </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02626">2626</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06101">_fc_deleteMeshSlot()</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="subset_8c-source.html#l02543">fc_deleteSeqSubset()</a>, <a class="el" href="variable_8c-source.html#l05062">fc_deleteSeqVariable()</a>, <a class="el" href="subset_8c-source.html#l02482">fc_deleteSubset()</a>, <a class="el" href="variable_8c-source.html#l04980">fc_deleteVariable()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="subset_8c-source.html#l01313">fc_getSeqSubsets()</a>, <a class="el" href="variable_8c-source.html#l03637">fc_getSeqVariables()</a>, <a class="el" href="subset_8c-source.html#l01253">fc_getSubsets()</a>, <a class="el" href="variable_8c-source.html#l03573">fc_getVariables()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00093">_FC_DsSlot::meshIDs</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="datasetP_8h-source.html#l00092">_FC_DsSlot::numMesh</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l01748">fc_createSimpleHexMesh()</a>, <a class="el" href="mesh_8c-source.html#l01949">fc_createSphereMesh()</a>, <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="elemdeath__ex1_8c-source.html#l00147">main()</a>, and <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02628"></a>02628   {
<a name="l02629"></a>02629   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l02630"></a>02630   <span class="keywordtype">int</span> i, j;
<a name="l02631"></a>02631   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02632"></a>02632   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l02633"></a>02633   <span class="keywordtype">int</span> numSubset, numVar, numSeqVar, *numStepPerVar, numSeqSub, *numStepPerSub;
<a name="l02634"></a>02634   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a> *subsets, **seqSubsets;
<a name="l02635"></a>02635   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *variables, **seqVariables;
<a name="l02636"></a>02636 
<a name="l02637"></a>02637   <span class="comment">// special case: deleting a null handle is not an error</span>
<a name="l02638"></a>02638   <span class="keywordflow">if</span> ( <a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(mesh, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>)) {
<a name="l02639"></a>02639     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Deleting FC_NULL_MESH"</span>);
<a name="l02640"></a>02640     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02641"></a>02641   }
<a name="l02642"></a>02642 
<a name="l02643"></a>02643   <span class="comment">// check input</span>
<a name="l02644"></a>02644   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l02645"></a>02645   <span class="keywordflow">if</span> (meshSlot == NULL) {
<a name="l02646"></a>02646     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02647"></a>02647     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02648"></a>02648   }
<a name="l02649"></a>02649  
<a name="l02650"></a>02650   <span class="comment">// log message</span>
<a name="l02651"></a>02651   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Deleting mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02652"></a>02652 
<a name="l02653"></a>02653   <span class="comment">// delete member subsets</span>
<a name="l02654"></a>02654   rc = <a class="code" href="group__Subset.html#gb12aea784bf43ec6a29a8e51a3c0da51" title="Get the subsets in a mesh.">fc_getSubsets</a>(mesh, &amp;numSubset, &amp;subsets);
<a name="l02655"></a>02655   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02656"></a>02656     <span class="keywordflow">return</span> rc;
<a name="l02657"></a>02657   <span class="keywordflow">for</span> (i = 0; i &lt; numSubset; i++) {
<a name="l02658"></a>02658     rc = <a class="code" href="group__Subset.html#g550d0636e4f35c29d6dbc427b3165a24" title="Delete a subset.">fc_deleteSubset</a>(subsets[i]);
<a name="l02659"></a>02659     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02660"></a>02660       <span class="keywordflow">return</span> rc;
<a name="l02661"></a>02661   }
<a name="l02662"></a>02662   free(subsets);
<a name="l02663"></a>02663 
<a name="l02664"></a>02664   <span class="comment">// delete member seq subs</span>
<a name="l02665"></a>02665   rc = <a class="code" href="group__Subset.html#g17815a36b74d5568de04398ca4bd4bf4" title="Get the seq subsets in a mesh.">fc_getSeqSubsets</a>(mesh, &amp;numSeqSub, &amp;numStepPerSub, &amp;seqSubsets);
<a name="l02666"></a>02666   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02667"></a>02667     <span class="keywordflow">return</span> rc;
<a name="l02668"></a>02668   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqSub; i++) {
<a name="l02669"></a>02669     rc = <a class="code" href="group__Subset.html#ga57c2d0541790ffc5c0ba2686290f0b3" title="Delete a seq subset.">fc_deleteSeqSubset</a>(numStepPerSub[i], seqSubsets[i]);
<a name="l02670"></a>02670     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02671"></a>02671       <span class="keywordflow">return</span> rc;
<a name="l02672"></a>02672   }
<a name="l02673"></a>02673   free(numStepPerSub);
<a name="l02674"></a>02674   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqSub; i++)
<a name="l02675"></a>02675     free(seqSubsets[i]);
<a name="l02676"></a>02676   free(seqSubsets);
<a name="l02677"></a>02677 
<a name="l02678"></a>02678   <span class="comment">// delete member variables</span>
<a name="l02679"></a>02679   rc = <a class="code" href="group__Variable.html#ga96777675a667d79871c93c54729bde4" title="Get the variables in a mesh.">fc_getVariables</a>(mesh, &amp;numVar, &amp;variables);
<a name="l02680"></a>02680   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02681"></a>02681     <span class="keywordflow">return</span> rc;
<a name="l02682"></a>02682   <span class="keywordflow">for</span> (i = 0; i &lt; numVar; i++) { 
<a name="l02683"></a>02683     rc = <a class="code" href="group__Variable.html#g1de53216125d0074933ecf6006f1796a" title="Delete a variable.">fc_deleteVariable</a>(variables[i]);
<a name="l02684"></a>02684     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02685"></a>02685       <span class="keywordflow">return</span> rc;
<a name="l02686"></a>02686   }
<a name="l02687"></a>02687   free(variables);
<a name="l02688"></a>02688   
<a name="l02689"></a>02689   <span class="comment">// delete member seq vars</span>
<a name="l02690"></a>02690   rc = <a class="code" href="group__Variable.html#g01bf1b0d9b1de983115a461216039449" title="Get the sequence variables in a mesh.">fc_getSeqVariables</a>(mesh, &amp;numSeqVar, &amp;numStepPerVar, &amp;seqVariables);
<a name="l02691"></a>02691   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02692"></a>02692     <span class="keywordflow">return</span> rc;
<a name="l02693"></a>02693   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++) {
<a name="l02694"></a>02694     rc = <a class="code" href="group__Variable.html#gef5ebe119abe1d217a216f0faad0e667" title="Delete a sequence variable.">fc_deleteSeqVariable</a>(numStepPerVar[i], seqVariables[i]);
<a name="l02695"></a>02695     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02696"></a>02696       <span class="keywordflow">return</span> rc;
<a name="l02697"></a>02697   }
<a name="l02698"></a>02698   free(numStepPerVar);
<a name="l02699"></a>02699   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++)
<a name="l02700"></a>02700     free(seqVariables[i]);
<a name="l02701"></a>02701   free(seqVariables);
<a name="l02702"></a>02702   
<a name="l02703"></a>02703   <span class="comment">// remove reference from dataset</span>
<a name="l02704"></a>02704   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>);
<a name="l02705"></a>02705   <span class="keywordflow">if</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a> == 1) {
<a name="l02706"></a>02706     free(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a>);
<a name="l02707"></a>02707     dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a> = NULL;
<a name="l02708"></a>02708     dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a> = 0;
<a name="l02709"></a>02709   }
<a name="l02710"></a>02710   <span class="keywordflow">else</span> {
<a name="l02711"></a>02711     <span class="keywordflow">for</span> (i = 0; i &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>; i++) {
<a name="l02712"></a>02712       <span class="keywordflow">if</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a>[i] == meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a9f69eb1eb640814d30ffec3d30077a5">slotID</a>)
<a name="l02713"></a>02713         <span class="keywordflow">break</span>;
<a name="l02714"></a>02714     }
<a name="l02715"></a>02715     <span class="keywordflow">for</span> (j = i+1; j &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>; j++) {
<a name="l02716"></a>02716       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a>[j - 1] = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a>[j];
<a name="l02717"></a>02717     }
<a name="l02718"></a>02718     dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>--;
<a name="l02719"></a>02719   }
<a name="l02720"></a>02720 
<a name="l02721"></a>02721   <span class="comment">// clear &amp; delete slot</span>
<a name="l02722"></a>02722   <span class="keywordflow">return</span> <a class="code" href="group__PrivateMesh.html#g5e2b75594bb7a826460e0705cb015bc4" title="Delete the mesh slot associated with the mesh handle.">_fc_deleteMeshSlot</a>(mesh);
<a name="l02723"></a>02723 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ge4b575375abe8d1d6d19f4a8c61f3ace"></a><!-- doxytag: member="mesh.c::fc_getDatasetFromMesh" ref="ge4b575375abe8d1d6d19f4a8c61f3ace" args="(FC_Mesh mesh, FC_Dataset *dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getDatasetFromMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a> *&nbsp;</td>
          <td class="paramname"> <em>dataset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the parent dataset of the mesh. 
<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return dataset = <a class="el" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941">FC_NULL_DATASET</a>, input check for dataset == NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
output - dataset handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02805">2805</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00764">FC_NULL_DATASET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02808"></a>02808   {
<a name="l02809"></a>02809   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02810"></a>02810   
<a name="l02811"></a>02811   <span class="comment">// set up default value</span>
<a name="l02812"></a>02812   <span class="keywordflow">if</span>(dataset != NULL)
<a name="l02813"></a>02813     *dataset = <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>;
<a name="l02814"></a>02814   
<a name="l02815"></a>02815   <span class="comment">// check input</span>
<a name="l02816"></a>02816   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l02817"></a>02817   <span class="keywordflow">if</span> (meshSlot == NULL || dataset == NULL) {
<a name="l02818"></a>02818     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));    
<a name="l02819"></a>02819     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02820"></a>02820   }
<a name="l02821"></a>02821   
<a name="l02822"></a>02822   <span class="comment">// log message</span>
<a name="l02823"></a>02823   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting dataset from mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02824"></a>02824   
<a name="l02825"></a>02825   <span class="comment">// return requested value</span>
<a name="l02826"></a>02826   *dataset = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>;
<a name="l02827"></a>02827   
<a name="l02828"></a>02828   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02829"></a>02829 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gb72987c2bf83a19f208df925bc8af86b"></a><!-- doxytag: member="mesh.c::fc_getMeshByName" ref="gb72987c2bf83a19f208df925bc8af86b" args="(FC_Dataset dataset, char *meshname, int *numMeshes, FC_Mesh **meshes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>meshname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numMeshes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> **&nbsp;</td>
          <td class="paramname"> <em>meshes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get all meshes with a given name from the dataset. 
<p>
<b>Description:</b> <p>
Returns all meshes on the dataset with the specified name.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>2003-MAY-30 W Koegler Moved getting mesh meta data from _fc_setupDsSlot() to here. Moved getting variable meta data to fc_openVariable().</li><li>11/25/03 RM, added default return mesh = <a class="el" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa">FC_NULL_MESH</a></li><li>11/26/03 RM, added checking for invalid mesh name, issue error if <a class="el" href="group__Library.html#gd5ab439275b301213065adfc55e04798" title="Get the current verbosity level of the library.">fc_getLibraryVerbosity()</a></li><li>12/03/03 RM added checking for parameter mesh == NULL</li><li>12/12/03 RM, eliminated _fc_lookup_meshSlot() and _fc_namematch() those input checking changed and added into this function</li><li>9/8/03 WSK, changed name and moved to dataset (to be next to fc_getMeshes)</li><li>9/21/06 ACG, now returns all meshes with matching names </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>meshname</em>&nbsp;</td><td>
input - name of mesh to get </td></tr>
<tr><td valign="top"><em>numMeshes</em>&nbsp;</td><td>
output - number of matching meshes </td></tr>
<tr><td valign="top"><em>meshes</em>&nbsp;</td><td>
output - array of mesh handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02285">2285</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06082">_fc_getMeshSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00093">_FC_DsSlot::meshIDs</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00092">_FC_DsSlot::numMesh</a>.</p>

<p>Referenced by <a class="el" href="build__ensemble_8c-source.html#l00208">getMeshByNameOrDie()</a>, <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>, and <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02290"></a>02290   {
<a name="l02291"></a>02291   <span class="keywordtype">int</span> i;
<a name="l02292"></a>02292   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l02293"></a>02293   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a> *meshSlot;
<a name="l02294"></a>02294   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh;
<a name="l02295"></a>02295 
<a name="l02296"></a>02296   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> *lmatch = NULL;
<a name="l02297"></a>02297   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l02298"></a>02298   
<a name="l02299"></a>02299   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l02300"></a>02300   <span class="keywordflow">if</span> (numMeshes)
<a name="l02301"></a>02301     *numMeshes = -1;
<a name="l02302"></a>02302   <span class="keywordflow">if</span> (meshes)
<a name="l02303"></a>02303     *meshes = NULL;
<a name="l02304"></a>02304   
<a name="l02305"></a>02305   <span class="comment">// check input</span>
<a name="l02306"></a>02306   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l02307"></a>02307   <span class="keywordflow">if</span> (dsSlot == NULL || meshname == NULL || !meshes || !numMeshes) {
<a name="l02308"></a>02308     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02309"></a>02309     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02310"></a>02310   }
<a name="l02311"></a>02311   
<a name="l02312"></a>02312   <span class="comment">// log message</span>
<a name="l02313"></a>02313   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting mesh '%s'"</span>, meshname);
<a name="l02314"></a>02314 
<a name="l02315"></a>02315   numlmatch = 0;
<a name="l02316"></a>02316   maxnumlmatch = 0;
<a name="l02317"></a>02317   
<a name="l02318"></a>02318   <span class="comment">// look for existing slots with the matching name</span>
<a name="l02319"></a>02319   <span class="keywordflow">for</span> (i = 0; i &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>; i++) {
<a name="l02320"></a>02320     meshSlot = <a class="code" href="group__PrivateMesh.html#gc021ac32931e613adb63450683845fd7" title="Get a mesh slot based on ID.">_fc_getMeshSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a>[i]);
<a name="l02321"></a>02321     <span class="keywordflow">if</span> (!strcmp(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, meshname)) {
<a name="l02322"></a>02322       <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(mesh, meshSlot);
<a name="l02323"></a>02323 
<a name="l02324"></a>02324       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l02325"></a>02325      lmatch = (<a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a>));
<a name="l02326"></a>02326      <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l02327"></a>02327        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02328"></a>02328        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02329"></a>02329      }
<a name="l02330"></a>02330      numlmatch = 1;
<a name="l02331"></a>02331      maxnumlmatch = 1;
<a name="l02332"></a>02332      lmatch[0] = mesh;
<a name="l02333"></a>02333       }<span class="keywordflow">else</span>{
<a name="l02334"></a>02334      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l02335"></a>02335        <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> *temp;
<a name="l02336"></a>02336        temp = (<a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a>*)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a>));
<a name="l02337"></a>02337        <span class="keywordflow">if</span> (temp == NULL){
<a name="l02338"></a>02338          <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02339"></a>02339          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02340"></a>02340        }
<a name="l02341"></a>02341        maxnumlmatch*=2;
<a name="l02342"></a>02342        lmatch = temp;
<a name="l02343"></a>02343      }
<a name="l02344"></a>02344      lmatch[numlmatch] = mesh;
<a name="l02345"></a>02345      numlmatch++;
<a name="l02346"></a>02346       }
<a name="l02347"></a>02347     }
<a name="l02348"></a>02348   }
<a name="l02349"></a>02349 
<a name="l02350"></a>02350   *numMeshes = numlmatch;
<a name="l02351"></a>02351   *meshes = lmatch;
<a name="l02352"></a>02352 
<a name="l02353"></a>02353   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02354"></a>02354 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gf9c8eec4537a70152e562330fd1ac5a7"></a><!-- doxytag: member="mesh.c::fc_getMeshCoordsAsVariable" ref="gf9c8eec4537a70152e562330fd1ac5a7" args="(FC_Mesh mesh, FC_Variable *coords_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshCoordsAsVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>coords_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the vertex coordinates of the mesh as a variable. 
<p>
<b>Description:</b> <p>
Returns the variable which is the coords of the mesh, creating it on the first call to this function (and returning the same handle on successive calls). The name of the variable will be 'coordinates'.<p>
The official coords variable is treated a little differently from regular variables. Calling this routine always provides a handle to the same variable. However, making a copy gives back a normal variable with the same data (it's not an official coords variable).<p>
This variable will not be written to disk when the dataset containing it is written to disk. If a copy of a mesh with a coords variable is made, the copied mesh will have an existing coords variable.<p>
<b>Modifications:</b> <ul>
<li>09/15/04 WSK, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>coords_var</em>&nbsp;</td><td>
output - variable containing coords </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03497">3497</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::coordVarID</a>, <a class="el" href="meshP_8h-source.html#l00100">_FC_MeshSlot::dim</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="variable_8c-source.html#l00286">fc_createVariable()</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l03436">fc_getMeshCoordsPtr()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00170">FC_MT_SCALAR</a>, <a class="el" href="base_8h-source.html#l00171">FC_MT_VECTOR</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00103">_FC_MeshSlot::numVertex</a>, and <a class="el" href="base_8h-source.html#l00301">FC_Variable::slotID</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, and <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03500"></a>03500   {
<a name="l03501"></a>03501   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03502"></a>03502   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathType;
<a name="l03503"></a>03503   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03504"></a>03504   <span class="keywordtype">double</span>* coords_p;
<a name="l03505"></a>03505 
<a name="l03506"></a>03506   <span class="comment">// default return</span>
<a name="l03507"></a>03507   <span class="keywordflow">if</span> (coords_var)
<a name="l03508"></a>03508     *coords_var = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l03509"></a>03509 
<a name="l03510"></a>03510   <span class="comment">// check input</span>
<a name="l03511"></a>03511   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03512"></a>03512   <span class="keywordflow">if</span> (meshSlot == NULL || coords_var == NULL) {
<a name="l03513"></a>03513     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03514"></a>03514     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03515"></a>03515   }
<a name="l03516"></a>03516   
<a name="l03517"></a>03517   <span class="comment">// log message</span>
<a name="l03518"></a>03518   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating coordinates variable for mesh '%s'"</span>, 
<a name="l03519"></a>03519                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03520"></a>03520 
<a name="l03521"></a>03521   <span class="comment">// If the coords variable already exists, return it</span>
<a name="l03522"></a>03522   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1b0cc0e72b434224e2f804cbe0f20485">coordVarID</a> &gt; -1) {
<a name="l03523"></a>03523     <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(*coords_var, <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1b0cc0e72b434224e2f804cbe0f20485">coordVarID</a>));
<a name="l03524"></a>03524     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03525"></a>03525   }
<a name="l03526"></a>03526 
<a name="l03527"></a>03527   <span class="comment">// create the variable</span>
<a name="l03528"></a>03528   rc = <a class="code" href="group__Mesh.html#gff8561557c19ae03be9ff18cc73a6823" title="Return the vertex coordinates of the mesh.">fc_getMeshCoordsPtr</a>(mesh, &amp;coords_p);
<a name="l03529"></a>03529   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03530"></a>03530     <span class="keywordflow">return</span> rc;
<a name="l03531"></a>03531   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8a59779a8f5f511a1fff4c886e8897ec">dim</a> == 1)
<a name="l03532"></a>03532     mathType = <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>;
<a name="l03533"></a>03533   <span class="keywordflow">else</span>
<a name="l03534"></a>03534     mathType = <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb207f48fe9fd9efb7bc772bbb41106e217f">FC_MT_VECTOR</a>;
<a name="l03535"></a>03535   rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(mesh, <span class="stringliteral">"coords"</span>, coords_var);
<a name="l03536"></a>03536   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03537"></a>03537     <span class="keywordflow">return</span> rc;
<a name="l03538"></a>03538   rc = <a class="code" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData</a>(*coords_var, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8a59779a8f5f511a1fff4c886e8897ec">dim</a>,
<a name="l03539"></a>03539                           <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>, mathType, <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>,
<a name="l03540"></a>03540                           (<span class="keywordtype">void</span>*)coords_p);
<a name="l03541"></a>03541   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03542"></a>03542     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l03543"></a>03543 
<a name="l03544"></a>03544   <span class="comment">// set the coord var</span>
<a name="l03545"></a>03545   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1b0cc0e72b434224e2f804cbe0f20485">coordVarID</a> = coords_var-&gt;<a class="code" href="structFC__Variable.html#b5458411865b62687ac2a9d3587ef902">slotID</a>;
<a name="l03546"></a>03546   
<a name="l03547"></a>03547   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03548"></a>03548 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gff8561557c19ae03be9ff18cc73a6823"></a><!-- doxytag: member="mesh.c::fc_getMeshCoordsPtr" ref="gff8561557c19ae03be9ff18cc73a6823" args="(FC_Mesh mesh, double **coords_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshCoordsPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double **&nbsp;</td>
          <td class="paramname"> <em>coords_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the vertex coordinates of the mesh. 
<p>
<b>Description:</b> <p>
Return an array containing the values of each vertex location. If the vertices are 2D, the array has X0, Y0, X1, Y1, etc - interleaved. If the vertices are 3D, the array has X0, Y0, Z0, X1, Y1, Z1, ... The user gets a pointer back to a shared array and should treat it as read only. To modify any of the values the user must first make a copy.<p>
Note, you can index to coordinate j of the ith vertex directly as coords[i*numDim + j];<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>coords_p</em>&nbsp;</td><td>
output - vertices. user should treat as read only </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03436">3436</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="fileio_8c-source.html#l02006">_fc_readMeshCoords()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="meshP_8h-source.html#l00112">_FC_MeshSlot::coords</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="shape_8c-source.html#l00750">_fc_getOutwardFaceNormal()</a>, <a class="el" href="geom_8c-source.html#l02256">_fc_getSubsetDiameterCore()</a>, <a class="el" href="geom_8c-source.html#l02382">_fc_getSubsetsDiameterCore()</a>, <a class="el" href="geom_8c-source.html#l05303">_fc_getSubsetsProximityCore()</a>, <a class="el" href="geom_8c-source.html#l06312">_fc_getVertexIDsWithinBoundingBoxUsingVertexBin()</a>, <a class="el" href="geom_8c-source.html#l06462">_fc_getVertexIDsWithinSphereUsingVertexBin()</a>, <a class="el" href="lsdynaio_8c-source.html#l01904">_fc_readLSDynaVariableData()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="geom_8c-source.html#l05522">fc_createMeshVertexBin()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="geom_8c-source.html#l07774">fc_doesElementContainPoint()</a>, <a class="el" href="sierra_8c-source.html#l01209">fc_evalPrestoSpotWeld()</a>, <a class="el" href="geom_8c-source.html#l00352">fc_getDisplacedMeshCoords()</a>, <a class="el" href="geom_8c-source.html#l03415">fc_getEdgeLengths()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00107">fc_getElementCenters()</a>, <a class="el" href="geom_8c-source.html#l07852">fc_getElementsThatContainPoint()</a>, <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l00686">fc_getMeshBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l02590">fc_getMeshCentroid()</a>, <a class="el" href="mesh_8c-source.html#l03497">fc_getMeshCoordsAsVariable()</a>, <a class="el" href="geom_8c-source.html#l03808">fc_getRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l00847">fc_getSubsetBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l02940">fc_getSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l04448">fc_getSurfaceNormals()</a>, <a class="el" href="geom_8c-source.html#l02734">fc_getVariableWeightedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03138">fc_getVariableWeightedSubsetCentroid()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00342">fc_makeSpanningTree()</a>, <a class="el" href="mesh_8c-source.html#l04004">fc_printMesh()</a>, <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>, <a class="el" href="geom_8c-source.html#l01223">fc_projectedElementBoundingBoxIntersection()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, <a class="el" href="mesh_8c-source.html#l02091">fc_setSphereDisplacementVariable()</a>, <a class="el" href="lib__skeleton_8c-source.html#l01519">fc_unpackSkeletonFromMesh()</a>, and <a class="el" href="ex2__bigDataAccess_8c-source.html#l00071">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03439"></a>03439   {
<a name="l03440"></a>03440   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03441"></a>03441   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03442"></a>03442 
<a name="l03443"></a>03443   <span class="comment">// default return</span>
<a name="l03444"></a>03444   <span class="keywordflow">if</span> (coords_p)
<a name="l03445"></a>03445     *coords_p = NULL;
<a name="l03446"></a>03446 
<a name="l03447"></a>03447   <span class="comment">// check input</span>
<a name="l03448"></a>03448   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03449"></a>03449   <span class="keywordflow">if</span> (meshSlot == NULL || coords_p == NULL) {
<a name="l03450"></a>03450     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03451"></a>03451     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03452"></a>03452   }
<a name="l03453"></a>03453   
<a name="l03454"></a>03454   <span class="comment">// log message</span>
<a name="l03455"></a>03455   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting coordinates for mesh '%s'"</span>, 
<a name="l03456"></a>03456                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03457"></a>03457 
<a name="l03458"></a>03458 
<a name="l03459"></a>03459   <span class="comment">// lazy fetching of coords</span>
<a name="l03460"></a>03460   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a> == NULL &amp;&amp; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l03461"></a>03461     rc = <a class="code" href="group__PrivateFileIO.html#g3c0d0ea1a2408ca2d0a1eab5057e2917" title="Read coords from file into a mesh.">_fc_readMeshCoords</a>(mesh);
<a name="l03462"></a>03462     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l03463"></a>03463       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Lazy loading of coords for mesh '%s' failed"</span>,
<a name="l03464"></a>03464                             meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03465"></a>03465       <span class="keywordflow">return</span> rc;
<a name="l03466"></a>03466     }
<a name="l03467"></a>03467   }
<a name="l03468"></a>03468 
<a name="l03469"></a>03469   <span class="comment">// fill in requested value</span>
<a name="l03470"></a>03470   *coords_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a>;
<a name="l03471"></a>03471   
<a name="l03472"></a>03472   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03473"></a>03473 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g1dbe9de126f08baea03de91a37b0258b"></a><!-- doxytag: member="mesh.c::fc_getMeshDim" ref="g1dbe9de126f08baea03de91a37b0258b" args="(FC_Mesh mesh, int *dim)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshDim           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>dim</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns dimensionality of the mesh coordinates. 
<p>
<b>Description:</b> <p>
I.e. 1D, 2D or 3D coordinates.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return dim=-1, and check input for dim=NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>dim</em>&nbsp;</td><td>
output - count of dimensions </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02953">2953</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00100">_FC_MeshSlot::dim</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="geom_8c-source.html#l02256">_fc_getSubsetDiameterCore()</a>, <a class="el" href="geom_8c-source.html#l02382">_fc_getSubsetsDiameterCore()</a>, <a class="el" href="geom_8c-source.html#l05181">_fc_getSubsetsProximityArgsTest()</a>, <a class="el" href="geom_8c-source.html#l05303">_fc_getSubsetsProximityCore()</a>, <a class="el" href="sierra_8c-source.html#l01209">fc_evalPrestoSpotWeld()</a>, <a class="el" href="geom_8c-source.html#l00956">fc_getDisplacedSubsetBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l03036">fc_getDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l00847">fc_getSubsetBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l02940">fc_getSubsetCentroid()</a>, <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>, <a class="el" href="gaplines_8c-source.html#l00240">getLinesAsVectors()</a>, <a class="el" href="gaplines_8c-source.html#l00433">main()</a>, and <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02956"></a>02956   {
<a name="l02957"></a>02957   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02958"></a>02958   
<a name="l02959"></a>02959   <span class="comment">// set up defaults</span>
<a name="l02960"></a>02960   <span class="keywordflow">if</span> (dim != NULL)
<a name="l02961"></a>02961     *dim = -1;
<a name="l02962"></a>02962   
<a name="l02963"></a>02963   <span class="comment">// check input</span>
<a name="l02964"></a>02964   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l02965"></a>02965   <span class="keywordflow">if</span> (meshSlot == NULL || dim == NULL) {
<a name="l02966"></a>02966     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02967"></a>02967     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02968"></a>02968   }
<a name="l02969"></a>02969   
<a name="l02970"></a>02970   <span class="comment">// log message</span>
<a name="l02971"></a>02971   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting topo dimensionality for mesh '%s'"</span>, 
<a name="l02972"></a>02972                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02973"></a>02973 
<a name="l02974"></a>02974   <span class="comment">// fill in requested value</span>
<a name="l02975"></a>02975   *dim = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8a59779a8f5f511a1fff4c886e8897ec">dim</a>;
<a name="l02976"></a>02976   
<a name="l02977"></a>02977   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02978"></a>02978 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gcae096882dec5f984503869f5f64acfc"></a><!-- doxytag: member="mesh.c::fc_getMeshEdgeConnsPtr" ref="gcae096882dec5f984503869f5f64acfc" args="(FC_Mesh mesh, int **conns_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshEdgeConnsPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>conns_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return edge connectivities. 
<p>
<b>Description:</b> <p>
This routine returns a pointer to the array that has the IDs of the vertices that make up the edges. The array is { Edge0Vert0 Edge0Vert1 Edge1Vert0 Edge1Vert1 ... EdgeNVert0 EdgeNVert1 }. This is a big data array and should NOT be freed by the calling program.<p>
You can index to the jth vertex of the ith edge directly as conns[i*2 + j];<p>
Note that edges may not yet exist for the mesh, and if they don't, calling this function will build them (which may take some time).<p>
<b>Modifications:</b> <ul>
<li>02/06/04 WSK, created.</li><li>09/21/04 WSK, removed args for non-big data values which can now be gotten with <a class="el" href="group__Mesh.html#g5ae1bc6adbd87df4eb017c1c521f4225" title="Get information about edges and faces in a mesh.">fc_getMeshEdgeFaceInfo()</a>. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>conns_p</em>&nbsp;</td><td>
output - edge to vertex connections, treat read only </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03571">3571</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05002">_fc_buildEdgeConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00127">_FC_MeshSlot::edgeToVertConns</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00107">_FC_MeshSlot::numEdge</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l05487">_fc_buildMeshVertexNeighborsViaEdge()</a>, <a class="el" href="mesh_8c-source.html#l04830">_fc_buildParents()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="topo_8c-source.html#l01072">_fc_getEdgeNeighbors()</a>, <a class="el" href="topo_8c-source.html#l00798">_fc_getEdgeParents()</a>, <a class="el" href="geom_8c-source.html#l03503">fc_getDisplacedEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03415">fc_getEdgeLengths()</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="mesh_8c-source.html#l04004">fc_printMesh()</a>, <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03574"></a>03574   {
<a name="l03575"></a>03575   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03576"></a>03576   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03577"></a>03577   
<a name="l03578"></a>03578   <span class="comment">// default return</span>
<a name="l03579"></a>03579   <span class="keywordflow">if</span> (conns_p)
<a name="l03580"></a>03580     *conns_p = NULL;
<a name="l03581"></a>03581 
<a name="l03582"></a>03582   <span class="comment">// check input</span>
<a name="l03583"></a>03583   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03584"></a>03584   <span class="keywordflow">if</span> (meshSlot == NULL || conns_p == NULL) {
<a name="l03585"></a>03585     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03586"></a>03586     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03587"></a>03587   }
<a name="l03588"></a>03588   
<a name="l03589"></a>03589   <span class="comment">// log message</span>
<a name="l03590"></a>03590   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting edge connectivities on mesh '%s'"</span>, 
<a name="l03591"></a>03591                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03592"></a>03592 
<a name="l03593"></a>03593   <span class="comment">// if it doesn't exist, build vertex, element &amp; neighbor stuff</span>
<a name="l03594"></a>03594   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a> == -1) {
<a name="l03595"></a>03595     rc = <a class="code" href="group__PrivateMesh.html#g92a252eecf35decc19223318cfcf6115" title="Build the edge info for the mesh.">_fc_buildEdgeConns</a>(mesh);
<a name="l03596"></a>03596     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03597"></a>03597       <span class="keywordflow">return</span> rc;
<a name="l03598"></a>03598   }
<a name="l03599"></a>03599 
<a name="l03600"></a>03600   <span class="comment">// return pointer</span>
<a name="l03601"></a>03601   *conns_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e3db7792065db1f14b14ea6539fe2a8d">edgeToVertConns</a>;
<a name="l03602"></a>03602   
<a name="l03603"></a>03603   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03604"></a>03604 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g5ae1bc6adbd87df4eb017c1c521f4225"></a><!-- doxytag: member="mesh.c::fc_getMeshEdgeFaceInfo" ref="g5ae1bc6adbd87df4eb017c1c521f4225" args="(FC_Mesh mesh, int *numEdge, int *numFace, FC_ElementType *faceType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshEdgeFaceInfo           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numEdge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numFace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *&nbsp;</td>
          <td class="paramname"> <em>faceType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get information about edges and faces in a mesh. 
<p>
<b>Description:</b> <p>
If edges and faces do not yet exist, they are built.<p>
<b>Modifications:</b> <ul>
<li>09/21/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>numEdge</em>&nbsp;</td><td>
output - number of edges </td></tr>
<tr><td valign="top"><em>numFace</em>&nbsp;</td><td>
output - number of faces </td></tr>
<tr><td valign="top"><em>faceType</em>&nbsp;</td><td>
output - face type (tri, quad or mixed) </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03099">3099</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05002">_fc_buildEdgeConns()</a>, <a class="el" href="mesh_8c-source.html#l05255">_fc_buildFaceConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00105">_FC_MeshSlot::elemType</a>, <a class="el" href="base_8h-source.html#l00119">FC_ET_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00698">fc_getElementTypeFaceType()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00107">_FC_MeshSlot::numEdge</a>, and <a class="el" href="meshP_8h-source.html#l00109">_FC_MeshSlot::numFace</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l04004">fc_printMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03104"></a>03104   {
<a name="l03105"></a>03105   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03106"></a>03106   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03107"></a>03107   
<a name="l03108"></a>03108   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l03109"></a>03109   <span class="keywordflow">if</span> (numEdge != NULL) 
<a name="l03110"></a>03110     *numEdge = -1;
<a name="l03111"></a>03111   <span class="keywordflow">if</span> (numFace != NULL)
<a name="l03112"></a>03112     *numFace = -1;
<a name="l03113"></a>03113   <span class="keywordflow">if</span> (faceType != NULL) 
<a name="l03114"></a>03114     *faceType = <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a234dea287835faef866ba253e30c0730">FC_ET_UNKNOWN</a>; 
<a name="l03115"></a>03115   
<a name="l03116"></a>03116   <span class="comment">// check input</span>
<a name="l03117"></a>03117   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03118"></a>03118   <span class="keywordflow">if</span> (meshSlot == NULL || (!numEdge &amp;&amp; !numFace &amp;&amp; !faceType) ) {
<a name="l03119"></a>03119     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03120"></a>03120     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03121"></a>03121   }
<a name="l03122"></a>03122   
<a name="l03123"></a>03123   <span class="comment">// log message</span>
<a name="l03124"></a>03124   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting edge and face info for mesh '%s'"</span>, 
<a name="l03125"></a>03125                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03126"></a>03126 
<a name="l03127"></a>03127   <span class="comment">// build edges &amp; faces if necessary</span>
<a name="l03128"></a>03128   <span class="keywordflow">if</span> (numEdge != NULL &amp;&amp; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a> == -1) {
<a name="l03129"></a>03129     rc = <a class="code" href="group__PrivateMesh.html#g92a252eecf35decc19223318cfcf6115" title="Build the edge info for the mesh.">_fc_buildEdgeConns</a>(mesh);
<a name="l03130"></a>03130     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03131"></a>03131       <span class="keywordflow">return</span> rc;
<a name="l03132"></a>03132   }
<a name="l03133"></a>03133   <span class="keywordflow">if</span> (numFace != NULL &amp;&amp; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a> == -1) {
<a name="l03134"></a>03134     rc = <a class="code" href="group__PrivateMesh.html#g6755757f7f19e1e17b435c06bf890d54" title="Build the face info for the mesh.">_fc_buildFaceConns</a>(mesh);
<a name="l03135"></a>03135     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03136"></a>03136       <span class="keywordflow">return</span> rc;
<a name="l03137"></a>03137   }
<a name="l03138"></a>03138 
<a name="l03139"></a>03139   <span class="comment">// fill in requested values</span>
<a name="l03140"></a>03140   <span class="keywordflow">if</span> (numEdge != NULL)
<a name="l03141"></a>03141     *numEdge = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a>;
<a name="l03142"></a>03142   <span class="keywordflow">if</span> (numFace != NULL)
<a name="l03143"></a>03143     *numFace = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a>;
<a name="l03144"></a>03144   <span class="keywordflow">if</span> (faceType != NULL)
<a name="l03145"></a>03145     *faceType = <a class="code" href="group__DataTypes.html#gd3f3e3f81b85932e68dd1d6a2bdfd982" title="Returns the element type of the faces of the element.">fc_getElementTypeFaceType</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#fadd3563d825716a3f58ffc5dfe8e3e6">elemType</a>);
<a name="l03146"></a>03146   
<a name="l03147"></a>03147   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03148"></a>03148 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g19906bcae562d226991740da142000c0"></a><!-- doxytag: member="mesh.c::fc_getMeshElementConnsPtr" ref="g19906bcae562d226991740da142000c0" args="(FC_Mesh mesh, int **conns_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshElementConnsPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>conns_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return element to vertex connectivities for the mesh. 
<p>
<b>Description:</b> <p>
Return actual element indices. The return value is a pointer to an array of integers. The user must treat this array as read only. To modify any values, the user must make a copy first. If each element contains N vertices, the first N integers are for element 0, the next N integers are element 1, etc. To get the jth vertex ID of the ith element index as conns[i*numVertPrElem + j]. numVertPerElem can be find by calling <a class="el" href="group__DataTypes.html#g2a400f7126e79f149032162c87c4eee8" title="Returns number of vertices in a type of element.">fc_getElementTypeNumVertex()</a> or <a class="el" href="group__DataTypes.html#g4d91fcd45e4fa5dc1a744896841b426b" title="Returns number of the entity type in a type of element.">fc_getElementTypeNumEntity()</a>.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>conns_p</em>&nbsp;</td><td>
output - element index buffer, treat read only </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03762">3762</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="fileio_8c-source.html#l02057">_fc_readMeshElemConns()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="meshP_8h-source.html#l00116">_FC_MeshSlot::elemToVertConns</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l05002">_fc_buildEdgeConns()</a>, <a class="el" href="mesh_8c-source.html#l05255">_fc_buildFaceConns()</a>, <a class="el" href="mesh_8c-source.html#l05587">_fc_buildMeshElementNeighborsViaEntity()</a>, <a class="el" href="mesh_8c-source.html#l04830">_fc_buildParents()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="sierra_8c-source.html#l01209">fc_evalPrestoSpotWeld()</a>, <a class="el" href="geom_8c-source.html#l03900">fc_getDisplacedRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04542">fc_getDisplacedSurfaceNormals()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00107">fc_getElementCenters()</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="geom_8c-source.html#l03808">fc_getRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04448">fc_getSurfaceNormals()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00342">fc_makeSpanningTree()</a>, <a class="el" href="mesh_8c-source.html#l04004">fc_printMesh()</a>, <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>, <a class="el" href="geom_8c-source.html#l01223">fc_projectedElementBoundingBoxIntersection()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, <a class="el" href="lib__skeleton_8c-source.html#l01519">fc_unpackSkeletonFromMesh()</a>, <a class="el" href="gaplines_8c-source.html#l00240">getLinesAsVectors()</a>, and <a class="el" href="ex2__bigDataAccess_8c-source.html#l00071">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03765"></a>03765   {
<a name="l03766"></a>03766   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03767"></a>03767   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03768"></a>03768   
<a name="l03769"></a>03769   <span class="comment">// default return</span>
<a name="l03770"></a>03770   <span class="keywordflow">if</span> (conns_p)
<a name="l03771"></a>03771     *conns_p = NULL;
<a name="l03772"></a>03772 
<a name="l03773"></a>03773   <span class="comment">// check input</span>
<a name="l03774"></a>03774   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03775"></a>03775   <span class="keywordflow">if</span> (meshSlot == NULL || conns_p == NULL) {
<a name="l03776"></a>03776     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03777"></a>03777     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03778"></a>03778   }
<a name="l03779"></a>03779   
<a name="l03780"></a>03780   <span class="comment">// log message</span>
<a name="l03781"></a>03781   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting element connectivities for mesh '%s'"</span>, 
<a name="l03782"></a>03782                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03783"></a>03783 
<a name="l03784"></a>03784   <span class="comment">// lazy fetching of conns</span>
<a name="l03785"></a>03785   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a> == NULL &amp;&amp; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l03786"></a>03786     rc = <a class="code" href="group__PrivateFileIO.html#gb1cba8d4e35dda40e03b6830d330bbc8" title="Read element conns from file into a mesh.">_fc_readMeshElemConns</a>(mesh);
<a name="l03787"></a>03787     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l03788"></a>03788       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Lazy loading of conns for mesh '%s' failed"</span>,
<a name="l03789"></a>03789                             meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03790"></a>03790       <span class="keywordflow">return</span> rc;
<a name="l03791"></a>03791     }
<a name="l03792"></a>03792   }
<a name="l03793"></a>03793 
<a name="l03794"></a>03794   <span class="comment">// fill in requested value</span>
<a name="l03795"></a>03795   *conns_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a>;
<a name="l03796"></a>03796   
<a name="l03797"></a>03797   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03798"></a>03798 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gfcea3747b7482cb7317b2aa54e7b1f8c"></a><!-- doxytag: member="mesh.c::fc_getMeshElementFaceOrientsPtr" ref="gfcea3747b7482cb7317b2aa54e7b1f8c" args="(FC_Mesh mesh, int **elemFaceOrients_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshElementFaceOrientsPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>elemFaceOrients_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return element's face's orientations relative to global faces. 
<p>
<b>Description:</b> <p>
By definition, the vertices of the faces of an element are ordered (counter clockwise) so that the face's normal points out of the element. In the gobal face array for a mesh, however, the vertices are (somewhat) arbitrarily ordered and you cannot know for sure the direction of a face without reference to an element. For example, a face shared by two elements has a different orientation depending on which element you are talking about. Let's say that the face was defined so that it points out of the first element. Then the entry of the faceOrients array for that face of the first element is 1. The faceOrients value for that face in the second element is -1. The -1 tells you that you need to reverse the order of the vertices of that face in order to treat it as if it had come from the second element.<p>
This routine returns a pointer to the array that has orientation flags for the faces that make up the elements. The array is ordered { Elem0Face0 Elem0Face1 ... Elem0FaceN Elem1Face0 Elem1Face1 ... Elem1FaceN ...... ElemMFace0 ElemMFace1 ... ElemMFaceN }. This is a big data array and should NOT be freed by the calling program. Possible values are 1: vertices of the face are in order expected for the element; or -1: vertices of the face are in the reverse order of that expected for the element.<p>
(I'm pretty sure that all unique faces will have orient = 1.)<p>
Note that faces may not yet exist for the mesh, and if they don't, calling this function will build them (which may take some time).<p>
<b>Modifications:</b> <ul>
<li>10/26/05 WSD, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>elemFaceOrients_p</em>&nbsp;</td><td>
output - element's face's orientations, treat read only </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03952">3952</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05255">_fc_buildFaceConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00141">_FC_MeshSlot::elemFaceOrients</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00109">_FC_MeshSlot::numFace</a>.</p>

<p>Referenced by <a class="el" href="shape_8c-source.html#l00750">_fc_getOutwardFaceNormal()</a>, and <a class="el" href="gaplines_8c-source.html#l00190">calcFaceOrients()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03956"></a>03956   {
<a name="l03957"></a>03957   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03958"></a>03958   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03959"></a>03959   
<a name="l03960"></a>03960   <span class="comment">// default return</span>
<a name="l03961"></a>03961   <span class="keywordflow">if</span> (elemFaceOrients_p)
<a name="l03962"></a>03962     *elemFaceOrients_p = NULL;
<a name="l03963"></a>03963 
<a name="l03964"></a>03964   <span class="comment">// check input</span>
<a name="l03965"></a>03965   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03966"></a>03966   <span class="keywordflow">if</span> (meshSlot == NULL || elemFaceOrients_p == NULL) {
<a name="l03967"></a>03967     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03968"></a>03968     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03969"></a>03969   }
<a name="l03970"></a>03970   
<a name="l03971"></a>03971   <span class="comment">// log message</span>
<a name="l03972"></a>03972   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting element to face connectivities on mesh '%s'"</span>, 
<a name="l03973"></a>03973                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03974"></a>03974 
<a name="l03975"></a>03975   <span class="comment">// if it doesn't exist, build vertex, element &amp; neighbor stuff</span>
<a name="l03976"></a>03976   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a> == -1) {
<a name="l03977"></a>03977     rc = <a class="code" href="group__PrivateMesh.html#g6755757f7f19e1e17b435c06bf890d54" title="Build the face info for the mesh.">_fc_buildFaceConns</a>(mesh);
<a name="l03978"></a>03978     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03979"></a>03979       <span class="keywordflow">return</span> rc;
<a name="l03980"></a>03980   }
<a name="l03981"></a>03981 
<a name="l03982"></a>03982   <span class="comment">// return pointer</span>
<a name="l03983"></a>03983   *elemFaceOrients_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1bc2e28dd6ebde377292996dbdd1d89d">elemFaceOrients</a>;
<a name="l03984"></a>03984   
<a name="l03985"></a>03985   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03986"></a>03986 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gcc3f8cb48b0c2673d9e0ce0d4eba2878"></a><!-- doxytag: member="mesh.c::fc_getMeshElementToEdgeConnsPtr" ref="gcc3f8cb48b0c2673d9e0ce0d4eba2878" args="(FC_Mesh mesh, int **elemToEdgeConns_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshElementToEdgeConnsPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>elemToEdgeConns_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return element to edge connectivities. 
<p>
<b>Description:</b> <p>
This routine returns a pointer to the array that has the IDs of the edges that make up the elements. The array is { Elem0Edge0 Elem0Edge1 ... Elem0EdgeN Elem1Edge0 Elem1Edge1 ... Elem1EdgeN ...... ElemMEdge0 ElemMEdge1 ... ElemMEdgeN }. This is a big data array and should NOT be freed by the calling program. To get the id of the jth edge in the ith element, index by conns[i*numEdgePerElem+j]. numEdgePerElem can be found by a call to <a class="el" href="group__DataTypes.html#gf2ce1082614c4a5cd5481c00c89a7e67" title="Returns number of edges in a type of element.">fc_getElementTypeNumEdge()</a> or <a class="el" href="group__DataTypes.html#g4d91fcd45e4fa5dc1a744896841b426b" title="Returns number of the entity type in a type of element.">fc_getElementTypeNumEntity()</a>.<p>
Note that edges may not yet exist for the mesh, and if they don't, calling this function will build them (which may take some time).<p>
<b>Modifications:</b> <ul>
<li>10/26/05 WSD, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>elemToEdgeConns_p</em>&nbsp;</td><td>
output - element to edge connections, treat read only </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03821">3821</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05002">_fc_buildEdgeConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00137">_FC_MeshSlot::elemToEdgeConns</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00107">_FC_MeshSlot::numEdge</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l05587">_fc_buildMeshElementNeighborsViaEntity()</a>, <a class="el" href="mesh_8c-source.html#l04830">_fc_buildParents()</a>, <a class="el" href="exodusio_8c-source.html#l01567">_fc_readExodusSubsetMembers()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, and <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03825"></a>03825   {
<a name="l03826"></a>03826   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03827"></a>03827   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03828"></a>03828   
<a name="l03829"></a>03829   <span class="comment">// default return</span>
<a name="l03830"></a>03830   <span class="keywordflow">if</span> (elemToEdgeConns_p)
<a name="l03831"></a>03831     *elemToEdgeConns_p = NULL;
<a name="l03832"></a>03832 
<a name="l03833"></a>03833   <span class="comment">// check input</span>
<a name="l03834"></a>03834   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03835"></a>03835   <span class="keywordflow">if</span> (meshSlot == NULL || elemToEdgeConns_p == NULL) {
<a name="l03836"></a>03836     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03837"></a>03837     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03838"></a>03838   }
<a name="l03839"></a>03839   
<a name="l03840"></a>03840   <span class="comment">// log message</span>
<a name="l03841"></a>03841   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting element to edge connectivities on mesh '%s'"</span>, 
<a name="l03842"></a>03842                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03843"></a>03843 
<a name="l03844"></a>03844   <span class="comment">// if it doesn't exist, build vertex, element &amp; neighbor stuff</span>
<a name="l03845"></a>03845   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a> == -1) {
<a name="l03846"></a>03846     rc = <a class="code" href="group__PrivateMesh.html#g92a252eecf35decc19223318cfcf6115" title="Build the edge info for the mesh.">_fc_buildEdgeConns</a>(mesh);
<a name="l03847"></a>03847     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03848"></a>03848       <span class="keywordflow">return</span> rc;
<a name="l03849"></a>03849   }
<a name="l03850"></a>03850 
<a name="l03851"></a>03851   <span class="comment">// return pointer</span>
<a name="l03852"></a>03852   *elemToEdgeConns_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#74a32c78f47931afe4ee4ea26f813d50">elemToEdgeConns</a>;
<a name="l03853"></a>03853   
<a name="l03854"></a>03854   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03855"></a>03855 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g7f17910148b4237e84ca374845688cfc"></a><!-- doxytag: member="mesh.c::fc_getMeshElementToFaceConnsPtr" ref="g7f17910148b4237e84ca374845688cfc" args="(FC_Mesh mesh, int **elemToFaceConns_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshElementToFaceConnsPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>elemToFaceConns_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return element to face connectivities. 
<p>
<b>Description:</b> <p>
This routine returns a pointer to the array that has the IDs of the faces that make up the elements. The array is { Elem0Face0 Elem0Face1 ... Elem0FaceN Elem1Face0 Elem1Face1 ... Elem1FaceN ...... ElemMFace0 ElemMFace1 ... ElemMFaceN }. This is a big data array and should NOT be freed by the calling program. To get the id of the jth face in the ith element, index by conns[i*numFacePerElem+j]. numFacePerElem can be found by a call to <a class="el" href="group__DataTypes.html#g1cffd2eb82ec74e749ca93a6cb623e4a" title="Returns number of faces in a type of element.">fc_getElementTypeNumFace()</a> or <a class="el" href="group__DataTypes.html#g4d91fcd45e4fa5dc1a744896841b426b" title="Returns number of the entity type in a type of element.">fc_getElementTypeNumEntity()</a>.<p>
See also <a class="el" href="group__Mesh.html#gfcea3747b7482cb7317b2aa54e7b1f8c" title="Return element&#39;s face&#39;s orientations relative to global faces.">fc_getMeshElementFaceOrientsPtr()</a>.<p>
Note that faces may not yet exist for the mesh, and if they don't, calling this function will build them (which may take some time).<p>
<b>Modifications:</b> <ul>
<li>10/26/05 WSD, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>elemToFaceConns_p</em>&nbsp;</td><td>
output - element to face connections, treat read only </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03880">3880</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05255">_fc_buildFaceConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00139">_FC_MeshSlot::elemToFaceConns</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00109">_FC_MeshSlot::numFace</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l05587">_fc_buildMeshElementNeighborsViaEntity()</a>, <a class="el" href="mesh_8c-source.html#l04830">_fc_buildParents()</a>, <a class="el" href="shape_8c-source.html#l00750">_fc_getOutwardFaceNormal()</a>, <a class="el" href="exodusio_8c-source.html#l01567">_fc_readExodusSubsetMembers()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="gaplines_8c-source.html#l00190">calcFaceOrients()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, and <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03884"></a>03884   {
<a name="l03885"></a>03885   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03886"></a>03886   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03887"></a>03887   
<a name="l03888"></a>03888   <span class="comment">// default return</span>
<a name="l03889"></a>03889   <span class="keywordflow">if</span> (elemToFaceConns_p)
<a name="l03890"></a>03890     *elemToFaceConns_p = NULL;
<a name="l03891"></a>03891 
<a name="l03892"></a>03892   <span class="comment">// check input</span>
<a name="l03893"></a>03893   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03894"></a>03894   <span class="keywordflow">if</span> (meshSlot == NULL || elemToFaceConns_p == NULL) {
<a name="l03895"></a>03895     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03896"></a>03896     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03897"></a>03897   }
<a name="l03898"></a>03898   
<a name="l03899"></a>03899   <span class="comment">// log message</span>
<a name="l03900"></a>03900   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting element to face connectivities on mesh '%s'"</span>, 
<a name="l03901"></a>03901                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03902"></a>03902 
<a name="l03903"></a>03903   <span class="comment">// if it doesn't exist, build vertex, element &amp; neighbor stuff</span>
<a name="l03904"></a>03904   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a> == -1) {
<a name="l03905"></a>03905     rc = <a class="code" href="group__PrivateMesh.html#g6755757f7f19e1e17b435c06bf890d54" title="Build the face info for the mesh.">_fc_buildFaceConns</a>(mesh);
<a name="l03906"></a>03906     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03907"></a>03907       <span class="keywordflow">return</span> rc;
<a name="l03908"></a>03908   }
<a name="l03909"></a>03909 
<a name="l03910"></a>03910   <span class="comment">// return pointer</span>
<a name="l03911"></a>03911   *elemToFaceConns_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#039ef38298bd46752975a32fe5ffc980">elemToFaceConns</a>;
<a name="l03912"></a>03912   
<a name="l03913"></a>03913   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03914"></a>03914 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g1c1684ecf98e82a0ab18f7f9dbdddfc5"></a><!-- doxytag: member="mesh.c::fc_getMeshElementType" ref="g1c1684ecf98e82a0ab18f7f9dbdddfc5" args="(FC_Mesh mesh, FC_ElementType *elemType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshElementType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *&nbsp;</td>
          <td class="paramname"> <em>elemType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns type of elements in the mesh. 
<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return elemType = FC_ET_UNKNOWN, and input check for elemType = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>elemType</em>&nbsp;</td><td>
output - element type </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03061">3061</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00105">_FC_MeshSlot::elemType</a>, <a class="el" href="base_8h-source.html#l00119">FC_ET_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="exodusio_8c-source.html#l00472">_fc_loadExodusDataset()</a>, <a class="el" href="exodusio_8c-source.html#l01567">_fc_readExodusSubsetMembers()</a>, <a class="el" href="gaplines_8c-source.html#l00190">calcFaceOrients()</a>, <a class="el" href="sierra_8c-source.html#l01209">fc_evalPrestoSpotWeld()</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="mesh_8c-source.html#l03371">fc_getMeshEntityElementType()</a>, and <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03064"></a>03064   {
<a name="l03065"></a>03065   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03066"></a>03066   
<a name="l03067"></a>03067   <span class="comment">// set up defaults</span>
<a name="l03068"></a>03068   <span class="keywordflow">if</span>(elemType != NULL)
<a name="l03069"></a>03069     *elemType = <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a234dea287835faef866ba253e30c0730">FC_ET_UNKNOWN</a>;
<a name="l03070"></a>03070   
<a name="l03071"></a>03071   <span class="comment">// check input</span>
<a name="l03072"></a>03072   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03073"></a>03073   <span class="keywordflow">if</span> (meshSlot == NULL || elemType == NULL) {
<a name="l03074"></a>03074     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03075"></a>03075     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03076"></a>03076   }
<a name="l03077"></a>03077   
<a name="l03078"></a>03078   <span class="comment">// log message</span>
<a name="l03079"></a>03079   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting dimensionality for mesh '%s'"</span>, 
<a name="l03080"></a>03080                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03081"></a>03081 
<a name="l03082"></a>03082   <span class="comment">// fill in requested value</span>
<a name="l03083"></a>03083   *elemType = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#fadd3563d825716a3f58ffc5dfe8e3e6">elemType</a>;
<a name="l03084"></a>03084   
<a name="l03085"></a>03085   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03086"></a>03086 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gfc269313fe6595610ac3eb54cef327c7"></a><!-- doxytag: member="mesh.c::fc_getMeshEntityElementType" ref="gfc269313fe6595610ac3eb54cef327c7" args="(FC_Mesh mesh, FC_AssociationType assoc, int ID, FC_ElementType *elemType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshEntityElementType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *&nbsp;</td>
          <td class="paramname"> <em>elemType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the element type of the mesh entity. 
<p>
<b>Description:</b> <p>
This is really only interesting for faces and elements. The association type of "whole" returns the type of the elements of the mesh.<p>
If you ask for edges or faces and they don't exist yet, they will be built.<p>
It is an error to ask for the association type FC_AT_WHOLE_DATASET.<p>
<b>Modifications:</b> <ul>
<li>07/16/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
input - the entity's type </td></tr>
<tr><td valign="top"><em>ID</em>&nbsp;</td><td>
input - the ID of the mesh entity </td></tr>
<tr><td valign="top"><em>elemType</em>&nbsp;</td><td>
output - the element type of the entity </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03371">3371</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="base_8h-source.html#l00121">FC_ET_LINE</a>, <a class="el" href="base_8h-source.html#l00120">FC_ET_POINT</a>, <a class="el" href="base_8h-source.html#l00119">FC_ET_UNKNOWN</a>, <a class="el" href="mesh_8c-source.html#l03061">fc_getMeshElementType()</a>, <a class="el" href="mesh_8c-source.html#l03622">fc_getMeshFaceTypesPtr()</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00286">fc_isAssociationTypeValid()</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="shape_8c-source.html#l00402">_fc_buildFaceInfoListFromSubset()</a>, <a class="el" href="mesh_8c-source.html#l04830">_fc_buildParents()</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="topo_8c-source.html#l01645">fc_getSubsetSkin()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03376"></a>03376   {
<a name="l03377"></a>03377   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03378"></a>03378   <span class="keywordtype">int</span> num;
<a name="l03379"></a>03379   <a class="code" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a" title="Possible element types.">FC_ElementType</a>* faceTypes;
<a name="l03380"></a>03380 
<a name="l03381"></a>03381   <span class="comment">// default return</span>
<a name="l03382"></a>03382   <span class="keywordflow">if</span> (elemType)
<a name="l03383"></a>03383     *elemType = <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a234dea287835faef866ba253e30c0730">FC_ET_UNKNOWN</a>;
<a name="l03384"></a>03384 
<a name="l03385"></a>03385   <span class="comment">// check input</span>
<a name="l03386"></a>03386   <span class="keywordflow">if</span> (!<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(mesh) || !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(assoc) || 
<a name="l03387"></a>03387       assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || ID &lt; 0 || !elemType)
<a name="l03388"></a>03388     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03389"></a>03389   rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(mesh, assoc, &amp;num);
<a name="l03390"></a>03390   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03391"></a>03391     <span class="keywordflow">return</span> rc;
<a name="l03392"></a>03392   <span class="keywordflow">if</span> (ID &gt;= num)
<a name="l03393"></a>03393     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03394"></a>03394 
<a name="l03395"></a>03395   <span class="keywordflow">switch</span> (assoc) {
<a name="l03396"></a>03396   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>: *elemType = <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a76571df5a6db31cae09dfe11dd291fd8">FC_ET_POINT</a>; <span class="keywordflow">break</span>;
<a name="l03397"></a>03397   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>:   *elemType = <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a80b8143aeefa54756df4ea881fb21fea">FC_ET_LINE</a>;  <span class="keywordflow">break</span>;
<a name="l03398"></a>03398   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:
<a name="l03399"></a>03399     <a class="code" href="group__Mesh.html#gcb5601b14ced6179dd454ed35585d21d" title="Return face types.">fc_getMeshFaceTypesPtr</a>(mesh, &amp;faceTypes);
<a name="l03400"></a>03400     *elemType = faceTypes[ID];
<a name="l03401"></a>03401     <span class="keywordflow">break</span>;
<a name="l03402"></a>03402   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>: <span class="comment">// fall through to FC_AT_WHOLE_MESH</span>
<a name="l03403"></a>03403   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>: <a class="code" href="group__Mesh.html#g1c1684ecf98e82a0ab18f7f9dbdddfc5" title="Returns type of elements in the mesh.">fc_getMeshElementType</a>(mesh, elemType); <span class="keywordflow">break</span>;
<a name="l03404"></a>03404   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>: <span class="comment">// fall through to FC_AT_UNKNOWN</span>
<a name="l03405"></a>03405   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a>:
<a name="l03406"></a>03406     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03407"></a>03407   }
<a name="l03408"></a>03408   
<a name="l03409"></a>03409   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03410"></a>03410 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gcb092c2c909dd536c0120830890a9f36"></a><!-- doxytag: member="mesh.c::fc_getMeshes" ref="gcb092c2c909dd536c0120830890a9f36" args="(FC_Dataset dataset, int *numMesh, FC_Mesh **meshes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshes           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numMesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> **&nbsp;</td>
          <td class="paramname"> <em>meshes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the meshes in a dataset. 
<p>
<b>Description:</b> <p>
This call returns an array of meshes in the dataset. The caller is responsible for freeing the array of sequence handles.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>July 23, 2002 W Koegler Changed so it no longer makes safcover calls</li><li>11/21/03 RM, added default return nmeshes = -1, and meshnames = NULL if anything is wrong</li><li>9/8/04 WSK, changed to return mesh handles instead of mesh names. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numMesh</em>&nbsp;</td><td>
output - number of meshes returned </td></tr>
<tr><td valign="top"><em>meshes</em>&nbsp;</td><td>
output - array of meshes </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02183">2183</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06082">_fc_getMeshSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00093">_FC_DsSlot::meshIDs</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00092">_FC_DsSlot::numMesh</a>.</p>

<p>Referenced by <a class="el" href="lsdynaio_8c-source.html#l02223">_fc_hasSharedLSDynaVertices()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, and <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02187"></a>02187   {
<a name="l02188"></a>02188   <span class="keywordtype">int</span> i;
<a name="l02189"></a>02189   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l02190"></a>02190   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02191"></a>02191   
<a name="l02192"></a>02192   <span class="comment">// default return values</span>
<a name="l02193"></a>02193   <span class="keywordflow">if</span> (numMesh != NULL) 
<a name="l02194"></a>02194     *numMesh = -1;
<a name="l02195"></a>02195   <span class="keywordflow">if</span> (meshes != NULL)
<a name="l02196"></a>02196     *meshes = NULL;  
<a name="l02197"></a>02197   
<a name="l02198"></a>02198   <span class="comment">// check input</span>
<a name="l02199"></a>02199   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l02200"></a>02200   <span class="keywordflow">if</span> (dsSlot == NULL || numMesh == NULL || meshes == NULL) {
<a name="l02201"></a>02201     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02202"></a>02202     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02203"></a>02203   }
<a name="l02204"></a>02204   
<a name="l02205"></a>02205   <span class="comment">// log message</span>
<a name="l02206"></a>02206   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting meshes from dataset '%s'"</span>,
<a name="l02207"></a>02207                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02208"></a>02208   
<a name="l02209"></a>02209   <span class="comment">// get num meshes</span>
<a name="l02210"></a>02210   *numMesh = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>;
<a name="l02211"></a>02211   
<a name="l02212"></a>02212   <span class="comment">// get meshes</span>
<a name="l02213"></a>02213   <span class="keywordflow">if</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a> &gt; 0) {
<a name="l02214"></a>02214     *meshes = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a>)*dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>);
<a name="l02215"></a>02215     <span class="keywordflow">if</span> (*meshes == NULL) {
<a name="l02216"></a>02216       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02217"></a>02217       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02218"></a>02218     }
<a name="l02219"></a>02219     <span class="keywordflow">for</span> (i = 0; i &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>; i++) {
<a name="l02220"></a>02220       meshSlot = <a class="code" href="group__PrivateMesh.html#gc021ac32931e613adb63450683845fd7" title="Get a mesh slot based on ID.">_fc_getMeshSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#37a9c6bf694316c85be6de5bdbefb198">meshIDs</a>[i]);
<a name="l02221"></a>02221       <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>((*meshes)[i], meshSlot);
<a name="l02222"></a>02222     }
<a name="l02223"></a>02223   }
<a name="l02224"></a>02224   
<a name="l02225"></a>02225   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02226"></a>02226 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8e318f4b17572413004acf14b18deb2b"></a><!-- doxytag: member="mesh.c::fc_getMeshFaceConnsPtr" ref="g8e318f4b17572413004acf14b18deb2b" args="(FC_Mesh mesh, int **numVertPerFace_p, int *maxNumVertPerFace_p, int **conns_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshFaceConnsPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numVertPerFace_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>maxNumVertPerFace_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>conns_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return face connectivities. 
<p>
<b>Description:</b> <p>
This routine returns an array that has the IDs of the vertices that make up the faces. In addition there is an array with the number of vertices per face because some element types have multiple types of faces (i.e. pyramids and prisms). For example, if the faces are triangles, every entry of the numVertPerFace array will be '3' and the connectivity array will look like { Face0Vert0 Face0Vert1 Face0Vert2 Face1Vert0 ... FaceNVert0 FaceNVert1 FaceNVert2 }.<p>
If the face type is mixed, the connectivity array will be maxNumVertPerFace * numFace long and the unused entries (for when numVertPerFace &lt; maxNumVertPerFace) will be equal to -1. For example, a prism mesh's face connectivity might have numVertPerFace = { 3 4 3 ... } and conns = { Face0Vert0 Face0Vert1 Face0Vert2 -1 Face1Vert0 Face1Vert1 Face1Vert2 Face1Vert3 Face2Vert0 Face2Vert1 Face2Vert2 -1 ... }. Note you can index directly to face n by conns[n*maxNumVertPerFace].<p>
The number of vertices per face and the connectivity arrays are both considered to big data arrays and should NOT be freed by the calling program. Fetching the numVertPerFaceArray is optional.<p>
Note that faces may not yet exist for the mesh, and if they don't, calling this function will build them (which may take some time).<p>
<b>Modifications:</b> <ul>
<li>02/06/04 WSK, created.</li><li>09/21/04 WSK, removed args for non-big data values which can now be gotten with <a class="el" href="group__Mesh.html#g5ae1bc6adbd87df4eb017c1c521f4225" title="Get information about edges and faces in a mesh.">fc_getMeshEdgeFaceInfo()</a>. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numVertPerFace_p</em>&nbsp;</td><td>
output - (optional) num vert per face, treat read only </td></tr>
<tr><td valign="top"><em>maxNumVertPerFace_p</em>&nbsp;</td><td>
output - (optional) stride length of the conns array </td></tr>
<tr><td valign="top"><em>conns_p</em>&nbsp;</td><td>
output - face to vertex connections, treat read only </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03691">3691</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05255">_fc_buildFaceConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00105">_FC_MeshSlot::elemType</a>, <a class="el" href="meshP_8h-source.html#l00131">_FC_MeshSlot::faceToVertConns</a>, <a class="el" href="base_8h-source.html#l00129">FC_ET_MIXED</a>, <a class="el" href="base_8h-source.html#l00119">FC_ET_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00698">fc_getElementTypeFaceType()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00109">_FC_MeshSlot::numFace</a>, and <a class="el" href="meshP_8h-source.html#l00130">_FC_MeshSlot::numVertPerFace</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l04830">_fc_buildParents()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="topo_8c-source.html#l01149">_fc_getFaceNeighbors()</a>, <a class="el" href="shape_8c-source.html#l00750">_fc_getOutwardFaceNormal()</a>, <a class="el" href="geom_8c-source.html#l07774">fc_doesElementContainPoint()</a>, <a class="el" href="sierra_8c-source.html#l01209">fc_evalPrestoSpotWeld()</a>, <a class="el" href="geom_8c-source.html#l03702">fc_getDisplacedFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l07852">fc_getElementsThatContainPoint()</a>, <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="mesh_8c-source.html#l04004">fc_printMesh()</a>, <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03698"></a>03698   {
<a name="l03699"></a>03699   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03700"></a>03700   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03701"></a>03701   
<a name="l03702"></a>03702   <span class="comment">// default return</span>
<a name="l03703"></a>03703   <span class="keywordflow">if</span> (numVertPerFace_p)
<a name="l03704"></a>03704     *numVertPerFace_p = NULL;
<a name="l03705"></a>03705   <span class="keywordflow">if</span> (maxNumVertPerFace_p)
<a name="l03706"></a>03706     *maxNumVertPerFace_p = -1;
<a name="l03707"></a>03707   <span class="keywordflow">if</span> (conns_p)
<a name="l03708"></a>03708     *conns_p = NULL;
<a name="l03709"></a>03709 
<a name="l03710"></a>03710   <span class="comment">// check input</span>
<a name="l03711"></a>03711   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03712"></a>03712   <span class="keywordflow">if</span> (meshSlot == NULL || !conns_p) {
<a name="l03713"></a>03713     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03714"></a>03714     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03715"></a>03715   }
<a name="l03716"></a>03716   
<a name="l03717"></a>03717   <span class="comment">// log message</span>
<a name="l03718"></a>03718   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting face connectivities for mesh '%s'"</span>, 
<a name="l03719"></a>03719                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03720"></a>03720 
<a name="l03721"></a>03721   <span class="comment">// if it doesn't exist, build vertex, element &amp; neighbor stuff</span>
<a name="l03722"></a>03722   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a> == -1) {
<a name="l03723"></a>03723     rc = <a class="code" href="group__PrivateMesh.html#g6755757f7f19e1e17b435c06bf890d54" title="Build the face info for the mesh.">_fc_buildFaceConns</a>(mesh);
<a name="l03724"></a>03724     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03725"></a>03725       <span class="keywordflow">return</span> rc;
<a name="l03726"></a>03726   }
<a name="l03727"></a>03727 
<a name="l03728"></a>03728   <span class="comment">// return values</span>
<a name="l03729"></a>03729   <span class="keywordflow">if</span> (numVertPerFace_p)
<a name="l03730"></a>03730     *numVertPerFace_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#7537a9b0d1fbb72b25285e1c5dc17848">numVertPerFace</a>;
<a name="l03731"></a>03731   <span class="keywordflow">if</span> (maxNumVertPerFace_p) {
<a name="l03732"></a>03732     <a class="code" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a" title="Possible element types.">FC_ElementType</a> faceType = <a class="code" href="group__DataTypes.html#gd3f3e3f81b85932e68dd1d6a2bdfd982" title="Returns the element type of the faces of the element.">fc_getElementTypeFaceType</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#fadd3563d825716a3f58ffc5dfe8e3e6">elemType</a>);
<a name="l03733"></a>03733     <span class="keywordflow">if</span> (faceType == <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a9f716d199046924e5d22004f83daaa50">FC_ET_MIXED</a>)
<a name="l03734"></a>03734       *maxNumVertPerFace_p = 4; <span class="comment">// assume will be mix of tris and quads</span>
<a name="l03735"></a>03735     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (faceType == <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a234dea287835faef866ba253e30c0730">FC_ET_UNKNOWN</a>)
<a name="l03736"></a>03736       *maxNumVertPerFace_p = 0;
<a name="l03737"></a>03737     <span class="keywordflow">else</span>
<a name="l03738"></a>03738       *maxNumVertPerFace_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#7537a9b0d1fbb72b25285e1c5dc17848">numVertPerFace</a>[0];
<a name="l03739"></a>03739   } 
<a name="l03740"></a>03740   *conns_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0ab5e40932ff22cfe0d6d18e9707f9ab">faceToVertConns</a>;
<a name="l03741"></a>03741   
<a name="l03742"></a>03742   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03743"></a>03743 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g847f92c370cfa4d85fdd8d4be7d9b88c"></a><!-- doxytag: member="mesh.c::fc_getMeshFaceType" ref="g847f92c370cfa4d85fdd8d4be7d9b88c" args="(FC_Mesh mesh, FC_ElementType *faceType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshFaceType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *&nbsp;</td>
          <td class="paramname"> <em>faceType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get element type of the face in the mesh. 
<p>
<b>Description:</b> <p>
If edges and faces do not yet exist, they are built. Pyramids and prisms may return the type FC_ET_MIXED.<p>
<b>Modifications:</b> <ul>
<li>09/21/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>faceType</em>&nbsp;</td><td>
output - face type (tri, quad or mixed) </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03256">3256</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00105">_FC_MeshSlot::elemType</a>, <a class="el" href="base_8h-source.html#l00119">FC_ET_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00698">fc_getElementTypeFaceType()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03259"></a>03259   {
<a name="l03260"></a>03260   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03261"></a>03261   
<a name="l03262"></a>03262   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l03263"></a>03263   <span class="keywordflow">if</span> (faceType != NULL) 
<a name="l03264"></a>03264     *faceType = <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a234dea287835faef866ba253e30c0730">FC_ET_UNKNOWN</a>; 
<a name="l03265"></a>03265   
<a name="l03266"></a>03266   <span class="comment">// check input</span>
<a name="l03267"></a>03267   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03268"></a>03268   <span class="keywordflow">if</span> (meshSlot == NULL || !faceType) {
<a name="l03269"></a>03269     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03270"></a>03270     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03271"></a>03271   }
<a name="l03272"></a>03272   
<a name="l03273"></a>03273   <span class="comment">// log message</span>
<a name="l03274"></a>03274   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting edge and face info for mesh '%s'"</span>, 
<a name="l03275"></a>03275                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03276"></a>03276 
<a name="l03277"></a>03277   <span class="comment">// fill in requested values</span>
<a name="l03278"></a>03278   <span class="keywordflow">if</span> (faceType != NULL)
<a name="l03279"></a>03279     *faceType = <a class="code" href="group__DataTypes.html#gd3f3e3f81b85932e68dd1d6a2bdfd982" title="Returns the element type of the faces of the element.">fc_getElementTypeFaceType</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#fadd3563d825716a3f58ffc5dfe8e3e6">elemType</a>);
<a name="l03280"></a>03280   
<a name="l03281"></a>03281   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03282"></a>03282 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gcb5601b14ced6179dd454ed35585d21d"></a><!-- doxytag: member="mesh.c::fc_getMeshFaceTypesPtr" ref="gcb5601b14ced6179dd454ed35585d21d" args="(FC_Mesh mesh, FC_ElementType **faceTypes_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshFaceTypesPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> **&nbsp;</td>
          <td class="paramname"> <em>faceTypes_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return face types. 
<p>
<b>Description:</b> <p>
This routine returns a pointer to the array that has the element type of each face. This is a big data array and should NOT be freed by the calling program.<p>
Note that faces may not yet exist for the mesh, and if they don't, calling this function will build them (which may take some time).<p>
<b>Modifications:</b> <ul>
<li>10/25/05 WSD, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>faceTypes_p</em>&nbsp;</td><td>
output - face types, treat read only </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03622">3622</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05255">_fc_buildFaceConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00129">_FC_MeshSlot::faceTypes</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00109">_FC_MeshSlot::numFace</a>.</p>

<p>Referenced by <a class="el" href="shape_8c-source.html#l00750">_fc_getOutwardFaceNormal()</a>, <a class="el" href="sierra_8c-source.html#l01209">fc_evalPrestoSpotWeld()</a>, <a class="el" href="geom_8c-source.html#l03702">fc_getDisplacedFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>, and <a class="el" href="mesh_8c-source.html#l03371">fc_getMeshEntityElementType()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03625"></a>03625   {
<a name="l03626"></a>03626   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03627"></a>03627   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03628"></a>03628   
<a name="l03629"></a>03629   <span class="comment">// default return</span>
<a name="l03630"></a>03630   <span class="keywordflow">if</span> (faceTypes_p)
<a name="l03631"></a>03631     *faceTypes_p = NULL;
<a name="l03632"></a>03632 
<a name="l03633"></a>03633   <span class="comment">// check input</span>
<a name="l03634"></a>03634   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03635"></a>03635   <span class="keywordflow">if</span> (meshSlot == NULL || faceTypes_p == NULL) {
<a name="l03636"></a>03636     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03637"></a>03637     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03638"></a>03638   }
<a name="l03639"></a>03639   
<a name="l03640"></a>03640   <span class="comment">// log message</span>
<a name="l03641"></a>03641   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting edge connectivities on mesh '%s'"</span>, 
<a name="l03642"></a>03642                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03643"></a>03643 
<a name="l03644"></a>03644   <span class="comment">// if it doesn't exist, build vertex, element &amp; neighbor stuff</span>
<a name="l03645"></a>03645   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a> == -1) {
<a name="l03646"></a>03646     rc = <a class="code" href="group__PrivateMesh.html#g6755757f7f19e1e17b435c06bf890d54" title="Build the face info for the mesh.">_fc_buildFaceConns</a>(mesh);
<a name="l03647"></a>03647     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03648"></a>03648       <span class="keywordflow">return</span> rc;
<a name="l03649"></a>03649   }
<a name="l03650"></a>03650 
<a name="l03651"></a>03651   <span class="comment">// return pointer</span>
<a name="l03652"></a>03652   *faceTypes_p = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e68f87ff78f55d42547992326166c69a">faceTypes</a>;
<a name="l03653"></a>03653   
<a name="l03654"></a>03654   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03655"></a>03655 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ged61b1f684fc2a6ac489c10841cdb591"></a><!-- doxytag: member="mesh.c::fc_getMeshInfo" ref="ged61b1f684fc2a6ac489c10841cdb591" args="(FC_Mesh mesh, int *topodim, int *dim, int *numVertex, int *numElement, FC_ElementType *elemType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshInfo           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>topodim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVertex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numElement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a> *&nbsp;</td>
          <td class="paramname"> <em>elemType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get information about a mesh. 
<p>
<b>Description:</b> <p>
Returns the topological dimensionality of the mesh elements, the spatial dimensionality of the mesh coordinates, the number of vertices, the number of elements, and the element type.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>11/25/03 RM, added checking for NULL mesh handle, default return: topodim = -1, dim = -1, numVertex = -1; numElement = -1, elemType = <a class="el" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a234dea287835faef866ba253e30c0730">FC_ET_UNKNOWN</a>; issue an error if <a class="el" href="group__Library.html#gd5ab439275b301213065adfc55e04798" title="Get the current verbosity level of the library.">fc_getLibraryVerbosity()</a>. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>topodim</em>&nbsp;</td><td>
output - topological dimensionality of mesh (e.g. 0 for a point mesh, 2 for a surface, 3 for volume) </td></tr>
<tr><td valign="top"><em>dim</em>&nbsp;</td><td>
output - 2=2d coordinates, 3=3d coords </td></tr>
<tr><td valign="top"><em>numVertex</em>&nbsp;</td><td>
output - number of vertices </td></tr>
<tr><td valign="top"><em>numElement</em>&nbsp;</td><td>
output - number of elements </td></tr>
<tr><td valign="top"><em>elemType</em>&nbsp;</td><td>
output - element type (quad, tet) </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02848">2848</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="meshP_8h-source.html#l00100">_FC_MeshSlot::dim</a>, <a class="el" href="meshP_8h-source.html#l00105">_FC_MeshSlot::elemType</a>, <a class="el" href="base_8h-source.html#l00119">FC_ET_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00104">_FC_MeshSlot::numElement</a>, <a class="el" href="meshP_8h-source.html#l00103">_FC_MeshSlot::numVertex</a>, and <a class="el" href="meshP_8h-source.html#l00101">_FC_MeshSlot::topodim</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l05002">_fc_buildEdgeConns()</a>, <a class="el" href="mesh_8c-source.html#l05255">_fc_buildFaceConns()</a>, <a class="el" href="mesh_8c-source.html#l05587">_fc_buildMeshElementNeighborsViaEntity()</a>, <a class="el" href="shape_8c-source.html#l00750">_fc_getOutwardFaceNormal()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="geom_8c-source.html#l05589">fc_createDisplacedMeshVertexBin()</a>, <a class="el" href="geom_8c-source.html#l05522">fc_createMeshVertexBin()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="geom_8c-source.html#l07774">fc_doesElementContainPoint()</a>, <a class="el" href="geom_8c-source.html#l03503">fc_getDisplacedEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03702">fc_getDisplacedFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l00763">fc_getDisplacedMeshBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l02656">fc_getDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03900">fc_getDisplacedRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04542">fc_getDisplacedSurfaceNormals()</a>, <a class="el" href="geom_8c-source.html#l03415">fc_getEdgeLengths()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00107">fc_getElementCenters()</a>, <a class="el" href="geom_8c-source.html#l07852">fc_getElementsThatContainPoint()</a>, <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l00686">fc_getMeshBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l02590">fc_getMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03808">fc_getRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04448">fc_getSurfaceNormals()</a>, <a class="el" href="geom_8c-source.html#l02836">fc_getVariableWeightedDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03267">fc_getVariableWeightedDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l02734">fc_getVariableWeightedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03138">fc_getVariableWeightedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l00309">fc_isValidDisplacementVariable()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00342">fc_makeSpanningTree()</a>, <a class="el" href="mesh_8c-source.html#l04004">fc_printMesh()</a>, <a class="el" href="geom_8c-source.html#l01223">fc_projectedElementBoundingBoxIntersection()</a>, <a class="el" href="mesh_8c-source.html#l02091">fc_setSphereDisplacementVariable()</a>, <a class="el" href="lib__skeleton_8c-source.html#l01519">fc_unpackSkeletonFromMesh()</a>, and <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02856"></a>02856   {
<a name="l02857"></a>02857   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02858"></a>02858   
<a name="l02859"></a>02859   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l02860"></a>02860   <span class="keywordflow">if</span> (topodim != NULL) 
<a name="l02861"></a>02861     *topodim = -1;   
<a name="l02862"></a>02862   <span class="keywordflow">if</span> (dim != NULL) 
<a name="l02863"></a>02863     *dim = -1;
<a name="l02864"></a>02864   <span class="keywordflow">if</span> (numVertex != NULL) 
<a name="l02865"></a>02865     *numVertex = -1;
<a name="l02866"></a>02866   <span class="keywordflow">if</span> (numElement != NULL)
<a name="l02867"></a>02867     *numElement = -1;
<a name="l02868"></a>02868   <span class="keywordflow">if</span> (elemType != NULL) 
<a name="l02869"></a>02869     *elemType = <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a234dea287835faef866ba253e30c0730">FC_ET_UNKNOWN</a>; 
<a name="l02870"></a>02870   
<a name="l02871"></a>02871   <span class="comment">// check input</span>
<a name="l02872"></a>02872   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l02873"></a>02873   <span class="keywordflow">if</span> (meshSlot == NULL || 
<a name="l02874"></a>02874       (!topodim &amp;&amp; !dim &amp;&amp; !numVertex &amp;&amp; !numElement &amp;&amp; !elemType) ) {
<a name="l02875"></a>02875      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02876"></a>02876     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02877"></a>02877   }
<a name="l02878"></a>02878   
<a name="l02879"></a>02879   <span class="comment">// log message</span>
<a name="l02880"></a>02880   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting info for mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02881"></a>02881 
<a name="l02882"></a>02882   <span class="comment">// fill in requested values</span>
<a name="l02883"></a>02883   <span class="keywordflow">if</span> (dim != NULL)
<a name="l02884"></a>02884     *dim = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8a59779a8f5f511a1fff4c886e8897ec">dim</a>;
<a name="l02885"></a>02885   <span class="keywordflow">if</span> (topodim != NULL)
<a name="l02886"></a>02886     *topodim = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b621647a95b1a86b85d543583e666af2">topodim</a>;
<a name="l02887"></a>02887   <span class="keywordflow">if</span> (numVertex != NULL)
<a name="l02888"></a>02888     *numVertex = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a>;
<a name="l02889"></a>02889   <span class="keywordflow">if</span> (numElement != NULL)
<a name="l02890"></a>02890     *numElement = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#914b51c6fb5bd0c761db89c1486b9e78">numElement</a>;
<a name="l02891"></a>02891   <span class="keywordflow">if</span> (elemType != NULL)
<a name="l02892"></a>02892     *elemType = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#fadd3563d825716a3f58ffc5dfe8e3e6">elemType</a>;
<a name="l02893"></a>02893   
<a name="l02894"></a>02894   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02895"></a>02895 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3d701a44941883311e4940d7d3b4146a"></a><!-- doxytag: member="mesh.c::fc_getMeshName" ref="g3d701a44941883311e4940d7d3b4146a" args="(FC_Mesh mesh, char **meshname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>meshname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return name of a mesh. 
<p>
<b>Description:</b> <p>
Return the name associated with a mesh handle. Spaced is allocated for the string so it needs to be freed by the user when finished.<p>
<b>Modifications:</b> <ul>
<li>Aug, 9, 2002. W Koegler Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>meshname</em>&nbsp;</td><td>
output - mesh name, space allocated here and must be freed by user when finished </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02762">2762</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="shape_8c-source.html#l01515">fc_getMeshShapes()</a>, <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>, <a class="el" href="regionreassembler_8c-source.html#l00261">getMatchingMesh()</a>, <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>, and <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02766"></a>02766   {
<a name="l02767"></a>02767   <span class="keywordtype">char</span> *cp;
<a name="l02768"></a>02768   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02769"></a>02769   
<a name="l02770"></a>02770   <span class="comment">// default</span>
<a name="l02771"></a>02771   <span class="keywordflow">if</span> (meshname)
<a name="l02772"></a>02772     *meshname = NULL;
<a name="l02773"></a>02773   
<a name="l02774"></a>02774   <span class="comment">// check input</span>
<a name="l02775"></a>02775   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l02776"></a>02776   <span class="keywordflow">if</span> (meshSlot == NULL || meshname == NULL) {
<a name="l02777"></a>02777     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02778"></a>02778     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02779"></a>02779   }
<a name="l02780"></a>02780   
<a name="l02781"></a>02781   <span class="comment">// log message</span>
<a name="l02782"></a>02782   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting name for mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02783"></a>02783 
<a name="l02784"></a>02784   <span class="comment">// copy name</span>
<a name="l02785"></a>02785   cp = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l02786"></a>02786   *meshname = malloc(strlen(cp) + 1);
<a name="l02787"></a>02787   <span class="keywordflow">if</span> (*meshname == NULL) {
<a name="l02788"></a>02788     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02789"></a>02789     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02790"></a>02790   }
<a name="l02791"></a>02791   strcpy(*meshname, cp);
<a name="l02792"></a>02792   
<a name="l02793"></a>02793   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02794"></a>02794 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g82f4aa5cf3a4a5011ae65cab2ed1a8c1"></a><!-- doxytag: member="mesh.c::fc_getMeshNumEdge" ref="g82f4aa5cf3a4a5011ae65cab2ed1a8c1" args="(FC_Mesh mesh, int *numEdge)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshNumEdge           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numEdge</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get number of edges in a mesh. 
<p>
<b>Description:</b> <p>
If edges and faces do not yet exist, they are built.<p>
<b>Modifications:</b> <ul>
<li>09/21/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>numEdge</em>&nbsp;</td><td>
output - number of edges </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03161">3161</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05002">_fc_buildEdgeConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00107">_FC_MeshSlot::numEdge</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l05487">_fc_buildMeshVertexNeighborsViaEdge()</a>, <a class="el" href="topo_8c-source.html#l01072">_fc_getEdgeNeighbors()</a>, <a class="el" href="topo_8c-source.html#l00798">_fc_getEdgeParents()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="geom_8c-source.html#l03503">fc_getDisplacedEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03415">fc_getEdgeLengths()</a>, <a class="el" href="mesh_8c-source.html#l04004">fc_printMesh()</a>, and <a class="el" href="edgeStats_8c-source.html#l00105">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03164"></a>03164   {
<a name="l03165"></a>03165   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03166"></a>03166   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03167"></a>03167   
<a name="l03168"></a>03168   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l03169"></a>03169   <span class="keywordflow">if</span> (numEdge != NULL) 
<a name="l03170"></a>03170     *numEdge = -1;
<a name="l03171"></a>03171   
<a name="l03172"></a>03172   <span class="comment">// check input</span>
<a name="l03173"></a>03173   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03174"></a>03174   <span class="keywordflow">if</span> (meshSlot == NULL || !numEdge) {
<a name="l03175"></a>03175     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03176"></a>03176     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03177"></a>03177   }
<a name="l03178"></a>03178   
<a name="l03179"></a>03179   <span class="comment">// log message</span>
<a name="l03180"></a>03180   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting num edge for mesh '%s'"</span>, 
<a name="l03181"></a>03181                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03182"></a>03182 
<a name="l03183"></a>03183   <span class="comment">// build edges &amp; faces if necessary</span>
<a name="l03184"></a>03184   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a> == -1) {
<a name="l03185"></a>03185     rc = <a class="code" href="group__PrivateMesh.html#g92a252eecf35decc19223318cfcf6115" title="Build the edge info for the mesh.">_fc_buildEdgeConns</a>(mesh);
<a name="l03186"></a>03186     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03187"></a>03187       <span class="keywordflow">return</span> rc;
<a name="l03188"></a>03188   }
<a name="l03189"></a>03189 
<a name="l03190"></a>03190   <span class="comment">// fill in requested values</span>
<a name="l03191"></a>03191   <span class="keywordflow">if</span> (numEdge != NULL)
<a name="l03192"></a>03192     *numEdge = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a>;
<a name="l03193"></a>03193   
<a name="l03194"></a>03194   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03195"></a>03195 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8bcadefbf0728724adf77ef52c1f3732"></a><!-- doxytag: member="mesh.c::fc_getMeshNumElement" ref="g8bcadefbf0728724adf77ef52c1f3732" args="(FC_Mesh mesh, int *numElem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshNumElement           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numElem</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns number of elements in a mesh. 
<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return numElem = -1, and input check for numElem = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numElem</em>&nbsp;</td><td>
output - number of elements in this set </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03025">3025</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00104">_FC_MeshSlot::numElement</a>.</p>

<p>Referenced by <a class="el" href="shape_8c-source.html#l00402">_fc_buildFaceInfoListFromSubset()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="topo_8c-source.html#l01645">fc_getSubsetSkin()</a>, <a class="el" href="gaplines_8c-source.html#l00240">getLinesAsVectors()</a>, <a class="el" href="build__ensemble_8c-source.html#l00236">main()</a>, <a class="el" href="gaplines_8c-source.html#l00377">printStats()</a>, and <a class="el" href="screwBreaks_8c-source.html#l00439">segmentMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03028"></a>03028   {
<a name="l03029"></a>03029   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03030"></a>03030   
<a name="l03031"></a>03031   <span class="comment">// set up defaults</span>
<a name="l03032"></a>03032   <span class="keywordflow">if</span> (numElem != NULL)
<a name="l03033"></a>03033     *numElem = -1;
<a name="l03034"></a>03034   
<a name="l03035"></a>03035   <span class="comment">// check input</span>
<a name="l03036"></a>03036   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03037"></a>03037   <span class="keywordflow">if</span> (meshSlot == NULL || numElem == NULL) {
<a name="l03038"></a>03038     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03039"></a>03039     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03040"></a>03040   }
<a name="l03041"></a>03041 
<a name="l03042"></a>03042   <span class="comment">// log message</span>
<a name="l03043"></a>03043   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting numElement for mesh '%s'"</span>, 
<a name="l03044"></a>03044                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03045"></a>03045 
<a name="l03046"></a>03046   <span class="comment">// fill in requested value</span>
<a name="l03047"></a>03047   *numElem = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#914b51c6fb5bd0c761db89c1486b9e78">numElement</a>;
<a name="l03048"></a>03048   
<a name="l03049"></a>03049   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03050"></a>03050 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g12d76ae817fee1f4ea941aad228923bc"></a><!-- doxytag: member="mesh.c::fc_getMeshNumEntity" ref="g12d76ae817fee1f4ea941aad228923bc" args="(FC_Mesh mesh, FC_AssociationType assoc, int *numEntity)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshNumEntity           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numEntity</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns number of a type of mesh entity. 
<p>
<b>Description:</b> <p>
If you ask for edges or faces and they don't exist yet, they will be built.<p>
It is an error to ask for the association type FC_AT_WHOLE_DATASET.<p>
<b>Modifications:</b> <ul>
<li>06/07/04 RM, Created.</li><li>07/16/04 WSK, Changed name. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
input - association type of entity </td></tr>
<tr><td valign="top"><em>numEntity</em>&nbsp;</td><td>
output - number of entities in the mesh </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03299">3299</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05002">_fc_buildEdgeConns()</a>, <a class="el" href="mesh_8c-source.html#l05255">_fc_buildFaceConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="base_8c-source.html#l00477">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00286">fc_isAssociationTypeValid()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00107">_FC_MeshSlot::numEdge</a>, <a class="el" href="meshP_8h-source.html#l00104">_FC_MeshSlot::numElement</a>, <a class="el" href="meshP_8h-source.html#l00109">_FC_MeshSlot::numFace</a>, and <a class="el" href="meshP_8h-source.html#l00103">_FC_MeshSlot::numVertex</a>.</p>

<p>Referenced by <a class="el" href="shape_8c-source.html#l00402">_fc_buildFaceInfoListFromSubset()</a>, <a class="el" href="mesh_8c-source.html#l05587">_fc_buildMeshElementNeighborsViaEntity()</a>, <a class="el" href="mesh_8c-source.html#l04830">_fc_buildParents()</a>, <a class="el" href="fileio_8c-source.html#l00539">_fc_makeVariableFromFile()</a>, <a class="el" href="topo_8c-source.html#l00369">fc_changeMeshEntityType()</a>, <a class="el" href="subset_8c-source.html#l00438">fc_copySeqSubset()</a>, <a class="el" href="variable_8c-source.html#l02328">fc_copySeqVariable()</a>, <a class="el" href="subset_8c-source.html#l00351">fc_copySubset()</a>, <a class="el" href="variable_8c-source.html#l00929">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l01065">fc_copyVariableFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l01831">fc_copyVariableToRegionMesh()</a>, <a class="el" href="subset_8c-source.html#l00219">fc_createSeqSubset()</a>, <a class="el" href="subset_8c-source.html#l00135">fc_createSubset()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="mesh_8c-source.html#l03371">fc_getMeshEntityElementType()</a>, <a class="el" href="topo_8c-source.html#l00510">fc_getMeshEntityNeighbors()</a>, <a class="el" href="topo_8c-source.html#l00279">fc_getMeshEntityParents()</a>, <a class="el" href="topo_8c-source.html#l01645">fc_getSubsetSkin()</a>, <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, and <a class="el" href="variable_8c-source.html#l00604">fc_setVariableDataPtr()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03303"></a>03303   {
<a name="l03304"></a>03304   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03305"></a>03305   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03306"></a>03306   <span class="comment">// set up default return</span>
<a name="l03307"></a>03307   <span class="keywordflow">if</span> (numEntity != NULL)
<a name="l03308"></a>03308     *numEntity = -1;
<a name="l03309"></a>03309     
<a name="l03310"></a>03310   <span class="comment">// check input</span>
<a name="l03311"></a>03311   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03312"></a>03312   <span class="keywordflow">if</span> (meshSlot == NULL || !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(assoc) || 
<a name="l03313"></a>03313       assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || numEntity == NULL) {
<a name="l03314"></a>03314     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03315"></a>03315     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03316"></a>03316   }
<a name="l03317"></a>03317 
<a name="l03318"></a>03318   <span class="comment">// log message</span>
<a name="l03319"></a>03319   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of entities of type %s for mesh '%s'"</span>, 
<a name="l03320"></a>03320                       <a class="code" href="group__DataTypes.html#g615e96c3b13331857b5ba45d597c49de" title="Return the name of the FC_AssociationType&amp;#39;s value.">fc_getAssociationTypeText</a>(assoc),
<a name="l03321"></a>03321                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03322"></a>03322 
<a name="l03323"></a>03323   <span class="comment">// get the number entities on the mesh for given assoc type</span>
<a name="l03324"></a>03324   <span class="comment">// build edges &amp; faces if necessary</span>
<a name="l03325"></a>03325   <span class="keywordflow">switch</span>(assoc) {
<a name="l03326"></a>03326   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>:   *numEntity = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a>;   <span class="keywordflow">break</span>;
<a name="l03327"></a>03327   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>:     
<a name="l03328"></a>03328     <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a> == -1) {
<a name="l03329"></a>03329       rc = <a class="code" href="group__PrivateMesh.html#g92a252eecf35decc19223318cfcf6115" title="Build the edge info for the mesh.">_fc_buildEdgeConns</a>(mesh);
<a name="l03330"></a>03330       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03331"></a>03331         <span class="keywordflow">return</span> rc;
<a name="l03332"></a>03332     }
<a name="l03333"></a>03333     *numEntity = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a>;     <span class="keywordflow">break</span>;
<a name="l03334"></a>03334   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:     
<a name="l03335"></a>03335     <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a> == -1) {
<a name="l03336"></a>03336       rc = <a class="code" href="group__PrivateMesh.html#g6755757f7f19e1e17b435c06bf890d54" title="Build the face info for the mesh.">_fc_buildFaceConns</a>(mesh);
<a name="l03337"></a>03337       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03338"></a>03338         <span class="keywordflow">return</span> rc;
<a name="l03339"></a>03339     }
<a name="l03340"></a>03340     *numEntity = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a>;     <span class="keywordflow">break</span>; 
<a name="l03341"></a>03341   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>:  *numEntity = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#914b51c6fb5bd0c761db89c1486b9e78">numElement</a>;  <span class="keywordflow">break</span>;
<a name="l03342"></a>03342   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>:    *numEntity = 1;                     <span class="keywordflow">break</span>;
<a name="l03343"></a>03343   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a>:  <span class="comment">// fall through to default</span>
<a name="l03344"></a>03344   <span class="keywordflow">default</span>:
<a name="l03345"></a>03345     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03346"></a>03346   }
<a name="l03347"></a>03347   
<a name="l03348"></a>03348   <span class="comment">// should never reach here</span>
<a name="l03349"></a>03349   <span class="comment">//fc_printfErrorMessage("Should never reach here");</span>
<a name="l03350"></a>03350   <span class="comment">//return FC_ERROR;</span>
<a name="l03351"></a>03351   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03352"></a>03352 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8c619c146c0850895098f5dbfb487418"></a><!-- doxytag: member="mesh.c::fc_getMeshNumFace" ref="g8c619c146c0850895098f5dbfb487418" args="(FC_Mesh mesh, int *numFace)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshNumFace           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numFace</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get number of faces in a mesh. 
<p>
<b>Description:</b> <p>
If edges and faces do not yet exist, they are built.<p>
<b>Modifications:</b> <ul>
<li>09/21/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>numFace</em>&nbsp;</td><td>
output - number of faces </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l03208">3208</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l05255">_fc_buildFaceConns()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00109">_FC_MeshSlot::numFace</a>.</p>

<p>Referenced by <a class="el" href="shape_8c-source.html#l00893">_fc_createShapePartsFromFaceInfoList()</a>, <a class="el" href="topo_8c-source.html#l01149">_fc_getFaceNeighbors()</a>, <a class="el" href="topo_8c-source.html#l00922">_fc_getFaceParents()</a>, <a class="el" href="shape_8c-source.html#l00750">_fc_getOutwardFaceNormal()</a>, <a class="el" href="gaplines_8c-source.html#l00190">calcFaceOrients()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="geom_8c-source.html#l03702">fc_getDisplacedFaceAreas()</a>, and <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03211"></a>03211   {
<a name="l03212"></a>03212   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03213"></a>03213   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03214"></a>03214   
<a name="l03215"></a>03215   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l03216"></a>03216   <span class="keywordflow">if</span> (numFace != NULL)
<a name="l03217"></a>03217     *numFace = -1;
<a name="l03218"></a>03218   
<a name="l03219"></a>03219   <span class="comment">// check input</span>
<a name="l03220"></a>03220   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03221"></a>03221   <span class="keywordflow">if</span> (meshSlot == NULL || !numFace) {
<a name="l03222"></a>03222     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03223"></a>03223     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03224"></a>03224   }
<a name="l03225"></a>03225   
<a name="l03226"></a>03226   <span class="comment">// log message</span>
<a name="l03227"></a>03227   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of faces for mesh '%s'"</span>, 
<a name="l03228"></a>03228                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03229"></a>03229 
<a name="l03230"></a>03230   <span class="comment">// build faces if necessary</span>
<a name="l03231"></a>03231   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a> == -1) {
<a name="l03232"></a>03232     rc = <a class="code" href="group__PrivateMesh.html#g6755757f7f19e1e17b435c06bf890d54" title="Build the face info for the mesh.">_fc_buildFaceConns</a>(mesh);
<a name="l03233"></a>03233     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03234"></a>03234       <span class="keywordflow">return</span> rc;
<a name="l03235"></a>03235   }
<a name="l03236"></a>03236 
<a name="l03237"></a>03237   <span class="comment">// fill in requested values</span>
<a name="l03238"></a>03238   <span class="keywordflow">if</span> (numFace != NULL)
<a name="l03239"></a>03239     *numFace = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a>;
<a name="l03240"></a>03240   
<a name="l03241"></a>03241   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03242"></a>03242 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g9dca153475c9927e7497fd827cfd5562"></a><!-- doxytag: member="mesh.c::fc_getMeshNumVertex" ref="g9dca153475c9927e7497fd827cfd5562" args="(FC_Mesh mesh, int *numVertex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshNumVertex           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVertex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the number of vertices in a mesh. 
<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return numVertex = -1, and input check for numVertex = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numVertex</em>&nbsp;</td><td>
output - integer count of vertices </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02989">2989</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00103">_FC_MeshSlot::numVertex</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l05487">_fc_buildMeshVertexNeighborsViaEdge()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="topo_8c-source.html#l01007">_fc_getVertexNeighbors()</a>, <a class="el" href="topo_8c-source.html#l00696">_fc_getVertexParents()</a>, <a class="el" href="lsdynaio_8c-source.html#l02223">_fc_hasSharedLSDynaVertices()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, and <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02992"></a>02992   {
<a name="l02993"></a>02993   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02994"></a>02994   
<a name="l02995"></a>02995   <span class="comment">// set up defaults</span>
<a name="l02996"></a>02996   <span class="keywordflow">if</span> (numVertex != NULL)
<a name="l02997"></a>02997     *numVertex = -1;
<a name="l02998"></a>02998   
<a name="l02999"></a>02999   <span class="comment">// check input</span>
<a name="l03000"></a>03000   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03001"></a>03001   <span class="keywordflow">if</span> (meshSlot == NULL || numVertex == NULL) {
<a name="l03002"></a>03002     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03003"></a>03003     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03004"></a>03004   }
<a name="l03005"></a>03005   
<a name="l03006"></a>03006   <span class="comment">// log message</span>
<a name="l03007"></a>03007   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting numVertex for mesh '%s'"</span>, 
<a name="l03008"></a>03008                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03009"></a>03009 
<a name="l03010"></a>03010   <span class="comment">// fill in requested value</span>
<a name="l03011"></a>03011   *numVertex = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a>;
<a name="l03012"></a>03012   
<a name="l03013"></a>03013   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03014"></a>03014 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gcba52ba9ff6c1a6903fec0fe1796c659"></a><!-- doxytag: member="mesh.c::fc_getMeshTopodim" ref="gcba52ba9ff6c1a6903fec0fe1796c659" args="(FC_Mesh mesh, int *topodim)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshTopodim           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>topodim</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the topological dimensionality of the mesh. 
<p>
<b>Description:</b> <p>
The topological dimensionality of the mesh is not the same as the dimensionality of the space it is embedded in. Instead the topological dimensionality is dependent on the element type where point meshes are 0D, lines meshes are 1D, surface meshes like triangles and quads are 2D, and volume meshes like tets, pyramids, prisms and hexs are 3D.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return dim=-1, and input checking </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>topodim</em>&nbsp;</td><td>
output - topological dimensionality of elements </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02914">2914</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00101">_FC_MeshSlot::topodim</a>.</p>

<p>Referenced by <a class="el" href="tears_8c-source.html#l00922">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02917"></a>02917   {
<a name="l02918"></a>02918   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02919"></a>02919   
<a name="l02920"></a>02920   <span class="comment">// set up defaults </span>
<a name="l02921"></a>02921   <span class="keywordflow">if</span> (topodim != NULL)
<a name="l02922"></a>02922     *topodim = -1; 
<a name="l02923"></a>02923   
<a name="l02924"></a>02924   <span class="comment">// check input</span>
<a name="l02925"></a>02925   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l02926"></a>02926   <span class="keywordflow">if</span> (meshSlot == NULL || topodim == NULL) {
<a name="l02927"></a>02927     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02928"></a>02928     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02929"></a>02929   }
<a name="l02930"></a>02930   
<a name="l02931"></a>02931   <span class="comment">// log message</span>
<a name="l02932"></a>02932   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting topo dim for mesh '%s'"</span>, 
<a name="l02933"></a>02933                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02934"></a>02934 
<a name="l02935"></a>02935   <span class="comment">// fill in requested value</span>
<a name="l02936"></a>02936   *topodim = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b621647a95b1a86b85d543583e666af2">topodim</a>;
<a name="l02937"></a>02937   
<a name="l02938"></a>02938   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02939"></a>02939 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g52cbaab898bdb451fa44b96ccdc9a206"></a><!-- doxytag: member="mesh.c::fc_getNumMesh" ref="g52cbaab898bdb451fa44b96ccdc9a206" args="(FC_Dataset dataset, int *numMesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getNumMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numMesh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the the number of meshes in a dataset. 
<p>
<b>Modifications:</b> <ul>
<li>9/28/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numMesh</em>&nbsp;</td><td>
output - number of meshes returned </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02235">2235</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00092">_FC_DsSlot::numMesh</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00831">fc_printDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02238"></a>02238   {
<a name="l02239"></a>02239   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l02240"></a>02240   
<a name="l02241"></a>02241   <span class="comment">// default return values</span>
<a name="l02242"></a>02242   <span class="keywordflow">if</span> (numMesh != NULL) 
<a name="l02243"></a>02243     *numMesh = -1;
<a name="l02244"></a>02244   
<a name="l02245"></a>02245   <span class="comment">// check input</span>
<a name="l02246"></a>02246   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l02247"></a>02247   <span class="keywordflow">if</span> (dsSlot == NULL || numMesh == NULL) {
<a name="l02248"></a>02248     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02249"></a>02249     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02250"></a>02250   }
<a name="l02251"></a>02251   
<a name="l02252"></a>02252   <span class="comment">// log message</span>
<a name="l02253"></a>02253   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of meshes from dataset '%s'"</span>,
<a name="l02254"></a>02254                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02255"></a>02255   
<a name="l02256"></a>02256   <span class="comment">// get num meshes</span>
<a name="l02257"></a>02257   *numMesh = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#132e931f020068da8e8e906bb9c2e82e">numMesh</a>;
<a name="l02258"></a>02258   
<a name="l02259"></a>02259   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02260"></a>02260 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gab6b9ca1bc6e1e7d549ce9fcd396a5e6"></a><!-- doxytag: member="mesh.c::fc_isMeshValid" ref="gab6b9ca1bc6e1e7d549ce9fcd396a5e6" args="(FC_Mesh mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isMeshValid           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that the handle refers to a valid mesh. 
<p>
<b>Description:</b> <p>
Returns 1 (true) is the handle is valid, and 0 (false) if it is not.<p>
<b>Modifications:</b> <ul>
<li>05/25/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02742">2742</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="table_8c-source.html#l00332">_fc_isHandleValid()</a>, <a class="el" href="mesh_8c-source.html#l00092">meshTableSize</a>, <a class="el" href="base_8h-source.html#l00269">FC_Mesh::slotID</a>, and <a class="el" href="base_8h-source.html#l00270">FC_Mesh::uID</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l05587">_fc_buildMeshElementNeighborsViaEntity()</a>, <a class="el" href="mesh_8c-source.html#l05487">_fc_buildMeshVertexNeighborsViaEdge()</a>, <a class="el" href="mesh_8c-source.html#l04830">_fc_buildParents()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="topo_8c-source.html#l01072">_fc_getEdgeNeighbors()</a>, <a class="el" href="topo_8c-source.html#l00798">_fc_getEdgeParents()</a>, <a class="el" href="topo_8c-source.html#l01259">_fc_getElementNeighbors()</a>, <a class="el" href="topo_8c-source.html#l01149">_fc_getFaceNeighbors()</a>, <a class="el" href="topo_8c-source.html#l00922">_fc_getFaceParents()</a>, <a class="el" href="exodusio_8c-source.html#l00383">_fc_getMeshExodusGlobalElementIDOffset()</a>, <a class="el" href="exodusio_8c-source.html#l00337">_fc_getMeshExodusGlobalNodalIDsPtr()</a>, <a class="el" href="shape_8c-source.html#l00750">_fc_getOutwardFaceNormal()</a>, <a class="el" href="geom_8c-source.html#l05181">_fc_getSubsetsProximityArgsTest()</a>, <a class="el" href="geom_8c-source.html#l06312">_fc_getVertexIDsWithinBoundingBoxUsingVertexBin()</a>, <a class="el" href="geom_8c-source.html#l06462">_fc_getVertexIDsWithinSphereUsingVertexBin()</a>, <a class="el" href="topo_8c-source.html#l01007">_fc_getVertexNeighbors()</a>, <a class="el" href="topo_8c-source.html#l00696">_fc_getVertexParents()</a>, <a class="el" href="fileio_8c-source.html#l00539">_fc_makeVariableFromFile()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00624">doesSeqVarExist()</a>, <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="topo_8c-source.html#l00369">fc_changeMeshEntityType()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="subset_8c-source.html#l00351">fc_copySubset()</a>, <a class="el" href="variable_8c-source.html#l00929">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l01065">fc_copyVariableFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l01831">fc_copyVariableToRegionMesh()</a>, <a class="el" href="geom_8c-source.html#l05589">fc_createDisplacedMeshVertexBin()</a>, <a class="el" href="geom_8c-source.html#l05522">fc_createMeshVertexBin()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="geom_8c-source.html#l03503">fc_getDisplacedEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03702">fc_getDisplacedFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l00763">fc_getDisplacedMeshBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l02656">fc_getDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l00352">fc_getDisplacedMeshCoords()</a>, <a class="el" href="geom_8c-source.html#l01699">fc_getDisplacedMeshDiameter()</a>, <a class="el" href="geom_8c-source.html#l01929">fc_getDisplacedMeshesDiameter()</a>, <a class="el" href="geom_8c-source.html#l04065">fc_getDisplacedMeshVolume()</a>, <a class="el" href="geom_8c-source.html#l03900">fc_getDisplacedRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04542">fc_getDisplacedSurfaceNormals()</a>, <a class="el" href="geom_8c-source.html#l03415">fc_getEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l05704">fc_getEntitiesWithinBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l05786">fc_getEntitiesWithinSphere()</a>, <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l00686">fc_getMeshBoundingBox()</a>, <a class="el" href="geom_8c-source.html#l02590">fc_getMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l01649">fc_getMeshDiameter()</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="mesh_8c-source.html#l03371">fc_getMeshEntityElementType()</a>, <a class="el" href="topo_8c-source.html#l00510">fc_getMeshEntityNeighbors()</a>, <a class="el" href="topo_8c-source.html#l00279">fc_getMeshEntityParents()</a>, <a class="el" href="geom_8c-source.html#l01841">fc_getMeshesDiameter()</a>, <a class="el" href="shape_8c-source.html#l01515">fc_getMeshShapes()</a>, <a class="el" href="topo_8c-source.html#l01792">fc_getMeshSkin()</a>, <a class="el" href="geom_8c-source.html#l03808">fc_getRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04448">fc_getSurfaceNormals()</a>, <a class="el" href="geom_8c-source.html#l02836">fc_getVariableWeightedDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l02734">fc_getVariableWeightedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l00309">fc_isValidDisplacementVariable()</a>, <a class="el" href="subset_8c-source.html#l03401">fc_printSubsetOfMesh()</a>, and <a class="el" href="geom_8c-source.html#l01223">fc_projectedElementBoundingBoxIntersection()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02744"></a>02744   {
<a name="l02745"></a>02745   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#g7da0137a7b29468ab994bb65e96ebf99" title="Check that a handle is valid.">_fc_isHandleValid</a>(mesh.<a class="code" href="structFC__Mesh.html#3b71dde557ca668870b3ff09e385387d">slotID</a>, mesh.<a class="code" href="structFC__Mesh.html#e428ce6e31c2f25e1c0799ec046bd0b9">uID</a>, <a class="code" href="group__PrivateMesh.html#ge7edb0cb4bf30e4630b9f04ffff2f6f5" title="The number of allocated slots in the mesh table.">meshTableSize</a>,
<a name="l02746"></a>02746                            (<a class="code" href="struct__FC__SlotHeader.html" title="Slot Header.">_FC_SlotHeader</a>**)<a class="code" href="group__PrivateMesh.html#g78c945ceda15c96e9def4f8d51621d32" title="The mesh table.">meshTable</a>);
<a name="l02747"></a>02747 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g997dddca0418a14d3d3a2d2f7a76d622"></a><!-- doxytag: member="mesh.c::fc_printMesh" ref="g997dddca0418a14d3d3a2d2f7a76d622" args="(FC_Mesh mesh, char *label, int print_edgeConns, int print_faceConns, int print_elemConns, int print_coords)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_printMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_edgeConns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_faceConns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_elemConns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_coords</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print mesh meta data to stdout, and optionally the connections and/or coordinates. 
<p>
<b>Modifications:</b> <ul>
<li>11/20/03 WSK Created.</li><li>10/31/07 ACG optional precision</li><li>03/03/08 ACG seq subset </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>label</em>&nbsp;</td><td>
input - label to prepend variable name with, can be NULL </td></tr>
<tr><td valign="top"><em>print_edgeConns</em>&nbsp;</td><td>
input &gt; 0 = print the edge connectivities. </td></tr>
<tr><td valign="top"><em>print_faceConns</em>&nbsp;</td><td>
input &gt; 0 = print the face connectivities. </td></tr>
<tr><td valign="top"><em>print_elemConns</em>&nbsp;</td><td>
input &gt; 0 = print the element connectivities. </td></tr>
<tr><td valign="top"><em>print_coords</em>&nbsp;</td><td>
input - 1 = print the coordinates too 2 = print the coordinates in exponential notation w 5 digits precision </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l04004">4004</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8h-source.html#l00129">FC_ET_MIXED</a>, <a class="el" href="base_8c-source.html#l00550">fc_getElementTypeNumVertex()</a>, <a class="el" href="base_8c-source.html#l00385">fc_getElementTypeText()</a>, <a class="el" href="mesh_8c-source.html#l03436">fc_getMeshCoordsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03571">fc_getMeshEdgeConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03099">fc_getMeshEdgeFaceInfo()</a>, <a class="el" href="mesh_8c-source.html#l03762">fc_getMeshElementConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l03691">fc_getMeshFaceConnsPtr()</a>, <a class="el" href="mesh_8c-source.html#l02848">fc_getMeshInfo()</a>, <a class="el" href="mesh_8c-source.html#l03161">fc_getMeshNumEdge()</a>, <a class="el" href="subset_8c-source.html#l01420">fc_getNumSeqSubset()</a>, <a class="el" href="variable_8c-source.html#l03810">fc_getNumSeqVariable()</a>, <a class="el" href="subset_8c-source.html#l01385">fc_getNumSubset()</a>, <a class="el" href="variable_8c-source.html#l03776">fc_getNumVariable()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00057">INDENT_STR</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00107">_FC_MeshSlot::numEdge</a>, and <a class="el" href="meshP_8h-source.html#l00109">_FC_MeshSlot::numFace</a>.</p>

<p>Referenced by <a class="el" href="fcdump_8c-source.html#l00194">main()</a>, and <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04014"></a>04014   {
<a name="l04015"></a>04015   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l04016"></a>04016   <span class="keywordtype">int</span> i, j;
<a name="l04017"></a>04017   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l04018"></a>04018   <span class="keywordtype">int</span> topodim, dim, numVertex, numElement, numSubset, numSeqSubset, numVar, numSeqVar;
<a name="l04019"></a>04019   <span class="keywordtype">int</span> numEdge, numFace;
<a name="l04020"></a>04020   <a class="code" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a" title="Possible element types.">FC_ElementType</a> elemType, faceType;
<a name="l04021"></a>04021   <span class="keywordtype">int</span>* ebuf, *numVertPerFace, maxNum;
<a name="l04022"></a>04022   <span class="keywordtype">double</span>* vbuf;
<a name="l04023"></a>04023 
<a name="l04024"></a>04024   <span class="comment">// special case: printing a null handle is not an error</span>
<a name="l04025"></a>04025   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(mesh, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>)) {
<a name="l04026"></a>04026     printf(<span class="stringliteral">"Mesh: FC_NULL_MESH\n"</span>);
<a name="l04027"></a>04027     fflush(NULL);
<a name="l04028"></a>04028     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04029"></a>04029   }
<a name="l04030"></a>04030 
<a name="l04031"></a>04031   <span class="comment">// check input</span>
<a name="l04032"></a>04032   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l04033"></a>04033   <span class="keywordflow">if</span> (meshSlot == NULL) {
<a name="l04034"></a>04034     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04035"></a>04035     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04036"></a>04036   }
<a name="l04037"></a>04037 
<a name="l04038"></a>04038   <span class="comment">// log message</span>
<a name="l04039"></a>04039   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Printing mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04040"></a>04040 
<a name="l04041"></a>04041   <span class="comment">// print label &amp; var name</span>
<a name="l04042"></a>04042   <span class="keywordflow">if</span> (label)
<a name="l04043"></a>04043     printf(<span class="stringliteral">"%s: "</span>, label);
<a name="l04044"></a>04044   <span class="keywordflow">else</span>
<a name="l04045"></a>04045     printf(<span class="stringliteral">"Mesh: "</span>);
<a name="l04046"></a>04046   printf(<span class="stringliteral">"'%s'\n"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04047"></a>04047   fflush(NULL);
<a name="l04048"></a>04048 
<a name="l04049"></a>04049   <span class="comment">// print meta data</span>
<a name="l04050"></a>04050   rc = <a class="code" href="group__Mesh.html#ged61b1f684fc2a6ac489c10841cdb591" title="Get information about a mesh.">fc_getMeshInfo</a>(mesh,  &amp;topodim, &amp;dim, &amp;numVertex, &amp;numElement,
<a name="l04051"></a>04051                       &amp;elemType);
<a name="l04052"></a>04052   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04053"></a>04053     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for mesh '%s'"</span>,
<a name="l04054"></a>04054                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04055"></a>04055     <span class="keywordflow">return</span> rc;
<a name="l04056"></a>04056   }
<a name="l04057"></a>04057   rc = <a class="code" href="group__Subset.html#gc9ec4bca2e0ee52d54c9718d6a54fd4b" title="Get the number of subsets in a mesh.">fc_getNumSubset</a>(mesh, &amp;numSubset);
<a name="l04058"></a>04058   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04059"></a>04059     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get subsets for mesh '%s'"</span>,
<a name="l04060"></a>04060                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04061"></a>04061     <span class="keywordflow">return</span> rc;
<a name="l04062"></a>04062   }
<a name="l04063"></a>04063   rc = <a class="code" href="group__Subset.html#ga695f5af84135aef9b92b8fe5426e949" title="Get the number of seq subsets in a mesh.">fc_getNumSeqSubset</a>(mesh, &amp;numSeqSubset);
<a name="l04064"></a>04064   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04065"></a>04065     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get seq subsets for mesh '%s'"</span>,
<a name="l04066"></a>04066                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04067"></a>04067     <span class="keywordflow">return</span> rc;
<a name="l04068"></a>04068   }
<a name="l04069"></a>04069   rc = <a class="code" href="group__Variable.html#g34fd68c4a0f71ff43da35c9cdc37c1d2" title="Get the number of variables in a mesh.">fc_getNumVariable</a>(mesh, &amp;numVar);
<a name="l04070"></a>04070   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04071"></a>04071     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get variables for mesh '%s'"</span>,
<a name="l04072"></a>04072                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04073"></a>04073     <span class="keywordflow">return</span> rc;
<a name="l04074"></a>04074   }
<a name="l04075"></a>04075   rc = <a class="code" href="group__Variable.html#gcaaf2b5a1e4349487ea32e27aa09dbc8" title="Get the number of sequence variables in a mesh.">fc_getNumSeqVariable</a>(mesh, &amp;numSeqVar);
<a name="l04076"></a>04076   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04077"></a>04077     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get seq variables for mesh '%s'"</span>,
<a name="l04078"></a>04078                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04079"></a>04079     <span class="keywordflow">return</span> rc;
<a name="l04080"></a>04080   }
<a name="l04081"></a>04081   printf(<span class="stringliteral">"%snumVertex = %d, dim = %d\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, numVertex, dim);
<a name="l04082"></a>04082   printf(<span class="stringliteral">"%snumElement = %d, topodim = %d, elemType = %s\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>,
<a name="l04083"></a>04083          numElement, topodim, <a class="code" href="group__DataTypes.html#g4152b6e700d60abe601b48ce595db9a7" title="Return the name of the FC_ElementType&amp;#39;s value.">fc_getElementTypeText</a>(elemType));
<a name="l04084"></a>04084   printf(<span class="stringliteral">"%snumSubset = %d, numSeqSubset = %d\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, numSubset, numSeqSubset);
<a name="l04085"></a>04085   printf(<span class="stringliteral">"%snumVar = %d, numSeqVar = %d\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, numVar, numSeqVar);
<a name="l04086"></a>04086   fflush(NULL);
<a name="l04087"></a>04087   
<a name="l04088"></a>04088   <span class="comment">// print edge connectivities</span>
<a name="l04089"></a>04089   <span class="keywordflow">if</span> (print_edgeConns &gt; 0) {
<a name="l04090"></a>04090     <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a> &lt; 0) {
<a name="l04091"></a>04091       printf(<span class="stringliteral">"%sEdges have not been built for this mesh\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>);
<a name="l04092"></a>04092       fflush(NULL);
<a name="l04093"></a>04093     }
<a name="l04094"></a>04094     <span class="keywordflow">else</span> {
<a name="l04095"></a>04095       rc = <a class="code" href="group__Mesh.html#g82f4aa5cf3a4a5011ae65cab2ed1a8c1" title="Get number of edges in a mesh.">fc_getMeshNumEdge</a>(mesh, &amp;numEdge);
<a name="l04096"></a>04096       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04097"></a>04097         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get numEdge for mesh '%s'"</span>,
<a name="l04098"></a>04098                                meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04099"></a>04099         <span class="keywordflow">return</span> rc;
<a name="l04100"></a>04100       }
<a name="l04101"></a>04101       rc = <a class="code" href="group__Mesh.html#gcae096882dec5f984503869f5f64acfc" title="Return edge connectivities.">fc_getMeshEdgeConnsPtr</a>(mesh, &amp;ebuf);
<a name="l04102"></a>04102       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04103"></a>04103         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get edge conns for mesh '%s'"</span>,
<a name="l04104"></a>04104                               meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04105"></a>04105         <span class="keywordflow">return</span> rc;
<a name="l04106"></a>04106       }
<a name="l04107"></a>04107       
<a name="l04108"></a>04108       <span class="comment">// print the conns</span>
<a name="l04109"></a>04109       printf(<span class="stringliteral">"%sEdge connectivities (2 vertices per edge):\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>);
<a name="l04110"></a>04110       <span class="keywordflow">for</span> (i = 0; i &lt; numEdge; i++) {
<a name="l04111"></a>04111         printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l04112"></a>04112         <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++) {
<a name="l04113"></a>04113           printf(<span class="stringliteral">"%6d "</span>, ebuf[i*2 + j]);
<a name="l04114"></a>04114           fflush(NULL);
<a name="l04115"></a>04115         }
<a name="l04116"></a>04116         printf(<span class="stringliteral">"\n"</span>);
<a name="l04117"></a>04117         fflush(NULL);
<a name="l04118"></a>04118       }
<a name="l04119"></a>04119     }
<a name="l04120"></a>04120   }
<a name="l04121"></a>04121   
<a name="l04122"></a>04122   <span class="comment">// print face connectivities</span>
<a name="l04123"></a>04123   <span class="keywordflow">if</span> (print_faceConns &gt; 0) {
<a name="l04124"></a>04124     <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a> &lt; 0) {
<a name="l04125"></a>04125       printf(<span class="stringliteral">"%sFaces have not been built for this mesh\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>);
<a name="l04126"></a>04126       fflush(NULL);
<a name="l04127"></a>04127     }
<a name="l04128"></a>04128     <span class="keywordflow">else</span> {
<a name="l04129"></a>04129       rc = <a class="code" href="group__Mesh.html#g5ae1bc6adbd87df4eb017c1c521f4225" title="Get information about edges and faces in a mesh.">fc_getMeshEdgeFaceInfo</a>(mesh, NULL, &amp;numFace, &amp;faceType);
<a name="l04130"></a>04130       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04131"></a>04131         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get edge/face info for mesh '%s'"</span>,
<a name="l04132"></a>04132                               meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04133"></a>04133         <span class="keywordflow">return</span> rc;
<a name="l04134"></a>04134       }
<a name="l04135"></a>04135       rc = <a class="code" href="group__Mesh.html#g8e318f4b17572413004acf14b18deb2b" title="Return face connectivities.">fc_getMeshFaceConnsPtr</a>(mesh, &amp;numVertPerFace, &amp;maxNum, &amp;ebuf);
<a name="l04136"></a>04136       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04137"></a>04137         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get edge conns for mesh '%s'"</span>,
<a name="l04138"></a>04138                               meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04139"></a>04139         <span class="keywordflow">return</span> rc;
<a name="l04140"></a>04140       }
<a name="l04141"></a>04141       
<a name="l04142"></a>04142       <span class="comment">// print the conns</span>
<a name="l04143"></a>04143       <span class="keywordflow">if</span> (faceType == <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a9f716d199046924e5d22004f83daaa50">FC_ET_MIXED</a>)
<a name="l04144"></a>04144         printf(<span class="stringliteral">"%sFace connectivities (faceType = %s, 3 or 4 vertices per "</span>
<a name="l04145"></a>04145                <span class="stringliteral">"element):\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__DataTypes.html#g4152b6e700d60abe601b48ce595db9a7" title="Return the name of the FC_ElementType&amp;#39;s value.">fc_getElementTypeText</a>(faceType));
<a name="l04146"></a>04146       <span class="keywordflow">else</span>
<a name="l04147"></a>04147         printf(<span class="stringliteral">"%sFace connectivities (faceType = %s, %d vertices per "</span>
<a name="l04148"></a>04148                <span class="stringliteral">"element):\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__DataTypes.html#g4152b6e700d60abe601b48ce595db9a7" title="Return the name of the FC_ElementType&amp;#39;s value.">fc_getElementTypeText</a>(faceType), 
<a name="l04149"></a>04149                <a class="code" href="group__DataTypes.html#g2a400f7126e79f149032162c87c4eee8" title="Returns number of vertices in a type of element.">fc_getElementTypeNumVertex</a>(faceType));
<a name="l04150"></a>04150       fflush(NULL);
<a name="l04151"></a>04151       <span class="keywordflow">for</span> (i = 0; i &lt; numFace; i++) {
<a name="l04152"></a>04152         printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l04153"></a>04153         <span class="keywordflow">for</span> (j = 0; j &lt; numVertPerFace[i]; j++) { 
<a name="l04154"></a>04154           printf(<span class="stringliteral">"%6d "</span>, ebuf[i*maxNum+j]);
<a name="l04155"></a>04155           fflush(NULL);
<a name="l04156"></a>04156         }
<a name="l04157"></a>04157         printf(<span class="stringliteral">"\n"</span>);
<a name="l04158"></a>04158         fflush(NULL);
<a name="l04159"></a>04159       }
<a name="l04160"></a>04160     }
<a name="l04161"></a>04161   }
<a name="l04162"></a>04162   
<a name="l04163"></a>04163   <span class="comment">// print element connectivities</span>
<a name="l04164"></a>04164   <span class="keywordflow">if</span> (print_elemConns &gt; 0) {
<a name="l04165"></a>04165     <span class="keywordtype">int</span> numVertPerElem = <a class="code" href="group__DataTypes.html#g2a400f7126e79f149032162c87c4eee8" title="Returns number of vertices in a type of element.">fc_getElementTypeNumVertex</a>(elemType);
<a name="l04166"></a>04166     rc = <a class="code" href="group__Mesh.html#g19906bcae562d226991740da142000c0" title="Return element to vertex connectivities for the mesh.">fc_getMeshElementConnsPtr</a>(mesh, &amp;ebuf);
<a name="l04167"></a>04167     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04168"></a>04168       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get element conns for mesh '%s'"</span>,
<a name="l04169"></a>04169                             meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04170"></a>04170       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l04171"></a>04171     }
<a name="l04172"></a>04172     
<a name="l04173"></a>04173     <span class="comment">// print the conns</span>
<a name="l04174"></a>04174     printf(<span class="stringliteral">"%sElement connectivities (%d vertices per element):\n"</span>, 
<a name="l04175"></a>04175            <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, numVertPerElem);
<a name="l04176"></a>04176     fflush(NULL);
<a name="l04177"></a>04177     <span class="keywordflow">for</span> (i = 0; i &lt; numElement; i++) {
<a name="l04178"></a>04178       printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l04179"></a>04179       <span class="keywordflow">for</span> (j = 0; j &lt; numVertPerElem; j++) {
<a name="l04180"></a>04180         printf(<span class="stringliteral">"%6d "</span>, ebuf[i*numVertPerElem + j]);
<a name="l04181"></a>04181         fflush(NULL);
<a name="l04182"></a>04182       }
<a name="l04183"></a>04183       printf(<span class="stringliteral">"\n"</span>);
<a name="l04184"></a>04184       fflush(NULL);
<a name="l04185"></a>04185     }
<a name="l04186"></a>04186   }
<a name="l04187"></a>04187   
<a name="l04188"></a>04188   <span class="comment">// print coords</span>
<a name="l04189"></a>04189   <span class="keywordflow">if</span> (print_coords &gt; 0) {
<a name="l04190"></a>04190     rc = <a class="code" href="group__Mesh.html#gff8561557c19ae03be9ff18cc73a6823" title="Return the vertex coordinates of the mesh.">fc_getMeshCoordsPtr</a>(mesh, &amp;vbuf);
<a name="l04191"></a>04191     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04192"></a>04192       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get coords for mesh '%s'"</span>,
<a name="l04193"></a>04193                             meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04194"></a>04194       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l04195"></a>04195     }
<a name="l04196"></a>04196     
<a name="l04197"></a>04197     <span class="comment">// print the coordinates per vertex</span>
<a name="l04198"></a>04198     printf(<span class="stringliteral">"%sVertex Coordinates:\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>);
<a name="l04199"></a>04199     fflush(NULL);
<a name="l04200"></a>04200     <span class="keywordflow">for</span> (i = 0; i &lt; numVertex; i++) {
<a name="l04201"></a>04201       printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l04202"></a>04202       <span class="keywordflow">for</span> (j = 0; j &lt; dim; j++) {
<a name="l04203"></a>04203         <span class="comment">// see comment on precision in for DOUBLE case in fc_printVariable()</span>
<a name="l04204"></a>04204         <span class="comment">//printf("%20.15g ", vbuf[i*dim + j]);</span>
<a name="l04205"></a>04205      <span class="keywordflow">switch</span> (print_coords){
<a name="l04206"></a>04206      <span class="keywordflow">case</span> 2:
<a name="l04207"></a>04207        printf(<span class="stringliteral">"%5le "</span>, vbuf[i*dim + j]);
<a name="l04208"></a>04208        <span class="keywordflow">break</span>;
<a name="l04209"></a>04209      <span class="keywordflow">default</span>:
<a name="l04210"></a>04210        printf(<span class="stringliteral">"%16.11g "</span>, vbuf[i*dim + j]);
<a name="l04211"></a>04211        <span class="keywordflow">break</span>;
<a name="l04212"></a>04212      }
<a name="l04213"></a>04213         fflush(NULL);
<a name="l04214"></a>04214       }
<a name="l04215"></a>04215       printf(<span class="stringliteral">"\n"</span>);
<a name="l04216"></a>04216       fflush(NULL);
<a name="l04217"></a>04217     }
<a name="l04218"></a>04218   }
<a name="l04219"></a>04219   
<a name="l04220"></a>04220   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04221"></a>04221 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g0b36a706a38302af3c13f8970b1d1673"></a><!-- doxytag: member="mesh.c::fc_releaseMesh" ref="g0b36a706a38302af3c13f8970b1d1673" args="(FC_Mesh mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_releaseMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to minimize mesh's memory usage. 
<p>
<b>Description:</b> <p>
Call to try to release un-needed memory in a mesh. If the mesh has been saved to disk, the large data is released. If the mesh has not be saved to disk, all large data is saved.<p>
If internal mesh structures like elements and vertices exists, they may be freed as long as there are no subsets or variables associated with edges or faces.<p>
This function will recursively call release on it's child subsets and variables<p>
<b>Modifications:</b> <ul>
<li>9/27/04 WSK Created.</li><li>03/07/08 ACG seq subsets </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02417">2417</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="meshP_8h-source.html#l00112">_FC_MeshSlot::coords</a>, <a class="el" href="meshP_8h-source.html#l00145">_FC_MeshSlot::edgeParentsPerVert</a>, <a class="el" href="meshP_8h-source.html#l00127">_FC_MeshSlot::edgeToVertConns</a>, <a class="el" href="meshP_8h-source.html#l00141">_FC_MeshSlot::elemFaceOrients</a>, <a class="el" href="meshP_8h-source.html#l00170">_FC_MeshSlot::elemNeighsViaEdge</a>, <a class="el" href="meshP_8h-source.html#l00174">_FC_MeshSlot::elemNeighsViaFace</a>, <a class="el" href="meshP_8h-source.html#l00166">_FC_MeshSlot::elemNeighsViaVert</a>, <a class="el" href="meshP_8h-source.html#l00154">_FC_MeshSlot::elemParentsPerEdge</a>, <a class="el" href="meshP_8h-source.html#l00157">_FC_MeshSlot::elemParentsPerFace</a>, <a class="el" href="meshP_8h-source.html#l00151">_FC_MeshSlot::elemParentsPerVert</a>, <a class="el" href="meshP_8h-source.html#l00137">_FC_MeshSlot::elemToEdgeConns</a>, <a class="el" href="meshP_8h-source.html#l00139">_FC_MeshSlot::elemToFaceConns</a>, <a class="el" href="meshP_8h-source.html#l00116">_FC_MeshSlot::elemToVertConns</a>, <a class="el" href="meshP_8h-source.html#l00148">_FC_MeshSlot::faceParentsPerVert</a>, <a class="el" href="meshP_8h-source.html#l00131">_FC_MeshSlot::faceToVertConns</a>, <a class="el" href="meshP_8h-source.html#l00129">_FC_MeshSlot::faceTypes</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="subset_8c-source.html#l01313">fc_getSeqSubsets()</a>, <a class="el" href="variable_8c-source.html#l03637">fc_getSeqVariables()</a>, <a class="el" href="subset_8c-source.html#l02782">fc_getSubsetInfo()</a>, <a class="el" href="subset_8c-source.html#l01253">fc_getSubsets()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="variable_8c-source.html#l03573">fc_getVariables()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="subset_8c-source.html#l02427">fc_releaseSeqSubset()</a>, <a class="el" href="variable_8c-source.html#l04926">fc_releaseSeqVariable()</a>, <a class="el" href="subset_8c-source.html#l02376">fc_releaseSubset()</a>, <a class="el" href="variable_8c-source.html#l04879">fc_releaseVariable()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00107">_FC_MeshSlot::numEdge</a>, <a class="el" href="meshP_8h-source.html#l00144">_FC_MeshSlot::numEdgePerVert</a>, <a class="el" href="meshP_8h-source.html#l00104">_FC_MeshSlot::numElement</a>, <a class="el" href="meshP_8h-source.html#l00168">_FC_MeshSlot::numElemNeighsViaEdge</a>, <a class="el" href="meshP_8h-source.html#l00172">_FC_MeshSlot::numElemNeighsViaFace</a>, <a class="el" href="meshP_8h-source.html#l00164">_FC_MeshSlot::numElemNeighsViaVert</a>, <a class="el" href="meshP_8h-source.html#l00153">_FC_MeshSlot::numElemPerEdge</a>, <a class="el" href="meshP_8h-source.html#l00156">_FC_MeshSlot::numElemPerFace</a>, <a class="el" href="meshP_8h-source.html#l00150">_FC_MeshSlot::numElemPerVert</a>, <a class="el" href="meshP_8h-source.html#l00109">_FC_MeshSlot::numFace</a>, <a class="el" href="meshP_8h-source.html#l00147">_FC_MeshSlot::numFacePerVert</a>, <a class="el" href="meshP_8h-source.html#l00103">_FC_MeshSlot::numVertex</a>, <a class="el" href="meshP_8h-source.html#l00160">_FC_MeshSlot::numVertNeighsViaEdge</a>, <a class="el" href="meshP_8h-source.html#l00130">_FC_MeshSlot::numVertPerFace</a>, and <a class="el" href="meshP_8h-source.html#l00162">_FC_MeshSlot::vertNeighsViaEdge</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02419"></a>02419   {
<a name="l02420"></a>02420   <span class="keywordtype">int</span> i;
<a name="l02421"></a>02421   <span class="keywordtype">int</span> *numSteps;
<a name="l02422"></a>02422   <a class="code" href="structFC__Subset.html" title="Subset Handle.">FC_Subset</a> *subsets, **seqSubsets;
<a name="l02423"></a>02423   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *variables, **seqVariables;
<a name="l02424"></a>02424   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l02425"></a>02425   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l02426"></a>02426   <span class="keywordtype">int</span> usingEdge, usingFace, numSubset, numVar, numSeqVar, numSeqSub;
<a name="l02427"></a>02427   
<a name="l02428"></a>02428   <span class="comment">// special case: releasing a null handle is not an error</span>
<a name="l02429"></a>02429   <span class="keywordflow">if</span> ( <a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(mesh, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>)) {
<a name="l02430"></a>02430     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Releasing FC_NULL_MESH"</span>);
<a name="l02431"></a>02431     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02432"></a>02432   }
<a name="l02433"></a>02433 
<a name="l02434"></a>02434   <span class="comment">// check input</span>
<a name="l02435"></a>02435   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l02436"></a>02436   <span class="keywordflow">if</span> (meshSlot == NULL) {
<a name="l02437"></a>02437     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02438"></a>02438     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02439"></a>02439   }
<a name="l02440"></a>02440   
<a name="l02441"></a>02441   <span class="comment">// log message</span>
<a name="l02442"></a>02442   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Cleaning up mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02443"></a>02443 
<a name="l02444"></a>02444   <span class="comment">// call release on children subsets &amp; variables</span>
<a name="l02445"></a>02445   <span class="comment">// also note whether any children use edges or faces</span>
<a name="l02446"></a>02446   usingEdge = 0;
<a name="l02447"></a>02447   usingFace = 0;
<a name="l02448"></a>02448   <a class="code" href="group__Subset.html#gb12aea784bf43ec6a29a8e51a3c0da51" title="Get the subsets in a mesh.">fc_getSubsets</a>(mesh, &amp;numSubset, &amp;subsets);
<a name="l02449"></a>02449   <span class="keywordflow">for</span> (i = 0; i &lt; numSubset; i++) {
<a name="l02450"></a>02450     <a class="code" href="group__Subset.html#g4deb677b461d276676f290e7c7879595" title="Attempt to minimize subset&amp;#39;s memory usage.">fc_releaseSubset</a>(subsets[i]);
<a name="l02451"></a>02451     <a class="code" href="group__Subset.html#g815857d0e2d573d0418a3892229c0d83" title="Get information about a subset.">fc_getSubsetInfo</a>(subsets[i], NULL, NULL, &amp;assoc);
<a name="l02452"></a>02452     <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>)
<a name="l02453"></a>02453       usingEdge = 1;
<a name="l02454"></a>02454     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>) 
<a name="l02455"></a>02455       usingFace = 1;
<a name="l02456"></a>02456   }
<a name="l02457"></a>02457   free(subsets);
<a name="l02458"></a>02458   <a class="code" href="group__Subset.html#g17815a36b74d5568de04398ca4bd4bf4" title="Get the seq subsets in a mesh.">fc_getSeqSubsets</a>(mesh, &amp;numSeqSub, &amp;numSteps, &amp;seqSubsets);
<a name="l02459"></a>02459   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqSub; i++) {
<a name="l02460"></a>02460     <a class="code" href="group__Subset.html#gbc9f1845d70b66a70098f99b217bfbac" title="Attempt to minimize seq subset&amp;#39;s memory usage.">fc_releaseSeqSubset</a>(numSteps[i], seqSubsets[i]);
<a name="l02461"></a>02461     <a class="code" href="group__Subset.html#g815857d0e2d573d0418a3892229c0d83" title="Get information about a subset.">fc_getSubsetInfo</a>(seqSubsets[i][0], NULL, NULL, &amp;assoc);
<a name="l02462"></a>02462     <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>)
<a name="l02463"></a>02463       usingEdge = 1;
<a name="l02464"></a>02464     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>) 
<a name="l02465"></a>02465       usingFace = 1;
<a name="l02466"></a>02466   }
<a name="l02467"></a>02467   free(numSteps);
<a name="l02468"></a>02468   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqSub; i++)
<a name="l02469"></a>02469     free(seqSubsets[i]);
<a name="l02470"></a>02470   free(seqSubsets);
<a name="l02471"></a>02471   <a class="code" href="group__Variable.html#ga96777675a667d79871c93c54729bde4" title="Get the variables in a mesh.">fc_getVariables</a>(mesh, &amp;numVar, &amp;variables);
<a name="l02472"></a>02472   <span class="keywordflow">for</span> (i = 0; i &lt; numVar; i++) {
<a name="l02473"></a>02473     <a class="code" href="group__Variable.html#g4e487fa33c14f78243670167c0275736" title="Attempt to minimize variable&amp;#39;s memory usage.">fc_releaseVariable</a>(variables[i]);
<a name="l02474"></a>02474     <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(variables[i], NULL, NULL, &amp;assoc, NULL, NULL); 
<a name="l02475"></a>02475     <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>)
<a name="l02476"></a>02476       usingEdge = 1;
<a name="l02477"></a>02477     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>) 
<a name="l02478"></a>02478       usingFace = 1;
<a name="l02479"></a>02479   }
<a name="l02480"></a>02480   free(variables);
<a name="l02481"></a>02481   <a class="code" href="group__Variable.html#g01bf1b0d9b1de983115a461216039449" title="Get the sequence variables in a mesh.">fc_getSeqVariables</a>(mesh, &amp;numSeqVar, &amp;numSteps, &amp;seqVariables);
<a name="l02482"></a>02482   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++) {
<a name="l02483"></a>02483     <a class="code" href="group__Variable.html#g85ea5aa3d396cb31211be62175f45245" title="Attempt to minimize variable&amp;#39;s memory usage.">fc_releaseSeqVariable</a>(numSteps[i], seqVariables[i]);
<a name="l02484"></a>02484     <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(seqVariables[i][0], NULL, NULL, &amp;assoc, NULL, NULL); 
<a name="l02485"></a>02485     <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>)
<a name="l02486"></a>02486       usingEdge = 1;
<a name="l02487"></a>02487     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>) 
<a name="l02488"></a>02488       usingFace = 1;
<a name="l02489"></a>02489   }
<a name="l02490"></a>02490   free(numSteps);
<a name="l02491"></a>02491   <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++)
<a name="l02492"></a>02492     free(seqVariables[i]);
<a name="l02493"></a>02493   free(seqVariables);
<a name="l02494"></a>02494              
<a name="l02495"></a>02495   <span class="comment">// remove coords &amp; conns if this slot is committed (they can be reloaded)</span>
<a name="l02496"></a>02496   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l02497"></a>02497     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a>);
<a name="l02498"></a>02498     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a> = NULL;
<a name="l02499"></a>02499     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a>);
<a name="l02500"></a>02500     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a> = NULL;
<a name="l02501"></a>02501   }
<a name="l02502"></a>02502  
<a name="l02503"></a>02503   <span class="comment">//-- remove parent lists</span>
<a name="l02504"></a>02504   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#a026bfddb120aef6ce78a5c6fe456e36">numEdgePerVert</a>);
<a name="l02505"></a>02505   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#a026bfddb120aef6ce78a5c6fe456e36">numEdgePerVert</a> = NULL;
<a name="l02506"></a>02506   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0855f4c77a94ed336bd407b72f6cf445">edgeParentsPerVert</a>)
<a name="l02507"></a>02507       <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a>; i++)
<a name="l02508"></a>02508         free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0855f4c77a94ed336bd407b72f6cf445">edgeParentsPerVert</a>[i]);
<a name="l02509"></a>02509   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0855f4c77a94ed336bd407b72f6cf445">edgeParentsPerVert</a>);
<a name="l02510"></a>02510   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0855f4c77a94ed336bd407b72f6cf445">edgeParentsPerVert</a> = NULL;
<a name="l02511"></a>02511   <span class="comment">//--</span>
<a name="l02512"></a>02512   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#f3c9279cdc6a49f58a959984c2c17b0d">numFacePerVert</a>);
<a name="l02513"></a>02513   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#f3c9279cdc6a49f58a959984c2c17b0d">numFacePerVert</a> = NULL;
<a name="l02514"></a>02514   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8d036f3765f5804934785d3bcd8333f2">faceParentsPerVert</a>)
<a name="l02515"></a>02515     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a>; i++)
<a name="l02516"></a>02516       free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8d036f3765f5804934785d3bcd8333f2">faceParentsPerVert</a>[i]);
<a name="l02517"></a>02517   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8d036f3765f5804934785d3bcd8333f2">faceParentsPerVert</a>);
<a name="l02518"></a>02518   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8d036f3765f5804934785d3bcd8333f2">faceParentsPerVert</a> = NULL;
<a name="l02519"></a>02519   <span class="comment">//--</span>
<a name="l02520"></a>02520   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#ed8a3e3a101731d88dd99f0e695c3775">numElemPerVert</a>);
<a name="l02521"></a>02521   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#ed8a3e3a101731d88dd99f0e695c3775">numElemPerVert</a> = NULL;
<a name="l02522"></a>02522   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#580df478d1d156801e76acd9af00fb02">elemParentsPerVert</a>)
<a name="l02523"></a>02523     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a>; i++)
<a name="l02524"></a>02524       free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#580df478d1d156801e76acd9af00fb02">elemParentsPerVert</a>[i]);
<a name="l02525"></a>02525   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#580df478d1d156801e76acd9af00fb02">elemParentsPerVert</a>);
<a name="l02526"></a>02526   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#580df478d1d156801e76acd9af00fb02">elemParentsPerVert</a> = NULL;
<a name="l02527"></a>02527   <span class="comment">//--</span>
<a name="l02528"></a>02528   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#ed1741beebd20b4920d1f819f84a1ad3">numElemPerEdge</a>);
<a name="l02529"></a>02529   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#ed1741beebd20b4920d1f819f84a1ad3">numElemPerEdge</a> = NULL;
<a name="l02530"></a>02530   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b01aa6d58b62a1fca6e21c69b577d023">elemParentsPerEdge</a>)
<a name="l02531"></a>02531     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a>; i++)
<a name="l02532"></a>02532       free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b01aa6d58b62a1fca6e21c69b577d023">elemParentsPerEdge</a>[i]);
<a name="l02533"></a>02533   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b01aa6d58b62a1fca6e21c69b577d023">elemParentsPerEdge</a>);
<a name="l02534"></a>02534   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b01aa6d58b62a1fca6e21c69b577d023">elemParentsPerEdge</a> = NULL;
<a name="l02535"></a>02535   <span class="comment">//--</span>
<a name="l02536"></a>02536   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0e634eea45552c88f459516fde1120b5">numElemPerFace</a>);
<a name="l02537"></a>02537   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0e634eea45552c88f459516fde1120b5">numElemPerFace</a> = NULL;
<a name="l02538"></a>02538   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1399d54fae09b4a80a5b2555cf7a967d">elemParentsPerFace</a>)
<a name="l02539"></a>02539     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a>; i++)
<a name="l02540"></a>02540       free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1399d54fae09b4a80a5b2555cf7a967d">elemParentsPerFace</a>[i]);
<a name="l02541"></a>02541   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1399d54fae09b4a80a5b2555cf7a967d">elemParentsPerFace</a>);
<a name="l02542"></a>02542   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1399d54fae09b4a80a5b2555cf7a967d">elemParentsPerFace</a> = NULL;
<a name="l02543"></a>02543 
<a name="l02544"></a>02544   <span class="comment">//-- remove neighbor lists</span>
<a name="l02545"></a>02545   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6793c8c062cb0da9173275e7e5ae8284">numVertNeighsViaEdge</a>);
<a name="l02546"></a>02546   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6793c8c062cb0da9173275e7e5ae8284">numVertNeighsViaEdge</a> = NULL;
<a name="l02547"></a>02547   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#07b259ead4e5a7f490ba6c674ca13ca3">vertNeighsViaEdge</a>)
<a name="l02548"></a>02548     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a>; i++)
<a name="l02549"></a>02549       free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#07b259ead4e5a7f490ba6c674ca13ca3">vertNeighsViaEdge</a>[i]);
<a name="l02550"></a>02550   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#07b259ead4e5a7f490ba6c674ca13ca3">vertNeighsViaEdge</a>);
<a name="l02551"></a>02551   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#07b259ead4e5a7f490ba6c674ca13ca3">vertNeighsViaEdge</a> = NULL;
<a name="l02552"></a>02552   <span class="comment">//--</span>
<a name="l02553"></a>02553   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e0abbca6d43b07eb49423649625a0ef8">numElemNeighsViaVert</a>);
<a name="l02554"></a>02554   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e0abbca6d43b07eb49423649625a0ef8">numElemNeighsViaVert</a> = NULL;
<a name="l02555"></a>02555   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#a6f0d62a34abeb62900bbea104cbb6b1">elemNeighsViaVert</a>)
<a name="l02556"></a>02556     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#914b51c6fb5bd0c761db89c1486b9e78">numElement</a>; i++)
<a name="l02557"></a>02557       free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#a6f0d62a34abeb62900bbea104cbb6b1">elemNeighsViaVert</a>[i]);
<a name="l02558"></a>02558   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#a6f0d62a34abeb62900bbea104cbb6b1">elemNeighsViaVert</a>);
<a name="l02559"></a>02559   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#a6f0d62a34abeb62900bbea104cbb6b1">elemNeighsViaVert</a> = NULL;
<a name="l02560"></a>02560   <span class="comment">//--</span>
<a name="l02561"></a>02561   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#7d7856ed256bea312264e54195087055">numElemNeighsViaEdge</a>);
<a name="l02562"></a>02562   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#7d7856ed256bea312264e54195087055">numElemNeighsViaEdge</a> = NULL;
<a name="l02563"></a>02563   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#f89c60a1f4d1b872b4f55085d4fa125f">elemNeighsViaEdge</a>)
<a name="l02564"></a>02564     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#914b51c6fb5bd0c761db89c1486b9e78">numElement</a>; i++)
<a name="l02565"></a>02565       free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#f89c60a1f4d1b872b4f55085d4fa125f">elemNeighsViaEdge</a>[i]);
<a name="l02566"></a>02566   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#f89c60a1f4d1b872b4f55085d4fa125f">elemNeighsViaEdge</a>);
<a name="l02567"></a>02567   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#f89c60a1f4d1b872b4f55085d4fa125f">elemNeighsViaEdge</a> = NULL;
<a name="l02568"></a>02568   <span class="comment">//--</span>
<a name="l02569"></a>02569   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#cf1645e051dc10a3df427b3b4106bde2">numElemNeighsViaFace</a>);
<a name="l02570"></a>02570   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#cf1645e051dc10a3df427b3b4106bde2">numElemNeighsViaFace</a> = NULL;
<a name="l02571"></a>02571   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1f7348cb57e95eaefa272d35328714a9">elemNeighsViaFace</a>)
<a name="l02572"></a>02572     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#914b51c6fb5bd0c761db89c1486b9e78">numElement</a>; i++)
<a name="l02573"></a>02573       free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1f7348cb57e95eaefa272d35328714a9">elemNeighsViaFace</a>[i]);
<a name="l02574"></a>02574   free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1f7348cb57e95eaefa272d35328714a9">elemNeighsViaFace</a>);
<a name="l02575"></a>02575   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1f7348cb57e95eaefa272d35328714a9">elemNeighsViaFace</a> = NULL;
<a name="l02576"></a>02576 
<a name="l02577"></a>02577   <span class="comment">// if no subsets or variables use edges or faces, conns &amp; associated data</span>
<a name="l02578"></a>02578   <span class="comment">// do this last because we might want numEdge or numFace</span>
<a name="l02579"></a>02579   <span class="keywordflow">if</span> (!usingEdge) {
<a name="l02580"></a>02580     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e3db7792065db1f14b14ea6539fe2a8d">edgeToVertConns</a>);
<a name="l02581"></a>02581     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e3db7792065db1f14b14ea6539fe2a8d">edgeToVertConns</a> = NULL;
<a name="l02582"></a>02582     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#74a32c78f47931afe4ee4ea26f813d50">elemToEdgeConns</a>);
<a name="l02583"></a>02583     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#74a32c78f47931afe4ee4ea26f813d50">elemToEdgeConns</a> = NULL;
<a name="l02584"></a>02584     <span class="comment">//-- set edges back to "unknown"</span>
<a name="l02585"></a>02585     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#da08fd6576bb2ed0767d27c504d75ed1">numEdge</a> = -1;
<a name="l02586"></a>02586   }
<a name="l02587"></a>02587   <span class="keywordflow">if</span> (!usingFace) {
<a name="l02588"></a>02588     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e68f87ff78f55d42547992326166c69a">faceTypes</a>);
<a name="l02589"></a>02589     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e68f87ff78f55d42547992326166c69a">faceTypes</a> = NULL;
<a name="l02590"></a>02590     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#7537a9b0d1fbb72b25285e1c5dc17848">numVertPerFace</a>);
<a name="l02591"></a>02591     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#7537a9b0d1fbb72b25285e1c5dc17848">numVertPerFace</a> = NULL;
<a name="l02592"></a>02592     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0ab5e40932ff22cfe0d6d18e9707f9ab">faceToVertConns</a>);
<a name="l02593"></a>02593     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0ab5e40932ff22cfe0d6d18e9707f9ab">faceToVertConns</a> = NULL;
<a name="l02594"></a>02594     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#039ef38298bd46752975a32fe5ffc980">elemToFaceConns</a>);
<a name="l02595"></a>02595     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#039ef38298bd46752975a32fe5ffc980">elemToFaceConns</a> = NULL;
<a name="l02596"></a>02596     free(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1bc2e28dd6ebde377292996dbdd1d89d">elemFaceOrients</a>);
<a name="l02597"></a>02597     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1bc2e28dd6ebde377292996dbdd1d89d">elemFaceOrients</a> = NULL;
<a name="l02598"></a>02598     <span class="comment">//-- set faces back to "unknown"</span>
<a name="l02599"></a>02599     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#6ee49357de9bca38355874a1da8306a0">numFace</a> = -1;
<a name="l02600"></a>02600   }
<a name="l02601"></a>02601 
<a name="l02602"></a>02602   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02603"></a>02603 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gbe7f568d5b8fe72693ad308d15194e01"></a><!-- doxytag: member="mesh.c::fc_setMeshCoords" ref="gbe7f568d5b8fe72693ad308d15194e01" args="(FC_Mesh mesh, int dim, int numVertex, double *coords)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_setMeshCoords           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numVertex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>coords</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the mesh coordinates by copy. 
<p>
<b>Description:</b> <p>
Set the coordinate values for the vertices in a mesh. The dim parameter is the number of spatial dimensions a vertex exists in. The coords array should contain dim*numVertex floating point numbers. The order is interleaved, that is your give all coordinates values for each vertex (e.g. XYZXYZ ...).<p>
This routine makes a copy of the vertices for the library, so the user remains responsible for freeing the original array. If you would like to give the coordinates array to the mesh instead of just copying them, use <a class="el" href="group__Mesh.html#g00fb04104cb0c5a6638cca5027b4b1df" title="Set the pointer to the mesh coordinates.">fc_setMeshCoordsPtr()</a>.<p>
You cannot set coords if they already exist.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>12/09/03 WSK Changed so that it creates a coordinate variable</li><li>09/13/04 WSK Changed so you cannot reset coords </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>dim</em>&nbsp;</td><td>
input - number of dimensions in 1 vertex </td></tr>
<tr><td valign="top"><em>numVertex</em>&nbsp;</td><td>
input - vertex count </td></tr>
<tr><td valign="top"><em>coords</em>&nbsp;</td><td>
input - array of vertex data </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l00193">193</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="meshP_8h-source.html#l00112">_FC_MeshSlot::coords</a>, <a class="el" href="meshP_8h-source.html#l00100">_FC_MeshSlot::dim</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00103">_FC_MeshSlot::numVertex</a>.</p>

<p>Referenced by <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="geom_8c-source.html#l01069">fc_createBoundingBoxMesh()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00198">setupDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00198"></a>00198   {
<a name="l00199"></a>00199   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a> *meshSlot;
<a name="l00200"></a>00200   
<a name="l00201"></a>00201   <span class="comment">// NOTE!: if you change stuff here, also change fc_setSetMeshCoordsPtr()</span>
<a name="l00202"></a>00202 
<a name="l00203"></a>00203   <span class="comment">// check input</span>
<a name="l00204"></a>00204   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l00205"></a>00205   <span class="keywordflow">if</span> (meshSlot == NULL || dim &lt; 1 || dim &gt; 3 || numVertex &lt; 1 || 
<a name="l00206"></a>00206       coords == NULL) {
<a name="l00207"></a>00207     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00208"></a>00208     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00209"></a>00209   }
<a name="l00210"></a>00210   
<a name="l00211"></a>00211   <span class="comment">// a little more checking -- can't overwrite coords</span>
<a name="l00212"></a>00212   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a> != NULL || meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l00213"></a>00213     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Coords already exist on mesh '%s'"</span>,
<a name="l00214"></a>00214                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00215"></a>00215     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00216"></a>00216   }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218   <span class="comment">// log message</span>
<a name="l00219"></a>00219   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertex coords on mesh '%s'"</span>, 
<a name="l00220"></a>00220                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   <span class="comment">// copy meta data</span>
<a name="l00223"></a>00223   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a> = numVertex;
<a name="l00224"></a>00224   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8a59779a8f5f511a1fff4c886e8897ec">dim</a> = dim;
<a name="l00225"></a>00225   
<a name="l00226"></a>00226   <span class="comment">// big data</span>
<a name="l00227"></a>00227   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a> = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * numVertex * dim);
<a name="l00228"></a>00228   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a> == NULL) {
<a name="l00229"></a>00229     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00230"></a>00230     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00231"></a>00231   }
<a name="l00232"></a>00232   memcpy(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a>, coords, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)*numVertex*dim);
<a name="l00233"></a>00233   
<a name="l00234"></a>00234   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00235"></a>00235 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g00fb04104cb0c5a6638cca5027b4b1df"></a><!-- doxytag: member="mesh.c::fc_setMeshCoordsPtr" ref="g00fb04104cb0c5a6638cca5027b4b1df" args="(FC_Mesh mesh, int dim, int numVertex, double *coords)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_setMeshCoordsPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numVertex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>coords</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the pointer to the mesh coordinates. 
<p>
<b>Description:</b> <p>
Set the coordinate values for the vertices in a mesh. The dim parameter is the number of spatial dimensions a vertex exists in. The coords array should contain dim*numVertex floating point numbers. The order is interleaved, that is your give all coordinates values for each vertex (e.g. XYZXYZ ...).<p>
This routine passes the coords array directly to the library, so the user no longer has responsibility of the original buffer. If you would like to keep the coords array, you should use <a class="el" href="group__Mesh.html#gbe7f568d5b8fe72693ad308d15194e01" title="Set the mesh coordinates by copy.">fc_setMeshCoords()</a> instead which makes a copy of the coords array.<p>
You cannot set coords if they already exist.<p>
<b>Modifications:</b> <ul>
<li>10/01/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>dim</em>&nbsp;</td><td>
input - number of dimensions in 1 vertex </td></tr>
<tr><td valign="top"><em>numVertex</em>&nbsp;</td><td>
input - vertex count </td></tr>
<tr><td valign="top"><em>coords</em>&nbsp;</td><td>
input - array of vertex data </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l00259">259</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="meshP_8h-source.html#l00112">_FC_MeshSlot::coords</a>, <a class="el" href="meshP_8h-source.html#l00100">_FC_MeshSlot::dim</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00103">_FC_MeshSlot::numVertex</a>.</p>

<p>Referenced by <a class="el" href="fileio_8c-source.html#l00462">_fc_makeMeshFromFiles()</a>, <a class="el" href="mesh_8c-source.html#l01748">fc_createSimpleHexMesh()</a>, <a class="el" href="mesh_8c-source.html#l01949">fc_createSphereMesh()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, and <a class="el" href="gaplines_8c-source.html#l00433">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00264"></a>00264   {
<a name="l00265"></a>00265   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a> *meshSlot;
<a name="l00266"></a>00266   
<a name="l00267"></a>00267   <span class="comment">// NOTE!: if you change stuff here, also change fc_setSetMeshCoords()</span>
<a name="l00268"></a>00268 
<a name="l00269"></a>00269   <span class="comment">// check input</span>
<a name="l00270"></a>00270   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l00271"></a>00271   <span class="keywordflow">if</span> (meshSlot == NULL || dim &lt; 1 || dim &gt; 3 || numVertex &lt; 1 || 
<a name="l00272"></a>00272       coords == NULL) {
<a name="l00273"></a>00273     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00274"></a>00274     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00275"></a>00275   }
<a name="l00276"></a>00276   
<a name="l00277"></a>00277   <span class="comment">// a little more checking -- can't overwrite coords</span>
<a name="l00278"></a>00278   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a> != NULL || meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l00279"></a>00279     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Coords already exist on mesh '%s'"</span>,
<a name="l00280"></a>00280                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00281"></a>00281     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00282"></a>00282   }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <span class="comment">// log message</span>
<a name="l00285"></a>00285   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertex coords on mesh '%s'"</span>, 
<a name="l00286"></a>00286                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   <span class="comment">// copy meta data</span>
<a name="l00289"></a>00289   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#049ca8ef52b92d19b06858e8a1cc2ea5">numVertex</a> = numVertex;
<a name="l00290"></a>00290   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8a59779a8f5f511a1fff4c886e8897ec">dim</a> = dim;
<a name="l00291"></a>00291   
<a name="l00292"></a>00292   <span class="comment">// big data</span>
<a name="l00293"></a>00293   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#382cfacaa5639ea6dabe6347dc21e440">coords</a> = coords;
<a name="l00294"></a>00294   
<a name="l00295"></a>00295   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00296"></a>00296 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd7bb8a0f67d6c0b44edbfe864a53b218"></a><!-- doxytag: member="mesh.c::fc_setMeshElementConns" ref="gd7bb8a0f67d6c0b44edbfe864a53b218" args="(FC_Mesh mesh, FC_ElementType elemType, int numElem, int *connectivities)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_setMeshElementConns           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a>&nbsp;</td>
          <td class="paramname"> <em>elemType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numElem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>connectivities</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the mesh element to vertex connectivities by copy. 
<p>
<b>Description:</b> <p>
Set the element to vertex connectivities for the mesh. Meshes can only be made of one element type and the connectivity array should be numElem*(number of vertices per element) long. The order is interleave, that is you give the vertex IDs for each element (e.g. E1V1 E1V2 ... E1V6 E2V1 E2V2 ... E2V6 E3V1 ...).<p>
This routine makes a copy of the conns for the library, so the user remains responsible for freeing the original array. If you would like to give the conns array to the mesh instead of just copying them, use <a class="el" href="group__Mesh.html#g73caf4cfc1c9d8b302d880735a67cd2a" title="Set the pointer to the mesh element connectivities.">fc_setMeshElementConnsPtr()</a>.<p>
You cannot set conns if they already exist.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>09/13/04 WSK Changed so you cannot reset conns </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>elemType</em>&nbsp;</td><td>
input - element type </td></tr>
<tr><td valign="top"><em>numElem</em>&nbsp;</td><td>
input - count of elements </td></tr>
<tr><td valign="top"><em>connectivities</em>&nbsp;</td><td>
input - array of vertex IDs for each element </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l00321">321</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="meshP_8h-source.html#l00116">_FC_MeshSlot::elemToVertConns</a>, <a class="el" href="meshP_8h-source.html#l00105">_FC_MeshSlot::elemType</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8h-source.html#l00129">FC_ET_MIXED</a>, <a class="el" href="base_8h-source.html#l00119">FC_ET_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00550">fc_getElementTypeNumVertex()</a>, <a class="el" href="base_8c-source.html#l00514">fc_getElementTypeTopoDim()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00212">fc_isElementTypeValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00104">_FC_MeshSlot::numElement</a>, and <a class="el" href="meshP_8h-source.html#l00101">_FC_MeshSlot::topodim</a>.</p>

<p>Referenced by <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="geom_8c-source.html#l01069">fc_createBoundingBoxMesh()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, and <a class="el" href="geomExtract_8c-source.html#l00060">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00326"></a>00326   {
<a name="l00327"></a>00327   <span class="comment">//FC_ReturnCode rc;</span>
<a name="l00328"></a>00328   <span class="keywordtype">int</span> num;
<a name="l00329"></a>00329   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a> *meshSlot;
<a name="l00330"></a>00330   
<a name="l00331"></a>00331   <span class="comment">// NOTE!: if you change stuff here, also change fc_setSetMeshElementConnsPtr()</span>
<a name="l00332"></a>00332 
<a name="l00333"></a>00333   <span class="comment">// check input</span>
<a name="l00334"></a>00334   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l00335"></a>00335   <span class="keywordflow">if</span> (meshSlot == NULL || numElem &lt; 1 || !<a class="code" href="group__DataTypes.html#g8bd8931750dc8637129c2f7e597dde4d" title="Verify that the given value is valid for this enum.">fc_isElementTypeValid</a>(elemType) ||
<a name="l00336"></a>00336       elemType == <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a234dea287835faef866ba253e30c0730">FC_ET_UNKNOWN</a> || elemType == <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a9f716d199046924e5d22004f83daaa50">FC_ET_MIXED</a> ||
<a name="l00337"></a>00337       connectivities == NULL) {
<a name="l00338"></a>00338     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));    
<a name="l00339"></a>00339     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00340"></a>00340   }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342   <span class="comment">// a little more checking -- can't overwrite conns</span>
<a name="l00343"></a>00343   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a> != NULL || meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l00344"></a>00344     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Elem-to-vert conns already exist on mesh '%s'"</span>, 
<a name="l00345"></a>00345                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00346"></a>00346     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00347"></a>00347   }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349   <span class="comment">// log message</span>
<a name="l00350"></a>00350   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Setting elements on mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00351"></a>00351 
<a name="l00352"></a>00352   <span class="comment">// copy meta data</span>
<a name="l00353"></a>00353   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#914b51c6fb5bd0c761db89c1486b9e78">numElement</a> = numElem;
<a name="l00354"></a>00354   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#fadd3563d825716a3f58ffc5dfe8e3e6">elemType</a> = elemType;
<a name="l00355"></a>00355   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b621647a95b1a86b85d543583e666af2">topodim</a> = <a class="code" href="group__DataTypes.html#g88ee850817d024de6ff86aea039b4997" title="Returns number of topological dimensions for a type of element.">fc_getElementTypeTopoDim</a>(elemType);
<a name="l00356"></a>00356   
<a name="l00357"></a>00357   <span class="comment">// copy element buffer</span>
<a name="l00358"></a>00358   num = numElem * <a class="code" href="group__DataTypes.html#g2a400f7126e79f149032162c87c4eee8" title="Returns number of vertices in a type of element.">fc_getElementTypeNumVertex</a>(elemType);
<a name="l00359"></a>00359   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a> = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * num);
<a name="l00360"></a>00360   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a> == NULL) {
<a name="l00361"></a>00361     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00362"></a>00362     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00363"></a>00363   }
<a name="l00364"></a>00364   memcpy(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a>, connectivities, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*num);
<a name="l00365"></a>00365   
<a name="l00366"></a>00366   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00367"></a>00367 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g73caf4cfc1c9d8b302d880735a67cd2a"></a><!-- doxytag: member="mesh.c::fc_setMeshElementConnsPtr" ref="g73caf4cfc1c9d8b302d880735a67cd2a" args="(FC_Mesh mesh, FC_ElementType elemType, int numElem, int *connectivities)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_setMeshElementConnsPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g57a0abe7a63cc2c6c9fb0a3db339884a">FC_ElementType</a>&nbsp;</td>
          <td class="paramname"> <em>elemType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numElem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>connectivities</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the pointer to the mesh element connectivities. 
<p>
<b>Description:</b> <p>
Set the element to vertex connectivities for the mesh. Meshes can only be made of one element type and the connectivity array should be numElem*(number of vertices per element) long. The order is interleave, that is you give the vertex IDs for each element (e.g. E1V1 E1V2 ... E1V6 E2V1 E2V2 ... E2V6 E3V1 ...).<p>
This routine passes the conns array directly to the library, so the user no longer has responsibility of the original buffer. If you would like to keep the conns array, you should use <a class="el" href="group__Mesh.html#gd7bb8a0f67d6c0b44edbfe864a53b218" title="Set the mesh element to vertex connectivities by copy.">fc_setMeshElementConns()</a> instead which makes a copy of the conns array.<p>
You cannot set conns if they already exist.<p>
<b>Modifications:</b> <ul>
<li>10/01/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>elemType</em>&nbsp;</td><td>
input - element type </td></tr>
<tr><td valign="top"><em>numElem</em>&nbsp;</td><td>
input - count of elements </td></tr>
<tr><td valign="top"><em>connectivities</em>&nbsp;</td><td>
input - array of vertex IDs for each element </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l00391">391</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="meshP_8h-source.html#l00116">_FC_MeshSlot::elemToVertConns</a>, <a class="el" href="meshP_8h-source.html#l00105">_FC_MeshSlot::elemType</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8h-source.html#l00129">FC_ET_MIXED</a>, <a class="el" href="base_8h-source.html#l00119">FC_ET_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00514">fc_getElementTypeTopoDim()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00212">fc_isElementTypeValid()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00104">_FC_MeshSlot::numElement</a>, and <a class="el" href="meshP_8h-source.html#l00101">_FC_MeshSlot::topodim</a>.</p>

<p>Referenced by <a class="el" href="fileio_8c-source.html#l00462">_fc_makeMeshFromFiles()</a>, <a class="el" href="mesh_8c-source.html#l01748">fc_createSimpleHexMesh()</a>, <a class="el" href="mesh_8c-source.html#l01949">fc_createSphereMesh()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, and <a class="el" href="gaplines_8c-source.html#l00433">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00396"></a>00396   {
<a name="l00397"></a>00397   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a> *meshSlot;
<a name="l00398"></a>00398   
<a name="l00399"></a>00399   <span class="comment">// NOTE!: if you change stuff here, also change fc_setSetMeshElementConns()</span>
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   <span class="comment">// check input</span>
<a name="l00402"></a>00402   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l00403"></a>00403   <span class="keywordflow">if</span> (meshSlot == NULL || numElem &lt; 1 || !<a class="code" href="group__DataTypes.html#g8bd8931750dc8637129c2f7e597dde4d" title="Verify that the given value is valid for this enum.">fc_isElementTypeValid</a>(elemType) ||
<a name="l00404"></a>00404       elemType == <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a234dea287835faef866ba253e30c0730">FC_ET_UNKNOWN</a> || elemType == <a class="code" href="group__DataTypes.html#gg57a0abe7a63cc2c6c9fb0a3db339884a9f716d199046924e5d22004f83daaa50">FC_ET_MIXED</a> ||
<a name="l00405"></a>00405       connectivities == NULL) {
<a name="l00406"></a>00406     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));    
<a name="l00407"></a>00407     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00408"></a>00408   }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410   <span class="comment">// a little more checking -- can't overwrite conns</span>
<a name="l00411"></a>00411   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a> != NULL || meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l00412"></a>00412     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Elem-to-vert conns already exist on mesh '%s'"</span>, 
<a name="l00413"></a>00413                           meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00414"></a>00414     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00415"></a>00415   }
<a name="l00416"></a>00416 
<a name="l00417"></a>00417   <span class="comment">// log message</span>
<a name="l00418"></a>00418   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Setting elements on mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00419"></a>00419 
<a name="l00420"></a>00420   <span class="comment">// copy meta data</span>
<a name="l00421"></a>00421   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#914b51c6fb5bd0c761db89c1486b9e78">numElement</a> = numElem;
<a name="l00422"></a>00422   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#fadd3563d825716a3f58ffc5dfe8e3e6">elemType</a> = elemType;
<a name="l00423"></a>00423   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#b621647a95b1a86b85d543583e666af2">topodim</a> = <a class="code" href="group__DataTypes.html#g88ee850817d024de6ff86aea039b4997" title="Returns number of topological dimensions for a type of element.">fc_getElementTypeTopoDim</a>(elemType);
<a name="l00424"></a>00424   
<a name="l00425"></a>00425   <span class="comment">// copy element buffer</span>
<a name="l00426"></a>00426   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#16994ed8faff29b6b21ccb053ab45ba5">elemToVertConns</a> = connectivities;
<a name="l00427"></a>00427   
<a name="l00428"></a>00428   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00429"></a>00429 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g57c475cb784b009f4ed3518e15b96768"></a><!-- doxytag: member="mesh.c::fc_setSphereDisplacementVariable" ref="g57c475cb784b009f4ed3518e15b96768" args="(FC_Variable displacement_var, FC_Coords new_center, double new_radius)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_setSphereDisplacementVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>displacement_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__SimpleDataObjects.html#gf0a2bdabac4a21b42f4b480baf9128d7">FC_Coords</a>&nbsp;</td>
          <td class="paramname"> <em>new_center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>new_radius</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update a displacement variable for a sphere to have a new center and radius. 
<p>
<b>Description:</b> <p>
This function sets a displacement variable for a sphere mesh so that it reflects a new center/radius for the sphere. This operation is useful for tracking the size and location of a feature as time progresses.<p>
<b>Modifications:</b> <ul>
<li>04/08/2008 CDU Created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>displacement_var</em>&nbsp;</td><td>
Input - the displacement variable to be adjusted </td></tr>
<tr><td valign="top"><em>new_center</em>&nbsp;</td><td>
Input - new coordinates for center of sphere </td></tr>
<tr><td valign="top"><em>new_radius</em>&nbsp;</td><td>
Input - new radius for sphere </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="mesh_8c-source.html#l02091">2091</a> of file <a class="el" href="mesh_8c-source.html">mesh.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l01875">_fc_setSphereCoords()</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="mesh_8c-source.html#l03436">fc_getMeshCoordsPtr()</a>, <a class="el" href="variable_8c-source.html#l05392">fc_getMeshFromVariable()</a>, <a class="el" href="mesh_8c-source.html#l02848">fc_getMeshInfo()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05156">fc_isVariableValid()</a>, <a class="el" href="util_8c-source.html#l00668">fc_lteqd()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8h-source.html#l00171">FC_MT_VECTOR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="variable_8c-source.html#l00604">fc_setVariableDataPtr()</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02095"></a>02095  {
<a name="l02096"></a>02096 
<a name="l02097"></a>02097   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh;
<a name="l02098"></a>02098   <span class="keywordtype">int</span> dim, numVertex;
<a name="l02099"></a>02099   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l02100"></a>02100 
<a name="l02101"></a>02101   <span class="keywordtype">double</span> *orig_coords; <span class="comment">//ro</span>
<a name="l02102"></a>02102   <span class="keywordtype">double</span> *new_coords;
<a name="l02103"></a>02103   <span class="keywordtype">int</span> i;
<a name="l02104"></a>02104 
<a name="l02105"></a>02105   <span class="comment">//Check input</span>
<a name="l02106"></a>02106   <span class="keywordflow">if</span>(!<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(displacement_var) || <a class="code" href="group__PublicFloatingPoint.html#g8aaadf1df0008173eda4adc00905d951" title="Test if the first double is less than or equal to the second double, assuming double...">fc_lteqd</a>(new_radius,0.0) || !new_center){
<a name="l02107"></a>02107     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02108"></a>02108     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02109"></a>02109   }
<a name="l02110"></a>02110   
<a name="l02111"></a>02111   <span class="comment">//Get basic info from variable and it's mesh</span>
<a name="l02112"></a>02112   rc=<a class="code" href="group__Variable.html#g6808d2015766d9b530b93375f42296a3" title="Get the parent mesh of the variable.">fc_getMeshFromVariable</a>(displacement_var, &amp;mesh);
<a name="l02113"></a>02113   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) <span class="keywordflow">return</span> rc;
<a name="l02114"></a>02114 
<a name="l02115"></a>02115   rc=<a class="code" href="group__Mesh.html#ged61b1f684fc2a6ac489c10841cdb591" title="Get information about a mesh.">fc_getMeshInfo</a>(mesh, NULL, &amp;dim, &amp;numVertex, NULL, NULL);
<a name="l02116"></a>02116   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) <span class="keywordflow">return</span> rc;
<a name="l02117"></a>02117 
<a name="l02118"></a>02118   rc=<a class="code" href="group__Mesh.html#gff8561557c19ae03be9ff18cc73a6823" title="Return the vertex coordinates of the mesh.">fc_getMeshCoordsPtr</a>(mesh, &amp;orig_coords);
<a name="l02119"></a>02119   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) <span class="keywordflow">return</span> rc;
<a name="l02120"></a>02120 
<a name="l02121"></a>02121 
<a name="l02122"></a>02122   <span class="comment">//Create space for data</span>
<a name="l02123"></a>02123   new_coords = (<span class="keywordtype">double</span> *)malloc(dim*numVertex*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l02124"></a>02124   <span class="keywordflow">if</span>(!new_coords){
<a name="l02125"></a>02125     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02126"></a>02126     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02127"></a>02127   }
<a name="l02128"></a>02128 
<a name="l02129"></a>02129   <span class="comment">//Fill new_coords with the proper values</span>
<a name="l02130"></a>02130   rc=<a class="code" href="group__Mesh.html#gfa2a138c204d9d34d1e1c213f2b46f1c" title="Set coordinates for a sphere mesh.">_fc_setSphereCoords</a>(numVertex, new_center, new_radius, new_coords);
<a name="l02131"></a>02131   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l02132"></a>02132     free(new_coords);
<a name="l02133"></a>02133     <span class="keywordflow">return</span> rc;
<a name="l02134"></a>02134   }
<a name="l02135"></a>02135   
<a name="l02136"></a>02136   <span class="comment">//Record the difference</span>
<a name="l02137"></a>02137   <span class="keywordflow">for</span>(i=0; i&lt;dim*numVertex; i++){
<a name="l02138"></a>02138     new_coords[i] = new_coords[i] - orig_coords[i];
<a name="l02139"></a>02139   }
<a name="l02140"></a>02140 
<a name="l02141"></a>02141   <span class="comment">//new_coords now done. Have it absorbed into variable</span>
<a name="l02142"></a>02142   rc=<a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(displacement_var, numVertex, dim, 
<a name="l02143"></a>02143                   <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>, <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb207f48fe9fd9efb7bc772bbb41106e217f">FC_MT_VECTOR</a>, <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>,
<a name="l02144"></a>02144                   new_coords);
<a name="l02145"></a>02145   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l02146"></a>02146     free(new_coords);
<a name="l02147"></a>02147     <span class="keywordflow">return</span> rc;
<a name="l02148"></a>02148   }
<a name="l02149"></a>02149 
<a name="l02150"></a>02150   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02151"></a>02151   
<a name="l02152"></a>02152 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 27 13:26:17 2008 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
