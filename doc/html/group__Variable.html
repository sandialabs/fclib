<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>FCLib: Variable</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Variable<br>
<small>
[<a class="el" href="group__DataInterface.html">Data Interface</a>]</small>
</h1>
<p>
<div class="dynheader">
Collaboration diagram for Variable:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__Variable.gif" border="0" alt="" usemap="#group____Variable_map">
<map name="group____Variable_map">
<area shape="rect" href="group__PrivateVariable.html" title="(Private)" alt="" coords="308,5,388,32"><area shape="rect" href="group__DataInterface.html" title="Primary interface between computational routines and actual data." alt="" coords="5,5,131,32"></map></td></tr></table></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Operations on variables. 
<p>
<b>Description:</b> <p>
Sequence variables are stored as an array of variables. If a function does not have a seqVariable version, in many cases you can call the variable version on the first variable in the seqVariable array and get the results you expect, e.g. fc_getVariableInfo(seqVar[0], ...). In some cases you would need to loop over all variables in the seqVariable array, e.g. fc_setVariableData(seqVar[i], ...). (For an explanation of general data manipulations, see <a class="el" href="group__DataInterface.html">Data Interface</a>.) 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateVariable.html">(Private)</a></td></tr>

<tr><td colspan="2"><br><h2>Create new variable from scratch.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gc15b2d6deabd12b43786430eb16f02f6">fc_createGlobalVariable</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *varName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new global variable.  <a href="#gc15b2d6deabd12b43786430eb16f02f6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g7cb59e75c9e63c1dcc09b42787b57227">fc_createGlobalSeqVariable</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> sequence, char *varName, int *numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> **seqVars)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new global sequence variable.  <a href="#g7cb59e75c9e63c1dcc09b42787b57227"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631">fc_createVariable</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new variable.  <a href="#ga2ffd025a786dbe93fc7f8defb969631"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g05d5098e68c1761ac851b2509dfbea70">fc_createSeqVariable</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> sequence, char *varName, int *numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> **seqVars)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new sequence variable.  <a href="#g05d5098e68c1761ac851b2509dfbea70"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039">fc_setVariableData</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int numDataPoint, int <a class="el" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> assoc, <a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> mathtype, <a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a> datatype, void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the variable data by copy.  <a href="#g3f958d3b630c9df78a4e7fbca287b039"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc">fc_setVariableDataPtr</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int numDataPoint, int <a class="el" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> assoc, <a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> mathtype, <a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a> datatype, void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the pointer to the variable data.  <a href="#g87015cda75e038cc73c1d584537d81fc"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Other ways to get new variables.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gf29e653a0f5cc6b29dc84796563a0583">fc_copyGlobalVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> src_var, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> dest_dataset, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a global variable.  <a href="#gf29e653a0f5cc6b29dc84796563a0583"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gbfe8d161124e5e9e184337d03bfc69dc">fc_copyGlobalSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *src_vars, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> dest_ds, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> dest_seq, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> **new_vars)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a global sequence variable.  <a href="#gbfe8d161124e5e9e184337d03bfc69dc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g0af7d0d18023362f816693cd354bcbfb">fc_copyVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> src_var, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> dest_mesh, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a variable.  <a href="#g0af7d0d18023362f816693cd354bcbfb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g23064ee8e3a16531e8fac78071f6a4e8">fc_copyVariableFromRegionMesh</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> src_var, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> dest_mesh, <a class="el" href="structFC__Variable.html">FC_Variable</a> mapping, void *<a class="el" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a variable defined on a smaller mesh onto a bigger one.  <a href="#g23064ee8e3a16531e8fac78071f6a4e8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g2aa08cf0272a9b1651f0d1d7bdc53828">fc_copySeqVariableStepFromRegionMesh</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> src_var, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> dest_mesh, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> dest_seq, int targetStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> mapping, void *<a class="el" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>, char *dest_seqvarName, <a class="el" href="structFC__Variable.html">FC_Variable</a> **dest_seqvar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a variable defined on a smaller mesh into a var on a bigger one.  <a href="#g2aa08cf0272a9b1651f0d1d7bdc53828"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g60931b560efb891670612ed65dc6cb63">fc_copyVariableToRegionMesh</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> src_var, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> dest_mesh, <a class="el" href="structFC__Variable.html">FC_Variable</a> mapping, void *<a class="el" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a variable defined on a larger mesh onto a smaller one.  <a href="#g60931b560efb891670612ed65dc6cb63"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gd1e1d772a6fabbe7d0da9d46ca58fd5d">fc_copyVariableWithNewAssociation</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> src_var, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> newAssoc, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copies a Variable and (optionally) converts to a new association type.  <a href="#gd1e1d772a6fabbe7d0da9d46ca58fd5d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gaf25870a6c8032440b6d5565ccc083cb">fc_copySeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *src_seqVar, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> dest_mesh, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> dest_seq, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> **new_seqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a sequence variable.  <a href="#gaf25870a6c8032440b6d5565ccc083cb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g980800ddd6a50b18c1e2282e491b5885">fc_copySeqVariableWithNewAssociation</a> (int src_numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *src_seqVar, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> newAssoc, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> **new_seqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copies a seqVariable and (optionally) converts to a new association type.  <a href="#g980800ddd6a50b18c1e2282e491b5885"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g962a68f110466d7e77d7bae3df089f20">fc_convertVariablesToSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *vars, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> sequence, char *new_name, <a class="el" href="structFC__Variable.html">FC_Variable</a> **seqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert an array of basic vars into a sequence var.  <a href="#g962a68f110466d7e77d7bae3df089f20"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gb1f6d162670026503f6d39ee92634c7c">fc_createComponentVariables</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> var, int *<a class="el" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, <a class="el" href="structFC__Variable.html">FC_Variable</a> **components)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates new variables which are the components of a given variable.  <a href="#gb1f6d162670026503f6d39ee92634c7c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g192ec837fdd98caa5360f30188207b89">fc_createComponentSeqVariables</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar, int *<a class="el" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***compSeqVars)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates new sequence variables which are the components of a given sequence variable.  <a href="#g192ec837fdd98caa5360f30188207b89"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gc2336adac6d8ed9ae68ae43536d340f5">fc_mergeComponentVariables</a> (int <a class="el" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, <a class="el" href="structFC__Variable.html">FC_Variable</a> *components, char *name, <a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> mathtype, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new multicomponent variable from a group of scalars.  <a href="#gc2336adac6d8ed9ae68ae43536d340f5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ga707eadb0047cdcde7186143d6d75edf">fc_mergeComponentSeqVariables</a> (int <a class="el" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> **compSeqVars, char *name, <a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> mathtype, <a class="el" href="structFC__Variable.html">FC_Variable</a> **newSeqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new multicomponent seq variable from a group of scalars.  <a href="#ga707eadb0047cdcde7186143d6d75edf"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get existing variables.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g1d1333786398ddc0cd571156691272ea">fc_getGlobalVariables</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the global variables in a dataset.  <a href="#g1d1333786398ddc0cd571156691272ea"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g3085ad2d7a4be9f81eb0eccaa19ade10">fc_getGlobalSeqVariables</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numSeqVar, int **numStepPerVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***seqVariables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the global sequence variables in a dataset.  <a href="#g3085ad2d7a4be9f81eb0eccaa19ade10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ga96777675a667d79871c93c54729bde4">fc_getVariables</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the variables in a mesh.  <a href="#ga96777675a667d79871c93c54729bde4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g01bf1b0d9b1de983115a461216039449">fc_getSeqVariables</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numSeqVar, int **numStepPerVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***seqVariables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the sequence variables in a mesh.  <a href="#g01bf1b0d9b1de983115a461216039449"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g522738705c0e998327bd392d8f5d66a4">fc_getNumGlobalVariable</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of global variables in a dataset.  <a href="#g522738705c0e998327bd392d8f5d66a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gef65d06d104b737698472ec2e863a495">fc_getNumGlobalSeqVariable</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numSeqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of global sequence variables in a dataset.  <a href="#gef65d06d104b737698472ec2e863a495"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g34fd68c4a0f71ff43da35c9cdc37c1d2">fc_getNumVariable</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of variables in a mesh.  <a href="#g34fd68c4a0f71ff43da35c9cdc37c1d2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gcaaf2b5a1e4349487ea32e27aa09dbc8">fc_getNumSeqVariable</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numSeqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of sequence variables in a mesh.  <a href="#gcaaf2b5a1e4349487ea32e27aa09dbc8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g5771efba2615e7369804905490b8ed3c">fc_getGlobalVariableByName</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *varname, int *numVariables, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get global variables from the dataset.  <a href="#g5771efba2615e7369804905490b8ed3c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ga7b2a6532c959cc0b4d21436b98e1b46">fc_getGlobalSeqVariableByName</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *varName, int *numSeqVar, int **numStepPerVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***seqVariables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get global sequence variables with a given name from the dataset.  <a href="#ga7b2a6532c959cc0b4d21436b98e1b46"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g360da27d39e62be3c900da302a754e95">fc_getVariableByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, int *numVariables, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get variables from the mesh.  <a href="#g360da27d39e62be3c900da302a754e95"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g3f8d4d3fd4b5073829290d4b347350b5">fc_getVariableComponentsByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, <a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> *type, int *numVariables, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get variables that can be components from the mesh.  <a href="#g3f8d4d3fd4b5073829290d4b347350b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g0fa74bad632cca78316af6f11ef7cf48">fc_getOrGenerateUniqueVariableByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets a unique var if it exists, otherwise generate it from components if possible.  <a href="#g0fa74bad632cca78316af6f11ef7cf48"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g23372bf294117d6761d750446516f0d3">fc_getSeqVariableByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varName, int *numSeqVar, int **numStepPerVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***seqVariables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get sequence variables of a given name from the mesh.  <a href="#g23372bf294117d6761d750446516f0d3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gccebd457989504aef5bb958ab09c199c">fc_getSeqVariableComponentsByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, <a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> *type, int *numVariables, int **numStepsPerVariable, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get seq variables that can be components from the mesh.  <a href="#gccebd457989504aef5bb958ab09c199c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g9022a4933230e252076467a05f101a68">fc_getOrGenerateUniqueSeqVariableByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, int *numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets a unique seq var if it exists, otherwise generate it from components if possible.  <a href="#g9022a4933230e252076467a05f101a68"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Change the name of a mesh.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g3f7b38c448313f3dbd9fb19b34899ef8">fc_changeVariableName</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, char *newName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the name of a variable.  <a href="#g3f7b38c448313f3dbd9fb19b34899ef8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g9d02349d8cee2acdf1a00d2568f1ce77">fc_changeSeqVariableName</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variables, char *newName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the name of a sequence variable.  <a href="#g9d02349d8cee2acdf1a00d2568f1ce77"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Release/delete meshes.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g4e487fa33c14f78243670167c0275736">fc_releaseVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to minimize variable's memory usage.  <a href="#g4e487fa33c14f78243670167c0275736"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g85ea5aa3d396cb31211be62175f45245">fc_releaseSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to minimize variable's memory usage.  <a href="#g85ea5aa3d396cb31211be62175f45245"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g1de53216125d0074933ecf6006f1796a">fc_deleteVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a variable.  <a href="#g1de53216125d0074933ecf6006f1796a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gef5ebe119abe1d217a216f0faad0e667">fc_deleteSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a sequence variable.  <a href="#gef5ebe119abe1d217a216f0faad0e667"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get variable metadata.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2">fc_isVariableValid</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that the handle refers to a valid variable.  <a href="#g31f5830cdcafcce9ffec2c8bb2ff46e2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e">fc_isSeqVariableValid</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that the handle refers to a valid variable.  <a href="#gac07e226e274bee4de4b21db8e03ae0e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb">fc_isVariableGlobal</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that whether a variable is global.  <a href="#ge37eb4dc16b959c2adb548c6f195decb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g233584b319c5dd90a13582fc9ac3484e">fc_getVariableName</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, char **varName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return name of a variable.  <a href="#g233584b319c5dd90a13582fc9ac3484e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g314a992ec5ba07d7075f1172b13ef166">fc_getSequenceFromSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> *sequence)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the parent sequence of a sequence variable.  <a href="#g314a992ec5ba07d7075f1172b13ef166"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ge86dd143aacebc8510eafaa651471745">fc_getDatasetFromVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> *dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the parent dataset of the variable.  <a href="#ge86dd143aacebc8510eafaa651471745"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g6808d2015766d9b530b93375f42296a3">fc_getMeshFromVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> *mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the parent mesh of the variable.  <a href="#g6808d2015766d9b530b93375f42296a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc">fc_getVariableInfo</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int *numDataPoint, int *<a class="el" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> *assoc, <a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> *mathtype, <a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a> *datatype)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get information about a variable.  <a href="#gcd52b4ee0552c63ff2819e5f30549cbc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gd3b7cecfd0c6d488e82b426b4c114aba">fc_getVariableDataType</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a> *datatype)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the data type of a variable.  <a href="#gd3b7cecfd0c6d488e82b426b4c114aba"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ge4935bc28dae482ddabcfd421400ab13">fc_getVariableAssociationType</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> *assoc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return data association of a variable.  <a href="#ge4935bc28dae482ddabcfd421400ab13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gb3e6e14f099d7870ee2c38ccccf87544">fc_getVariableNumComponent</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int *<a class="el" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return number of components of a variable.  <a href="#gb3e6e14f099d7870ee2c38ccccf87544"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g5dfa6a1adb587b1f865bceb83b0824ab">fc_getVariableMathType</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> *mathtype)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the math type of a variable.  <a href="#g5dfa6a1adb587b1f865bceb83b0824ab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g2af8bf7fdb2852fe2ddd06fd94ee4caa">fc_getVariableNumDataPoint</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int *numDataPoint)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return number of data points in a variable.  <a href="#g2af8bf7fdb2852fe2ddd06fd94ee4caa"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get variable big data.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d">fc_getVariableDataPtr</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, void **data_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the data in a variable.  <a href="#g40a4d68cafd7134b908b78d053d3c47d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gd2bb293943346a413ef5fa244a072b8f">fc_getVariableDataAsDataType</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a> dataType, void **data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a copy of a variable's data as the requested data type.  <a href="#gd2bb293943346a413ef5fa244a072b8f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g80f8c5422576d1d2b706cc8b1def12f3">fc_getSeqVariableDataPointSliceAsSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar, int dataPointID, char *slicevarname, <a class="el" href="structFC__Variable.html">FC_Variable</a> **sliceVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">In a sequence variable, get data for steps at a single data point returned as a sequence variable with association FC_AT_WHOLE_MESH.  <a href="#g80f8c5422576d1d2b706cc8b1def12f3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g67e32c7737be27b1ee6416caf5797969">fc_getSeqVariableDataPointSlice</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar, int dataPointID, void **history)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">In a sequence variable, get data for steps at a single data.  <a href="#g67e32c7737be27b1ee6416caf5797969"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Print variable.</h2></td></tr>
<tr><td colspan="2"><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g0520197d0fda43d47af61ff75952850a">fc_printVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, char *label, int print_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print variable meta data to stdout, and optionally the data values.  <a href="#g0520197d0fda43d47af61ff75952850a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gafedecdb3d843b26c1bfd19d380603da">fc_printSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVars, char *label, int print_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print sequence variable meta data to stdout, and optionally the data values.  <a href="#gafedecdb3d843b26c1bfd19d380603da"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ge11cf719983d7d612990b3d414e11e0d">fc_printSeqVariableRange</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVars, int range_start, int range_stop, char *label, int print_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print sequence variable meta data to stdout, and optionally the data values (with start and stop index values).  <a href="#ge11cf719983d7d612990b3d414e11e0d"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g9d02349d8cee2acdf1a00d2568f1ce77"></a><!-- doxytag: member="variable.c::fc_changeSeqVariableName" ref="g9d02349d8cee2acdf1a00d2568f1ce77" args="(int numStep, FC_Variable *variables, char *newName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_changeSeqVariableName           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the name of a sequence variable. 
<p>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD. Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
Input - Number of steps in the seq variable. </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
Input - the steps of the seq variable. </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - new name for the seq variable. </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04830">4830</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="varSmooth_8c-source.html#l00069">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04834"></a>04834   {
<a name="l04835"></a>04835   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc, rc_keep = <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04836"></a>04836   <span class="keywordtype">int</span> i;
<a name="l04837"></a>04837   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l04838"></a>04838 
<a name="l04839"></a>04839   <span class="comment">// check input</span>
<a name="l04840"></a>04840   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(numStep, variables) || newName == NULL) {
<a name="l04841"></a>04841     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04842"></a>04842     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04843"></a>04843   }
<a name="l04844"></a>04844 
<a name="l04845"></a>04845   <span class="comment">// log message</span>
<a name="l04846"></a>04846   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variables[0]); 
<a name="l04847"></a>04847   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Changing name of seq variable from '%s' to '%s'"</span>, 
<a name="l04848"></a>04848                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l04849"></a>04849   
<a name="l04850"></a>04850   <span class="comment">// Do it</span>
<a name="l04851"></a>04851   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l04852"></a>04852     rc = <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>, newName);
<a name="l04853"></a>04853     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l04854"></a>04854       rc_keep = rc;
<a name="l04855"></a>04855   }
<a name="l04856"></a>04856   <span class="keywordflow">return</span> rc_keep;
<a name="l04857"></a>04857 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3f7b38c448313f3dbd9fb19b34899ef8"></a><!-- doxytag: member="variable.c::fc_changeVariableName" ref="g3f7b38c448313f3dbd9fb19b34899ef8" args="(FC_Variable variable, char *newName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_changeVariableName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the name of a variable. 
<p>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD. Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
Input - the variable. </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - new name for the variable. </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04802">4802</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="varSmooth_8c-source.html#l00069">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04805"></a>04805   {
<a name="l04806"></a>04806   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l04807"></a>04807 
<a name="l04808"></a>04808   <span class="comment">// check input</span>
<a name="l04809"></a>04809   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l04810"></a>04810   <span class="keywordflow">if</span> (varSlot == NULL || newName == NULL) {
<a name="l04811"></a>04811     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04812"></a>04812     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04813"></a>04813   }
<a name="l04814"></a>04814 
<a name="l04815"></a>04815   <span class="comment">// log message</span>
<a name="l04816"></a>04816   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Changing name of variable from '%s' to '%s'"</span>, 
<a name="l04817"></a>04817                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l04818"></a>04818   
<a name="l04819"></a>04819   <span class="comment">// Do it</span>
<a name="l04820"></a>04820   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>, newName);
<a name="l04821"></a>04821 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g962a68f110466d7e77d7bae3df089f20"></a><!-- doxytag: member="variable.c::fc_convertVariablesToSeqVariable" ref="g962a68f110466d7e77d7bae3df089f20" args="(int numStep, FC_Variable *vars, FC_Sequence sequence, char *new_name, FC_Variable **seqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_convertVariablesToSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>sequence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>seqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert an array of basic vars into a sequence var. 
<p>
<b>Description:</b> <p>
This routine converts an array of basic vars into a sequence var. It is a LOT more efficient than copy the data of basic vars into the steps of a newly created seq var because no creation/destruction goes on -- it just changes how the mesh views the variable handles.<p>
You should put the variables in the order they will be on the sequence. There must be the same number of variables as there are steps on the sequence. The variables and the sequence have to be in the same dataset. All of the variables must be on the same mesh and have the same metadata (except the name). The variables cannot already be part of a sequence variable.<p>
If no name is supplied, the seqVar will have the name of the first variable.<p>
(The array of vars that is the seq var should be exactly the array passed in. A new one is made in case the original array was automatically generated--fc_deleteSeqVariable would fail on an automatically allocated array because it tries to free the array of handles.)<p>
<b>Modifications:</b> <ul>
<li>10/21/04 WSK created.</li><li>9/21/2006 WSD modified to handle global vars </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - the number of steps </td></tr>
<tr><td valign="top"><em>vars</em>&nbsp;</td><td>
input - the variables (array numStep long) (this should be freed by user if malloc'd) </td></tr>
<tr><td valign="top"><em>sequence</em>&nbsp;</td><td>
input - the sequence (with numStep steps) </td></tr>
<tr><td valign="top"><em>new_name</em>&nbsp;</td><td>
input - new name (optional) </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
output - pointer to seq's var handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l02735">2735</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="regionreassembler_8c-source.html#l00066">ds</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="sequence_8c-source.html#l01570">fc_getDatasetFromSequence()</a>, <a class="el" href="variable_8c-source.html#l05352">fc_getDatasetFromVariable()</a>, <a class="el" href="variable_8c-source.html#l05392">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="sequence_8c-source.html#l01652">fc_getSequenceNumStep()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="sequence_8c-source.html#l01505">fc_isSequenceValid()</a>, <a class="el" href="variable_8c-source.html#l05156">fc_isVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numBasicVar</a>, <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>, <a class="el" href="meshP_8h-source.html#l00189">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00190">_FC_MeshSlot::numStepPerSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>, <a class="el" href="meshP_8h-source.html#l00191">_FC_MeshSlot::seqVarIDs</a>, <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>, and <a class="el" href="variableP_8h-source.html#l00080">_FC_VarSlot::stepID</a>.</p>

<p>Referenced by <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>, <a class="el" href="varNormalize_8c-source.html#l00116">createStressOrPressureVar()</a>, <a class="el" href="varmath_8c-source.html#l01394">fc_constOperatorSeqVar()</a>, <a class="el" href="variable_8c-source.html#l03056">fc_createComponentSeqVariables()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l03299">fc_mergeComponentSeqVariables()</a>, <a class="el" href="varmath_8c-source.html#l00655">fc_operatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l00979">fc_seqConstOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02640">fc_seqVarBinaryFunctionConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02414">fc_seqVarBinaryFunctionSeqConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02546">fc_seqVarBinaryFunctionSeqVarConst()</a>, <a class="el" href="varmath_8c-source.html#l02284">fc_seqVarBinaryFunctionSeqVarSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l02179">fc_seqVarBinaryFunctionSeqVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01296">fc_seqVarOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00858">fc_seqVarOperatorSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l00747">fc_seqVarOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l02094">fc_seqVarUnaryFunction()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, and <a class="el" href="gaplines_8c-source.html#l00433">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02742"></a>02742   {
<a name="l02743"></a>02743   <span class="keywordtype">int</span> i, j;
<a name="l02744"></a>02744   <span class="keywordtype">int</span> temp_numStep;
<a name="l02745"></a>02745   <a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a> dataset1, dataset2;
<a name="l02746"></a>02746   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh;
<a name="l02747"></a>02747   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a> *varSlots[numStep];
<a name="l02748"></a>02748   <span class="keywordtype">int</span>* varMask;
<a name="l02749"></a>02749   <span class="keywordtype">int</span> *tempNumPer, **tempSlotIDs;
<a name="l02750"></a>02750   <span class="keywordtype">int</span> *numBasicVar_p, **basicVarIDs_p;
<a name="l02751"></a>02751   <span class="keywordtype">int</span> *numSeqVar_p, **numStepPerSeqVar_p, ***seqVarIDs_p;
<a name="l02752"></a>02752 
<a name="l02753"></a>02753   <span class="comment">// default return</span>
<a name="l02754"></a>02754   <span class="keywordflow">if</span> (seqVar)
<a name="l02755"></a>02755     *seqVar = NULL;
<a name="l02756"></a>02756 
<a name="l02757"></a>02757   <span class="comment">// test input -- a lot of conditions!</span>
<a name="l02758"></a>02758   <span class="keywordflow">if</span> (numStep &lt; 0 || !vars || !<a class="code" href="group__Sequence.html#g55e1bf7be4e19be93103378503b123b9" title="Check that the handle refers to a valid sequence.">fc_isSequenceValid</a>(sequence) ||
<a name="l02759"></a>02759       !seqVar) {
<a name="l02760"></a>02760     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02761"></a>02761     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02762"></a>02762   }
<a name="l02763"></a>02763   <a class="code" href="group__Sequence.html#g194ee559cc88eaefc57a556dbcd6b6cb" title="Get number of steps in a sequence.">fc_getSequenceNumStep</a>(sequence, &amp;temp_numStep);
<a name="l02764"></a>02764   <span class="keywordflow">if</span> (numStep != temp_numStep) {
<a name="l02765"></a>02765     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"numStep (%d) does not agree with sequence's "</span>
<a name="l02766"></a>02766                           <span class="stringliteral">"numStep (%d)"</span>, numStep, temp_numStep);
<a name="l02767"></a>02767     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02768"></a>02768   }
<a name="l02769"></a>02769   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l02770"></a>02770     <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(vars[i])) {
<a name="l02771"></a>02771       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02772"></a>02772       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02773"></a>02773     }
<a name="l02774"></a>02774     varSlots[i] = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(vars[i]);
<a name="l02775"></a>02775     <span class="keywordflow">if</span> (varSlots[i]-&gt;stepID &gt;= 0) {
<a name="l02776"></a>02776       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Variable is already part of a sequence variable"</span>);
<a name="l02777"></a>02777       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02778"></a>02778     }
<a name="l02779"></a>02779   }
<a name="l02780"></a>02780   <a class="code" href="group__Sequence.html#gb9a183fb6229235d8d40baabe29ceafd" title="Get the parent dataset of the sequence.">fc_getDatasetFromSequence</a>(sequence, &amp;dataset1);
<a name="l02781"></a>02781   <a class="code" href="group__Variable.html#ge86dd143aacebc8510eafaa651471745" title="Get the parent dataset of the variable.">fc_getDatasetFromVariable</a>(vars[0], &amp;dataset2);
<a name="l02782"></a>02782   <a class="code" href="group__Variable.html#g6808d2015766d9b530b93375f42296a3" title="Get the parent mesh of the variable.">fc_getMeshFromVariable</a>(vars[0], &amp;mesh);
<a name="l02783"></a>02783   <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dataset1, dataset2)) {
<a name="l02784"></a>02784     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"variable and sequence are not in same dataset"</span>);
<a name="l02785"></a>02785     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02786"></a>02786   }
<a name="l02787"></a>02787   <span class="keywordflow">for</span> (i = 1; i &lt; numStep; i++) {
<a name="l02788"></a>02788     <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(varSlots[i]-&gt;<a class="code" href="regionreassembler_8c.html#5470d1fe286b8864424987862ea74aae">ds</a>, dataset1)) {
<a name="l02789"></a>02789       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"variables are not on same dataset"</span>);
<a name="l02790"></a>02790       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02791"></a>02791     }
<a name="l02792"></a>02792     <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(varSlots[i]-&gt;mesh, mesh)) {
<a name="l02793"></a>02793       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"variables are not on same mesh"</span>);
<a name="l02794"></a>02794       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02795"></a>02795     }
<a name="l02796"></a>02796     <span class="keywordflow">if</span> (varSlots[i]-&gt;numDataPoint != varSlots[0]-&gt;numDataPoint ||
<a name="l02797"></a>02797         varSlots[i]-&gt;<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> != varSlots[0]-&gt;<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> ||
<a name="l02798"></a>02798         varSlots[i]-&gt;assoc        != varSlots[0]-&gt;assoc ||
<a name="l02799"></a>02799         varSlots[i]-&gt;mathtype     != varSlots[0]-&gt;mathtype ||
<a name="l02800"></a>02800         varSlots[i]-&gt;datatype     != varSlots[0]-&gt;datatype) {
<a name="l02801"></a>02801       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"variables have differing metadata"</span>);
<a name="l02802"></a>02802       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02803"></a>02803     }
<a name="l02804"></a>02804   }
<a name="l02805"></a>02805 
<a name="l02806"></a>02806   <span class="comment">// similar to fc_createSeqVariable()</span>
<a name="l02807"></a>02807 
<a name="l02808"></a>02808   <span class="comment">// Change names</span>
<a name="l02809"></a>02809   <span class="keywordflow">if</span> (new_name) {
<a name="l02810"></a>02810     <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) 
<a name="l02811"></a>02811       <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;varSlots[i]-&gt;header, new_name);
<a name="l02812"></a>02812   }
<a name="l02813"></a>02813   <span class="keywordflow">else</span> {
<a name="l02814"></a>02814     <span class="keywordflow">for</span> (i = 1; i &lt; numStep; i++)
<a name="l02815"></a>02815       <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;varSlots[i]-&gt;header, varSlots[0]-&gt;header.name);
<a name="l02816"></a>02816   }
<a name="l02817"></a>02817 
<a name="l02818"></a>02818   <span class="comment">// change var contents to reflect new state as seq vars</span>
<a name="l02819"></a>02819   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l02820"></a>02820     varSlots[i]-&gt;<a class="code" href="struct__FC__VarSlot.html#bf719e972f05ce7ba74975fcdbccfd1a">sequence</a> = sequence;
<a name="l02821"></a>02821     varSlots[i]-&gt;<a class="code" href="struct__FC__VarSlot.html#ad6e1772eae1748e6277591ab8bd0f13">stepID</a> = i;
<a name="l02822"></a>02822   }
<a name="l02823"></a>02823 
<a name="l02824"></a>02824   <span class="comment">// get pointers to stuff on mesh or dataset, depending</span>
<a name="l02825"></a>02825   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(mesh, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>)) {
<a name="l02826"></a>02826     <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a> *dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(varSlots[0]-&gt;<a class="code" href="regionreassembler_8c.html#5470d1fe286b8864424987862ea74aae">ds</a>);
<a name="l02827"></a>02827     numBasicVar_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>;
<a name="l02828"></a>02828     basicVarIDs_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#865385a15cb135b3d8db2c4d70452798">basicVarIDs</a>;
<a name="l02829"></a>02829     numSeqVar_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>;
<a name="l02830"></a>02830     numStepPerSeqVar_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a>;
<a name="l02831"></a>02831     seqVarIDs_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>;
<a name="l02832"></a>02832   }
<a name="l02833"></a>02833   <span class="keywordflow">else</span> {
<a name="l02834"></a>02834     <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a> *meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(varSlots[0]-&gt;mesh);
<a name="l02835"></a>02835     numBasicVar_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>;
<a name="l02836"></a>02836     basicVarIDs_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#c599e2802ddaeb185a171b147f2c4ba1">basicVarIDs</a>;
<a name="l02837"></a>02837     numSeqVar_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>;
<a name="l02838"></a>02838     numStepPerSeqVar_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e17e969e56b697232591e53ba6c55ba4">numStepPerSeqVar</a>;
<a name="l02839"></a>02839     seqVarIDs_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e9d6f6c85dc084548c919597d128ff75">seqVarIDs</a>;
<a name="l02840"></a>02840   }
<a name="l02841"></a>02841 
<a name="l02842"></a>02842   <span class="comment">// Add the handles to list of sequence vars</span>
<a name="l02843"></a>02843   tempNumPer = (<span class="keywordtype">int</span>*)realloc(*numStepPerSeqVar_p,
<a name="l02844"></a>02844                     ((*numSeqVar_p)+1)*<span class="keyword">sizeof</span>(int)); 
<a name="l02845"></a>02845   tempSlotIDs = (<span class="keywordtype">int</span>**)realloc(*seqVarIDs_p,
<a name="l02846"></a>02846                       (*numSeqVar_p+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*));
<a name="l02847"></a>02847   <span class="keywordflow">if</span> (!tempNumPer || !tempSlotIDs) {
<a name="l02848"></a>02848     free(tempNumPer); free(tempSlotIDs);
<a name="l02849"></a>02849     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02850"></a>02850     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02851"></a>02851   }
<a name="l02852"></a>02852   tempSlotIDs[*numSeqVar_p] = (<span class="keywordtype">int</span>*)malloc(numStep*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)); 
<a name="l02853"></a>02853   <span class="keywordflow">if</span> (!tempSlotIDs[*numSeqVar_p]) {
<a name="l02854"></a>02854     free(tempNumPer); free(tempSlotIDs);
<a name="l02855"></a>02855     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02856"></a>02856     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02857"></a>02857   }
<a name="l02858"></a>02858   tempNumPer[*numSeqVar_p] = numStep;
<a name="l02859"></a>02859   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) 
<a name="l02860"></a>02860     tempSlotIDs[*numSeqVar_p][i] = vars[i].slotID;
<a name="l02861"></a>02861   *numStepPerSeqVar_p = tempNumPer;
<a name="l02862"></a>02862   *seqVarIDs_p = tempSlotIDs;
<a name="l02863"></a>02863   *numSeqVar_p = (*numSeqVar_p) + 1;
<a name="l02864"></a>02864 
<a name="l02865"></a>02865   <span class="comment">// remove handles from list of basic vars</span>
<a name="l02866"></a>02866   varMask = calloc(*numBasicVar_p, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l02867"></a>02867   <span class="keywordflow">if</span> (varMask == NULL) {
<a name="l02868"></a>02868     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02869"></a>02869     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02870"></a>02870   }
<a name="l02871"></a>02871   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l02872"></a>02872     <span class="keywordflow">for</span> (j = 0; j &lt; *numBasicVar_p; j++) {
<a name="l02873"></a>02873       <span class="keywordflow">if</span> (vars[i].slotID == (*basicVarIDs_p)[j]) {
<a name="l02874"></a>02874         varMask[j] = 1;
<a name="l02875"></a>02875         <span class="keywordflow">break</span>;
<a name="l02876"></a>02876       }
<a name="l02877"></a>02877     }
<a name="l02878"></a>02878     <span class="keywordflow">if</span> (j == *numBasicVar_p) {
<a name="l02879"></a>02879       printf(<span class="stringliteral">"**** developer note: something went wrong!!\n"</span>);
<a name="l02880"></a>02880       fflush(NULL);
<a name="l02881"></a>02881       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l02882"></a>02882     }
<a name="l02883"></a>02883   }
<a name="l02884"></a>02884   j = 0;
<a name="l02885"></a>02885   *numBasicVar_p = *numBasicVar_p - numStep;
<a name="l02886"></a>02886   <span class="keywordflow">if</span> (*numBasicVar_p == 0) {
<a name="l02887"></a>02887     free(*basicVarIDs_p);
<a name="l02888"></a>02888     *basicVarIDs_p = NULL;
<a name="l02889"></a>02889   }
<a name="l02890"></a>02890   <span class="keywordflow">else</span> {
<a name="l02891"></a>02891     <span class="keywordflow">for</span> (i = 0; i &lt; *numBasicVar_p + numStep; i++) {
<a name="l02892"></a>02892       <span class="keywordflow">if</span> (varMask[i] == 0) {
<a name="l02893"></a>02893         (*basicVarIDs_p)[j] = (*basicVarIDs_p)[i];
<a name="l02894"></a>02894         j++;
<a name="l02895"></a>02895       }
<a name="l02896"></a>02896     }
<a name="l02897"></a>02897   }
<a name="l02898"></a>02898   free(varMask);
<a name="l02899"></a>02899   <span class="comment">// FIX realloc to make smaller</span>
<a name="l02900"></a>02900 
<a name="l02901"></a>02901   <span class="comment">// make return values</span>
<a name="l02902"></a>02902   *seqVar = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*)malloc(numStep*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l02903"></a>02903   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++)
<a name="l02904"></a>02904     (*seqVar)[i] = vars[i];
<a name="l02905"></a>02905     
<a name="l02906"></a>02906   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02907"></a>02907 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gbfe8d161124e5e9e184337d03bfc69dc"></a><!-- doxytag: member="variable.c::fc_copyGlobalSeqVariable" ref="gbfe8d161124e5e9e184337d03bfc69dc" args="(int numStep, FC_Variable *src_vars, FC_Dataset dest_ds, FC_Sequence dest_seq, char *newName, FC_Variable **new_vars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copyGlobalSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>src_vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dest_ds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>dest_seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>new_vars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a global sequence variable. 
<p>
<b>Description:</b> <p>
Create a copy of a global seq variable into the specified dataset using the given name. This will return an error if the source and destination sequences are not similar enough. This will copy a sequence if necessary. The destination sequence's dataset needs to be the same as the destintation dataset or an error will be returned.<p>
The input variable can be a non-global associated with a whole mesh (FC_AT_WHOLE_MESH).<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 WSD Created.</li><li>11/08/2006 WSD added ability to whole mesh var onto a dataset. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
Input - the number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>src_vars</em>&nbsp;</td><td>
Input - the source seq variables to be copied </td></tr>
<tr><td valign="top"><em>dest_ds</em>&nbsp;</td><td>
Input - the destination dataset to be copied into </td></tr>
<tr><td valign="top"><em>dest_seq</em>&nbsp;</td><td>
Input - the destination seq to be copied into </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_vars</em>&nbsp;</td><td>
Output - array of handles to the new variable </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l00818">818</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="sequence_8c-source.html#l02142">_fc_getSeqSlot()</a>, <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="sequenceP_8h-source.html#l00076">_FC_SeqSlot::ds</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00187">fc_createGlobalSeqVariable()</a>, <a class="el" href="base_8c-source.html#l00477">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00172">fc_copyDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00826"></a>00826   {
<a name="l00827"></a>00827   <span class="keywordtype">int</span> i; 
<a name="l00828"></a>00828   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00829"></a>00829   <span class="keywordtype">int</span> temp_numStep;
<a name="l00830"></a>00830   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dest_dsSlot;
<a name="l00831"></a>00831   <a class="code" href="struct__FC__SeqSlot.html" title="Sequence Slot Structure for the Sequence Table.">_FC_SeqSlot</a>* dest_seqSlot;
<a name="l00832"></a>00832   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l00833"></a>00833   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l00834"></a>00834   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l00835"></a>00835   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype;
<a name="l00836"></a>00836   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype;
<a name="l00837"></a>00837   <span class="keywordtype">void</span>* data;
<a name="l00838"></a>00838   
<a name="l00839"></a>00839   <span class="comment">// default return value</span>
<a name="l00840"></a>00840   <span class="keywordflow">if</span> (new_vars)
<a name="l00841"></a>00841     *new_vars = NULL;
<a name="l00842"></a>00842   
<a name="l00843"></a>00843   <span class="comment">// check input</span>
<a name="l00844"></a>00844   dest_dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dest_ds);
<a name="l00845"></a>00845   dest_seqSlot = <a class="code" href="group__PrivateSequence.html#g311b52c3aa6307afba63b26ad035afe5" title="Get a sequence slot from a sequence handle.">_fc_getSeqSlot</a>(dest_seq);
<a name="l00846"></a>00846   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(numStep, src_vars) || dest_dsSlot == NULL || 
<a name="l00847"></a>00847       dest_seqSlot == NULL || !<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_ds, dest_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#2897f87e3063786bb2375f3b98342738">ds</a>) ||
<a name="l00848"></a>00848       numStep != dest_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>  || new_vars == NULL) {
<a name="l00849"></a>00849     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00850"></a>00850     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00851"></a>00851   }
<a name="l00852"></a>00852   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(src_vars[0]);
<a name="l00853"></a>00853 
<a name="l00854"></a>00854   <span class="comment">// test for NULL name</span>
<a name="l00855"></a>00855   <span class="keywordflow">if</span> (newName == NULL)
<a name="l00856"></a>00856     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l00857"></a>00857 
<a name="l00858"></a>00858   <span class="comment">// log message</span>
<a name="l00859"></a>00859   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Copying global sequence variable '%s' to '%s'"</span>, 
<a name="l00860"></a>00860                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l00861"></a>00861 
<a name="l00862"></a>00862   <span class="comment">// get src meta data</span>
<a name="l00863"></a>00863   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(src_vars[0], &amp;numDataPoint, &amp;numComp, &amp;assoc,
<a name="l00864"></a>00864                  &amp;mathtype, &amp;datatype);
<a name="l00865"></a>00865   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00866"></a>00866     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for seq variable '%s'"</span>,
<a name="l00867"></a>00867                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00868"></a>00868     <span class="keywordflow">return</span> rc;
<a name="l00869"></a>00869   }
<a name="l00870"></a>00870 
<a name="l00871"></a>00871   <span class="comment">// more checking</span>
<a name="l00872"></a>00872   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a> || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>) {
<a name="l00873"></a>00873     assoc = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>;
<a name="l00874"></a>00874   }
<a name="l00875"></a>00875   <span class="keywordflow">else</span> {
<a name="l00876"></a>00876     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"var of assoc type %s cannot be copied to a dataset"</span>,
<a name="l00877"></a>00877                           <a class="code" href="group__DataTypes.html#g615e96c3b13331857b5ba45d597c49de" title="Return the name of the FC_AssociationType&amp;#39;s value.">fc_getAssociationTypeText</a>(assoc));
<a name="l00878"></a>00878     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00879"></a>00879   }
<a name="l00880"></a>00880 
<a name="l00881"></a>00881   <span class="comment">// create new variable</span>
<a name="l00882"></a>00882   rc = <a class="code" href="group__Variable.html#g7cb59e75c9e63c1dcc09b42787b57227" title="Create a new global sequence variable.">fc_createGlobalSeqVariable</a>(dest_ds, dest_seq, newName, &amp;temp_numStep,
<a name="l00883"></a>00883                       new_vars);
<a name="l00884"></a>00884   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00885"></a>00885     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new seq variable '%s'"</span>, newName);
<a name="l00886"></a>00886     <span class="keywordflow">return</span> rc;
<a name="l00887"></a>00887   }
<a name="l00888"></a>00888   
<a name="l00889"></a>00889   <span class="comment">// get and copy data for each step</span>
<a name="l00890"></a>00890   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l00891"></a>00891     rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(src_vars[i], &amp;data);
<a name="l00892"></a>00892     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00893"></a>00893       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for step %d of seq variable "</span>
<a name="l00894"></a>00894                             <span class="stringliteral">"'%s'"</span>, i, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00895"></a>00895       <span class="keywordflow">return</span> rc;
<a name="l00896"></a>00896     }
<a name="l00897"></a>00897     
<a name="l00898"></a>00898     rc = <a class="code" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData</a>((*new_vars)[i], numDataPoint, numComp, assoc, 
<a name="l00899"></a>00899                             mathtype, datatype, data);
<a name="l00900"></a>00900     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00901"></a>00901       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for step %d of seq variable "</span>
<a name="l00902"></a>00902                             <span class="stringliteral">"'%s'"</span>, i, newName);
<a name="l00903"></a>00903       <span class="keywordflow">return</span> rc;
<a name="l00904"></a>00904     }
<a name="l00905"></a>00905   }
<a name="l00906"></a>00906   
<a name="l00907"></a>00907   <span class="keywordflow">return</span> rc;
<a name="l00908"></a>00908 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gf29e653a0f5cc6b29dc84796563a0583"></a><!-- doxytag: member="variable.c::fc_copyGlobalVariable" ref="gf29e653a0f5cc6b29dc84796563a0583" args="(FC_Variable src_var, FC_Dataset dest_dataset, char *newName, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copyGlobalVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>src_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dest_dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a global variable. 
<p>
<b>Description:</b> <p>
Create a copy of a global variable into the specified dataset using the given name.<p>
The input variable can be a non-global associated with a whole mesh (FC_AT_WHOLE_MESH).<p>
<b>Modifications:</b> <ul>
<li>2006/09/19 WSD Created.</li><li>11/08/2006 WSD added ability to whole mesh var onto a dataset. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_var</em>&nbsp;</td><td>
Input - the source variable to be copied </td></tr>
<tr><td valign="top"><em>dest_dataset</em>&nbsp;</td><td>
Input - the destination dataset to be copied into </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
Output - handle to the new variable </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l00724">724</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00124">fc_createGlobalVariable()</a>, <a class="el" href="base_8c-source.html#l00477">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="dataset_8c-source.html#l00762">fc_isDatasetValid()</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00172">fc_copyDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00730"></a>00730     { 
<a name="l00731"></a>00731   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00732"></a>00732   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l00733"></a>00733   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l00734"></a>00734   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l00735"></a>00735   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype;
<a name="l00736"></a>00736   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype;
<a name="l00737"></a>00737   <span class="keywordtype">void</span>* data;
<a name="l00738"></a>00738   
<a name="l00739"></a>00739   <span class="comment">// default return value</span>
<a name="l00740"></a>00740   <span class="keywordflow">if</span> (new_var)
<a name="l00741"></a>00741     *new_var = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l00742"></a>00742 
<a name="l00743"></a>00743   <span class="comment">// check input - NULL name is o.k.</span>
<a name="l00744"></a>00744   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(src_var);
<a name="l00745"></a>00745   <span class="keywordflow">if</span> (varSlot == NULL || !<a class="code" href="group__Dataset.html#gbff33f569a0182d65a40cf46c98dcf54" title="Check that the handle refers to a valid dataset.">fc_isDatasetValid</a>(dest_dataset) || new_var == NULL) {
<a name="l00746"></a>00746     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00747"></a>00747     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00748"></a>00748   }
<a name="l00749"></a>00749 
<a name="l00750"></a>00750   <span class="comment">// test for NULL name</span>
<a name="l00751"></a>00751   <span class="keywordflow">if</span> (newName == NULL)
<a name="l00752"></a>00752     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l00753"></a>00753 
<a name="l00754"></a>00754   <span class="comment">// log message</span>
<a name="l00755"></a>00755   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Copying global variable '%s' to '%s'"</span>, 
<a name="l00756"></a>00756                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l00757"></a>00757 
<a name="l00758"></a>00758   <span class="comment">// get other info from source variable &amp;</span>
<a name="l00759"></a>00759   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(src_var, &amp;numDataPoint, &amp;numComp, &amp;assoc,
<a name="l00760"></a>00760                           &amp;mathtype, &amp;datatype);
<a name="l00761"></a>00761   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00762"></a>00762     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l00763"></a>00763                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00764"></a>00764     <span class="keywordflow">return</span> rc;
<a name="l00765"></a>00765   }
<a name="l00766"></a>00766 
<a name="l00767"></a>00767   <span class="comment">// more checking</span>
<a name="l00768"></a>00768   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a> || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>) {
<a name="l00769"></a>00769     assoc = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>;
<a name="l00770"></a>00770   }
<a name="l00771"></a>00771   <span class="keywordflow">else</span> {
<a name="l00772"></a>00772     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"var of assoc type %s cannot be copied to a dataset"</span>,
<a name="l00773"></a>00773                           <a class="code" href="group__DataTypes.html#g615e96c3b13331857b5ba45d597c49de" title="Return the name of the FC_AssociationType&amp;#39;s value.">fc_getAssociationTypeText</a>(assoc));
<a name="l00774"></a>00774     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00775"></a>00775   }
<a name="l00776"></a>00776 
<a name="l00777"></a>00777   <span class="comment">// --- do it</span>
<a name="l00778"></a>00778   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(src_var, &amp;data);
<a name="l00779"></a>00779   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00780"></a>00780     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l00781"></a>00781                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00782"></a>00782     <span class="keywordflow">return</span> rc;
<a name="l00783"></a>00783   }
<a name="l00784"></a>00784   rc = <a class="code" href="group__Variable.html#gc15b2d6deabd12b43786430eb16f02f6" title="Create a new global variable.">fc_createGlobalVariable</a>(dest_dataset, newName, new_var);
<a name="l00785"></a>00785   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00786"></a>00786     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new global variable '%s'"</span>, newName);
<a name="l00787"></a>00787     <span class="keywordflow">return</span> rc;
<a name="l00788"></a>00788   }
<a name="l00789"></a>00789   rc = <a class="code" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData</a>(*new_var, numDataPoint, numComp, assoc, mathtype, 
<a name="l00790"></a>00790                    datatype, data);
<a name="l00791"></a>00791   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00792"></a>00792     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s'"</span>, newName);
<a name="l00793"></a>00793     <span class="keywordflow">return</span> rc;
<a name="l00794"></a>00794   }
<a name="l00795"></a>00795 
<a name="l00796"></a>00796   <span class="keywordflow">return</span> rc;
<a name="l00797"></a>00797 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gaf25870a6c8032440b6d5565ccc083cb"></a><!-- doxytag: member="variable.c::fc_copySeqVariable" ref="gaf25870a6c8032440b6d5565ccc083cb" args="(int numStep, FC_Variable *src_seqVar, FC_Mesh dest_mesh, FC_Sequence dest_seq, char *newName, FC_Variable **new_seqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copySeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>src_seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>dest_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>dest_seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>new_seqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a sequence variable. 
<p>
<b>Description:</b> <p>
Create a copy of a sequence variable into the specified mesh using with the given name. This will return an error if the source and destination sequences and meshes are not similar enough. This will copy a sequence if necessary. The destination mesh and sequence need to belong to the same dataset or an error will be returned.<p>
The input variable can be a global sequence variable; the output will be a sequence variable associated with the mesh (FC_AT_WHOLE_MESH).<p>
<b>Modifications:</b> <ul>
<li>2003-NOV-11 WSK Created</li><li>06/07/04 RM, added checking if destination mesh and a source variable are compatible to perform copy before creating the variable.</li><li>11/08/2006 WSD added ability to copy global seq var onto a mesh. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
Input - the number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>src_seqVar</em>&nbsp;</td><td>
Input - the source seq variables to be copied </td></tr>
<tr><td valign="top"><em>dest_mesh</em>&nbsp;</td><td>
Input - the destination mesh to be copied into </td></tr>
<tr><td valign="top"><em>dest_seq</em>&nbsp;</td><td>
Input - the destination seq to be copied into </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_seqVar</em>&nbsp;</td><td>
Output - array of handles to the new variable </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l02328">2328</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="sequence_8c-source.html#l02142">_fc_getSeqSlot()</a>, <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="sequenceP_8h-source.html#l00076">_FC_SeqSlot::ds</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00350">fc_createSeqVariable()</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>.</p>

<p>Referenced by <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, and <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02336"></a>02336   {
<a name="l02337"></a>02337   <span class="keywordtype">int</span> i; 
<a name="l02338"></a>02338   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l02339"></a>02339   <span class="keywordtype">int</span> temp_numStep;
<a name="l02340"></a>02340   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* dest_meshSlot;
<a name="l02341"></a>02341   <a class="code" href="struct__FC__SeqSlot.html" title="Sequence Slot Structure for the Sequence Table.">_FC_SeqSlot</a>* dest_seqSlot;
<a name="l02342"></a>02342   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l02343"></a>02343   <span class="keywordtype">int</span> numDataPoint, numComp, numEntity;
<a name="l02344"></a>02344   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l02345"></a>02345   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype;
<a name="l02346"></a>02346   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype;
<a name="l02347"></a>02347   <span class="keywordtype">void</span>* data;
<a name="l02348"></a>02348   
<a name="l02349"></a>02349   <span class="comment">// default return value</span>
<a name="l02350"></a>02350   <span class="keywordflow">if</span> (new_seqVar)
<a name="l02351"></a>02351     *new_seqVar = NULL;
<a name="l02352"></a>02352 
<a name="l02353"></a>02353   <span class="comment">// check input</span>
<a name="l02354"></a>02354   dest_meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(dest_mesh);
<a name="l02355"></a>02355   dest_seqSlot  = <a class="code" href="group__PrivateSequence.html#g311b52c3aa6307afba63b26ad035afe5" title="Get a sequence slot from a sequence handle.">_fc_getSeqSlot</a>(dest_seq);
<a name="l02356"></a>02356   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(numStep, src_seqVar) || dest_meshSlot == NULL || 
<a name="l02357"></a>02357       dest_seqSlot == NULL || !<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dest_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>, dest_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#2897f87e3063786bb2375f3b98342738">ds</a>) ||
<a name="l02358"></a>02358       numStep != dest_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>  || new_seqVar == NULL) {
<a name="l02359"></a>02359     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02360"></a>02360     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02361"></a>02361   }
<a name="l02362"></a>02362   
<a name="l02363"></a>02363   <span class="comment">// test for NULL name</span>
<a name="l02364"></a>02364   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(src_seqVar[0]);
<a name="l02365"></a>02365   <span class="keywordflow">if</span> (newName == NULL)
<a name="l02366"></a>02366     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l02367"></a>02367 
<a name="l02368"></a>02368   <span class="comment">// log message</span>
<a name="l02369"></a>02369   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Copying sequence variable '%s' to '%s'"</span>, 
<a name="l02370"></a>02370                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l02371"></a>02371 
<a name="l02372"></a>02372   <span class="comment">// get src meta data</span>
<a name="l02373"></a>02373   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(src_seqVar[0], &amp;numDataPoint, &amp;numComp, &amp;assoc,
<a name="l02374"></a>02374                             &amp;mathtype, &amp;datatype);
<a name="l02375"></a>02375   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l02376"></a>02376     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for seq variable '%s'"</span>,
<a name="l02377"></a>02377                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02378"></a>02378     <span class="keywordflow">return</span> rc;
<a name="l02379"></a>02379   }
<a name="l02380"></a>02380   <span class="comment">// more checking - destination mesh and variable assoc type are compatible</span>
<a name="l02381"></a>02381   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>) {
<a name="l02382"></a>02382     assoc = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>;
<a name="l02383"></a>02383   }
<a name="l02384"></a>02384   <span class="keywordflow">else</span> {
<a name="l02385"></a>02385     rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(dest_mesh, assoc, &amp;numEntity); 
<a name="l02386"></a>02386     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l02387"></a>02387       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02388"></a>02388       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02389"></a>02389     }
<a name="l02390"></a>02390     <span class="keywordflow">if</span> (numEntity != numDataPoint) {
<a name="l02391"></a>02391       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: destination mesh not compatible with src variable"</span>, 
<a name="l02392"></a>02392                             <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02393"></a>02393       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02394"></a>02394     }
<a name="l02395"></a>02395   }
<a name="l02396"></a>02396 
<a name="l02397"></a>02397   <span class="comment">// --- do it</span>
<a name="l02398"></a>02398 
<a name="l02399"></a>02399   <span class="comment">// create new variable</span>
<a name="l02400"></a>02400   rc = <a class="code" href="group__Variable.html#g05d5098e68c1761ac851b2509dfbea70" title="Create a new sequence variable.">fc_createSeqVariable</a>(dest_mesh, dest_seq, newName, &amp;temp_numStep,
<a name="l02401"></a>02401                             new_seqVar);
<a name="l02402"></a>02402   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l02403"></a>02403     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new seq variable '%s'"</span>, newName);
<a name="l02404"></a>02404     <span class="keywordflow">return</span> rc;
<a name="l02405"></a>02405   }
<a name="l02406"></a>02406   
<a name="l02407"></a>02407   <span class="comment">// get and copy data for each step</span>
<a name="l02408"></a>02408   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l02409"></a>02409     rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(src_seqVar[i], &amp;data);
<a name="l02410"></a>02410     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l02411"></a>02411       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for step %d of seq variable "</span>
<a name="l02412"></a>02412                             <span class="stringliteral">"'%s'"</span>, i, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02413"></a>02413       <span class="keywordflow">return</span> rc;
<a name="l02414"></a>02414     }
<a name="l02415"></a>02415     
<a name="l02416"></a>02416     rc = <a class="code" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData</a>((*new_seqVar)[i], numDataPoint, numComp, assoc, 
<a name="l02417"></a>02417                             mathtype, datatype, data);
<a name="l02418"></a>02418     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l02419"></a>02419       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for step %d of seq variable "</span>
<a name="l02420"></a>02420                             <span class="stringliteral">"'%s'"</span>, i, newName);
<a name="l02421"></a>02421       <span class="keywordflow">return</span> rc;
<a name="l02422"></a>02422     }
<a name="l02423"></a>02423   }
<a name="l02424"></a>02424 
<a name="l02425"></a>02425   <span class="keywordflow">return</span> rc;
<a name="l02426"></a>02426 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g2aa08cf0272a9b1651f0d1d7bdc53828"></a><!-- doxytag: member="variable.c::fc_copySeqVariableStepFromRegionMesh" ref="g2aa08cf0272a9b1651f0d1d7bdc53828" args="(FC_Variable src_var, FC_Mesh dest_mesh, FC_Sequence dest_seq, int targetStep, FC_Variable mapping, void *fillval, char *dest_seqvarName, FC_Variable **dest_seqvar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copySeqVariableStepFromRegionMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>src_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>dest_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>dest_seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>targetStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>mapping</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>fillval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>dest_seqvarName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>dest_seqvar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a variable defined on a smaller mesh into a var on a bigger one. 
<p>
<b>Description:</b> This is like fc_copyVariableFromRegionMesh, but where you are copying into a specific step of a seq var.<p>
Note; if there is an invlaid mapping meshpt, it just wont copy that val.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000107">Todo:</a></b></dt><dd><ul>
<li>change so fails if invalid mapping</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>07/20/08 ACG - revamp from prev version that passed in the handle to the var </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_var</em>&nbsp;</td><td>
Input - the source variable to be copied </td></tr>
<tr><td valign="top"><em>dest_mesh</em>&nbsp;</td><td>
Input - the dest mesh </td></tr>
<tr><td valign="top"><em>dest_seq</em>&nbsp;</td><td>
Input - the dest seq </td></tr>
<tr><td valign="top"><em>targetStep</em>&nbsp;</td><td>
Input - which step in the seq to put the data </td></tr>
<tr><td valign="top"><em>mapping</em>&nbsp;</td><td>
Input - mapping var </td></tr>
<tr><td valign="top"><em>fillval</em>&nbsp;</td><td>
Input - optional default fill var only applicable if creating the var </td></tr>
<tr><td valign="top"><em>dest_seqvarName</em>&nbsp;</td><td>
Input - name of new seq var on dest mesh. If NULL the name of the src_var is used </td></tr>
<tr><td valign="top"><em>dest_seqvar</em>&nbsp;</td><td>
Output - the resulting seq var </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l01382">1382</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00350">fc_createSeqVariable()</a>, <a class="el" href="base_8h-source.html#l00139">FC_DT_CHAR</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00149">FC_DT_FLOAT</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l02848">fc_getMeshInfo()</a>, <a class="el" href="mesh_8c-source.html#l02762">fc_getMeshName()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05317">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="sequence_8c-source.html#l01652">fc_getSequenceNumStep()</a>, <a class="el" href="variable_8c-source.html#l04392">fc_getSeqVariableByName()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="variable_8c-source.html#l05276">fc_getVariableName()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, <a class="el" href="sequence_8c-source.html#l01505">fc_isSequenceValid()</a>, <a class="el" href="variable_8c-source.html#l05156">fc_isVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>.</p>

<p>Referenced by <a class="el" href="regionreassembler_8c-source.html#l00080">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01390"></a>01390   { 
<a name="l01391"></a>01391   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01392"></a>01392   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a> *varSlot_s;
<a name="l01393"></a>01393   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> **seqVars, *dest_sv;
<a name="l01394"></a>01394   <span class="keywordtype">char</span>* meshname;
<a name="l01395"></a>01395   <span class="keywordtype">char</span>* dest_svName = NULL;
<a name="l01396"></a>01396   <span class="keywordtype">int</span> numSeqVar, *numStepPerSeqVar, numStep;
<a name="l01397"></a>01397   <span class="keywordtype">int</span> numDataPoint,currnumDataPoint, <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, currnumComponent;
<a name="l01398"></a>01398   <span class="keywordtype">int</span> mappingnumdp,mappingnumc;
<a name="l01399"></a>01399   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc, currassoc, mappingassoc;
<a name="l01400"></a>01400   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype, currmathtype, mappingmathtype;
<a name="l01401"></a>01401   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype, currdatatype, mappingdatatype;
<a name="l01402"></a>01402   <span class="keywordtype">void</span> *data, *new_data, *mappingdata;
<a name="l01403"></a>01403   <span class="keywordtype">int</span> numEntity;
<a name="l01404"></a>01404   <span class="keywordtype">int</span> i, j;
<a name="l01405"></a>01405 
<a name="l01406"></a>01406 
<a name="l01407"></a>01407   <span class="comment">// default return</span>
<a name="l01408"></a>01408   <span class="keywordflow">if</span> (dest_seqvar)
<a name="l01409"></a>01409     *dest_seqvar = NULL;
<a name="l01410"></a>01410 
<a name="l01411"></a>01411 
<a name="l01412"></a>01412   <span class="comment">//test input</span>
<a name="l01413"></a>01413   varSlot_s = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(src_var);
<a name="l01414"></a>01414   <span class="keywordflow">if</span> (varSlot_s == NULL || !<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(mapping) || !<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(dest_mesh) ||
<a name="l01415"></a>01415       !<a class="code" href="group__Sequence.html#g55e1bf7be4e19be93103378503b123b9" title="Check that the handle refers to a valid sequence.">fc_isSequenceValid</a>(dest_seq) || targetStep &lt; 0 || !<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(mapping)){
<a name="l01416"></a>01416     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01417"></a>01417     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01418"></a>01418   }
<a name="l01419"></a>01419 
<a name="l01420"></a>01420   rc = <a class="code" href="group__Sequence.html#g194ee559cc88eaefc57a556dbcd6b6cb" title="Get number of steps in a sequence.">fc_getSequenceNumStep</a>(dest_seq, &amp;numStep);
<a name="l01421"></a>01421   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01422"></a>01422     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot get seq num step"</span>);
<a name="l01423"></a>01423     <span class="keywordflow">return</span> rc;
<a name="l01424"></a>01424   }
<a name="l01425"></a>01425 
<a name="l01426"></a>01426   <span class="keywordflow">if</span> (numStep &lt; targetStep){
<a name="l01427"></a>01427     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Target step is greater than num step in sequence"</span>);
<a name="l01428"></a>01428     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01429"></a>01429   }
<a name="l01430"></a>01430 
<a name="l01431"></a>01431   <span class="comment">// log message</span>
<a name="l01432"></a>01432   rc = <a class="code" href="group__Mesh.html#g3d701a44941883311e4940d7d3b4146a" title="Return name of a mesh.">fc_getMeshName</a>(dest_mesh, &amp;meshname);
<a name="l01433"></a>01433   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01434"></a>01434     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot get mesh name"</span>);
<a name="l01435"></a>01435     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01436"></a>01436   }
<a name="l01437"></a>01437   <span class="keywordflow">if</span> (dest_seqvarName == NULL){
<a name="l01438"></a>01438     rc = <a class="code" href="group__Variable.html#g233584b319c5dd90a13582fc9ac3484e" title="Return name of a variable.">fc_getVariableName</a>(src_var, &amp;dest_svName);
<a name="l01439"></a>01439     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01440"></a>01440       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot get var name"</span>);
<a name="l01441"></a>01441       free(meshname);
<a name="l01442"></a>01442       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01443"></a>01443     }
<a name="l01444"></a>01444   } <span class="keywordflow">else</span> {
<a name="l01445"></a>01445     dest_svName = dest_seqvarName;
<a name="l01446"></a>01446   }
<a name="l01447"></a>01447 
<a name="l01448"></a>01448   
<a name="l01449"></a>01449   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Copying region variable '%s' to '%s' of mesh '%s'"</span>, 
<a name="l01450"></a>01450                       varSlot_s-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, meshname, dest_svName);
<a name="l01451"></a>01451   free(meshname);
<a name="l01452"></a>01452 
<a name="l01453"></a>01453   <span class="comment">//check consistency of src_var and mapping var</span>
<a name="l01454"></a>01454   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(mapping, &amp;mappingnumdp, &amp;mappingnumc,
<a name="l01455"></a>01455                  &amp;mappingassoc,&amp;mappingmathtype,&amp;mappingdatatype);
<a name="l01456"></a>01456   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01457"></a>01457     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for mapping variable"</span>);
<a name="l01458"></a>01458     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01459"></a>01459     <span class="keywordflow">return</span> rc;
<a name="l01460"></a>01460   }
<a name="l01461"></a>01461   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(src_var, &amp;numDataPoint, &amp;numComponent,
<a name="l01462"></a>01462                  &amp;assoc,&amp;mathtype,&amp;datatype);
<a name="l01463"></a>01463   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01464"></a>01464     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for src variable"</span>);
<a name="l01465"></a>01465     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01466"></a>01466     <span class="keywordflow">return</span> rc;
<a name="l01467"></a>01467   }
<a name="l01468"></a>01468 
<a name="l01469"></a>01469     <span class="comment">//NOTE: from writeout - this may be a double</span>
<a name="l01470"></a>01470   <span class="comment">//  if (mappingdatatype != FC_DT_INT){</span>
<a name="l01471"></a>01471   <span class="comment">//    fc_printfErrorMessage("mapping variable must be FC_DT_INT");</span>
<a name="l01472"></a>01472   <span class="comment">//    return FC_INPUT_ERROR;</span>
<a name="l01473"></a>01473   <span class="comment">//  }</span>
<a name="l01474"></a>01474   <span class="keywordflow">if</span> (mappingdatatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a> &amp;&amp; mappingdatatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a> &amp;&amp;
<a name="l01475"></a>01475       mappingdatatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>){
<a name="l01476"></a>01476     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"mappingdatatype must be numeric"</span>);
<a name="l01477"></a>01477     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01478"></a>01478     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01479"></a>01479   }
<a name="l01480"></a>01480   <span class="keywordflow">if</span> (mappingnumc != 1){
<a name="l01481"></a>01481     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"mapping variable must be single component"</span>);
<a name="l01482"></a>01482     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01483"></a>01483     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01484"></a>01484   }
<a name="l01485"></a>01485   <span class="keywordflow">if</span> (mappingassoc != assoc){
<a name="l01486"></a>01486     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"mapping variable and src variable must have same assoc"</span>);
<a name="l01487"></a>01487     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01488"></a>01488     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01489"></a>01489   }
<a name="l01490"></a>01490   <span class="keywordflow">if</span> (datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a> &amp;&amp; datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a> &amp;&amp; datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a> &amp;&amp;
<a name="l01491"></a>01491       datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>){
<a name="l01492"></a>01492     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"src variable must have known type"</span>);
<a name="l01493"></a>01493     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01494"></a>01494     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01495"></a>01495   }
<a name="l01496"></a>01496     
<a name="l01497"></a>01497 
<a name="l01498"></a>01498   <span class="keywordflow">switch</span> (assoc){
<a name="l01499"></a>01499   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>:
<a name="l01500"></a>01500     rc = <a class="code" href="group__Mesh.html#ged61b1f684fc2a6ac489c10841cdb591" title="Get information about a mesh.">fc_getMeshInfo</a>(dest_mesh, NULL, NULL, NULL, &amp;numEntity, NULL);
<a name="l01501"></a>01501     <span class="keywordflow">break</span>;
<a name="l01502"></a>01502   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>:
<a name="l01503"></a>01503     rc = <a class="code" href="group__Mesh.html#ged61b1f684fc2a6ac489c10841cdb591" title="Get information about a mesh.">fc_getMeshInfo</a>(dest_mesh, NULL, NULL, &amp;numEntity, NULL, NULL);
<a name="l01504"></a>01504     <span class="keywordflow">break</span>;
<a name="l01505"></a>01505   <span class="keywordflow">default</span>:
<a name="l01506"></a>01506     <span class="comment">//temporary</span>
<a name="l01507"></a>01507     <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>) {
<a name="l01508"></a>01508       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"not handling globals at this time"</span>);
<a name="l01509"></a>01509     } <span class="keywordflow">else</span> {
<a name="l01510"></a>01510       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"only handling vertex and element vars at this time"</span>);
<a name="l01511"></a>01511     }
<a name="l01512"></a>01512     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01513"></a>01513     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>; <span class="comment">//shouldnt happen at this point</span>
<a name="l01514"></a>01514   }
<a name="l01515"></a>01515 
<a name="l01516"></a>01516 
<a name="l01517"></a>01517   <span class="comment">//check consistency of dest var</span>
<a name="l01518"></a>01518   <span class="comment">//do we have a dest var?</span>
<a name="l01519"></a>01519   <span class="comment">//only get it if it exists, dont do the component coalescing</span>
<a name="l01520"></a>01520   rc = <a class="code" href="group__Variable.html#g23372bf294117d6761d750446516f0d3" title="Get sequence variables of a given name from the mesh.">fc_getSeqVariableByName</a>(dest_mesh,dest_seqvarName, &amp;numSeqVar, &amp;numStepPerSeqVar,
<a name="l01521"></a>01521                         &amp;seqVars);
<a name="l01522"></a>01522   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01523"></a>01523     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot get seq var by name"</span>);
<a name="l01524"></a>01524     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01525"></a>01525     <span class="keywordflow">return</span> rc;
<a name="l01526"></a>01526   }
<a name="l01527"></a>01527   <span class="keywordflow">if</span> (numSeqVar &gt; 1){
<a name="l01528"></a>01528     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot find unique seq var to copy to"</span>);
<a name="l01529"></a>01529     <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++)
<a name="l01530"></a>01530       free(seqVars[i]);
<a name="l01531"></a>01531     free(seqVars);
<a name="l01532"></a>01532     free(numStepPerSeqVar);
<a name="l01533"></a>01533     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01534"></a>01534     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01535"></a>01535   }
<a name="l01536"></a>01536   <span class="keywordflow">if</span> (numSeqVar == 0){
<a name="l01537"></a>01537     <span class="keywordtype">int</span> num;
<a name="l01538"></a>01538 
<a name="l01539"></a>01539     <span class="comment">//create the seq var</span>
<a name="l01540"></a>01540     <span class="comment">// printf("Creating main var &lt;%s&gt;\n",dest_svName);</span>
<a name="l01541"></a>01541     
<a name="l01542"></a>01542     rc = <a class="code" href="group__Variable.html#g05d5098e68c1761ac851b2509dfbea70" title="Create a new sequence variable.">fc_createSeqVariable</a>(dest_mesh, dest_seq,
<a name="l01543"></a>01543                     dest_svName, &amp;num, &amp;dest_sv);
<a name="l01544"></a>01544     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01545"></a>01545       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot make seq var"</span>);
<a name="l01546"></a>01546       <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01547"></a>01547       <span class="keywordflow">return</span> rc;
<a name="l01548"></a>01548     }
<a name="l01549"></a>01549 
<a name="l01550"></a>01550     <span class="keywordflow">switch</span> (datatype){
<a name="l01551"></a>01551     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l01552"></a>01552       new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01553"></a>01553      <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01554"></a>01554        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01555"></a>01555        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01556"></a>01556      }
<a name="l01557"></a>01557      <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01558"></a>01558        <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01559"></a>01559       ((<span class="keywordtype">int</span>*)new_data)[i] = *((<span class="keywordtype">int</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01560"></a>01560        }
<a name="l01561"></a>01561      }
<a name="l01562"></a>01562      <span class="keywordflow">break</span>;
<a name="l01563"></a>01563    <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l01564"></a>01564      new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l01565"></a>01565      <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01566"></a>01566        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01567"></a>01567        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01568"></a>01568      }
<a name="l01569"></a>01569      <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01570"></a>01570        <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01571"></a>01571       ((<span class="keywordtype">double</span>*)new_data)[i] = *((<span class="keywordtype">double</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01572"></a>01572        }
<a name="l01573"></a>01573      }
<a name="l01574"></a>01574      <span class="keywordflow">break</span>;
<a name="l01575"></a>01575    <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l01576"></a>01576      new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));
<a name="l01577"></a>01577      <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01578"></a>01578        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01579"></a>01579        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01580"></a>01580      }
<a name="l01581"></a>01581      <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01582"></a>01582        <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01583"></a>01583       ((<span class="keywordtype">float</span>*)new_data)[i] = *((<span class="keywordtype">float</span>*) <a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01584"></a>01584        }
<a name="l01585"></a>01585      }
<a name="l01586"></a>01586      <span class="keywordflow">break</span>;
<a name="l01587"></a>01587    <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>:
<a name="l01588"></a>01588      new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l01589"></a>01589      <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01590"></a>01590        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01591"></a>01591        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01592"></a>01592      }
<a name="l01593"></a>01593      <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01594"></a>01594        <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01595"></a>01595       ((<span class="keywordtype">char</span>*)new_data)[i] = *((<span class="keywordtype">char</span>*) <a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01596"></a>01596        }
<a name="l01597"></a>01597      }
<a name="l01598"></a>01598      <span class="keywordflow">break</span>;
<a name="l01599"></a>01599    <span class="keywordflow">default</span>:
<a name="l01600"></a>01600      <span class="comment">//shouldnt happen</span>
<a name="l01601"></a>01601      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot handle datatype %d"</span>, datatype);
<a name="l01602"></a>01602      free(dest_sv); 
<a name="l01603"></a>01603      free(new_data);
<a name="l01604"></a>01604      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01605"></a>01605     }
<a name="l01606"></a>01606   
<a name="l01607"></a>01607     <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++){
<a name="l01608"></a>01608       rc = <a class="code" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData</a>(dest_sv[i], numEntity, numComponent,
<a name="l01609"></a>01609                      assoc, mathtype, datatype, new_data);
<a name="l01610"></a>01610       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01611"></a>01611      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"cannot set variable data"</span>);
<a name="l01612"></a>01612      free(dest_sv);
<a name="l01613"></a>01613      free(new_data);
<a name="l01614"></a>01614      <span class="keywordflow">return</span> rc;
<a name="l01615"></a>01615       }
<a name="l01616"></a>01616     }
<a name="l01617"></a>01617     free(new_data);
<a name="l01618"></a>01618     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01619"></a>01619   } <span class="keywordflow">else</span> {
<a name="l01620"></a>01620     <span class="comment">//we have the seq var</span>
<a name="l01621"></a>01621     <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> tempseq;
<a name="l01622"></a>01622 
<a name="l01623"></a>01623     rc = <a class="code" href="group__Variable.html#g314a992ec5ba07d7075f1172b13ef166" title="Get the parent sequence of a sequence variable.">fc_getSequenceFromSeqVariable</a>(numStep,seqVars[0], &amp;tempseq);
<a name="l01624"></a>01624     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01625"></a>01625       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot get sequence from seq var"</span>);
<a name="l01626"></a>01626       <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++)
<a name="l01627"></a>01627      free(seqVars[i]);
<a name="l01628"></a>01628       free(seqVars);
<a name="l01629"></a>01629       free(numStepPerSeqVar);
<a name="l01630"></a>01630       <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01631"></a>01631       <span class="keywordflow">return</span> rc;
<a name="l01632"></a>01632     } 
<a name="l01633"></a>01633     <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(tempseq, dest_seq)){
<a name="l01634"></a>01634       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Already have a seq var by this name by on another seq"</span>);
<a name="l01635"></a>01635       <span class="keywordflow">for</span> (i = 0; i &lt; numSeqVar; i++)
<a name="l01636"></a>01636      free(seqVars[i]);
<a name="l01637"></a>01637       free(seqVars);
<a name="l01638"></a>01638       free(numStepPerSeqVar);
<a name="l01639"></a>01639       <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01640"></a>01640       <span class="keywordflow">return</span> rc;
<a name="l01641"></a>01641     }
<a name="l01642"></a>01642     dest_sv = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*)malloc(numStep*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l01643"></a>01643     <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++){
<a name="l01644"></a>01644       dest_sv[i] = seqVars[0][i];
<a name="l01645"></a>01645     }
<a name="l01646"></a>01646     free(numStepPerSeqVar);
<a name="l01647"></a>01647     free(seqVars[0]);
<a name="l01648"></a>01648     free(seqVars);
<a name="l01649"></a>01649     <span class="keywordflow">if</span> (dest_seqvarName == NULL) free (dest_svName);
<a name="l01650"></a>01650 
<a name="l01651"></a>01651     <span class="comment">//now check this var (will check at all time steps)</span>
<a name="l01652"></a>01652     <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++){
<a name="l01653"></a>01653       rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(dest_sv[i], &amp;currnumDataPoint, &amp;currnumComponent,
<a name="l01654"></a>01654                      &amp;currassoc,&amp;currmathtype,&amp;currdatatype);
<a name="l01655"></a>01655       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01656"></a>01656      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for curr variable on dest mesh"</span>);
<a name="l01657"></a>01657      free(dest_sv);
<a name="l01658"></a>01658      <span class="keywordflow">return</span> rc;
<a name="l01659"></a>01659       }
<a name="l01660"></a>01660 
<a name="l01661"></a>01661       <span class="keywordflow">if</span> (currnumDataPoint &lt; numDataPoint) {
<a name="l01662"></a>01662      printf(<span class="stringliteral">"dest = %d src = %d\n"</span>,currnumDataPoint, numDataPoint);
<a name="l01663"></a>01663      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: destination variable not compatible with src variable"</span>, 
<a name="l01664"></a>01664                      <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01665"></a>01665      free(dest_sv);
<a name="l01666"></a>01666      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01667"></a>01667       }
<a name="l01668"></a>01668 
<a name="l01669"></a>01669       <span class="keywordflow">if</span> (currnumComponent != numComponent){
<a name="l01670"></a>01670      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy region var onto mesh because of existing numComponent incompatability"</span>);
<a name="l01671"></a>01671      free(dest_sv);
<a name="l01672"></a>01672      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01673"></a>01673       }
<a name="l01674"></a>01674 
<a name="l01675"></a>01675       <span class="keywordflow">if</span> (currassoc != assoc){
<a name="l01676"></a>01676      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy region var onto mesh because of existing assoc incompatability"</span>);
<a name="l01677"></a>01677      free(dest_sv);
<a name="l01678"></a>01678 
<a name="l01679"></a>01679      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01680"></a>01680       }
<a name="l01681"></a>01681 
<a name="l01682"></a>01682       <span class="keywordflow">if</span> (currmathtype != mathtype){
<a name="l01683"></a>01683      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy region var onto mesh because of existing mathtype incompatability"</span>);
<a name="l01684"></a>01684      free(dest_sv);
<a name="l01685"></a>01685      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01686"></a>01686       }
<a name="l01687"></a>01687 
<a name="l01688"></a>01688       <span class="keywordflow">if</span> (currdatatype != datatype){
<a name="l01689"></a>01689      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy region var onto mesh because of existing datatype incompatability"</span>);
<a name="l01690"></a>01690      free(dest_sv);
<a name="l01691"></a>01691      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01692"></a>01692       }
<a name="l01693"></a>01693     }
<a name="l01694"></a>01694 
<a name="l01695"></a>01695   } <span class="comment">//create or get the dest var</span>
<a name="l01696"></a>01696 
<a name="l01697"></a>01697   <span class="comment">// --- now do it</span>
<a name="l01698"></a>01698   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(src_var, &amp;data);
<a name="l01699"></a>01699   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01700"></a>01700     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l01701"></a>01701                           varSlot_s-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l01702"></a>01702     free(dest_sv);
<a name="l01703"></a>01703     <span class="keywordflow">return</span> rc;
<a name="l01704"></a>01704   }
<a name="l01705"></a>01705   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(mapping, &amp;mappingdata);
<a name="l01706"></a>01706   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01707"></a>01707     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for mapping variable"</span>);
<a name="l01708"></a>01708     free(data);
<a name="l01709"></a>01709     free(dest_sv);
<a name="l01710"></a>01710     <span class="keywordflow">return</span> rc;
<a name="l01711"></a>01711   }
<a name="l01712"></a>01712 
<a name="l01713"></a>01713   <span class="comment">//will write it into the current data</span>
<a name="l01714"></a>01714   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(dest_sv[targetStep], &amp;new_data);
<a name="l01715"></a>01715   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01716"></a>01716     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for dest variable"</span>);
<a name="l01717"></a>01717     free(dest_sv);
<a name="l01718"></a>01718     <span class="keywordflow">return</span> rc;
<a name="l01719"></a>01719   }
<a name="l01720"></a>01720   <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++){
<a name="l01721"></a>01721     <span class="keywordtype">int</span> meshpt;
<a name="l01722"></a>01722 
<a name="l01723"></a>01723     <span class="keywordflow">switch</span>(mappingdatatype){
<a name="l01724"></a>01724     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l01725"></a>01725       meshpt = (int)floor((((<span class="keywordtype">double</span>*) mappingdata)[i])+0.5);
<a name="l01726"></a>01726       <span class="keywordflow">break</span>;
<a name="l01727"></a>01727     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l01728"></a>01728       meshpt = (int)floor((((<span class="keywordtype">float</span>*) mappingdata)[i])+0.5);
<a name="l01729"></a>01729       <span class="keywordflow">break</span>;
<a name="l01730"></a>01730     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l01731"></a>01731       meshpt = ((<span class="keywordtype">int</span>*) mappingdata)[i];
<a name="l01732"></a>01732       <span class="keywordflow">break</span>;
<a name="l01733"></a>01733     <span class="keywordflow">default</span>:
<a name="l01734"></a>01734       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"DEVELOPER ERROR: should not happen\n"</span>);
<a name="l01735"></a>01735       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01736"></a>01736       <span class="keywordflow">break</span>;
<a name="l01737"></a>01737     }
<a name="l01738"></a>01738     <span class="comment">//is it a valid pt?</span>
<a name="l01739"></a>01739     <span class="keywordflow">if</span> (meshpt &gt;= numEntity){
<a name="l01740"></a>01740       <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Invalid mapping val.not copying this point"</span>);
<a name="l01741"></a>01741     } <span class="keywordflow">else</span> {
<a name="l01742"></a>01742       <span class="keywordflow">switch</span> (datatype){
<a name="l01743"></a>01743       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l01744"></a>01744      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l01745"></a>01745        <span class="comment">//   printf("replacing big mesh pt %d with small mesh pt %d curr val %d to val %d\n",</span>
<a name="l01746"></a>01746        <span class="comment">//       (meshpt*numComponent+j), (i*numComponent+j), </span>
<a name="l01747"></a>01747        <span class="comment">//       ((int*)new_data)[meshpt*numComponent+j],((int*)data)[i*numComponent+j]);</span>
<a name="l01748"></a>01748        ((<span class="keywordtype">int</span>*)new_data)[meshpt*numComponent+j] = ((<span class="keywordtype">int</span>*)data)[i*numComponent+j];
<a name="l01749"></a>01749      }
<a name="l01750"></a>01750      <span class="keywordflow">break</span>;
<a name="l01751"></a>01751       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l01752"></a>01752      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l01753"></a>01753        ((<span class="keywordtype">double</span>*)new_data)[meshpt*numComponent+j] = ((<span class="keywordtype">double</span>*)data)[i*numComponent+j];
<a name="l01754"></a>01754      }
<a name="l01755"></a>01755      <span class="keywordflow">break</span>;
<a name="l01756"></a>01756       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l01757"></a>01757      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l01758"></a>01758        ((<span class="keywordtype">float</span>*)new_data)[meshpt*numComponent+j] = ((<span class="keywordtype">float</span>*)data)[i*numComponent+j];
<a name="l01759"></a>01759      }
<a name="l01760"></a>01760      <span class="keywordflow">break</span>;
<a name="l01761"></a>01761       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>:
<a name="l01762"></a>01762      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l01763"></a>01763        ((<span class="keywordtype">char</span>*)new_data)[meshpt*numComponent+j] = ((<span class="keywordtype">char</span>*)data)[i*numComponent+j];
<a name="l01764"></a>01764      }
<a name="l01765"></a>01765      <span class="keywordflow">break</span>;
<a name="l01766"></a>01766       <span class="keywordflow">default</span>:
<a name="l01767"></a>01767      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"DEVELOPER ERROR: should not happen\n"</span>);
<a name="l01768"></a>01768      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01769"></a>01769      <span class="keywordflow">break</span>;
<a name="l01770"></a>01770       }
<a name="l01771"></a>01771     }
<a name="l01772"></a>01772   }
<a name="l01773"></a>01773 
<a name="l01774"></a>01774   *dest_seqvar = dest_sv;
<a name="l01775"></a>01775   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01776"></a>01776 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g980800ddd6a50b18c1e2282e491b5885"></a><!-- doxytag: member="variable.c::fc_copySeqVariableWithNewAssociation" ref="g980800ddd6a50b18c1e2282e491b5885" args="(int src_numStep, FC_Variable *src_seqVar, FC_AssociationType newAssoc, char *newName, FC_Variable **new_seqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copySeqVariableWithNewAssociation           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>src_numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>src_seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>newAssoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>new_seqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copies a seqVariable and (optionally) converts to a new association type. 
<p>
<b>Description:</b> <p>
Create a copy of a sequence variable and (if necessary) convert its data to a new association type. This conversion simply averages all the values of source entities that touch a destination entity (eg, in Element-to-Vertex conversion, the an element value is the average of the values of all vertices that make up the element).<p>
While this function supports conversions to/from any of the association types for a mesh, it will return an input error if the conversion cannot take place due to due to dimension problems (eg, trying to convert a variable to a Face type when the elements are lines).<p>
Additionally, this function only works when the source and destination variables utilize the same mesh. Global variables are not supported.<p>
<b>Modifications:</b> <ul>
<li>01/30/07 CDU Created</li><li>02/14/07 CDU Updated to support broader range of associations</li><li>02/28/07 CDU removed mesh from api and cleaned up internals </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_numStep</em>&nbsp;</td><td>
input - the number of steps for the sequence variable </td></tr>
<tr><td valign="top"><em>src_seqVar</em>&nbsp;</td><td>
input - the source variable </td></tr>
<tr><td valign="top"><em>newAssoc</em>&nbsp;</td><td>
input - the new association Type </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
input - new name for the variable (NULL uses source's name) </td></tr>
<tr><td valign="top"><em>new_seqVar</em>&nbsp;</td><td>
output - handle to the new sequence variable </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l02454">2454</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="variable_8c-source.html#l02328">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l00350">fc_createSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l05062">fc_deleteSeqVariable()</a>, <a class="el" href="base_8h-source.html#l00139">FC_DT_CHAR</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00149">FC_DT_FLOAT</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="topo_8c-source.html#l00279">fc_getMeshEntityParents()</a>, <a class="el" href="variable_8c-source.html#l05392">fc_getMeshFromVariable()</a>, <a class="el" href="mesh_8c-source.html#l03161">fc_getMeshNumEdge()</a>, <a class="el" href="mesh_8c-source.html#l03025">fc_getMeshNumElement()</a>, <a class="el" href="mesh_8c-source.html#l03208">fc_getMeshNumFace()</a>, <a class="el" href="mesh_8c-source.html#l02989">fc_getMeshNumVertex()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05317">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>.</p>

<p>Referenced by <a class="el" href="fcswapAssoc_8c-source.html#l00238">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02461"></a>02461  {
<a name="l02462"></a>02462 
<a name="l02463"></a>02463 
<a name="l02464"></a>02464   <span class="keywordtype">int</span>  numDataPoint, <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>;
<a name="l02465"></a>02465   <span class="keywordtype">double</span> *dnew = NULL;
<a name="l02466"></a>02466   <span class="keywordtype">int</span> numObj, *objIDs;
<a name="l02467"></a>02467   <span class="keywordtype">void</span> **var_dptr_array;
<a name="l02468"></a>02468   <span class="keywordtype">void</span> *var_dptr;
<a name="l02469"></a>02469   <span class="keywordtype">int</span> numStep_out;
<a name="l02470"></a>02470   <span class="keywordtype">double</span> r;
<a name="l02471"></a>02471   <span class="keywordtype">int</span> spot;
<a name="l02472"></a>02472   <span class="keywordtype">int</span> i,j,k,s;
<a name="l02473"></a>02473   <span class="keywordtype">int</span> needs_parent; <span class="comment">//For figuring out whether we need parent or child call</span>
<a name="l02474"></a>02474 
<a name="l02475"></a>02475   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> oldAssoc;
<a name="l02476"></a>02476   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a>        mathType;
<a name="l02477"></a>02477   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> dataType;
<a name="l02478"></a>02478   <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> seq;
<a name="l02479"></a>02479   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>* seqVar_out;
<a name="l02480"></a>02480   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a>            mesh;
<a name="l02481"></a>02481   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l02482"></a>02482 
<a name="l02483"></a>02483   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>*  varSlot;
<a name="l02484"></a>02484  
<a name="l02485"></a>02485 
<a name="l02486"></a>02486 
<a name="l02487"></a>02487   <span class="comment">//Default return value</span>
<a name="l02488"></a>02488   <span class="keywordflow">if</span> (new_seqVar)
<a name="l02489"></a>02489     *new_seqVar = NULL;
<a name="l02490"></a>02490 
<a name="l02491"></a>02491   <span class="comment">//Check Inputs: first get basic info and bail if obvious problems</span>
<a name="l02492"></a>02492   <span class="comment">// note: fc_issv also does a variableValid check on seqvar[0], so we don't need to.</span>
<a name="l02493"></a>02493   <span class="keywordflow">if</span>((!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(src_numStep, src_seqVar)) || 
<a name="l02494"></a>02494      (new_seqVar == NULL) ){
<a name="l02495"></a>02495     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: problem with %s"</span>,
<a name="l02496"></a>02496                  <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>),
<a name="l02497"></a>02497                  (new_seqVar == NULL) ? <span class="stringliteral">"new seqVariable pointer"</span> :
<a name="l02498"></a>02498                  <span class="stringliteral">"input sequence variable"</span>);
<a name="l02499"></a>02499     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02500"></a>02500   }
<a name="l02501"></a>02501 
<a name="l02502"></a>02502   <span class="comment">//Get var slot. We only use this for accessing the name</span>
<a name="l02503"></a>02503   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(src_seqVar[0]);
<a name="l02504"></a>02504   <span class="keywordflow">if</span>(varSlot==NULL){
<a name="l02505"></a>02505     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Problem with sequence variable\n"</span>);
<a name="l02506"></a>02506     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02507"></a>02507   }
<a name="l02508"></a>02508 
<a name="l02509"></a>02509   <span class="comment">//Get mesh. We now force the user to use same src/dst mesh</span>
<a name="l02510"></a>02510   rc = <a class="code" href="group__Variable.html#g6808d2015766d9b530b93375f42296a3" title="Get the parent mesh of the variable.">fc_getMeshFromVariable</a>(src_seqVar[0], &amp;mesh);
<a name="l02511"></a>02511   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02512"></a>02512     <span class="keywordflow">return</span> rc;
<a name="l02513"></a>02513 
<a name="l02514"></a>02514 
<a name="l02515"></a>02515   <span class="comment">//Get basic info from variable</span>
<a name="l02516"></a>02516   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(src_seqVar[0], NULL, &amp;numComponent, &amp;oldAssoc, &amp;mathType, &amp;dataType);
<a name="l02517"></a>02517   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02518"></a>02518     <span class="keywordflow">return</span> rc;
<a name="l02519"></a>02519 
<a name="l02520"></a>02520   <span class="comment">//Get Sequence info. Same as old</span>
<a name="l02521"></a>02521   rc = <a class="code" href="group__Variable.html#g314a992ec5ba07d7075f1172b13ef166" title="Get the parent sequence of a sequence variable.">fc_getSequenceFromSeqVariable</a>(src_numStep, src_seqVar, &amp;seq);
<a name="l02522"></a>02522   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02523"></a>02523     <span class="keywordflow">return</span> rc;
<a name="l02524"></a>02524 
<a name="l02525"></a>02525 
<a name="l02526"></a>02526   <span class="comment">//If no conversion necessary, let copySeqVariable do all the work</span>
<a name="l02527"></a>02527   <span class="keywordflow">if</span> (newAssoc == oldAssoc) {
<a name="l02528"></a>02528     <span class="keywordflow">return</span> <a class="code" href="group__Variable.html#gaf25870a6c8032440b6d5565ccc083cb" title="Copy a sequence variable.">fc_copySeqVariable</a>(src_numStep, src_seqVar, mesh, seq, newName, new_seqVar);
<a name="l02529"></a>02529   }
<a name="l02530"></a>02530 
<a name="l02531"></a>02531   <span class="comment">//Figure out default name if none given</span>
<a name="l02532"></a>02532   <span class="keywordflow">if</span>(newName == NULL)
<a name="l02533"></a>02533     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l02534"></a>02534 
<a name="l02535"></a>02535 
<a name="l02536"></a>02536   <span class="comment">//Look at the destination assoc and figure out how many data points</span>
<a name="l02537"></a>02537   <span class="comment">//it has. If it's a face/edge, make sure we've created the appropriate conns.</span>
<a name="l02538"></a>02538   <span class="keywordflow">switch</span>(newAssoc){
<a name="l02539"></a>02539   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a> :
<a name="l02540"></a>02540     rc = <a class="code" href="group__Mesh.html#g8bcadefbf0728724adf77ef52c1f3732" title="Returns number of elements in a mesh.">fc_getMeshNumElement</a>(mesh, &amp;numDataPoint);
<a name="l02541"></a>02541     <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02542"></a>02542       <span class="keywordflow">return</span> rc;
<a name="l02543"></a>02543     <span class="keywordflow">break</span>;
<a name="l02544"></a>02544 
<a name="l02545"></a>02545   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:
<a name="l02546"></a>02546     <span class="comment">//Builds the faces if necessary</span>
<a name="l02547"></a>02547      rc = <a class="code" href="group__Mesh.html#g8c619c146c0850895098f5dbfb487418" title="Get number of faces in a mesh.">fc_getMeshNumFace</a>(mesh, &amp;numDataPoint);
<a name="l02548"></a>02548     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02549"></a>02549       <span class="keywordflow">return</span> rc;
<a name="l02550"></a>02550     <span class="keywordflow">break</span>;
<a name="l02551"></a>02551 
<a name="l02552"></a>02552   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>: 
<a name="l02553"></a>02553     <span class="comment">//Builds the edges if necessary</span>
<a name="l02554"></a>02554     rc = <a class="code" href="group__Mesh.html#g82f4aa5cf3a4a5011ae65cab2ed1a8c1" title="Get number of edges in a mesh.">fc_getMeshNumEdge</a>(mesh, &amp;numDataPoint);
<a name="l02555"></a>02555     <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02556"></a>02556       <span class="keywordflow">return</span> rc;
<a name="l02557"></a>02557     <span class="keywordflow">break</span>;
<a name="l02558"></a>02558 
<a name="l02559"></a>02559   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>:
<a name="l02560"></a>02560     rc = <a class="code" href="group__Mesh.html#g9dca153475c9927e7497fd827cfd5562" title="Return the number of vertices in a mesh.">fc_getMeshNumVertex</a>(mesh, &amp;numDataPoint);
<a name="l02561"></a>02561     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02562"></a>02562       <span class="keywordflow">return</span> rc;
<a name="l02563"></a>02563     <span class="keywordflow">break</span>;
<a name="l02564"></a>02564 
<a name="l02565"></a>02565   <span class="keywordflow">default</span>:
<a name="l02566"></a>02566     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Unexpected conversion target type"</span>);
<a name="l02567"></a>02567     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02568"></a>02568   }
<a name="l02569"></a>02569 
<a name="l02570"></a>02570   <span class="comment">//We need at least one data point to continue</span>
<a name="l02571"></a>02571   <span class="keywordflow">if</span>(numDataPoint&lt;1){
<a name="l02572"></a>02572     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s Conversion would not give at least one data point"</span>,
<a name="l02573"></a>02573                  <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02574"></a>02574     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02575"></a>02575   }
<a name="l02576"></a>02576 
<a name="l02577"></a>02577 
<a name="l02578"></a>02578   <span class="comment">//Figure out what direction we're going. If the new association</span>
<a name="l02579"></a>02579   <span class="comment">//is less than the old one (newAssoc &lt; oldAssoc), we will need</span>
<a name="l02580"></a>02580   <span class="comment">//to do a parent-of-newAssoc's ids to find out which oldAssoc ids</span>
<a name="l02581"></a>02581   <span class="comment">//need to be averaged.</span>
<a name="l02582"></a>02582   needs_parent = 0;
<a name="l02583"></a>02583   <span class="keywordflow">if</span>(newAssoc &lt; oldAssoc)
<a name="l02584"></a>02584     needs_parent = 1;
<a name="l02585"></a>02585 
<a name="l02586"></a>02586 
<a name="l02587"></a>02587 
<a name="l02588"></a>02588   <span class="comment">// We get all of the varaible data pointers in advance to reduce overhead and</span>
<a name="l02589"></a>02589   <span class="comment">// mid-loop disaster</span>
<a name="l02590"></a>02590   var_dptr_array = (<span class="keywordtype">void</span> *) malloc( src_numStep * <span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *));
<a name="l02591"></a>02591   <span class="keywordflow">if</span>(var_dptr_array == NULL){
<a name="l02592"></a>02592     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02593"></a>02593     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02594"></a>02594   }
<a name="l02595"></a>02595   <span class="keywordflow">for</span>(s=0; s&lt;src_numStep; s++){
<a name="l02596"></a>02596     rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(src_seqVar[s], &amp;var_dptr_array[s]);               
<a name="l02597"></a>02597     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l02598"></a>02598       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for SeqVariable '%s' step %d"</span>,
<a name="l02599"></a>02599                    varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, s);
<a name="l02600"></a>02600       free(var_dptr_array);
<a name="l02601"></a>02601       <span class="keywordflow">return</span> rc;
<a name="l02602"></a>02602     } 
<a name="l02603"></a>02603   }
<a name="l02604"></a>02604 
<a name="l02605"></a>02605 
<a name="l02606"></a>02606   <span class="comment">//Make room for the new data --&gt; dnew[step][vertex][component]</span>
<a name="l02607"></a>02607   dnew = (<span class="keywordtype">double</span> *)malloc(src_numStep * numDataPoint * numComponent * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l02608"></a>02608   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l02609"></a>02609     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l02610"></a>02610                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02611"></a>02611     free(var_dptr_array);
<a name="l02612"></a>02612     <span class="keywordflow">return</span> rc;
<a name="l02613"></a>02613   } 
<a name="l02614"></a>02614   
<a name="l02615"></a>02615  
<a name="l02616"></a>02616   <span class="comment">// In order to reduce the amount of vertex-to-element conversion we have live</span>
<a name="l02617"></a>02617   <span class="comment">// at one time, we do all sequence steps for a particular vertex. </span>
<a name="l02618"></a>02618   <span class="keywordflow">for</span>(i=0; i&lt;numDataPoint; i++){   
<a name="l02619"></a>02619     
<a name="l02620"></a>02620     <span class="keywordflow">if</span>(needs_parent){
<a name="l02621"></a>02621       rc = <a class="code" href="group__TopologyRelations.html#gba61056e95c00bf595ffd8bd7ae631fc" title="Get the entities which own the specified entity.">fc_getMeshEntityParents</a>(  mesh, newAssoc, i, oldAssoc,
<a name="l02622"></a>02622                          &amp;numObj, &amp;objIDs);
<a name="l02623"></a>02623     } <span class="keywordflow">else</span> {
<a name="l02624"></a>02624       rc = <a class="code" href="group__TopologyRelations.html#g08edc0183a4bb0e44eb226ea75177fd8" title="Get the entities which make up the specified entity.">fc_getMeshEntityChildren</a>( mesh, newAssoc, i, oldAssoc,
<a name="l02625"></a>02625                          &amp;numObj, &amp;objIDs);
<a name="l02626"></a>02626     }
<a name="l02627"></a>02627     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l02628"></a>02628       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get %s for variable '%s'"</span>,
<a name="l02629"></a>02629                    (needs_parent)?<span class="stringliteral">"Parents"</span>:<span class="stringliteral">"Children"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02630"></a>02630       free(dnew);
<a name="l02631"></a>02631       free(var_dptr_array);
<a name="l02632"></a>02632       <span class="keywordflow">return</span> rc;
<a name="l02633"></a>02633     }
<a name="l02634"></a>02634 
<a name="l02635"></a>02635     <span class="comment">//Work on all steps for this vertex (or element)</span>
<a name="l02636"></a>02636     <span class="keywordflow">for</span>(s=0; s&lt;src_numStep; s++){      
<a name="l02637"></a>02637       var_dptr = var_dptr_array[s]; <span class="comment">//Get at the source variable's data for this step</span>
<a name="l02638"></a>02638 
<a name="l02639"></a>02639       <span class="comment">//Work on each component individually</span>
<a name="l02640"></a>02640       <span class="keywordflow">for</span>(j=0; j&lt;numComponent; j++){
<a name="l02641"></a>02641      r = 0.0;
<a name="l02642"></a>02642      <span class="keywordflow">for</span>(k=0; k&lt;numObj; k++){
<a name="l02643"></a>02643        spot = (objIDs[k] * numComponent) + j;
<a name="l02644"></a>02644        <span class="keywordflow">switch</span>(dataType){
<a name="l02645"></a>02645        <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>:   r += (double) ((<span class="keywordtype">char</span> *)  var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l02646"></a>02646        <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a> :   r += (double) ((<span class="keywordtype">int</span> *)   var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l02647"></a>02647        <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:  r += (double) ((<span class="keywordtype">float</span> *) var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l02648"></a>02648        <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>: r += (double) ((<span class="keywordtype">double</span> *)var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l02649"></a>02649        <span class="keywordflow">default</span>:
<a name="l02650"></a>02650          <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Requested processing of variable with an unknown data type"</span>);
<a name="l02651"></a>02651          free(objIDs);
<a name="l02652"></a>02652          free(dnew);
<a name="l02653"></a>02653          free(var_dptr_array);
<a name="l02654"></a>02654          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02655"></a>02655        }
<a name="l02656"></a>02656      }
<a name="l02657"></a>02657      <span class="keywordflow">if</span>(numObj)
<a name="l02658"></a>02658        r = r/(double)numObj;
<a name="l02659"></a>02659      
<a name="l02660"></a>02660      <span class="comment">//Store result for this component</span>
<a name="l02661"></a>02661      dnew[ (s*numDataPoint*numComponent) + (i*numComponent) + j ] = r;
<a name="l02662"></a>02662       }
<a name="l02663"></a>02663     }
<a name="l02664"></a>02664     <span class="comment">//Cleanup this output spot's memory</span>
<a name="l02665"></a>02665     free(objIDs);
<a name="l02666"></a>02666   }  
<a name="l02667"></a>02667   free(var_dptr_array);
<a name="l02668"></a>02668 
<a name="l02669"></a>02669   <span class="comment">// Create an empty seqVariable to store this</span>
<a name="l02670"></a>02670   rc = <a class="code" href="group__Variable.html#g05d5098e68c1761ac851b2509dfbea70" title="Create a new sequence variable.">fc_createSeqVariable</a>(mesh, seq, newName, &amp;numStep_out, &amp;seqVar_out); 
<a name="l02671"></a>02671   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l02672"></a>02672     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Could not create seqVariable"</span>);
<a name="l02673"></a>02673     free(dnew);
<a name="l02674"></a>02674     <span class="keywordflow">return</span> rc;
<a name="l02675"></a>02675   }
<a name="l02676"></a>02676 
<a name="l02677"></a>02677   <span class="comment">//Fill in all variables</span>
<a name="l02678"></a>02678   <span class="keywordflow">for</span>(s=0; s&lt;src_numStep; s++){
<a name="l02679"></a>02679 
<a name="l02680"></a>02680     <span class="comment">//Fill in the data</span>
<a name="l02681"></a>02681     rc = <a class="code" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData</a>(seqVar_out[s], numDataPoint, numComponent,
<a name="l02682"></a>02682                    newAssoc, mathType, <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>,
<a name="l02683"></a>02683                    (<span class="keywordtype">void</span> *)&amp;dnew[s*numDataPoint*numComponent]);
<a name="l02684"></a>02684 
<a name="l02685"></a>02685     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l02686"></a>02686 
<a name="l02687"></a>02687       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s' step %d"</span>,
<a name="l02688"></a>02688                    newName, s);
<a name="l02689"></a>02689       <a class="code" href="group__Variable.html#gef5ebe119abe1d217a216f0faad0e667" title="Delete a sequence variable.">fc_deleteSeqVariable</a>(src_numStep,seqVar_out);
<a name="l02690"></a>02690       free(seqVar_out);
<a name="l02691"></a>02691       free(dnew);
<a name="l02692"></a>02692       <span class="keywordflow">return</span> rc;
<a name="l02693"></a>02693     }
<a name="l02694"></a>02694   }
<a name="l02695"></a>02695 
<a name="l02696"></a>02696   free(dnew);
<a name="l02697"></a>02697   
<a name="l02698"></a>02698   *new_seqVar = seqVar_out;
<a name="l02699"></a>02699   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02700"></a>02700 
<a name="l02701"></a>02701 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g0af7d0d18023362f816693cd354bcbfb"></a><!-- doxytag: member="variable.c::fc_copyVariable" ref="g0af7d0d18023362f816693cd354bcbfb" args="(FC_Variable src_var, FC_Mesh dest_mesh, char *newName, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copyVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>src_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>dest_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a variable. 
<p>
<b>Description:</b> <p>
Create a copy of a variable into the specified mesh using with the given name. This will return an error if the source and destination meshes are not similar enough.<p>
The input variable can be a global variable; the output will be a variable associated with the mesh (FC_AT_WHOLE_MESH).<p>
<b>Modifications:</b> <ul>
<li>2003-NOV-11 WSK Created</li><li>06/07/04 RM, added checking if destination mesh and a source variable are compatible to perform copy before creating the variable.</li><li>11/08/2006 WSD added ability to copy global var onto a mesh. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_var</em>&nbsp;</td><td>
Input - the source variable to be copied </td></tr>
<tr><td valign="top"><em>dest_mesh</em>&nbsp;</td><td>
Input - the destination mesh to be copied into </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
Output - handle to the new variable </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l00929">929</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00286">fc_createVariable()</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, and <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00935"></a>00935     { 
<a name="l00936"></a>00936   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00937"></a>00937   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l00938"></a>00938   <span class="keywordtype">int</span> numDataPoint, numComp, numEntity;
<a name="l00939"></a>00939   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l00940"></a>00940   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype;
<a name="l00941"></a>00941   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype;
<a name="l00942"></a>00942   <span class="keywordtype">void</span>* data;
<a name="l00943"></a>00943   
<a name="l00944"></a>00944   <span class="comment">// default return value</span>
<a name="l00945"></a>00945   <span class="keywordflow">if</span> (new_var)
<a name="l00946"></a>00946     *new_var = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l00947"></a>00947 
<a name="l00948"></a>00948   <span class="comment">// check input - NULL name is o.k.</span>
<a name="l00949"></a>00949   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(src_var);
<a name="l00950"></a>00950   <span class="keywordflow">if</span> (varSlot == NULL || !<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(dest_mesh) || new_var == NULL) {
<a name="l00951"></a>00951     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00952"></a>00952     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00953"></a>00953   }
<a name="l00954"></a>00954 
<a name="l00955"></a>00955   <span class="comment">// test for NULL name</span>
<a name="l00956"></a>00956   <span class="keywordflow">if</span> (newName == NULL)
<a name="l00957"></a>00957     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l00958"></a>00958 
<a name="l00959"></a>00959   <span class="comment">// log message</span>
<a name="l00960"></a>00960   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Copying variable '%s' to '%s'"</span>, 
<a name="l00961"></a>00961                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l00962"></a>00962 
<a name="l00963"></a>00963   <span class="comment">// Do nothing special for a coord variable -WSK 9/15/04</span>
<a name="l00964"></a>00964 
<a name="l00965"></a>00965   <span class="comment">// get other info from source variable &amp; dest mesh</span>
<a name="l00966"></a>00966   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(src_var, &amp;numDataPoint, &amp;numComp, &amp;assoc,
<a name="l00967"></a>00967                           &amp;mathtype, &amp;datatype);
<a name="l00968"></a>00968   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00969"></a>00969     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l00970"></a>00970                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00971"></a>00971     <span class="keywordflow">return</span> rc;
<a name="l00972"></a>00972   }
<a name="l00973"></a>00973   <span class="comment">// more checking - destination mesh and variable assoc type are compatible</span>
<a name="l00974"></a>00974   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>) {
<a name="l00975"></a>00975     assoc = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>;
<a name="l00976"></a>00976   }
<a name="l00977"></a>00977   <span class="keywordflow">else</span> {
<a name="l00978"></a>00978     rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(dest_mesh, assoc, &amp;numEntity); 
<a name="l00979"></a>00979     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00980"></a>00980       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00981"></a>00981       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00982"></a>00982     }
<a name="l00983"></a>00983     <span class="keywordflow">if</span> (numEntity != numDataPoint) {
<a name="l00984"></a>00984       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: destination mesh not compatible with src variable"</span>, 
<a name="l00985"></a>00985                             <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00986"></a>00986       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00987"></a>00987     }
<a name="l00988"></a>00988   }
<a name="l00989"></a>00989 
<a name="l00990"></a>00990   <span class="comment">// --- do it</span>
<a name="l00991"></a>00991   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(src_var, &amp;data);
<a name="l00992"></a>00992   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00993"></a>00993     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l00994"></a>00994                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00995"></a>00995     <span class="keywordflow">return</span> rc;
<a name="l00996"></a>00996   }
<a name="l00997"></a>00997   rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(dest_mesh, newName, new_var);
<a name="l00998"></a>00998   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l00999"></a>00999     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new variable '%s'"</span>, newName);
<a name="l01000"></a>01000     <span class="keywordflow">return</span> rc;
<a name="l01001"></a>01001   }
<a name="l01002"></a>01002   rc = <a class="code" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData</a>(*new_var, numDataPoint, numComp, assoc, mathtype, 
<a name="l01003"></a>01003                    datatype, data);
<a name="l01004"></a>01004   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01005"></a>01005     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s'"</span>, newName);
<a name="l01006"></a>01006     <span class="keywordflow">return</span> rc;
<a name="l01007"></a>01007   }
<a name="l01008"></a>01008 
<a name="l01009"></a>01009 
<a name="l01010"></a>01010   <span class="keywordflow">return</span> rc;
<a name="l01011"></a>01011 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g23064ee8e3a16531e8fac78071f6a4e8"></a><!-- doxytag: member="variable.c::fc_copyVariableFromRegionMesh" ref="g23064ee8e3a16531e8fac78071f6a4e8" args="(FC_Variable src_var, FC_Mesh dest_mesh, FC_Variable mapping, void *fillval, char *newName, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copyVariableFromRegionMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>src_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>dest_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>mapping</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>fillval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a variable defined on a smaller mesh onto a bigger one. 
<p>
<b>Description:</b> <p>
Copy a variable defined on a smaller mesh onto a bigger one. Meshes can be on different datasets. This is intended for cases where you may promote a subset to a mesh (becuase, for instance, it corresponds to a ROI) and later want to map that area back onto the original mesh.<p>
newName is the name of the var on the dest mesh. If the variable does not exist on the dest mesh, a new var is created there and values for the entities on the dest mesh that do not exist on the original mesh are filled in with the fillval. If the variable does exist on the dest mesh, then the vals from the srv_var are copied over according to the mapping. This latter action allows one to call this function in a loop, adding in the same var from several regions sequentially. (Note this is unlike copyVarToRegionMesh where the dest var cannot preexist.)<p>
The entity mapping takes the form of another variable of the same association that contains the ID numbers of the corresponding entity type in the larger mesh. It is assumed that this is created at the time of promoting the subset to the mesh. Note that this is different that the lookup table ids since these go from currmesh to prev mesh, as opposed to the original on disk numbering to the new fclib numbering.<p>
Note this doest not check the coords or the conns to see if they are the same on the 2 meshes, it only goes by the mapping numbers.<p>
Note that since we can only write out variables as atrributes in exodus and therefore as doubles, the mapping var may not be explictly FC_DT_INT. We may want to explictly convert this on read in. For now we will just cast/round the val to an int if it is a float or double.<p>
Note: if there is an invalid mapping data pt, it just wont copy that one over. should change this so the call fails.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000106">Todo:</a></b></dt><dd><ul>
<li>fix the rounding. couldnt get round or rint to work.</li><li>prob should put the conversion for the region variable when it is read in from exodus.</li><li>have it fail if there is an invalid mapping data pt</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>04/24/08 ACG Created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_var</em>&nbsp;</td><td>
Input - the source variable to be copied </td></tr>
<tr><td valign="top"><em>dest_mesh</em>&nbsp;</td><td>
Input - the destination mesh to be copied into </td></tr>
<tr><td valign="top"><em>mapping</em>&nbsp;</td><td>
Input - int var that maps entities from this mesh to the dest mesh </td></tr>
<tr><td valign="top"><em>fillval</em>&nbsp;</td><td>
Input - optional variable fill value for entities not in the map </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
Output - handle to the new variable </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l01065">1065</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00286">fc_createVariable()</a>, <a class="el" href="base_8h-source.html#l00139">FC_DT_CHAR</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00149">FC_DT_FLOAT</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04052">fc_getVariableByName()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, <a class="el" href="variable_8c-source.html#l05156">fc_isVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="variable_8c-source.html#l00604">fc_setVariableDataPtr()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01073"></a>01073   { 
<a name="l01074"></a>01074   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01075"></a>01075   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l01076"></a>01076   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>* existVars;
<a name="l01077"></a>01077   <span class="keywordtype">int</span> numExist;
<a name="l01078"></a>01078   <span class="keywordtype">int</span> numDataPoint,currnumDataPoint, <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, currnumComponent,numEntity;
<a name="l01079"></a>01079   <span class="keywordtype">int</span> mappingnumdp,mappingnumc;
<a name="l01080"></a>01080   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc, currassoc, mappingassoc;
<a name="l01081"></a>01081   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype, currmathtype, mappingmathtype;
<a name="l01082"></a>01082   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype, currdatatype, mappingdatatype;
<a name="l01083"></a>01083   <span class="keywordtype">void</span> *data, *new_data, *currdata, *mappingdata;
<a name="l01084"></a>01084   <span class="keywordtype">int</span> i, j;
<a name="l01085"></a>01085 
<a name="l01086"></a>01086   
<a name="l01087"></a>01087   <span class="comment">// default return value</span>
<a name="l01088"></a>01088   <span class="keywordflow">if</span> (new_var)
<a name="l01089"></a>01089     *new_var = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l01090"></a>01090 
<a name="l01091"></a>01091   <span class="comment">// check input - NULL name is o.k.</span>
<a name="l01092"></a>01092   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(src_var);
<a name="l01093"></a>01093   <span class="keywordflow">if</span> (varSlot == NULL || !<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(mapping) || !<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(dest_mesh)
<a name="l01094"></a>01094       || new_var == NULL){
<a name="l01095"></a>01095     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01096"></a>01096     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01097"></a>01097   }
<a name="l01098"></a>01098 
<a name="l01099"></a>01099   <span class="comment">// test for NULL name</span>
<a name="l01100"></a>01100   <span class="keywordflow">if</span> (newName == NULL)
<a name="l01101"></a>01101     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l01102"></a>01102 
<a name="l01103"></a>01103   <span class="comment">// log message</span>
<a name="l01104"></a>01104   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Copying region variable '%s' to '%s'"</span>, 
<a name="l01105"></a>01105                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l01106"></a>01106 
<a name="l01107"></a>01107   <span class="comment">//more checking</span>
<a name="l01108"></a>01108   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(mapping, &amp;mappingnumdp, &amp;mappingnumc,
<a name="l01109"></a>01109                  &amp;mappingassoc,&amp;mappingmathtype,&amp;mappingdatatype);
<a name="l01110"></a>01110   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01111"></a>01111     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for mapping variable"</span>);
<a name="l01112"></a>01112     <span class="keywordflow">return</span> rc;
<a name="l01113"></a>01113   }
<a name="l01114"></a>01114   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(src_var, &amp;numDataPoint, &amp;numComponent,
<a name="l01115"></a>01115                  &amp;assoc,&amp;mathtype,&amp;datatype);
<a name="l01116"></a>01116   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01117"></a>01117     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for src variable"</span>);
<a name="l01118"></a>01118     <span class="keywordflow">return</span> rc;
<a name="l01119"></a>01119   }
<a name="l01120"></a>01120 
<a name="l01121"></a>01121   <span class="comment">//NOTE: from writeout - this may be a double</span>
<a name="l01122"></a>01122   <span class="comment">//  if (mappingdatatype != FC_DT_INT){</span>
<a name="l01123"></a>01123   <span class="comment">//    fc_printfErrorMessage("mapping variable must be FC_DT_INT");</span>
<a name="l01124"></a>01124   <span class="comment">//    return FC_INPUT_ERROR;</span>
<a name="l01125"></a>01125   <span class="comment">//  }</span>
<a name="l01126"></a>01126   <span class="keywordflow">if</span> (mappingdatatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a> &amp;&amp; mappingdatatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a> &amp;&amp;
<a name="l01127"></a>01127       mappingdatatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>){
<a name="l01128"></a>01128     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"mappingdatatype must be numeric"</span>);
<a name="l01129"></a>01129     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01130"></a>01130   }
<a name="l01131"></a>01131   <span class="keywordflow">if</span> (mappingnumc != 1){
<a name="l01132"></a>01132     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"mapping variable must be single component"</span>);
<a name="l01133"></a>01133     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01134"></a>01134   }
<a name="l01135"></a>01135   <span class="keywordflow">if</span> (mappingassoc != assoc){
<a name="l01136"></a>01136     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"mapping variable and src variable must have same assoc"</span>);
<a name="l01137"></a>01137     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01138"></a>01138   }
<a name="l01139"></a>01139   <span class="keywordflow">if</span> (datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a> &amp;&amp; datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a> &amp;&amp; datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a> &amp;&amp;
<a name="l01140"></a>01140       datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>){
<a name="l01141"></a>01141     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"src variable must have known type"</span>);
<a name="l01142"></a>01142     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01143"></a>01143   }
<a name="l01144"></a>01144     
<a name="l01145"></a>01145   <span class="comment">//temporary</span>
<a name="l01146"></a>01146   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>) {
<a name="l01147"></a>01147     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"not handling globals at this time"</span>);
<a name="l01148"></a>01148     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01149"></a>01149   }
<a name="l01150"></a>01150   <span class="keywordflow">if</span> (assoc != <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a> &amp;&amp; assoc != <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>){
<a name="l01151"></a>01151     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"only handling vertex and element vars at this time"</span>);
<a name="l01152"></a>01152     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01153"></a>01153   }
<a name="l01154"></a>01154   <span class="comment">//check appropriateness of meshes - are there enough of this entity in</span>
<a name="l01155"></a>01155   <span class="comment">//the dest mesh (should we check dimension etc?)</span>
<a name="l01156"></a>01156   rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(dest_mesh, assoc, &amp;numEntity); 
<a name="l01157"></a>01157   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01158"></a>01158     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01159"></a>01159     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01160"></a>01160   }
<a name="l01161"></a>01161   <span class="keywordflow">if</span> (numEntity &lt; numDataPoint) {
<a name="l01162"></a>01162     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: destination mesh not compatible with src variable"</span>, 
<a name="l01163"></a>01163                  <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01164"></a>01164     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01165"></a>01165   }
<a name="l01166"></a>01166 
<a name="l01167"></a>01167   <span class="comment">//does the var already exist?</span>
<a name="l01168"></a>01168   rc = <a class="code" href="group__Variable.html#g360da27d39e62be3c900da302a754e95" title="Get variables from the mesh.">fc_getVariableByName</a>(dest_mesh, newName, &amp;numExist, &amp;existVars);
<a name="l01169"></a>01169   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01170"></a>01170     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for curr variable on dest mesh"</span>);
<a name="l01171"></a>01171     <span class="keywordflow">return</span> rc;
<a name="l01172"></a>01172   }    
<a name="l01173"></a>01173   <span class="keywordflow">if</span> (numExist &gt; 1){
<a name="l01174"></a>01174     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy region var onto new mesh since there is more than 1 instance there"</span>);
<a name="l01175"></a>01175     free(existVars);
<a name="l01176"></a>01176     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01177"></a>01177   }
<a name="l01178"></a>01178   <span class="keywordflow">if</span> (numExist == 1){
<a name="l01179"></a>01179     <span class="comment">//check to see if it is compatable</span>
<a name="l01180"></a>01180     rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(existVars[0], &amp;currnumDataPoint, &amp;currnumComponent,
<a name="l01181"></a>01181                  &amp;currassoc,&amp;currmathtype,&amp;currdatatype);
<a name="l01182"></a>01182     
<a name="l01183"></a>01183     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01184"></a>01184       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for curr variable on dest mesh"</span>);
<a name="l01185"></a>01185       free(existVars);
<a name="l01186"></a>01186       <span class="keywordflow">return</span> rc;
<a name="l01187"></a>01187     }
<a name="l01188"></a>01188     <span class="keywordflow">if</span> (currnumComponent != numComponent){
<a name="l01189"></a>01189       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy region var onto mesh because of existing numComponent incompatability"</span>);
<a name="l01190"></a>01190       free(existVars);
<a name="l01191"></a>01191       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01192"></a>01192     }
<a name="l01193"></a>01193     <span class="keywordflow">if</span> (currassoc != assoc){
<a name="l01194"></a>01194       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy region var onto mesh because of existing assoc incompatability"</span>);
<a name="l01195"></a>01195       free(existVars);
<a name="l01196"></a>01196       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01197"></a>01197     }
<a name="l01198"></a>01198     <span class="keywordflow">if</span> (currmathtype != mathtype){
<a name="l01199"></a>01199       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy region var onto mesh because of existing mathtype incompatability"</span>);
<a name="l01200"></a>01200       free(existVars);
<a name="l01201"></a>01201       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01202"></a>01202     }
<a name="l01203"></a>01203     <span class="keywordflow">if</span> (currdatatype != datatype){
<a name="l01204"></a>01204       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy region var onto mesh because of existing datatype incompatability"</span>);
<a name="l01205"></a>01205       free(existVars);
<a name="l01206"></a>01206       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01207"></a>01207     }
<a name="l01208"></a>01208   }
<a name="l01209"></a>01209 
<a name="l01210"></a>01210   <span class="comment">// --- do it</span>
<a name="l01211"></a>01211   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(src_var, &amp;data);
<a name="l01212"></a>01212   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01213"></a>01213     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l01214"></a>01214                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l01215"></a>01215     <span class="keywordflow">return</span> rc;
<a name="l01216"></a>01216   }
<a name="l01217"></a>01217   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(mapping, &amp;mappingdata);
<a name="l01218"></a>01218   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01219"></a>01219     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for mapping variable"</span>);
<a name="l01220"></a>01220     free(data);
<a name="l01221"></a>01221     <span class="keywordflow">return</span> rc;
<a name="l01222"></a>01222   }
<a name="l01223"></a>01223 
<a name="l01224"></a>01224   <span class="keywordflow">if</span> (numExist == 0){
<a name="l01225"></a>01225     <span class="comment">// create the new data</span>
<a name="l01226"></a>01226     <span class="keywordflow">switch</span>(datatype){
<a name="l01227"></a>01227     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l01228"></a>01228       new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01229"></a>01229       <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01230"></a>01230      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01231"></a>01231      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01232"></a>01232       }
<a name="l01233"></a>01233       <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01234"></a>01234      <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01235"></a>01235        ((<span class="keywordtype">int</span>*)new_data)[i] = *((<span class="keywordtype">int</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01236"></a>01236      }
<a name="l01237"></a>01237       }
<a name="l01238"></a>01238       <span class="keywordflow">break</span>;
<a name="l01239"></a>01239     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l01240"></a>01240       new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l01241"></a>01241       <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01242"></a>01242      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01243"></a>01243      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01244"></a>01244       }
<a name="l01245"></a>01245       <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01246"></a>01246      <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01247"></a>01247        ((<span class="keywordtype">double</span>*)new_data)[i] = *((<span class="keywordtype">double</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01248"></a>01248      }
<a name="l01249"></a>01249       }
<a name="l01250"></a>01250       <span class="keywordflow">break</span>;
<a name="l01251"></a>01251     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l01252"></a>01252       new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));
<a name="l01253"></a>01253       <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01254"></a>01254      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01255"></a>01255      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01256"></a>01256       }
<a name="l01257"></a>01257       <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01258"></a>01258      <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01259"></a>01259        ((<span class="keywordtype">float</span>*)new_data)[i] = *((<span class="keywordtype">float</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01260"></a>01260      }
<a name="l01261"></a>01261       }
<a name="l01262"></a>01262       <span class="keywordflow">break</span>;
<a name="l01263"></a>01263     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>:
<a name="l01264"></a>01264       new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l01265"></a>01265       <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01266"></a>01266      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01267"></a>01267      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01268"></a>01268       }
<a name="l01269"></a>01269       <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01270"></a>01270      <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01271"></a>01271        ((<span class="keywordtype">char</span>*)new_data)[i] = *((<span class="keywordtype">char</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01272"></a>01272      }
<a name="l01273"></a>01273       }
<a name="l01274"></a>01274       <span class="keywordflow">break</span>;
<a name="l01275"></a>01275     <span class="keywordflow">default</span>:
<a name="l01276"></a>01276       <span class="comment">//shouldnt happen</span>
<a name="l01277"></a>01277       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot handle datatype %d"</span>, datatype);
<a name="l01278"></a>01278       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01279"></a>01279     }
<a name="l01280"></a>01280   } <span class="keywordflow">else</span> {
<a name="l01281"></a>01281     <span class="comment">//will write it into the current data</span>
<a name="l01282"></a>01282     rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(existVars[0], &amp;currdata);
<a name="l01283"></a>01283     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01284"></a>01284       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l01285"></a>01285                    varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l01286"></a>01286       free(existVars);
<a name="l01287"></a>01287       <span class="keywordflow">return</span> rc;
<a name="l01288"></a>01288     }
<a name="l01289"></a>01289     new_data = currdata;
<a name="l01290"></a>01290   }
<a name="l01291"></a>01291 
<a name="l01292"></a>01292   <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++){
<a name="l01293"></a>01293     <span class="keywordtype">int</span> meshpt;
<a name="l01294"></a>01294     <span class="keywordflow">switch</span>(mappingdatatype){
<a name="l01295"></a>01295     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l01296"></a>01296       meshpt = (int)floor((((<span class="keywordtype">double</span>*) mappingdata)[i])+0.5);
<a name="l01297"></a>01297       <span class="keywordflow">break</span>;
<a name="l01298"></a>01298     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l01299"></a>01299       meshpt = (int)floor((((<span class="keywordtype">float</span>*) mappingdata)[i])+0.5);
<a name="l01300"></a>01300       <span class="keywordflow">break</span>;
<a name="l01301"></a>01301     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l01302"></a>01302       meshpt = ((<span class="keywordtype">int</span>*) mappingdata)[i];
<a name="l01303"></a>01303       <span class="keywordflow">break</span>;
<a name="l01304"></a>01304     <span class="keywordflow">default</span>:
<a name="l01305"></a>01305       <span class="comment">//wont happen</span>
<a name="l01306"></a>01306       <span class="keywordflow">break</span>;
<a name="l01307"></a>01307     }
<a name="l01308"></a>01308     <span class="comment">//is it a valid pt?</span>
<a name="l01309"></a>01309     <span class="keywordflow">if</span> (meshpt &gt;= numEntity){
<a name="l01310"></a>01310       <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Invalid mapping val.not copying this point"</span>);
<a name="l01311"></a>01311     } <span class="keywordflow">else</span> {
<a name="l01312"></a>01312       <span class="keywordflow">switch</span> (datatype){
<a name="l01313"></a>01313       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l01314"></a>01314      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l01315"></a>01315        ((<span class="keywordtype">int</span>*)new_data)[meshpt*numComponent+j] = ((<span class="keywordtype">int</span>*)data)[i*numComponent+j];
<a name="l01316"></a>01316      }
<a name="l01317"></a>01317      <span class="keywordflow">break</span>;
<a name="l01318"></a>01318       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l01319"></a>01319      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l01320"></a>01320        <span class="comment">// printf("replacing big mesh pt %d with curr val %g with small mesh pt %d with val %g\n",</span>
<a name="l01321"></a>01321        <span class="comment">//        (meshpt*numComponent+j), ((double*)new_data)[meshpt*numComponent+j],</span>
<a name="l01322"></a>01322        <span class="comment">//        (i*numComponent+j), ((double*)data)[i*numComponent+j]);</span>
<a name="l01323"></a>01323        ((<span class="keywordtype">double</span>*)new_data)[meshpt*numComponent+j] = ((<span class="keywordtype">double</span>*)data)[i*numComponent+j];
<a name="l01324"></a>01324      }
<a name="l01325"></a>01325      <span class="keywordflow">break</span>;
<a name="l01326"></a>01326       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l01327"></a>01327      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l01328"></a>01328        ((<span class="keywordtype">float</span>*)new_data)[meshpt*numComponent+j] = ((<span class="keywordtype">float</span>*)data)[i*numComponent+j];
<a name="l01329"></a>01329      }
<a name="l01330"></a>01330      <span class="keywordflow">break</span>;
<a name="l01331"></a>01331       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>:
<a name="l01332"></a>01332      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l01333"></a>01333        ((<span class="keywordtype">char</span>*)new_data)[meshpt*numComponent+j] = ((<span class="keywordtype">char</span>*)data)[i*numComponent+j];
<a name="l01334"></a>01334      }
<a name="l01335"></a>01335      <span class="keywordflow">break</span>;
<a name="l01336"></a>01336       <span class="keywordflow">default</span>:
<a name="l01337"></a>01337      <span class="comment">//wont happen</span>
<a name="l01338"></a>01338      <span class="keywordflow">break</span>;
<a name="l01339"></a>01339       }
<a name="l01340"></a>01340     }
<a name="l01341"></a>01341   }
<a name="l01342"></a>01342 
<a name="l01343"></a>01343   <span class="keywordflow">if</span> (numExist == 0){
<a name="l01344"></a>01344     rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(dest_mesh, newName, new_var);
<a name="l01345"></a>01345     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01346"></a>01346       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new variable '%s'"</span>, newName);
<a name="l01347"></a>01347       <span class="keywordflow">return</span> rc;
<a name="l01348"></a>01348     }
<a name="l01349"></a>01349     
<a name="l01350"></a>01350     rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(*new_var, numEntity, numComponent, assoc, mathtype, 
<a name="l01351"></a>01351                    datatype, new_data);
<a name="l01352"></a>01352     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01353"></a>01353       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s'"</span>, newName);
<a name="l01354"></a>01354       <span class="keywordflow">return</span> rc;
<a name="l01355"></a>01355     }
<a name="l01356"></a>01356   } <span class="keywordflow">else</span> {
<a name="l01357"></a>01357     <span class="comment">//this was newly allocated memory</span>
<a name="l01358"></a>01358     *new_var = existVars[0];
<a name="l01359"></a>01359     free(existVars);
<a name="l01360"></a>01360   }
<a name="l01361"></a>01361 
<a name="l01362"></a>01362   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l01363"></a>01363 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g60931b560efb891670612ed65dc6cb63"></a><!-- doxytag: member="variable.c::fc_copyVariableToRegionMesh" ref="g60931b560efb891670612ed65dc6cb63" args="(FC_Variable src_var, FC_Mesh dest_mesh, FC_Variable mapping, void *fillval, char *newName, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copyVariableToRegionMesh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>src_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>dest_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>mapping</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>fillval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a variable defined on a larger mesh onto a smaller one. 
<p>
<b>Description:</b> <p>
Copy a variable defined on a larger mesh onto a smaller one. Meshes can be on different datasets. This is intended for cases where you may promote a subset to a mesh (becuase, for instance, it corresponds to a ROI) and want to copy vars from the orginal mesh onto the new one using the mapping var that is on the smaller one. THis is particularly useful when the smaller one is created from a time step of the larger mesh and therefore you want only the data of a seq var at that time in the larger mesh to become a var on the smaller mesh.<p>
newName is the name of the var on the dest mesh. it must not preexist there. The vals from the srv_var are copied over according to the mapping.<p>
The entity mapping takes the form of another variable of the same association that contains the ID numbers of the corresponding entity type in the larger mesh. It is assumed that this is created at the time of promoting the subset to the mesh. Note that this is different that the lookup table ids since these go from currmesh to prev mesh, as opposed to the original on disk numbering to the new fclib numbering.<p>
Note this does not check the coords or the conns to see if they are the same on the 2 meshes, it only goes by the mapping numbers.<p>
Note that since we can only write out variables as attributes in exodus and therefore as doubles, the mapping var may not be explictly FC_DT_INT. We may want to explictly convert this on read in. For now we will just cast/round the val to an int if it is a float or double.<p>
Note if mapping var in orig (not region) mesh is invalid that point is not copied.<p>
Fails if the variable already exists on the region mesh.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000108">Todo:</a></b></dt><dd><ul>
<li>fix the rounding. couldnt get round or rint to work.</li><li>prob should put the conversion for the region variable when it is read in from exodus.</li><li>change so function fails in invalid mapping data.</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>06/20/08 ACG Created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_var</em>&nbsp;</td><td>
Input - the source variable to be copied </td></tr>
<tr><td valign="top"><em>dest_mesh</em>&nbsp;</td><td>
Input - the destination mesh to be copied into </td></tr>
<tr><td valign="top"><em>mapping</em>&nbsp;</td><td>
Input - int var that contains the orig numbers corresponding to the region mesh </td></tr>
<tr><td valign="top"><em>fillval</em>&nbsp;</td><td>
Input - optional variable fill value for entities not in the map </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
Output - handle to the new variable </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l01831">1831</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00286">fc_createVariable()</a>, <a class="el" href="base_8h-source.html#l00139">FC_DT_CHAR</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00149">FC_DT_FLOAT</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04052">fc_getVariableByName()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="mesh_8c-source.html#l02742">fc_isMeshValid()</a>, <a class="el" href="variable_8c-source.html#l05156">fc_isVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="variable_8c-source.html#l00604">fc_setVariableDataPtr()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>.</p>

<p>Referenced by <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l01839"></a>01839   { 
<a name="l01840"></a>01840   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l01841"></a>01841   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l01842"></a>01842   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>* existVars;
<a name="l01843"></a>01843   <span class="keywordtype">int</span> numExist;
<a name="l01844"></a>01844   <span class="keywordtype">int</span> numDataPoint, <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>, numEntity;
<a name="l01845"></a>01845   <span class="keywordtype">int</span> mappingnumdp,mappingnumc;
<a name="l01846"></a>01846   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc, mappingassoc;
<a name="l01847"></a>01847   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype, mappingmathtype;
<a name="l01848"></a>01848   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype, mappingdatatype;
<a name="l01849"></a>01849   <span class="keywordtype">void</span> *data, *new_data, *mappingdata;
<a name="l01850"></a>01850   <span class="keywordtype">int</span> i, j;
<a name="l01851"></a>01851   
<a name="l01852"></a>01852   <span class="comment">// default return value</span>
<a name="l01853"></a>01853   <span class="keywordflow">if</span> (new_var)
<a name="l01854"></a>01854     *new_var = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l01855"></a>01855 
<a name="l01856"></a>01856   <span class="comment">// check input - NULL name is o.k.</span>
<a name="l01857"></a>01857   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(src_var);
<a name="l01858"></a>01858   <span class="keywordflow">if</span> (varSlot == NULL || !<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(mapping) || !<a class="code" href="group__Mesh.html#gab6b9ca1bc6e1e7d549ce9fcd396a5e6" title="Check that the handle refers to a valid mesh.">fc_isMeshValid</a>(dest_mesh)
<a name="l01859"></a>01859       || new_var == NULL){
<a name="l01860"></a>01860     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01861"></a>01861     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01862"></a>01862   }
<a name="l01863"></a>01863 
<a name="l01864"></a>01864   <span class="comment">// test for NULL name</span>
<a name="l01865"></a>01865   <span class="keywordflow">if</span> (newName == NULL)
<a name="l01866"></a>01866     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l01867"></a>01867 
<a name="l01868"></a>01868   <span class="comment">// log message</span>
<a name="l01869"></a>01869   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Copying region variable '%s' to '%s'"</span>, 
<a name="l01870"></a>01870                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, newName);
<a name="l01871"></a>01871 
<a name="l01872"></a>01872   <span class="comment">//more checking</span>
<a name="l01873"></a>01873   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(mapping, &amp;mappingnumdp, &amp;mappingnumc,
<a name="l01874"></a>01874                  &amp;mappingassoc,&amp;mappingmathtype,&amp;mappingdatatype);
<a name="l01875"></a>01875   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01876"></a>01876     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for mapping variable"</span>);
<a name="l01877"></a>01877     <span class="keywordflow">return</span> rc;
<a name="l01878"></a>01878   }
<a name="l01879"></a>01879   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(src_var, &amp;numDataPoint, &amp;numComponent,
<a name="l01880"></a>01880                  &amp;assoc,&amp;mathtype,&amp;datatype);
<a name="l01881"></a>01881   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01882"></a>01882     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for src variable"</span>);
<a name="l01883"></a>01883     <span class="keywordflow">return</span> rc;
<a name="l01884"></a>01884   }
<a name="l01885"></a>01885 
<a name="l01886"></a>01886   <span class="comment">//NOTE: from writeout - this may be a double</span>
<a name="l01887"></a>01887   <span class="comment">//  if (mappingdatatype != FC_DT_INT){</span>
<a name="l01888"></a>01888   <span class="comment">//    fc_printfErrorMessage("mapping variable must be FC_DT_INT");</span>
<a name="l01889"></a>01889   <span class="comment">//    return FC_INPUT_ERROR;</span>
<a name="l01890"></a>01890   <span class="comment">//  }</span>
<a name="l01891"></a>01891   <span class="keywordflow">if</span> (mappingdatatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a> &amp;&amp; mappingdatatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a> &amp;&amp;
<a name="l01892"></a>01892       mappingdatatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>){
<a name="l01893"></a>01893     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"mappingdatatype must be numeric"</span>);
<a name="l01894"></a>01894     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01895"></a>01895   }
<a name="l01896"></a>01896   <span class="keywordflow">if</span> (mappingnumc != 1){
<a name="l01897"></a>01897     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"mapping variable must be single component"</span>);
<a name="l01898"></a>01898     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01899"></a>01899   }
<a name="l01900"></a>01900   <span class="keywordflow">if</span> (mappingassoc != assoc){
<a name="l01901"></a>01901     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"mapping variable and src variable must have same assoc"</span>);
<a name="l01902"></a>01902     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01903"></a>01903   }
<a name="l01904"></a>01904   <span class="keywordflow">if</span> (datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a> &amp;&amp; datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a> &amp;&amp; datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a> &amp;&amp;
<a name="l01905"></a>01905       datatype != <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>){
<a name="l01906"></a>01906     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"src variable must have known type"</span>);
<a name="l01907"></a>01907     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01908"></a>01908   }
<a name="l01909"></a>01909     
<a name="l01910"></a>01910   <span class="comment">//temporary</span>
<a name="l01911"></a>01911   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a> || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>) {
<a name="l01912"></a>01912     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"not handling globals at this time"</span>);
<a name="l01913"></a>01913     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01914"></a>01914   }
<a name="l01915"></a>01915   <span class="keywordflow">if</span> (assoc != <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a> &amp;&amp; assoc != <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a>){
<a name="l01916"></a>01916     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"only handling vertex and elem vars at this time"</span>);
<a name="l01917"></a>01917     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01918"></a>01918   }
<a name="l01919"></a>01919   <span class="comment">//check appropriateness of meshes - are there enough of this entity in</span>
<a name="l01920"></a>01920   <span class="comment">//the dest mesh (should we check dimension etc?)</span>
<a name="l01921"></a>01921   rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(dest_mesh, assoc, &amp;numEntity); 
<a name="l01922"></a>01922   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01923"></a>01923     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01924"></a>01924     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01925"></a>01925   }
<a name="l01926"></a>01926   <span class="keywordflow">if</span> (numEntity &gt; numDataPoint) {
<a name="l01927"></a>01927     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: destination mesh not compatible with src variable"</span>, 
<a name="l01928"></a>01928                  <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l01929"></a>01929     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l01930"></a>01930   }
<a name="l01931"></a>01931 
<a name="l01932"></a>01932   <span class="comment">//does the var already exist?</span>
<a name="l01933"></a>01933   rc = <a class="code" href="group__Variable.html#g360da27d39e62be3c900da302a754e95" title="Get variables from the mesh.">fc_getVariableByName</a>(dest_mesh, newName, &amp;numExist, &amp;existVars);
<a name="l01934"></a>01934   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l01935"></a>01935     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for curr variable on dest mesh"</span>);
<a name="l01936"></a>01936     <span class="keywordflow">return</span> rc;
<a name="l01937"></a>01937   }    
<a name="l01938"></a>01938   <span class="keywordflow">if</span> (numExist &gt; 0){
<a name="l01939"></a>01939     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot copy var onto new (region) mesh since there is more than 0 instance there"</span>);
<a name="l01940"></a>01940     free(existVars);
<a name="l01941"></a>01941     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l01942"></a>01942   }
<a name="l01943"></a>01943 
<a name="l01944"></a>01944 
<a name="l01945"></a>01945   <span class="comment">// --- do it</span>
<a name="l01946"></a>01946   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(src_var, &amp;data);
<a name="l01947"></a>01947   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01948"></a>01948     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l01949"></a>01949                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l01950"></a>01950     <span class="keywordflow">return</span> rc;
<a name="l01951"></a>01951   }
<a name="l01952"></a>01952   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(mapping, &amp;mappingdata);
<a name="l01953"></a>01953   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l01954"></a>01954     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for mapping variable"</span>);
<a name="l01955"></a>01955     free(data);
<a name="l01956"></a>01956     <span class="keywordflow">return</span> rc;
<a name="l01957"></a>01957   }
<a name="l01958"></a>01958 
<a name="l01959"></a>01959   <span class="comment">// create the new data</span>
<a name="l01960"></a>01960   <span class="keywordflow">switch</span>(datatype){
<a name="l01961"></a>01961   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l01962"></a>01962     new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01963"></a>01963     <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01964"></a>01964       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01965"></a>01965       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01966"></a>01966     }
<a name="l01967"></a>01967     <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01968"></a>01968       <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01969"></a>01969      ((<span class="keywordtype">int</span>*)new_data)[i] = *((<span class="keywordtype">int</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01970"></a>01970       }
<a name="l01971"></a>01971   }
<a name="l01972"></a>01972   <span class="keywordflow">break</span>;
<a name="l01973"></a>01973  <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l01974"></a>01974    new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l01975"></a>01975    <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01976"></a>01976      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01977"></a>01977      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01978"></a>01978    }
<a name="l01979"></a>01979    <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01980"></a>01980      <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01981"></a>01981        ((<span class="keywordtype">double</span>*)new_data)[i] = *((<span class="keywordtype">double</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01982"></a>01982      }
<a name="l01983"></a>01983    }
<a name="l01984"></a>01984    <span class="keywordflow">break</span>;
<a name="l01985"></a>01985  <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l01986"></a>01986    new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));
<a name="l01987"></a>01987    <span class="keywordflow">if</span> (new_data == NULL){
<a name="l01988"></a>01988      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l01989"></a>01989      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l01990"></a>01990    }
<a name="l01991"></a>01991    <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l01992"></a>01992      <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l01993"></a>01993        ((<span class="keywordtype">float</span>*)new_data)[i] = *((<span class="keywordtype">float</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l01994"></a>01994      }
<a name="l01995"></a>01995    }
<a name="l01996"></a>01996    <span class="keywordflow">break</span>;
<a name="l01997"></a>01997  <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>:
<a name="l01998"></a>01998    new_data = calloc(numEntity*numComponent,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l01999"></a>01999    <span class="keywordflow">if</span> (new_data == NULL){
<a name="l02000"></a>02000      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02001"></a>02001      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02002"></a>02002    }
<a name="l02003"></a>02003    <span class="keywordflow">if</span> (<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a> != NULL){
<a name="l02004"></a>02004      <span class="keywordflow">for</span> (i = 0; i &lt; numEntity*numComponent; i++){
<a name="l02005"></a>02005        ((<span class="keywordtype">char</span>*)new_data)[i] = *((<span class="keywordtype">char</span>*)<a class="code" href="regionreassembler_8c.html#38d3de5072d1abbef766b075c54beab3">fillval</a>);
<a name="l02006"></a>02006      }
<a name="l02007"></a>02007    }
<a name="l02008"></a>02008    <span class="keywordflow">break</span>;
<a name="l02009"></a>02009  <span class="keywordflow">default</span>:
<a name="l02010"></a>02010    <span class="comment">//shouldnt happen</span>
<a name="l02011"></a>02011    <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Cannot handle datatype %d"</span>, datatype);
<a name="l02012"></a>02012    <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l02013"></a>02013   }
<a name="l02014"></a>02014 
<a name="l02015"></a>02015   <span class="comment">//look thru the map to find the orig and dest mapping for this var</span>
<a name="l02016"></a>02016   <span class="keywordflow">for</span> (i = 0; i &lt; numEntity; i++){
<a name="l02017"></a>02017     <span class="keywordtype">int</span> meshpt;
<a name="l02018"></a>02018     <span class="keywordflow">switch</span>(mappingdatatype){
<a name="l02019"></a>02019     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l02020"></a>02020       meshpt = (int)floor((((<span class="keywordtype">double</span>*) mappingdata)[i])+0.5);
<a name="l02021"></a>02021       <span class="keywordflow">break</span>;
<a name="l02022"></a>02022     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l02023"></a>02023       meshpt = (int)floor((((<span class="keywordtype">float</span>*) mappingdata)[i])+0.5);
<a name="l02024"></a>02024       <span class="keywordflow">break</span>;
<a name="l02025"></a>02025     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l02026"></a>02026       meshpt = ((<span class="keywordtype">int</span>*) mappingdata)[i];
<a name="l02027"></a>02027       <span class="keywordflow">break</span>;
<a name="l02028"></a>02028     <span class="keywordflow">default</span>:
<a name="l02029"></a>02029       <span class="comment">//wont happen</span>
<a name="l02030"></a>02030       <span class="keywordflow">break</span>;
<a name="l02031"></a>02031     }
<a name="l02032"></a>02032     <span class="keywordflow">if</span> (meshpt &gt;= numDataPoint){
<a name="l02033"></a>02033       <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Invalid mapping val.not copying this point"</span>);
<a name="l02034"></a>02034     } <span class="keywordflow">else</span> {
<a name="l02035"></a>02035       <span class="keywordflow">switch</span> (datatype){
<a name="l02036"></a>02036       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l02037"></a>02037      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l02038"></a>02038        ((<span class="keywordtype">int</span>*)new_data)[i*numComponent+j] = ((<span class="keywordtype">int</span>*)data)[meshpt*numComponent+j];
<a name="l02039"></a>02039      }
<a name="l02040"></a>02040      <span class="keywordflow">break</span>;
<a name="l02041"></a>02041       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l02042"></a>02042      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l02043"></a>02043        ((<span class="keywordtype">double</span>*)new_data)[i*numComponent+j] = ((<span class="keywordtype">double</span>*)data)[meshpt*numComponent+j];
<a name="l02044"></a>02044      }
<a name="l02045"></a>02045      <span class="keywordflow">break</span>;
<a name="l02046"></a>02046       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l02047"></a>02047      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l02048"></a>02048        ((<span class="keywordtype">float</span>*)new_data)[i*numComponent+j] = ((<span class="keywordtype">float</span>*)data)[meshpt*numComponent+j];
<a name="l02049"></a>02049      }
<a name="l02050"></a>02050      <span class="keywordflow">break</span>;
<a name="l02051"></a>02051       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>:
<a name="l02052"></a>02052      <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++){
<a name="l02053"></a>02053        ((<span class="keywordtype">char</span>*)new_data)[i*numComponent+j] = ((<span class="keywordtype">char</span>*)data)[meshpt*numComponent+j];
<a name="l02054"></a>02054      }
<a name="l02055"></a>02055      <span class="keywordflow">break</span>;
<a name="l02056"></a>02056       <span class="keywordflow">default</span>:
<a name="l02057"></a>02057      <span class="comment">//wont happen</span>
<a name="l02058"></a>02058      <span class="keywordflow">break</span>;
<a name="l02059"></a>02059       }
<a name="l02060"></a>02060     }
<a name="l02061"></a>02061   }
<a name="l02062"></a>02062 
<a name="l02063"></a>02063   rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(dest_mesh, newName, new_var);
<a name="l02064"></a>02064   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l02065"></a>02065     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new variable '%s'"</span>, newName);
<a name="l02066"></a>02066     <span class="keywordflow">return</span> rc;
<a name="l02067"></a>02067   }
<a name="l02068"></a>02068     
<a name="l02069"></a>02069   rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(*new_var, numEntity, numComponent, assoc, mathtype, 
<a name="l02070"></a>02070                     datatype, new_data);
<a name="l02071"></a>02071   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l02072"></a>02072     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s'"</span>, newName);
<a name="l02073"></a>02073     <span class="keywordflow">return</span> rc;
<a name="l02074"></a>02074   }
<a name="l02075"></a>02075 
<a name="l02076"></a>02076   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l02077"></a>02077 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd1e1d772a6fabbe7d0da9d46ca58fd5d"></a><!-- doxytag: member="variable.c::fc_copyVariableWithNewAssociation" ref="gd1e1d772a6fabbe7d0da9d46ca58fd5d" args="(FC_Variable src_var, FC_AssociationType newAssoc, char *newName, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_copyVariableWithNewAssociation           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>src_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>newAssoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copies a Variable and (optionally) converts to a new association type. 
<p>
<b>Description:</b> <p>
Create a copy of a variable and (if necessary) convert its data to a new association type. This conversion simply averages all the values of source entities that touch a destination entity (eg, in Element-to-Vertex conversion, the an element value is the average of the values of all vertices that make up the element).<p>
While this function supports conversions to/from any of the association types for a mesh, it will return an input error if the conversion cannot take place due to due to dimension problems (eg, trying to convert a variable to a Face type when the elements are lines).<p>
Additionally, this function only works when the source and destination variables utilize the same mesh. Global variables are not supported.<p>
Results are always of data type FC_DT_DOUBLE.<p>
<b>Modifications:</b> <ul>
<li>01/30/07 CDU Created</li><li>02/14/07 CDU Updated to support broader range of associations</li><li>02/26/07 CDU removed mesh from api and cleaned up internals </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_var</em>&nbsp;</td><td>
input - the source variable </td></tr>
<tr><td valign="top"><em>newAssoc</em>&nbsp;</td><td>
input - the new association Type </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
input - new name for the variable (NULL uses source's name) </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
output - handle to the new variable. Result is always double precision. </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l02106">2106</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00192">FC_AT_EDGE</a>, <a class="el" href="base_8h-source.html#l00196">FC_AT_ELEMENT</a>, <a class="el" href="base_8h-source.html#l00194">FC_AT_FACE</a>, <a class="el" href="base_8h-source.html#l00191">FC_AT_VERTEX</a>, <a class="el" href="variable_8c-source.html#l00929">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l00286">fc_createVariable()</a>, <a class="el" href="base_8h-source.html#l00139">FC_DT_CHAR</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00149">FC_DT_FLOAT</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="topo_8c-source.html#l00279">fc_getMeshEntityParents()</a>, <a class="el" href="variable_8c-source.html#l05392">fc_getMeshFromVariable()</a>, <a class="el" href="mesh_8c-source.html#l03161">fc_getMeshNumEdge()</a>, <a class="el" href="mesh_8c-source.html#l03025">fc_getMeshNumElement()</a>, <a class="el" href="mesh_8c-source.html#l03208">fc_getMeshNumFace()</a>, <a class="el" href="mesh_8c-source.html#l02989">fc_getMeshNumVertex()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>.</p>

<p>Referenced by <a class="el" href="fcswapAssoc_8c-source.html#l00238">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02111"></a>02111  {
<a name="l02112"></a>02112 
<a name="l02113"></a>02113   <span class="keywordtype">int</span>  numDataPoint, <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>;
<a name="l02114"></a>02114   <span class="keywordtype">double</span> *dnew = NULL;
<a name="l02115"></a>02115   <span class="keywordtype">int</span> numObj, *objIDs;
<a name="l02116"></a>02116   <span class="keywordtype">void</span> *var_dptr;
<a name="l02117"></a>02117   <span class="keywordtype">double</span> r;
<a name="l02118"></a>02118   <span class="keywordtype">int</span> spot;
<a name="l02119"></a>02119   <span class="keywordtype">int</span> i,j,k;
<a name="l02120"></a>02120   <span class="keywordtype">int</span> needs_parent; <span class="comment">//For figuring out whether we need parent or child call</span>
<a name="l02121"></a>02121 
<a name="l02122"></a>02122   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a>            mesh; 
<a name="l02123"></a>02123   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a>        oldMathType;
<a name="l02124"></a>02124   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> oldAssoc;
<a name="l02125"></a>02125 
<a name="l02126"></a>02126   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> dataType;
<a name="l02127"></a>02127   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l02128"></a>02128   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>*  varSlot;
<a name="l02129"></a>02129 
<a name="l02130"></a>02130 
<a name="l02131"></a>02131   <span class="comment">//Default return value</span>
<a name="l02132"></a>02132   <span class="keywordflow">if</span> (new_var)
<a name="l02133"></a>02133     *new_var = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l02134"></a>02134 
<a name="l02135"></a>02135   <span class="comment">//Check Inputs: first get basic info and bail if obious problems</span>
<a name="l02136"></a>02136   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(src_var);
<a name="l02137"></a>02137   <span class="keywordflow">if</span>((varSlot == NULL)||(new_var==NULL)) {
<a name="l02138"></a>02138     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: problem with %s"</span>, 
<a name="l02139"></a>02139                  <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>),
<a name="l02140"></a>02140                  (varSlot==NULL) ? <span class="stringliteral">"input variable"</span> : 
<a name="l02141"></a>02141                  <span class="stringliteral">"new variable pointer"</span>);
<a name="l02142"></a>02142     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02143"></a>02143   }
<a name="l02144"></a>02144 
<a name="l02145"></a>02145   <span class="comment">//Get mesh. We now force the user to use same src/dst mesh</span>
<a name="l02146"></a>02146   rc = <a class="code" href="group__Variable.html#g6808d2015766d9b530b93375f42296a3" title="Get the parent mesh of the variable.">fc_getMeshFromVariable</a>(src_var, &amp;mesh);
<a name="l02147"></a>02147   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02148"></a>02148     <span class="keywordflow">return</span> rc;
<a name="l02149"></a>02149   
<a name="l02150"></a>02150   <span class="comment">//Get info on original variable</span>
<a name="l02151"></a>02151   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(src_var, NULL, &amp;numComponent, 
<a name="l02152"></a>02152                  &amp;oldAssoc, &amp;oldMathType, &amp;dataType);
<a name="l02153"></a>02153   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02154"></a>02154     <span class="keywordflow">return</span> rc;
<a name="l02155"></a>02155   
<a name="l02156"></a>02156 
<a name="l02157"></a>02157   <span class="comment">//If no conversion necessary, let copyVariable do all the work</span>
<a name="l02158"></a>02158   <span class="keywordflow">if</span> (newAssoc == oldAssoc) 
<a name="l02159"></a>02159     <span class="keywordflow">return</span> <a class="code" href="group__Variable.html#g0af7d0d18023362f816693cd354bcbfb" title="Copy a variable.">fc_copyVariable</a>(src_var, mesh, newName, new_var);
<a name="l02160"></a>02160   
<a name="l02161"></a>02161   
<a name="l02162"></a>02162   <span class="comment">//Figure out default name if none given</span>
<a name="l02163"></a>02163   <span class="keywordflow">if</span>(newName == NULL)
<a name="l02164"></a>02164     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l02165"></a>02165 
<a name="l02166"></a>02166 
<a name="l02167"></a>02167   <span class="comment">//Look at the destination assoc and figure out how many data points</span>
<a name="l02168"></a>02168   <span class="comment">//it has. If it's a face/edge, make sure we've created the appropriate conns.</span>
<a name="l02169"></a>02169   <span class="keywordflow">switch</span>(newAssoc){
<a name="l02170"></a>02170   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af690a2a90b49747de25e69b3bfdad27f4a">FC_AT_ELEMENT</a> : 
<a name="l02171"></a>02171     rc = <a class="code" href="group__Mesh.html#g8bcadefbf0728724adf77ef52c1f3732" title="Returns number of elements in a mesh.">fc_getMeshNumElement</a>(mesh, &amp;numDataPoint);
<a name="l02172"></a>02172     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02173"></a>02173       <span class="keywordflow">return</span> rc;
<a name="l02174"></a>02174     <span class="keywordflow">break</span>;
<a name="l02175"></a>02175 
<a name="l02176"></a>02176   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af640a4ba10b4045dfe3aef0e0c0588cbd0">FC_AT_FACE</a>:
<a name="l02177"></a>02177     <span class="comment">//Build faces if necessary</span>
<a name="l02178"></a>02178     rc = <a class="code" href="group__Mesh.html#g8c619c146c0850895098f5dbfb487418" title="Get number of faces in a mesh.">fc_getMeshNumFace</a>(mesh, &amp;numDataPoint);
<a name="l02179"></a>02179     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02180"></a>02180       <span class="keywordflow">return</span> rc;
<a name="l02181"></a>02181     <span class="keywordflow">break</span>;
<a name="l02182"></a>02182 
<a name="l02183"></a>02183   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af633c84fbf48ae06b5f39adac0b92fbaed">FC_AT_EDGE</a>: 
<a name="l02184"></a>02184     <span class="comment">//Build edges if necessary</span>
<a name="l02185"></a>02185     rc = <a class="code" href="group__Mesh.html#g82f4aa5cf3a4a5011ae65cab2ed1a8c1" title="Get number of edges in a mesh.">fc_getMeshNumEdge</a>(mesh, &amp;numDataPoint);
<a name="l02186"></a>02186     <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02187"></a>02187      <span class="keywordflow">return</span> rc;
<a name="l02188"></a>02188     <span class="keywordflow">break</span>;
<a name="l02189"></a>02189 
<a name="l02190"></a>02190   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af644ec6296999025f1ac12940f0c8e36d3">FC_AT_VERTEX</a>:
<a name="l02191"></a>02191     rc = <a class="code" href="group__Mesh.html#g9dca153475c9927e7497fd827cfd5562" title="Return the number of vertices in a mesh.">fc_getMeshNumVertex</a>(mesh, &amp;numDataPoint);
<a name="l02192"></a>02192     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02193"></a>02193       <span class="keywordflow">return</span> rc;
<a name="l02194"></a>02194     <span class="keywordflow">break</span>;
<a name="l02195"></a>02195 
<a name="l02196"></a>02196   <span class="keywordflow">default</span>:
<a name="l02197"></a>02197     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Unexpected conversion target type"</span>);
<a name="l02198"></a>02198     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02199"></a>02199   }
<a name="l02200"></a>02200 
<a name="l02201"></a>02201   <span class="comment">//We need at least one data point to continue</span>
<a name="l02202"></a>02202   <span class="keywordflow">if</span>(numDataPoint&lt;1){
<a name="l02203"></a>02203     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s Conversion would not give at least one data point"</span>,
<a name="l02204"></a>02204                  <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l02205"></a>02205     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02206"></a>02206   }
<a name="l02207"></a>02207 
<a name="l02208"></a>02208 
<a name="l02209"></a>02209   <span class="comment">//Figure out what direction we're going. If the new association</span>
<a name="l02210"></a>02210   <span class="comment">//is less than the old one (newAssoc &lt; oldAssoc), we will need</span>
<a name="l02211"></a>02211   <span class="comment">//to do a parent-of-newAssoc's ids to find out which oldAssoc ids</span>
<a name="l02212"></a>02212   <span class="comment">//need to be averaged.</span>
<a name="l02213"></a>02213   needs_parent = 0;
<a name="l02214"></a>02214   <span class="keywordflow">if</span>(newAssoc &lt; oldAssoc)
<a name="l02215"></a>02215     needs_parent = 1;
<a name="l02216"></a>02216 
<a name="l02217"></a>02217 
<a name="l02218"></a>02218   <span class="comment">//Get at the source variable's data</span>
<a name="l02219"></a>02219   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(src_var, &amp;var_dptr);               
<a name="l02220"></a>02220   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l02221"></a>02221     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l02222"></a>02222                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02223"></a>02223     <span class="keywordflow">return</span> rc;
<a name="l02224"></a>02224   } 
<a name="l02225"></a>02225 
<a name="l02226"></a>02226   <span class="comment">//Make room for the new data</span>
<a name="l02227"></a>02227   dnew = (<span class="keywordtype">double</span> *)malloc(numDataPoint * numComponent * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l02228"></a>02228   <span class="keywordflow">if</span> (dnew == NULL) {
<a name="l02229"></a>02229     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02230"></a>02230     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02231"></a>02231   }
<a name="l02232"></a>02232 
<a name="l02233"></a>02233   <span class="comment">//Go through all the new items and calculate their value</span>
<a name="l02234"></a>02234   <span class="keywordflow">for</span>(i=0; i&lt;numDataPoint; i++){
<a name="l02235"></a>02235 
<a name="l02236"></a>02236     <span class="comment">//Get the source ids that contain the destination id</span>
<a name="l02237"></a>02237     <span class="keywordflow">if</span>(needs_parent){
<a name="l02238"></a>02238       rc = <a class="code" href="group__TopologyRelations.html#gba61056e95c00bf595ffd8bd7ae631fc" title="Get the entities which own the specified entity.">fc_getMeshEntityParents</a>( mesh, newAssoc,  i, oldAssoc,
<a name="l02239"></a>02239                         &amp;numObj, &amp;objIDs);
<a name="l02240"></a>02240     } <span class="keywordflow">else</span> {
<a name="l02241"></a>02241       rc = <a class="code" href="group__TopologyRelations.html#g08edc0183a4bb0e44eb226ea75177fd8" title="Get the entities which make up the specified entity.">fc_getMeshEntityChildren</a>(mesh, newAssoc, i, oldAssoc,
<a name="l02242"></a>02242                         &amp;numObj, &amp;objIDs);
<a name="l02243"></a>02243     }
<a name="l02244"></a>02244     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l02245"></a>02245       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get %s for variable '%s'"</span>,
<a name="l02246"></a>02246                    (needs_parent)?<span class="stringliteral">"Parents"</span>:<span class="stringliteral">"Children"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l02247"></a>02247       free(dnew);
<a name="l02248"></a>02248       <span class="keywordflow">return</span> rc;
<a name="l02249"></a>02249     }
<a name="l02250"></a>02250 
<a name="l02251"></a>02251     <span class="comment">//Work on each component individually</span>
<a name="l02252"></a>02252     <span class="keywordflow">for</span>(j=0; j&lt;numComponent; j++){
<a name="l02253"></a>02253       r = 0.0;
<a name="l02254"></a>02254       <span class="keywordflow">for</span>(k=0; k&lt;numObj; k++){
<a name="l02255"></a>02255      spot = (objIDs[k] * numComponent) + j;
<a name="l02256"></a>02256      <span class="keywordflow">switch</span>(dataType){
<a name="l02257"></a>02257      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>:   r += (double) ((<span class="keywordtype">char</span> *)  var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l02258"></a>02258      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a> :   r += (double) ((<span class="keywordtype">int</span> *)   var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l02259"></a>02259      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:  r += (double) ((<span class="keywordtype">float</span> *) var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l02260"></a>02260      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>: r += (double) ((<span class="keywordtype">double</span> *)var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l02261"></a>02261      <span class="keywordflow">default</span>:
<a name="l02262"></a>02262        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Requested processing of variable with an unknown data type"</span>);
<a name="l02263"></a>02263        free(dnew);
<a name="l02264"></a>02264        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02265"></a>02265      }
<a name="l02266"></a>02266       }
<a name="l02267"></a>02267       <span class="keywordflow">if</span>(numObj)
<a name="l02268"></a>02268      r = r/(double)numObj;
<a name="l02269"></a>02269 
<a name="l02270"></a>02270       <span class="comment">//Store result for this component</span>
<a name="l02271"></a>02271       dnew[ i*numComponent + j ] = r;
<a name="l02272"></a>02272 
<a name="l02273"></a>02273     }
<a name="l02274"></a>02274     <span class="comment">//Cleanup</span>
<a name="l02275"></a>02275     free(objIDs);
<a name="l02276"></a>02276   }
<a name="l02277"></a>02277 
<a name="l02278"></a>02278   <span class="comment">//Make a new variable to stuff this in</span>
<a name="l02279"></a>02279   rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(mesh, newName, new_var);
<a name="l02280"></a>02280   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l02281"></a>02281     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Could not create variable '%s'"</span>, newName);
<a name="l02282"></a>02282     free(dnew);
<a name="l02283"></a>02283     <span class="keywordflow">return</span> rc;
<a name="l02284"></a>02284   }
<a name="l02285"></a>02285 
<a name="l02286"></a>02286   <span class="comment">//printf("About to set : numpt %d   numcompon %d  mathtype=%s newassoc=%s\n",</span>
<a name="l02287"></a>02287   <span class="comment">//  numDataPoint, numComponent, fc_getMathTypeText(varSlot-&gt;mathtype), fc_getAssociationTypeText(newAssoc));</span>
<a name="l02288"></a>02288  
<a name="l02289"></a>02289   <span class="comment">//Fill in the data</span>
<a name="l02290"></a>02290   rc = <a class="code" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData</a>(*new_var, numDataPoint, numComponent,
<a name="l02291"></a>02291                  newAssoc, oldMathType, <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>,
<a name="l02292"></a>02292                  (<span class="keywordtype">void</span> *)dnew);
<a name="l02293"></a>02293 
<a name="l02294"></a>02294   free(dnew);
<a name="l02295"></a>02295 
<a name="l02296"></a>02296   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){ 
<a name="l02297"></a>02297     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s'"</span>,
<a name="l02298"></a>02298                  newName);
<a name="l02299"></a>02299     *new_var = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l02300"></a>02300     <span class="keywordflow">return</span> rc;
<a name="l02301"></a>02301   }
<a name="l02302"></a>02302   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>; 
<a name="l02303"></a>02303 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g192ec837fdd98caa5360f30188207b89"></a><!-- doxytag: member="variable.c::fc_createComponentSeqVariables" ref="g192ec837fdd98caa5360f30188207b89" args="(int numStep, FC_Variable *seqVar, int *numComponent, FC_Variable ***compSeqVars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createComponentSeqVariables           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>compSeqVars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates new sequence variables which are the components of a given sequence variable. 
<p>
<b>Description:</b> <p>
Given a vector sequence variable, this routine will create a new sequence variable for each of its components. For example, if given a vector field like velocity, this will create 3 new sequence variables of just the X velocity, the Y velocity and the Z velocity.<p>
Naming of the new variables is automatic: the name of the original variable with "_cX" where X is the component ID indexing from 0.<p>
<b>Modifications:</b> <ul>
<li>01/19/05 WSK, Created.</li><li>9/22/2006 WSD modified to handle global vars</li><li>10/12/2007 ACG changed var name from "_componentX" to "_cX" </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - a seq variable with non-scalar data </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
output - the number of components </td></tr>
<tr><td valign="top"><em>compSeqVars</em>&nbsp;</td><td>
output - the components as seq vars (array of numComp seqVar arrays) </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03056">3056</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l02735">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05317">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l05276">fc_getVariableName()</a>, <a class="el" href="variable_8c-source.html#l05582">fc_getVariableNumComponent()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, and <a class="el" href="subsetter_8c-source.html#l00115">var_name</a>.</p>

<p>Referenced by <a class="el" href="loadHistory_8c-source.html#l00064">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03062"></a>03062   {
<a name="l03063"></a>03063   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03064"></a>03064   <span class="keywordtype">int</span> i, j;
<a name="l03065"></a>03065   <span class="keywordtype">int</span> numComp, temp_numComp;
<a name="l03066"></a>03066   <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> sequence;
<a name="l03067"></a>03067   <span class="keywordtype">char</span>* <a class="code" href="subsetter_8c.html#4b703ba1f7a1288de40089aa611b9abf">var_name</a>;
<a name="l03068"></a>03068   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> **comp_vars, *temp_comps;
<a name="l03069"></a>03069 
<a name="l03070"></a>03070   <span class="comment">// set default return values</span>
<a name="l03071"></a>03071   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>)
<a name="l03072"></a>03072     *<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> = -1;
<a name="l03073"></a>03073   <span class="keywordflow">if</span> (compSeqVars)
<a name="l03074"></a>03074     *compSeqVars = NULL;
<a name="l03075"></a>03075 
<a name="l03076"></a>03076   <span class="comment">// check input</span>
<a name="l03077"></a>03077   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(numStep, seqVar) || !<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> || 
<a name="l03078"></a>03078       !compSeqVars) {
<a name="l03079"></a>03079     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));   
<a name="l03080"></a>03080     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03081"></a>03081   }
<a name="l03082"></a>03082 
<a name="l03083"></a>03083   <span class="comment">// get variable info</span>
<a name="l03084"></a>03084   rc = <a class="code" href="group__Variable.html#gb3e6e14f099d7870ee2c38ccccf87544" title="Return number of components of a variable.">fc_getVariableNumComponent</a>(seqVar[0], &amp;numComp);
<a name="l03085"></a>03085   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03086"></a>03086     <span class="keywordflow">return</span> rc;
<a name="l03087"></a>03087   rc = <a class="code" href="group__Variable.html#g314a992ec5ba07d7075f1172b13ef166" title="Get the parent sequence of a sequence variable.">fc_getSequenceFromSeqVariable</a>(numStep, seqVar, &amp;sequence);
<a name="l03088"></a>03088   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03089"></a>03089     <span class="keywordflow">return</span> rc;
<a name="l03090"></a>03090 
<a name="l03091"></a>03091   <span class="keywordflow">if</span> (numComp &lt; 2) {
<a name="l03092"></a>03092     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Input Error: won't do if only 1 component"</span>);
<a name="l03093"></a>03093     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l03094"></a>03094   }
<a name="l03095"></a>03095   
<a name="l03096"></a>03096   <span class="comment">// log message</span>
<a name="l03097"></a>03097   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new component seq variables."</span>);
<a name="l03098"></a>03098 
<a name="l03099"></a>03099   <span class="comment">// Basic procedure: use fc_createComponentVariables() to break each</span>
<a name="l03100"></a>03100   <span class="comment">// step of sequence var into components and then convert components</span>
<a name="l03101"></a>03101   <span class="comment">// back into sequence vars.</span>
<a name="l03102"></a>03102 
<a name="l03103"></a>03103   <span class="comment">// Make room to save component vars</span>
<a name="l03104"></a>03104   comp_vars = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>**)malloc(numComp*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*));
<a name="l03105"></a>03105   <span class="keywordflow">if</span> (!comp_vars) {
<a name="l03106"></a>03106     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03107"></a>03107     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03108"></a>03108   }
<a name="l03109"></a>03109   <span class="keywordflow">for</span> (i = 0; i &lt; numComp; i++) {
<a name="l03110"></a>03110     comp_vars[i] = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*)malloc(numStep*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l03111"></a>03111     <span class="keywordflow">if</span> (!comp_vars[i]) {
<a name="l03112"></a>03112       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03113"></a>03113       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03114"></a>03114     }
<a name="l03115"></a>03115   }
<a name="l03116"></a>03116 
<a name="l03117"></a>03117   <span class="comment">// make component vars</span>
<a name="l03118"></a>03118   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l03119"></a>03119     rc = <a class="code" href="group__Variable.html#gb1f6d162670026503f6d39ee92634c7c" title="Creates new variables which are the components of a given variable.">fc_createComponentVariables</a>(seqVar[i], &amp;temp_numComp, &amp;temp_comps);
<a name="l03120"></a>03120     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) 
<a name="l03121"></a>03121       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l03122"></a>03122     <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l03123"></a>03123       comp_vars[j][i] = temp_comps[j];
<a name="l03124"></a>03124     free(temp_comps);
<a name="l03125"></a>03125   }
<a name="l03126"></a>03126 
<a name="l03127"></a>03127   <span class="comment">// make component vars into component seqVars</span>
<a name="l03128"></a>03128   *compSeqVars = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>**)malloc(numComp*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*));
<a name="l03129"></a>03129   <span class="keywordflow">for</span> (i = 0; i &lt; numComp; i++) {
<a name="l03130"></a>03130     rc = <a class="code" href="group__Variable.html#g233584b319c5dd90a13582fc9ac3484e" title="Return name of a variable.">fc_getVariableName</a>(comp_vars[i][0], &amp;var_name);
<a name="l03131"></a>03131     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03132"></a>03132       <span class="keywordflow">return</span> rc;
<a name="l03133"></a>03133     rc = <a class="code" href="group__Variable.html#g962a68f110466d7e77d7bae3df089f20" title="Convert an array of basic vars into a sequence var.">fc_convertVariablesToSeqVariable</a>(numStep, comp_vars[i], sequence,
<a name="l03134"></a>03134                                           var_name, &amp;((*compSeqVars)[i]));
<a name="l03135"></a>03135     free(var_name);
<a name="l03136"></a>03136     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03137"></a>03137       <span class="keywordflow">return</span> rc;
<a name="l03138"></a>03138     free(comp_vars[i]);
<a name="l03139"></a>03139   }
<a name="l03140"></a>03140   free(comp_vars);
<a name="l03141"></a>03141   *<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> = numComp;
<a name="l03142"></a>03142 
<a name="l03143"></a>03143   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;    
<a name="l03144"></a>03144 }       
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gb1f6d162670026503f6d39ee92634c7c"></a><!-- doxytag: member="variable.c::fc_createComponentVariables" ref="gb1f6d162670026503f6d39ee92634c7c" args="(FC_Variable var, int *numComponent, FC_Variable **components)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createComponentVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>components</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates new variables which are the components of a given variable. 
<p>
<b>Description:</b> <p>
Given a vector variable, this routine will create a new variable for each of its components. For example, if given a vector field like coordinates, this will create 3 new variables of just the X coordinate, the Y coordinate and the Z coordinate.<p>
Naming of the new variables is automatic: the name of the original variable with "_cX" where X is the component ID indexing from 0.<p>
<b>Modifications:</b> <ul>
<li>05/03/04 WSK, Created.</li><li>9/22/2006 WSD modified to handle global vars</li><li>10/12/2007 ACG changed var name from "_componentX" to "_cX" </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>var</em>&nbsp;</td><td>
input - a variable with non-scalar data </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
output - the number of components </td></tr>
<tr><td valign="top"><em>components</em>&nbsp;</td><td>
output - the components as vars </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l02928">2928</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l00124">fc_createGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l00286">fc_createVariable()</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="variable_8c-source.html#l05352">fc_getDatasetFromVariable()</a>, <a class="el" href="variable_8c-source.html#l05392">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="variable_8c-source.html#l05276">fc_getVariableName()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05243">fc_isVariableGlobal()</a>, <a class="el" href="variable_8c-source.html#l05156">fc_isVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8h-source.html#l00170">FC_MT_SCALAR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00604">fc_setVariableDataPtr()</a>, <a class="el" href="base_8c-source.html#l00741">fc_sizeofDataType()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, and <a class="el" href="subsetter_8c-source.html#l00115">var_name</a>.</p>

<p>Referenced by <a class="el" href="variable_8c-source.html#l03056">fc_createComponentSeqVariables()</a>, and <a class="el" href="varStats_8c-source.html#l00096">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l02932"></a>02932   {
<a name="l02933"></a>02933         
<a name="l02934"></a>02934   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l02935"></a>02935   <span class="keywordtype">int</span> i, j;
<a name="l02936"></a>02936   <span class="keywordtype">int</span> numData, dim;
<a name="l02937"></a>02937   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l02938"></a>02938   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype;
<a name="l02939"></a>02939   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype;
<a name="l02940"></a>02940   <span class="keywordtype">void</span> *data, **new_data;
<a name="l02941"></a>02941   <span class="keywordtype">size_t</span> size;
<a name="l02942"></a>02942   <a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a> dataset;
<a name="l02943"></a>02943   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh;
<a name="l02944"></a>02944   <span class="keywordtype">char</span>* <a class="code" href="subsetter_8c.html#4b703ba1f7a1288de40089aa611b9abf">var_name</a>, *new_var_name;
<a name="l02945"></a>02945   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> new_var;
<a name="l02946"></a>02946   <span class="keywordtype">int</span> isGlobal;
<a name="l02947"></a>02947 
<a name="l02948"></a>02948   <span class="comment">// set default return values</span>
<a name="l02949"></a>02949   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>)
<a name="l02950"></a>02950     *<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> = -1;
<a name="l02951"></a>02951   <span class="keywordflow">if</span> (components)
<a name="l02952"></a>02952     *components = NULL;
<a name="l02953"></a>02953 
<a name="l02954"></a>02954   <span class="comment">// check input</span>
<a name="l02955"></a>02955   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(var) || !<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> || !components){
<a name="l02956"></a>02956     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));   
<a name="l02957"></a>02957     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l02958"></a>02958   }
<a name="l02959"></a>02959 
<a name="l02960"></a>02960   <span class="comment">// get variable info</span>
<a name="l02961"></a>02961   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(var, &amp;numData, &amp;dim, &amp;assoc, &amp;mathtype, &amp;datatype);
<a name="l02962"></a>02962   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02963"></a>02963     <span class="keywordflow">return</span> rc;
<a name="l02964"></a>02964 
<a name="l02965"></a>02965   <span class="keywordflow">if</span> (dim &lt; 2) {
<a name="l02966"></a>02966     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Input Error: won't do if only 1 component"</span>);
<a name="l02967"></a>02967     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l02968"></a>02968   }
<a name="l02969"></a>02969   
<a name="l02970"></a>02970   <span class="comment">// log message</span>
<a name="l02971"></a>02971   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new component variables."</span>);
<a name="l02972"></a>02972 
<a name="l02973"></a>02973   <span class="comment">// get data</span>
<a name="l02974"></a>02974   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(var, &amp;data);
<a name="l02975"></a>02975   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l02976"></a>02976     <span class="keywordflow">return</span> rc; 
<a name="l02977"></a>02977 
<a name="l02978"></a>02978   <span class="comment">// create the new data</span>
<a name="l02979"></a>02979   size = <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(datatype);
<a name="l02980"></a>02980   new_data = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">void</span>*)*dim);
<a name="l02981"></a>02981   <span class="keywordflow">if</span> (new_data == NULL) {
<a name="l02982"></a>02982     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02983"></a>02983     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02984"></a>02984   }
<a name="l02985"></a>02985   <span class="keywordflow">for</span> (i = 0; i &lt; dim; i++) {
<a name="l02986"></a>02986     new_data[i] = malloc(size*numData);
<a name="l02987"></a>02987     <span class="keywordflow">if</span> (new_data[i] == NULL) {
<a name="l02988"></a>02988       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l02989"></a>02989       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l02990"></a>02990     }
<a name="l02991"></a>02991   }
<a name="l02992"></a>02992   <span class="keywordflow">for</span> (i = 0; i &lt; numData; i++) 
<a name="l02993"></a>02993     <span class="keywordflow">for</span> (j = 0; j &lt; dim; j++) 
<a name="l02994"></a>02994       memcpy((<span class="keywordtype">char</span>*)new_data[j]+ size*i, (<span class="keywordtype">char</span>*)data + size*(i*dim+j), size); 
<a name="l02995"></a>02995 
<a name="l02996"></a>02996   <span class="comment">// create the new variables</span>
<a name="l02997"></a>02997   isGlobal = <a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(var);
<a name="l02998"></a>02998   rc = <a class="code" href="group__Variable.html#g233584b319c5dd90a13582fc9ac3484e" title="Return name of a variable.">fc_getVariableName</a>(var, &amp;var_name);
<a name="l02999"></a>02999   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03000"></a>03000     <span class="keywordflow">return</span> rc;
<a name="l03001"></a>03001   *<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> = dim;
<a name="l03002"></a>03002   rc = <a class="code" href="group__Variable.html#ge86dd143aacebc8510eafaa651471745" title="Get the parent dataset of the variable.">fc_getDatasetFromVariable</a>(var, &amp;dataset);
<a name="l03003"></a>03003   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03004"></a>03004     <span class="keywordflow">return</span> rc;
<a name="l03005"></a>03005   rc = <a class="code" href="group__Variable.html#g6808d2015766d9b530b93375f42296a3" title="Get the parent mesh of the variable.">fc_getMeshFromVariable</a>(var, &amp;mesh);
<a name="l03006"></a>03006   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03007"></a>03007     <span class="keywordflow">return</span> rc;
<a name="l03008"></a>03008   *components = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>)*dim);
<a name="l03009"></a>03009   new_var_name = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)*(strlen(var_name)+20));
<a name="l03010"></a>03010   <span class="keywordflow">if</span> (*components == NULL || new_var_name == NULL){
<a name="l03011"></a>03011     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03012"></a>03012     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03013"></a>03013   }
<a name="l03014"></a>03014   <span class="keywordflow">for</span> (i = 0; i &lt; dim; i++) {
<a name="l03015"></a>03015     sprintf(new_var_name, <span class="stringliteral">"%s_c%d"</span>, var_name, i);
<a name="l03016"></a>03016     <span class="keywordflow">if</span> (isGlobal)
<a name="l03017"></a>03017       rc = <a class="code" href="group__Variable.html#gc15b2d6deabd12b43786430eb16f02f6" title="Create a new global variable.">fc_createGlobalVariable</a>(dataset, new_var_name, &amp;new_var);
<a name="l03018"></a>03018     <span class="keywordflow">else</span>
<a name="l03019"></a>03019       rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(mesh, new_var_name, &amp;new_var);
<a name="l03020"></a>03020     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03021"></a>03021       <span class="keywordflow">return</span> rc;
<a name="l03022"></a>03022     rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(new_var, numData, 1, assoc, <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>, 
<a name="l03023"></a>03023                                datatype, (<span class="keywordtype">void</span>*)(new_data[i]));
<a name="l03024"></a>03024     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03025"></a>03025       <span class="keywordflow">return</span> rc;
<a name="l03026"></a>03026     (*components)[i] = new_var;
<a name="l03027"></a>03027     <span class="comment">// do not free free new_data[i]</span>
<a name="l03028"></a>03028   }
<a name="l03029"></a>03029   free(new_data);
<a name="l03030"></a>03030   free(var_name);
<a name="l03031"></a>03031   free(new_var_name);
<a name="l03032"></a>03032 
<a name="l03033"></a>03033   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;    
<a name="l03034"></a>03034 }       
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g7cb59e75c9e63c1dcc09b42787b57227"></a><!-- doxytag: member="variable.c::fc_createGlobalSeqVariable" ref="g7cb59e75c9e63c1dcc09b42787b57227" args="(FC_Dataset dataset, FC_Sequence sequence, char *varName, int *numStep, FC_Variable **seqVars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createGlobalSeqVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>sequence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>seqVars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new global sequence variable. 
<p>
<b>Description:</b> <p>
Creates a new, in-memory, global sequence variable as an array of variables. A sequence must be provided in addition to the dataset that will be the owner of the variable. The sequence must be in the provide dataset.<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>sequence</em>&nbsp;</td><td>
input - sequence handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - sequence variable name </td></tr>
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
output - the number of steps </td></tr>
<tr><td valign="top"><em>seqVars</em>&nbsp;</td><td>
output - seq variable handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l00187">187</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l06506">_fc_getNewVarSlot()</a>, <a class="el" href="sequence_8c-source.html#l02142">_fc_getSeqSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="sequenceP_8h-source.html#l00076">_FC_SeqSlot::ds</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>, <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>, and <a class="el" href="variableP_8h-source.html#l00080">_FC_VarSlot::stepID</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l00472">_fc_loadExodusDataset()</a>, and <a class="el" href="variable_8c-source.html#l00818">fc_copyGlobalSeqVariable()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00193"></a>00193   {
<a name="l00194"></a>00194   <span class="keywordtype">int</span> i;
<a name="l00195"></a>00195   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00196"></a>00196   <a class="code" href="struct__FC__SeqSlot.html" title="Sequence Slot Structure for the Sequence Table.">_FC_SeqSlot</a>* seqSlot;
<a name="l00197"></a>00197   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l00198"></a>00198   <span class="keywordtype">int</span> *tempNumPer, **tempSlotIDs;
<a name="l00199"></a>00199   
<a name="l00200"></a>00200   <span class="comment">// default output</span>
<a name="l00201"></a>00201   <span class="keywordflow">if</span> (numStep)
<a name="l00202"></a>00202     *numStep = -1;
<a name="l00203"></a>00203   <span class="keywordflow">if</span> (seqVars)
<a name="l00204"></a>00204     *seqVars = NULL;
<a name="l00205"></a>00205   
<a name="l00206"></a>00206   <span class="comment">// check input</span>
<a name="l00207"></a>00207   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l00208"></a>00208   seqSlot = <a class="code" href="group__PrivateSequence.html#g311b52c3aa6307afba63b26ad035afe5" title="Get a sequence slot from a sequence handle.">_fc_getSeqSlot</a>(sequence);
<a name="l00209"></a>00209   <span class="keywordflow">if</span> (dsSlot == NULL || seqSlot == NULL || varName == NULL || 
<a name="l00210"></a>00210       numStep == NULL || seqVars == NULL) {
<a name="l00211"></a>00211     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00212"></a>00212     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00213"></a>00213   }
<a name="l00214"></a>00214   <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dataset, seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#2897f87e3063786bb2375f3b98342738">ds</a>)) {
<a name="l00215"></a>00215     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Mesh and sequence need to be in same dataset"</span>);
<a name="l00216"></a>00216     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00217"></a>00217   }
<a name="l00218"></a>00218   
<a name="l00219"></a>00219   <span class="comment">// log message</span>
<a name="l00220"></a>00220   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new global seq variable '%s'"</span>, varName);
<a name="l00221"></a>00221   
<a name="l00222"></a>00222   <span class="comment">// make room for array &amp; setup return values</span>
<a name="l00223"></a>00223   *numStep = seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>;
<a name="l00224"></a>00224   *seqVars = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>)*seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>);
<a name="l00225"></a>00225   <span class="keywordflow">if</span> (*seqVars == NULL) {
<a name="l00226"></a>00226     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00227"></a>00227     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00228"></a>00228   }
<a name="l00229"></a>00229   
<a name="l00230"></a>00230   <span class="keywordflow">for</span> (i = 0; i &lt; seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>; i++) {
<a name="l00231"></a>00231     <span class="comment">// get an open slot</span>
<a name="l00232"></a>00232     varSlot = <a class="code" href="group__PrivateVariable.html#gd497da03701a9778462b914fde00b628" title="Get an empty variable slot from the variable table.">_fc_getNewVarSlot</a>();
<a name="l00233"></a>00233     <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l00234"></a>00234       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));      
<a name="l00235"></a>00235       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237     
<a name="l00238"></a>00238     <span class="comment">// table header information</span>
<a name="l00239"></a>00239     <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>((*seqVars)[i], varSlot);
<a name="l00240"></a>00240     <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>, varName);
<a name="l00241"></a>00241     
<a name="l00242"></a>00242     <span class="comment">// set back and forth references</span>
<a name="l00243"></a>00243     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a> = dataset;
<a name="l00244"></a>00244     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#bf719e972f05ce7ba74975fcdbccfd1a">sequence</a> = sequence;
<a name="l00245"></a>00245     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#ad6e1772eae1748e6277591ab8bd0f13">stepID</a> = i;
<a name="l00246"></a>00246   }
<a name="l00247"></a>00247   
<a name="l00248"></a>00248   <span class="comment">// set more back and forth references</span>
<a name="l00249"></a>00249   tempNumPer = (<span class="keywordtype">int</span>*)realloc(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a>, 
<a name="l00250"></a>00250                     (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>+1)*<span class="keyword">sizeof</span>(int));
<a name="l00251"></a>00251   tempSlotIDs = (<span class="keywordtype">int</span>**)realloc(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>,
<a name="l00252"></a>00252                       (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*));
<a name="l00253"></a>00253   <span class="keywordflow">if</span> (!tempNumPer || !tempSlotIDs) {
<a name="l00254"></a>00254     free(tempNumPer); free(tempSlotIDs);
<a name="l00255"></a>00255     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00256"></a>00256     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00257"></a>00257   }
<a name="l00258"></a>00258   tempSlotIDs[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>] = (<span class="keywordtype">int</span>*)malloc(seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)); 
<a name="l00259"></a>00259   <span class="keywordflow">if</span> (!tempSlotIDs[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>]) {
<a name="l00260"></a>00260     free(tempNumPer); free(tempSlotIDs);
<a name="l00261"></a>00261     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00262"></a>00262     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00263"></a>00263   }
<a name="l00264"></a>00264   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a> = tempNumPer;
<a name="l00265"></a>00265   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a>[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>] = seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>;
<a name="l00266"></a>00266   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a> = tempSlotIDs;
<a name="l00267"></a>00267   <span class="keywordflow">for</span> (i = 0; i &lt; seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>; i++) {
<a name="l00268"></a>00268     dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>][i] = (*seqVars)[i].slotID;
<a name="l00269"></a>00269   }
<a name="l00270"></a>00270   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>++;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00273"></a>00273 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gc15b2d6deabd12b43786430eb16f02f6"></a><!-- doxytag: member="variable.c::fc_createGlobalVariable" ref="gc15b2d6deabd12b43786430eb16f02f6" args="(FC_Dataset dataset, char *varName, FC_Variable *variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createGlobalVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new global variable. 
<p>
<b>Description:</b> <p>
Create a new, in-memory, variable associated with the entire dataset.<p>
<b>Modifications:</b> <ul>
<li>9/19/2006 WSD Created. Essentially a copy of fc_createVariable, except parent is the dataset. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l00124">124</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l06506">_fc_getNewVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.</p>

<p>Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>, <a class="el" href="variable_8c-source.html#l00724">fc_copyGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, and <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00128"></a>00128   {
<a name="l00129"></a>00129   <span class="keywordtype">int</span> *tempslotIDs;
<a name="l00130"></a>00130   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l00131"></a>00131   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l00132"></a>00132   
<a name="l00133"></a>00133   <span class="comment">// default return</span>
<a name="l00134"></a>00134   <span class="keywordflow">if</span> (variable)
<a name="l00135"></a>00135     *variable = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l00136"></a>00136   
<a name="l00137"></a>00137   <span class="comment">// check input</span>
<a name="l00138"></a>00138   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l00139"></a>00139   <span class="keywordflow">if</span> (dsSlot == NULL || !varName || !variable) {
<a name="l00140"></a>00140     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00141"></a>00141     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00142"></a>00142   }
<a name="l00143"></a>00143   
<a name="l00144"></a>00144   <span class="comment">// log message</span>
<a name="l00145"></a>00145   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new global variable '%s'"</span>, varName);
<a name="l00146"></a>00146   
<a name="l00147"></a>00147   <span class="comment">// get an open slot</span>
<a name="l00148"></a>00148   varSlot = <a class="code" href="group__PrivateVariable.html#gd497da03701a9778462b914fde00b628" title="Get an empty variable slot from the variable table.">_fc_getNewVarSlot</a>();
<a name="l00149"></a>00149   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l00150"></a>00150     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00151"></a>00151     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00152"></a>00152   }
<a name="l00153"></a>00153   
<a name="l00154"></a>00154   <span class="comment">// table header information</span>
<a name="l00155"></a>00155   <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(*variable, varSlot);
<a name="l00156"></a>00156   <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>, varName);
<a name="l00157"></a>00157   
<a name="l00158"></a>00158   <span class="comment">// set back and forth references</span>
<a name="l00159"></a>00159   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a> = dataset;
<a name="l00160"></a>00160   tempslotIDs = realloc(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#865385a15cb135b3d8db2c4d70452798">basicVarIDs</a>, 
<a name="l00161"></a>00161                         <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>+1));
<a name="l00162"></a>00162   <span class="keywordflow">if</span> (tempslotIDs == NULL) {
<a name="l00163"></a>00163     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00164"></a>00164     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00165"></a>00165   }
<a name="l00166"></a>00166   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#865385a15cb135b3d8db2c4d70452798">basicVarIDs</a> = tempslotIDs;
<a name="l00167"></a>00167   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#865385a15cb135b3d8db2c4d70452798">basicVarIDs</a>[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>] = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a9f69eb1eb640814d30ffec3d30077a5">slotID</a>;
<a name="l00168"></a>00168   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>++;
<a name="l00169"></a>00169   
<a name="l00170"></a>00170   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00171"></a>00171 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g05d5098e68c1761ac851b2509dfbea70"></a><!-- doxytag: member="variable.c::fc_createSeqVariable" ref="g05d5098e68c1761ac851b2509dfbea70" args="(FC_Mesh mesh, FC_Sequence sequence, char *varName, int *numStep, FC_Variable **seqVars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createSeqVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>sequence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>seqVars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new sequence variable. 
<p>
<b>Description:</b> <p>
Creates a new, in-memory, sequence variable as an array of variables. A sequence must be provided in addition to the mesh that will be the owner of the variable. The sequence and mesh must be in the same dataset.<p>
<b>Modifications:</b> <ul>
<li>2003-NOV-18 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>sequence</em>&nbsp;</td><td>
input - sequence handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - sequence variable name </td></tr>
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
output - the number of steps </td></tr>
<tr><td valign="top"><em>seqVars</em>&nbsp;</td><td>
output - seq variable handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l00350">350</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06506">_fc_getNewVarSlot()</a>, <a class="el" href="sequence_8c-source.html#l02142">_fc_getSeqSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="sequenceP_8h-source.html#l00076">_FC_SeqSlot::ds</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="meshP_8h-source.html#l00189">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>, <a class="el" href="meshP_8h-source.html#l00190">_FC_MeshSlot::numStepPerSeqVar</a>, <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>, <a class="el" href="meshP_8h-source.html#l00191">_FC_MeshSlot::seqVarIDs</a>, and <a class="el" href="variableP_8h-source.html#l00080">_FC_VarSlot::stepID</a>.</p>

<p>Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="exodusio_8c-source.html#l00472">_fc_loadExodusDataset()</a>, <a class="el" href="series_8c-source.html#l00122">_fc_makeNewSeqVar()</a>, <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="variable_8c-source.html#l02328">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="variable_8c-source.html#l05888">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00226">readOneData()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00356"></a>00356   {
<a name="l00357"></a>00357   <span class="keywordtype">int</span> i;
<a name="l00358"></a>00358   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l00359"></a>00359   <a class="code" href="struct__FC__SeqSlot.html" title="Sequence Slot Structure for the Sequence Table.">_FC_SeqSlot</a>* seqSlot;
<a name="l00360"></a>00360   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l00361"></a>00361   <span class="keywordtype">int</span> *tempNumPer, **tempSlotIDs;
<a name="l00362"></a>00362   
<a name="l00363"></a>00363   <span class="comment">// default output</span>
<a name="l00364"></a>00364   <span class="keywordflow">if</span> (numStep)
<a name="l00365"></a>00365     *numStep = -1;
<a name="l00366"></a>00366   <span class="keywordflow">if</span> (seqVars)
<a name="l00367"></a>00367     *seqVars = NULL;
<a name="l00368"></a>00368   
<a name="l00369"></a>00369   <span class="comment">// check input</span>
<a name="l00370"></a>00370   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l00371"></a>00371   seqSlot = <a class="code" href="group__PrivateSequence.html#g311b52c3aa6307afba63b26ad035afe5" title="Get a sequence slot from a sequence handle.">_fc_getSeqSlot</a>(sequence);
<a name="l00372"></a>00372   <span class="keywordflow">if</span> (meshSlot == NULL || seqSlot == NULL || varName == NULL || 
<a name="l00373"></a>00373       numStep == NULL || seqVars == NULL) {
<a name="l00374"></a>00374     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00375"></a>00375     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00376"></a>00376   }
<a name="l00377"></a>00377   <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>, seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#2897f87e3063786bb2375f3b98342738">ds</a>)) {
<a name="l00378"></a>00378     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Mesh and sequence need to be in same dataset"</span>);
<a name="l00379"></a>00379     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00380"></a>00380   }
<a name="l00381"></a>00381   
<a name="l00382"></a>00382   <span class="comment">// log message</span>
<a name="l00383"></a>00383   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new seq variable '%s'"</span>, varName);
<a name="l00384"></a>00384   
<a name="l00385"></a>00385   <span class="comment">// make room for array &amp; setup return values</span>
<a name="l00386"></a>00386   *numStep = seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>;
<a name="l00387"></a>00387   *seqVars = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>)*seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>);
<a name="l00388"></a>00388   <span class="keywordflow">if</span> (*seqVars == NULL) {
<a name="l00389"></a>00389     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00390"></a>00390     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00391"></a>00391   }
<a name="l00392"></a>00392   
<a name="l00393"></a>00393   <span class="keywordflow">for</span> (i = 0; i &lt; seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>; i++) {
<a name="l00394"></a>00394     <span class="comment">// get an open slot</span>
<a name="l00395"></a>00395     varSlot = <a class="code" href="group__PrivateVariable.html#gd497da03701a9778462b914fde00b628" title="Get an empty variable slot from the variable table.">_fc_getNewVarSlot</a>();
<a name="l00396"></a>00396     <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l00397"></a>00397       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));      
<a name="l00398"></a>00398       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400     
<a name="l00401"></a>00401     <span class="comment">// table header information</span>
<a name="l00402"></a>00402     <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>((*seqVars)[i], varSlot);
<a name="l00403"></a>00403     <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>, varName);
<a name="l00404"></a>00404     
<a name="l00405"></a>00405     <span class="comment">// set back and forth references</span>
<a name="l00406"></a>00406     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a> = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>;
<a name="l00407"></a>00407     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a> = mesh;
<a name="l00408"></a>00408     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#bf719e972f05ce7ba74975fcdbccfd1a">sequence</a> = sequence;
<a name="l00409"></a>00409     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#ad6e1772eae1748e6277591ab8bd0f13">stepID</a> = i;
<a name="l00410"></a>00410   }
<a name="l00411"></a>00411   
<a name="l00412"></a>00412   <span class="comment">// set more back and forth references</span>
<a name="l00413"></a>00413   tempNumPer = (<span class="keywordtype">int</span>*)realloc(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e17e969e56b697232591e53ba6c55ba4">numStepPerSeqVar</a>, 
<a name="l00414"></a>00414                     (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>+1)*<span class="keyword">sizeof</span>(int));
<a name="l00415"></a>00415   tempSlotIDs = (<span class="keywordtype">int</span>**)realloc(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e9d6f6c85dc084548c919597d128ff75">seqVarIDs</a>,
<a name="l00416"></a>00416                       (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*));
<a name="l00417"></a>00417   <span class="keywordflow">if</span> (!tempNumPer || !tempSlotIDs) {
<a name="l00418"></a>00418     free(tempNumPer); free(tempSlotIDs);
<a name="l00419"></a>00419     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00420"></a>00420     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00421"></a>00421   }
<a name="l00422"></a>00422   tempSlotIDs[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>] = (<span class="keywordtype">int</span>*)malloc(seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)); 
<a name="l00423"></a>00423   <span class="keywordflow">if</span> (!tempSlotIDs[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>]) {
<a name="l00424"></a>00424     free(tempNumPer); free(tempSlotIDs);
<a name="l00425"></a>00425     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00426"></a>00426     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00427"></a>00427   }
<a name="l00428"></a>00428   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e17e969e56b697232591e53ba6c55ba4">numStepPerSeqVar</a> = tempNumPer;
<a name="l00429"></a>00429   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e17e969e56b697232591e53ba6c55ba4">numStepPerSeqVar</a>[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>] = seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>;
<a name="l00430"></a>00430   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e9d6f6c85dc084548c919597d128ff75">seqVarIDs</a> = tempSlotIDs;
<a name="l00431"></a>00431   <span class="keywordflow">for</span> (i = 0; i &lt; seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>; i++) {
<a name="l00432"></a>00432     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e9d6f6c85dc084548c919597d128ff75">seqVarIDs</a>[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>][i] = (*seqVars)[i].slotID;
<a name="l00433"></a>00433   }
<a name="l00434"></a>00434   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>++;
<a name="l00435"></a>00435   
<a name="l00436"></a>00436   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00437"></a>00437 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ga2ffd025a786dbe93fc7f8defb969631"></a><!-- doxytag: member="variable.c::fc_createVariable" ref="ga2ffd025a786dbe93fc7f8defb969631" args="(FC_Mesh mesh, char *varName, FC_Variable *variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_createVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new variable. 
<p>
<b>Description:</b> <p>
Create a new, in-memory, variable.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l00286">286</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06506">_fc_getNewVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numBasicVar</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.</p>

<p>Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="exodusio_8c-source.html#l00472">_fc_loadExodusDataset()</a>, <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>, <a class="el" href="fileio_8c-source.html#l00539">_fc_makeVariableFromFile()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="variable_8c-source.html#l00929">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l01065">fc_copyVariableFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l01831">fc_copyVariableToRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l03503">fc_getDisplacedEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03702">fc_getDisplacedFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l03900">fc_getDisplacedRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04542">fc_getDisplacedSurfaceNormals()</a>, <a class="el" href="geom_8c-source.html#l03415">fc_getEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>, <a class="el" href="mesh_8c-source.html#l03497">fc_getMeshCoordsAsVariable()</a>, <a class="el" href="geom_8c-source.html#l03808">fc_getRegionVolumes()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="geom_8c-source.html#l04448">fc_getSurfaceNormals()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="gaplines_8c-source.html#l00240">getLinesAsVectors()</a>, and <a class="el" href="elemdeath__ex1_8c-source.html#l00076">makeDeadVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00290"></a>00290   {
<a name="l00291"></a>00291   <span class="keywordtype">int</span> *tempslotIDs;
<a name="l00292"></a>00292   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l00293"></a>00293   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l00294"></a>00294   
<a name="l00295"></a>00295   <span class="comment">// default return</span>
<a name="l00296"></a>00296   <span class="keywordflow">if</span> (variable)
<a name="l00297"></a>00297     *variable = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l00298"></a>00298   
<a name="l00299"></a>00299   <span class="comment">// check input</span>
<a name="l00300"></a>00300   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l00301"></a>00301   <span class="keywordflow">if</span> (meshSlot == NULL || !varName || !variable) {
<a name="l00302"></a>00302     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00303"></a>00303     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00304"></a>00304   }
<a name="l00305"></a>00305   
<a name="l00306"></a>00306   <span class="comment">// log message</span>
<a name="l00307"></a>00307   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new variable '%s'"</span>, varName);
<a name="l00308"></a>00308   
<a name="l00309"></a>00309   <span class="comment">// get an open slot</span>
<a name="l00310"></a>00310   varSlot = <a class="code" href="group__PrivateVariable.html#gd497da03701a9778462b914fde00b628" title="Get an empty variable slot from the variable table.">_fc_getNewVarSlot</a>();
<a name="l00311"></a>00311   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l00312"></a>00312     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00313"></a>00313     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00314"></a>00314   }
<a name="l00315"></a>00315   
<a name="l00316"></a>00316   <span class="comment">// table header information</span>
<a name="l00317"></a>00317   <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(*variable, varSlot);
<a name="l00318"></a>00318   <a class="code" href="group__PrivateTable.html#g6ea29808acded7c5a7749138839616aa" title="Replaces the name for a slot header with a copy of the input.">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>, varName);
<a name="l00319"></a>00319   
<a name="l00320"></a>00320   <span class="comment">// set back and forth references</span>
<a name="l00321"></a>00321   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a> = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8e636c6228614117c3f0632c33b01554">ds</a>;
<a name="l00322"></a>00322   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a> = mesh;
<a name="l00323"></a>00323   tempslotIDs = realloc(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#c599e2802ddaeb185a171b147f2c4ba1">basicVarIDs</a>, 
<a name="l00324"></a>00324                         <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>+1));
<a name="l00325"></a>00325   <span class="keywordflow">if</span> (tempslotIDs == NULL) {
<a name="l00326"></a>00326     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00327"></a>00327     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00328"></a>00328   }
<a name="l00329"></a>00329   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#c599e2802ddaeb185a171b147f2c4ba1">basicVarIDs</a> = tempslotIDs;
<a name="l00330"></a>00330   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#c599e2802ddaeb185a171b147f2c4ba1">basicVarIDs</a>[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>] = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a9f69eb1eb640814d30ffec3d30077a5">slotID</a>;
<a name="l00331"></a>00331   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>++;
<a name="l00332"></a>00332   
<a name="l00333"></a>00333   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00334"></a>00334 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gef5ebe119abe1d217a216f0faad0e667"></a><!-- doxytag: member="variable.c::fc_deleteSeqVariable" ref="gef5ebe119abe1d217a216f0faad0e667" args="(int numStep, FC_Variable *variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_deleteSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a sequence variable. 
<p>
<b>Description:</b> <p>
Call when this sequence variable is no longer needed.<p>
NOTE: this does not delete the array of variable handles that makes up the sequence variable, the user is still responsible for this.<p>
<b>Modifications:</b> <ul>
<li>2003-APR-21 W Koegler Created.</li><li>12/01/03 WSK Changed so it removes uncommitted variables form the owning mesh's varID lists.</li><li>9/9/04 WSK changed name to delete. Changed behavior so that delete always deletes no matter whether on disk or not.</li><li>9/19/2006 WSD Added behavior so handles variables owned by datasets as well. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - the number of variable handles </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
input - variable handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05062">5062</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06584">_fc_deleteVarSlot()</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00189">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00190">_FC_MeshSlot::numStepPerSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00191">_FC_MeshSlot::seqVarIDs</a>, <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.</p>

<p>Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="series_8c-source.html#l00122">_fc_makeNewSeqVar()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="mesh_8c-source.html#l02626">fc_deleteMesh()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="variable_8c-source.html#l04695">fc_getOrGenerateUniqueSeqVariableByName()</a>, <a class="el" href="variable_8c-source.html#l05888">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00324">makeIntersecting()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00402">makeNormal()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05065"></a>05065   {
<a name="l05066"></a>05066   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc, rc_keep;
<a name="l05067"></a>05067   <span class="keywordtype">int</span> i, j;
<a name="l05068"></a>05068   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* first_varSlot;
<a name="l05069"></a>05069   <span class="keywordtype">int</span>* num_p;     <span class="comment">// pointer to num</span>
<a name="l05070"></a>05070   <span class="keywordtype">int</span>** numPer_p; <span class="comment">// pointer to numStep per seqVar</span>
<a name="l05071"></a>05071   <span class="keywordtype">int</span>*** slots_p;  <span class="comment">// pointer to slotIDs</span>
<a name="l05072"></a>05072   <span class="keywordtype">char</span> *extra = <span class="stringliteral">""</span>;
<a name="l05073"></a>05073 
<a name="l05074"></a>05074   <span class="comment">// special case: deleting a null list is not an error</span>
<a name="l05075"></a>05075   <span class="keywordflow">if</span> (numStep &lt;= 0 &amp;&amp; variables == NULL) {
<a name="l05076"></a>05076     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Deleting a NULL sequence variable"</span>);
<a name="l05077"></a>05077     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05078"></a>05078   }
<a name="l05079"></a>05079 
<a name="l05080"></a>05080   <span class="comment">// check input</span>
<a name="l05081"></a>05081   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(numStep, variables)) {
<a name="l05082"></a>05082     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05083"></a>05083     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05084"></a>05084   }
<a name="l05085"></a>05085 
<a name="l05086"></a>05086   first_varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variables[0]);
<a name="l05087"></a>05087   
<a name="l05088"></a>05088   <span class="comment">// log message</span>
<a name="l05089"></a>05089   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>))
<a name="l05090"></a>05090     extra = <span class="stringliteral">" global"</span>;
<a name="l05091"></a>05091   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Deleting%s seq variable '%s'"</span>, extra, 
<a name="l05092"></a>05092                       first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05093"></a>05093 
<a name="l05094"></a>05094   <span class="comment">// remove references from dataset or mesh</span>
<a name="l05095"></a>05095   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>)) {
<a name="l05096"></a>05096     <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a> *dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a>);
<a name="l05097"></a>05097     num_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>;
<a name="l05098"></a>05098     numPer_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a>;
<a name="l05099"></a>05099     slots_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>;
<a name="l05100"></a>05100   }
<a name="l05101"></a>05101   <span class="keywordflow">else</span> {
<a name="l05102"></a>05102     <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a> *meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>);
<a name="l05103"></a>05103     num_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>;
<a name="l05104"></a>05104     numPer_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e17e969e56b697232591e53ba6c55ba4">numStepPerSeqVar</a>;
<a name="l05105"></a>05105     slots_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e9d6f6c85dc084548c919597d128ff75">seqVarIDs</a>;
<a name="l05106"></a>05106   }
<a name="l05107"></a>05107   <span class="keywordflow">if</span> (*num_p == 1) {
<a name="l05108"></a>05108     free(*numPer_p);
<a name="l05109"></a>05109     *numPer_p = NULL;
<a name="l05110"></a>05110     free((*slots_p)[0]);
<a name="l05111"></a>05111     free(*slots_p);
<a name="l05112"></a>05112     *slots_p = NULL;
<a name="l05113"></a>05113     *num_p = 0;
<a name="l05114"></a>05114   }
<a name="l05115"></a>05115   <span class="keywordflow">else</span> {
<a name="l05116"></a>05116     <span class="keywordflow">for</span> (i = 0; i &lt; *num_p; i++) {
<a name="l05117"></a>05117       <span class="keywordflow">if</span> ((*slots_p)[i][0] == first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a9f69eb1eb640814d30ffec3d30077a5">slotID</a>)
<a name="l05118"></a>05118      <span class="keywordflow">break</span>;
<a name="l05119"></a>05119     }
<a name="l05120"></a>05120     free((*slots_p)[i]);
<a name="l05121"></a>05121     <span class="keywordflow">for</span> (j = i+1; j &lt; *num_p; j++) {
<a name="l05122"></a>05122       (*numPer_p)[j-1] = (*numPer_p)[j];
<a name="l05123"></a>05123       (*slots_p)[j-1] = (*slots_p)[j];
<a name="l05124"></a>05124     }
<a name="l05125"></a>05125     *num_p = *num_p - 1;
<a name="l05126"></a>05126   }
<a name="l05127"></a>05127   
<a name="l05128"></a>05128   <span class="comment">// clear &amp; delete slots</span>
<a name="l05129"></a>05129   rc_keep = <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05130"></a>05130   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l05131"></a>05131     rc = <a class="code" href="group__PrivateVariable.html#g99d0ddbd32b21457c750cc471bef72e7" title="Delete the variable slot associated with the variable handle.">_fc_deleteVarSlot</a>(variables[i]);
<a name="l05132"></a>05132     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l05133"></a>05133       rc_keep = rc;
<a name="l05134"></a>05134   }
<a name="l05135"></a>05135   
<a name="l05136"></a>05136   <span class="keywordflow">return</span> rc_keep;
<a name="l05137"></a>05137 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g1de53216125d0074933ecf6006f1796a"></a><!-- doxytag: member="variable.c::fc_deleteVariable" ref="g1de53216125d0074933ecf6006f1796a" args="(FC_Variable variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_deleteVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a variable. 
<p>
<b>Description:</b> <p>
Call when this variable is no longer needed.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>12/01/03 WSK Changed so it removes uncommitted variables form the owning mesh's varID lists.</li><li>11/25/03 RM, if variable is FC_NULL_VARIABLE, then do nothing and return success (issue warning if <a class="el" href="group__Library.html#gd5ab439275b301213065adfc55e04798" title="Get the current verbosity level of the library.">fc_getLibraryVerbosity()</a>).</li><li>9/9/04 WSK changed name to delete. Changed behavior so that delete always deletes no matter whether on disk or not.</li><li>9/19/2006 WSD Added behavior so handles variables owned by datasets as well. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04980">4980</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06584">_fc_deleteVarSlot()</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::coordVarID</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numBasicVar</a>, <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>, <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>, and <a class="el" href="variableP_8h-source.html#l00080">_FC_VarSlot::stepID</a>.</p>

<p>Referenced by <a class="el" href="varNormalize_8c-source.html#l00116">createStressOrPressureVar()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00497">doDoubles()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00439">doSingles()</a>, <a class="el" href="varmath_8c-source.html#l01394">fc_constOperatorSeqVar()</a>, <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="mesh_8c-source.html#l02626">fc_deleteMesh()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l04065">fc_getDisplacedMeshVolume()</a>, <a class="el" href="geom_8c-source.html#l04240">fc_getDisplacedSubsetVolume()</a>, <a class="el" href="geom_8c-source.html#l04004">fc_getMeshVolume()</a>, <a class="el" href="variable_8c-source.html#l04286">fc_getOrGenerateUniqueVariableByName()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="shape_8c-source.html#l03754">fc_getShapeSidesAreas()</a>, <a class="el" href="geom_8c-source.html#l04344">fc_getSubsetArea()</a>, <a class="el" href="geom_8c-source.html#l04129">fc_getSubsetVolume()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="varmath_8c-source.html#l00655">fc_operatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l00979">fc_seqConstOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02640">fc_seqVarBinaryFunctionConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02414">fc_seqVarBinaryFunctionSeqConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02546">fc_seqVarBinaryFunctionSeqVarConst()</a>, <a class="el" href="varmath_8c-source.html#l02284">fc_seqVarBinaryFunctionSeqVarSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l02179">fc_seqVarBinaryFunctionSeqVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01296">fc_seqVarOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00858">fc_seqVarOperatorSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l00747">fc_seqVarOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l02094">fc_seqVarUnaryFunction()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, <a class="el" href="edgeStats_8c-source.html#l00063">get_and_print_lengths()</a>, and <a class="el" href="elemdeath__ex1_8c-source.html#l00147">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04982"></a>04982   {
<a name="l04983"></a>04983   <span class="keywordtype">int</span> i, j;
<a name="l04984"></a>04984   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l04985"></a>04985   <span class="keywordtype">int</span>* num_p;     <span class="comment">// pointer to num location</span>
<a name="l04986"></a>04986   <span class="keywordtype">int</span>** slots_p;  <span class="comment">// pointer to slotIDs location</span>
<a name="l04987"></a>04987   <span class="keywordtype">char</span> *extra = <span class="stringliteral">""</span>;
<a name="l04988"></a>04988  
<a name="l04989"></a>04989   <span class="comment">// special case: deleting a null handle is not an error</span>
<a name="l04990"></a>04990   <span class="keywordflow">if</span> ( <a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(variable, <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>)) {
<a name="l04991"></a>04991     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Deleting FC_NULL_VARIABLE"</span>);
<a name="l04992"></a>04992     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04993"></a>04993   }
<a name="l04994"></a>04994  
<a name="l04995"></a>04995   <span class="comment">// check input</span>
<a name="l04996"></a>04996   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l04997"></a>04997   <span class="keywordflow">if</span> (varSlot == NULL || varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#ad6e1772eae1748e6277591ab8bd0f13">stepID</a> &gt; -1) { <span class="comment">// can't be seq var</span>
<a name="l04998"></a>04998     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s, invalid variable"</span>, 
<a name="l04999"></a>04999              <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05000"></a>05000     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05001"></a>05001   }
<a name="l05002"></a>05002   
<a name="l05003"></a>05003   <span class="comment">// log message</span>
<a name="l05004"></a>05004   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>))
<a name="l05005"></a>05005     extra = <span class="stringliteral">" global"</span>;
<a name="l05006"></a>05006   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Deleting%s variable '%s'"</span>, extra, 
<a name="l05007"></a>05007                 varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05008"></a>05008 
<a name="l05009"></a>05009   <span class="comment">// remove reference from dataset or mesh</span>
<a name="l05010"></a>05010   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>)) {
<a name="l05011"></a>05011     <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a> *dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a>);
<a name="l05012"></a>05012     num_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>;
<a name="l05013"></a>05013     slots_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#865385a15cb135b3d8db2c4d70452798">basicVarIDs</a>;
<a name="l05014"></a>05014   }
<a name="l05015"></a>05015   <span class="keywordflow">else</span> {
<a name="l05016"></a>05016     <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>);
<a name="l05017"></a>05017     num_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>;
<a name="l05018"></a>05018     slots_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#c599e2802ddaeb185a171b147f2c4ba1">basicVarIDs</a>;
<a name="l05019"></a>05019     <span class="comment">// special case: the coord field</span>
<a name="l05020"></a>05020     <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1b0cc0e72b434224e2f804cbe0f20485">coordVarID</a> == varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a9f69eb1eb640814d30ffec3d30077a5">slotID</a>)
<a name="l05021"></a>05021       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1b0cc0e72b434224e2f804cbe0f20485">coordVarID</a> = -1;
<a name="l05022"></a>05022   }
<a name="l05023"></a>05023   <span class="keywordflow">if</span> (*num_p == 1) {
<a name="l05024"></a>05024     free(*slots_p);
<a name="l05025"></a>05025     *slots_p = NULL;
<a name="l05026"></a>05026     *num_p = 0;
<a name="l05027"></a>05027   }
<a name="l05028"></a>05028   <span class="keywordflow">else</span> {
<a name="l05029"></a>05029     <span class="keywordflow">for</span> (i = 0; i &lt; *num_p; i++) {
<a name="l05030"></a>05030       <span class="keywordflow">if</span> ((*slots_p)[i] == varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a9f69eb1eb640814d30ffec3d30077a5">slotID</a>)
<a name="l05031"></a>05031      <span class="keywordflow">break</span>;
<a name="l05032"></a>05032     }
<a name="l05033"></a>05033     <span class="keywordflow">for</span> (j = i+1; j &lt; *num_p; j++)
<a name="l05034"></a>05034       (*slots_p)[j-1] = (*slots_p)[j];
<a name="l05035"></a>05035     *num_p = *num_p - 1;
<a name="l05036"></a>05036   }
<a name="l05037"></a>05037 
<a name="l05038"></a>05038   <span class="comment">// clear &amp; delete slot</span>
<a name="l05039"></a>05039   <span class="keywordflow">return</span> <a class="code" href="group__PrivateVariable.html#g99d0ddbd32b21457c750cc471bef72e7" title="Delete the variable slot associated with the variable handle.">_fc_deleteVarSlot</a>(variable);
<a name="l05040"></a>05040 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ge86dd143aacebc8510eafaa651471745"></a><!-- doxytag: member="variable.c::fc_getDatasetFromVariable" ref="ge86dd143aacebc8510eafaa651471745" args="(FC_Variable variable, FC_Dataset *dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getDatasetFromVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a> *&nbsp;</td>
          <td class="paramname"> <em>dataset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the parent dataset of the variable. 
<p>
<b>Modifications:</b> <ul>
<li>9/19/2006 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
output - dataset handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05352">5352</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00764">FC_NULL_DATASET</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="variable_8c-source.html#l02735">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, and <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05355"></a>05355   {
<a name="l05356"></a>05356   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05357"></a>05357   
<a name="l05358"></a>05358   <span class="comment">// set default value</span>
<a name="l05359"></a>05359   <span class="keywordflow">if</span> (dataset != NULL)
<a name="l05360"></a>05360     *dataset = <a class="code" href="group__Handles.html#g0d93385a2d1df06b1bcc4b9764aa0941" title="Null (default) dataset handle.">FC_NULL_DATASET</a>;
<a name="l05361"></a>05361   
<a name="l05362"></a>05362   <span class="comment">// check input</span>
<a name="l05363"></a>05363   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05364"></a>05364   <span class="keywordflow">if</span> (varSlot == NULL || dataset == NULL) {
<a name="l05365"></a>05365     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05366"></a>05366     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05367"></a>05367   }
<a name="l05368"></a>05368   
<a name="l05369"></a>05369   <span class="comment">// log message</span>
<a name="l05370"></a>05370   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting dataset from variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05371"></a>05371   
<a name="l05372"></a>05372   <span class="comment">// return requested value</span>
<a name="l05373"></a>05373   *dataset = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a>;
<a name="l05374"></a>05374   
<a name="l05375"></a>05375   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05376"></a>05376 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ga7b2a6532c959cc0b4d21436b98e1b46"></a><!-- doxytag: member="variable.c::fc_getGlobalSeqVariableByName" ref="ga7b2a6532c959cc0b4d21436b98e1b46" args="(FC_Dataset dataset, char *varName, int *numSeqVar, int **numStepPerVar, FC_Variable ***seqVariables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getGlobalSeqVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepPerVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>seqVariables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get global sequence variables with a given name from the dataset. 
<p>
<b>Description:</b> <p>
Returns an array of global seq variables (array of arrays of variables) as well as an array of the number of steps per sequence variable. The use is responsible for freeing all returned arrays. (SeqVars is a 2D array, so to free: for (i = 0; i &lt; numSeq var) { free(seqVars[i])); } )<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 WSD created</li><li>9/25/2006 ACG returns array </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - seq variable name </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
<tr><td valign="top"><em>numStepPerVar</em>&nbsp;</td><td>
output - array with number of steps for each sequence variable </td></tr>
<tr><td valign="top"><em>seqVariables</em>&nbsp;</td><td>
output - array of sequence variables (each sequence variable is array of numStep variables </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03936">3936</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, and <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03944"></a>03944   {
<a name="l03945"></a>03945   <span class="keywordtype">int</span> i, j;
<a name="l03946"></a>03946   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a> *dsSlot;
<a name="l03947"></a>03947   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a> *varSlot;
<a name="l03948"></a>03948 
<a name="l03949"></a>03949   <span class="keywordtype">int</span> numStep;
<a name="l03950"></a>03950   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *seqvar;
<a name="l03951"></a>03951   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> **lmatch = NULL;
<a name="l03952"></a>03952   <span class="keywordtype">int</span> *lstepmatch = NULL;
<a name="l03953"></a>03953   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l03954"></a>03954   
<a name="l03955"></a>03955   <span class="comment">// default return values</span>
<a name="l03956"></a>03956  <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l03957"></a>03957     *numSeqVar = -1;
<a name="l03958"></a>03958   <span class="keywordflow">if</span> (numStepPerVar != NULL)
<a name="l03959"></a>03959     *numStepPerVar = NULL;
<a name="l03960"></a>03960   <span class="keywordflow">if</span> (seqVariables != NULL)
<a name="l03961"></a>03961     *seqVariables = NULL;
<a name="l03962"></a>03962   
<a name="l03963"></a>03963   <span class="comment">// check input</span>
<a name="l03964"></a>03964   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l03965"></a>03965   <span class="keywordflow">if</span> (dsSlot == NULL || !varName ||  numSeqVar == NULL || numStepPerVar == NULL ||
<a name="l03966"></a>03966       seqVariables == NULL) {
<a name="l03967"></a>03967     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03968"></a>03968     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03969"></a>03969   }
<a name="l03970"></a>03970   
<a name="l03971"></a>03971   <span class="comment">// log message</span>
<a name="l03972"></a>03972   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variable '%s'"</span>, varName);
<a name="l03973"></a>03973 
<a name="l03974"></a>03974   numlmatch = 0;
<a name="l03975"></a>03975   maxnumlmatch = 0;
<a name="l03976"></a>03976   
<a name="l03977"></a>03977   <span class="comment">// look for varName in this dataset's seq var list</span>
<a name="l03978"></a>03978   <span class="keywordflow">for</span> (i = 0; i &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>; i++) {
<a name="l03979"></a>03979     varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>[i][0]);
<a name="l03980"></a>03980     <span class="keywordflow">if</span> (!strcmp(varName, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>)) {
<a name="l03981"></a>03981       numStep = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a>[i];
<a name="l03982"></a>03982       seqvar = malloc((numStep)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l03983"></a>03983       <span class="keywordflow">if</span> (seqvar == NULL) {
<a name="l03984"></a>03984      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03985"></a>03985      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03986"></a>03986       }
<a name="l03987"></a>03987       <span class="keywordflow">for</span> (j = 0; j &lt; numStep; j++) {
<a name="l03988"></a>03988      varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>[i][j]);
<a name="l03989"></a>03989      <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(seqvar[j], varSlot);
<a name="l03990"></a>03990       }
<a name="l03991"></a>03991 
<a name="l03992"></a>03992       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l03993"></a>03993      lmatch = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>**)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*));
<a name="l03994"></a>03994      lstepmatch = (<span class="keywordtype">int</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l03995"></a>03995      <span class="keywordflow">if</span> (lmatch == NULL || lstepmatch == NULL){
<a name="l03996"></a>03996        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03997"></a>03997        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03998"></a>03998      }
<a name="l03999"></a>03999      numlmatch = 1;
<a name="l04000"></a>04000      maxnumlmatch = 1;
<a name="l04001"></a>04001      lmatch[0] = seqvar;
<a name="l04002"></a>04002      lstepmatch[0] = numStep;
<a name="l04003"></a>04003       }<span class="keywordflow">else</span>{
<a name="l04004"></a>04004      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l04005"></a>04005        <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> **temp;
<a name="l04006"></a>04006        <span class="keywordtype">int</span> *tempstep;
<a name="l04007"></a>04007        temp = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>**)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*));
<a name="l04008"></a>04008        tempstep = (<span class="keywordtype">int</span>*)realloc(lstepmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*));
<a name="l04009"></a>04009        <span class="keywordflow">if</span> (temp == NULL || tempstep == NULL){
<a name="l04010"></a>04010          <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l04011"></a>04011          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04012"></a>04012        }
<a name="l04013"></a>04013        maxnumlmatch*=2;
<a name="l04014"></a>04014        lmatch = temp;
<a name="l04015"></a>04015        lstepmatch = tempstep;
<a name="l04016"></a>04016      }
<a name="l04017"></a>04017      lmatch[numlmatch] = seqvar;
<a name="l04018"></a>04018      lstepmatch[numlmatch] = numStep;
<a name="l04019"></a>04019      numlmatch++;
<a name="l04020"></a>04020       }
<a name="l04021"></a>04021     }
<a name="l04022"></a>04022   }
<a name="l04023"></a>04023 
<a name="l04024"></a>04024   *numSeqVar = numlmatch;
<a name="l04025"></a>04025   *numStepPerVar = lstepmatch;
<a name="l04026"></a>04026   *seqVariables = lmatch;
<a name="l04027"></a>04027 
<a name="l04028"></a>04028   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04029"></a>04029 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3085ad2d7a4be9f81eb0eccaa19ade10"></a><!-- doxytag: member="variable.c::fc_getGlobalSeqVariables" ref="g3085ad2d7a4be9f81eb0eccaa19ade10" args="(FC_Dataset dataset, int *numSeqVar, int **numStepPerVar, FC_Variable ***seqVariables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getGlobalSeqVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepPerVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>seqVariables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the global sequence variables in a dataset. 
<p>
<b>Description:</b> <p>
Returns an array of global seq variables (array of arrays of variables) as well as an array of the number of steps per sequence variable. The use is responsible for freeing all returned arrays. (SeqVars is a 2D array, so to free: for (i = 0; i &lt; numSeq var) { free(seqVars[i])); } )<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
<tr><td valign="top"><em>numStepPerVar</em>&nbsp;</td><td>
output - array with number of steps for each sequence variable </td></tr>
<tr><td valign="top"><em>seqVariables</em>&nbsp;</td><td>
output - array of sequence variables (each sequence variable is array of numStep variables </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03492">3492</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, and <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, and <a class="el" href="fcdump_8c-source.html#l00194">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03499"></a>03499   {
<a name="l03500"></a>03500   <span class="keywordtype">int</span> i, j;
<a name="l03501"></a>03501   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l03502"></a>03502   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l03503"></a>03503   
<a name="l03504"></a>03504   <span class="comment">// set up defaults</span>
<a name="l03505"></a>03505   <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l03506"></a>03506     *numSeqVar = -1;
<a name="l03507"></a>03507   <span class="keywordflow">if</span> (numStepPerVar != NULL)
<a name="l03508"></a>03508     *numStepPerVar = NULL;
<a name="l03509"></a>03509   <span class="keywordflow">if</span> (seqVariables != NULL)
<a name="l03510"></a>03510     *seqVariables = NULL;
<a name="l03511"></a>03511   
<a name="l03512"></a>03512   <span class="comment">// check input</span>
<a name="l03513"></a>03513   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l03514"></a>03514   <span class="keywordflow">if</span> (dsSlot == NULL || numSeqVar == NULL || numStepPerVar == NULL ||
<a name="l03515"></a>03515       seqVariables == NULL) {
<a name="l03516"></a>03516     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03517"></a>03517     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03518"></a>03518   }
<a name="l03519"></a>03519   
<a name="l03520"></a>03520   <span class="comment">// log message</span>
<a name="l03521"></a>03521   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting global sequence variables for dataset '%s'"</span>,
<a name="l03522"></a>03522                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03523"></a>03523 
<a name="l03524"></a>03524   <span class="comment">// get num seq variable</span>
<a name="l03525"></a>03525   *numSeqVar = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>;
<a name="l03526"></a>03526   
<a name="l03527"></a>03527   <span class="comment">// get sequence variables</span>
<a name="l03528"></a>03528   <span class="keywordflow">if</span> (*numSeqVar &gt; 0) {
<a name="l03529"></a>03529     *numStepPerVar = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (*numSeqVar));
<a name="l03530"></a>03530     <span class="keywordflow">if</span> (*numStepPerVar == NULL) {
<a name="l03531"></a>03531       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03532"></a>03532       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03533"></a>03533     }
<a name="l03534"></a>03534     *seqVariables = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*) * (*numSeqVar));
<a name="l03535"></a>03535     <span class="keywordflow">if</span> (*seqVariables == NULL) {
<a name="l03536"></a>03536       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03537"></a>03537       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03538"></a>03538     }
<a name="l03539"></a>03539     <span class="keywordflow">for</span> (i = 0; i &lt; *numSeqVar; i++) {
<a name="l03540"></a>03540       (*numStepPerVar)[i] = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a>[i];
<a name="l03541"></a>03541       (*seqVariables)[i] = malloc(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a>[i]*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l03542"></a>03542       <span class="keywordflow">if</span> ( (*seqVariables)[i] == NULL) {
<a name="l03543"></a>03543      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03544"></a>03544      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03545"></a>03545       }
<a name="l03546"></a>03546       <span class="keywordflow">for</span> (j = 0; j &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#c7f27717b436d75f4c4de7b0a8a7d23d">numStepPerSeqVar</a>[i]; j++) {
<a name="l03547"></a>03547      varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>[i][j]);
<a name="l03548"></a>03548      <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>((*seqVariables)[i][j], varSlot);
<a name="l03549"></a>03549       }
<a name="l03550"></a>03550     }
<a name="l03551"></a>03551   }
<a name="l03552"></a>03552   
<a name="l03553"></a>03553   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03554"></a>03554 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g5771efba2615e7369804905490b8ed3c"></a><!-- doxytag: member="variable.c::fc_getGlobalVariableByName" ref="g5771efba2615e7369804905490b8ed3c" args="(FC_Dataset dataset, char *varname, int *numVariables, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getGlobalVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVariables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get global variables from the dataset. 
<p>
<b>Description:</b> <p>
Returns array of global variables on the dataset with the specified name.<p>
<b>Modifications:</b> <ul>
<li>9/19/06 WSD created. = 9/22/06 ACG returns array </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>numVariables</em>&nbsp;</td><td>
output - num variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03849">3849</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03854"></a>03854   {
<a name="l03855"></a>03855   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l03856"></a>03856   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a> *varSlot;
<a name="l03857"></a>03857   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> variable;
<a name="l03858"></a>03858   <span class="keywordtype">int</span> i;
<a name="l03859"></a>03859   
<a name="l03860"></a>03860   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *lmatch = NULL;
<a name="l03861"></a>03861   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l03862"></a>03862 
<a name="l03863"></a>03863   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l03864"></a>03864   <span class="keywordflow">if</span> (numVariables)
<a name="l03865"></a>03865     *numVariables = -1;
<a name="l03866"></a>03866   <span class="keywordflow">if</span> (variables)
<a name="l03867"></a>03867     *variables = NULL;
<a name="l03868"></a>03868   
<a name="l03869"></a>03869   <span class="comment">// check input</span>
<a name="l03870"></a>03870   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l03871"></a>03871   <span class="keywordflow">if</span> (dsSlot == NULL || varname == NULL || !variables || ! numVariables){
<a name="l03872"></a>03872     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03873"></a>03873     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03874"></a>03874   }
<a name="l03875"></a>03875   
<a name="l03876"></a>03876   <span class="comment">// log message</span>
<a name="l03877"></a>03877   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variable '%s'"</span>, varname);
<a name="l03878"></a>03878 
<a name="l03879"></a>03879   numlmatch = 0;
<a name="l03880"></a>03880   maxnumlmatch = 0;
<a name="l03881"></a>03881   
<a name="l03882"></a>03882   <span class="comment">// find the existing slot</span>
<a name="l03883"></a>03883   <span class="keywordflow">for</span> (i = 0; i &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>; i++) {
<a name="l03884"></a>03884     varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#865385a15cb135b3d8db2c4d70452798">basicVarIDs</a>[i]); 
<a name="l03885"></a>03885     <span class="keywordflow">if</span> (!strcmp(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, varname)) {
<a name="l03886"></a>03886       <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(variable, varSlot);
<a name="l03887"></a>03887 
<a name="l03888"></a>03888       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l03889"></a>03889      lmatch = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l03890"></a>03890      <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l03891"></a>03891        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03892"></a>03892        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03893"></a>03893      }
<a name="l03894"></a>03894      numlmatch = 1;
<a name="l03895"></a>03895      maxnumlmatch = 1;
<a name="l03896"></a>03896      lmatch[0] = variable;
<a name="l03897"></a>03897       }<span class="keywordflow">else</span>{
<a name="l03898"></a>03898      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l03899"></a>03899        <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *temp;
<a name="l03900"></a>03900        temp = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l03901"></a>03901        <span class="keywordflow">if</span> (temp == NULL){
<a name="l03902"></a>03902          <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03903"></a>03903          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03904"></a>03904        }
<a name="l03905"></a>03905        maxnumlmatch*=2;
<a name="l03906"></a>03906        lmatch = temp;
<a name="l03907"></a>03907      }
<a name="l03908"></a>03908      lmatch[numlmatch] = variable;
<a name="l03909"></a>03909      numlmatch++;
<a name="l03910"></a>03910       }
<a name="l03911"></a>03911     }
<a name="l03912"></a>03912   }
<a name="l03913"></a>03913 
<a name="l03914"></a>03914   *numVariables = numlmatch;
<a name="l03915"></a>03915   *variables = lmatch;
<a name="l03916"></a>03916 
<a name="l03917"></a>03917   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03918"></a>03918 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g1d1333786398ddc0cd571156691272ea"></a><!-- doxytag: member="variable.c::fc_getGlobalVariables" ref="g1d1333786398ddc0cd571156691272ea" args="(FC_Dataset dataset, int *numVar, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getGlobalVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the global variables in a dataset. 
<p>
<b>Description:</b> <p>
Returns an array of variables in the dataset. The caller is responsible for freeing the array of variable handles.<p>
<b>Modifications:</b> <ul>
<li>9/19/06 WSD created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numVar</em>&nbsp;</td><td>
output - number of variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - array of variable handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03432">3432</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, and <a class="el" href="fcdump_8c-source.html#l00194">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03436"></a>03436   {
<a name="l03437"></a>03437   <span class="keywordtype">int</span> i;
<a name="l03438"></a>03438   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l03439"></a>03439   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l03440"></a>03440   
<a name="l03441"></a>03441   <span class="comment">// set up defaults</span>
<a name="l03442"></a>03442   <span class="keywordflow">if</span> (numVar != NULL)
<a name="l03443"></a>03443     *numVar = -1;
<a name="l03444"></a>03444   <span class="keywordflow">if</span> (variables != NULL)
<a name="l03445"></a>03445     *variables = NULL;
<a name="l03446"></a>03446   
<a name="l03447"></a>03447   <span class="comment">// check input</span>
<a name="l03448"></a>03448   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l03449"></a>03449   <span class="keywordflow">if</span> (dsSlot == NULL || numVar == NULL || variables == NULL) {
<a name="l03450"></a>03450     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03451"></a>03451     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03452"></a>03452   }
<a name="l03453"></a>03453   
<a name="l03454"></a>03454   <span class="comment">// log message</span>
<a name="l03455"></a>03455   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting global variables for dataset '%s'"</span>,
<a name="l03456"></a>03456                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03457"></a>03457 
<a name="l03458"></a>03458   <span class="comment">// get num variable</span>
<a name="l03459"></a>03459   *numVar = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>;
<a name="l03460"></a>03460   
<a name="l03461"></a>03461   <span class="comment">// get variables</span>
<a name="l03462"></a>03462   <span class="keywordflow">if</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a> &gt; 0) {
<a name="l03463"></a>03463     *variables = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>) * dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>);
<a name="l03464"></a>03464     <span class="keywordflow">if</span> (*variables == NULL) {
<a name="l03465"></a>03465       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03466"></a>03466       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03467"></a>03467     }
<a name="l03468"></a>03468     <span class="keywordflow">for</span> (i = 0; i &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>; i++) {
<a name="l03469"></a>03469       varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#865385a15cb135b3d8db2c4d70452798">basicVarIDs</a>[i]);
<a name="l03470"></a>03470       <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>((*variables)[i], varSlot);
<a name="l03471"></a>03471     }
<a name="l03472"></a>03472   }
<a name="l03473"></a>03473   
<a name="l03474"></a>03474   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03475"></a>03475 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g6808d2015766d9b530b93375f42296a3"></a><!-- doxytag: member="variable.c::fc_getMeshFromVariable" ref="g6808d2015766d9b530b93375f42296a3" args="(FC_Variable variable, FC_Mesh *mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getMeshFromVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> *&nbsp;</td>
          <td class="paramname"> <em>mesh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the parent mesh of the variable. 
<p>
<b>Description:</b> <p>
If the variable is a global variable, this will return FC_NULL_MESH but will not error.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/16/03 RM, added setting default value for mesh = FC_NULL_MESH and checking for NULL input/output </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
output - mesh handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05392">5392</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="series_8c-source.html#l00122">_fc_makeNewSeqVar()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="variable_8c-source.html#l02735">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="sierra_8c-source.html#l01209">fc_evalPrestoSpotWeld()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l05888">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l03299">fc_mergeComponentSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="mesh_8c-source.html#l02091">fc_setSphereDisplacementVariable()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, and <a class="el" href="gaplines_8c-source.html#l00377">printStats()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05395"></a>05395   {
<a name="l05396"></a>05396   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05397"></a>05397   
<a name="l05398"></a>05398   <span class="comment">// set default value</span>
<a name="l05399"></a>05399   <span class="keywordflow">if</span> (mesh != NULL)
<a name="l05400"></a>05400     *mesh = <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>;
<a name="l05401"></a>05401   
<a name="l05402"></a>05402   <span class="comment">// check input</span>
<a name="l05403"></a>05403   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05404"></a>05404   <span class="keywordflow">if</span> (varSlot == NULL || mesh == NULL) {
<a name="l05405"></a>05405     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05406"></a>05406     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05407"></a>05407   }
<a name="l05408"></a>05408   
<a name="l05409"></a>05409   <span class="comment">// log message</span>
<a name="l05410"></a>05410   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting mesh from variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05411"></a>05411   
<a name="l05412"></a>05412   <span class="comment">// return requested value</span>
<a name="l05413"></a>05413   *mesh = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>;
<a name="l05414"></a>05414   
<a name="l05415"></a>05415   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05416"></a>05416 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gef65d06d104b737698472ec2e863a495"></a><!-- doxytag: member="variable.c::fc_getNumGlobalSeqVariable" ref="gef65d06d104b737698472ec2e863a495" args="(FC_Dataset dataset, int *numSeqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getNumGlobalSeqVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of global sequence variables in a dataset. 
<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 WSD created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03742">3742</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00831">fc_printDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03745"></a>03745   {
<a name="l03746"></a>03746   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l03747"></a>03747   
<a name="l03748"></a>03748   <span class="comment">// set up defaults</span>
<a name="l03749"></a>03749   <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l03750"></a>03750     *numSeqVar = -1;
<a name="l03751"></a>03751   
<a name="l03752"></a>03752   <span class="comment">// check input</span>
<a name="l03753"></a>03753   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l03754"></a>03754   <span class="keywordflow">if</span> (dsSlot == NULL || numSeqVar == NULL) {
<a name="l03755"></a>03755     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03756"></a>03756     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03757"></a>03757   }
<a name="l03758"></a>03758   
<a name="l03759"></a>03759   <span class="comment">// log message</span>
<a name="l03760"></a>03760   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variables for dataset '%s'"</span>,
<a name="l03761"></a>03761                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03762"></a>03762 
<a name="l03763"></a>03763   <span class="comment">// get num seq variable</span>
<a name="l03764"></a>03764   *numSeqVar = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>;
<a name="l03765"></a>03765     
<a name="l03766"></a>03766   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03767"></a>03767 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g522738705c0e998327bd392d8f5d66a4"></a><!-- doxytag: member="variable.c::fc_getNumGlobalVariable" ref="g522738705c0e998327bd392d8f5d66a4" args="(FC_Dataset dataset, int *numVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getNumGlobalVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of global variables in a dataset. 
<p>
<b>Modifications:</b> <ul>
<li>9/19/06 WSD created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numVar</em>&nbsp;</td><td>
output - number of variables </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03708">3708</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00831">fc_printDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03711"></a>03711   {
<a name="l03712"></a>03712   <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a>* dsSlot;
<a name="l03713"></a>03713   
<a name="l03714"></a>03714   <span class="comment">// set up defaults</span>
<a name="l03715"></a>03715   <span class="keywordflow">if</span> (numVar != NULL)
<a name="l03716"></a>03716     *numVar = -1;
<a name="l03717"></a>03717   
<a name="l03718"></a>03718   <span class="comment">// check input</span>
<a name="l03719"></a>03719   dsSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(dataset);
<a name="l03720"></a>03720   <span class="keywordflow">if</span> (dsSlot == NULL || numVar == NULL) {
<a name="l03721"></a>03721     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03722"></a>03722     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03723"></a>03723   }
<a name="l03724"></a>03724   
<a name="l03725"></a>03725   <span class="comment">// log message</span>
<a name="l03726"></a>03726   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of global variables for dataset '%s'"</span>,
<a name="l03727"></a>03727                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03728"></a>03728 
<a name="l03729"></a>03729   <span class="comment">// get num variable</span>
<a name="l03730"></a>03730   *numVar = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#65ca5552ad3b5fae4e8649bc9585a97e">numBasicVar</a>;
<a name="l03731"></a>03731   
<a name="l03732"></a>03732   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03733"></a>03733 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gcaaf2b5a1e4349487ea32e27aa09dbc8"></a><!-- doxytag: member="variable.c::fc_getNumSeqVariable" ref="gcaaf2b5a1e4349487ea32e27aa09dbc8" args="(FC_Mesh mesh, int *numSeqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getNumSeqVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of sequence variables in a mesh. 
<p>
<b>Modifications:</b> <ul>
<li>9/28/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03810">3810</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00189">_FC_MeshSlot::numSeqVar</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l04004">fc_printMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03813"></a>03813   {
<a name="l03814"></a>03814   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03815"></a>03815   
<a name="l03816"></a>03816   <span class="comment">// set up defaults</span>
<a name="l03817"></a>03817   <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l03818"></a>03818     *numSeqVar = -1;
<a name="l03819"></a>03819   
<a name="l03820"></a>03820   <span class="comment">// check input</span>
<a name="l03821"></a>03821   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03822"></a>03822   <span class="keywordflow">if</span> (meshSlot == NULL || numSeqVar == NULL) {
<a name="l03823"></a>03823     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03824"></a>03824     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03825"></a>03825   }
<a name="l03826"></a>03826   
<a name="l03827"></a>03827   <span class="comment">// log message</span>
<a name="l03828"></a>03828   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variables for mesh '%s'"</span>,
<a name="l03829"></a>03829                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03830"></a>03830 
<a name="l03831"></a>03831   <span class="comment">// get num seq variable</span>
<a name="l03832"></a>03832   *numSeqVar = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>;
<a name="l03833"></a>03833     
<a name="l03834"></a>03834   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03835"></a>03835 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g34fd68c4a0f71ff43da35c9cdc37c1d2"></a><!-- doxytag: member="variable.c::fc_getNumVariable" ref="g34fd68c4a0f71ff43da35c9cdc37c1d2" args="(FC_Mesh mesh, int *numVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getNumVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of variables in a mesh. 
<p>
<b>Modifications:</b> <ul>
<li>9/28/04 WSK created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numVar</em>&nbsp;</td><td>
output - number of variables </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03776">3776</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numBasicVar</a>.</p>

<p>Referenced by <a class="el" href="mesh_8c-source.html#l04004">fc_printMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03779"></a>03779   {
<a name="l03780"></a>03780   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03781"></a>03781   
<a name="l03782"></a>03782   <span class="comment">// set up defaults</span>
<a name="l03783"></a>03783   <span class="keywordflow">if</span> (numVar != NULL)
<a name="l03784"></a>03784     *numVar = -1;
<a name="l03785"></a>03785   
<a name="l03786"></a>03786   <span class="comment">// check input</span>
<a name="l03787"></a>03787   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03788"></a>03788   <span class="keywordflow">if</span> (meshSlot == NULL || numVar == NULL) {
<a name="l03789"></a>03789     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03790"></a>03790     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03791"></a>03791   }
<a name="l03792"></a>03792   
<a name="l03793"></a>03793   <span class="comment">// log message</span>
<a name="l03794"></a>03794   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of variables for mesh '%s'"</span>,
<a name="l03795"></a>03795                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03796"></a>03796 
<a name="l03797"></a>03797   <span class="comment">// get num variable</span>
<a name="l03798"></a>03798   *numVar = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>;
<a name="l03799"></a>03799   
<a name="l03800"></a>03800   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03801"></a>03801 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g9022a4933230e252076467a05f101a68"></a><!-- doxytag: member="variable.c::fc_getOrGenerateUniqueSeqVariableByName" ref="g9022a4933230e252076467a05f101a68" args="(FC_Mesh mesh, char *varname, int *numStep, FC_Variable **variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getOrGenerateUniqueSeqVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a unique seq var if it exists, otherwise generate it from components if possible. 
<p>
<b>Description:</b> <p>
Gets a unique seq var if it exists, otherwise generate it from components if possible.<p>
Warning: If the unique seq var is generated from components, the original components are deleted.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000110">Todo:</a></b></dt><dd><ul>
<li>should send back a flag if it was generated or not (that may make a difference if you go to release it)</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>10/15/2007 ACG created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
out - num step </td></tr>
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04695">4695</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05062">fc_deleteSeqVariable()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04392">fc_getSeqVariableByName()</a>, <a class="el" href="variable_8c-source.html#l04519">fc_getSeqVariableComponentsByName()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l03299">fc_mergeComponentSeqVariables()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="varNormalize_8c-source.html#l00116">createStressOrPressureVar()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, and <a class="el" href="analyzeSpotWelds_8c-source.html#l00135">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04700"></a>04700   {
<a name="l04701"></a>04701   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l04702"></a>04702   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>** returnVars;
<a name="l04703"></a>04703   <span class="keywordtype">int</span> numReturnVars, *numReturnSteps;
<a name="l04704"></a>04704   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mtype;
<a name="l04705"></a>04705   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *generatedVar;
<a name="l04706"></a>04706 
<a name="l04707"></a>04707   <span class="keywordtype">int</span> i;
<a name="l04708"></a>04708   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l04709"></a>04709   
<a name="l04710"></a>04710   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l04711"></a>04711   <span class="keywordflow">if</span> (variable)
<a name="l04712"></a>04712     *variable = NULL;
<a name="l04713"></a>04713   <span class="keywordflow">if</span> (numStep)
<a name="l04714"></a>04714     *numStep = -1;
<a name="l04715"></a>04715   
<a name="l04716"></a>04716   <span class="comment">// check input</span>
<a name="l04717"></a>04717   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l04718"></a>04718   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variable || !numStep){
<a name="l04719"></a>04719     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04720"></a>04720     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04721"></a>04721   }
<a name="l04722"></a>04722   
<a name="l04723"></a>04723   <span class="comment">// log message</span>
<a name="l04724"></a>04724   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting unique seq variable by name '%s'"</span>, varname);
<a name="l04725"></a>04725   rc = <a class="code" href="group__Variable.html#g23372bf294117d6761d750446516f0d3" title="Get sequence variables of a given name from the mesh.">fc_getSeqVariableByName</a>(mesh, varname, &amp;numReturnVars,
<a name="l04726"></a>04726                       &amp;numReturnSteps, &amp;returnVars);
<a name="l04727"></a>04727   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04728"></a>04728     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"can't get seq variable by name"</span>);
<a name="l04729"></a>04729     <span class="keywordflow">return</span> rc;
<a name="l04730"></a>04730   }    
<a name="l04731"></a>04731 
<a name="l04732"></a>04732   <span class="keywordflow">if</span> (numReturnVars &gt; 1){
<a name="l04733"></a>04733     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"More than 1 seq variable named '%s'"</span>,varname);
<a name="l04734"></a>04734     free(returnVars);
<a name="l04735"></a>04735     free(numReturnSteps);
<a name="l04736"></a>04736     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04737"></a>04737   }
<a name="l04738"></a>04738 
<a name="l04739"></a>04739   <span class="keywordflow">if</span> (numReturnVars == 1){
<a name="l04740"></a>04740     *variable = returnVars[0];
<a name="l04741"></a>04741     *numStep = numReturnSteps[0];
<a name="l04742"></a>04742     free(numReturnSteps);
<a name="l04743"></a>04743     free(returnVars);
<a name="l04744"></a>04744     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04745"></a>04745   }
<a name="l04746"></a>04746 
<a name="l04747"></a>04747   <span class="comment">//try to make it from components</span>
<a name="l04748"></a>04748   rc = <a class="code" href="group__Variable.html#gccebd457989504aef5bb958ab09c199c" title="Get seq variables that can be components from the mesh.">fc_getSeqVariableComponentsByName</a>(mesh, varname, &amp;mtype,
<a name="l04749"></a>04749                           &amp;numReturnVars, &amp;numReturnSteps,
<a name="l04750"></a>04750                           &amp;returnVars);
<a name="l04751"></a>04751   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04752"></a>04752     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"can't get seq variable components by name '%s'"</span>,varname);
<a name="l04753"></a>04753     <span class="keywordflow">return</span> rc;
<a name="l04754"></a>04754   }
<a name="l04755"></a>04755 
<a name="l04756"></a>04756   <span class="keywordflow">if</span> (numReturnVars == 0){
<a name="l04757"></a>04757     <span class="comment">//no components</span>
<a name="l04758"></a>04758     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04759"></a>04759   }
<a name="l04760"></a>04760 
<a name="l04761"></a>04761   rc = <a class="code" href="group__Variable.html#ga707eadb0047cdcde7186143d6d75edf" title="Creates a new multicomponent seq variable from a group of scalars.">fc_mergeComponentSeqVariables</a>(numReturnVars,
<a name="l04762"></a>04762                          numReturnSteps[0],
<a name="l04763"></a>04763                          returnVars, varname,
<a name="l04764"></a>04764                          mtype, &amp;generatedVar);
<a name="l04765"></a>04765   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04766"></a>04766     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"can't merge component variables"</span>);
<a name="l04767"></a>04767     free(numReturnSteps);
<a name="l04768"></a>04768     free(returnVars);
<a name="l04769"></a>04769     <span class="keywordflow">return</span> rc;
<a name="l04770"></a>04770   }
<a name="l04771"></a>04771 
<a name="l04772"></a>04772   <span class="comment">//now kill off the component vars</span>
<a name="l04773"></a>04773   <span class="keywordflow">for</span> (i = 0; i &lt; numReturnVars; i++){
<a name="l04774"></a>04774     rc = <a class="code" href="group__Variable.html#gef5ebe119abe1d217a216f0faad0e667" title="Delete a sequence variable.">fc_deleteSeqVariable</a>(numReturnSteps[i],returnVars[i]);
<a name="l04775"></a>04775     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04776"></a>04776       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"cannot delete component variable"</span>);
<a name="l04777"></a>04777       <span class="keywordflow">return</span> rc;
<a name="l04778"></a>04778     }
<a name="l04779"></a>04779     free(returnVars[i]);
<a name="l04780"></a>04780   }
<a name="l04781"></a>04781   free(returnVars);
<a name="l04782"></a>04782 
<a name="l04783"></a>04783   *variable = generatedVar;
<a name="l04784"></a>04784   *numStep = numReturnSteps[0];
<a name="l04785"></a>04785   free(numReturnSteps);
<a name="l04786"></a>04786   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04787"></a>04787 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g0fa74bad632cca78316af6f11ef7cf48"></a><!-- doxytag: member="variable.c::fc_getOrGenerateUniqueVariableByName" ref="g0fa74bad632cca78316af6f11ef7cf48" args="(FC_Mesh mesh, char *varname, FC_Variable *variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getOrGenerateUniqueVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a unique var if it exists, otherwise generate it from components if possible. 
<p>
<b>Description:</b> <p>
Gets a unique var if it exists, otherwise generate it from components if possible.<p>
Warning: If the unique var is generated from components, the original components are deleted.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000109">Todo:</a></b></dt><dd><ul>
<li>should send back a flag if it was generated or not (that may make a difference if you go to release it)</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>10/15/2007 ACG created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04286">4286</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l04980">fc_deleteVariable()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04052">fc_getVariableByName()</a>, <a class="el" href="variable_8c-source.html#l04139">fc_getVariableComponentsByName()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="edgeStats_8c-source.html#l00105">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04290"></a>04290   {
<a name="l04291"></a>04291   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l04292"></a>04292   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>* returnVars;
<a name="l04293"></a>04293   <span class="keywordtype">int</span> numReturnVars;
<a name="l04294"></a>04294   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mtype;
<a name="l04295"></a>04295   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> generatedVar;
<a name="l04296"></a>04296 
<a name="l04297"></a>04297   <span class="keywordtype">int</span> i;
<a name="l04298"></a>04298   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l04299"></a>04299   
<a name="l04300"></a>04300   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l04301"></a>04301   <span class="keywordflow">if</span> (variable)
<a name="l04302"></a>04302     *variable = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l04303"></a>04303   
<a name="l04304"></a>04304   <span class="comment">// check input</span>
<a name="l04305"></a>04305   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l04306"></a>04306   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variable){
<a name="l04307"></a>04307     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04308"></a>04308     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04309"></a>04309   }
<a name="l04310"></a>04310   
<a name="l04311"></a>04311   <span class="comment">// log message</span>
<a name="l04312"></a>04312   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting unique variable by name '%s'"</span>, varname);
<a name="l04313"></a>04313   rc = <a class="code" href="group__Variable.html#g360da27d39e62be3c900da302a754e95" title="Get variables from the mesh.">fc_getVariableByName</a>(mesh, varname, &amp;numReturnVars,
<a name="l04314"></a>04314                    &amp;returnVars);
<a name="l04315"></a>04315   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l04316"></a>04316     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"can't get variable by name"</span>);
<a name="l04317"></a>04317     <span class="keywordflow">return</span> rc;
<a name="l04318"></a>04318   }    
<a name="l04319"></a>04319 
<a name="l04320"></a>04320   <span class="keywordflow">if</span> (numReturnVars &gt; 1){
<a name="l04321"></a>04321     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"More than 1 variable named '%s'"</span>,varname);
<a name="l04322"></a>04322     free(returnVars);
<a name="l04323"></a>04323     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04324"></a>04324   }
<a name="l04325"></a>04325 
<a name="l04326"></a>04326   <span class="keywordflow">if</span> (numReturnVars == 1){
<a name="l04327"></a>04327     *variable = returnVars[0];
<a name="l04328"></a>04328     free(returnVars);
<a name="l04329"></a>04329     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04330"></a>04330   }
<a name="l04331"></a>04331 
<a name="l04332"></a>04332   <span class="comment">//try to make it from components</span>
<a name="l04333"></a>04333   rc = <a class="code" href="group__Variable.html#g3f8d4d3fd4b5073829290d4b347350b5" title="Get variables that can be components from the mesh.">fc_getVariableComponentsByName</a>(mesh, varname, &amp;mtype,
<a name="l04334"></a>04334                         &amp;numReturnVars, &amp;returnVars);
<a name="l04335"></a>04335   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04336"></a>04336     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"can't get variable components by name '%s'"</span>,varname);
<a name="l04337"></a>04337     <span class="keywordflow">return</span> rc;
<a name="l04338"></a>04338   }
<a name="l04339"></a>04339 
<a name="l04340"></a>04340   <span class="keywordflow">if</span> (numReturnVars == 0){
<a name="l04341"></a>04341     <span class="comment">//no components</span>
<a name="l04342"></a>04342     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04343"></a>04343   }
<a name="l04344"></a>04344 
<a name="l04345"></a>04345 
<a name="l04346"></a>04346   rc = <a class="code" href="group__Variable.html#gc2336adac6d8ed9ae68ae43536d340f5" title="Creates a new multicomponent variable from a group of scalars.">fc_mergeComponentVariables</a>(numReturnVars,
<a name="l04347"></a>04347                       returnVars, varname,
<a name="l04348"></a>04348                       mtype, &amp;generatedVar);
<a name="l04349"></a>04349   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04350"></a>04350     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"can't merge component variables"</span>);
<a name="l04351"></a>04351     free(returnVars);
<a name="l04352"></a>04352     <span class="keywordflow">return</span> rc;
<a name="l04353"></a>04353   }
<a name="l04354"></a>04354 
<a name="l04355"></a>04355   <span class="comment">//now kill off the component vars</span>
<a name="l04356"></a>04356   <span class="keywordflow">for</span> (i = 0; i &lt; numReturnVars; i++){
<a name="l04357"></a>04357     rc = <a class="code" href="group__Variable.html#g1de53216125d0074933ecf6006f1796a" title="Delete a variable.">fc_deleteVariable</a>(returnVars[i]);
<a name="l04358"></a>04358     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04359"></a>04359       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"cannot delete component variable"</span>);
<a name="l04360"></a>04360       <span class="keywordflow">return</span> rc;
<a name="l04361"></a>04361     }
<a name="l04362"></a>04362   }
<a name="l04363"></a>04363   free(returnVars);
<a name="l04364"></a>04364 
<a name="l04365"></a>04365 
<a name="l04366"></a>04366   *variable = generatedVar;
<a name="l04367"></a>04367   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04368"></a>04368 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g314a992ec5ba07d7075f1172b13ef166"></a><!-- doxytag: member="variable.c::fc_getSequenceFromSeqVariable" ref="g314a992ec5ba07d7075f1172b13ef166" args="(int numStep, FC_Variable *seqVar, FC_Sequence *sequence)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getSequenceFromSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a> *&nbsp;</td>
          <td class="paramname"> <em>sequence</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the parent sequence of a sequence variable. 
<p>
<b>Modifications:</b> <ul>
<li>09/23/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in sequence variable </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - sequence variable (array of vars) </td></tr>
<tr><td valign="top"><em>sequence</em>&nbsp;</td><td>
output - sequence handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05317">5317</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="base_8c-source.html#l00769">FC_NULL_SEQUENCE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>.</p>

<p>Referenced by <a class="el" href="series_8c-source.html#l00122">_fc_makeNewSeqVar()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="varNormalize_8c-source.html#l00116">createStressOrPressureVar()</a>, <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="varmath_8c-source.html#l01394">fc_constOperatorSeqVar()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l03056">fc_createComponentSeqVariables()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l05888">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l03299">fc_mergeComponentSeqVariables()</a>, <a class="el" href="varmath_8c-source.html#l00655">fc_operatorSeqVar()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, <a class="el" href="varmath_8c-source.html#l00979">fc_seqConstOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02640">fc_seqVarBinaryFunctionConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02414">fc_seqVarBinaryFunctionSeqConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02546">fc_seqVarBinaryFunctionSeqVarConst()</a>, <a class="el" href="varmath_8c-source.html#l02284">fc_seqVarBinaryFunctionSeqVarSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l02179">fc_seqVarBinaryFunctionSeqVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01296">fc_seqVarOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00858">fc_seqVarOperatorSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l00747">fc_seqVarOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l02094">fc_seqVarUnaryFunction()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, and <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05321"></a>05321   {
<a name="l05322"></a>05322   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05323"></a>05323   
<a name="l05324"></a>05324   <span class="comment">// set default value</span>
<a name="l05325"></a>05325   <span class="keywordflow">if</span> (sequence != NULL)
<a name="l05326"></a>05326     *sequence = <a class="code" href="group__Handles.html#g0a14f0b308f914048dba4a54e6dc36ea" title="Null (default) sequence handle.">FC_NULL_SEQUENCE</a>;
<a name="l05327"></a>05327   
<a name="l05328"></a>05328   <span class="comment">// check input</span>
<a name="l05329"></a>05329   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(numStep, seqVar) || sequence == NULL) {
<a name="l05330"></a>05330     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05331"></a>05331     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05332"></a>05332   }
<a name="l05333"></a>05333   
<a name="l05334"></a>05334   <span class="comment">// log message</span>
<a name="l05335"></a>05335   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(seqVar[0]);
<a name="l05336"></a>05336   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence from seq variable '%s'"</span>, 
<a name="l05337"></a>05337                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05338"></a>05338   
<a name="l05339"></a>05339   <span class="comment">// return requested value</span>
<a name="l05340"></a>05340   *sequence = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#bf719e972f05ce7ba74975fcdbccfd1a">sequence</a>;
<a name="l05341"></a>05341   
<a name="l05342"></a>05342   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05343"></a>05343 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g23372bf294117d6761d750446516f0d3"></a><!-- doxytag: member="variable.c::fc_getSeqVariableByName" ref="g23372bf294117d6761d750446516f0d3" args="(FC_Mesh mesh, char *varName, int *numSeqVar, int **numStepPerVar, FC_Variable ***seqVariables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getSeqVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepPerVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>seqVariables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get sequence variables of a given name from the mesh. 
<p>
<b>Description:</b> <p>
Returns an array of seq variables (array of arrays of variables) as well as an array of the number of steps per sequence variable. The use is responsible for freeing all returned arrays. (SeqVars is a 2D array, so to free: for (i = 0; i &lt; numSeq var) { free(seqVars[i])); } )<p>
<b>Modifications:</b> <ul>
<li>2003-APR-21 W Koegler Created.</li><li>12/15/03 RM, added checking if seq variable with the specified name was found</li><li>10/15/04 WSK, changed to not return sequence handles</li><li>09/25/06 ACG returns array</li><li>10/14/07 ACG removed hack </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - seq variable name </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
<tr><td valign="top"><em>numStepPerVar</em>&nbsp;</td><td>
output - array with number of steps for each sequence variable </td></tr>
<tr><td valign="top"><em>seqVariables</em>&nbsp;</td><td>
output - array of sequence variables (each sequence variable is array of numStep variables </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04392">4392</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00189">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00190">_FC_MeshSlot::numStepPerSeqVar</a>, and <a class="el" href="meshP_8h-source.html#l00191">_FC_MeshSlot::seqVarIDs</a>.</p>

<p>Referenced by <a class="el" href="lib__skeleton_8c-source.html#l00624">doesSeqVarExist()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l04695">fc_getOrGenerateUniqueSeqVariableByName()</a>, <a class="el" href="variable_8c-source.html#l04519">fc_getSeqVariableComponentsByName()</a>, and <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04401"></a>04401   {
<a name="l04402"></a>04402   <span class="keywordtype">int</span> i, j;
<a name="l04403"></a>04403   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a> *meshSlot;
<a name="l04404"></a>04404   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a> *varSlot;
<a name="l04405"></a>04405 
<a name="l04406"></a>04406   <span class="keywordtype">int</span> numStep;
<a name="l04407"></a>04407   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *seqvar;
<a name="l04408"></a>04408   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> **lmatch = NULL;
<a name="l04409"></a>04409   <span class="keywordtype">int</span> *lstepmatch = NULL;
<a name="l04410"></a>04410   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l04411"></a>04411   
<a name="l04412"></a>04412   <span class="comment">// default return values</span>
<a name="l04413"></a>04413  <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l04414"></a>04414     *numSeqVar = -1;
<a name="l04415"></a>04415   <span class="keywordflow">if</span> (numStepPerVar != NULL)
<a name="l04416"></a>04416     *numStepPerVar = NULL;
<a name="l04417"></a>04417   <span class="keywordflow">if</span> (seqVariables != NULL)
<a name="l04418"></a>04418     *seqVariables = NULL;
<a name="l04419"></a>04419 
<a name="l04420"></a>04420     <span class="comment">// check input</span>
<a name="l04421"></a>04421   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l04422"></a>04422   <span class="keywordflow">if</span> (meshSlot == NULL || !varName || numSeqVar == NULL || 
<a name="l04423"></a>04423       numStepPerVar == NULL || seqVariables == NULL) {
<a name="l04424"></a>04424     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04425"></a>04425     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04426"></a>04426   }
<a name="l04427"></a>04427   
<a name="l04428"></a>04428   <span class="comment">// log message</span>
<a name="l04429"></a>04429   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variable '%s'"</span>, varName);
<a name="l04430"></a>04430 
<a name="l04431"></a>04431   numlmatch = 0;
<a name="l04432"></a>04432   maxnumlmatch = 0;
<a name="l04433"></a>04433 
<a name="l04434"></a>04434   
<a name="l04435"></a>04435   <span class="comment">// look for varName in this mesh's seq var list</span>
<a name="l04436"></a>04436   <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>; i++) {
<a name="l04437"></a>04437     varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e9d6f6c85dc084548c919597d128ff75">seqVarIDs</a>[i][0]);
<a name="l04438"></a>04438     <span class="keywordflow">if</span> (!strcmp(varName, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>)) {
<a name="l04439"></a>04439       numStep = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e17e969e56b697232591e53ba6c55ba4">numStepPerSeqVar</a>[i];
<a name="l04440"></a>04440       seqvar = malloc((numStep)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l04441"></a>04441       <span class="keywordflow">if</span> (seqvar == NULL) {
<a name="l04442"></a>04442      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l04443"></a>04443      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04444"></a>04444       }
<a name="l04445"></a>04445       <span class="keywordflow">for</span> (j = 0; j &lt; numStep; j++) {
<a name="l04446"></a>04446      varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e9d6f6c85dc084548c919597d128ff75">seqVarIDs</a>[i][j]);
<a name="l04447"></a>04447      <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(seqvar[j], varSlot);
<a name="l04448"></a>04448       }
<a name="l04449"></a>04449 
<a name="l04450"></a>04450       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l04451"></a>04451      lmatch = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>**)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*));
<a name="l04452"></a>04452      lstepmatch = (<span class="keywordtype">int</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l04453"></a>04453      <span class="keywordflow">if</span> (lmatch == NULL || lstepmatch == NULL){
<a name="l04454"></a>04454        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l04455"></a>04455        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04456"></a>04456      }
<a name="l04457"></a>04457      numlmatch = 1;
<a name="l04458"></a>04458      maxnumlmatch = 1;
<a name="l04459"></a>04459      lmatch[0] = seqvar;
<a name="l04460"></a>04460      lstepmatch[0] = numStep;
<a name="l04461"></a>04461       }<span class="keywordflow">else</span>{
<a name="l04462"></a>04462      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l04463"></a>04463        <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> **temp;
<a name="l04464"></a>04464        <span class="keywordtype">int</span> *tempstep;
<a name="l04465"></a>04465        temp = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>**)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*));
<a name="l04466"></a>04466        tempstep = (<span class="keywordtype">int</span>*)realloc(lstepmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*));
<a name="l04467"></a>04467        <span class="keywordflow">if</span> (temp == NULL || tempstep == NULL){
<a name="l04468"></a>04468          <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l04469"></a>04469          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04470"></a>04470        }
<a name="l04471"></a>04471        maxnumlmatch*=2;
<a name="l04472"></a>04472        lmatch = temp;
<a name="l04473"></a>04473        lstepmatch = tempstep;
<a name="l04474"></a>04474      }
<a name="l04475"></a>04475      lmatch[numlmatch] = seqvar;
<a name="l04476"></a>04476      lstepmatch[numlmatch] = numStep;
<a name="l04477"></a>04477      numlmatch++;
<a name="l04478"></a>04478       }
<a name="l04479"></a>04479     }
<a name="l04480"></a>04480   }
<a name="l04481"></a>04481 
<a name="l04482"></a>04482   <span class="keywordflow">if</span> (numlmatch){
<a name="l04483"></a>04483     *numSeqVar = numlmatch;
<a name="l04484"></a>04484     *numStepPerVar = lstepmatch;
<a name="l04485"></a>04485     *seqVariables = lmatch;
<a name="l04486"></a>04486     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04487"></a>04487   }
<a name="l04488"></a>04488 
<a name="l04489"></a>04489   <span class="comment">//no matches</span>
<a name="l04490"></a>04490   *numSeqVar = 0;
<a name="l04491"></a>04491   *numStepPerVar = NULL;
<a name="l04492"></a>04492   *seqVariables = NULL;
<a name="l04493"></a>04493   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04494"></a>04494 
<a name="l04495"></a>04495 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gccebd457989504aef5bb958ab09c199c"></a><!-- doxytag: member="variable.c::fc_getSeqVariableComponentsByName" ref="gccebd457989504aef5bb958ab09c199c" args="(FC_Mesh mesh, char *varname, FC_MathType *type, int *numVariables, int **numStepsPerVariable, FC_Variable ***variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getSeqVariableComponentsByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVariables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepsPerVariable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get seq variables that can be components from the mesh. 
<p>
<b>Description:</b> <p>
Returns seq variables on the mesh with the specified base name and _x,_y,_z and similiar extensions. This is meant to be used to build an array of components split with the exodus component naming convention. This function supports a few common naming extensions (eg, xyz, xy, c0c1c2, tuvw) and tries a few spacing options (eg, ending in _x, __x, or just x).<p>
<b>Modifications:</b> <ul>
<li>10/12/2007 ACG created</li><li>12/11/2007 CDU added basic guessing logic that tries different names</li><li>12/12/2007 CDU Moved guessing logic to external function </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>type</em>&nbsp;</td><td>
output - math type </td></tr>
<tr><td valign="top"><em>numVariables</em>&nbsp;</td><td>
output - num matching variables </td></tr>
<tr><td valign="top"><em>numStepsPerVariable</em>&nbsp;</td><td>
output - numSteps per variable </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - variable handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04519">4519</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06722">_fc_getNextComponentExtension()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04392">fc_getSeqVariableByName()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8h-source.html#l00169">FC_MT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00171">FC_MT_VECTOR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="variable_8c-source.html#l04695">fc_getOrGenerateUniqueSeqVariableByName()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04526"></a>04526   {  
<a name="l04527"></a>04527   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l04528"></a>04528   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>** returnVars;
<a name="l04529"></a>04529 
<a name="l04530"></a>04530   <span class="keywordtype">int</span> *nSteps;
<a name="l04531"></a>04531   <span class="keywordtype">char</span>* compName;
<a name="l04532"></a>04532 
<a name="l04533"></a>04533 
<a name="l04534"></a>04534   <span class="keywordtype">int</span>  j;
<a name="l04535"></a>04535   <span class="keywordtype">int</span> numComp;
<a name="l04536"></a>04536   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lastCompInGuess;
<a name="l04537"></a>04537   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lastCompInSearch;
<a name="l04538"></a>04538   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxExtLen;
<a name="l04539"></a>04539   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxComp;
<a name="l04540"></a>04540   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> varNameLen;
<a name="l04541"></a>04541   
<a name="l04542"></a>04542   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> extState;
<a name="l04543"></a>04543   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l04544"></a>04544   
<a name="l04545"></a>04545   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l04546"></a>04546   <span class="keywordflow">if</span> (type)
<a name="l04547"></a>04547     *type = <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb2064ff077a965e5351bcfafd26ac08236f">FC_MT_UNKNOWN</a>;
<a name="l04548"></a>04548   <span class="keywordflow">if</span> (numVariables)
<a name="l04549"></a>04549     *numVariables = -1;
<a name="l04550"></a>04550   <span class="keywordflow">if</span> (variables)
<a name="l04551"></a>04551     *variables = NULL;
<a name="l04552"></a>04552   <span class="keywordflow">if</span> (numStepsPerVariable)
<a name="l04553"></a>04553     *numStepsPerVariable = NULL;
<a name="l04554"></a>04554   
<a name="l04555"></a>04555   <span class="comment">// check input</span>
<a name="l04556"></a>04556   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l04557"></a>04557   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variables || !numVariables
<a name="l04558"></a>04558       || ! numStepsPerVariable || !type){
<a name="l04559"></a>04559     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04560"></a>04560     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04561"></a>04561   }
<a name="l04562"></a>04562   
<a name="l04563"></a>04563   <span class="comment">// log message</span>
<a name="l04564"></a>04564   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variable components '%s'"</span>, varname);
<a name="l04565"></a>04565 
<a name="l04566"></a>04566   <span class="comment">//First, query component function to see what the guesses look like</span>
<a name="l04567"></a>04567   rc = <a class="code" href="group__PrivateVariable.html#geb3de0f2a657ba876619662660c404e9" title="Get a common component extension for combining vars.">_fc_getNextComponentExtension</a>(NULL, &amp;maxExtLen, &amp;maxComp, NULL);
<a name="l04568"></a>04568   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04569"></a>04569     <span class="keywordflow">return</span> rc;
<a name="l04570"></a>04570   }
<a name="l04571"></a>04571 
<a name="l04572"></a>04572 
<a name="l04573"></a>04573   <span class="comment">//Allocate working space for temporary data</span>
<a name="l04574"></a>04574   compName   = (<span class="keywordtype">char</span> *)        malloc(strlen(varname)+maxExtLen);
<a name="l04575"></a>04575   returnVars = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> **)malloc(maxComp*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*));
<a name="l04576"></a>04576   nSteps     = (<span class="keywordtype">int</span> *)         malloc(maxComp*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l04577"></a>04577   <span class="keywordflow">if</span> (!compName || !returnVars || ! nSteps){
<a name="l04578"></a>04578     free(compName); free(returnVars); free(nSteps);
<a name="l04579"></a>04579     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04580"></a>04580   }
<a name="l04581"></a>04581   varNameLen = strlen(varname);
<a name="l04582"></a>04582   strcpy(compName, varname); <span class="comment">//search name always starts with varname</span>
<a name="l04583"></a>04583   
<a name="l04584"></a>04584 
<a name="l04585"></a>04585   <span class="comment">//Keep asking for extensions until we run out of choices</span>
<a name="l04586"></a>04586   <span class="keywordflow">for</span>(numComp=0, extState=0, lastCompInGuess=0, lastCompInSearch=0; !lastCompInSearch; ){
<a name="l04587"></a>04587     <span class="keywordtype">int</span> numVar;
<a name="l04588"></a>04588     <span class="keywordtype">int</span>* numStep;
<a name="l04589"></a>04589     <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>** tempVar;     
<a name="l04590"></a>04590 
<a name="l04591"></a>04591     rc = <a class="code" href="group__PrivateVariable.html#geb3de0f2a657ba876619662660c404e9" title="Get a common component extension for combining vars.">_fc_getNextComponentExtension</a>(&amp;extState,  
<a name="l04592"></a>04592                            &amp;lastCompInGuess, &amp;lastCompInSearch, 
<a name="l04593"></a>04593                            &amp;compName[varNameLen]);
<a name="l04594"></a>04594     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04595"></a>04595       free(compName); free(returnVars); free(nSteps);
<a name="l04596"></a>04596       <span class="keywordflow">return</span> rc;
<a name="l04597"></a>04597     }
<a name="l04598"></a>04598     <span class="comment">//printf("Checking '%s'\n",compName);</span>
<a name="l04599"></a>04599     
<a name="l04600"></a>04600     <span class="comment">//Search for this component</span>
<a name="l04601"></a>04601     rc = <a class="code" href="group__Variable.html#g23372bf294117d6761d750446516f0d3" title="Get sequence variables of a given name from the mesh.">fc_getSeqVariableByName</a>(mesh, compName, &amp;numVar, &amp;numStep, &amp;tempVar);
<a name="l04602"></a>04602     <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04603"></a>04603       <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l04604"></a>04604      free(returnVars[j]);       
<a name="l04605"></a>04605       free(compName); free(nSteps); free(returnVars);
<a name="l04606"></a>04606       <span class="keywordflow">return</span> rc;
<a name="l04607"></a>04607     }
<a name="l04608"></a>04608 
<a name="l04609"></a>04609     <span class="keywordflow">if</span> (numVar &gt; 1){
<a name="l04610"></a>04610       <span class="comment">//printf("found too many %d\n",i);</span>
<a name="l04611"></a>04611       <span class="keywordflow">for</span> (j = 0; j &lt; numVar; j++)
<a name="l04612"></a>04612      free(tempVar[j]);   
<a name="l04613"></a>04613       free(tempVar);  free(numStep);
<a name="l04614"></a>04614       <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l04615"></a>04615      free(returnVars[j]);      
<a name="l04616"></a>04616       free(compName); free(returnVars); free(nSteps);
<a name="l04617"></a>04617       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04618"></a>04618 
<a name="l04619"></a>04619     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numVar == 1 ){
<a name="l04620"></a>04620       <span class="comment">//printf("found %d\n",numComp);</span>
<a name="l04621"></a>04621       returnVars[numComp] = tempVar[0];
<a name="l04622"></a>04622       nSteps[numComp] = numStep[0];
<a name="l04623"></a>04623       free(tempVar);
<a name="l04624"></a>04624       free(numStep);
<a name="l04625"></a>04625       numComp++;
<a name="l04626"></a>04626 
<a name="l04627"></a>04627       <span class="keywordflow">if</span>(lastCompInGuess){
<a name="l04628"></a>04628      <span class="comment">//We hit on all components, stop searching, trim data down to size</span>
<a name="l04629"></a>04629      *variables =  (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> **)realloc(returnVars, numComp*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> **));
<a name="l04630"></a>04630      *numStepsPerVariable = (<span class="keywordtype">int</span> *)realloc(nSteps,     numComp*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l04631"></a>04631      free(compName);
<a name="l04632"></a>04632      <span class="keywordflow">if</span>(!(*variables)||!(*numStepsPerVariable)){
<a name="l04633"></a>04633        <span class="keywordflow">if</span>(!(*variables))           free(returnVars);
<a name="l04634"></a>04634        <span class="keywordflow">else</span>                        free(*variables);
<a name="l04635"></a>04635        <span class="keywordflow">if</span>(!(*numStepsPerVariable)) free(nSteps);
<a name="l04636"></a>04636        <span class="keywordflow">else</span>                        free(*numStepsPerVariable);
<a name="l04637"></a>04637        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04638"></a>04638      }
<a name="l04639"></a>04639 
<a name="l04640"></a>04640      *type = <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb207f48fe9fd9efb7bc772bbb41106e217f">FC_MT_VECTOR</a>;
<a name="l04641"></a>04641      *numVariables = numComp;
<a name="l04642"></a>04642      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04643"></a>04643 
<a name="l04644"></a>04644       }
<a name="l04645"></a>04645 
<a name="l04646"></a>04646     } <span class="keywordflow">else</span> {
<a name="l04647"></a>04647       <span class="comment">//Didn't find, bail out</span>
<a name="l04648"></a>04648       <span class="keywordflow">for</span>(j=0; j&lt;numComp; j++)
<a name="l04649"></a>04649      free(returnVars[j]);
<a name="l04650"></a>04650       
<a name="l04651"></a>04651       <span class="comment">//Skip through all of this row's remaining components</span>
<a name="l04652"></a>04652       <span class="keywordflow">while</span>(!lastCompInGuess){
<a name="l04653"></a>04653      rc = <a class="code" href="group__PrivateVariable.html#geb3de0f2a657ba876619662660c404e9" title="Get a common component extension for combining vars.">_fc_getNextComponentExtension</a>(&amp;extState, &amp;lastCompInGuess, &amp;lastCompInSearch, NULL);
<a name="l04654"></a>04654      <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04655"></a>04655        free(compName); free(returnVars); free(nSteps);
<a name="l04656"></a>04656        <span class="keywordflow">return</span> rc;
<a name="l04657"></a>04657      }
<a name="l04658"></a>04658       }
<a name="l04659"></a>04659       numComp=0;
<a name="l04660"></a>04660     }
<a name="l04661"></a>04661 
<a name="l04662"></a>04662 
<a name="l04663"></a>04663   }
<a name="l04664"></a>04664 
<a name="l04665"></a>04665   <span class="comment">//Ran through all guesses, but no matches</span>
<a name="l04666"></a>04666   *numVariables = 0;
<a name="l04667"></a>04667   free(compName); free(returnVars); free(nSteps);
<a name="l04668"></a>04668   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04669"></a>04669 
<a name="l04670"></a>04670 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g67e32c7737be27b1ee6416caf5797969"></a><!-- doxytag: member="variable.c::fc_getSeqVariableDataPointSlice" ref="g67e32c7737be27b1ee6416caf5797969" args="(int numStep, FC_Variable *seqVar, int dataPointID, void **history)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getSeqVariableDataPointSlice           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dataPointID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>history</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
In a sequence variable, get data for steps at a single data. 
<p>
<b>Description:</b> <p>
Given a sequence variable and the id of a particular data point (corresponds to a particular entity id for the variable), this will return an array of data values at that point for each step in the sequence. This type of information for time series is often called a point history. If the data has more than one component, the array will be interleaved; that is, for each step all components will be listed before the next step (e.g. Step1Comp1 Step2Comp2 .. Step1CompN ... StepMComp1 StepMCompN).<p>
This routine returns an allocated data array. The user is responsible for freeing it.<p>
<b>Modifications:</b> <ul>
<li>10/21/04 WSK, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - seq variable handles </td></tr>
<tr><td valign="top"><em>dataPointID</em>&nbsp;</td><td>
input - ID of the data point/entity of interest </td></tr>
<tr><td valign="top"><em>history</em>&nbsp;</td><td>
output - data array </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l06014">6014</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8c-source.html#l00741">fc_sizeofDataType()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="variable_8c-source.html#l05888">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l06019"></a>06019   {
<a name="l06020"></a>06020   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l06021"></a>06021   <span class="keywordtype">int</span> i;
<a name="l06022"></a>06022   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l06023"></a>06023   <span class="keywordtype">size_t</span> size;
<a name="l06024"></a>06024   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l06025"></a>06025   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> dataType;
<a name="l06026"></a>06026   <span class="keywordtype">void</span>* temp_data, *data_p;
<a name="l06027"></a>06027 
<a name="l06028"></a>06028   <span class="comment">// default</span>
<a name="l06029"></a>06029   <span class="keywordflow">if</span> (history)
<a name="l06030"></a>06030     *history = NULL;
<a name="l06031"></a>06031   
<a name="l06032"></a>06032   <span class="comment">// check input</span>
<a name="l06033"></a>06033   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(numStep, seqVar) || dataPointID &lt; 0 ||
<a name="l06034"></a>06034       !history) {
<a name="l06035"></a>06035     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l06036"></a>06036     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l06037"></a>06037   }
<a name="l06038"></a>06038 
<a name="l06039"></a>06039   <span class="comment">// Get info about seq variable</span>
<a name="l06040"></a>06040   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(seqVar[0], &amp;numDataPoint, &amp;numComp, NULL, NULL,
<a name="l06041"></a>06041                           &amp;dataType);
<a name="l06042"></a>06042   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l06043"></a>06043     <span class="keywordflow">return</span> rc;
<a name="l06044"></a>06044 
<a name="l06045"></a>06045   <span class="comment">// a little more checking</span>
<a name="l06046"></a>06046   <span class="keywordflow">if</span> (dataPointID &gt;= numDataPoint) {
<a name="l06047"></a>06047     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Data point ID is outside range"</span>);
<a name="l06048"></a>06048     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l06049"></a>06049   }
<a name="l06050"></a>06050 
<a name="l06051"></a>06051   <span class="comment">// log message</span>
<a name="l06052"></a>06052   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(seqVar[0]);
<a name="l06053"></a>06053   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting history for seq variable '%s'"</span>, 
<a name="l06054"></a>06054                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l06055"></a>06055 
<a name="l06056"></a>06056   <span class="comment">// Collect history data</span>
<a name="l06057"></a>06057   size = numComp * <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(dataType);
<a name="l06058"></a>06058   temp_data = malloc(numStep*size);
<a name="l06059"></a>06059   <span class="keywordflow">if</span> (temp_data == NULL) {
<a name="l06060"></a>06060     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l06061"></a>06061     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l06062"></a>06062   }
<a name="l06063"></a>06063   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l06064"></a>06064     rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(seqVar[i], &amp;data_p);
<a name="l06065"></a>06065     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l06066"></a>06066       free(temp_data);
<a name="l06067"></a>06067       <span class="keywordflow">return</span> rc;
<a name="l06068"></a>06068     }
<a name="l06069"></a>06069     memcpy((<span class="keywordtype">char</span>*)temp_data + i*size, (<span class="keywordtype">char</span>*)data_p + dataPointID*size, size);
<a name="l06070"></a>06070   }
<a name="l06071"></a>06071 
<a name="l06072"></a>06072   <span class="comment">// set return   </span>
<a name="l06073"></a>06073   *history = temp_data;
<a name="l06074"></a>06074 
<a name="l06075"></a>06075   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l06076"></a>06076 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g80f8c5422576d1d2b706cc8b1def12f3"></a><!-- doxytag: member="variable.c::fc_getSeqVariableDataPointSliceAsSeqVariable" ref="g80f8c5422576d1d2b706cc8b1def12f3" args="(int numStep, FC_Variable *seqVar, int dataPointID, char *slicevarname, FC_Variable **sliceVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getSeqVariableDataPointSliceAsSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dataPointID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>slicevarname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>sliceVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
In a sequence variable, get data for steps at a single data point returned as a sequence variable with association FC_AT_WHOLE_MESH. 
<p>
<b>Description:</b> <p>
Given a sequence variable and the id of a particular data point (corresponds to a particular entity id for the variable), this will return a seqvar with data values for that point only with association FC_AT_WHOLE_MESH. This method calls fc_getVariableDataPointSlice and then packs the return array into a sequence Variable.<p>
<b>Modifications:</b> <ul>
<li>2/10/05 ACG, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - seq variable handles </td></tr>
<tr><td valign="top"><em>dataPointID</em>&nbsp;</td><td>
input - ID of the data point/entity of interest </td></tr>
<tr><td valign="top"><em>slicevarname</em>&nbsp;</td><td>
input - name of output seqvar </td></tr>
<tr><td valign="top"><em>sliceVar</em>&nbsp;</td><td>
output - output seqvar </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05888">5888</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="base_8h-source.html#l00197">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00350">fc_createSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l05062">fc_deleteSeqVariable()</a>, <a class="el" href="base_8h-source.html#l00139">FC_DT_CHAR</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00149">FC_DT_FLOAT</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="variable_8c-source.html#l05392">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05317">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l06014">fc_getSeqVariableDataPointSlice()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05894"></a>05894   {
<a name="l05895"></a>05895   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l05896"></a>05896   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh;
<a name="l05897"></a>05897   <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> seq;
<a name="l05898"></a>05898 
<a name="l05899"></a>05899   <span class="keywordtype">int</span> <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>;
<a name="l05900"></a>05900   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathtype;
<a name="l05901"></a>05901   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype;
<a name="l05902"></a>05902   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l05903"></a>05903 
<a name="l05904"></a>05904   <span class="keywordtype">void</span>* history;
<a name="l05905"></a>05905   <span class="keywordtype">void</span>* dcounter;
<a name="l05906"></a>05906   <span class="keywordtype">int</span> i;
<a name="l05907"></a>05907 
<a name="l05908"></a>05908   <span class="comment">//only need to check slicevar, fc_getSeqVariableDataPointSlice checks the</span>
<a name="l05909"></a>05909   <span class="comment">//rest</span>
<a name="l05910"></a>05910 
<a name="l05911"></a>05911   <span class="keywordflow">if</span> (sliceVar)
<a name="l05912"></a>05912     *sliceVar = NULL;
<a name="l05913"></a>05913 
<a name="l05914"></a>05914   <span class="keywordflow">if</span> (sliceVar == NULL || slicevarname == NULL){
<a name="l05915"></a>05915     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05916"></a>05916     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05917"></a>05917   };
<a name="l05918"></a>05918 
<a name="l05919"></a>05919   <span class="comment">//get data &amp; its does input checks</span>
<a name="l05920"></a>05920   rc = <a class="code" href="group__Variable.html#g67e32c7737be27b1ee6416caf5797969" title="In a sequence variable, get data for steps at a single data.">fc_getSeqVariableDataPointSlice</a>(numStep,seqVar, dataPointID, &amp;history);
<a name="l05921"></a>05921   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l05922"></a>05922     <span class="keywordflow">return</span> rc;
<a name="l05923"></a>05923   }
<a name="l05924"></a>05924 
<a name="l05925"></a>05925 
<a name="l05926"></a>05926   <span class="comment">// Get info about seq variable</span>
<a name="l05927"></a>05927   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(seqVar[0], NULL, &amp;numComponent, &amp;assoc, &amp;mathtype,
<a name="l05928"></a>05928                           &amp;datatype);
<a name="l05929"></a>05929   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l05930"></a>05930     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(rc));
<a name="l05931"></a>05931     free(history);
<a name="l05932"></a>05932     <span class="keywordflow">return</span> rc;
<a name="l05933"></a>05933   }
<a name="l05934"></a>05934 
<a name="l05935"></a>05935   <span class="comment">//make slice var</span>
<a name="l05936"></a>05936   rc = <a class="code" href="group__Variable.html#g6808d2015766d9b530b93375f42296a3" title="Get the parent mesh of the variable.">fc_getMeshFromVariable</a>(seqVar[0],&amp;mesh);
<a name="l05937"></a>05937   rc = <a class="code" href="group__Variable.html#g314a992ec5ba07d7075f1172b13ef166" title="Get the parent sequence of a sequence variable.">fc_getSequenceFromSeqVariable</a>(numStep,seqVar,&amp;seq);
<a name="l05938"></a>05938   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l05939"></a>05939     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(rc));
<a name="l05940"></a>05940     free(history);
<a name="l05941"></a>05941     <span class="keywordflow">return</span> rc;
<a name="l05942"></a>05942   }
<a name="l05943"></a>05943 
<a name="l05944"></a>05944   rc = <a class="code" href="group__Variable.html#g05d5098e68c1761ac851b2509dfbea70" title="Create a new sequence variable.">fc_createSeqVariable</a>(mesh, seq, slicevarname, &amp;numStep,sliceVar);
<a name="l05945"></a>05945   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l05946"></a>05946       <a class="code" href="group__Variable.html#gef5ebe119abe1d217a216f0faad0e667" title="Delete a sequence variable.">fc_deleteSeqVariable</a>(numStep,*sliceVar);
<a name="l05947"></a>05947       free(*sliceVar);
<a name="l05948"></a>05948       *sliceVar = NULL;
<a name="l05949"></a>05949       free(history);
<a name="l05950"></a>05950       <span class="keywordflow">return</span> rc;
<a name="l05951"></a>05951   }
<a name="l05952"></a>05952 
<a name="l05953"></a>05953   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++){
<a name="l05954"></a>05954     <span class="keywordflow">switch</span> (datatype){
<a name="l05955"></a>05955     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l05956"></a>05956       dcounter = &amp;(((<span class="keywordtype">int</span>*)history)[i*numComponent]);
<a name="l05957"></a>05957       <span class="keywordflow">break</span>;
<a name="l05958"></a>05958     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l05959"></a>05959       dcounter = &amp;(((<span class="keywordtype">float</span>*)history)[i*numComponent]);
<a name="l05960"></a>05960       <span class="keywordflow">break</span>;
<a name="l05961"></a>05961     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l05962"></a>05962       dcounter = &amp;(((<span class="keywordtype">double</span>*)history)[i*numComponent]);
<a name="l05963"></a>05963       <span class="keywordflow">break</span>;
<a name="l05964"></a>05964     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>:
<a name="l05965"></a>05965       dcounter = &amp;(((<span class="keywordtype">char</span>*)history)[i*numComponent]);
<a name="l05966"></a>05966       <span class="keywordflow">break</span>;
<a name="l05967"></a>05967     <span class="keywordflow">default</span>:
<a name="l05968"></a>05968       printf(<span class="stringliteral">"** Developer Alert! Should never reach this point!**\n"</span>);
<a name="l05969"></a>05969       fflush(NULL);
<a name="l05970"></a>05970       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <span class="stringliteral">"Invalid data type"</span>);
<a name="l05971"></a>05971       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l05972"></a>05972       <span class="keywordflow">break</span>;
<a name="l05973"></a>05973     }
<a name="l05974"></a>05974 
<a name="l05975"></a>05975     rc = <a class="code" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData</a>((*sliceVar)[i],1,numComponent,
<a name="l05976"></a>05976                             <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af62b7e38452f200e9abd5767534b43d670">FC_AT_WHOLE_MESH</a>,mathtype,
<a name="l05977"></a>05977                             datatype,dcounter);
<a name="l05978"></a>05978     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l05979"></a>05979       <a class="code" href="group__Variable.html#gef5ebe119abe1d217a216f0faad0e667" title="Delete a sequence variable.">fc_deleteSeqVariable</a>(numStep,*sliceVar);
<a name="l05980"></a>05980       free(*sliceVar);
<a name="l05981"></a>05981       *sliceVar = NULL;
<a name="l05982"></a>05982       free(history);
<a name="l05983"></a>05983       <span class="keywordflow">return</span> rc;
<a name="l05984"></a>05984     }
<a name="l05985"></a>05985   }
<a name="l05986"></a>05986 
<a name="l05987"></a>05987   dcounter = NULL;
<a name="l05988"></a>05988   free(history);
<a name="l05989"></a>05989   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05990"></a>05990 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g01bf1b0d9b1de983115a461216039449"></a><!-- doxytag: member="variable.c::fc_getSeqVariables" ref="g01bf1b0d9b1de983115a461216039449" args="(FC_Mesh mesh, int *numSeqVar, int **numStepPerVar, FC_Variable ***seqVariables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getSeqVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepPerVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>seqVariables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the sequence variables in a mesh. 
<p>
<b>Description:</b> <p>
Returns an array of sequence variables (array of arrays of variables) as well as an array of the number of steps per sequence variable. The use is responsible for freeing all returned arrays. (SeqVars is a 2D array, so to free: for (i = 0; i &lt; numSeq var) { free(seqVars[i])); } )<p>
<b>Modifications:</b> <ul>
<li>2003-APR-18 W Koegler Created</li><li>12/11/03 RM, added default return values, numSeqVar = -1, seqVarNames = NULL, check input/output for numSeqVar = NULL.</li><li>9/9/04 WSK, changed to return seq variable handles instead of names</li><li>10/15/04 WSK, changed to not return sequence handles </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
<tr><td valign="top"><em>numStepPerVar</em>&nbsp;</td><td>
output - array with number of steps for each sequence variable </td></tr>
<tr><td valign="top"><em>seqVariables</em>&nbsp;</td><td>
output - array of sequence variables (each sequence variable is array of numStep variables </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03637">3637</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00189">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00190">_FC_MeshSlot::numStepPerSeqVar</a>, and <a class="el" href="meshP_8h-source.html#l00191">_FC_MeshSlot::seqVarIDs</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="mesh_8c-source.html#l02626">fc_deleteMesh()</a>, <a class="el" href="mesh_8c-source.html#l02417">fc_releaseMesh()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>, and <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03644"></a>03644   {
<a name="l03645"></a>03645   <span class="keywordtype">int</span> i, j;
<a name="l03646"></a>03646   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03647"></a>03647   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l03648"></a>03648   
<a name="l03649"></a>03649   <span class="comment">// set up defaults</span>
<a name="l03650"></a>03650   <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l03651"></a>03651     *numSeqVar = -1;
<a name="l03652"></a>03652   <span class="keywordflow">if</span> (numStepPerVar != NULL)
<a name="l03653"></a>03653     *numStepPerVar = NULL;
<a name="l03654"></a>03654   <span class="keywordflow">if</span> (seqVariables != NULL)
<a name="l03655"></a>03655     *seqVariables = NULL;
<a name="l03656"></a>03656   
<a name="l03657"></a>03657   <span class="comment">// check input</span>
<a name="l03658"></a>03658   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03659"></a>03659   <span class="keywordflow">if</span> (meshSlot == NULL || numSeqVar == NULL || numStepPerVar == NULL ||
<a name="l03660"></a>03660       seqVariables == NULL) {
<a name="l03661"></a>03661     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03662"></a>03662     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03663"></a>03663   }
<a name="l03664"></a>03664   
<a name="l03665"></a>03665   <span class="comment">// log message</span>
<a name="l03666"></a>03666   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variables for mesh '%s'"</span>,
<a name="l03667"></a>03667                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03668"></a>03668 
<a name="l03669"></a>03669   <span class="comment">// get num seq variable</span>
<a name="l03670"></a>03670   *numSeqVar = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>;
<a name="l03671"></a>03671   
<a name="l03672"></a>03672   <span class="comment">// get sequence variables</span>
<a name="l03673"></a>03673   <span class="keywordflow">if</span> (*numSeqVar &gt; 0) {
<a name="l03674"></a>03674     *numStepPerVar = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (*numSeqVar));
<a name="l03675"></a>03675     <span class="keywordflow">if</span> (*numStepPerVar == NULL) {
<a name="l03676"></a>03676       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03677"></a>03677       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03678"></a>03678     }
<a name="l03679"></a>03679     *seqVariables = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*) * (*numSeqVar));
<a name="l03680"></a>03680     <span class="keywordflow">if</span> (*seqVariables == NULL) {
<a name="l03681"></a>03681       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03682"></a>03682       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03683"></a>03683     }
<a name="l03684"></a>03684     <span class="keywordflow">for</span> (i = 0; i &lt; *numSeqVar; i++) {
<a name="l03685"></a>03685       (*numStepPerVar)[i] = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e17e969e56b697232591e53ba6c55ba4">numStepPerSeqVar</a>[i];
<a name="l03686"></a>03686       (*seqVariables)[i] = malloc(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e17e969e56b697232591e53ba6c55ba4">numStepPerSeqVar</a>[i]*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l03687"></a>03687       <span class="keywordflow">if</span> ( (*seqVariables)[i] == NULL) {
<a name="l03688"></a>03688      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03689"></a>03689      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03690"></a>03690       }
<a name="l03691"></a>03691       <span class="keywordflow">for</span> (j = 0; j &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e17e969e56b697232591e53ba6c55ba4">numStepPerSeqVar</a>[i]; j++) {
<a name="l03692"></a>03692      varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e9d6f6c85dc084548c919597d128ff75">seqVarIDs</a>[i][j]);
<a name="l03693"></a>03693      <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>((*seqVariables)[i][j], varSlot);
<a name="l03694"></a>03694       }
<a name="l03695"></a>03695     }
<a name="l03696"></a>03696   }
<a name="l03697"></a>03697   
<a name="l03698"></a>03698   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03699"></a>03699 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ge4935bc28dae482ddabcfd421400ab13"></a><!-- doxytag: member="variable.c::fc_getVariableAssociationType" ref="ge4935bc28dae482ddabcfd421400ab13" args="(FC_Variable variable, FC_AssociationType *assoc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableAssociationType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> *&nbsp;</td>
          <td class="paramname"> <em>assoc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return data association of a variable. 
<p>
<b>Description:</b> <p>
Return what subentity of the mesh (e.g. vertex, element, face, edge) the data values are associated with.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/16/03 RM, added default return datatype = FC_AT_UNKNOWN, and input check for datatype = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
output - data is per vertex, per element, etc </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05539">5539</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00091">_FC_VarSlot::assoc</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="gaplines_8c-source.html#l00433">main()</a>, and <a class="el" href="subsetter_8c-source.html#l00344">processOneVar()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05543"></a>05543   {
<a name="l05544"></a>05544   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05545"></a>05545   
<a name="l05546"></a>05546   <span class="comment">// set up default value</span>
<a name="l05547"></a>05547   <span class="keywordflow">if</span> (assoc != NULL)
<a name="l05548"></a>05548       *assoc = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a>; 
<a name="l05549"></a>05549   
<a name="l05550"></a>05550   <span class="comment">// check input</span>
<a name="l05551"></a>05551   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05552"></a>05552   <span class="keywordflow">if</span> (varSlot == NULL || assoc == NULL) {
<a name="l05553"></a>05553     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05554"></a>05554     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05555"></a>05555   }
<a name="l05556"></a>05556     
<a name="l05557"></a>05557   <span class="comment">// log message</span>
<a name="l05558"></a>05558   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting association type for variable '%s'"</span>, 
<a name="l05559"></a>05559                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05560"></a>05560 
<a name="l05561"></a>05561   <span class="comment">// fill in requested value</span>
<a name="l05562"></a>05562   *assoc = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#c9e804c6a08dd9757651d15d09963015">assoc</a>;
<a name="l05563"></a>05563   
<a name="l05564"></a>05564   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05565"></a>05565 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g360da27d39e62be3c900da302a754e95"></a><!-- doxytag: member="variable.c::fc_getVariableByName" ref="g360da27d39e62be3c900da302a754e95" args="(FC_Mesh mesh, char *varname, int *numVariables, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVariables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get variables from the mesh. 
<p>
<b>Description:</b> <p>
Returns variables on the mesh with the specified name. Note that this doesnt merge components like the seqvar version doesx<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>2003-MAY-30 W Koegler Moved getting variable meta data from <a class="el" href="group__Mesh.html#gb72987c2bf83a19f208df925bc8af86b" title="Get all meshes with a given name from the dataset.">fc_getMeshByName()</a> to here. Actually moved to _fc_readVariable() which is called here.</li><li>12/12/03 RM, added default return mesh = FC_NULL_VARIABLE and checking for invalid variable name. Eliminated _fc_lookup_varSlot() and _fc_namematch(), those input checking changed and added into the body of this function</li><li>09/22/06 ACG returns array </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>numVariables</em>&nbsp;</td><td>
output - num matching variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - variable handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04052">4052</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numBasicVar</a>.</p>

<p>Referenced by <a class="el" href="variable_8c-source.html#l01065">fc_copyVariableFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l01831">fc_copyVariableToRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l04286">fc_getOrGenerateUniqueVariableByName()</a>, <a class="el" href="variable_8c-source.html#l04139">fc_getVariableComponentsByName()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04057"></a>04057   {
<a name="l04058"></a>04058   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l04059"></a>04059   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a> *varSlot;
<a name="l04060"></a>04060   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> variable;
<a name="l04061"></a>04061   <span class="keywordtype">int</span> i;
<a name="l04062"></a>04062 
<a name="l04063"></a>04063   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *lmatch = NULL;
<a name="l04064"></a>04064   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l04065"></a>04065   
<a name="l04066"></a>04066   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l04067"></a>04067   <span class="keywordflow">if</span> (numVariables)
<a name="l04068"></a>04068     *numVariables = -1;
<a name="l04069"></a>04069   <span class="keywordflow">if</span> (variables)
<a name="l04070"></a>04070     *variables = NULL;
<a name="l04071"></a>04071   
<a name="l04072"></a>04072   <span class="comment">// check input</span>
<a name="l04073"></a>04073   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l04074"></a>04074   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variables || !numVariables){
<a name="l04075"></a>04075     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04076"></a>04076     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04077"></a>04077   }
<a name="l04078"></a>04078   
<a name="l04079"></a>04079   <span class="comment">// log message</span>
<a name="l04080"></a>04080   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variable '%s'"</span>, varname);
<a name="l04081"></a>04081   
<a name="l04082"></a>04082   numlmatch = 0;
<a name="l04083"></a>04083   maxnumlmatch = 0;
<a name="l04084"></a>04084   
<a name="l04085"></a>04085   <span class="comment">// find the existing slot</span>
<a name="l04086"></a>04086   <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>; i++) {
<a name="l04087"></a>04087     varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#c599e2802ddaeb185a171b147f2c4ba1">basicVarIDs</a>[i]); 
<a name="l04088"></a>04088     <span class="keywordflow">if</span> (!strcmp(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>, varname)) {
<a name="l04089"></a>04089       <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>(variable, varSlot);
<a name="l04090"></a>04090 
<a name="l04091"></a>04091       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l04092"></a>04092      lmatch = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l04093"></a>04093      <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l04094"></a>04094        <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l04095"></a>04095        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04096"></a>04096      }
<a name="l04097"></a>04097      numlmatch = 1;
<a name="l04098"></a>04098      maxnumlmatch = 1;
<a name="l04099"></a>04099      lmatch[0] = variable;
<a name="l04100"></a>04100       }<span class="keywordflow">else</span>{
<a name="l04101"></a>04101      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l04102"></a>04102        <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *temp;
<a name="l04103"></a>04103        temp = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l04104"></a>04104        <span class="keywordflow">if</span> (temp == NULL){
<a name="l04105"></a>04105          <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l04106"></a>04106          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04107"></a>04107        }
<a name="l04108"></a>04108        maxnumlmatch*=2;
<a name="l04109"></a>04109        lmatch = temp;
<a name="l04110"></a>04110      }
<a name="l04111"></a>04111      lmatch[numlmatch] = variable;
<a name="l04112"></a>04112      numlmatch++;
<a name="l04113"></a>04113       }
<a name="l04114"></a>04114     }
<a name="l04115"></a>04115   }
<a name="l04116"></a>04116 
<a name="l04117"></a>04117   *numVariables = numlmatch;
<a name="l04118"></a>04118   *variables = lmatch;
<a name="l04119"></a>04119 
<a name="l04120"></a>04120   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04121"></a>04121 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3f8d4d3fd4b5073829290d4b347350b5"></a><!-- doxytag: member="variable.c::fc_getVariableComponentsByName" ref="g3f8d4d3fd4b5073829290d4b347350b5" args="(FC_Mesh mesh, char *varname, FC_MathType *type, int *numVariables, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableComponentsByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVariables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get variables that can be components from the mesh. 
<p>
<b>Description:</b> <p>
Returns variables on the mesh with the specified base name and _x,_y,_z and similiar extensions. This is meant to be used to build an array of components split with the exodus component naming convention.<p>
<b>Modifications:</b> <ul>
<li>10/11/2007 ACG created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>type</em>&nbsp;</td><td>
output - type </td></tr>
<tr><td valign="top"><em>numVariables</em>&nbsp;</td><td>
output - num matching variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - variable handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04139">4139</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06722">_fc_getNextComponentExtension()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04052">fc_getVariableByName()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8h-source.html#l00169">FC_MT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00171">FC_MT_VECTOR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="variable_8c-source.html#l04286">fc_getOrGenerateUniqueVariableByName()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04145"></a>04145   {
<a name="l04146"></a>04146   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l04147"></a>04147   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>* returnVars;
<a name="l04148"></a>04148   <span class="keywordtype">char</span>* compName;
<a name="l04149"></a>04149 
<a name="l04150"></a>04150 
<a name="l04151"></a>04151   <span class="keywordtype">int</span> numComp;
<a name="l04152"></a>04152   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lastCompInGuess;
<a name="l04153"></a>04153   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lastCompInSearch;
<a name="l04154"></a>04154   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxExtLen;
<a name="l04155"></a>04155   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxComp;
<a name="l04156"></a>04156   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> varNameLen;
<a name="l04157"></a>04157   
<a name="l04158"></a>04158   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> extState;
<a name="l04159"></a>04159 
<a name="l04160"></a>04160 
<a name="l04161"></a>04161   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l04162"></a>04162   
<a name="l04163"></a>04163   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l04164"></a>04164   <span class="keywordflow">if</span> (numVariables)
<a name="l04165"></a>04165     *numVariables = -1;
<a name="l04166"></a>04166   <span class="keywordflow">if</span> (type)
<a name="l04167"></a>04167     *type = <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb2064ff077a965e5351bcfafd26ac08236f">FC_MT_UNKNOWN</a>; 
<a name="l04168"></a>04168   <span class="keywordflow">if</span> (variables)
<a name="l04169"></a>04169     *variables = NULL;
<a name="l04170"></a>04170   
<a name="l04171"></a>04171   <span class="comment">// check input</span>
<a name="l04172"></a>04172   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l04173"></a>04173   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variables || !numVariables
<a name="l04174"></a>04174       || !type){
<a name="l04175"></a>04175     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04176"></a>04176     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04177"></a>04177   }
<a name="l04178"></a>04178   
<a name="l04179"></a>04179   <span class="comment">// log message</span>
<a name="l04180"></a>04180   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variable components '%s'"</span>, varname);
<a name="l04181"></a>04181 
<a name="l04182"></a>04182 
<a name="l04183"></a>04183   <span class="comment">//First, query component function to see what the guesses look like</span>
<a name="l04184"></a>04184   rc = <a class="code" href="group__PrivateVariable.html#geb3de0f2a657ba876619662660c404e9" title="Get a common component extension for combining vars.">_fc_getNextComponentExtension</a>(NULL, &amp;maxExtLen, &amp;maxComp, NULL);
<a name="l04185"></a>04185   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04186"></a>04186     <span class="keywordflow">return</span> rc;
<a name="l04187"></a>04187   }
<a name="l04188"></a>04188 
<a name="l04189"></a>04189   <span class="comment">//Allocate working space for temporary data</span>
<a name="l04190"></a>04190   compName   = (<span class="keywordtype">char</span> *)       malloc(strlen(varname)+maxExtLen);
<a name="l04191"></a>04191   returnVars = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *)malloc(maxComp*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l04192"></a>04192   <span class="keywordflow">if</span> (!compName || !returnVars){
<a name="l04193"></a>04193     free(compName); free(returnVars);
<a name="l04194"></a>04194     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04195"></a>04195   }
<a name="l04196"></a>04196   varNameLen = strlen(varname); 
<a name="l04197"></a>04197   strcpy(compName, varname); <span class="comment">//search name always starts with varname</span>
<a name="l04198"></a>04198 
<a name="l04199"></a>04199   <span class="keywordflow">for</span>(numComp=0, extState=0, lastCompInGuess=0, lastCompInSearch=0; !lastCompInSearch; ){
<a name="l04200"></a>04200     <span class="keywordtype">int</span> numVar;
<a name="l04201"></a>04201     <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *tempVars;
<a name="l04202"></a>04202 
<a name="l04203"></a>04203     rc = <a class="code" href="group__PrivateVariable.html#geb3de0f2a657ba876619662660c404e9" title="Get a common component extension for combining vars.">_fc_getNextComponentExtension</a>(&amp;extState,  
<a name="l04204"></a>04204                            &amp;lastCompInGuess, &amp;lastCompInSearch, 
<a name="l04205"></a>04205                            &amp;compName[varNameLen]);
<a name="l04206"></a>04206     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04207"></a>04207       free(compName);
<a name="l04208"></a>04208       <span class="keywordflow">return</span> rc;
<a name="l04209"></a>04209     }
<a name="l04210"></a>04210     <span class="comment">//printf("Checking '%s'\n",compName);</span>
<a name="l04211"></a>04211 
<a name="l04212"></a>04212     <span class="comment">//Look for this variable</span>
<a name="l04213"></a>04213     rc = <a class="code" href="group__Variable.html#g360da27d39e62be3c900da302a754e95" title="Get variables from the mesh.">fc_getVariableByName</a>(mesh, compName,&amp;numVar, &amp;tempVars);
<a name="l04214"></a>04214     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04215"></a>04215       free(compName);
<a name="l04216"></a>04216       <span class="keywordflow">return</span> rc;
<a name="l04217"></a>04217     }
<a name="l04218"></a>04218    
<a name="l04219"></a>04219     <span class="keywordflow">if</span>(numVar&gt;1){
<a name="l04220"></a>04220       <span class="comment">//Multiple occurrences of this variable</span>
<a name="l04221"></a>04221       free(compName); free(returnVars); free(tempVars); 
<a name="l04222"></a>04222       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04223"></a>04223 
<a name="l04224"></a>04224     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numVar == 1){
<a name="l04225"></a>04225       <span class="comment">//Found another proper match in this guess</span>
<a name="l04226"></a>04226       returnVars[numComp] = tempVars[0];
<a name="l04227"></a>04227       free(tempVars);
<a name="l04228"></a>04228       numComp++;
<a name="l04229"></a>04229 
<a name="l04230"></a>04230       <span class="keywordflow">if</span>(lastCompInGuess){
<a name="l04231"></a>04231      <span class="comment">//We hit all components, stop searching. Resize the data</span>
<a name="l04232"></a>04232      <span class="comment">//printf("Found complete set\n");</span>
<a name="l04233"></a>04233      *variables = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *)realloc(returnVars, numComp*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l04234"></a>04234      free(compName);
<a name="l04235"></a>04235      <span class="keywordflow">if</span>(!(*variables)){
<a name="l04236"></a>04236        free(returnVars); 
<a name="l04237"></a>04237        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l04238"></a>04238      }
<a name="l04239"></a>04239      *type = <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb207f48fe9fd9efb7bc772bbb41106e217f">FC_MT_VECTOR</a>;
<a name="l04240"></a>04240      *numVariables = numComp;
<a name="l04241"></a>04241      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04242"></a>04242       }
<a name="l04243"></a>04243 
<a name="l04244"></a>04244     } <span class="keywordflow">else</span> {
<a name="l04245"></a>04245       <span class="comment">//found nothing, forget this guess</span>
<a name="l04246"></a>04246       <span class="comment">//Nothing to free, just tell guessing engine to skip to next</span>
<a name="l04247"></a>04247       <span class="keywordflow">while</span>(!lastCompInGuess){
<a name="l04248"></a>04248      rc = <a class="code" href="group__PrivateVariable.html#geb3de0f2a657ba876619662660c404e9" title="Get a common component extension for combining vars.">_fc_getNextComponentExtension</a>(&amp;extState, &amp;lastCompInGuess, &amp;lastCompInSearch, NULL);
<a name="l04249"></a>04249      <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>){
<a name="l04250"></a>04250        free(compName); free(returnVars); 
<a name="l04251"></a>04251        <span class="keywordflow">return</span> rc;
<a name="l04252"></a>04252      }
<a name="l04253"></a>04253       }
<a name="l04254"></a>04254       numComp=0;
<a name="l04255"></a>04255     }
<a name="l04256"></a>04256   }
<a name="l04257"></a>04257   <span class="comment">//printf("Not found\n");</span>
<a name="l04258"></a>04258   <span class="comment">//Ran through all guesses, but no matches</span>
<a name="l04259"></a>04259   *numVariables = 0;
<a name="l04260"></a>04260   free(compName); free(returnVars);
<a name="l04261"></a>04261   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04262"></a>04262 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd2bb293943346a413ef5fa244a072b8f"></a><!-- doxytag: member="variable.c::fc_getVariableDataAsDataType" ref="gd2bb293943346a413ef5fa244a072b8f" args="(FC_Variable variable, FC_DataType dataType, void **data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableDataAsDataType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a>&nbsp;</td>
          <td class="paramname"> <em>dataType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get a copy of a variable's data as the requested data type. 
<p>
<b>Description:</b> <p>
Returns the variable's data as the type requested by the user. The user is responsible for freeing the array. This routine casts to the requested user type so there is a potential for lost information (e.g. if you cast a floating point number to int it is truncated, not rounded).<p>
If you are worried about memory or casting, you should use <a class="el" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr()</a> to get a pointer to the raw data array.<p>
Can also be used to get the data in a step of a sequence variable by calling with the variable handle for the desired step.<p>
<b>Modifications:</b> <ul>
<li>02/02/05 WSK created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>dataType</em>&nbsp;</td><td>
input - the data type for the returned data </td></tr>
<tr><td valign="top"><em>data</em>&nbsp;</td><td>
output - returned data </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05773">5773</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00139">FC_DT_CHAR</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00149">FC_DT_FLOAT</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="base_8h-source.html#l00138">FC_DT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00419">fc_getDataTypeText()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00240">fc_isDataTypeValid()</a>, <a class="el" href="variable_8c-source.html#l05156">fc_isVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8c-source.html#l00741">fc_sizeofDataType()</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05777"></a>05777   {
<a name="l05778"></a>05778   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l05779"></a>05779   <span class="keywordtype">int</span> i;
<a name="l05780"></a>05780   <span class="keywordtype">int</span> numDataPoint, numComp, numTotal;
<a name="l05781"></a>05781   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> dataType_orig;
<a name="l05782"></a>05782   <span class="keywordtype">void</span> *data_orig;
<a name="l05783"></a>05783   
<a name="l05784"></a>05784   <span class="comment">// default</span>
<a name="l05785"></a>05785   <span class="keywordflow">if</span> (data)
<a name="l05786"></a>05786     *data = NULL;
<a name="l05787"></a>05787   
<a name="l05788"></a>05788   <span class="comment">// check input</span>
<a name="l05789"></a>05789   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(variable) || !<a class="code" href="group__DataTypes.html#gccfacba927b41643b8d6b36e8fe5b8bb" title="Verify that the given value is valid for this enum.">fc_isDataTypeValid</a>(dataType) || 
<a name="l05790"></a>05790       dataType == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9c76e1a6b572327d5433db69f08eddde1">FC_DT_UNKNOWN</a> || data == NULL) {
<a name="l05791"></a>05791     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05792"></a>05792     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05793"></a>05793   }
<a name="l05794"></a>05794   
<a name="l05795"></a>05795   <span class="comment">// log message</span>
<a name="l05796"></a>05796   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting data for variable '%s' as type %s"</span>, 
<a name="l05797"></a>05797                       <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable)-&gt;header.name,
<a name="l05798"></a>05798                       <a class="code" href="group__DataTypes.html#g688d0934eac6d388ad21c461e22fd19f" title="Return the name of the FC_DataType&amp;#39;s value.">fc_getDataTypeText</a>(dataType));
<a name="l05799"></a>05799 
<a name="l05800"></a>05800   <span class="comment">// get variable info and data</span>
<a name="l05801"></a>05801   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(variable, &amp;numDataPoint, &amp;numComp, NULL, 
<a name="l05802"></a>05802                           NULL, &amp;dataType_orig);
<a name="l05803"></a>05803   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l05804"></a>05804     <span class="keywordflow">return</span> rc;
<a name="l05805"></a>05805   rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(variable, &amp;data_orig);
<a name="l05806"></a>05806   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l05807"></a>05807     <span class="keywordflow">return</span> rc;
<a name="l05808"></a>05808   numTotal = numDataPoint*numComp;
<a name="l05809"></a>05809   
<a name="l05810"></a>05810   <span class="comment">// allocate return array</span>
<a name="l05811"></a>05811   *data = malloc(numTotal*<a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(dataType));
<a name="l05812"></a>05812   <span class="keywordflow">if</span> (!*data) {
<a name="l05813"></a>05813     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l05814"></a>05814     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l05815"></a>05815   }
<a name="l05816"></a>05816 
<a name="l05817"></a>05817   <span class="comment">// special case - the same data type</span>
<a name="l05818"></a>05818   <span class="keywordflow">if</span> (dataType == dataType_orig) {
<a name="l05819"></a>05819     memcpy(*data, data_orig, numTotal*<a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(dataType));
<a name="l05820"></a>05820     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05821"></a>05821   }
<a name="l05822"></a>05822 
<a name="l05823"></a>05823   <span class="comment">// Fun!</span>
<a name="l05824"></a>05824   <span class="keywordflow">if</span> (dataType == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>) {
<a name="l05825"></a>05825     <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>) 
<a name="l05826"></a>05826       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05827"></a>05827         ((<span class="keywordtype">char</span>*)(*data))[i] = ((<span class="keywordtype">int</span>*)data_orig)[i];
<a name="l05828"></a>05828     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>) 
<a name="l05829"></a>05829       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05830"></a>05830         ((<span class="keywordtype">char</span>*)(*data))[i] = ((<span class="keywordtype">float</span>*)data_orig)[i];
<a name="l05831"></a>05831     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>) 
<a name="l05832"></a>05832       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05833"></a>05833         ((<span class="keywordtype">char</span>*)(*data))[i] = ((<span class="keywordtype">double</span>*)data_orig)[i];
<a name="l05834"></a>05834   }
<a name="l05835"></a>05835   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>) {
<a name="l05836"></a>05836     <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>) 
<a name="l05837"></a>05837       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05838"></a>05838         ((<span class="keywordtype">int</span>*)(*data))[i] = ((<span class="keywordtype">char</span>*)data_orig)[i];
<a name="l05839"></a>05839     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>) 
<a name="l05840"></a>05840       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05841"></a>05841         ((<span class="keywordtype">int</span>*)(*data))[i] = ((<span class="keywordtype">float</span>*)data_orig)[i];
<a name="l05842"></a>05842     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>) 
<a name="l05843"></a>05843       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05844"></a>05844         ((<span class="keywordtype">int</span>*)(*data))[i] = ((<span class="keywordtype">double</span>*)data_orig)[i];
<a name="l05845"></a>05845   }
<a name="l05846"></a>05846   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>) {
<a name="l05847"></a>05847     <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>) 
<a name="l05848"></a>05848       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05849"></a>05849         ((<span class="keywordtype">float</span>*)(*data))[i] = ((<span class="keywordtype">char</span>*)data_orig)[i];
<a name="l05850"></a>05850     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>) 
<a name="l05851"></a>05851       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05852"></a>05852         ((<span class="keywordtype">float</span>*)(*data))[i] = ((<span class="keywordtype">int</span>*)data_orig)[i];
<a name="l05853"></a>05853     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>) 
<a name="l05854"></a>05854       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05855"></a>05855         ((<span class="keywordtype">float</span>*)(*data))[i] = ((<span class="keywordtype">double</span>*)data_orig)[i];
<a name="l05856"></a>05856   }
<a name="l05857"></a>05857   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>) {
<a name="l05858"></a>05858     <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>) 
<a name="l05859"></a>05859       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05860"></a>05860         ((<span class="keywordtype">double</span>*)(*data))[i] = ((<span class="keywordtype">char</span>*)data_orig)[i];
<a name="l05861"></a>05861     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>) 
<a name="l05862"></a>05862       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05863"></a>05863         ((<span class="keywordtype">double</span>*)(*data))[i] = ((<span class="keywordtype">int</span>*)data_orig)[i];
<a name="l05864"></a>05864     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>) 
<a name="l05865"></a>05865       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l05866"></a>05866         ((<span class="keywordtype">double</span>*)(*data))[i] = ((<span class="keywordtype">float</span>*)data_orig)[i];
<a name="l05867"></a>05867   }
<a name="l05868"></a>05868   
<a name="l05869"></a>05869   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05870"></a>05870 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g40a4d68cafd7134b908b78d053d3c47d"></a><!-- doxytag: member="variable.c::fc_getVariableDataPtr" ref="g40a4d68cafd7134b908b78d053d3c47d" args="(FC_Variable variable, void **data_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableDataPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>data_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the data in a variable. 
<p>
<b>Description:</b> <p>
Return a pointer to the data array. This must be treated as read-only. If the user wants to change the data they must make a copy first.<p>
Can also be used to get the data in a step of a sequence variable by calling with the variable handle for the desired step.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>data_p</em>&nbsp;</td><td>
output - pointer to data array, treat as read only </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05715">5715</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="fileio_8c-source.html#l02158">_fc_readVariableData()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="variableP_8h-source.html#l00096">_FC_VarSlot::data</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00497">doDoubles()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00439">doSingles()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="varmath_8c-source.html#l00566">fc_constOperatorVar()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="variable_8c-source.html#l00818">fc_copyGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l00724">fc_copyGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l02328">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l00929">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l01065">fc_copyVariableFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l01831">fc_copyVariableToRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="geom_8c-source.html#l00352">fc_getDisplacedMeshCoords()</a>, <a class="el" href="geom_8c-source.html#l04240">fc_getDisplacedSubsetVolume()</a>, <a class="el" href="variable_8c-source.html#l06014">fc_getSeqVariableDataPointSlice()</a>, <a class="el" href="statistics_8c-source.html#l00891">fc_getSeqVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00764">fc_getSeqVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="shape_8c-source.html#l03754">fc_getShapeSidesAreas()</a>, <a class="el" href="geom_8c-source.html#l04344">fc_getSubsetArea()</a>, <a class="el" href="geom_8c-source.html#l04129">fc_getSubsetVolume()</a>, <a class="el" href="variable_8c-source.html#l05773">fc_getVariableDataAsDataType()</a>, <a class="el" href="statistics_8c-source.html#l00212">fc_getVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00097">fc_getVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00542">fc_getVariableSubsetMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00394">fc_getVariableSubsetMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00664">fc_getVariableSubsetSum()</a>, <a class="el" href="statistics_8c-source.html#l00303">fc_getVariableSum()</a>, <a class="el" href="geom_8c-source.html#l02836">fc_getVariableWeightedDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03267">fc_getVariableWeightedDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l02734">fc_getVariableWeightedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03138">fc_getVariableWeightedSubsetCentroid()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="variable_8c-source.html#l06247">fc_printSeqVariableRange()</a>, <a class="el" href="subset_8c-source.html#l03570">fc_printSubsetOfVariable()</a>, <a class="el" href="variable_8c-source.html#l06094">fc_printVariable()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l00481">fc_varOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00386">fc_varOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="ex2__bigDataAccess_8c-source.html#l00071">main()</a>, <a class="el" href="ex3__createCharactrztn_8c-source.html#l00081">myCharacterizationFunkyAve()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00535">origWriteout()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00591">writeoutCompare()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05718"></a>05718   {
<a name="l05719"></a>05719   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l05720"></a>05720   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05721"></a>05721   
<a name="l05722"></a>05722   <span class="comment">// default</span>
<a name="l05723"></a>05723   <span class="keywordflow">if</span> (data_p)
<a name="l05724"></a>05724     *data_p = NULL;
<a name="l05725"></a>05725   
<a name="l05726"></a>05726   <span class="comment">// check input</span>
<a name="l05727"></a>05727   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05728"></a>05728   <span class="keywordflow">if</span> (varSlot == NULL || data_p == NULL) {
<a name="l05729"></a>05729     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05730"></a>05730     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05731"></a>05731   }
<a name="l05732"></a>05732   
<a name="l05733"></a>05733   <span class="comment">// log message</span>
<a name="l05734"></a>05734   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting data for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05735"></a>05735 
<a name="l05736"></a>05736   <span class="comment">// lazy fetching of data done here</span>
<a name="l05737"></a>05737   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a> == NULL &amp;&amp; varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l05738"></a>05738     rc = <a class="code" href="group__PrivateFileIO.html#g7ca1f75354f62ce5259ec781250a2228" title="Read data from file into a variable.">_fc_readVariableData</a>(variable);
<a name="l05739"></a>05739     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l05740"></a>05740       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Lazy loading of data for variable '%s' failed"</span>,
<a name="l05741"></a>05741                             varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05742"></a>05742       <span class="keywordflow">return</span> rc;
<a name="l05743"></a>05743     }
<a name="l05744"></a>05744   }
<a name="l05745"></a>05745 
<a name="l05746"></a>05746   <span class="comment">// fill in requested value</span>
<a name="l05747"></a>05747   *data_p = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a>;
<a name="l05748"></a>05748   
<a name="l05749"></a>05749   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05750"></a>05750 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd3b7cecfd0c6d488e82b426b4c114aba"></a><!-- doxytag: member="variable.c::fc_getVariableDataType" ref="gd3b7cecfd0c6d488e82b426b4c114aba" args="(FC_Variable variable, FC_DataType *datatype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableDataType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a> *&nbsp;</td>
          <td class="paramname"> <em>datatype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the data type of a variable. 
<p>
<b>Description:</b> <p>
Returns the type that the variable data is stored as (e.g. float, int, double, etc&gt;<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return datatype = FC_DT_UNKNOWN, and input check for datatype = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>datatype</em>&nbsp;</td><td>
output - type float, int, char, etc </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05498">5498</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00095">_FC_VarSlot::datatype</a>, <a class="el" href="base_8h-source.html#l00138">FC_DT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, and <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05501"></a>05501   {
<a name="l05502"></a>05502   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05503"></a>05503   
<a name="l05504"></a>05504   <span class="comment">// set up defaults</span>
<a name="l05505"></a>05505   <span class="keywordflow">if</span> (datatype != NULL) 
<a name="l05506"></a>05506     *datatype = <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9c76e1a6b572327d5433db69f08eddde1">FC_DT_UNKNOWN</a>;
<a name="l05507"></a>05507   
<a name="l05508"></a>05508   <span class="comment">// check input</span>
<a name="l05509"></a>05509   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05510"></a>05510   <span class="keywordflow">if</span> (varSlot == NULL || datatype == NULL) {
<a name="l05511"></a>05511     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05512"></a>05512     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05513"></a>05513   }
<a name="l05514"></a>05514   
<a name="l05515"></a>05515   <span class="comment">// log message</span>
<a name="l05516"></a>05516   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting data type for variable '%s'"</span>, 
<a name="l05517"></a>05517                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05518"></a>05518 
<a name="l05519"></a>05519   <span class="comment">// fill in requested value</span>
<a name="l05520"></a>05520   *datatype = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#d008d3f8bcab7eafced67cbb267b5cbc">datatype</a>;
<a name="l05521"></a>05521   
<a name="l05522"></a>05522   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05523"></a>05523 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gcd52b4ee0552c63ff2819e5f30549cbc"></a><!-- doxytag: member="variable.c::fc_getVariableInfo" ref="gcd52b4ee0552c63ff2819e5f30549cbc" args="(FC_Variable variable, int *numDataPoint, int *numComponent, FC_AssociationType *assoc, FC_MathType *mathtype, FC_DataType *datatype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableInfo           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numDataPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a> *&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> *&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a> *&nbsp;</td>
          <td class="paramname"> <em>datatype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get information about a variable. 
<p>
<b>Description:</b> <p>
Returns the number of data points and number of components in the variable (the total number of values is numDataPoint*numComponent). Also returns the association type, math type, and data type.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/16/03 RM, added setting default values to FC_**_UNKNOWN for data types and -1 for number of data points and number of components </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>numDataPoint</em>&nbsp;</td><td>
output - the number of data points </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
output - the number of components </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
output - data association (e.g. vertex, element, etc.) </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
output - the organization of components (e.g. scalar, vector, etc.) </td></tr>
<tr><td valign="top"><em>datatype</em>&nbsp;</td><td>
output - data type (e.g. int, float, etc.) </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05433">5433</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00091">_FC_VarSlot::assoc</a>, <a class="el" href="variableP_8h-source.html#l00095">_FC_VarSlot::datatype</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00138">FC_DT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00169">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00093">_FC_VarSlot::mathtype</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="variableP_8h-source.html#l00088">_FC_VarSlot::numComponent</a>, and <a class="el" href="variableP_8h-source.html#l00084">_FC_VarSlot::numDataPoint</a>.</p>

<p>Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="fcswapAssoc_8c-source.html#l00045">checkVarAndCreateName()</a>, <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="varmath_8c-source.html#l00566">fc_constOperatorVar()</a>, <a class="el" href="variable_8c-source.html#l00818">fc_copyGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l00724">fc_copyGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l02328">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l00929">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l01065">fc_copyVariableFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l01831">fc_copyVariableToRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="geom_8c-source.html#l00352">fc_getDisplacedMeshCoords()</a>, <a class="el" href="variable_8c-source.html#l06014">fc_getSeqVariableDataPointSlice()</a>, <a class="el" href="variable_8c-source.html#l05888">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="statistics_8c-source.html#l00891">fc_getSeqVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00764">fc_getSeqVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="variable_8c-source.html#l05773">fc_getVariableDataAsDataType()</a>, <a class="el" href="statistics_8c-source.html#l00212">fc_getVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00097">fc_getVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00542">fc_getVariableSubsetMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00394">fc_getVariableSubsetMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00664">fc_getVariableSubsetSum()</a>, <a class="el" href="statistics_8c-source.html#l00303">fc_getVariableSum()</a>, <a class="el" href="geom_8c-source.html#l02836">fc_getVariableWeightedDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03267">fc_getVariableWeightedDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l02734">fc_getVariableWeightedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03138">fc_getVariableWeightedSubsetCentroid()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="geom_8c-source.html#l00309">fc_isValidDisplacementVariable()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l03299">fc_mergeComponentSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="variable_8c-source.html#l06247">fc_printSeqVariableRange()</a>, <a class="el" href="subset_8c-source.html#l03570">fc_printSubsetOfVariable()</a>, <a class="el" href="variable_8c-source.html#l06094">fc_printVariable()</a>, <a class="el" href="mesh_8c-source.html#l02417">fc_releaseMesh()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l00481">fc_varOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00386">fc_varOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>, and <a class="el" href="ex3__createCharactrztn_8c-source.html#l00081">myCharacterizationFunkyAve()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05442"></a>05442   {
<a name="l05443"></a>05443   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05444"></a>05444   
<a name="l05445"></a>05445   <span class="comment">// set default values</span>
<a name="l05446"></a>05446   <span class="keywordflow">if</span> (datatype != NULL)
<a name="l05447"></a>05447     *datatype = <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9c76e1a6b572327d5433db69f08eddde1">FC_DT_UNKNOWN</a>;
<a name="l05448"></a>05448   <span class="keywordflow">if</span> (assoc != NULL)
<a name="l05449"></a>05449     *assoc = <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a>;
<a name="l05450"></a>05450   <span class="keywordflow">if</span> (numDataPoint != NULL)
<a name="l05451"></a>05451     *numDataPoint = -1;
<a name="l05452"></a>05452   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> != NULL)
<a name="l05453"></a>05453     *<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> = -1;
<a name="l05454"></a>05454   <span class="keywordflow">if</span> (mathtype != NULL)
<a name="l05455"></a>05455     *mathtype = <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb2064ff077a965e5351bcfafd26ac08236f">FC_MT_UNKNOWN</a>;
<a name="l05456"></a>05456   
<a name="l05457"></a>05457   <span class="comment">// check input</span>
<a name="l05458"></a>05458   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05459"></a>05459   <span class="keywordflow">if</span> (varSlot == NULL || 
<a name="l05460"></a>05460       (!numDataPoint &amp;&amp; !<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> &amp;&amp; !assoc &amp;&amp; !mathtype &amp;&amp; !datatype)) { 
<a name="l05461"></a>05461      <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s, invalid variable"</span>, 
<a name="l05462"></a>05462               <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05463"></a>05463     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05464"></a>05464   }
<a name="l05465"></a>05465   
<a name="l05466"></a>05466   <span class="comment">// log message</span>
<a name="l05467"></a>05467   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting info for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05468"></a>05468 
<a name="l05469"></a>05469   <span class="comment">// fill in requested values</span>
<a name="l05470"></a>05470   <span class="keywordflow">if</span> (datatype != NULL)
<a name="l05471"></a>05471     *datatype = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#d008d3f8bcab7eafced67cbb267b5cbc">datatype</a>;
<a name="l05472"></a>05472   <span class="keywordflow">if</span> (assoc != NULL)
<a name="l05473"></a>05473     *assoc = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#c9e804c6a08dd9757651d15d09963015">assoc</a>;
<a name="l05474"></a>05474   <span class="keywordflow">if</span> (numDataPoint != NULL)
<a name="l05475"></a>05475     *numDataPoint = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#f2987ccafac1c49c016fc2e3fcd218ac">numDataPoint</a>;
<a name="l05476"></a>05476   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> != NULL)
<a name="l05477"></a>05477     *<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7c8e3668b0bc0c037d671ee75af96279">numComponent</a>;
<a name="l05478"></a>05478   <span class="keywordflow">if</span> (mathtype != NULL)
<a name="l05479"></a>05479     *mathtype = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#dc53e54a808b2a065c1c8965ab240b7e">mathtype</a>;
<a name="l05480"></a>05480   
<a name="l05481"></a>05481   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05482"></a>05482 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g5dfa6a1adb587b1f865bceb83b0824ab"></a><!-- doxytag: member="variable.c::fc_getVariableMathType" ref="g5dfa6a1adb587b1f865bceb83b0824ab" args="(FC_Variable variable, FC_MathType *mathtype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableMathType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a> *&nbsp;</td>
          <td class="paramname"> <em>mathtype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the math type of a variable. 
<p>
<b>Description:</b> <p>
The math type of a data point describes the organization of the data point's components. E.g. FC_MT_VECTOR describes a vector organization of the components like X, Y &amp; Z.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return mathtype = FC_MT_UNKNOWN, and input check for mathtype = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
output - the math type of the the data points </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05624">5624</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00169">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00093">_FC_VarSlot::mathtype</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05627"></a>05627   {
<a name="l05628"></a>05628   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05629"></a>05629   
<a name="l05630"></a>05630   <span class="comment">// set default values</span>
<a name="l05631"></a>05631   <span class="keywordflow">if</span> (mathtype != NULL)
<a name="l05632"></a>05632     *mathtype = <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb2064ff077a965e5351bcfafd26ac08236f">FC_MT_UNKNOWN</a>; 
<a name="l05633"></a>05633   
<a name="l05634"></a>05634   <span class="comment">// check input</span>
<a name="l05635"></a>05635   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05636"></a>05636   <span class="keywordflow">if</span> (varSlot == NULL || mathtype == NULL) {
<a name="l05637"></a>05637     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05638"></a>05638     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05639"></a>05639   }
<a name="l05640"></a>05640   
<a name="l05641"></a>05641   <span class="comment">// log message</span>
<a name="l05642"></a>05642   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting math type for variable '%s'"</span>, 
<a name="l05643"></a>05643                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05644"></a>05644 
<a name="l05645"></a>05645   <span class="comment">// fill in requested value</span>
<a name="l05646"></a>05646   *mathtype = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#dc53e54a808b2a065c1c8965ab240b7e">mathtype</a>;
<a name="l05647"></a>05647   
<a name="l05648"></a>05648   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05649"></a>05649 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g233584b319c5dd90a13582fc9ac3484e"></a><!-- doxytag: member="variable.c::fc_getVariableName" ref="g233584b319c5dd90a13582fc9ac3484e" args="(FC_Variable variable, char **varName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>varName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return name of a variable. 
<p>
<b>Description:</b> <p>
Return the name associated with a variable handle. Space is allocated for the string so it needs to be freed by the user when finished.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>Aug, 9, 2002. W Koegler Used to be _fc_get_vid_name. Now it's public.</li><li>12/16/03 RM, added default NULL return value </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
output - variable name, space allocated here and must be freed by user when finished </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05276">5276</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="fcswapAssoc_8c-source.html#l00045">checkVarAndCreateName()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00439">doSingles()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l03056">fc_createComponentSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="subset_8c-source.html#l03570">fc_printSubsetOfVariable()</a>, <a class="el" href="volumeSegments_8c-source.html#l00378">isThresholdable()</a>, <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00324">makeIntersecting()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00402">makeNormal()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00535">origWriteout()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00591">writeoutCompare()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05280"></a>05280   {
<a name="l05281"></a>05281   <span class="keywordtype">char</span> *cp;
<a name="l05282"></a>05282   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05283"></a>05283   
<a name="l05284"></a>05284   <span class="comment">// set default return value</span>
<a name="l05285"></a>05285   <span class="keywordflow">if</span> (varName)
<a name="l05286"></a>05286     *varName = NULL;
<a name="l05287"></a>05287   
<a name="l05288"></a>05288   <span class="comment">// check input</span>
<a name="l05289"></a>05289   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05290"></a>05290   <span class="keywordflow">if</span> (varSlot == NULL || varName == NULL) { 
<a name="l05291"></a>05291     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05292"></a>05292     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05293"></a>05293   }
<a name="l05294"></a>05294   
<a name="l05295"></a>05295   <span class="comment">// log message</span>
<a name="l05296"></a>05296   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting name for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05297"></a>05297 
<a name="l05298"></a>05298   <span class="comment">// copy name</span>
<a name="l05299"></a>05299   cp = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>;
<a name="l05300"></a>05300   *varName = malloc(strlen(cp) + 1);
<a name="l05301"></a>05301   <span class="keywordflow">if</span> (*varName == NULL) {
<a name="l05302"></a>05302     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l05303"></a>05303     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l05304"></a>05304   }
<a name="l05305"></a>05305   strcpy(*varName, cp);
<a name="l05306"></a>05306 
<a name="l05307"></a>05307   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05308"></a>05308 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gb3e6e14f099d7870ee2c38ccccf87544"></a><!-- doxytag: member="variable.c::fc_getVariableNumComponent" ref="gb3e6e14f099d7870ee2c38ccccf87544" args="(FC_Variable variable, int *numComponent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableNumComponent           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numComponent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return number of components of a variable. 
<p>
<b>Description:</b> <p>
Return the number of components that make up a data point. This will always be 1 for scalar data, 2+ for vectors, etc. The total number of data values is numDataPoint * numComponent.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return numComponent = -1, and input check for numComponent = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
output - number of components </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05582">5582</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="variableP_8h-source.html#l00088">_FC_VarSlot::numComponent</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="subsetter_8c-source.html#l00329">createThresholdableVar()</a>, <a class="el" href="variable_8c-source.html#l03056">fc_createComponentSeqVariables()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="volumeSegments_8c-source.html#l00378">isThresholdable()</a>, and <a class="el" href="loadHistory_8c-source.html#l00064">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05585"></a>05585   {
<a name="l05586"></a>05586   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05587"></a>05587   
<a name="l05588"></a>05588   <span class="comment">// set up defaults</span>
<a name="l05589"></a>05589   <span class="keywordflow">if</span>(<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> != NULL)
<a name="l05590"></a>05590     *<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> = -1 ; 
<a name="l05591"></a>05591   
<a name="l05592"></a>05592   <span class="comment">// check input</span>
<a name="l05593"></a>05593   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05594"></a>05594   <span class="keywordflow">if</span> (varSlot == NULL || <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> == NULL) {
<a name="l05595"></a>05595     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05596"></a>05596     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05597"></a>05597   }
<a name="l05598"></a>05598   
<a name="l05599"></a>05599   <span class="comment">// log message</span>
<a name="l05600"></a>05600   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting numComponent for variable '%s'"</span>, 
<a name="l05601"></a>05601                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05602"></a>05602 
<a name="l05603"></a>05603   <span class="comment">// fill in requested value</span>
<a name="l05604"></a>05604   *<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7c8e3668b0bc0c037d671ee75af96279">numComponent</a>;
<a name="l05605"></a>05605   
<a name="l05606"></a>05606   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05607"></a>05607 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g2af8bf7fdb2852fe2ddd06fd94ee4caa"></a><!-- doxytag: member="variable.c::fc_getVariableNumDataPoint" ref="g2af8bf7fdb2852fe2ddd06fd94ee4caa" args="(FC_Variable variable, int *numDataPoint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariableNumDataPoint           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numDataPoint</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return number of data points in a variable. 
<p>
<b>Description:</b> <p>
The number of data points will be equal to the number of mesh subentities that the variable is associated with. NumComponent is the number of values per point. The total number of data values is numDataPoint * numComponent;<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return numDataPoint = -1, and input check for numDataPoint = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>numDataPoint</em>&nbsp;</td><td>
output - count of data items </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05667">5667</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="variableP_8h-source.html#l00084">_FC_VarSlot::numDataPoint</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="geom_8c-source.html#l04240">fc_getDisplacedSubsetVolume()</a>, <a class="el" href="geom_8c-source.html#l04129">fc_getSubsetVolume()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05670"></a>05670   { 
<a name="l05671"></a>05671   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05672"></a>05672   
<a name="l05673"></a>05673   <span class="comment">// set default values</span>
<a name="l05674"></a>05674   <span class="keywordflow">if</span>(numDataPoint != NULL)
<a name="l05675"></a>05675     *numDataPoint = -1;
<a name="l05676"></a>05676   
<a name="l05677"></a>05677   <span class="comment">// check input</span>
<a name="l05678"></a>05678   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05679"></a>05679   <span class="keywordflow">if</span> (varSlot == NULL || numDataPoint == NULL) {
<a name="l05680"></a>05680     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05681"></a>05681     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05682"></a>05682   }
<a name="l05683"></a>05683   
<a name="l05684"></a>05684   <span class="comment">// log message</span>
<a name="l05685"></a>05685   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting numDataPoint for variable '%s'"</span>, 
<a name="l05686"></a>05686                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l05687"></a>05687 
<a name="l05688"></a>05688   <span class="comment">// fill in requested value</span>
<a name="l05689"></a>05689   *numDataPoint = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#f2987ccafac1c49c016fc2e3fcd218ac">numDataPoint</a>;
<a name="l05690"></a>05690   
<a name="l05691"></a>05691   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l05692"></a>05692 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ga96777675a667d79871c93c54729bde4"></a><!-- doxytag: member="variable.c::fc_getVariables" ref="ga96777675a667d79871c93c54729bde4" args="(FC_Mesh mesh, int *numVar, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_getVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the variables in a mesh. 
<p>
<b>Description:</b> <p>
Returns an array of variables in the mesh. The caller is responsible for freeing the array of variable handles.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>2003-NOV-14 WSK Changed to only names of basic variables, not all.</li><li>12/11/03 RM, added default return values, numVar = -1, varNames = NULL check input/output for numVar = NULL</li><li>9/8/04 WSK, changed to return variable handles instead of variable names. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numVar</em>&nbsp;</td><td>
output - number of variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - array of variable handles </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03573">3573</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06565">_fc_getVarSlotFromID()</a>, <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numBasicVar</a>.</p>

<p>Referenced by <a class="el" href="exodusio_8c-source.html#l01933">_fc_writeExodusDataset()</a>, <a class="el" href="mesh_8c-source.html#l00471">fc_copyMesh()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="mesh_8c-source.html#l02626">fc_deleteMesh()</a>, <a class="el" href="mesh_8c-source.html#l02417">fc_releaseMesh()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, and <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03577"></a>03577   {
<a name="l03578"></a>03578   <span class="keywordtype">int</span> i;
<a name="l03579"></a>03579   <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l03580"></a>03580   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l03581"></a>03581   
<a name="l03582"></a>03582   <span class="comment">// set up defaults</span>
<a name="l03583"></a>03583   <span class="keywordflow">if</span> (numVar != NULL)
<a name="l03584"></a>03584     *numVar = -1;
<a name="l03585"></a>03585   <span class="keywordflow">if</span> (variables != NULL)
<a name="l03586"></a>03586     *variables = NULL;
<a name="l03587"></a>03587   
<a name="l03588"></a>03588   <span class="comment">// check input</span>
<a name="l03589"></a>03589   meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(mesh);
<a name="l03590"></a>03590   <span class="keywordflow">if</span> (meshSlot == NULL || numVar == NULL || variables == NULL) {
<a name="l03591"></a>03591     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03592"></a>03592     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03593"></a>03593   }
<a name="l03594"></a>03594   
<a name="l03595"></a>03595   <span class="comment">// log message</span>
<a name="l03596"></a>03596   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variables for mesh '%s'"</span>,
<a name="l03597"></a>03597                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l03598"></a>03598 
<a name="l03599"></a>03599   <span class="comment">// get num variable</span>
<a name="l03600"></a>03600   *numVar = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>;
<a name="l03601"></a>03601   
<a name="l03602"></a>03602   <span class="comment">// get variables</span>
<a name="l03603"></a>03603   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a> &gt; 0) {
<a name="l03604"></a>03604     *variables = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>) * meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>);
<a name="l03605"></a>03605     <span class="keywordflow">if</span> (*variables == NULL) {
<a name="l03606"></a>03606       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03607"></a>03607       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03608"></a>03608     }
<a name="l03609"></a>03609     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#0f3779ebce33939a67b60da26f767be6">numBasicVar</a>; i++) {
<a name="l03610"></a>03610       varSlot = <a class="code" href="group__PrivateVariable.html#g7e52a44d74e2d0edf8abeb9afdd90557" title="Get a variable slot based on ID.">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#c599e2802ddaeb185a171b147f2c4ba1">basicVarIDs</a>[i]);
<a name="l03611"></a>03611       <a class="code" href="group__PrivateTable.html#ge2db60dbe242b8f40b2677dce8db19de" title="Get a handle from a table slot.">_FC_GET_HANDLE</a>((*variables)[i], varSlot);
<a name="l03612"></a>03612     }
<a name="l03613"></a>03613   }
<a name="l03614"></a>03614   
<a name="l03615"></a>03615   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l03616"></a>03616 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gac07e226e274bee4de4b21db8e03ae0e"></a><!-- doxytag: member="variable.c::fc_isSeqVariableValid" ref="gac07e226e274bee4de4b21db8e03ae0e" args="(int numStep, FC_Variable *seqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isSeqVariableValid           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that the handle refers to a valid variable. 
<p>
<b>Description:</b> <p>
Returns 1 (true) if the seq variable is valid, and 0 (false) if it is not. (Valid means numStep is correct and all variable handles are valid and in correct order).<p>
<b>Modifications:</b> <ul>
<li>09/23/04 WSK Created.</li><li>9/19/2006 WSD Added behavior so handles variables owned by datasets as well. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in seq var </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - seq var (array of vars) </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05178">5178</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="sequence_8c-source.html#l02142">_fc_getSeqSlot()</a>, <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="variable_8c-source.html#l05156">fc_isVariableValid()</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="meshP_8h-source.html#l00189">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>, <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>, <a class="el" href="meshP_8h-source.html#l00191">_FC_MeshSlot::seqVarIDs</a>, <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.</p>

<p>Referenced by <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="variable_8c-source.html#l04830">fc_changeSeqVariableName()</a>, <a class="el" href="varmath_8c-source.html#l01394">fc_constOperatorSeqVar()</a>, <a class="el" href="variable_8c-source.html#l00818">fc_copyGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l02328">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l03056">fc_createComponentSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l05062">fc_deleteSeqVariable()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l05317">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l06014">fc_getSeqVariableDataPointSlice()</a>, <a class="el" href="statistics_8c-source.html#l00891">fc_getSeqVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00764">fc_getSeqVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l03299">fc_mergeComponentSeqVariables()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="varmath_8c-source.html#l00655">fc_operatorSeqVar()</a>, <a class="el" href="variable_8c-source.html#l04926">fc_releaseSeqVariable()</a>, <a class="el" href="varmath_8c-source.html#l00979">fc_seqConstOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02640">fc_seqVarBinaryFunctionConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02414">fc_seqVarBinaryFunctionSeqConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02546">fc_seqVarBinaryFunctionSeqVarConst()</a>, <a class="el" href="varmath_8c-source.html#l02284">fc_seqVarBinaryFunctionSeqVarSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l02179">fc_seqVarBinaryFunctionSeqVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01296">fc_seqVarOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00858">fc_seqVarOperatorSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l00747">fc_seqVarOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l02094">fc_seqVarUnaryFunction()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, and <a class="el" href="subsetter_8c-source.html#l00129">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05181"></a>05181   {
<a name="l05182"></a>05182   <span class="keywordtype">int</span> i;
<a name="l05183"></a>05183   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l05184"></a>05184   <a class="code" href="struct__FC__SeqSlot.html" title="Sequence Slot Structure for the Sequence Table.">_FC_SeqSlot</a>* seqSlot;
<a name="l05185"></a>05185   <span class="keywordtype">int</span> var_id;  <span class="comment">// id's into mesh's slotID arrays</span>
<a name="l05186"></a>05186   <span class="keywordtype">int</span> num, **slots;
<a name="l05187"></a>05187 
<a name="l05188"></a>05188   <span class="comment">// quick check</span>
<a name="l05189"></a>05189   <span class="keywordflow">if</span> (numStep &lt; 0 || seqVar == NULL || !<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(seqVar[0])) 
<a name="l05190"></a>05190     <span class="keywordflow">return</span> 0;
<a name="l05191"></a>05191   <span class="comment">// check that numStep agrees with sequence</span>
<a name="l05192"></a>05192   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(seqVar[0]);
<a name="l05193"></a>05193   seqSlot = <a class="code" href="group__PrivateSequence.html#g311b52c3aa6307afba63b26ad035afe5" title="Get a sequence slot from a sequence handle.">_fc_getSeqSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#bf719e972f05ce7ba74975fcdbccfd1a">sequence</a>);
<a name="l05194"></a>05194   <span class="keywordflow">if</span> (numStep != seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#ca6023886cf92e3f25c09d9a315e3631">numStep</a>)
<a name="l05195"></a>05195     <span class="keywordflow">return</span> 0;
<a name="l05196"></a>05196   <span class="comment">// check that all steps are valid and are from the same variable</span>
<a name="l05197"></a>05197   <span class="comment">// instead of checking metadata, we check against the parent's list</span>
<a name="l05198"></a>05198   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>)) {
<a name="l05199"></a>05199     <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a> *dsSlot =<a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a>);
<a name="l05200"></a>05200     num = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#512d773874da2f2bd5963ea5eb7ce1fb">numSeqVar</a>;
<a name="l05201"></a>05201     slots = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#ed1fa3ef16f6cf89bba6942a38eefae4">seqVarIDs</a>;
<a name="l05202"></a>05202   }
<a name="l05203"></a>05203   <span class="keywordflow">else</span> {
<a name="l05204"></a>05204     <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a> *meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>);
<a name="l05205"></a>05205     num = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#81e3175523b0d462ac5e59fae9201fe7">numSeqVar</a>;
<a name="l05206"></a>05206     slots = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#e9d6f6c85dc084548c919597d128ff75">seqVarIDs</a>;
<a name="l05207"></a>05207   }
<a name="l05208"></a>05208   var_id = -1;
<a name="l05209"></a>05209   <span class="keywordflow">for</span> (i = 0; i &lt; num; i++) {
<a name="l05210"></a>05210     <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a9f69eb1eb640814d30ffec3d30077a5">slotID</a> == slots[i][0]) {
<a name="l05211"></a>05211       var_id = i;
<a name="l05212"></a>05212       <span class="keywordflow">break</span>;
<a name="l05213"></a>05213     }
<a name="l05214"></a>05214   }
<a name="l05215"></a>05215   <span class="keywordflow">if</span> (var_id == -1) {
<a name="l05216"></a>05216     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"bad code? shouldn't ever happen?"</span>);
<a name="l05217"></a>05217     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l05218"></a>05218   }
<a name="l05219"></a>05219   <span class="keywordflow">for</span> (i = 1; i &lt; numStep; i++) {
<a name="l05220"></a>05220     <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(seqVar[i]) ||
<a name="l05221"></a>05221      seqVar[i].slotID != slots[var_id][i])
<a name="l05222"></a>05222       <span class="keywordflow">return</span> 0;
<a name="l05223"></a>05223   }
<a name="l05224"></a>05224 
<a name="l05225"></a>05225   <span class="comment">// passed all tests</span>
<a name="l05226"></a>05226   <span class="keywordflow">return</span> 1;
<a name="l05227"></a>05227 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ge37eb4dc16b959c2adb548c6f195decb"></a><!-- doxytag: member="variable.c::fc_isVariableGlobal" ref="ge37eb4dc16b959c2adb548c6f195decb" args="(FC_Variable variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isVariableGlobal           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that whether a variable is global. 
<p>
<b>Description:</b> <p>
Returns 1 (true) if the variable is a global variable, 0 (false) if it is not, and an error code (&lt; 0) if the handle is not valid.<p>
NOTE: The test for a global variable is that the owning mesh is NULL.<p>
<b>Modifications:</b> <ul>
<li>09/21/2006 </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05243">5243</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00774">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, and <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>.</p>

<p>Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="threshold_8c-source.html#l00224">fc_createThresholdRangeSubset()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="variable_8c-source.html#l00469">fc_setVariableData()</a>, <a class="el" href="variable_8c-source.html#l00604">fc_setVariableDataPtr()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l00386">fc_varOperatorVar()</a>, and <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05245"></a>05245   {
<a name="l05246"></a>05246   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a> *varSlot;
<a name="l05247"></a>05247 
<a name="l05248"></a>05248   <span class="comment">// check input</span>
<a name="l05249"></a>05249   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l05250"></a>05250   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l05251"></a>05251     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l05252"></a>05252     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l05253"></a>05253   }
<a name="l05254"></a>05254   
<a name="l05255"></a>05255   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>, <a class="code" href="group__Handles.html#gb9dbcbf01def2e3490de3b1325bec3aa" title="Null (default) mesh handle.">FC_NULL_MESH</a>))
<a name="l05256"></a>05256     <span class="keywordflow">return</span> 1;
<a name="l05257"></a>05257   <span class="keywordflow">else</span>
<a name="l05258"></a>05258     <span class="keywordflow">return</span> 0;
<a name="l05259"></a>05259 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g31f5830cdcafcce9ffec2c8bb2ff46e2"></a><!-- doxytag: member="variable.c::fc_isVariableValid" ref="g31f5830cdcafcce9ffec2c8bb2ff46e2" args="(FC_Variable variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isVariableValid           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that the handle refers to a valid variable. 
<p>
<b>Description:</b> <p>
Returns 1 (true) if the handle is valid, and 0 (false) if it is not.<p>
<b>Modifications:</b> <ul>
<li>05/25/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l05156">5156</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="table_8c-source.html#l00332">_fc_isHandleValid()</a>, <a class="el" href="base_8h-source.html#l00301">FC_Variable::slotID</a>, <a class="el" href="base_8h-source.html#l00302">FC_Variable::uID</a>, and <a class="el" href="variable_8c-source.html#l00096">varTableSize</a>.</p>

<p>Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="geom_8c-source.html#l05181">_fc_getSubsetsProximityArgsTest()</a>, <a class="el" href="geom_8c-source.html#l06312">_fc_getVertexIDsWithinBoundingBoxUsingVertexBin()</a>, <a class="el" href="geom_8c-source.html#l06462">_fc_getVertexIDsWithinSphereUsingVertexBin()</a>, <a class="el" href="varmath_8c-source.html#l00566">fc_constOperatorVar()</a>, <a class="el" href="variable_8c-source.html#l02735">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l01065">fc_copyVariableFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l01831">fc_copyVariableToRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="threshold_8c-source.html#l00224">fc_createThresholdRangeSubset()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="variable_8c-source.html#l05773">fc_getVariableDataAsDataType()</a>, <a class="el" href="statistics_8c-source.html#l00212">fc_getVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00097">fc_getVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00542">fc_getVariableSubsetMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00394">fc_getVariableSubsetMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00664">fc_getVariableSubsetSum()</a>, <a class="el" href="statistics_8c-source.html#l00303">fc_getVariableSum()</a>, <a class="el" href="geom_8c-source.html#l02836">fc_getVariableWeightedDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03267">fc_getVariableWeightedDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l02734">fc_getVariableWeightedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03138">fc_getVariableWeightedSubsetCentroid()</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="geom_8c-source.html#l00309">fc_isValidDisplacementVariable()</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="subset_8c-source.html#l03570">fc_printSubsetOfVariable()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="mesh_8c-source.html#l02091">fc_setSphereDisplacementVariable()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l00481">fc_varOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l00386">fc_varOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="subsetter_8c-source.html#l00129">main()</a>, and <a class="el" href="ex3__createCharactrztn_8c-source.html#l00081">myCharacterizationFunkyAve()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l05158"></a>05158   {
<a name="l05159"></a>05159   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#g7da0137a7b29468ab994bb65e96ebf99" title="Check that a handle is valid.">_fc_isHandleValid</a>(variable.<a class="code" href="structFC__Variable.html#b5458411865b62687ac2a9d3587ef902">slotID</a>, variable.<a class="code" href="structFC__Variable.html#f49cae8091fb029209082c23391bf751">uID</a>, <a class="code" href="group__PrivateVariable.html#g2b0994b36a3bbaaf92cf9036fb45dd61" title="The number of allocated slots in the variable table.">varTableSize</a>,
<a name="l05160"></a>05160                            (<a class="code" href="struct__FC__SlotHeader.html" title="Slot Header.">_FC_SlotHeader</a>**)<a class="code" href="group__PrivateVariable.html#g63a07ab14cf10fb0c76e064a4f6ee781" title="The variable table.">varTable</a>);
<a name="l05161"></a>05161 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ga707eadb0047cdcde7186143d6d75edf"></a><!-- doxytag: member="variable.c::fc_mergeComponentSeqVariables" ref="ga707eadb0047cdcde7186143d6d75edf" args="(int numComponent, int numStep, FC_Variable **compSeqVars, char *name, FC_MathType mathtype, FC_Variable **newSeqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_mergeComponentSeqVariables           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>compSeqVars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a>&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>newSeqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new multicomponent seq variable from a group of scalars. 
<p>
<b>Description:</b> <p>
This routines creates a new multicomponent sequence variable from a group of scalar sequence variables. The components must all be on the same sequence and on the same mesh, they must all have the same association type and data type.<p>
<b>Modifications:</b> <ul>
<li>01/19/05 WSK, Created.</li><li>9/22/2006 WSD modified to handle global vars </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
input - the number of components </td></tr>
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variables </td></tr>
<tr><td valign="top"><em>compSeqVars</em>&nbsp;</td><td>
input - the array of component seqVars </td></tr>
<tr><td valign="top"><em>name</em>&nbsp;</td><td>
input - the name of the new merged var </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
input - the mathtype of the new merged var </td></tr>
<tr><td valign="top"><em>newSeqVar</em>&nbsp;</td><td>
output - the new merged seq var </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03299">3299</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l02735">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l05392">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05317">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00263">fc_isMathTypeValid()</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="base_8h-source.html#l00170">FC_MT_SCALAR</a>, <a class="el" href="base_8h-source.html#l00169">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="variable_8c-source.html#l04695">fc_getOrGenerateUniqueSeqVariableByName()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03306"></a>03306   {
<a name="l03307"></a>03307   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03308"></a>03308   <span class="keywordtype">int</span> i, j;
<a name="l03309"></a>03309   <span class="keywordtype">int</span> numData, temp_numData, temp_numComp;
<a name="l03310"></a>03310   <a class="code" href="structFC__Sequence.html" title="Sequence Handle.">FC_Sequence</a> sequence, temp_sequence;
<a name="l03311"></a>03311   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh, temp_mesh;
<a name="l03312"></a>03312   <a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a> *merged_vars, *temp_vars;
<a name="l03313"></a>03313   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc, temp_assoc;
<a name="l03314"></a>03314   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype, temp_datatype;
<a name="l03315"></a>03315 
<a name="l03316"></a>03316   <span class="comment">// set default return values</span>
<a name="l03317"></a>03317   <span class="keywordflow">if</span> (newSeqVar)
<a name="l03318"></a>03318     *newSeqVar = NULL;
<a name="l03319"></a>03319 
<a name="l03320"></a>03320   <span class="comment">// check input</span>
<a name="l03321"></a>03321   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> &lt; 2 || !compSeqVars || !name || 
<a name="l03322"></a>03322       !<a class="code" href="group__DataTypes.html#g8111b811b3159b9f82a271fa9c923e9e" title="Verify that the given value is valid for this enum.">fc_isMathTypeValid</a>(mathtype) || mathtype == <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb2064ff077a965e5351bcfafd26ac08236f">FC_MT_UNKNOWN</a> || 
<a name="l03323"></a>03323       mathtype == <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a> || !newSeqVar) {
<a name="l03324"></a>03324     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03325"></a>03325     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03326"></a>03326   }
<a name="l03327"></a>03327   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>; i++) {
<a name="l03328"></a>03328     <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(numStep, compSeqVars[i])) {
<a name="l03329"></a>03329       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03330"></a>03330       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03331"></a>03331     }
<a name="l03332"></a>03332   }
<a name="l03333"></a>03333   
<a name="l03334"></a>03334   <span class="comment">// log message</span>
<a name="l03335"></a>03335   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Merging component seq variables into new seq var."</span>);
<a name="l03336"></a>03336 
<a name="l03337"></a>03337   <span class="comment">// get &amp; test component seq variable's info</span>
<a name="l03338"></a>03338   <span class="keywordflow">for</span> (i = 0; i &lt; numComponent; i++) {
<a name="l03339"></a>03339     rc = <a class="code" href="group__Variable.html#g6808d2015766d9b530b93375f42296a3" title="Get the parent mesh of the variable.">fc_getMeshFromVariable</a>(compSeqVars[i][0], &amp;temp_mesh);
<a name="l03340"></a>03340     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03341"></a>03341       <span class="keywordflow">return</span> rc;
<a name="l03342"></a>03342     <span class="keywordflow">if</span> (i == 0)
<a name="l03343"></a>03343       mesh = temp_mesh;
<a name="l03344"></a>03344     <span class="keywordflow">else</span> {
<a name="l03345"></a>03345       <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(mesh, temp_mesh)) {
<a name="l03346"></a>03346         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Components were not all on the same mesh"</span>);
<a name="l03347"></a>03347         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03348"></a>03348       }  
<a name="l03349"></a>03349     }
<a name="l03350"></a>03350     rc = <a class="code" href="group__Variable.html#g314a992ec5ba07d7075f1172b13ef166" title="Get the parent sequence of a sequence variable.">fc_getSequenceFromSeqVariable</a>(numStep, compSeqVars[i],
<a name="l03351"></a>03351                                        &amp;temp_sequence);
<a name="l03352"></a>03352     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03353"></a>03353       <span class="keywordflow">return</span> rc;
<a name="l03354"></a>03354     <span class="keywordflow">if</span> (i == 0)
<a name="l03355"></a>03355       sequence = temp_sequence;
<a name="l03356"></a>03356     <span class="keywordflow">else</span> {
<a name="l03357"></a>03357       <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(sequence, temp_sequence)) {
<a name="l03358"></a>03358         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Components were not all on the same sequence"</span>);
<a name="l03359"></a>03359         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03360"></a>03360       }  
<a name="l03361"></a>03361     }
<a name="l03362"></a>03362     rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(compSeqVars[i][0], &amp;temp_numData, &amp;temp_numComp, 
<a name="l03363"></a>03363                             &amp;temp_assoc, NULL, &amp;temp_datatype);
<a name="l03364"></a>03364     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03365"></a>03365       <span class="keywordflow">return</span> rc;
<a name="l03366"></a>03366     <span class="keywordflow">if</span> (temp_numComp != 1) {
<a name="l03367"></a>03367       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Component %d was not a scalar"</span>, i);
<a name="l03368"></a>03368       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03369"></a>03369     }
<a name="l03370"></a>03370     <span class="keywordflow">if</span> (i == 0) {
<a name="l03371"></a>03371       numData = temp_numData;
<a name="l03372"></a>03372       assoc = temp_assoc;
<a name="l03373"></a>03373       datatype = temp_datatype;
<a name="l03374"></a>03374     }
<a name="l03375"></a>03375     <span class="keywordflow">else</span> {
<a name="l03376"></a>03376       <span class="keywordflow">if</span> (temp_numData != numData || temp_assoc != assoc || 
<a name="l03377"></a>03377           temp_datatype != datatype) {
<a name="l03378"></a>03378         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Components did not have all the same metadata"</span>);
<a name="l03379"></a>03379         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03380"></a>03380       }
<a name="l03381"></a>03381     }
<a name="l03382"></a>03382   }
<a name="l03383"></a>03383 
<a name="l03384"></a>03384   <span class="comment">// Basic procedure: use fc_mergeComponentVariables() to create a merged </span>
<a name="l03385"></a>03385   <span class="comment">// variable for each step of the seq vars, then convert merged variables</span>
<a name="l03386"></a>03386   <span class="comment">// back into a sequence var.</span>
<a name="l03387"></a>03387 
<a name="l03388"></a>03388   <span class="comment">// Make room to save merged vars</span>
<a name="l03389"></a>03389   merged_vars = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*)malloc(numStep*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l03390"></a>03390   <span class="keywordflow">if</span> (!merged_vars) {
<a name="l03391"></a>03391     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03392"></a>03392     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03393"></a>03393   }
<a name="l03394"></a>03394 
<a name="l03395"></a>03395   <span class="comment">// make merged vars</span>
<a name="l03396"></a>03396   temp_vars = (<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>*)malloc(numComponent*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html" title="Variable Handle.">FC_Variable</a>));
<a name="l03397"></a>03397   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l03398"></a>03398     <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++)
<a name="l03399"></a>03399       temp_vars[j] = compSeqVars[j][i];
<a name="l03400"></a>03400     rc = <a class="code" href="group__Variable.html#gc2336adac6d8ed9ae68ae43536d340f5" title="Creates a new multicomponent variable from a group of scalars.">fc_mergeComponentVariables</a>(numComponent, temp_vars, name, mathtype,
<a name="l03401"></a>03401                                     &amp;merged_vars[i]);
<a name="l03402"></a>03402     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03403"></a>03403       <span class="keywordflow">return</span> rc;
<a name="l03404"></a>03404   }
<a name="l03405"></a>03405   free(temp_vars);
<a name="l03406"></a>03406 
<a name="l03407"></a>03407   <span class="comment">// make merged vars into merged seqVar;</span>
<a name="l03408"></a>03408   rc = <a class="code" href="group__Variable.html#g962a68f110466d7e77d7bae3df089f20" title="Convert an array of basic vars into a sequence var.">fc_convertVariablesToSeqVariable</a>(numStep, merged_vars, sequence,
<a name="l03409"></a>03409                                         name, newSeqVar);
<a name="l03410"></a>03410   free(merged_vars);
<a name="l03411"></a>03411   <span class="keywordflow">return</span> rc;    
<a name="l03412"></a>03412 }       
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gc2336adac6d8ed9ae68ae43536d340f5"></a><!-- doxytag: member="variable.c::fc_mergeComponentVariables" ref="gc2336adac6d8ed9ae68ae43536d340f5" args="(int numComponent, FC_Variable *components, char *name, FC_MathType mathtype, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_mergeComponentVariables           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>components</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a>&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new multicomponent variable from a group of scalars. 
<p>
<b>Description:</b> <p>
This routines creates a new multicomponent variable from a group of scalar variables. The components must all be on the same mesh and have the same association type and data type.<p>
<b>Modifications:</b> <ul>
<li>05/03/04 WSK, Created.</li><li>9/22/2006 WSD modified to handle global vars </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
input - the number of components </td></tr>
<tr><td valign="top"><em>components</em>&nbsp;</td><td>
input - the components vars </td></tr>
<tr><td valign="top"><em>name</em>&nbsp;</td><td>
input - the name of the new merged var </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
input - the mathtype of the new merged var </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
output - the new merged var </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l03160">3160</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l00124">fc_createGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l00286">fc_createVariable()</a>, <a class="el" href="variable_8c-source.html#l05352">fc_getDatasetFromVariable()</a>, <a class="el" href="variable_8c-source.html#l05392">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00263">fc_isMathTypeValid()</a>, <a class="el" href="variable_8c-source.html#l05243">fc_isVariableGlobal()</a>, <a class="el" href="variable_8c-source.html#l05156">fc_isVariableValid()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8h-source.html#l00170">FC_MT_SCALAR</a>, <a class="el" href="base_8h-source.html#l00169">FC_MT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00604">fc_setVariableDataPtr()</a>, <a class="el" href="base_8c-source.html#l00741">fc_sizeofDataType()</a>, and <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="variable_8c-source.html#l04286">fc_getOrGenerateUniqueVariableByName()</a>, and <a class="el" href="variable_8c-source.html#l03299">fc_mergeComponentSeqVariables()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l03166"></a>03166   {
<a name="l03167"></a>03167         
<a name="l03168"></a>03168   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l03169"></a>03169   <span class="keywordtype">int</span> i, j;
<a name="l03170"></a>03170   <span class="keywordtype">int</span> numData, temp_numData, temp_numComp;
<a name="l03171"></a>03171   <a class="code" href="structFC__Dataset.html" title="Dataset Handle.">FC_Dataset</a> dataset, temp_dataset;
<a name="l03172"></a>03172   <a class="code" href="structFC__Mesh.html" title="Mesh Handle.">FC_Mesh</a> mesh, temp_mesh;
<a name="l03173"></a>03173   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc, temp_assoc;
<a name="l03174"></a>03174   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> datatype, temp_datatype;
<a name="l03175"></a>03175   <span class="keywordtype">void</span> **data, *new_data;
<a name="l03176"></a>03176   <span class="keywordtype">size_t</span> size;
<a name="l03177"></a>03177 
<a name="l03178"></a>03178   <span class="comment">// set default return values</span>
<a name="l03179"></a>03179   <span class="keywordflow">if</span> (new_var)
<a name="l03180"></a>03180     *new_var = <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>;
<a name="l03181"></a>03181 
<a name="l03182"></a>03182   <span class="comment">// check input</span>
<a name="l03183"></a>03183   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> &lt; 2 || components == NULL || name == NULL || 
<a name="l03184"></a>03184       !<a class="code" href="group__DataTypes.html#g8111b811b3159b9f82a271fa9c923e9e" title="Verify that the given value is valid for this enum.">fc_isMathTypeValid</a>(mathtype) || mathtype == <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb2064ff077a965e5351bcfafd26ac08236f">FC_MT_UNKNOWN</a> || 
<a name="l03185"></a>03185       mathtype == <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a> || new_var == NULL) {
<a name="l03186"></a>03186     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03187"></a>03187     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03188"></a>03188   }
<a name="l03189"></a>03189   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>; i++) {
<a name="l03190"></a>03190     <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g31f5830cdcafcce9ffec2c8bb2ff46e2" title="Check that the handle refers to a valid variable.">fc_isVariableValid</a>(components[i])) {
<a name="l03191"></a>03191       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03192"></a>03192       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03193"></a>03193     }
<a name="l03194"></a>03194   }
<a name="l03195"></a>03195   
<a name="l03196"></a>03196   <span class="comment">// log message</span>
<a name="l03197"></a>03197   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Merging component variables into new variable."</span>);
<a name="l03198"></a>03198 
<a name="l03199"></a>03199   <span class="comment">// get &amp; test component variables info</span>
<a name="l03200"></a>03200   <span class="keywordflow">for</span> (i = 0; i &lt; numComponent; i++) {
<a name="l03201"></a>03201     rc = <a class="code" href="group__Variable.html#ge86dd143aacebc8510eafaa651471745" title="Get the parent dataset of the variable.">fc_getDatasetFromVariable</a>(components[i], &amp;temp_dataset);
<a name="l03202"></a>03202     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03203"></a>03203       <span class="keywordflow">return</span> rc;
<a name="l03204"></a>03204     rc = <a class="code" href="group__Variable.html#g6808d2015766d9b530b93375f42296a3" title="Get the parent mesh of the variable.">fc_getMeshFromVariable</a>(components[i], &amp;temp_mesh);
<a name="l03205"></a>03205     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03206"></a>03206       <span class="keywordflow">return</span> rc;
<a name="l03207"></a>03207     <span class="keywordflow">if</span> (i == 0) {
<a name="l03208"></a>03208       dataset = temp_dataset;
<a name="l03209"></a>03209       mesh = temp_mesh;
<a name="l03210"></a>03210     }
<a name="l03211"></a>03211     <span class="keywordflow">else</span> {
<a name="l03212"></a>03212       <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(mesh, temp_mesh) || 
<a name="l03213"></a>03213        !<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(dataset, temp_dataset)) {
<a name="l03214"></a>03214         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03215"></a>03215         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03216"></a>03216       }  
<a name="l03217"></a>03217     }
<a name="l03218"></a>03218     rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(components[i], &amp;temp_numData, &amp;temp_numComp, 
<a name="l03219"></a>03219                               &amp;temp_assoc, NULL, &amp;temp_datatype);
<a name="l03220"></a>03220     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03221"></a>03221       <span class="keywordflow">return</span> rc;
<a name="l03222"></a>03222     <span class="keywordflow">if</span> (temp_numComp != 1) {
<a name="l03223"></a>03223       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l03224"></a>03224       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03225"></a>03225     }
<a name="l03226"></a>03226     <span class="keywordflow">if</span> (i == 0) {
<a name="l03227"></a>03227       numData = temp_numData;
<a name="l03228"></a>03228       assoc = temp_assoc;
<a name="l03229"></a>03229       datatype = temp_datatype;
<a name="l03230"></a>03230     }
<a name="l03231"></a>03231     <span class="keywordflow">else</span> {
<a name="l03232"></a>03232       <span class="keywordflow">if</span> (temp_numData != numData || temp_assoc != assoc || 
<a name="l03233"></a>03233           temp_datatype != datatype) {
<a name="l03234"></a>03234         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Components did not have all the same metadata"</span>);
<a name="l03235"></a>03235         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l03236"></a>03236       }
<a name="l03237"></a>03237     }
<a name="l03238"></a>03238   }
<a name="l03239"></a>03239 
<a name="l03240"></a>03240   <span class="comment">// get data</span>
<a name="l03241"></a>03241   data = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">void</span>*)*numComponent);
<a name="l03242"></a>03242   <span class="keywordflow">if</span> (data == NULL) {
<a name="l03243"></a>03243     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03244"></a>03244     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03245"></a>03245   }
<a name="l03246"></a>03246   <span class="keywordflow">for</span> (i = 0; i &lt; numComponent; i++) {
<a name="l03247"></a>03247     rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(components[i], &amp;data[i]);
<a name="l03248"></a>03248     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03249"></a>03249       <span class="keywordflow">return</span> rc; 
<a name="l03250"></a>03250   }
<a name="l03251"></a>03251 
<a name="l03252"></a>03252   <span class="comment">// create the new data</span>
<a name="l03253"></a>03253   size = <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(datatype);
<a name="l03254"></a>03254   new_data = malloc(size*numComponent*numData);
<a name="l03255"></a>03255   <span class="keywordflow">if</span> (new_data == NULL) {
<a name="l03256"></a>03256     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l03257"></a>03257     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l03258"></a>03258   }
<a name="l03259"></a>03259   <span class="keywordflow">for</span> (i = 0; i &lt; numComponent; i++) 
<a name="l03260"></a>03260     <span class="keywordflow">for</span> (j = 0; j &lt; numData; j++) 
<a name="l03261"></a>03261       memcpy((<span class="keywordtype">char</span>*)new_data + size*(j*numComponent+i), 
<a name="l03262"></a>03262              (<span class="keywordtype">char</span>*)data[i] + size*j, size); 
<a name="l03263"></a>03263 
<a name="l03264"></a>03264   <span class="comment">// create the new variable</span>
<a name="l03265"></a>03265   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(components[0])) 
<a name="l03266"></a>03266     rc = <a class="code" href="group__Variable.html#gc15b2d6deabd12b43786430eb16f02f6" title="Create a new global variable.">fc_createGlobalVariable</a>(dataset, name, new_var);
<a name="l03267"></a>03267   <span class="keywordflow">else</span>
<a name="l03268"></a>03268     rc = <a class="code" href="group__Variable.html#ga2ffd025a786dbe93fc7f8defb969631" title="Create a new variable.">fc_createVariable</a>(mesh, name, new_var);
<a name="l03269"></a>03269   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03270"></a>03270     <span class="keywordflow">return</span> rc;
<a name="l03271"></a>03271   rc = <a class="code" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr</a>(*new_var, numData, numComponent, assoc, mathtype, 
<a name="l03272"></a>03272                              datatype, (<span class="keywordtype">void</span>*)new_data);
<a name="l03273"></a>03273   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l03274"></a>03274     <span class="keywordflow">return</span> rc;
<a name="l03275"></a>03275 
<a name="l03276"></a>03276   <span class="comment">// cleanup</span>
<a name="l03277"></a>03277   <span class="comment">// don't free new_data; </span>
<a name="l03278"></a>03278   <span class="comment">// don't free data's components</span>
<a name="l03279"></a>03279   free(data); 
<a name="l03280"></a>03280 
<a name="l03281"></a>03281   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;    
<a name="l03282"></a>03282 }       
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gafedecdb3d843b26c1bfd19d380603da"></a><!-- doxytag: member="variable.c::fc_printSeqVariable" ref="gafedecdb3d843b26c1bfd19d380603da" args="(int numStep, FC_Variable *seqVars, char *label, int print_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_printSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print sequence variable meta data to stdout, and optionally the data values. 
<p>
<b>Modifications:</b> <ul>
<li>11/20/03 WSK Created.</li><li>07/23/2007 CDU Turned into a stub that calls fc_printSeqVariableRange </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVars</em>&nbsp;</td><td>
input - the steps of the sequence variable </td></tr>
<tr><td valign="top"><em>label</em>&nbsp;</td><td>
input - label to prepend variable name with, can be NULL </td></tr>
<tr><td valign="top"><em>print_data</em>&nbsp;</td><td>
input - 1 = print the data values. </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l06228">6228</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06247">fc_printSeqVariableRange()</a>.</p>

<p>Referenced by <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l06234"></a>06234   {
<a name="l06235"></a>06235   <span class="keywordflow">return</span> <a class="code" href="group__Variable.html#ge11cf719983d7d612990b3d414e11e0d" title="Print sequence variable meta data to stdout, and optionally the data values (with...">fc_printSeqVariableRange</a>(numStep, seqVars, -1, -2, label, print_data);
<a name="l06236"></a>06236 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ge11cf719983d7d612990b3d414e11e0d"></a><!-- doxytag: member="variable.c::fc_printSeqVariableRange" ref="ge11cf719983d7d612990b3d414e11e0d" args="(int numStep, FC_Variable *seqVars, int range_start, int range_stop, char *label, int print_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_printSeqVariableRange           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>range_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>range_stop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print sequence variable meta data to stdout, and optionally the data values (with start and stop index values). 
<p>
<b>Modifications:</b> <ul>
<li>11/20/03 WSK Created.</li><li>07/23/2007 CDU Moved guts of printSeqVariable to here and added ranges</li><li>10/31/2007 CDU Added flag to allow printing of reduced number of digits </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVars</em>&nbsp;</td><td>
input - the steps of the sequence variable </td></tr>
<tr><td valign="top"><em>range_start</em>&nbsp;</td><td>
input - offset of first variable to print or -1 for first, -2 for last </td></tr>
<tr><td valign="top"><em>range_stop</em>&nbsp;</td><td>
input - offset of last variable to print or -1 for first, -2 for last </td></tr>
<tr><td valign="top"><em>label</em>&nbsp;</td><td>
input - label to prepend variable name with, can be NULL </td></tr>
<tr><td valign="top"><em>print_data</em>&nbsp;</td><td>
input - 1 = print the data values. 2 = print the data values in exponent form with 5 digits of precision </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l06247">6247</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00139">FC_DT_CHAR</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00149">FC_DT_FLOAT</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="base_8h-source.html#l00138">FC_DT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00477">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00419">fc_getDataTypeText()</a>, <a class="el" href="base_8c-source.html#l00448">fc_getMathTypeText()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, and <a class="el" href="tableP_8h-source.html#l00057">INDENT_STR</a>.</p>

<p>Referenced by <a class="el" href="variable_8c-source.html#l06228">fc_printSeqVariable()</a>, and <a class="el" href="fcdump_8c-source.html#l00194">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l06258"></a>06258   {
<a name="l06259"></a>06259   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l06260"></a>06260   <span class="keywordtype">int</span> i, j, k;
<a name="l06261"></a>06261   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlots[numStep];
<a name="l06262"></a>06262   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l06263"></a>06263   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l06264"></a>06264   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathType;
<a name="l06265"></a>06265   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> dataType;
<a name="l06266"></a>06266   <span class="keywordtype">void</span>* dbuf;
<a name="l06267"></a>06267   <span class="keywordtype">int</span> start, stop, mod;
<a name="l06268"></a>06268 
<a name="l06269"></a>06269   <span class="comment">// special case: printing a null list is not an error</span>
<a name="l06270"></a>06270   <span class="keywordflow">if</span> (numStep &lt;= 0 &amp;&amp; seqVars == NULL) {
<a name="l06271"></a>06271     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Printing a NULL sequence variable"</span>);
<a name="l06272"></a>06272     printf(<span class="stringliteral">"Sequence Variable: FC_NULL_VARIABLE\n"</span>);
<a name="l06273"></a>06273     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l06274"></a>06274   }
<a name="l06275"></a>06275 
<a name="l06276"></a>06276   <span class="comment">// check input</span>
<a name="l06277"></a>06277   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l06278"></a>06278     varSlots[i] = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(seqVars[i]);
<a name="l06279"></a>06279     <span class="keywordflow">if</span> (varSlots[i] == NULL) {
<a name="l06280"></a>06280       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l06281"></a>06281       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l06282"></a>06282     }
<a name="l06283"></a>06283   }
<a name="l06284"></a>06284 
<a name="l06285"></a>06285   <span class="comment">// log message</span>
<a name="l06286"></a>06286   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Printing variable '%s'"</span>, varSlots[0]-&gt;header.name);
<a name="l06287"></a>06287 
<a name="l06288"></a>06288   <span class="comment">// print label &amp; var name</span>
<a name="l06289"></a>06289   <span class="keywordflow">if</span> (label)
<a name="l06290"></a>06290     printf(<span class="stringliteral">"%s: "</span>, label);
<a name="l06291"></a>06291   <span class="keywordflow">else</span>
<a name="l06292"></a>06292     printf(<span class="stringliteral">"Sequence Variable: "</span>);
<a name="l06293"></a>06293   printf(<span class="stringliteral">"'%s'\n"</span>, varSlots[0]-&gt;header.name);
<a name="l06294"></a>06294 
<a name="l06295"></a>06295   <span class="comment">// print meta data</span>
<a name="l06296"></a>06296   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(seqVars[0], &amp;numDataPoint, &amp;numComp, &amp;assoc, 
<a name="l06297"></a>06297                             &amp;mathType, &amp;dataType);
<a name="l06298"></a>06298   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l06299"></a>06299     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for seq variable '%s'"</span>,
<a name="l06300"></a>06300                           varSlots[0]-&gt;header.name);
<a name="l06301"></a>06301     <span class="keywordflow">return</span> rc;
<a name="l06302"></a>06302   }
<a name="l06303"></a>06303   printf(<span class="stringliteral">"%snumDataPoint = %d, numComponent = %d, numStep = %d\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, 
<a name="l06304"></a>06304          numDataPoint, numComp, numStep);
<a name="l06305"></a>06305   printf(<span class="stringliteral">"%sassoc = %s, mathType = %s, dataType = %s\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, 
<a name="l06306"></a>06306          <a class="code" href="group__DataTypes.html#g615e96c3b13331857b5ba45d597c49de" title="Return the name of the FC_AssociationType&amp;#39;s value.">fc_getAssociationTypeText</a>(assoc), <a class="code" href="group__DataTypes.html#g3a795f9de32c21f27a3eb5e1748f2efb" title="Return the name of the FC_MathType&amp;#39;s value.">fc_getMathTypeText</a>(mathType), 
<a name="l06307"></a>06307          <a class="code" href="group__DataTypes.html#g688d0934eac6d388ad21c461e22fd19f" title="Return the name of the FC_DataType&amp;#39;s value.">fc_getDataTypeText</a>(dataType));
<a name="l06308"></a>06308 
<a name="l06309"></a>06309 
<a name="l06310"></a>06310   <span class="comment">// print values</span>
<a name="l06311"></a>06311   <span class="keywordflow">if</span> ((print_data) &amp;&amp; (numStep)) {
<a name="l06312"></a>06312 
<a name="l06313"></a>06313     <span class="comment">//Handle special case where start/stop are the first/last steps</span>
<a name="l06314"></a>06314     <span class="keywordflow">if</span>(range_start&lt;0){
<a name="l06315"></a>06315       start = (range_start==-2) ? numStep-1 : 0;
<a name="l06316"></a>06316     } <span class="keywordflow">else</span> {
<a name="l06317"></a>06317       start = (range_start&gt;numStep-1) ? numStep-1 : range_start;
<a name="l06318"></a>06318     }
<a name="l06319"></a>06319     <span class="keywordflow">if</span>(range_stop&lt;0){
<a name="l06320"></a>06320       stop = (range_stop==-2) ? numStep-1 : 0;
<a name="l06321"></a>06321     } <span class="keywordflow">else</span> {
<a name="l06322"></a>06322       stop = (range_stop&gt;numStep-1) ? numStep-1 : range_stop;
<a name="l06323"></a>06323     }
<a name="l06324"></a>06324 
<a name="l06325"></a>06325     <span class="comment">//Calculate the step size's direction</span>
<a name="l06326"></a>06326     mod   = (start&lt;=stop)   ? 1 : -1;
<a name="l06327"></a>06327 
<a name="l06328"></a>06328     <span class="keywordflow">for</span>(k=start; (mod&gt;0) ? (k&lt;=stop) : (k&gt;=stop) ; k+= mod){
<a name="l06329"></a>06329 
<a name="l06330"></a>06330       rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(seqVars[k], &amp;dbuf);
<a name="l06331"></a>06331       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l06332"></a>06332         <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for step %d of seq variable"</span>
<a name="l06333"></a>06333                               <span class="stringliteral">" '%s'"</span>, k, varSlots[0]-&gt;header.name);
<a name="l06334"></a>06334         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l06335"></a>06335       }
<a name="l06336"></a>06336       
<a name="l06337"></a>06337       <span class="comment">// print the data </span>
<a name="l06338"></a>06338       printf(<span class="stringliteral">"%sData (Step %d of seqVar '%s'):\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, 
<a name="l06339"></a>06339              k, varSlots[0]-&gt;header.name);
<a name="l06340"></a>06340       <span class="keywordflow">switch</span> (dataType) {
<a name="l06341"></a>06341       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>: 
<a name="l06342"></a>06342         {
<a name="l06343"></a>06343           <span class="keywordtype">char</span>* cast_buf = (<span class="keywordtype">char</span> *)dbuf;
<a name="l06344"></a>06344           <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l06345"></a>06345             printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l06346"></a>06346             <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l06347"></a>06347               printf(<span class="stringliteral">"%c "</span>, cast_buf[i*numComp + j]);
<a name="l06348"></a>06348             printf(<span class="stringliteral">"\n"</span>);
<a name="l06349"></a>06349           }
<a name="l06350"></a>06350         }
<a name="l06351"></a>06351         <span class="keywordflow">break</span>;
<a name="l06352"></a>06352       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l06353"></a>06353         {
<a name="l06354"></a>06354           <span class="keywordtype">int</span>* cast_buf = (<span class="keywordtype">int</span> *)dbuf;
<a name="l06355"></a>06355           <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l06356"></a>06356             printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l06357"></a>06357             <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l06358"></a>06358               printf(<span class="stringliteral">"%6d "</span>, cast_buf[i*numComp + j]);
<a name="l06359"></a>06359             printf(<span class="stringliteral">"\n"</span>);
<a name="l06360"></a>06360           }
<a name="l06361"></a>06361         }
<a name="l06362"></a>06362         <span class="keywordflow">break</span>;
<a name="l06363"></a>06363       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l06364"></a>06364         {
<a name="l06365"></a>06365           <span class="keywordtype">float</span>* cast_buf = (<span class="keywordtype">float</span> *)dbuf;
<a name="l06366"></a>06366           <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l06367"></a>06367             printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l06368"></a>06368             <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l06369"></a>06369               printf(<span class="stringliteral">"%11.6g "</span>, cast_buf[i*numComp + j]);
<a name="l06370"></a>06370             printf(<span class="stringliteral">"\n"</span>);
<a name="l06371"></a>06371           }
<a name="l06372"></a>06372         }
<a name="l06373"></a>06373         <span class="keywordflow">break</span>;
<a name="l06374"></a>06374       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l06375"></a>06375         {
<a name="l06376"></a>06376           <span class="keywordtype">double</span>* cast_buf = (<span class="keywordtype">double</span> *)dbuf;
<a name="l06377"></a>06377           <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l06378"></a>06378             printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l06379"></a>06379             <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l06380"></a>06380               <span class="comment">// FIX? maybe %20.15g so always align</span>
<a name="l06381"></a>06381               <span class="comment">//printf("%11.15g ", cast_buf[i*numComp + j]);</span>
<a name="l06382"></a>06382            <span class="keywordflow">switch</span>(print_data){
<a name="l06383"></a>06383            <span class="keywordflow">case</span> 2:  printf(<span class="stringliteral">"%.5le "</span>,   cast_buf[i*numComp + j]); <span class="keywordflow">break</span>;
<a name="l06384"></a>06384            <span class="keywordflow">default</span>: printf(<span class="stringliteral">"%11.15g "</span>, cast_buf[i*numComp + j]); <span class="keywordflow">break</span>;
<a name="l06385"></a>06385            }
<a name="l06386"></a>06386             printf(<span class="stringliteral">"\n"</span>);
<a name="l06387"></a>06387           }
<a name="l06388"></a>06388         }
<a name="l06389"></a>06389         <span class="keywordflow">break</span>;
<a name="l06390"></a>06390       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9c76e1a6b572327d5433db69f08eddde1">FC_DT_UNKNOWN</a>:
<a name="l06391"></a>06391         printf(<span class="stringliteral">"Cannot print data type '%s'\n"</span>, <a class="code" href="group__DataTypes.html#g688d0934eac6d388ad21c461e22fd19f" title="Return the name of the FC_DataType&amp;#39;s value.">fc_getDataTypeText</a>(dataType));
<a name="l06392"></a>06392       }
<a name="l06393"></a>06393     }
<a name="l06394"></a>06394   }
<a name="l06395"></a>06395 
<a name="l06396"></a>06396   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l06397"></a>06397 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g0520197d0fda43d47af61ff75952850a"></a><!-- doxytag: member="variable.c::fc_printVariable" ref="g0520197d0fda43d47af61ff75952850a" args="(FC_Variable variable, char *label, int print_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_printVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print variable meta data to stdout, and optionally the data values. 
<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>11/20/2003 WSK Fixed up. Want to replace a bunch of specific print routines (like printSurfaceNormals).</li><li>10/31/2007 CDU Added flag to allow printing of reduced number of digits </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - data variable </td></tr>
<tr><td valign="top"><em>label</em>&nbsp;</td><td>
input - label to prepend variable name with, can be NULL </td></tr>
<tr><td valign="top"><em>print_data</em>&nbsp;</td><td>
input - 1 = print the data values. 2 = print the data values in exponent form with 5 digits of precision </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l06094">6094</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00139">FC_DT_CHAR</a>, <a class="el" href="base_8h-source.html#l00150">FC_DT_DOUBLE</a>, <a class="el" href="base_8h-source.html#l00149">FC_DT_FLOAT</a>, <a class="el" href="base_8h-source.html#l00143">FC_DT_INT</a>, <a class="el" href="base_8h-source.html#l00138">FC_DT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00477">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00419">fc_getDataTypeText()</a>, <a class="el" href="base_8c-source.html#l00448">fc_getMathTypeText()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l05715">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l05433">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00057">INDENT_STR</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="fcdump_8c-source.html#l00194">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l06100"></a>06100   {
<a name="l06101"></a>06101   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l06102"></a>06102   <span class="keywordtype">int</span> i, j;
<a name="l06103"></a>06103   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l06104"></a>06104   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l06105"></a>06105   <a class="code" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6" title="Possible association of the data to the mesh.">FC_AssociationType</a> assoc;
<a name="l06106"></a>06106   <a class="code" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20" title="Possible ways of organizing data values.">FC_MathType</a> mathType;
<a name="l06107"></a>06107   <a class="code" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9" title="Possible data types.">FC_DataType</a> dataType;
<a name="l06108"></a>06108   <span class="keywordtype">void</span>* dbuf;
<a name="l06109"></a>06109 
<a name="l06110"></a>06110   <span class="comment">// special case: printing a null handle is not an error</span>
<a name="l06111"></a>06111   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(variable, <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>)) {
<a name="l06112"></a>06112     printf(<span class="stringliteral">"Variable: FC_NULL_VARIABLE\n"</span>);
<a name="l06113"></a>06113     fflush(NULL);
<a name="l06114"></a>06114     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l06115"></a>06115   }
<a name="l06116"></a>06116 
<a name="l06117"></a>06117   <span class="comment">// check input</span>
<a name="l06118"></a>06118   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l06119"></a>06119   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l06120"></a>06120     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l06121"></a>06121     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l06122"></a>06122   }
<a name="l06123"></a>06123 
<a name="l06124"></a>06124   <span class="comment">// log message</span>
<a name="l06125"></a>06125   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Printing variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l06126"></a>06126 
<a name="l06127"></a>06127   <span class="comment">// print label &amp; var name</span>
<a name="l06128"></a>06128   <span class="keywordflow">if</span> (label)
<a name="l06129"></a>06129     printf(<span class="stringliteral">"%s: "</span>, label);
<a name="l06130"></a>06130   <span class="keywordflow">else</span>
<a name="l06131"></a>06131     printf(<span class="stringliteral">"Variable: "</span>);
<a name="l06132"></a>06132   printf(<span class="stringliteral">"'%s'\n"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l06133"></a>06133 
<a name="l06134"></a>06134   <span class="comment">// print meta data</span>
<a name="l06135"></a>06135   rc = <a class="code" href="group__Variable.html#gcd52b4ee0552c63ff2819e5f30549cbc" title="Get information about a variable.">fc_getVariableInfo</a>(variable, &amp;numDataPoint, &amp;numComp, &amp;assoc, 
<a name="l06136"></a>06136                             &amp;mathType, &amp;dataType);
<a name="l06137"></a>06137   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l06138"></a>06138     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l06139"></a>06139                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l06140"></a>06140     <span class="keywordflow">return</span> rc;
<a name="l06141"></a>06141   }
<a name="l06142"></a>06142   printf(<span class="stringliteral">"%snumDataPoint = %d, numComponent = %d\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, 
<a name="l06143"></a>06143          numDataPoint, numComp);
<a name="l06144"></a>06144   printf(<span class="stringliteral">"%sassoc = %s, mathType = %s, dataType = %s\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, 
<a name="l06145"></a>06145          <a class="code" href="group__DataTypes.html#g615e96c3b13331857b5ba45d597c49de" title="Return the name of the FC_AssociationType&amp;#39;s value.">fc_getAssociationTypeText</a>(assoc), <a class="code" href="group__DataTypes.html#g3a795f9de32c21f27a3eb5e1748f2efb" title="Return the name of the FC_MathType&amp;#39;s value.">fc_getMathTypeText</a>(mathType), 
<a name="l06146"></a>06146          <a class="code" href="group__DataTypes.html#g688d0934eac6d388ad21c461e22fd19f" title="Return the name of the FC_DataType&amp;#39;s value.">fc_getDataTypeText</a>(dataType));
<a name="l06147"></a>06147 
<a name="l06148"></a>06148   <span class="comment">// print values</span>
<a name="l06149"></a>06149   <span class="keywordflow">if</span> (print_data) {
<a name="l06150"></a>06150     rc = <a class="code" href="group__Variable.html#g40a4d68cafd7134b908b78d053d3c47d" title="Get the data in a variable.">fc_getVariableDataPtr</a>(variable, &amp;dbuf);
<a name="l06151"></a>06151     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>) {
<a name="l06152"></a>06152       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l06153"></a>06153                             varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l06154"></a>06154       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l06155"></a>06155     }
<a name="l06156"></a>06156     
<a name="l06157"></a>06157     <span class="comment">// print the data </span>
<a name="l06158"></a>06158     printf(<span class="stringliteral">"%sData:\n"</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>);
<a name="l06159"></a>06159     <span class="keywordflow">switch</span> (dataType) {
<a name="l06160"></a>06160     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d91103921fcb19c46b788b514185b6f596">FC_DT_CHAR</a>: 
<a name="l06161"></a>06161       {
<a name="l06162"></a>06162         <span class="keywordtype">char</span>* cast_buf = (<span class="keywordtype">char</span> *)dbuf;
<a name="l06163"></a>06163         <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l06164"></a>06164           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l06165"></a>06165           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l06166"></a>06166             printf(<span class="stringliteral">"%c "</span>, cast_buf[i*numComp + j]);
<a name="l06167"></a>06167           printf(<span class="stringliteral">"\n"</span>);
<a name="l06168"></a>06168         }
<a name="l06169"></a>06169       }
<a name="l06170"></a>06170       <span class="keywordflow">break</span>;
<a name="l06171"></a>06171     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d963896eb450c264fe236185788362b270">FC_DT_INT</a>:
<a name="l06172"></a>06172       {
<a name="l06173"></a>06173         <span class="keywordtype">int</span>* cast_buf = (<span class="keywordtype">int</span> *)dbuf;
<a name="l06174"></a>06174         <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l06175"></a>06175           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l06176"></a>06176           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l06177"></a>06177             printf(<span class="stringliteral">"%6d "</span>, cast_buf[i*numComp + j]);
<a name="l06178"></a>06178           printf(<span class="stringliteral">"\n"</span>);
<a name="l06179"></a>06179         }
<a name="l06180"></a>06180       }
<a name="l06181"></a>06181       <span class="keywordflow">break</span>;
<a name="l06182"></a>06182     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9b32c04c999cf2998e57c184acc553eb7">FC_DT_FLOAT</a>:
<a name="l06183"></a>06183       {
<a name="l06184"></a>06184         <span class="keywordtype">float</span>* cast_buf = (<span class="keywordtype">float</span> *)dbuf;
<a name="l06185"></a>06185         <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l06186"></a>06186           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l06187"></a>06187           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l06188"></a>06188             printf(<span class="stringliteral">"%11.6g "</span>, cast_buf[i*numComp + j]);
<a name="l06189"></a>06189           printf(<span class="stringliteral">"\n"</span>);
<a name="l06190"></a>06190         }
<a name="l06191"></a>06191       }
<a name="l06192"></a>06192       <span class="keywordflow">break</span>;
<a name="l06193"></a>06193     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9250e83e5dab9b5c1872f0f82665ff905">FC_DT_DOUBLE</a>:
<a name="l06194"></a>06194       {
<a name="l06195"></a>06195         <span class="keywordtype">double</span>* cast_buf = (<span class="keywordtype">double</span> *)dbuf;
<a name="l06196"></a>06196         <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l06197"></a>06197           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#gb05872de60287ffb4f9743c0d9ddf2b8" title="Indent string for _fc_printXTable() routines.">INDENT_STR</a>, i);
<a name="l06198"></a>06198           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l06199"></a>06199             <span class="comment">//Should be 15 significant digits but there were</span>
<a name="l06200"></a>06200             <span class="comment">//differences between Mac and Linux (sun same as Mac)</span>
<a name="l06201"></a>06201             <span class="comment">//these may be due to rounding differences in printf()</span>
<a name="l06202"></a>06202             <span class="comment">//printf("%20.15g ", cast_buf[i*numComp + j]);</span>
<a name="l06203"></a>06203          <span class="keywordflow">switch</span>(print_data){
<a name="l06204"></a>06204          <span class="keywordflow">case</span> 2:  printf(<span class="stringliteral">"%.5le "</span>,   cast_buf[i*numComp + j]); <span class="keywordflow">break</span>;
<a name="l06205"></a>06205          <span class="keywordflow">default</span>: printf(<span class="stringliteral">"%16.11g "</span>, cast_buf[i*numComp + j]); <span class="keywordflow">break</span>;
<a name="l06206"></a>06206          }
<a name="l06207"></a>06207           printf(<span class="stringliteral">"\n"</span>);
<a name="l06208"></a>06208         }
<a name="l06209"></a>06209       }
<a name="l06210"></a>06210       <span class="keywordflow">break</span>;
<a name="l06211"></a>06211     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9c76e1a6b572327d5433db69f08eddde1">FC_DT_UNKNOWN</a>:
<a name="l06212"></a>06212       printf(<span class="stringliteral">"Cannot print data type '%s'\n"</span>, <a class="code" href="group__DataTypes.html#g688d0934eac6d388ad21c461e22fd19f" title="Return the name of the FC_DataType&amp;#39;s value.">fc_getDataTypeText</a>(dataType));
<a name="l06213"></a>06213     }
<a name="l06214"></a>06214   }
<a name="l06215"></a>06215 
<a name="l06216"></a>06216   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l06217"></a>06217 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g85ea5aa3d396cb31211be62175f45245"></a><!-- doxytag: member="variable.c::fc_releaseSeqVariable" ref="g85ea5aa3d396cb31211be62175f45245" args="(int numStep, FC_Variable *variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_releaseSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to minimize variable's memory usage. 
<p>
<b>Description:</b> <p>
Call to try and release un-needed memory in a sequence variable. If the variable has been saved to disk, the large data is released. If the variable has not been saved to disk, this will do nothing.<p>
<a class="el" href="group__Variable.html#g4e487fa33c14f78243670167c0275736" title="Attempt to minimize variable&#39;s memory usage.">fc_releaseVariable()</a> can be called on specific steps of the sequence variable.<p>
<b>Modifications:</b> <ul>
<li>04/19/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
Input - Number of steps in the seq variable. </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
Input - the seq var. </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04926">4926</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l05178">fc_isSeqVariableValid()</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="variable_8c-source.html#l04879">fc_releaseVariable()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, and <a class="el" href="mesh_8c-source.html#l02417">fc_releaseMesh()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04929"></a>04929   {
<a name="l04930"></a>04930   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc, rc_keep = <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04931"></a>04931   <span class="keywordtype">int</span> i;  
<a name="l04932"></a>04932   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l04933"></a>04933   
<a name="l04934"></a>04934   <span class="comment">// special case: releasing a null handle is not an error</span>
<a name="l04935"></a>04935   <span class="keywordflow">if</span> (numStep &lt; 1 || variables == NULL) {
<a name="l04936"></a>04936     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Releasing NULL seq variable"</span>);
<a name="l04937"></a>04937     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04938"></a>04938   }
<a name="l04939"></a>04939 
<a name="l04940"></a>04940   <span class="comment">// check input</span>
<a name="l04941"></a>04941   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gac07e226e274bee4de4b21db8e03ae0e" title="Check that the handle refers to a valid variable.">fc_isSeqVariableValid</a>(numStep, variables)) {
<a name="l04942"></a>04942     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04943"></a>04943     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04944"></a>04944   }
<a name="l04945"></a>04945 
<a name="l04946"></a>04946   <span class="comment">// log message</span>
<a name="l04947"></a>04947   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variables[0]);
<a name="l04948"></a>04948   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Cleaning up variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04949"></a>04949 
<a name="l04950"></a>04950   <span class="comment">// Do it</span>
<a name="l04951"></a>04951   rc_keep = <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04952"></a>04952   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l04953"></a>04953     rc = <a class="code" href="group__Variable.html#g4e487fa33c14f78243670167c0275736" title="Attempt to minimize variable&amp;#39;s memory usage.">fc_releaseVariable</a>(variables[i]);
<a name="l04954"></a>04954     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l04955"></a>04955       rc_keep = rc;
<a name="l04956"></a>04956   }
<a name="l04957"></a>04957 
<a name="l04958"></a>04958   <span class="keywordflow">return</span> rc_keep;
<a name="l04959"></a>04959 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g4e487fa33c14f78243670167c0275736"></a><!-- doxytag: member="variable.c::fc_releaseVariable" ref="g4e487fa33c14f78243670167c0275736" args="(FC_Variable variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_releaseVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to minimize variable's memory usage. 
<p>
<b>Description:</b> <p>
Call to try and release un-needed memory in a variable. If the variable has been saved to disk, the large data is released. If the variable has not been saved to disk, this will do nothing.<p>
<b>Modifications:</b> <ul>
<li>04/19/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l04879">4879</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="variableP_8h-source.html#l00096">_FC_VarSlot::data</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00779">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00154">fc_printfWarningMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.</p>

<p>Referenced by <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, <a class="el" href="mesh_8c-source.html#l02417">fc_releaseMesh()</a>, <a class="el" href="variable_8c-source.html#l04926">fc_releaseSeqVariable()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l04881"></a>04881   {
<a name="l04882"></a>04882   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l04883"></a>04883   
<a name="l04884"></a>04884   <span class="comment">// special case: releasing a null handle is not an error</span>
<a name="l04885"></a>04885   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#g390004fca0870147d490f32c55afab8d" title="Check two handles for equality.">FC_HANDLE_EQUIV</a>(variable, <a class="code" href="group__Handles.html#g82162b8ad3f5476855507c3c6450db09" title="Null (default) variable handle.">FC_NULL_VARIABLE</a>)) {
<a name="l04886"></a>04886     <a class="code" href="group__Library.html#g160cfb8cb557ccf48fee07ae11e65482" title="Print a warning message to stdout.">fc_printfWarningMessage</a>(<span class="stringliteral">"Releasing FC_NULL_VARIABLE"</span>);
<a name="l04887"></a>04887     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04888"></a>04888   }
<a name="l04889"></a>04889 
<a name="l04890"></a>04890   <span class="comment">// check input</span>
<a name="l04891"></a>04891   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l04892"></a>04892   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l04893"></a>04893     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l04894"></a>04894     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l04895"></a>04895   }
<a name="l04896"></a>04896   
<a name="l04897"></a>04897   <span class="comment">// log message</span>
<a name="l04898"></a>04898   <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Cleaning up variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l04899"></a>04899 
<a name="l04900"></a>04900   <span class="comment">// remove big data if this slot is committed</span>
<a name="l04901"></a>04901   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l04902"></a>04902     free(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a>);
<a name="l04903"></a>04903     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a> = NULL;
<a name="l04904"></a>04904   }
<a name="l04905"></a>04905 
<a name="l04906"></a>04906   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l04907"></a>04907 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3f958d3b630c9df78a4e7fbca287b039"></a><!-- doxytag: member="variable.c::fc_setVariableData" ref="g3f958d3b630c9df78a4e7fbca287b039" args="(FC_Variable variable, int numDataPoint, int numComponent, FC_AssociationType assoc, FC_MathType mathtype, FC_DataType datatype, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_setVariableData           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numDataPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a>&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a>&nbsp;</td>
          <td class="paramname"> <em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the variable data by copy. 
<p>
<b>Description:</b> <p>
Sets the data values associated with this new variable. Must provide the number of data points, the number of components per data point, the math type of the data, and the data type of the array. (For example, if you have a 3D vector field associated with the elements of a 10 element mesh, and it'd data type is double, the call would be:<p>
fc_setVariableData(var, 10, 3, FC_AT_ELEMENT, FC_MT_VECTOR, FC_DT_DOUBLE, data);<p>
The data array should be numDataPoint*numComponent long. The order is interleave, that is you give all the components for each point (e.g. P1C1 P1C2 ... P1Cn P2C1 P2C2 ... P1Cn ... PmC1 ... PmCn).<p>
This routine makes a copy of the data for the library, so the user still has responsibility of the original buffer. If you would like to give the data array to the variable instead of just copying them, use <a class="el" href="group__Variable.html#g87015cda75e038cc73c1d584537d81fc" title="Set the pointer to the variable data.">fc_setVariableDataPtr()</a>.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>02/03/04 WSK, Now handles edge &amp; face associated data.</li><li>01/30/06 CDU, Changed logging to support global variables </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>numDataPoint</em>&nbsp;</td><td>
input - the number of data points </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
input - the number of components </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
input - data association (e.g. vertices, elements, etc) </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
input - the organization of components (e.g. scalar, vector, etc.) </td></tr>
<tr><td valign="top"><em>datatype</em>&nbsp;</td><td>
input - data type (e.g. int, float, etc.) </td></tr>
<tr><td valign="top"><em>data</em>&nbsp;</td><td>
input - data buffer </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l00469">469</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00091">_FC_VarSlot::assoc</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="variableP_8h-source.html#l00096">_FC_VarSlot::data</a>, <a class="el" href="variableP_8h-source.html#l00095">_FC_VarSlot::datatype</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00138">FC_DT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00286">fc_isAssociationTypeValid()</a>, <a class="el" href="base_8c-source.html#l00240">fc_isDataTypeValid()</a>, <a class="el" href="base_8c-source.html#l00263">fc_isMathTypeValid()</a>, <a class="el" href="variable_8c-source.html#l05243">fc_isVariableGlobal()</a>, <a class="el" href="base_8h-source.html#l00106">FC_MEMORY_ERROR</a>, <a class="el" href="base_8h-source.html#l00170">FC_MT_SCALAR</a>, <a class="el" href="base_8h-source.html#l00169">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8c-source.html#l00741">fc_sizeofDataType()</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00093">_FC_VarSlot::mathtype</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="variableP_8h-source.html#l00088">_FC_VarSlot::numComponent</a>, and <a class="el" href="variableP_8h-source.html#l00084">_FC_VarSlot::numDataPoint</a>.</p>

<p>Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="exodusio_8c-source.html#l00472">_fc_loadExodusDataset()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="variable_8c-source.html#l00818">fc_copyGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l00724">fc_copyGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l02328">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01382">fc_copySeqVariableStepFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02454">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l00929">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l02106">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="mesh_8c-source.html#l03497">fc_getMeshCoordsAsVariable()</a>, <a class="el" href="variable_8c-source.html#l05888">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>, <a class="el" href="elemdeath__ex1_8c-source.html#l00076">makeDeadVar()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00226">readOneData()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00479"></a>00479   {
<a name="l00480"></a>00480   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00481"></a>00481   <span class="keywordtype">size_t</span> size;
<a name="l00482"></a>00482   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l00483"></a>00483   <span class="keywordtype">int</span> temp_numDataPoint;
<a name="l00484"></a>00484   
<a name="l00485"></a>00485   <span class="comment">// NOTE!: if you change stuff here, also change fc_setVariableDataPtr()</span>
<a name="l00486"></a>00486 
<a name="l00487"></a>00487   <span class="comment">// check input</span>
<a name="l00488"></a>00488   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l00489"></a>00489   <span class="keywordflow">if</span> (varSlot == NULL || numDataPoint &lt; 1 || <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> &lt; 1 || 
<a name="l00490"></a>00490       !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(assoc) || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || 
<a name="l00491"></a>00491       !<a class="code" href="group__DataTypes.html#g8111b811b3159b9f82a271fa9c923e9e" title="Verify that the given value is valid for this enum.">fc_isMathTypeValid</a>(mathtype) || mathtype == <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb2064ff077a965e5351bcfafd26ac08236f">FC_MT_UNKNOWN</a> ||
<a name="l00492"></a>00492       !<a class="code" href="group__DataTypes.html#gccfacba927b41643b8d6b36e8fe5b8bb" title="Verify that the given value is valid for this enum.">fc_isDataTypeValid</a>(datatype) || datatype == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9c76e1a6b572327d5433db69f08eddde1">FC_DT_UNKNOWN</a> || 
<a name="l00493"></a>00493       data == NULL) {
<a name="l00494"></a>00494     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00495"></a>00495     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00496"></a>00496   }
<a name="l00497"></a>00497   
<a name="l00498"></a>00498   <span class="comment">// a little more checking --</span>
<a name="l00499"></a>00499   <span class="comment">// a global variable can only have an assoc of FC_AT_WHOLE_DATASET</span>
<a name="l00500"></a>00500   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(variable) &amp;&amp; assoc != <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>) {
<a name="l00501"></a>00501     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Trying to write non-global data to global var '%s'"</span>,
<a name="l00502"></a>00502                  varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00503"></a>00503     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00504"></a>00504   }
<a name="l00505"></a>00505   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(variable) &amp;&amp; assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>) {
<a name="l00506"></a>00506     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Trying to write global data to non-global var '%s'"</span>,
<a name="l00507"></a>00507                  varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00508"></a>00508   }
<a name="l00509"></a>00509   <span class="comment">// can't overwrite data</span>
<a name="l00510"></a>00510   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a> != NULL || varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l00511"></a>00511     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Data already exists on variable '%s'"</span>,
<a name="l00512"></a>00512                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00513"></a>00513     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00514"></a>00514   }
<a name="l00515"></a>00515   <span class="comment">// make sure mathtype &amp; numComp are consistent</span>
<a name="l00516"></a>00516   <span class="keywordflow">if</span> ( (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> == 1 &amp;&amp; mathtype != <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>) ||
<a name="l00517"></a>00517        (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> &gt; 1  &amp;&amp; mathtype == <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>) ) {
<a name="l00518"></a>00518     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Inconsistent number of components and math type "</span>
<a name="l00519"></a>00519                           <span class="stringliteral">"for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00520"></a>00520     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00521"></a>00521   }
<a name="l00522"></a>00522   <span class="comment">// Check that numDataPoint is consistent</span>
<a name="l00523"></a>00523   <span class="comment">// (this will also force build edges &amp; faces if necessary)</span>
<a name="l00524"></a>00524   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(variable)) {
<a name="l00525"></a>00525     <span class="keywordflow">if</span> (numDataPoint != 1) {
<a name="l00526"></a>00526       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Global var '%s' can only have 1 datapoint"</span>,
<a name="l00527"></a>00527                    varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00528"></a>00528       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00529"></a>00529     }
<a name="l00530"></a>00530   }
<a name="l00531"></a>00531   <span class="keywordflow">else</span> {
<a name="l00532"></a>00532     rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>, assoc, &amp;temp_numDataPoint);
<a name="l00533"></a>00533     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00534"></a>00534       <span class="keywordflow">return</span> rc;
<a name="l00535"></a>00535     <span class="keywordflow">if</span> (temp_numDataPoint != numDataPoint) {
<a name="l00536"></a>00536       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Inconsistent number of data points and association "</span>
<a name="l00537"></a>00537                           <span class="stringliteral">"type for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00538"></a>00538       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00539"></a>00539     }
<a name="l00540"></a>00540   }
<a name="l00541"></a>00541   
<a name="l00542"></a>00542   <span class="comment">// log message</span>
<a name="l00543"></a>00543   <span class="keywordflow">if</span>(!<a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(variable)){
<a name="l00544"></a>00544     <span class="comment">//For Non-global variables, get the mesh's name</span>
<a name="l00545"></a>00545     <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l00546"></a>00546     meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>);
<a name="l00547"></a>00547     <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertices on mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00548"></a>00548   } <span class="keywordflow">else</span> {
<a name="l00549"></a>00549     <span class="comment">//For global variables, just get the dataset's name</span>
<a name="l00550"></a>00550     <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a> *datasetSlot;
<a name="l00551"></a>00551     datasetSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a>);
<a name="l00552"></a>00552     <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertices for dataset '%s'"</span>,datasetSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00553"></a>00553   }
<a name="l00554"></a>00554 
<a name="l00555"></a>00555   <span class="comment">// copy metadata</span>
<a name="l00556"></a>00556   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#f2987ccafac1c49c016fc2e3fcd218ac">numDataPoint</a> = numDataPoint;
<a name="l00557"></a>00557   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7c8e3668b0bc0c037d671ee75af96279">numComponent</a> = <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>;
<a name="l00558"></a>00558   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#c9e804c6a08dd9757651d15d09963015">assoc</a> = assoc;
<a name="l00559"></a>00559   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#dc53e54a808b2a065c1c8965ab240b7e">mathtype</a> = mathtype;
<a name="l00560"></a>00560   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#d008d3f8bcab7eafced67cbb267b5cbc">datatype</a> = datatype;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562   <span class="comment">// copy data buffer</span>
<a name="l00563"></a>00563   size = numDataPoint * <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> * <a class="code" href="group__DataTypes.html#g5965885cf346858e94662c3d86ca798d" title="Returns the number of bytes in an FC_DataType, like sizeof().">fc_sizeofDataType</a>(datatype);
<a name="l00564"></a>00564   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a> = malloc(size);
<a name="l00565"></a>00565   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a> == NULL) {
<a name="l00566"></a>00566     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>));
<a name="l00567"></a>00567     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4db79475c8e6c2fcf3e4e7979a4139658">FC_MEMORY_ERROR</a>;
<a name="l00568"></a>00568   }
<a name="l00569"></a>00569   memcpy(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a>, data, size);
<a name="l00570"></a>00570   
<a name="l00571"></a>00571   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00572"></a>00572 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g87015cda75e038cc73c1d584537d81fc"></a><!-- doxytag: member="variable.c::fc_setVariableDataPtr" ref="g87015cda75e038cc73c1d584537d81fc" args="(FC_Variable variable, int numDataPoint, int numComponent, FC_AssociationType assoc, FC_MathType mathtype, FC_DataType datatype, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4">FC_ReturnCode</a> fc_setVariableDataPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numDataPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g28b7cdba59395ddc988888d01dd19af6">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g60d16c50c365cd12f1f61ce8f4cebb20">FC_MathType</a>&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gcca24e957488bb76e40a84ea651975d9">FC_DataType</a>&nbsp;</td>
          <td class="paramname"> <em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the pointer to the variable data. 
<p>
<b>Description:</b> <p>
Sets the data values associated with this new variable. Must provide the number of data points, the number of components per data point, the math type of the data, and the data type of the array. (For example, if you have a 3D vector field associated with the elements of a 10 element mesh, and it'd data type is double, the call would be:<p>
fc_setVariableData(var, 10, 3, FC_AT_ELEMENT, FC_MT_VECTOR, FC_DT_DOUBLE, data);<p>
The data array should be numDataPoint*numComponent long. The order is interleave, that is you give all the components for each point (e.g. P1C1 P1C2 ... P1Cn P2C1 P2C2 ... P1Cn ... PmC1 ... PmCn).<p>
This routine passes the data array directly to the library, so the user no longer has responsibility of the original buffer. If you would like to keep the data array, you should use <a class="el" href="group__Variable.html#g3f958d3b630c9df78a4e7fbca287b039" title="Set the variable data by copy.">fc_setVariableData()</a> instead which makes a copy of the data array.<p>
<b>Modifications:</b> <ul>
<li>10/01/04 WSK, created.</li><li>01/30/06 CDU, changed logging to support global variables </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>numDataPoint</em>&nbsp;</td><td>
input - the number of data points </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
input - the number of components </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
input - data association (e.g. vertices, elements, etc) </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
input - the organization of components (e.g. scalar, vector, etc.) </td></tr>
<tr><td valign="top"><em>datatype</em>&nbsp;</td><td>
input - data type (e.g. int, float, etc.) </td></tr>
<tr><td valign="top"><em>data</em>&nbsp;</td><td>
input - data buffer </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="variable_8c-source.html#l00604">604</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.</p>

<p>References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l06054">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l06536">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00091">_FC_VarSlot::assoc</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="variableP_8h-source.html#l00096">_FC_VarSlot::data</a>, <a class="el" href="variableP_8h-source.html#l00095">_FC_VarSlot::datatype</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8h-source.html#l00190">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="base_8h-source.html#l00138">FC_DT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00105">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l03299">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00355">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00107">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00286">fc_isAssociationTypeValid()</a>, <a class="el" href="base_8c-source.html#l00240">fc_isDataTypeValid()</a>, <a class="el" href="base_8c-source.html#l00263">fc_isMathTypeValid()</a>, <a class="el" href="variable_8c-source.html#l05243">fc_isVariableGlobal()</a>, <a class="el" href="base_8h-source.html#l00170">FC_MT_SCALAR</a>, <a class="el" href="base_8h-source.html#l00169">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00120">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00188">fc_printfLogMessage</a>, <a class="el" href="base_8h-source.html#l00104">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00093">_FC_VarSlot::mathtype</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="variableP_8h-source.html#l00088">_FC_VarSlot::numComponent</a>, and <a class="el" href="variableP_8h-source.html#l00084">_FC_VarSlot::numDataPoint</a>.</p>

<p>Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="fileio_8c-source.html#l00539">_fc_makeVariableFromFile()</a>, <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00817">fc_convertTreeToMesh()</a>, <a class="el" href="variable_8c-source.html#l01065">fc_copyVariableFromRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l01831">fc_copyVariableToRegionMesh()</a>, <a class="el" href="variable_8c-source.html#l02928">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="mesh_8c-source.html#l00845">fc_createSubsetMesh()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l03503">fc_getDisplacedEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03702">fc_getDisplacedFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l03900">fc_getDisplacedRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04542">fc_getDisplacedSurfaceNormals()</a>, <a class="el" href="geom_8c-source.html#l03415">fc_getEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l03808">fc_getRegionVolumes()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="geom_8c-source.html#l04448">fc_getSurfaceNormals()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l03160">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="lib__skeleton_8c-source.html#l00651">fc_saveSkeleton()</a>, <a class="el" href="mesh_8c-source.html#l02091">fc_setSphereDisplacementVariable()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="gaplines_8c-source.html#l00240">getLinesAsVectors()</a>, and <a class="el" href="gaplines_8c-source.html#l00433">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00614"></a>00614   {
<a name="l00615"></a>00615   <a class="code" href="group__DataTypes.html#g2a40aa471d085988d5b582669f766ce4" title="Possible function return values.">FC_ReturnCode</a> rc;
<a name="l00616"></a>00616   <a class="code" href="struct__FC__VarSlot.html" title="Variable Slot Structure for the Variable Table.">_FC_VarSlot</a>* varSlot;
<a name="l00617"></a>00617   <span class="keywordtype">int</span> temp_numDataPoint;
<a name="l00618"></a>00618   
<a name="l00619"></a>00619   <span class="comment">// NOTE!: if you change stuff here, also change fc_setVariableData()</span>
<a name="l00620"></a>00620 
<a name="l00621"></a>00621   <span class="comment">// check input</span>
<a name="l00622"></a>00622   varSlot = <a class="code" href="group__PrivateVariable.html#gf497c9a7299e6455d322dd98805ea8f0" title="Get a variable slot from a variable handle.">_fc_getVarSlot</a>(variable);
<a name="l00623"></a>00623   <span class="keywordflow">if</span> (varSlot == NULL || numDataPoint &lt; 1 || <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> &lt; 1 || 
<a name="l00624"></a>00624       !<a class="code" href="group__DataTypes.html#gc3097dff5d1b0602671b7d2805162169" title="Verify that the given value is valid for this enum.">fc_isAssociationTypeValid</a>(assoc) || assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6d5a38e6486b577a8d9bbba0e1c1a443d">FC_AT_UNKNOWN</a> || 
<a name="l00625"></a>00625       !<a class="code" href="group__DataTypes.html#g8111b811b3159b9f82a271fa9c923e9e" title="Verify that the given value is valid for this enum.">fc_isMathTypeValid</a>(mathtype) || mathtype == <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb2064ff077a965e5351bcfafd26ac08236f">FC_MT_UNKNOWN</a> ||
<a name="l00626"></a>00626       !<a class="code" href="group__DataTypes.html#gccfacba927b41643b8d6b36e8fe5b8bb" title="Verify that the given value is valid for this enum.">fc_isDataTypeValid</a>(datatype) || datatype == <a class="code" href="group__DataTypes.html#ggcca24e957488bb76e40a84ea651975d9c76e1a6b572327d5433db69f08eddde1">FC_DT_UNKNOWN</a> || 
<a name="l00627"></a>00627       data == NULL) {
<a name="l00628"></a>00628     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g510d74cc1e13d4cdc5bde247a25d48e4" title="Return the name of the FC_ReturnCode&amp;#39;s value.">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>));
<a name="l00629"></a>00629     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00630"></a>00630   }
<a name="l00631"></a>00631   
<a name="l00632"></a>00632   <span class="comment">// a little more checking -- can't overwrite data</span>
<a name="l00633"></a>00633   <span class="comment">// a global variable can only have an assoc of FC_AT_WHOLE_DATASET</span>
<a name="l00634"></a>00634   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(variable) &amp;&amp; assoc != <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>) {
<a name="l00635"></a>00635     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Trying to write non-global data to global var '%s'"</span>,
<a name="l00636"></a>00636                  varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00637"></a>00637     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00638"></a>00638   }
<a name="l00639"></a>00639   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(variable) &amp;&amp; assoc == <a class="code" href="group__DataTypes.html#gg28b7cdba59395ddc988888d01dd19af6ac55a57488add4ea9f01eac5c9eab232">FC_AT_WHOLE_DATASET</a>) {
<a name="l00640"></a>00640     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Trying to write global data to non-global var '%s'"</span>,
<a name="l00641"></a>00641                  varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00642"></a>00642   }
<a name="l00643"></a>00643   <span class="comment">// can't overwrite data</span>
<a name="l00644"></a>00644   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a> != NULL || varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#df0a17b8284aa195791caff85ff62743">committed</a> == 1) {
<a name="l00645"></a>00645     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Data already exists on variable '%s'"</span>,
<a name="l00646"></a>00646                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00647"></a>00647     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce4dfe7727a339a5a362cd2b90d81aeef76">FC_ERROR</a>;
<a name="l00648"></a>00648   }
<a name="l00649"></a>00649   <span class="comment">// make sure mathtype &amp; numComp are consistent</span>
<a name="l00650"></a>00650   <span class="keywordflow">if</span> ( (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> == 1 &amp;&amp; mathtype != <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>) ||
<a name="l00651"></a>00651        (<a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a> &gt; 1  &amp;&amp; mathtype == <a class="code" href="group__DataTypes.html#gg60d16c50c365cd12f1f61ce8f4cebb206d3b58fc952172de6c4a1b3f75b8b5b2">FC_MT_SCALAR</a>) ) {
<a name="l00652"></a>00652     <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Inconsistent number of components and math type "</span>
<a name="l00653"></a>00653                           <span class="stringliteral">"for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00654"></a>00654     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00655"></a>00655   }
<a name="l00656"></a>00656   <span class="comment">// Check that numDataPoint is consistent</span>
<a name="l00657"></a>00657   <span class="comment">// (this will also force build edges &amp; faces if necessary)</span>
<a name="l00658"></a>00658   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(variable)) {
<a name="l00659"></a>00659     <span class="keywordflow">if</span> (numDataPoint != 1) {
<a name="l00660"></a>00660       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Global var '%s' can only have 1 datapoint"</span>,
<a name="l00661"></a>00661                    varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00662"></a>00662       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00663"></a>00663     }
<a name="l00664"></a>00664   }
<a name="l00665"></a>00665   <span class="keywordflow">else</span> {
<a name="l00666"></a>00666     rc = <a class="code" href="group__Mesh.html#g12d76ae817fee1f4ea941aad228923bc" title="Returns number of a type of mesh entity.">fc_getMeshNumEntity</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>, assoc, &amp;temp_numDataPoint);
<a name="l00667"></a>00667     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>)
<a name="l00668"></a>00668       <span class="keywordflow">return</span> rc;
<a name="l00669"></a>00669     <span class="keywordflow">if</span> (temp_numDataPoint != numDataPoint) {
<a name="l00670"></a>00670       <a class="code" href="group__Library.html#g1473e77471cd1319f76eb9a32e4ad91f" title="Print an error message to stderr.">fc_printfErrorMessage</a>(<span class="stringliteral">"Inconsistent number of data points and association "</span>
<a name="l00671"></a>00671                    <span class="stringliteral">"type for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#50d222efb8783e524916e62071f595c7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00672"></a>00672       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce464a3d55131c355cdf036f95d0d7e1a6e">FC_INPUT_ERROR</a>;
<a name="l00673"></a>00673     }
<a name="l00674"></a>00674   }
<a name="l00675"></a>00675 
<a name="l00676"></a>00676   <span class="comment">// log message</span>
<a name="l00677"></a>00677   <span class="keywordflow">if</span>(!<a class="code" href="group__Variable.html#ge37eb4dc16b959c2adb548c6f195decb" title="Check that whether a variable is global.">fc_isVariableGlobal</a>(variable)){
<a name="l00678"></a>00678     <span class="comment">//Non-global variable</span>
<a name="l00679"></a>00679     <a class="code" href="struct__FC__MeshSlot.html" title="Mesh Slot Structure for the Mesh Table.">_FC_MeshSlot</a>* meshSlot;
<a name="l00680"></a>00680     meshSlot = <a class="code" href="group__PrivateMesh.html#g6bb5928d0f0ecc4f5271315a3c7520d8" title="Get a mesh slot from a mesh handle.">_fc_getMeshSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7afb59f267464c49b3546acca51e985c">mesh</a>);
<a name="l00681"></a>00681     <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertices on mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#68621513bb50e53f850e0b3fe84f43f7">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00682"></a>00682   } <span class="keywordflow">else</span> {
<a name="l00683"></a>00683     <span class="comment">//Global variables don't have a mesh. Use the dataset name</span>
<a name="l00684"></a>00684     <a class="code" href="struct__FC__DsSlot.html" title="Dataset Slot Structure for the Dataset Table.">_FC_DsSlot</a> *datasetSlot;
<a name="l00685"></a>00685     datasetSlot = <a class="code" href="group__PrivateDataset.html#gd3ed406753b9577575d71e0b7ce8a359" title="Get a dataset slot from a dataset handle.">_fc_getDsSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7bbfd42034d39ff3b44f750f50b2382f">ds</a>);
<a name="l00686"></a>00686     <a class="code" href="group__Library.html#g7e9664a8765cc08c313df880421c496b" title="Print a log message to stdout.">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertices for dataset '%s'"</span>,datasetSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#4339e69fe30b05ede4dc06248a0e883b">header</a>.<a class="code" href="struct__FC__SlotHeader.html#b14afe27fdf25b95ceacb0ca867696a5">name</a>);
<a name="l00687"></a>00687   }
<a name="l00688"></a>00688 
<a name="l00689"></a>00689   <span class="comment">// copy metadata</span>
<a name="l00690"></a>00690   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#f2987ccafac1c49c016fc2e3fcd218ac">numDataPoint</a> = numDataPoint;
<a name="l00691"></a>00691   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#7c8e3668b0bc0c037d671ee75af96279">numComponent</a> = <a class="code" href="seriesAnalyzer_8c.html#9ba814c62f21460639802c7771e86fa6">numComponent</a>;
<a name="l00692"></a>00692   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#c9e804c6a08dd9757651d15d09963015">assoc</a> = assoc;
<a name="l00693"></a>00693   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#dc53e54a808b2a065c1c8965ab240b7e">mathtype</a> = mathtype;
<a name="l00694"></a>00694   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#d008d3f8bcab7eafced67cbb267b5cbc">datatype</a> = datatype;
<a name="l00695"></a>00695 
<a name="l00696"></a>00696   <span class="comment">// copy data buffer</span>
<a name="l00697"></a>00697   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b9cf193ccf780bc94dfa5af56fc33ab2">data</a> = data;
<a name="l00698"></a>00698   
<a name="l00699"></a>00699   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a40aa471d085988d5b582669f766ce46687acb19dbc2e15e6e89cdc39e8e18e">FC_SUCCESS</a>;
<a name="l00700"></a>00700 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 27 13:26:17 2008 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
