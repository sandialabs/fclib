<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FCLib: Variable</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>Variable<br>
<small>
[<a class="el" href="group__DataInterface.html">Data Interface</a>]</small>
</h1>
<p>
Collaboration diagram for Variable:<hr><a name="_details"></a><h2>Detailed Description</h2>
Operations on variables. 
<p>
<b>Description:</b> <p>
Sequence variables are stored as an array of variables. If a function does not have a seqVariable version, in many cases you can call the variable version on the first variable in the seqVariable array and get the results you expect, e.g. fc_getVariableInfo(seqVar[0], ...). In some cases you would need to loop over all variables in the seqVariable array, e.g. fc_setVariableData(seqVar[i], ...). (For an explanation of general data manipulations, see <a class="el" href="group__DataInterface.html">Data Interface</a>.) 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PrivateVariable.html">(Private)</a></td></tr>

<tr><td colspan="2"><br><h2>Create new variable from scratch.</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g3de7edfd0291f0f9f3d246f3a6254925">fc_createGlobalVariable</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *varName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new global variable.  <a href="#g3de7edfd0291f0f9f3d246f3a6254925"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g6f4709d2e5c166307f0cb3fccffe6a5a">fc_createGlobalSeqVariable</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> sequence, char *varName, int *numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> **seqVars)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new global sequence variable.  <a href="#g6f4709d2e5c166307f0cb3fccffe6a5a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g2f498c4fbd85d8094f0f640a17341cb3">fc_createVariable</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new variable.  <a href="#g2f498c4fbd85d8094f0f640a17341cb3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gada4bacc9679592ff8b27c538570c1da">fc_createSeqVariable</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> sequence, char *varName, int *numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> **seqVars)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new sequence variable.  <a href="#gada4bacc9679592ff8b27c538570c1da"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int numDataPoint, int <a class="el" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>, <a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc, <a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype, <a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype, void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the variable data by copy.  <a href="#gabe0bc09ddda4bae29ddb6d12fa07bd2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g4491a3d96b7252fd5d0de54089d6838d">fc_setVariableDataPtr</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int numDataPoint, int <a class="el" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>, <a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc, <a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype, <a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype, void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the pointer to the variable data.  <a href="#g4491a3d96b7252fd5d0de54089d6838d"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Other ways to get new variables.</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gadaf2c35fed7aa03191431541ad4207a">fc_copyGlobalVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> src_var, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> dest_dataset, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a global variable.  <a href="#gadaf2c35fed7aa03191431541ad4207a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gec469953da4f2320ca29690f392b53c6">fc_copyGlobalSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *src_vars, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> dest_ds, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> dest_seq, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> **new_vars)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a global sequence variable.  <a href="#gec469953da4f2320ca29690f392b53c6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g613db2bba8e25ddc62756f186f442cab">fc_copyVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> src_var, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> dest_mesh, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a variable.  <a href="#g613db2bba8e25ddc62756f186f442cab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ge130da6a48d1753cc958f251a8a92ee0">fc_copyVariableWithNewAssociation</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> src_var, <a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> newAssoc, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copies a Variable and (optionally) converts to a new association type.  <a href="#ge130da6a48d1753cc958f251a8a92ee0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g0f742eca08d99bdb19862fe375f4f3d9">fc_copySeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *src_seqVar, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> dest_mesh, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> dest_seq, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> **new_seqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy a sequence variable.  <a href="#g0f742eca08d99bdb19862fe375f4f3d9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g2c95cc9c3001645f1aa0926ccd0f362e">fc_copySeqVariableWithNewAssociation</a> (int src_numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *src_seqVar, <a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> newAssoc, char *newName, <a class="el" href="structFC__Variable.html">FC_Variable</a> **new_seqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copies a seqVariable and (optionally) converts to a new association type.  <a href="#g2c95cc9c3001645f1aa0926ccd0f362e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g61fe9ebf0de41291042f685580b6d272">fc_convertVariablesToSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *vars, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> sequence, char *new_name, <a class="el" href="structFC__Variable.html">FC_Variable</a> **seqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert an array of basic vars into a sequence var.  <a href="#g61fe9ebf0de41291042f685580b6d272"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g70bf49ced6c21052788697a0a56c9a50">fc_createComponentVariables</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> var, int *<a class="el" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>, <a class="el" href="structFC__Variable.html">FC_Variable</a> **components)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates new variables which are the components of a given variable.  <a href="#g70bf49ced6c21052788697a0a56c9a50"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g5d42857d56c817882486a2bd6edea62f">fc_createComponentSeqVariables</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar, int *<a class="el" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***compSeqVars)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates new sequence variables which are the components of a given sequence variable.  <a href="#g5d42857d56c817882486a2bd6edea62f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g75cee40dcf0d9c58ef73293e68ddac12">fc_mergeComponentVariables</a> (int <a class="el" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>, <a class="el" href="structFC__Variable.html">FC_Variable</a> *components, char *name, <a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype, <a class="el" href="structFC__Variable.html">FC_Variable</a> *new_var)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new multicomponent variable from a group of scalars.  <a href="#g75cee40dcf0d9c58ef73293e68ddac12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g09cb767856e717bf0b5273b0cdc22aac">fc_mergeComponentSeqVariables</a> (int <a class="el" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>, int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> **compSeqVars, char *name, <a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype, <a class="el" href="structFC__Variable.html">FC_Variable</a> **newSeqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new multicomponent seq variable from a group of scalars.  <a href="#g09cb767856e717bf0b5273b0cdc22aac"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get existing variables.</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ga6cb33a79c327784d62d9b57e0381fcf">fc_getGlobalVariables</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the global variables in a dataset.  <a href="#ga6cb33a79c327784d62d9b57e0381fcf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g493c9016a0f06eda5a5771fc50426ec4">fc_getGlobalSeqVariables</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numSeqVar, int **numStepPerVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***seqVariables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the global sequence variables in a dataset.  <a href="#g493c9016a0f06eda5a5771fc50426ec4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g74cf87c790d013532d9451af1b5f1fbb">fc_getVariables</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the variables in a mesh.  <a href="#g74cf87c790d013532d9451af1b5f1fbb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g93185e07dcdf01ffc87fc28a69ee96ae">fc_getSeqVariables</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numSeqVar, int **numStepPerVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***seqVariables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the sequence variables in a mesh.  <a href="#g93185e07dcdf01ffc87fc28a69ee96ae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g5d825add6a7ebeb9a0b6278eea1fd0c5">fc_getNumGlobalVariable</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of global variables in a dataset.  <a href="#g5d825add6a7ebeb9a0b6278eea1fd0c5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ga0b13a16d42becc4b214f54d3b1d45fe">fc_getNumGlobalSeqVariable</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, int *numSeqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of global sequence variables in a dataset.  <a href="#ga0b13a16d42becc4b214f54d3b1d45fe"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g4739277f47b48de079cda9979206a515">fc_getNumVariable</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of variables in a mesh.  <a href="#g4739277f47b48de079cda9979206a515"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gb1d118fd5e0b7b8345b3c13447a1930d">fc_getNumSeqVariable</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, int *numSeqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of sequence variables in a mesh.  <a href="#gb1d118fd5e0b7b8345b3c13447a1930d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gbcaa14f2053d0cf04c9971caaa2a71da">fc_getGlobalVariableByName</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *varname, int *numVariables, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get global variables from the dataset.  <a href="#gbcaa14f2053d0cf04c9971caaa2a71da"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g8b251e2612532f815194770829cbb8b1">fc_getGlobalSeqVariableByName</a> (<a class="el" href="structFC__Dataset.html">FC_Dataset</a> dataset, char *varName, int *numSeqVar, int **numStepPerVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***seqVariables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get global sequence variables with a given name from the dataset.  <a href="#g8b251e2612532f815194770829cbb8b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g53d2967ed4e38d57d0852ab5e4cfef80">fc_getVariableByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, int *numVariables, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get variables from the mesh.  <a href="#g53d2967ed4e38d57d0852ab5e4cfef80"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g9b7959f3f6f14b4fc7ca976c420bfaff">fc_getVariableComponentsByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, <a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *type, int *numVariables, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get variables that can be components from the mesh.  <a href="#g9b7959f3f6f14b4fc7ca976c420bfaff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g54fd029154cb23c04657c0db0e2085ee">fc_getOrGenerateUniqueVariableByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets a unique var if it exists, otherwise generate it from components if possible.  <a href="#g54fd029154cb23c04657c0db0e2085ee"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g81f06442d2acc47bf9cf8ebbd94be75d">fc_getSeqVariableByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varName, int *numSeqVar, int **numStepPerVar, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***seqVariables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get sequence variables of a given name from the mesh.  <a href="#g81f06442d2acc47bf9cf8ebbd94be75d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ge81588760e80295df3b9cf8b69006647">fc_getSeqVariableComponentsByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, <a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *type, int *numVariables, int **numStepsPerVariable, <a class="el" href="structFC__Variable.html">FC_Variable</a> ***variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get seq variables that can be components from the mesh.  <a href="#ge81588760e80295df3b9cf8b69006647"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g81cdc76a742e4bbf85fcbf5deba8c0e7">fc_getOrGenerateUniqueSeqVariableByName</a> (<a class="el" href="structFC__Mesh.html">FC_Mesh</a> mesh, char *varname, int *numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> **variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets a unique seq var if it exists, otherwise generate it from components if possible.  <a href="#g81cdc76a742e4bbf85fcbf5deba8c0e7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Change the name of a mesh.</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g8b86d022a2bc49ebc572e72886ac0f6d">fc_changeVariableName</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, char *newName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the name of a variable.  <a href="#g8b86d022a2bc49ebc572e72886ac0f6d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g249293bfa13f63d3671069a14d1e7763">fc_changeSeqVariableName</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variables, char *newName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the name of a sequence variable.  <a href="#g249293bfa13f63d3671069a14d1e7763"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Release/delete meshes.</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gb575d3f6365288a17c1117311fd99dce">fc_releaseVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to minimize variable's memory usage.  <a href="#gb575d3f6365288a17c1117311fd99dce"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g6c69f71bf49a208465743d77c291daf3">fc_releaseSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempt to minimize variable's memory usage.  <a href="#g6c69f71bf49a208465743d77c291daf3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g2f48fcbd551131488dd5757c27364656">fc_deleteVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a variable.  <a href="#g2f48fcbd551131488dd5757c27364656"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g57341fab4863efe2c35476aee509f20d">fc_deleteSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *variables)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete a sequence variable.  <a href="#g57341fab4863efe2c35476aee509f20d"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get variable metadata.</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g888dc4800278e9343a1c35599fa82d63">fc_isVariableValid</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that the handle refers to a valid variable.  <a href="#g888dc4800278e9343a1c35599fa82d63"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that the handle refers to a valid variable.  <a href="#g6da3e04586ef55d558c3300b10ab0cb6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check that whether a variable is global.  <a href="#gb955e49911e5be0218cdb3dde8283165"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g3ec29251d717c5d0ca4ecfd9824f67b1">fc_getVariableName</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, char **varName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return name of a variable.  <a href="#g3ec29251d717c5d0ca4ecfd9824f67b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gea428de5a2584716f6e2bc77cd339544">fc_getSequenceFromSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar, <a class="el" href="structFC__Sequence.html">FC_Sequence</a> *sequence)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the parent sequence of a sequence variable.  <a href="#gea428de5a2584716f6e2bc77cd339544"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gf9224b61be48617fe1fea54e12c0cbe6">fc_getDatasetFromVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="structFC__Dataset.html">FC_Dataset</a> *dataset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the parent dataset of the variable.  <a href="#gf9224b61be48617fe1fea54e12c0cbe6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="structFC__Mesh.html">FC_Mesh</a> *mesh)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the parent mesh of the variable.  <a href="#g18aa101c04f3d2189a1f1e4d68c9dc2a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int *numDataPoint, int *<a class="el" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>, <a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> *assoc, <a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *mathtype, <a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> *datatype)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get information about a variable.  <a href="#g415dc8be07262ef04c7c66028bc0217f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gf3d21db4053db4c375b752348965c554">fc_getVariableDataType</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> *datatype)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the data type of a variable.  <a href="#gf3d21db4053db4c375b752348965c554"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g36c4ac9f503bcf040c378c06e1ad9188">fc_getVariableAssociationType</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> *assoc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return data association of a variable.  <a href="#g36c4ac9f503bcf040c378c06e1ad9188"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g954ae36f975a3fe850f18db5b3e15fc5">fc_getVariableNumComponent</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int *<a class="el" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return number of components of a variable.  <a href="#g954ae36f975a3fe850f18db5b3e15fc5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gd98897c36ca177106761a4214085551c">fc_getVariableMathType</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *mathtype)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the math type of a variable.  <a href="#gd98897c36ca177106761a4214085551c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gca6fc2e25075838bc8b2ef3a347efb20">fc_getVariableNumDataPoint</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, int *numDataPoint)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return number of data points in a variable.  <a href="#gca6fc2e25075838bc8b2ef3a347efb20"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Get variable big data.</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, void **data_p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the data in a variable.  <a href="#g26d6dc6119ce91abb2d2b0edf17865f6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g717ba43c5ff38b3e711f5a38625e670e">fc_getVariableDataAsDataType</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, <a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> dataType, void **data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a copy of a variable's data as the requested data type.  <a href="#g717ba43c5ff38b3e711f5a38625e670e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g8273c100c0ab952088d301845ed3c5f0">fc_getSeqVariableDataPointSliceAsSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar, int dataPointID, char *slicevarname, <a class="el" href="structFC__Variable.html">FC_Variable</a> **sliceVar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">In a sequence variable, get data for steps at a single data point returned as a sequence variable with association FC_AT_WHOLE_MESH.  <a href="#g8273c100c0ab952088d301845ed3c5f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#g01510834d5c80b7076d17badfd929cfa">fc_getSeqVariableDataPointSlice</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVar, int dataPointID, void **history)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">In a sequence variable, get data for steps at a single data.  <a href="#g01510834d5c80b7076d17badfd929cfa"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Print variable.</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ge86eb5112f1b4cdea235a39bc49aba38">fc_printVariable</a> (<a class="el" href="structFC__Variable.html">FC_Variable</a> variable, char *label, int print_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print variable meta data to stdout, and optionally the data values.  <a href="#ge86eb5112f1b4cdea235a39bc49aba38"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#gcdec47a673b9054bcf3208fcdbd4c541">fc_printSeqVariable</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVars, char *label, int print_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print sequence variable meta data to stdout, and optionally the data values.  <a href="#gcdec47a673b9054bcf3208fcdbd4c541"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Variable.html#ge0cd27a681fb949bf749760d04b682a9">fc_printSeqVariableRange</a> (int numStep, <a class="el" href="structFC__Variable.html">FC_Variable</a> *seqVars, int range_start, int range_stop, char *label, int print_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print sequence variable meta data to stdout, and optionally the data values (with start and stop index values).  <a href="#ge0cd27a681fb949bf749760d04b682a9"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g249293bfa13f63d3671069a14d1e7763"></a><!-- doxytag: member="variable.c::fc_changeSeqVariableName" ref="g249293bfa13f63d3671069a14d1e7763" args="(int numStep, FC_Variable *variables, char *newName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_changeSeqVariableName           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the name of a sequence variable. 
<p>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD. Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
Input - Number of steps in the seq variable. </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
Input - the steps of the seq variable. </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - new name for the seq variable. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03706">3706</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="varSmooth_8c-source.html#l00069">main()</a>.<div class="fragment"><pre class="fragment"><a name="l03710"></a>03710   {
<a name="l03711"></a>03711   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc, rc_keep = <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03712"></a>03712   <span class="keywordtype">int</span> i;
<a name="l03713"></a>03713   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l03714"></a>03714 
<a name="l03715"></a>03715   <span class="comment">// check input</span>
<a name="l03716"></a>03716   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(numStep, variables) || newName == NULL) {
<a name="l03717"></a>03717     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03718"></a>03718     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03719"></a>03719   }
<a name="l03720"></a>03720 
<a name="l03721"></a>03721   <span class="comment">// log message</span>
<a name="l03722"></a>03722   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variables[0]); 
<a name="l03723"></a>03723   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Changing name of seq variable from '%s' to '%s'"</span>, 
<a name="l03724"></a>03724                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, newName);
<a name="l03725"></a>03725   
<a name="l03726"></a>03726   <span class="comment">// Do it</span>
<a name="l03727"></a>03727   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l03728"></a>03728     rc = <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>, newName);
<a name="l03729"></a>03729     if (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l03730"></a>03730       rc_keep = rc;
<a name="l03731"></a>03731   }
<a name="l03732"></a>03732   <span class="keywordflow">return</span> rc_keep;
<a name="l03733"></a>03733 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8b86d022a2bc49ebc572e72886ac0f6d"></a><!-- doxytag: member="variable.c::fc_changeVariableName" ref="g8b86d022a2bc49ebc572e72886ac0f6d" args="(FC_Variable variable, char *newName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_changeVariableName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the name of a variable. 
<p>
<b>Modifications:</b> <ul>
<li>8/24/2005 WSD. Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
Input - the variable. </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - new name for the variable. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03678">3678</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="varSmooth_8c-source.html#l00069">main()</a>.<div class="fragment"><pre class="fragment"><a name="l03681"></a>03681   {
<a name="l03682"></a>03682   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l03683"></a>03683 
<a name="l03684"></a>03684   <span class="comment">// check input</span>
<a name="l03685"></a>03685   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l03686"></a>03686   <span class="keywordflow">if</span> (varSlot == NULL || newName == NULL) {
<a name="l03687"></a>03687     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03688"></a>03688     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03689"></a>03689   }
<a name="l03690"></a>03690 
<a name="l03691"></a>03691   <span class="comment">// log message</span>
<a name="l03692"></a>03692   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Changing name of variable from '%s' to '%s'"</span>, 
<a name="l03693"></a>03693                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, newName);
<a name="l03694"></a>03694   
<a name="l03695"></a>03695   <span class="comment">// Do it</span>
<a name="l03696"></a>03696   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>, newName);
<a name="l03697"></a>03697 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g61fe9ebf0de41291042f685580b6d272"></a><!-- doxytag: member="variable.c::fc_convertVariablesToSeqVariable" ref="g61fe9ebf0de41291042f685580b6d272" args="(int numStep, FC_Variable *vars, FC_Sequence sequence, char *new_name, FC_Variable **seqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_convertVariablesToSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>sequence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>seqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert an array of basic vars into a sequence var. 
<p>
<b>Description:</b> <p>
This routine converts an array of basic vars into a sequence var. It is a LOT more efficient than copy the data of basic vars into the steps of a newly created seq var because no creation/destruction goes on -- it just changes how the mesh views the variable handles.<p>
You should put the variables in the order they will be on the sequence. There must be the same number of variables as there are steps on the sequence. The variables and the sequence have to be in the same dataset. All of the variables must be on the same mesh and have the same metadata (except the name). The variables cannot already be part of a sequence variable.<p>
If no name is supplied, the seqVar will have the name of the first variable.<p>
(The array of vars that is the seq var should be exactly the array passed in. A new one is made in case the original array was automatically generated--fc_deleteSeqVariable would fail on an automatically allocated array because it tries to free the array of handles.)<p>
<b>Modifications:</b> <ul>
<li>10/21/04 WSK created.</li><li>9/21/2006 WSD modified to handle global vars </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - the number of steps </td></tr>
<tr><td valign="top"><em>vars</em>&nbsp;</td><td>
input - the variables (array numStep long) (this should be freed by user if malloc'd) </td></tr>
<tr><td valign="top"><em>sequence</em>&nbsp;</td><td>
input - the sequence (with numStep steps) </td></tr>
<tr><td valign="top"><em>new_name</em>&nbsp;</td><td>
input - new name (optional) </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
output - pointer to seq's var handles </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l01665">1665</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="meshP_8h-source.html#l00185">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="sequence_8c-source.html#l01558">fc_getDatasetFromSequence()</a>, <a class="el" href="variable_8c-source.html#l04228">fc_getDatasetFromVariable()</a>, <a class="el" href="variable_8c-source.html#l04268">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="sequence_8c-source.html#l01640">fc_getSequenceNumStep()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="sequence_8c-source.html#l01493">fc_isSequenceValid()</a>, <a class="el" href="variable_8c-source.html#l04032">fc_isVariableValid()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00773">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>, <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::numBasicVar</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>, <a class="el" href="meshP_8h-source.html#l00186">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numStepPerSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::seqVarIDs</a>, and <a class="el" href="variableP_8h-source.html#l00080">_FC_VarSlot::stepID</a>.
<p>
Referenced by <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>, <a class="el" href="varNormalize_8c-source.html#l00116">createStressOrPressureVar()</a>, <a class="el" href="varmath_8c-source.html#l01394">fc_constOperatorSeqVar()</a>, <a class="el" href="variable_8c-source.html#l01986">fc_createComponentSeqVariables()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l02229">fc_mergeComponentSeqVariables()</a>, <a class="el" href="varmath_8c-source.html#l00655">fc_operatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l00979">fc_seqConstOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02640">fc_seqVarBinaryFunctionConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02414">fc_seqVarBinaryFunctionSeqConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02546">fc_seqVarBinaryFunctionSeqVarConst()</a>, <a class="el" href="varmath_8c-source.html#l02284">fc_seqVarBinaryFunctionSeqVarSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l02179">fc_seqVarBinaryFunctionSeqVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01296">fc_seqVarOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00858">fc_seqVarOperatorSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l00747">fc_seqVarOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l02094">fc_seqVarUnaryFunction()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, and <a class="el" href="gaplines_8c-source.html#l00433">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01672"></a>01672   {
<a name="l01673"></a>01673   <span class="keywordtype">int</span> i, j;
<a name="l01674"></a>01674   <span class="keywordtype">int</span> temp_numStep;
<a name="l01675"></a>01675   <a class="code" href="structFC__Dataset.html">FC_Dataset</a> dataset1, dataset2;
<a name="l01676"></a>01676   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh;
<a name="l01677"></a>01677   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a> *varSlots[numStep];
<a name="l01678"></a>01678   <span class="keywordtype">int</span>* varMask;
<a name="l01679"></a>01679   <span class="keywordtype">int</span> *tempNumPer, **tempSlotIDs;
<a name="l01680"></a>01680   <span class="keywordtype">int</span> *numBasicVar_p, **basicVarIDs_p;
<a name="l01681"></a>01681   <span class="keywordtype">int</span> *numSeqVar_p, **numStepPerSeqVar_p, ***seqVarIDs_p;
<a name="l01682"></a>01682 
<a name="l01683"></a>01683   <span class="comment">// default return</span>
<a name="l01684"></a>01684   <span class="keywordflow">if</span> (seqVar)
<a name="l01685"></a>01685     *seqVar = NULL;
<a name="l01686"></a>01686 
<a name="l01687"></a>01687   <span class="comment">// test input -- a lot of conditions!</span>
<a name="l01688"></a>01688   <span class="keywordflow">if</span> (numStep &lt; 0 || !vars || !<a class="code" href="group__Sequence.html#gc2557da2ece780124f4ab34926436806">fc_isSequenceValid</a>(sequence) ||
<a name="l01689"></a>01689       !seqVar) {
<a name="l01690"></a>01690     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01691"></a>01691     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01692"></a>01692   }
<a name="l01693"></a>01693   <a class="code" href="group__Sequence.html#g556f33fb72c8f5c2f2a3bba5177094a1">fc_getSequenceNumStep</a>(sequence, &amp;temp_numStep);
<a name="l01694"></a>01694   <span class="keywordflow">if</span> (numStep != temp_numStep) {
<a name="l01695"></a>01695     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"numStep (%d) does not agree with sequence's "</span>
<a name="l01696"></a>01696                           <span class="stringliteral">"numStep (%d)"</span>, numStep, temp_numStep);
<a name="l01697"></a>01697     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01698"></a>01698   }
<a name="l01699"></a>01699   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l01700"></a>01700     <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g888dc4800278e9343a1c35599fa82d63">fc_isVariableValid</a>(vars[i])) {
<a name="l01701"></a>01701       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01702"></a>01702       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01703"></a>01703     }
<a name="l01704"></a>01704     varSlots[i] = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(vars[i]);
<a name="l01705"></a>01705     <span class="keywordflow">if</span> (varSlots[i]-&gt;stepID &gt;= 0) {
<a name="l01706"></a>01706       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Variable is already part of a sequence variable"</span>);
<a name="l01707"></a>01707       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01708"></a>01708     }
<a name="l01709"></a>01709   }
<a name="l01710"></a>01710   <a class="code" href="group__Sequence.html#g0d5aeb42aa45e10bd2313d3795c207e2">fc_getDatasetFromSequence</a>(sequence, &amp;dataset1);
<a name="l01711"></a>01711   <a class="code" href="group__Variable.html#gf9224b61be48617fe1fea54e12c0cbe6">fc_getDatasetFromVariable</a>(vars[0], &amp;dataset2);
<a name="l01712"></a>01712   <a class="code" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a>(vars[0], &amp;mesh);
<a name="l01713"></a>01713   <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(dataset1, dataset2)) {
<a name="l01714"></a>01714     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"variable and sequence are not in same dataset"</span>);
<a name="l01715"></a>01715     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01716"></a>01716   }
<a name="l01717"></a>01717   <span class="keywordflow">for</span> (i = 1; i &lt; numStep; i++) {
<a name="l01718"></a>01718     <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(varSlots[i]-&gt;ds, dataset1)) {
<a name="l01719"></a>01719       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"variables are not on same dataset"</span>);
<a name="l01720"></a>01720       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01721"></a>01721     }
<a name="l01722"></a>01722     <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(varSlots[i]-&gt;mesh, mesh)) {
<a name="l01723"></a>01723       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"variables are not on same mesh"</span>);
<a name="l01724"></a>01724       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01725"></a>01725     }
<a name="l01726"></a>01726     <span class="keywordflow">if</span> (varSlots[i]-&gt;numDataPoint != varSlots[0]-&gt;numDataPoint ||
<a name="l01727"></a>01727         varSlots[i]-&gt;<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> != varSlots[0]-&gt;<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> ||
<a name="l01728"></a>01728         varSlots[i]-&gt;assoc        != varSlots[0]-&gt;assoc ||
<a name="l01729"></a>01729         varSlots[i]-&gt;mathtype     != varSlots[0]-&gt;mathtype ||
<a name="l01730"></a>01730         varSlots[i]-&gt;datatype     != varSlots[0]-&gt;datatype) {
<a name="l01731"></a>01731       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"variables have differing metadata"</span>);
<a name="l01732"></a>01732       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01733"></a>01733     }
<a name="l01734"></a>01734   }
<a name="l01735"></a>01735 
<a name="l01736"></a>01736   <span class="comment">// similar to fc_createSeqVariable()</span>
<a name="l01737"></a>01737 
<a name="l01738"></a>01738   <span class="comment">// Change names</span>
<a name="l01739"></a>01739   <span class="keywordflow">if</span> (new_name) {
<a name="l01740"></a>01740     <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) 
<a name="l01741"></a>01741       <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;varSlots[i]-&gt;header, new_name);
<a name="l01742"></a>01742   }
<a name="l01743"></a>01743   <span class="keywordflow">else</span> {
<a name="l01744"></a>01744     <span class="keywordflow">for</span> (i = 1; i &lt; numStep; i++)
<a name="l01745"></a>01745       <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;varSlots[i]-&gt;header, varSlots[0]-&gt;header.name);
<a name="l01746"></a>01746   }
<a name="l01747"></a>01747 
<a name="l01748"></a>01748   <span class="comment">// change var contents to reflect new state as seq vars</span>
<a name="l01749"></a>01749   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l01750"></a>01750     varSlots[i]-&gt;sequence = sequence;
<a name="l01751"></a>01751     varSlots[i]-&gt;<a class="code" href="struct__FC__VarSlot.html#0ada7d80dbc3b5a751bdaad72d8922e3">stepID</a> = i;
<a name="l01752"></a>01752   }
<a name="l01753"></a>01753 
<a name="l01754"></a>01754   <span class="comment">// get pointers to stuff on mesh or dataset, depending</span>
<a name="l01755"></a>01755   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(mesh, <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>)) {
<a name="l01756"></a>01756     <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a> *dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(varSlots[0]-&gt;ds);
<a name="l01757"></a>01757     numBasicVar_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>;
<a name="l01758"></a>01758     basicVarIDs_p = &amp;dsSlot-&gt;basicVarIDs;
<a name="l01759"></a>01759     numSeqVar_p = &amp;dsSlot-&gt;numSeqVar;
<a name="l01760"></a>01760     numStepPerSeqVar_p = &amp;dsSlot-&gt;numStepPerSeqVar;
<a name="l01761"></a>01761     seqVarIDs_p = &amp;dsSlot-&gt;seqVarIDs;
<a name="l01762"></a>01762   }
<a name="l01763"></a>01763   <span class="keywordflow">else</span> {
<a name="l01764"></a>01764     <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a> *meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(varSlots[0]-&gt;mesh);
<a name="l01765"></a>01765     numBasicVar_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>;
<a name="l01766"></a>01766     basicVarIDs_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5a672f4074dfa02a1bbdd667a09852e8">basicVarIDs</a>;
<a name="l01767"></a>01767     numSeqVar_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>;
<a name="l01768"></a>01768     numStepPerSeqVar_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1d17a5b984a2780fc0a7b5b88de791e2">numStepPerSeqVar</a>;
<a name="l01769"></a>01769     seqVarIDs_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#4875049ef97cdce27533cbcdb6a5d145">seqVarIDs</a>;
<a name="l01770"></a>01770   }
<a name="l01771"></a>01771 
<a name="l01772"></a>01772   <span class="comment">// Add the handles to list of sequence vars</span>
<a name="l01773"></a>01773   tempNumPer = (<span class="keywordtype">int</span>*)realloc(*numStepPerSeqVar_p,
<a name="l01774"></a>01774                     ((*numSeqVar_p)+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)); 
<a name="l01775"></a>01775   tempSlotIDs = (<span class="keywordtype">int</span>**)realloc(*seqVarIDs_p,
<a name="l01776"></a>01776                       (*numSeqVar_p+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*));
<a name="l01777"></a>01777   <span class="keywordflow">if</span> (!tempNumPer || !tempSlotIDs) {
<a name="l01778"></a>01778     free(tempNumPer); free(tempSlotIDs);
<a name="l01779"></a>01779     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01780"></a>01780     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01781"></a>01781   }
<a name="l01782"></a>01782   tempSlotIDs[*numSeqVar_p] = (<span class="keywordtype">int</span>*)malloc(numStep*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)); 
<a name="l01783"></a>01783   <span class="keywordflow">if</span> (!tempSlotIDs[*numSeqVar_p]) {
<a name="l01784"></a>01784     free(tempNumPer); free(tempSlotIDs);
<a name="l01785"></a>01785     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01786"></a>01786     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01787"></a>01787   }
<a name="l01788"></a>01788   tempNumPer[*numSeqVar_p] = numStep;
<a name="l01789"></a>01789   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) 
<a name="l01790"></a>01790     tempSlotIDs[*numSeqVar_p][i] = vars[i].slotID;
<a name="l01791"></a>01791   *numStepPerSeqVar_p = tempNumPer;
<a name="l01792"></a>01792   *seqVarIDs_p = tempSlotIDs;
<a name="l01793"></a>01793   *numSeqVar_p = (*numSeqVar_p) + 1;
<a name="l01794"></a>01794 
<a name="l01795"></a>01795   <span class="comment">// remove handles from list of basic vars</span>
<a name="l01796"></a>01796   varMask = calloc(*numBasicVar_p, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l01797"></a>01797   <span class="keywordflow">if</span> (varMask == NULL) {
<a name="l01798"></a>01798     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01799"></a>01799     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01800"></a>01800   }
<a name="l01801"></a>01801   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l01802"></a>01802     <span class="keywordflow">for</span> (j = 0; j &lt; *numBasicVar_p; j++) {
<a name="l01803"></a>01803       <span class="keywordflow">if</span> (vars[i].slotID == (*basicVarIDs_p)[j]) {
<a name="l01804"></a>01804         varMask[j] = 1;
<a name="l01805"></a>01805         <span class="keywordflow">break</span>;
<a name="l01806"></a>01806       }
<a name="l01807"></a>01807     }
<a name="l01808"></a>01808     <span class="keywordflow">if</span> (j == *numBasicVar_p) {
<a name="l01809"></a>01809       printf(<span class="stringliteral">"**** developer note: something went wrong!!\n"</span>);
<a name="l01810"></a>01810       fflush(NULL);
<a name="l01811"></a>01811       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01812"></a>01812     }
<a name="l01813"></a>01813   }
<a name="l01814"></a>01814   j = 0;
<a name="l01815"></a>01815   *numBasicVar_p = *numBasicVar_p - numStep;
<a name="l01816"></a>01816   <span class="keywordflow">if</span> (*numBasicVar_p == 0) {
<a name="l01817"></a>01817     free(*basicVarIDs_p);
<a name="l01818"></a>01818     *basicVarIDs_p = NULL;
<a name="l01819"></a>01819   }
<a name="l01820"></a>01820   <span class="keywordflow">else</span> {
<a name="l01821"></a>01821     <span class="keywordflow">for</span> (i = 0; i &lt; *numBasicVar_p + numStep; i++) {
<a name="l01822"></a>01822       <span class="keywordflow">if</span> (varMask[i] == 0) {
<a name="l01823"></a>01823         (*basicVarIDs_p)[j] = (*basicVarIDs_p)[i];
<a name="l01824"></a>01824         j++;
<a name="l01825"></a>01825       }
<a name="l01826"></a>01826     }
<a name="l01827"></a>01827   }
<a name="l01828"></a>01828   free(varMask);
<a name="l01829"></a>01829   <span class="comment">// FIX realloc to make smaller</span>
<a name="l01830"></a>01830 
<a name="l01831"></a>01831   <span class="comment">// make return values</span>
<a name="l01832"></a>01832   *seqVar = (<a class="code" href="structFC__Variable.html">FC_Variable</a>*)malloc(numStep*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>));
<a name="l01833"></a>01833   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++)
<a name="l01834"></a>01834     (*seqVar)[i] = vars[i];
<a name="l01835"></a>01835     
<a name="l01836"></a>01836   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01837"></a>01837 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gec469953da4f2320ca29690f392b53c6"></a><!-- doxytag: member="variable.c::fc_copyGlobalSeqVariable" ref="gec469953da4f2320ca29690f392b53c6" args="(int numStep, FC_Variable *src_vars, FC_Dataset dest_ds, FC_Sequence dest_seq, char *newName, FC_Variable **new_vars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_copyGlobalSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>src_vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dest_ds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>dest_seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>new_vars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a global sequence variable. 
<p>
<b>Description:</b> <p>
Create a copy of a global seq variable into the specified dataset using the given name. This will return an error if the source and destination sequences are not similar enough. This will copy a sequence if necessary. The destination sequence's dataset needs to be the same as the destintation dataset or an error will be returned.<p>
The input variable can be a non-global associated with a whole mesh (FC_AT_WHOLE_MESH).<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 WSD Created.</li><li>11/08/2006 WSD added ability to whole mesh var onto a dataset. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
Input - the number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>src_vars</em>&nbsp;</td><td>
Input - the source seq variables to be copied </td></tr>
<tr><td valign="top"><em>dest_ds</em>&nbsp;</td><td>
Input - the destination dataset to be copied into </td></tr>
<tr><td valign="top"><em>dest_seq</em>&nbsp;</td><td>
Input - the destination seq to be copied into </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_vars</em>&nbsp;</td><td>
Output - array of handles to the new variable </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l00816">816</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="sequence_8c-source.html#l02130">_fc_getSeqSlot()</a>, <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="sequenceP_8h-source.html#l00076">_FC_SeqSlot::ds</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00185">fc_createGlobalSeqVariable()</a>, <a class="el" href="base_8c-source.html#l00476">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00467">fc_setVariableData()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>.
<p>
Referenced by <a class="el" href="dataset_8c-source.html#l00172">fc_copyDataset()</a>.<div class="fragment"><pre class="fragment"><a name="l00824"></a>00824   {
<a name="l00825"></a>00825   <span class="keywordtype">int</span> i; 
<a name="l00826"></a>00826   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00827"></a>00827   <span class="keywordtype">int</span> temp_numStep;
<a name="l00828"></a>00828   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dest_dsSlot;
<a name="l00829"></a>00829   <a class="code" href="struct__FC__SeqSlot.html">_FC_SeqSlot</a>* dest_seqSlot;
<a name="l00830"></a>00830   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l00831"></a>00831   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l00832"></a>00832   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l00833"></a>00833   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype;
<a name="l00834"></a>00834   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype;
<a name="l00835"></a>00835   <span class="keywordtype">void</span>* data;
<a name="l00836"></a>00836   
<a name="l00837"></a>00837   <span class="comment">// default return value</span>
<a name="l00838"></a>00838   <span class="keywordflow">if</span> (new_vars)
<a name="l00839"></a>00839     *new_vars = NULL;
<a name="l00840"></a>00840   
<a name="l00841"></a>00841   <span class="comment">// check input</span>
<a name="l00842"></a>00842   dest_dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dest_ds);
<a name="l00843"></a>00843   dest_seqSlot = <a class="code" href="group__PrivateSequence.html#ge669615c173acc924f9664fa05672e7f">_fc_getSeqSlot</a>(dest_seq);
<a name="l00844"></a>00844   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(numStep, src_vars) || dest_dsSlot == NULL || 
<a name="l00845"></a>00845       dest_seqSlot == NULL || !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(dest_ds, dest_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#18a1d8c4ab7c2586678334f1d225b76c">ds</a>) ||
<a name="l00846"></a>00846       numStep != dest_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>  || new_vars == NULL) {
<a name="l00847"></a>00847     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00848"></a>00848     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00849"></a>00849   }
<a name="l00850"></a>00850   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(src_vars[0]);
<a name="l00851"></a>00851 
<a name="l00852"></a>00852   <span class="comment">// test for NULL name</span>
<a name="l00853"></a>00853   <span class="keywordflow">if</span> (newName == NULL)
<a name="l00854"></a>00854     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l00855"></a>00855 
<a name="l00856"></a>00856   <span class="comment">// log message</span>
<a name="l00857"></a>00857   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Copying global sequence variable '%s' to '%s'"</span>, 
<a name="l00858"></a>00858                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, newName);
<a name="l00859"></a>00859 
<a name="l00860"></a>00860   <span class="comment">// get src meta data</span>
<a name="l00861"></a>00861   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(src_vars[0], &amp;numDataPoint, &amp;numComp, &amp;assoc,
<a name="l00862"></a>00862                  &amp;mathtype, &amp;datatype);
<a name="l00863"></a>00863   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00864"></a>00864     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for seq variable '%s'"</span>,
<a name="l00865"></a>00865                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00866"></a>00866     <span class="keywordflow">return</span> rc;
<a name="l00867"></a>00867   }
<a name="l00868"></a>00868 
<a name="l00869"></a>00869   <span class="comment">// more checking</span>
<a name="l00870"></a>00870   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a> || assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a>) {
<a name="l00871"></a>00871     assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a>;
<a name="l00872"></a>00872   }
<a name="l00873"></a>00873   <span class="keywordflow">else</span> {
<a name="l00874"></a>00874     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"var of assoc type %s cannot be copied to a dataset"</span>,
<a name="l00875"></a>00875                           <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(assoc));
<a name="l00876"></a>00876     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00877"></a>00877   }
<a name="l00878"></a>00878 
<a name="l00879"></a>00879   <span class="comment">// create new variable</span>
<a name="l00880"></a>00880   rc = <a class="code" href="group__Variable.html#g6f4709d2e5c166307f0cb3fccffe6a5a">fc_createGlobalSeqVariable</a>(dest_ds, dest_seq, newName, &amp;temp_numStep,
<a name="l00881"></a>00881                       new_vars);
<a name="l00882"></a>00882   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00883"></a>00883     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new seq variable '%s'"</span>, newName);
<a name="l00884"></a>00884     <span class="keywordflow">return</span> rc;
<a name="l00885"></a>00885   }
<a name="l00886"></a>00886   
<a name="l00887"></a>00887   <span class="comment">// get and copy data for each step</span>
<a name="l00888"></a>00888   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l00889"></a>00889     rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(src_vars[i], &amp;data);
<a name="l00890"></a>00890     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00891"></a>00891       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for step %d of seq variable "</span>
<a name="l00892"></a>00892                             <span class="stringliteral">"'%s'"</span>, i, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00893"></a>00893       <span class="keywordflow">return</span> rc;
<a name="l00894"></a>00894     }
<a name="l00895"></a>00895     
<a name="l00896"></a>00896     rc = <a class="code" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData</a>((*new_vars)[i], numDataPoint, numComp, assoc, 
<a name="l00897"></a>00897                             mathtype, datatype, data);
<a name="l00898"></a>00898     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00899"></a>00899       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for step %d of seq variable "</span>
<a name="l00900"></a>00900                             <span class="stringliteral">"'%s'"</span>, i, newName);
<a name="l00901"></a>00901       <span class="keywordflow">return</span> rc;
<a name="l00902"></a>00902     }
<a name="l00903"></a>00903   }
<a name="l00904"></a>00904   
<a name="l00905"></a>00905   <span class="keywordflow">return</span> rc;
<a name="l00906"></a>00906 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gadaf2c35fed7aa03191431541ad4207a"></a><!-- doxytag: member="variable.c::fc_copyGlobalVariable" ref="gadaf2c35fed7aa03191431541ad4207a" args="(FC_Variable src_var, FC_Dataset dest_dataset, char *newName, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_copyGlobalVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>src_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dest_dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a global variable. 
<p>
<b>Description:</b> <p>
Create a copy of a global variable into the specified dataset using the given name.<p>
The input variable can be a non-global associated with a whole mesh (FC_AT_WHOLE_MESH).<p>
<b>Modifications:</b> <ul>
<li>2006/09/19 WSD Created.</li><li>11/08/2006 WSD added ability to whole mesh var onto a dataset. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_var</em>&nbsp;</td><td>
Input - the source variable to be copied </td></tr>
<tr><td valign="top"><em>dest_dataset</em>&nbsp;</td><td>
Input - the destination dataset to be copied into </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
Output - handle to the new variable </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l00722">722</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00122">fc_createGlobalVariable()</a>, <a class="el" href="base_8c-source.html#l00476">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="dataset_8c-source.html#l00762">fc_isDatasetValid()</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00467">fc_setVariableData()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="dataset_8c-source.html#l00172">fc_copyDataset()</a>.<div class="fragment"><pre class="fragment"><a name="l00728"></a>00728     { 
<a name="l00729"></a>00729   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00730"></a>00730   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l00731"></a>00731   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l00732"></a>00732   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l00733"></a>00733   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype;
<a name="l00734"></a>00734   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype;
<a name="l00735"></a>00735   <span class="keywordtype">void</span>* data;
<a name="l00736"></a>00736   
<a name="l00737"></a>00737   <span class="comment">// default return value</span>
<a name="l00738"></a>00738   <span class="keywordflow">if</span> (new_var)
<a name="l00739"></a>00739     *new_var = <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>;
<a name="l00740"></a>00740 
<a name="l00741"></a>00741   <span class="comment">// check input - NULL name is o.k.</span>
<a name="l00742"></a>00742   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(src_var);
<a name="l00743"></a>00743   <span class="keywordflow">if</span> (varSlot == NULL || !<a class="code" href="group__Dataset.html#g77092c7248e1cff8cf5a4035e19658da">fc_isDatasetValid</a>(dest_dataset) || new_var == NULL) {
<a name="l00744"></a>00744     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00745"></a>00745     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00746"></a>00746   }
<a name="l00747"></a>00747 
<a name="l00748"></a>00748   <span class="comment">// test for NULL name</span>
<a name="l00749"></a>00749   <span class="keywordflow">if</span> (newName == NULL)
<a name="l00750"></a>00750     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l00751"></a>00751 
<a name="l00752"></a>00752   <span class="comment">// log message</span>
<a name="l00753"></a>00753   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Copying global variable '%s' to '%s'"</span>, 
<a name="l00754"></a>00754                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, newName);
<a name="l00755"></a>00755 
<a name="l00756"></a>00756   <span class="comment">// get other info from source variable &amp;</span>
<a name="l00757"></a>00757   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(src_var, &amp;numDataPoint, &amp;numComp, &amp;assoc,
<a name="l00758"></a>00758                           &amp;mathtype, &amp;datatype);
<a name="l00759"></a>00759   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00760"></a>00760     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l00761"></a>00761                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00762"></a>00762     <span class="keywordflow">return</span> rc;
<a name="l00763"></a>00763   }
<a name="l00764"></a>00764 
<a name="l00765"></a>00765   <span class="comment">// more checking</span>
<a name="l00766"></a>00766   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a> || assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a>) {
<a name="l00767"></a>00767     assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a>;
<a name="l00768"></a>00768   }
<a name="l00769"></a>00769   <span class="keywordflow">else</span> {
<a name="l00770"></a>00770     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"var of assoc type %s cannot be copied to a dataset"</span>,
<a name="l00771"></a>00771                           <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(assoc));
<a name="l00772"></a>00772     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00773"></a>00773   }
<a name="l00774"></a>00774 
<a name="l00775"></a>00775   <span class="comment">// --- do it</span>
<a name="l00776"></a>00776   rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(src_var, &amp;data);
<a name="l00777"></a>00777   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00778"></a>00778     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l00779"></a>00779                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00780"></a>00780     <span class="keywordflow">return</span> rc;
<a name="l00781"></a>00781   }
<a name="l00782"></a>00782   rc = <a class="code" href="group__Variable.html#g3de7edfd0291f0f9f3d246f3a6254925">fc_createGlobalVariable</a>(dest_dataset, newName, new_var);
<a name="l00783"></a>00783   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00784"></a>00784     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new global variable '%s'"</span>, newName);
<a name="l00785"></a>00785     <span class="keywordflow">return</span> rc;
<a name="l00786"></a>00786   }
<a name="l00787"></a>00787   rc = <a class="code" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData</a>(*new_var, numDataPoint, numComp, assoc, mathtype, 
<a name="l00788"></a>00788                    datatype, data);
<a name="l00789"></a>00789   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00790"></a>00790     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s'"</span>, newName);
<a name="l00791"></a>00791     <span class="keywordflow">return</span> rc;
<a name="l00792"></a>00792   }
<a name="l00793"></a>00793 
<a name="l00794"></a>00794   <span class="keywordflow">return</span> rc;
<a name="l00795"></a>00795 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g0f742eca08d99bdb19862fe375f4f3d9"></a><!-- doxytag: member="variable.c::fc_copySeqVariable" ref="g0f742eca08d99bdb19862fe375f4f3d9" args="(int numStep, FC_Variable *src_seqVar, FC_Mesh dest_mesh, FC_Sequence dest_seq, char *newName, FC_Variable **new_seqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_copySeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>src_seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>dest_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>dest_seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>new_seqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a sequence variable. 
<p>
<b>Description:</b> <p>
Create a copy of a sequence variable into the specified mesh using with the given name. This will return an error if the source and destination sequences and meshes are not similar enough. This will copy a sequence if necessary. The destination mesh and sequence need to belong to the same dataset or an error will be returned.<p>
The input variable can be a global sequence variable; the output will be a sequence variable associated with the mesh (FC_AT_WHOLE_MESH).<p>
<b>Modifications:</b> <ul>
<li>2003-NOV-11 WSK Created</li><li>06/07/04 RM, added checking if destination mesh and a source variable are compatible to perform copy before creating the variable.</li><li>11/08/2006 WSD added ability to copy global seq var onto a mesh. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
Input - the number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>src_seqVar</em>&nbsp;</td><td>
Input - the source seq variables to be copied </td></tr>
<tr><td valign="top"><em>dest_mesh</em>&nbsp;</td><td>
Input - the destination mesh to be copied into </td></tr>
<tr><td valign="top"><em>dest_seq</em>&nbsp;</td><td>
Input - the destination seq to be copied into </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_seqVar</em>&nbsp;</td><td>
Output - array of handles to the new variable </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l01259">1259</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="sequence_8c-source.html#l02130">_fc_getSeqSlot()</a>, <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="sequenceP_8h-source.html#l00076">_FC_SeqSlot::ds</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00348">fc_createSeqVariable()</a>, <a class="el" href="mesh_8c-source.html#l02518">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00467">fc_setVariableData()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>.
<p>
Referenced by <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="variable_8c-source.html#l01384">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, and <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01267"></a>01267   {
<a name="l01268"></a>01268   <span class="keywordtype">int</span> i; 
<a name="l01269"></a>01269   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l01270"></a>01270   <span class="keywordtype">int</span> temp_numStep;
<a name="l01271"></a>01271   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* dest_meshSlot;
<a name="l01272"></a>01272   <a class="code" href="struct__FC__SeqSlot.html">_FC_SeqSlot</a>* dest_seqSlot;
<a name="l01273"></a>01273   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l01274"></a>01274   <span class="keywordtype">int</span> numDataPoint, numComp, numEntity;
<a name="l01275"></a>01275   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l01276"></a>01276   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype;
<a name="l01277"></a>01277   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype;
<a name="l01278"></a>01278   <span class="keywordtype">void</span>* data;
<a name="l01279"></a>01279   
<a name="l01280"></a>01280   <span class="comment">// default return value</span>
<a name="l01281"></a>01281   <span class="keywordflow">if</span> (new_seqVar)
<a name="l01282"></a>01282     *new_seqVar = NULL;
<a name="l01283"></a>01283 
<a name="l01284"></a>01284   <span class="comment">// check input</span>
<a name="l01285"></a>01285   dest_meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(dest_mesh);
<a name="l01286"></a>01286   dest_seqSlot  = <a class="code" href="group__PrivateSequence.html#ge669615c173acc924f9664fa05672e7f">_fc_getSeqSlot</a>(dest_seq);
<a name="l01287"></a>01287   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(numStep, src_seqVar) || dest_meshSlot == NULL || 
<a name="l01288"></a>01288       dest_seqSlot == NULL || !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(dest_meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#553d7d0470e312f24080c5ed49334ead">ds</a>, dest_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#18a1d8c4ab7c2586678334f1d225b76c">ds</a>) ||
<a name="l01289"></a>01289       numStep != dest_seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>  || new_seqVar == NULL) {
<a name="l01290"></a>01290     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01291"></a>01291     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01292"></a>01292   }
<a name="l01293"></a>01293   
<a name="l01294"></a>01294   <span class="comment">// test for NULL name</span>
<a name="l01295"></a>01295   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(src_seqVar[0]);
<a name="l01296"></a>01296   <span class="keywordflow">if</span> (newName == NULL)
<a name="l01297"></a>01297     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l01298"></a>01298 
<a name="l01299"></a>01299   <span class="comment">// log message</span>
<a name="l01300"></a>01300   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Copying sequence variable '%s' to '%s'"</span>, 
<a name="l01301"></a>01301                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, newName);
<a name="l01302"></a>01302 
<a name="l01303"></a>01303   <span class="comment">// get src meta data</span>
<a name="l01304"></a>01304   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(src_seqVar[0], &amp;numDataPoint, &amp;numComp, &amp;assoc,
<a name="l01305"></a>01305                             &amp;mathtype, &amp;datatype);
<a name="l01306"></a>01306   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01307"></a>01307     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for seq variable '%s'"</span>,
<a name="l01308"></a>01308                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01309"></a>01309     <span class="keywordflow">return</span> rc;
<a name="l01310"></a>01310   }
<a name="l01311"></a>01311   <span class="comment">// more checking - destination mesh and variable assoc type are compatible</span>
<a name="l01312"></a>01312   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a> || assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>) {
<a name="l01313"></a>01313     assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>;
<a name="l01314"></a>01314   }
<a name="l01315"></a>01315   <span class="keywordflow">else</span> {
<a name="l01316"></a>01316     rc = <a class="code" href="group__Mesh.html#gf169a555056c84bdfd59839bab4f8d76">fc_getMeshNumEntity</a>(dest_mesh, assoc, &amp;numEntity); 
<a name="l01317"></a>01317     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01318"></a>01318       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01319"></a>01319       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01320"></a>01320     }
<a name="l01321"></a>01321     <span class="keywordflow">if</span> (numEntity != numDataPoint) {
<a name="l01322"></a>01322       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: destination mesh not compatible with src variable"</span>, 
<a name="l01323"></a>01323                             <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01324"></a>01324       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01325"></a>01325     }
<a name="l01326"></a>01326   }
<a name="l01327"></a>01327 
<a name="l01328"></a>01328   <span class="comment">// --- do it</span>
<a name="l01329"></a>01329 
<a name="l01330"></a>01330   <span class="comment">// create new variable</span>
<a name="l01331"></a>01331   rc = <a class="code" href="group__Variable.html#gada4bacc9679592ff8b27c538570c1da">fc_createSeqVariable</a>(dest_mesh, dest_seq, newName, &amp;temp_numStep,
<a name="l01332"></a>01332                             new_seqVar);
<a name="l01333"></a>01333   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01334"></a>01334     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new seq variable '%s'"</span>, newName);
<a name="l01335"></a>01335     <span class="keywordflow">return</span> rc;
<a name="l01336"></a>01336   }
<a name="l01337"></a>01337   
<a name="l01338"></a>01338   <span class="comment">// get and copy data for each step</span>
<a name="l01339"></a>01339   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l01340"></a>01340     rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(src_seqVar[i], &amp;data);
<a name="l01341"></a>01341     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01342"></a>01342       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for step %d of seq variable "</span>
<a name="l01343"></a>01343                             <span class="stringliteral">"'%s'"</span>, i, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01344"></a>01344       <span class="keywordflow">return</span> rc;
<a name="l01345"></a>01345     }
<a name="l01346"></a>01346     
<a name="l01347"></a>01347     rc = <a class="code" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData</a>((*new_seqVar)[i], numDataPoint, numComp, assoc, 
<a name="l01348"></a>01348                             mathtype, datatype, data);
<a name="l01349"></a>01349     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01350"></a>01350       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for step %d of seq variable "</span>
<a name="l01351"></a>01351                             <span class="stringliteral">"'%s'"</span>, i, newName);
<a name="l01352"></a>01352       <span class="keywordflow">return</span> rc;
<a name="l01353"></a>01353     }
<a name="l01354"></a>01354   }
<a name="l01355"></a>01355 
<a name="l01356"></a>01356   <span class="keywordflow">return</span> rc;
<a name="l01357"></a>01357 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g2c95cc9c3001645f1aa0926ccd0f362e"></a><!-- doxytag: member="variable.c::fc_copySeqVariableWithNewAssociation" ref="g2c95cc9c3001645f1aa0926ccd0f362e" args="(int src_numStep, FC_Variable *src_seqVar, FC_AssociationType newAssoc, char *newName, FC_Variable **new_seqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_copySeqVariableWithNewAssociation           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>src_numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>src_seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>newAssoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>new_seqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copies a seqVariable and (optionally) converts to a new association type. 
<p>
<b>Description:</b> <p>
Create a copy of a sequence variable and (if necessary) convert its data to a new association type. This conversion simply averages all the values of source entities that touch a destination entity (eg, in Element-to-Vertex conversion, the an element value is the average of the values of all vertices that make up the element).<p>
While this function supports conversions to/from any of the association types for a mesh, it will return an input error if the conversion cannot take place due to due to dimension problems (eg, trying to convert a variable to a Face type when the elements are lines).<p>
Additionally, this function only works when the source and destination variables utilize the same mesh. Global variables are not supported.<p>
<b>Modifications:</b> <ul>
<li>01/30/07 CDU Created</li><li>02/14/07 CDU Updated to support broader range of associations</li><li>02/28/07 CDU removed mesh from api and cleaned up internals </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_numStep</em>&nbsp;</td><td>
input - the number of steps for the sequence variable </td></tr>
<tr><td valign="top"><em>src_seqVar</em>&nbsp;</td><td>
input - the source variable </td></tr>
<tr><td valign="top"><em>newAssoc</em>&nbsp;</td><td>
input - the new association Type </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
input - new name for the variable (NULL uses source's name) </td></tr>
<tr><td valign="top"><em>new_seqVar</em>&nbsp;</td><td>
output - handle to the new sequence variable </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l01384">1384</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fb5fd66bec9d026fbfab895c518842d4">FC_AT_EDGE</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>, <a class="el" href="variable_8c-source.html#l01259">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l00348">fc_createSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l03938">fc_deleteSeqVariable()</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="topo_8c-source.html#l00279">fc_getMeshEntityParents()</a>, <a class="el" href="variable_8c-source.html#l04268">fc_getMeshFromVariable()</a>, <a class="el" href="mesh_8c-source.html#l02380">fc_getMeshNumEdge()</a>, <a class="el" href="mesh_8c-source.html#l02244">fc_getMeshNumElement()</a>, <a class="el" href="mesh_8c-source.html#l02427">fc_getMeshNumFace()</a>, <a class="el" href="mesh_8c-source.html#l02208">fc_getMeshNumVertex()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04193">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="variable_8c-source.html#l00467">fc_setVariableData()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>.
<p>
Referenced by <a class="el" href="fcswapAssoc_8c-source.html#l00238">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01391"></a>01391  {
<a name="l01392"></a>01392 
<a name="l01393"></a>01393 
<a name="l01394"></a>01394   <span class="keywordtype">int</span>  numDataPoint, <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>;
<a name="l01395"></a>01395   <span class="keywordtype">double</span> *dnew = NULL;
<a name="l01396"></a>01396   <span class="keywordtype">int</span> numObj, *objIDs;
<a name="l01397"></a>01397   <span class="keywordtype">void</span> **var_dptr_array;
<a name="l01398"></a>01398   <span class="keywordtype">void</span> *var_dptr;
<a name="l01399"></a>01399   <span class="keywordtype">int</span> numStep_out;
<a name="l01400"></a>01400   <span class="keywordtype">double</span> r;
<a name="l01401"></a>01401   <span class="keywordtype">int</span> spot;
<a name="l01402"></a>01402   <span class="keywordtype">int</span> i,j,k,s;
<a name="l01403"></a>01403   <span class="keywordtype">int</span> needs_parent; <span class="comment">//For figuring out whether we need parent or child call</span>
<a name="l01404"></a>01404 
<a name="l01405"></a>01405   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> oldAssoc;
<a name="l01406"></a>01406   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a>        mathType;
<a name="l01407"></a>01407   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> dataType;
<a name="l01408"></a>01408   <a class="code" href="structFC__Sequence.html">FC_Sequence</a> seq;
<a name="l01409"></a>01409   <a class="code" href="structFC__Variable.html">FC_Variable</a>* seqVar_out;
<a name="l01410"></a>01410   <a class="code" href="structFC__Mesh.html">FC_Mesh</a>            mesh;
<a name="l01411"></a>01411   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l01412"></a>01412 
<a name="l01413"></a>01413   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>*  varSlot;
<a name="l01414"></a>01414  
<a name="l01415"></a>01415 
<a name="l01416"></a>01416 
<a name="l01417"></a>01417   <span class="comment">//Default return value</span>
<a name="l01418"></a>01418   <span class="keywordflow">if</span> (new_seqVar)
<a name="l01419"></a>01419     *new_seqVar = NULL;
<a name="l01420"></a>01420 
<a name="l01421"></a>01421   <span class="comment">//Check Inputs: first get basic info and bail if obvious problems</span>
<a name="l01422"></a>01422   <span class="comment">// note: fc_issv also does a variableValid check on seqvar[0], so we don't need to.</span>
<a name="l01423"></a>01423   <span class="keywordflow">if</span>((!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(src_numStep, src_seqVar)) || 
<a name="l01424"></a>01424      (new_seqVar == NULL) ){
<a name="l01425"></a>01425     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: problem with %s"</span>,
<a name="l01426"></a>01426                  <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>),
<a name="l01427"></a>01427                  (new_seqVar == NULL) ? <span class="stringliteral">"new seqVariable pointer"</span> :
<a name="l01428"></a>01428                  <span class="stringliteral">"input sequence variable"</span>);
<a name="l01429"></a>01429     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01430"></a>01430   }
<a name="l01431"></a>01431 
<a name="l01432"></a>01432   <span class="comment">//Get var slot. We only use this for accessing the name</span>
<a name="l01433"></a>01433   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(src_seqVar[0]);
<a name="l01434"></a>01434   <span class="keywordflow">if</span>(varSlot==NULL){
<a name="l01435"></a>01435     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Problem with sequence variable\n"</span>);
<a name="l01436"></a>01436     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01437"></a>01437   }
<a name="l01438"></a>01438 
<a name="l01439"></a>01439   <span class="comment">//Get mesh. We now force the user to use same src/dst mesh</span>
<a name="l01440"></a>01440   rc = <a class="code" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a>(src_seqVar[0], &amp;mesh);
<a name="l01441"></a>01441   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01442"></a>01442     <span class="keywordflow">return</span> rc;
<a name="l01443"></a>01443 
<a name="l01444"></a>01444 
<a name="l01445"></a>01445   <span class="comment">//Get basic info from variable</span>
<a name="l01446"></a>01446   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(src_seqVar[0], NULL, &amp;numComponent, &amp;oldAssoc, &amp;mathType, &amp;dataType);
<a name="l01447"></a>01447   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01448"></a>01448     <span class="keywordflow">return</span> rc;
<a name="l01449"></a>01449 
<a name="l01450"></a>01450   <span class="comment">//Get Sequence info. Same as old</span>
<a name="l01451"></a>01451   rc = <a class="code" href="group__Variable.html#gea428de5a2584716f6e2bc77cd339544">fc_getSequenceFromSeqVariable</a>(src_numStep, src_seqVar, &amp;seq);
<a name="l01452"></a>01452   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01453"></a>01453     <span class="keywordflow">return</span> rc;
<a name="l01454"></a>01454 
<a name="l01455"></a>01455 
<a name="l01456"></a>01456   <span class="comment">//If no conversion necessary, let copySeqVariable do all the work</span>
<a name="l01457"></a>01457   <span class="keywordflow">if</span> (newAssoc == oldAssoc) {
<a name="l01458"></a>01458     <span class="keywordflow">return</span> <a class="code" href="group__Variable.html#g0f742eca08d99bdb19862fe375f4f3d9">fc_copySeqVariable</a>(src_numStep, src_seqVar, mesh, seq, newName, new_seqVar);
<a name="l01459"></a>01459   }
<a name="l01460"></a>01460 
<a name="l01461"></a>01461   <span class="comment">//Figure out default name if none given</span>
<a name="l01462"></a>01462   <span class="keywordflow">if</span>(newName == NULL)
<a name="l01463"></a>01463     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l01464"></a>01464 
<a name="l01465"></a>01465 
<a name="l01466"></a>01466   <span class="comment">//Look at the destination assoc and figure out how many data points</span>
<a name="l01467"></a>01467   <span class="comment">//it has. If it's a face/edge, make sure we've created the appropriate conns.</span>
<a name="l01468"></a>01468   <span class="keywordflow">switch</span>(newAssoc){
<a name="l01469"></a>01469   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a> :
<a name="l01470"></a>01470     rc = <a class="code" href="group__Mesh.html#g83a0b8188d49812c8d6d4c883cb8e9c4">fc_getMeshNumElement</a>(mesh, &amp;numDataPoint);
<a name="l01471"></a>01471     <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01472"></a>01472       <span class="keywordflow">return</span> rc;
<a name="l01473"></a>01473     <span class="keywordflow">break</span>;
<a name="l01474"></a>01474 
<a name="l01475"></a>01475   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a>:
<a name="l01476"></a>01476     <span class="comment">//Builds the faces if necessary</span>
<a name="l01477"></a>01477      rc = <a class="code" href="group__Mesh.html#g0f4d7e58dc5936fc8f3824cbce0bf7c4">fc_getMeshNumFace</a>(mesh, &amp;numDataPoint);
<a name="l01478"></a>01478     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01479"></a>01479       <span class="keywordflow">return</span> rc;
<a name="l01480"></a>01480     <span class="keywordflow">break</span>;
<a name="l01481"></a>01481 
<a name="l01482"></a>01482   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fb5fd66bec9d026fbfab895c518842d4">FC_AT_EDGE</a>: 
<a name="l01483"></a>01483     <span class="comment">//Builds the edges if necessary</span>
<a name="l01484"></a>01484     rc = <a class="code" href="group__Mesh.html#g0526437d03be312b52b0bbe8bc60a701">fc_getMeshNumEdge</a>(mesh, &amp;numDataPoint);
<a name="l01485"></a>01485     <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01486"></a>01486       <span class="keywordflow">return</span> rc;
<a name="l01487"></a>01487     <span class="keywordflow">break</span>;
<a name="l01488"></a>01488 
<a name="l01489"></a>01489   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>:
<a name="l01490"></a>01490     rc = <a class="code" href="group__Mesh.html#gd4e8931bbef75eafafa0735e23e513fa">fc_getMeshNumVertex</a>(mesh, &amp;numDataPoint);
<a name="l01491"></a>01491     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01492"></a>01492       <span class="keywordflow">return</span> rc;
<a name="l01493"></a>01493     <span class="keywordflow">break</span>;
<a name="l01494"></a>01494 
<a name="l01495"></a>01495   <span class="keywordflow">default</span>:
<a name="l01496"></a>01496     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Unexpected conversion target type"</span>);
<a name="l01497"></a>01497     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01498"></a>01498   }
<a name="l01499"></a>01499 
<a name="l01500"></a>01500   <span class="comment">//We need at least one data point to continue</span>
<a name="l01501"></a>01501   <span class="keywordflow">if</span>(numDataPoint&lt;1){
<a name="l01502"></a>01502     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s Conversion would not give at least one data point"</span>,
<a name="l01503"></a>01503                  <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01504"></a>01504     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01505"></a>01505   }
<a name="l01506"></a>01506 
<a name="l01507"></a>01507 
<a name="l01508"></a>01508   <span class="comment">//Figure out what direction we're going. If the new association</span>
<a name="l01509"></a>01509   <span class="comment">//is less than the old one (newAssoc &lt; oldAssoc), we will need</span>
<a name="l01510"></a>01510   <span class="comment">//to do a parent-of-newAssoc's ids to find out which oldAssoc ids</span>
<a name="l01511"></a>01511   <span class="comment">//need to be averaged.</span>
<a name="l01512"></a>01512   needs_parent = 0;
<a name="l01513"></a>01513   <span class="keywordflow">if</span>(newAssoc &lt; oldAssoc)
<a name="l01514"></a>01514     needs_parent = 1;
<a name="l01515"></a>01515 
<a name="l01516"></a>01516 
<a name="l01517"></a>01517 
<a name="l01518"></a>01518   <span class="comment">// We get all of the varaible data pointers in advance to reduce overhead and</span>
<a name="l01519"></a>01519   <span class="comment">// mid-loop disaster</span>
<a name="l01520"></a>01520   var_dptr_array = (<span class="keywordtype">void</span> *) malloc( src_numStep * <span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *));
<a name="l01521"></a>01521   <span class="keywordflow">if</span>(var_dptr_array == NULL){
<a name="l01522"></a>01522     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01523"></a>01523     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01524"></a>01524   }
<a name="l01525"></a>01525   <span class="keywordflow">for</span>(s=0; s&lt;src_numStep; s++){
<a name="l01526"></a>01526     rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(src_seqVar[s], &amp;var_dptr_array[s]);               
<a name="l01527"></a>01527     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l01528"></a>01528       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for SeqVariable '%s' step %d"</span>,
<a name="l01529"></a>01529                    varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, s);
<a name="l01530"></a>01530       free(var_dptr_array);
<a name="l01531"></a>01531       <span class="keywordflow">return</span> rc;
<a name="l01532"></a>01532     } 
<a name="l01533"></a>01533   }
<a name="l01534"></a>01534 
<a name="l01535"></a>01535 
<a name="l01536"></a>01536   <span class="comment">//Make room for the new data --&gt; dnew[step][vertex][component]</span>
<a name="l01537"></a>01537   dnew = (<span class="keywordtype">double</span> *)malloc(src_numStep * numDataPoint * numComponent * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l01538"></a>01538   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l01539"></a>01539     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l01540"></a>01540                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01541"></a>01541     free(var_dptr_array);
<a name="l01542"></a>01542     <span class="keywordflow">return</span> rc;
<a name="l01543"></a>01543   } 
<a name="l01544"></a>01544   
<a name="l01545"></a>01545  
<a name="l01546"></a>01546   <span class="comment">// In order to reduce the amount of vertex-to-element conversion we have live</span>
<a name="l01547"></a>01547   <span class="comment">// at one time, we do all sequence steps for a particular vertex. </span>
<a name="l01548"></a>01548   <span class="keywordflow">for</span>(i=0; i&lt;numDataPoint; i++){   
<a name="l01549"></a>01549     
<a name="l01550"></a>01550     <span class="keywordflow">if</span>(needs_parent){
<a name="l01551"></a>01551       rc = <a class="code" href="group__TopologyRelations.html#ge6b875d170f63ea27784043f3f66ec03">fc_getMeshEntityParents</a>(  mesh, newAssoc, i, oldAssoc,
<a name="l01552"></a>01552                          &amp;numObj, &amp;objIDs);
<a name="l01553"></a>01553     } <span class="keywordflow">else</span> {
<a name="l01554"></a>01554       rc = <a class="code" href="group__TopologyRelations.html#g253e5f72f18fa7ac82540e087970b0f6">fc_getMeshEntityChildren</a>( mesh, newAssoc, i, oldAssoc,
<a name="l01555"></a>01555                          &amp;numObj, &amp;objIDs);
<a name="l01556"></a>01556     }
<a name="l01557"></a>01557     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l01558"></a>01558       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get %s for variable '%s'"</span>,
<a name="l01559"></a>01559                    (needs_parent)?<span class="stringliteral">"Parents"</span>:<span class="stringliteral">"Children"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01560"></a>01560       free(dnew);
<a name="l01561"></a>01561       free(var_dptr_array);
<a name="l01562"></a>01562       <span class="keywordflow">return</span> rc;
<a name="l01563"></a>01563     }
<a name="l01564"></a>01564 
<a name="l01565"></a>01565     <span class="comment">//Work on all steps for this vertex (or element)</span>
<a name="l01566"></a>01566     <span class="keywordflow">for</span>(s=0; s&lt;src_numStep; s++){      
<a name="l01567"></a>01567       var_dptr = var_dptr_array[s]; <span class="comment">//Get at the source variable's data for this step</span>
<a name="l01568"></a>01568 
<a name="l01569"></a>01569       <span class="comment">//Work on each component individually</span>
<a name="l01570"></a>01570       <span class="keywordflow">for</span>(j=0; j&lt;numComponent; j++){
<a name="l01571"></a>01571      r = 0.0;
<a name="l01572"></a>01572      <span class="keywordflow">for</span>(k=0; k&lt;numObj; k++){
<a name="l01573"></a>01573        spot = (objIDs[k] * numComponent) + j;
<a name="l01574"></a>01574        <span class="keywordflow">switch</span>(dataType){
<a name="l01575"></a>01575        <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>:   r += (<span class="keywordtype">double</span>) ((<span class="keywordtype">char</span> *)  var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l01576"></a>01576        <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a> :   r += (double) ((<span class="keywordtype">int</span> *)   var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l01577"></a>01577        <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>:  r += (double) ((<span class="keywordtype">float</span> *) var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l01578"></a>01578        <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>: r += (double) ((<span class="keywordtype">double</span> *)var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l01579"></a>01579        <span class="keywordflow">default</span>:
<a name="l01580"></a>01580          <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Requested processing of variable with an unknown data type"</span>);
<a name="l01581"></a>01581          free(objIDs);
<a name="l01582"></a>01582          free(dnew);
<a name="l01583"></a>01583          free(var_dptr_array);
<a name="l01584"></a>01584          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01585"></a>01585        }
<a name="l01586"></a>01586      }
<a name="l01587"></a>01587      <span class="keywordflow">if</span>(numObj)
<a name="l01588"></a>01588        r = r/(double)numObj;
<a name="l01589"></a>01589      
<a name="l01590"></a>01590      <span class="comment">//Store result for this component</span>
<a name="l01591"></a>01591      dnew[ (s*numDataPoint*numComponent) + (i*numComponent) + j ] = r;
<a name="l01592"></a>01592       }
<a name="l01593"></a>01593     }
<a name="l01594"></a>01594     <span class="comment">//Cleanup this output spot's memory</span>
<a name="l01595"></a>01595     free(objIDs);
<a name="l01596"></a>01596   }  
<a name="l01597"></a>01597   free(var_dptr_array);
<a name="l01598"></a>01598 
<a name="l01599"></a>01599   <span class="comment">// Create an empty seqVariable to store this</span>
<a name="l01600"></a>01600   rc = <a class="code" href="group__Variable.html#gada4bacc9679592ff8b27c538570c1da">fc_createSeqVariable</a>(mesh, seq, newName, &amp;numStep_out, &amp;seqVar_out); 
<a name="l01601"></a>01601   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l01602"></a>01602     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Could not create seqVariable"</span>);
<a name="l01603"></a>01603     free(dnew);
<a name="l01604"></a>01604     <span class="keywordflow">return</span> rc;
<a name="l01605"></a>01605   }
<a name="l01606"></a>01606 
<a name="l01607"></a>01607   <span class="comment">//Fill in all variables</span>
<a name="l01608"></a>01608   <span class="keywordflow">for</span>(s=0; s&lt;src_numStep; s++){
<a name="l01609"></a>01609 
<a name="l01610"></a>01610     <span class="comment">//Fill in the data</span>
<a name="l01611"></a>01611     rc = <a class="code" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData</a>(seqVar_out[s], numDataPoint, numComponent,
<a name="l01612"></a>01612                    newAssoc, mathType, <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>,
<a name="l01613"></a>01613                    (<span class="keywordtype">void</span> *)&amp;dnew[s*numDataPoint*numComponent]);
<a name="l01614"></a>01614 
<a name="l01615"></a>01615     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l01616"></a>01616 
<a name="l01617"></a>01617       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s' step %d"</span>,
<a name="l01618"></a>01618                    newName, s);
<a name="l01619"></a>01619       <a class="code" href="group__Variable.html#g57341fab4863efe2c35476aee509f20d">fc_deleteSeqVariable</a>(src_numStep,seqVar_out);
<a name="l01620"></a>01620       free(seqVar_out);
<a name="l01621"></a>01621       free(dnew);
<a name="l01622"></a>01622       <span class="keywordflow">return</span> rc;
<a name="l01623"></a>01623     }
<a name="l01624"></a>01624   }
<a name="l01625"></a>01625 
<a name="l01626"></a>01626   free(dnew);
<a name="l01627"></a>01627   
<a name="l01628"></a>01628   *new_seqVar = seqVar_out;
<a name="l01629"></a>01629   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l01630"></a>01630 
<a name="l01631"></a>01631 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g613db2bba8e25ddc62756f186f442cab"></a><!-- doxytag: member="variable.c::fc_copyVariable" ref="g613db2bba8e25ddc62756f186f442cab" args="(FC_Variable src_var, FC_Mesh dest_mesh, char *newName, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_copyVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>src_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>dest_mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copy a variable. 
<p>
<b>Description:</b> <p>
Create a copy of a variable into the specified mesh using with the given name. This will return an error if the source and destination meshes are not similar enough.<p>
The input variable can be a global variable; the output will be a variable associated with the mesh (FC_AT_WHOLE_MESH).<p>
<b>Modifications:</b> <ul>
<li>2003-NOV-11 WSK Created</li><li>06/07/04 RM, added checking if destination mesh and a source variable are compatible to perform copy before creating the variable.</li><li>11/08/2006 WSD added ability to copy global var onto a mesh. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_var</em>&nbsp;</td><td>
Input - the source variable to be copied </td></tr>
<tr><td valign="top"><em>dest_mesh</em>&nbsp;</td><td>
Input - the destination mesh to be copied into </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
Input - the name of the new variable, a NULL value is a flag to use the name of the source variable </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
Output - handle to the new variable </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l00927">927</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00284">fc_createVariable()</a>, <a class="el" href="mesh_8c-source.html#l02518">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="mesh_8c-source.html#l01961">fc_isMeshValid()</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00467">fc_setVariableData()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="mesh_8c-source.html#l00460">fc_copyMesh()</a>, and <a class="el" href="variable_8c-source.html#l01037">fc_copyVariableWithNewAssociation()</a>.<div class="fragment"><pre class="fragment"><a name="l00933"></a>00933     { 
<a name="l00934"></a>00934   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00935"></a>00935   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l00936"></a>00936   <span class="keywordtype">int</span> numDataPoint, numComp, numEntity;
<a name="l00937"></a>00937   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l00938"></a>00938   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype;
<a name="l00939"></a>00939   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype;
<a name="l00940"></a>00940   <span class="keywordtype">void</span>* data;
<a name="l00941"></a>00941   
<a name="l00942"></a>00942   <span class="comment">// default return value</span>
<a name="l00943"></a>00943   <span class="keywordflow">if</span> (new_var)
<a name="l00944"></a>00944     *new_var = <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>;
<a name="l00945"></a>00945 
<a name="l00946"></a>00946   <span class="comment">// check input - NULL name is o.k.</span>
<a name="l00947"></a>00947   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(src_var);
<a name="l00948"></a>00948   <span class="keywordflow">if</span> (varSlot == NULL || !<a class="code" href="group__Mesh.html#gdc4cdd6e7f6a9151458bcb2c25715fd5">fc_isMeshValid</a>(dest_mesh) || new_var == NULL) {
<a name="l00949"></a>00949     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00950"></a>00950     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00951"></a>00951   }
<a name="l00952"></a>00952 
<a name="l00953"></a>00953   <span class="comment">// test for NULL name</span>
<a name="l00954"></a>00954   <span class="keywordflow">if</span> (newName == NULL)
<a name="l00955"></a>00955     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l00956"></a>00956 
<a name="l00957"></a>00957   <span class="comment">// log message</span>
<a name="l00958"></a>00958   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Copying variable '%s' to '%s'"</span>, 
<a name="l00959"></a>00959                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, newName);
<a name="l00960"></a>00960 
<a name="l00961"></a>00961   <span class="comment">// Do nothing special for a coord variable -WSK 9/15/04</span>
<a name="l00962"></a>00962 
<a name="l00963"></a>00963   <span class="comment">// get other info from source variable &amp; dest mesh</span>
<a name="l00964"></a>00964   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(src_var, &amp;numDataPoint, &amp;numComp, &amp;assoc,
<a name="l00965"></a>00965                           &amp;mathtype, &amp;datatype);
<a name="l00966"></a>00966   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00967"></a>00967     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l00968"></a>00968                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00969"></a>00969     <span class="keywordflow">return</span> rc;
<a name="l00970"></a>00970   }
<a name="l00971"></a>00971   <span class="comment">// more checking - destination mesh and variable assoc type are compatible</span>
<a name="l00972"></a>00972   <span class="keywordflow">if</span> (assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a> || assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>) {
<a name="l00973"></a>00973     assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>;
<a name="l00974"></a>00974   }
<a name="l00975"></a>00975   <span class="keywordflow">else</span> {
<a name="l00976"></a>00976     rc = <a class="code" href="group__Mesh.html#gf169a555056c84bdfd59839bab4f8d76">fc_getMeshNumEntity</a>(dest_mesh, assoc, &amp;numEntity); 
<a name="l00977"></a>00977     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00978"></a>00978       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00979"></a>00979       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00980"></a>00980     }
<a name="l00981"></a>00981     <span class="keywordflow">if</span> (numEntity != numDataPoint) {
<a name="l00982"></a>00982       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: destination mesh not compatible with src variable"</span>, 
<a name="l00983"></a>00983                             <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00984"></a>00984       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00985"></a>00985     }
<a name="l00986"></a>00986   }
<a name="l00987"></a>00987 
<a name="l00988"></a>00988   <span class="comment">// --- do it</span>
<a name="l00989"></a>00989   rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(src_var, &amp;data);
<a name="l00990"></a>00990   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00991"></a>00991     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l00992"></a>00992                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00993"></a>00993     <span class="keywordflow">return</span> rc;
<a name="l00994"></a>00994   }
<a name="l00995"></a>00995   rc = <a class="code" href="group__Variable.html#g2f498c4fbd85d8094f0f640a17341cb3">fc_createVariable</a>(dest_mesh, newName, new_var);
<a name="l00996"></a>00996   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l00997"></a>00997     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to create new variable '%s'"</span>, newName);
<a name="l00998"></a>00998     <span class="keywordflow">return</span> rc;
<a name="l00999"></a>00999   }
<a name="l01000"></a>01000   rc = <a class="code" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData</a>(*new_var, numDataPoint, numComp, assoc, mathtype, 
<a name="l01001"></a>01001                    datatype, data);
<a name="l01002"></a>01002   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l01003"></a>01003     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s'"</span>, newName);
<a name="l01004"></a>01004     <span class="keywordflow">return</span> rc;
<a name="l01005"></a>01005   }
<a name="l01006"></a>01006 
<a name="l01007"></a>01007 
<a name="l01008"></a>01008   <span class="keywordflow">return</span> rc;
<a name="l01009"></a>01009 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ge130da6a48d1753cc958f251a8a92ee0"></a><!-- doxytag: member="variable.c::fc_copyVariableWithNewAssociation" ref="ge130da6a48d1753cc958f251a8a92ee0" args="(FC_Variable src_var, FC_AssociationType newAssoc, char *newName, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_copyVariableWithNewAssociation           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>src_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>newAssoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>newName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Copies a Variable and (optionally) converts to a new association type. 
<p>
<b>Description:</b> <p>
Create a copy of a variable and (if necessary) convert its data to a new association type. This conversion simply averages all the values of source entities that touch a destination entity (eg, in Element-to-Vertex conversion, the an element value is the average of the values of all vertices that make up the element).<p>
While this function supports conversions to/from any of the association types for a mesh, it will return an input error if the conversion cannot take place due to due to dimension problems (eg, trying to convert a variable to a Face type when the elements are lines).<p>
Additionally, this function only works when the source and destination variables utilize the same mesh. Global variables are not supported.<p>
Results are always of data type FC_DT_DOUBLE.<p>
<b>Modifications:</b> <ul>
<li>01/30/07 CDU Created</li><li>02/14/07 CDU Updated to support broader range of associations</li><li>02/26/07 CDU removed mesh from api and cleaned up internals </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>src_var</em>&nbsp;</td><td>
input - the source variable </td></tr>
<tr><td valign="top"><em>newAssoc</em>&nbsp;</td><td>
input - the new association Type </td></tr>
<tr><td valign="top"><em>newName</em>&nbsp;</td><td>
input - new name for the variable (NULL uses source's name) </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
output - handle to the new variable. Result is always double precision. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l01037">1037</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fb5fd66bec9d026fbfab895c518842d4">FC_AT_EDGE</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>, <a class="el" href="variable_8c-source.html#l00927">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l00284">fc_createVariable()</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>, <a class="el" href="topo_8c-source.html#l00116">fc_getMeshEntityChildren()</a>, <a class="el" href="topo_8c-source.html#l00279">fc_getMeshEntityParents()</a>, <a class="el" href="variable_8c-source.html#l04268">fc_getMeshFromVariable()</a>, <a class="el" href="mesh_8c-source.html#l02380">fc_getMeshNumEdge()</a>, <a class="el" href="mesh_8c-source.html#l02244">fc_getMeshNumElement()</a>, <a class="el" href="mesh_8c-source.html#l02427">fc_getMeshNumFace()</a>, <a class="el" href="mesh_8c-source.html#l02208">fc_getMeshNumVertex()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="variable_8c-source.html#l00467">fc_setVariableData()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>.
<p>
Referenced by <a class="el" href="fcswapAssoc_8c-source.html#l00238">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01042"></a>01042  {
<a name="l01043"></a>01043 
<a name="l01044"></a>01044   <span class="keywordtype">int</span>  numDataPoint, <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>;
<a name="l01045"></a>01045   <span class="keywordtype">double</span> *dnew = NULL;
<a name="l01046"></a>01046   <span class="keywordtype">int</span> numObj, *objIDs;
<a name="l01047"></a>01047   <span class="keywordtype">void</span> *var_dptr;
<a name="l01048"></a>01048   <span class="keywordtype">double</span> r;
<a name="l01049"></a>01049   <span class="keywordtype">int</span> spot;
<a name="l01050"></a>01050   <span class="keywordtype">int</span> i,j,k;
<a name="l01051"></a>01051   <span class="keywordtype">int</span> needs_parent; <span class="comment">//For figuring out whether we need parent or child call</span>
<a name="l01052"></a>01052 
<a name="l01053"></a>01053   <a class="code" href="structFC__Mesh.html">FC_Mesh</a>            mesh; 
<a name="l01054"></a>01054   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a>        oldMathType;
<a name="l01055"></a>01055   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> oldAssoc;
<a name="l01056"></a>01056 
<a name="l01057"></a>01057   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> dataType;
<a name="l01058"></a>01058   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l01059"></a>01059   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>*  varSlot;
<a name="l01060"></a>01060 
<a name="l01061"></a>01061 
<a name="l01062"></a>01062   <span class="comment">//Default return value</span>
<a name="l01063"></a>01063   <span class="keywordflow">if</span> (new_var)
<a name="l01064"></a>01064     *new_var = <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>;
<a name="l01065"></a>01065 
<a name="l01066"></a>01066   <span class="comment">//Check Inputs: first get basic info and bail if obious problems</span>
<a name="l01067"></a>01067   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(src_var);
<a name="l01068"></a>01068   <span class="keywordflow">if</span>((varSlot == NULL)||(new_var==NULL)) {
<a name="l01069"></a>01069     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s: problem with %s"</span>, 
<a name="l01070"></a>01070                  <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>),
<a name="l01071"></a>01071                  (varSlot==NULL) ? <span class="stringliteral">"input variable"</span> : 
<a name="l01072"></a>01072                  <span class="stringliteral">"new variable pointer"</span>);
<a name="l01073"></a>01073     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01074"></a>01074   }
<a name="l01075"></a>01075 
<a name="l01076"></a>01076   <span class="comment">//Get mesh. We now force the user to use same src/dst mesh</span>
<a name="l01077"></a>01077   rc = <a class="code" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a>(src_var, &amp;mesh);
<a name="l01078"></a>01078   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01079"></a>01079     <span class="keywordflow">return</span> rc;
<a name="l01080"></a>01080   
<a name="l01081"></a>01081   <span class="comment">//Get info on original variable</span>
<a name="l01082"></a>01082   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(src_var, NULL, &amp;numComponent, 
<a name="l01083"></a>01083                  &amp;oldAssoc, &amp;oldMathType, &amp;dataType);
<a name="l01084"></a>01084   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01085"></a>01085     <span class="keywordflow">return</span> rc;
<a name="l01086"></a>01086   
<a name="l01087"></a>01087 
<a name="l01088"></a>01088   <span class="comment">//If no conversion necessary, let copyVariable do all the work</span>
<a name="l01089"></a>01089   <span class="keywordflow">if</span> (newAssoc == oldAssoc) 
<a name="l01090"></a>01090     <span class="keywordflow">return</span> <a class="code" href="group__Variable.html#g613db2bba8e25ddc62756f186f442cab">fc_copyVariable</a>(src_var, mesh, newName, new_var);
<a name="l01091"></a>01091   
<a name="l01092"></a>01092   
<a name="l01093"></a>01093   <span class="comment">//Figure out default name if none given</span>
<a name="l01094"></a>01094   <span class="keywordflow">if</span>(newName == NULL)
<a name="l01095"></a>01095     newName = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l01096"></a>01096 
<a name="l01097"></a>01097 
<a name="l01098"></a>01098   <span class="comment">//Look at the destination assoc and figure out how many data points</span>
<a name="l01099"></a>01099   <span class="comment">//it has. If it's a face/edge, make sure we've created the appropriate conns.</span>
<a name="l01100"></a>01100   <span class="keywordflow">switch</span>(newAssoc){
<a name="l01101"></a>01101   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040f4be04f2efb0e31c558b6146cf83f191">FC_AT_ELEMENT</a> : 
<a name="l01102"></a>01102     rc = <a class="code" href="group__Mesh.html#g83a0b8188d49812c8d6d4c883cb8e9c4">fc_getMeshNumElement</a>(mesh, &amp;numDataPoint);
<a name="l01103"></a>01103     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01104"></a>01104       <span class="keywordflow">return</span> rc;
<a name="l01105"></a>01105     <span class="keywordflow">break</span>;
<a name="l01106"></a>01106 
<a name="l01107"></a>01107   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30402787462c13709118df8e232282a530a4">FC_AT_FACE</a>:
<a name="l01108"></a>01108     <span class="comment">//Build faces if necessary</span>
<a name="l01109"></a>01109     rc = <a class="code" href="group__Mesh.html#g0f4d7e58dc5936fc8f3824cbce0bf7c4">fc_getMeshNumFace</a>(mesh, &amp;numDataPoint);
<a name="l01110"></a>01110     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01111"></a>01111       <span class="keywordflow">return</span> rc;
<a name="l01112"></a>01112     <span class="keywordflow">break</span>;
<a name="l01113"></a>01113 
<a name="l01114"></a>01114   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fb5fd66bec9d026fbfab895c518842d4">FC_AT_EDGE</a>: 
<a name="l01115"></a>01115     <span class="comment">//Build edges if necessary</span>
<a name="l01116"></a>01116     rc = <a class="code" href="group__Mesh.html#g0526437d03be312b52b0bbe8bc60a701">fc_getMeshNumEdge</a>(mesh, &amp;numDataPoint);
<a name="l01117"></a>01117     <span class="keywordflow">if</span>(rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01118"></a>01118      <span class="keywordflow">return</span> rc;
<a name="l01119"></a>01119     <span class="keywordflow">break</span>;
<a name="l01120"></a>01120 
<a name="l01121"></a>01121   <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b30408cc812de98bed6c7106d5fa72e11f726">FC_AT_VERTEX</a>:
<a name="l01122"></a>01122     rc = <a class="code" href="group__Mesh.html#gd4e8931bbef75eafafa0735e23e513fa">fc_getMeshNumVertex</a>(mesh, &amp;numDataPoint);
<a name="l01123"></a>01123     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01124"></a>01124       <span class="keywordflow">return</span> rc;
<a name="l01125"></a>01125     <span class="keywordflow">break</span>;
<a name="l01126"></a>01126 
<a name="l01127"></a>01127   <span class="keywordflow">default</span>:
<a name="l01128"></a>01128     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Unexpected conversion target type"</span>);
<a name="l01129"></a>01129     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01130"></a>01130   }
<a name="l01131"></a>01131 
<a name="l01132"></a>01132   <span class="comment">//We need at least one data point to continue</span>
<a name="l01133"></a>01133   <span class="keywordflow">if</span>(numDataPoint&lt;1){
<a name="l01134"></a>01134     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s Conversion would not give at least one data point"</span>,
<a name="l01135"></a>01135                  <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l01136"></a>01136     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01137"></a>01137   }
<a name="l01138"></a>01138 
<a name="l01139"></a>01139 
<a name="l01140"></a>01140   <span class="comment">//Figure out what direction we're going. If the new association</span>
<a name="l01141"></a>01141   <span class="comment">//is less than the old one (newAssoc &lt; oldAssoc), we will need</span>
<a name="l01142"></a>01142   <span class="comment">//to do a parent-of-newAssoc's ids to find out which oldAssoc ids</span>
<a name="l01143"></a>01143   <span class="comment">//need to be averaged.</span>
<a name="l01144"></a>01144   needs_parent = 0;
<a name="l01145"></a>01145   <span class="keywordflow">if</span>(newAssoc &lt; oldAssoc)
<a name="l01146"></a>01146     needs_parent = 1;
<a name="l01147"></a>01147 
<a name="l01148"></a>01148 
<a name="l01149"></a>01149   <span class="comment">//Get at the source variable's data</span>
<a name="l01150"></a>01150   rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(src_var, &amp;var_dptr);               
<a name="l01151"></a>01151   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l01152"></a>01152     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l01153"></a>01153                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01154"></a>01154     <span class="keywordflow">return</span> rc;
<a name="l01155"></a>01155   } 
<a name="l01156"></a>01156 
<a name="l01157"></a>01157   <span class="comment">//Make room for the new data</span>
<a name="l01158"></a>01158   dnew = (<span class="keywordtype">double</span> *)malloc(numDataPoint * numComponent * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l01159"></a>01159   <span class="keywordflow">if</span> (dnew == NULL) {
<a name="l01160"></a>01160     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01161"></a>01161     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01162"></a>01162   }
<a name="l01163"></a>01163 
<a name="l01164"></a>01164   <span class="comment">//Go through all the new items and calculate their value</span>
<a name="l01165"></a>01165   <span class="keywordflow">for</span>(i=0; i&lt;numDataPoint; i++){
<a name="l01166"></a>01166 
<a name="l01167"></a>01167     <span class="comment">//Get the source ids that contain the destination id</span>
<a name="l01168"></a>01168     <span class="keywordflow">if</span>(needs_parent){
<a name="l01169"></a>01169       rc = <a class="code" href="group__TopologyRelations.html#ge6b875d170f63ea27784043f3f66ec03">fc_getMeshEntityParents</a>( mesh, newAssoc,  i, oldAssoc,
<a name="l01170"></a>01170                         &amp;numObj, &amp;objIDs);
<a name="l01171"></a>01171     } <span class="keywordflow">else</span> {
<a name="l01172"></a>01172       rc = <a class="code" href="group__TopologyRelations.html#g253e5f72f18fa7ac82540e087970b0f6">fc_getMeshEntityChildren</a>(mesh, newAssoc, i, oldAssoc,
<a name="l01173"></a>01173                         &amp;numObj, &amp;objIDs);
<a name="l01174"></a>01174     }
<a name="l01175"></a>01175     <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l01176"></a>01176       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get %s for variable '%s'"</span>,
<a name="l01177"></a>01177                    (needs_parent)?<span class="stringliteral">"Parents"</span>:<span class="stringliteral">"Children"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l01178"></a>01178       free(dnew);
<a name="l01179"></a>01179       <span class="keywordflow">return</span> rc;
<a name="l01180"></a>01180     }
<a name="l01181"></a>01181 
<a name="l01182"></a>01182     <span class="comment">//Work on each component individually</span>
<a name="l01183"></a>01183     <span class="keywordflow">for</span>(j=0; j&lt;numComponent; j++){
<a name="l01184"></a>01184       r = 0.0;
<a name="l01185"></a>01185       <span class="keywordflow">for</span>(k=0; k&lt;numObj; k++){
<a name="l01186"></a>01186      spot = (objIDs[k] * numComponent) + j;
<a name="l01187"></a>01187      <span class="keywordflow">switch</span>(dataType){
<a name="l01188"></a>01188      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>:   r += (<span class="keywordtype">double</span>) ((<span class="keywordtype">char</span> *)  var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l01189"></a>01189      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a> :   r += (double) ((<span class="keywordtype">int</span> *)   var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l01190"></a>01190      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>:  r += (double) ((<span class="keywordtype">float</span> *) var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l01191"></a>01191      <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>: r += (double) ((<span class="keywordtype">double</span> *)var_dptr)[spot]; <span class="keywordflow">break</span>;
<a name="l01192"></a>01192      <span class="keywordflow">default</span>:
<a name="l01193"></a>01193        <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Requested processing of variable with an unknown data type"</span>);
<a name="l01194"></a>01194        free(dnew);
<a name="l01195"></a>01195        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01196"></a>01196      }
<a name="l01197"></a>01197       }
<a name="l01198"></a>01198       <span class="keywordflow">if</span>(numObj)
<a name="l01199"></a>01199      r = r/(double)numObj;
<a name="l01200"></a>01200 
<a name="l01201"></a>01201       <span class="comment">//Store result for this component</span>
<a name="l01202"></a>01202       dnew[ i*numComponent + j ] = r;
<a name="l01203"></a>01203 
<a name="l01204"></a>01204     }
<a name="l01205"></a>01205     <span class="comment">//Cleanup</span>
<a name="l01206"></a>01206     free(objIDs);
<a name="l01207"></a>01207   }
<a name="l01208"></a>01208 
<a name="l01209"></a>01209   <span class="comment">//Make a new variable to stuff this in</span>
<a name="l01210"></a>01210   rc = <a class="code" href="group__Variable.html#g2f498c4fbd85d8094f0f640a17341cb3">fc_createVariable</a>(mesh, newName, new_var);
<a name="l01211"></a>01211   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l01212"></a>01212     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Could not create variable '%s'"</span>, newName);
<a name="l01213"></a>01213     free(dnew);
<a name="l01214"></a>01214     <span class="keywordflow">return</span> rc;
<a name="l01215"></a>01215   }
<a name="l01216"></a>01216 
<a name="l01217"></a>01217   <span class="comment">//printf("About to set : numpt %d   numcompon %d  mathtype=%s newassoc=%s\n",</span>
<a name="l01218"></a>01218   <span class="comment">//  numDataPoint, numComponent, fc_getMathTypeText(varSlot-&gt;mathtype), fc_getAssociationTypeText(newAssoc));</span>
<a name="l01219"></a>01219  
<a name="l01220"></a>01220   <span class="comment">//Fill in the data</span>
<a name="l01221"></a>01221   rc = <a class="code" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData</a>(*new_var, numDataPoint, numComponent,
<a name="l01222"></a>01222                  newAssoc, oldMathType, <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>,
<a name="l01223"></a>01223                  (<span class="keywordtype">void</span> *)dnew);
<a name="l01224"></a>01224 
<a name="l01225"></a>01225   free(dnew);
<a name="l01226"></a>01226 
<a name="l01227"></a>01227   <span class="keywordflow">if</span>(rc!=<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){ 
<a name="l01228"></a>01228     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to set data for variable '%s'"</span>,
<a name="l01229"></a>01229                  newName);
<a name="l01230"></a>01230     *new_var = <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>;
<a name="l01231"></a>01231     <span class="keywordflow">return</span> rc;
<a name="l01232"></a>01232   }
<a name="l01233"></a>01233   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>; 
<a name="l01234"></a>01234 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g5d42857d56c817882486a2bd6edea62f"></a><!-- doxytag: member="variable.c::fc_createComponentSeqVariables" ref="g5d42857d56c817882486a2bd6edea62f" args="(int numStep, FC_Variable *seqVar, int *numComponent, FC_Variable ***compSeqVars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_createComponentSeqVariables           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>compSeqVars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates new sequence variables which are the components of a given sequence variable. 
<p>
<b>Description:</b> <p>
Given a vector sequence variable, this routine will create a new sequence variable for each of its components. For example, if given a vector field like velocity, this will create 3 new sequence variables of just the X velocity, the Y velocity and the Z velocity.<p>
Naming of the new variables is automatic: the name of the original variable with "_cX" where X is the component ID indexing from 0.<p>
<b>Modifications:</b> <ul>
<li>01/19/05 WSK, Created.</li><li>9/22/2006 WSD modified to handle global vars</li><li>10/12/2007 ACG changed var name from "_componentX" to "_cX" </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - a seq variable with non-scalar data </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
output - the number of components </td></tr>
<tr><td valign="top"><em>compSeqVars</em>&nbsp;</td><td>
output - the components as seq vars (array of numComp seqVar arrays) </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l01986">1986</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l01665">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04193">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04152">fc_getVariableName()</a>, <a class="el" href="variable_8c-source.html#l04458">fc_getVariableNumComponent()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="loadHistory_8c-source.html#l00064">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01992"></a>01992   {
<a name="l01993"></a>01993   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l01994"></a>01994   <span class="keywordtype">int</span> i, j;
<a name="l01995"></a>01995   <span class="keywordtype">int</span> numComp, temp_numComp;
<a name="l01996"></a>01996   <a class="code" href="structFC__Sequence.html">FC_Sequence</a> sequence;
<a name="l01997"></a>01997   <span class="keywordtype">char</span>* var_name;
<a name="l01998"></a>01998   <a class="code" href="structFC__Variable.html">FC_Variable</a> **comp_vars, *temp_comps;
<a name="l01999"></a>01999 
<a name="l02000"></a>02000   <span class="comment">// set default return values</span>
<a name="l02001"></a>02001   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>)
<a name="l02002"></a>02002     *<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> = -1;
<a name="l02003"></a>02003   <span class="keywordflow">if</span> (compSeqVars)
<a name="l02004"></a>02004     *compSeqVars = NULL;
<a name="l02005"></a>02005 
<a name="l02006"></a>02006   <span class="comment">// check input</span>
<a name="l02007"></a>02007   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(numStep, seqVar) || !<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> || 
<a name="l02008"></a>02008       !compSeqVars) {
<a name="l02009"></a>02009     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));   
<a name="l02010"></a>02010     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02011"></a>02011   }
<a name="l02012"></a>02012 
<a name="l02013"></a>02013   <span class="comment">// get variable info</span>
<a name="l02014"></a>02014   rc = <a class="code" href="group__Variable.html#g954ae36f975a3fe850f18db5b3e15fc5">fc_getVariableNumComponent</a>(seqVar[0], &amp;numComp);
<a name="l02015"></a>02015   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02016"></a>02016     <span class="keywordflow">return</span> rc;
<a name="l02017"></a>02017   rc = <a class="code" href="group__Variable.html#gea428de5a2584716f6e2bc77cd339544">fc_getSequenceFromSeqVariable</a>(numStep, seqVar, &amp;sequence);
<a name="l02018"></a>02018   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02019"></a>02019     <span class="keywordflow">return</span> rc;
<a name="l02020"></a>02020 
<a name="l02021"></a>02021   <span class="keywordflow">if</span> (numComp &lt; 2) {
<a name="l02022"></a>02022     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Input Error: won't do if only 1 component"</span>);
<a name="l02023"></a>02023     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02024"></a>02024   }
<a name="l02025"></a>02025   
<a name="l02026"></a>02026   <span class="comment">// log message</span>
<a name="l02027"></a>02027   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new component seq variables."</span>);
<a name="l02028"></a>02028 
<a name="l02029"></a>02029   <span class="comment">// Basic procedure: use fc_createComponentVariables() to break each</span>
<a name="l02030"></a>02030   <span class="comment">// step of sequence var into components and then convert components</span>
<a name="l02031"></a>02031   <span class="comment">// back into sequence vars.</span>
<a name="l02032"></a>02032 
<a name="l02033"></a>02033   <span class="comment">// Make room to save component vars</span>
<a name="l02034"></a>02034   comp_vars = (<a class="code" href="structFC__Variable.html">FC_Variable</a>**)malloc(numComp*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>*));
<a name="l02035"></a>02035   <span class="keywordflow">if</span> (!comp_vars) {
<a name="l02036"></a>02036     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02037"></a>02037     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02038"></a>02038   }
<a name="l02039"></a>02039   <span class="keywordflow">for</span> (i = 0; i &lt; numComp; i++) {
<a name="l02040"></a>02040     comp_vars[i] = (FC_Variable*)malloc(numStep*<span class="keyword">sizeof</span>(FC_Variable));
<a name="l02041"></a>02041     <span class="keywordflow">if</span> (!comp_vars[i]) {
<a name="l02042"></a>02042       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02043"></a>02043       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02044"></a>02044     }
<a name="l02045"></a>02045   }
<a name="l02046"></a>02046 
<a name="l02047"></a>02047   <span class="comment">// make component vars</span>
<a name="l02048"></a>02048   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l02049"></a>02049     rc = <a class="code" href="group__Variable.html#g70bf49ced6c21052788697a0a56c9a50">fc_createComponentVariables</a>(seqVar[i], &amp;temp_numComp, &amp;temp_comps);
<a name="l02050"></a>02050     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) 
<a name="l02051"></a>02051       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l02052"></a>02052     <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l02053"></a>02053       comp_vars[j][i] = temp_comps[j];
<a name="l02054"></a>02054     free(temp_comps);
<a name="l02055"></a>02055   }
<a name="l02056"></a>02056 
<a name="l02057"></a>02057   <span class="comment">// make component vars into component seqVars</span>
<a name="l02058"></a>02058   *compSeqVars = (FC_Variable**)malloc(numComp*<span class="keyword">sizeof</span>(FC_Variable*));
<a name="l02059"></a>02059   <span class="keywordflow">for</span> (i = 0; i &lt; numComp; i++) {
<a name="l02060"></a>02060     rc = <a class="code" href="group__Variable.html#g3ec29251d717c5d0ca4ecfd9824f67b1">fc_getVariableName</a>(comp_vars[i][0], &amp;var_name);
<a name="l02061"></a>02061     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02062"></a>02062       <span class="keywordflow">return</span> rc;
<a name="l02063"></a>02063     rc = <a class="code" href="group__Variable.html#g61fe9ebf0de41291042f685580b6d272">fc_convertVariablesToSeqVariable</a>(numStep, comp_vars[i], sequence,
<a name="l02064"></a>02064                                           var_name, &amp;((*compSeqVars)[i]));
<a name="l02065"></a>02065     free(var_name);
<a name="l02066"></a>02066     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02067"></a>02067       <span class="keywordflow">return</span> rc;
<a name="l02068"></a>02068     free(comp_vars[i]);
<a name="l02069"></a>02069   }
<a name="l02070"></a>02070   free(comp_vars);
<a name="l02071"></a>02071   *<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> = numComp;
<a name="l02072"></a>02072 
<a name="l02073"></a>02073   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;    
<a name="l02074"></a>02074 }       
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g70bf49ced6c21052788697a0a56c9a50"></a><!-- doxytag: member="variable.c::fc_createComponentVariables" ref="g70bf49ced6c21052788697a0a56c9a50" args="(FC_Variable var, int *numComponent, FC_Variable **components)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_createComponentVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>components</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates new variables which are the components of a given variable. 
<p>
<b>Description:</b> <p>
Given a vector variable, this routine will create a new variable for each of its components. For example, if given a vector field like coordinates, this will create 3 new variables of just the X coordinate, the Y coordinate and the Z coordinate.<p>
Naming of the new variables is automatic: the name of the original variable with "_cX" where X is the component ID indexing from 0.<p>
<b>Modifications:</b> <ul>
<li>05/03/04 WSK, Created.</li><li>9/22/2006 WSD modified to handle global vars</li><li>10/12/2007 ACG changed var name from "_componentX" to "_cX" </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>var</em>&nbsp;</td><td>
input - a variable with non-scalar data </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
output - the number of components </td></tr>
<tr><td valign="top"><em>components</em>&nbsp;</td><td>
output - the components as vars </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l01858">1858</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l00122">fc_createGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l00284">fc_createVariable()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="variable_8c-source.html#l04228">fc_getDatasetFromVariable()</a>, <a class="el" href="variable_8c-source.html#l04268">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="variable_8c-source.html#l04152">fc_getVariableName()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04119">fc_isVariableGlobal()</a>, <a class="el" href="variable_8c-source.html#l04032">fc_isVariableValid()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00602">fc_setVariableDataPtr()</a>, <a class="el" href="base_8c-source.html#l00740">fc_sizeofDataType()</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l01986">fc_createComponentSeqVariables()</a>, and <a class="el" href="varStats_8c-source.html#l00096">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01862"></a>01862   {
<a name="l01863"></a>01863         
<a name="l01864"></a>01864   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l01865"></a>01865   <span class="keywordtype">int</span> i, j;
<a name="l01866"></a>01866   <span class="keywordtype">int</span> numData, dim;
<a name="l01867"></a>01867   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l01868"></a>01868   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype;
<a name="l01869"></a>01869   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype;
<a name="l01870"></a>01870   <span class="keywordtype">void</span> *data, **new_data;
<a name="l01871"></a>01871   size_t size;
<a name="l01872"></a>01872   <a class="code" href="structFC__Dataset.html">FC_Dataset</a> dataset;
<a name="l01873"></a>01873   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh;
<a name="l01874"></a>01874   <span class="keywordtype">char</span>* var_name, *new_var_name;
<a name="l01875"></a>01875   <a class="code" href="structFC__Variable.html">FC_Variable</a> new_var;
<a name="l01876"></a>01876   <span class="keywordtype">int</span> isGlobal;
<a name="l01877"></a>01877 
<a name="l01878"></a>01878   <span class="comment">// set default return values</span>
<a name="l01879"></a>01879   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>)
<a name="l01880"></a>01880     *<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> = -1;
<a name="l01881"></a>01881   <span class="keywordflow">if</span> (components)
<a name="l01882"></a>01882     *components = NULL;
<a name="l01883"></a>01883 
<a name="l01884"></a>01884   <span class="comment">// check input</span>
<a name="l01885"></a>01885   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g888dc4800278e9343a1c35599fa82d63">fc_isVariableValid</a>(var) || !<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> || !components){
<a name="l01886"></a>01886     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));   
<a name="l01887"></a>01887     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l01888"></a>01888   }
<a name="l01889"></a>01889 
<a name="l01890"></a>01890   <span class="comment">// get variable info</span>
<a name="l01891"></a>01891   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(var, &amp;numData, &amp;dim, &amp;assoc, &amp;mathtype, &amp;datatype);
<a name="l01892"></a>01892   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01893"></a>01893     <span class="keywordflow">return</span> rc;
<a name="l01894"></a>01894 
<a name="l01895"></a>01895   <span class="keywordflow">if</span> (dim &lt; 2) {
<a name="l01896"></a>01896     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Input Error: won't do if only 1 component"</span>);
<a name="l01897"></a>01897     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l01898"></a>01898   }
<a name="l01899"></a>01899   
<a name="l01900"></a>01900   <span class="comment">// log message</span>
<a name="l01901"></a>01901   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new component variables."</span>);
<a name="l01902"></a>01902 
<a name="l01903"></a>01903   <span class="comment">// get data</span>
<a name="l01904"></a>01904   rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(var, &amp;data);
<a name="l01905"></a>01905   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01906"></a>01906     <span class="keywordflow">return</span> rc; 
<a name="l01907"></a>01907 
<a name="l01908"></a>01908   <span class="comment">// create the new data</span>
<a name="l01909"></a>01909   size = <a class="code" href="group__DataTypes.html#g3a159b9419ea8f8d62b5473bf51f40e3">fc_sizeofDataType</a>(datatype);
<a name="l01910"></a>01910   new_data = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">void</span>*)*dim);
<a name="l01911"></a>01911   <span class="keywordflow">if</span> (new_data == NULL) {
<a name="l01912"></a>01912     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01913"></a>01913     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01914"></a>01914   }
<a name="l01915"></a>01915   <span class="keywordflow">for</span> (i = 0; i &lt; dim; i++) {
<a name="l01916"></a>01916     new_data[i] = malloc(size*numData);
<a name="l01917"></a>01917     <span class="keywordflow">if</span> (new_data[i] == NULL) {
<a name="l01918"></a>01918       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01919"></a>01919       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01920"></a>01920     }
<a name="l01921"></a>01921   }
<a name="l01922"></a>01922   <span class="keywordflow">for</span> (i = 0; i &lt; numData; i++) 
<a name="l01923"></a>01923     <span class="keywordflow">for</span> (j = 0; j &lt; dim; j++) 
<a name="l01924"></a>01924       memcpy((<span class="keywordtype">char</span>*)new_data[j]+ size*i, (<span class="keywordtype">char</span>*)data + size*(i*dim+j), size); 
<a name="l01925"></a>01925 
<a name="l01926"></a>01926   <span class="comment">// create the new variables</span>
<a name="l01927"></a>01927   isGlobal = <a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(var);
<a name="l01928"></a>01928   rc = <a class="code" href="group__Variable.html#g3ec29251d717c5d0ca4ecfd9824f67b1">fc_getVariableName</a>(var, &amp;var_name);
<a name="l01929"></a>01929   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01930"></a>01930     <span class="keywordflow">return</span> rc;
<a name="l01931"></a>01931   *<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> = dim;
<a name="l01932"></a>01932   rc = <a class="code" href="group__Variable.html#gf9224b61be48617fe1fea54e12c0cbe6">fc_getDatasetFromVariable</a>(var, &amp;dataset);
<a name="l01933"></a>01933   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01934"></a>01934     <span class="keywordflow">return</span> rc;
<a name="l01935"></a>01935   rc = <a class="code" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a>(var, &amp;mesh);
<a name="l01936"></a>01936   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01937"></a>01937     <span class="keywordflow">return</span> rc;
<a name="l01938"></a>01938   *components = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>)*dim);
<a name="l01939"></a>01939   new_var_name = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)*(strlen(var_name)+20));
<a name="l01940"></a>01940   <span class="keywordflow">if</span> (*components == NULL || new_var_name == NULL){
<a name="l01941"></a>01941     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l01942"></a>01942     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l01943"></a>01943   }
<a name="l01944"></a>01944   <span class="keywordflow">for</span> (i = 0; i &lt; dim; i++) {
<a name="l01945"></a>01945     sprintf(new_var_name, <span class="stringliteral">"%s_c%d"</span>, var_name, i);
<a name="l01946"></a>01946     <span class="keywordflow">if</span> (isGlobal)
<a name="l01947"></a>01947       rc = <a class="code" href="group__Variable.html#g3de7edfd0291f0f9f3d246f3a6254925">fc_createGlobalVariable</a>(dataset, new_var_name, &amp;new_var);
<a name="l01948"></a>01948     <span class="keywordflow">else</span>
<a name="l01949"></a>01949       rc = <a class="code" href="group__Variable.html#g2f498c4fbd85d8094f0f640a17341cb3">fc_createVariable</a>(mesh, new_var_name, &amp;new_var);
<a name="l01950"></a>01950     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01951"></a>01951       <span class="keywordflow">return</span> rc;
<a name="l01952"></a>01952     rc = <a class="code" href="group__Variable.html#g4491a3d96b7252fd5d0de54089d6838d">fc_setVariableDataPtr</a>(new_var, numData, 1, assoc, <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>, 
<a name="l01953"></a>01953                                datatype, (<span class="keywordtype">void</span>*)(new_data[i]));
<a name="l01954"></a>01954     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l01955"></a>01955       <span class="keywordflow">return</span> rc;
<a name="l01956"></a>01956     (*components)[i] = new_var;
<a name="l01957"></a>01957     <span class="comment">// do not free free new_data[i]</span>
<a name="l01958"></a>01958   }
<a name="l01959"></a>01959   free(new_data);
<a name="l01960"></a>01960   free(var_name);
<a name="l01961"></a>01961   free(new_var_name);
<a name="l01962"></a>01962 
<a name="l01963"></a>01963   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;    
<a name="l01964"></a>01964 }       
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g6f4709d2e5c166307f0cb3fccffe6a5a"></a><!-- doxytag: member="variable.c::fc_createGlobalSeqVariable" ref="g6f4709d2e5c166307f0cb3fccffe6a5a" args="(FC_Dataset dataset, FC_Sequence sequence, char *varName, int *numStep, FC_Variable **seqVars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_createGlobalSeqVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>sequence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>seqVars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new global sequence variable. 
<p>
<b>Description:</b> <p>
Creates a new, in-memory, global sequence variable as an array of variables. A sequence must be provided in addition to the dataset that will be the owner of the variable. The sequence must be in the provide dataset.<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>sequence</em>&nbsp;</td><td>
input - sequence handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - sequence variable name </td></tr>
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
output - the number of steps </td></tr>
<tr><td valign="top"><em>seqVars</em>&nbsp;</td><td>
output - seq variable handles </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l00185">185</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l05382">_fc_getNewVarSlot()</a>, <a class="el" href="sequence_8c-source.html#l02130">_fc_getSeqSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="sequenceP_8h-source.html#l00076">_FC_SeqSlot::ds</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>, <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>, and <a class="el" href="variableP_8h-source.html#l00080">_FC_VarSlot::stepID</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l00816">fc_copyGlobalSeqVariable()</a>.<div class="fragment"><pre class="fragment"><a name="l00191"></a>00191   {
<a name="l00192"></a>00192   <span class="keywordtype">int</span> i;
<a name="l00193"></a>00193   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l00194"></a>00194   <a class="code" href="struct__FC__SeqSlot.html">_FC_SeqSlot</a>* seqSlot;
<a name="l00195"></a>00195   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l00196"></a>00196   <span class="keywordtype">int</span> *tempNumPer, **tempSlotIDs;
<a name="l00197"></a>00197   
<a name="l00198"></a>00198   <span class="comment">// default output</span>
<a name="l00199"></a>00199   <span class="keywordflow">if</span> (numStep)
<a name="l00200"></a>00200     *numStep = -1;
<a name="l00201"></a>00201   <span class="keywordflow">if</span> (seqVars)
<a name="l00202"></a>00202     *seqVars = NULL;
<a name="l00203"></a>00203   
<a name="l00204"></a>00204   <span class="comment">// check input</span>
<a name="l00205"></a>00205   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l00206"></a>00206   seqSlot = <a class="code" href="group__PrivateSequence.html#ge669615c173acc924f9664fa05672e7f">_fc_getSeqSlot</a>(sequence);
<a name="l00207"></a>00207   <span class="keywordflow">if</span> (dsSlot == NULL || seqSlot == NULL || varName == NULL || 
<a name="l00208"></a>00208       numStep == NULL || seqVars == NULL) {
<a name="l00209"></a>00209     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00210"></a>00210     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00211"></a>00211   }
<a name="l00212"></a>00212   <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(dataset, seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#18a1d8c4ab7c2586678334f1d225b76c">ds</a>)) {
<a name="l00213"></a>00213     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Mesh and sequence need to be in same dataset"</span>);
<a name="l00214"></a>00214     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00215"></a>00215   }
<a name="l00216"></a>00216   
<a name="l00217"></a>00217   <span class="comment">// log message</span>
<a name="l00218"></a>00218   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new global seq variable '%s'"</span>, varName);
<a name="l00219"></a>00219   
<a name="l00220"></a>00220   <span class="comment">// make room for array &amp; setup return values</span>
<a name="l00221"></a>00221   *numStep = seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>;
<a name="l00222"></a>00222   *seqVars = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>)*seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>);
<a name="l00223"></a>00223   <span class="keywordflow">if</span> (*seqVars == NULL) {
<a name="l00224"></a>00224     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00225"></a>00225     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00226"></a>00226   }
<a name="l00227"></a>00227   
<a name="l00228"></a>00228   <span class="keywordflow">for</span> (i = 0; i &lt; seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>; i++) {
<a name="l00229"></a>00229     <span class="comment">// get an open slot</span>
<a name="l00230"></a>00230     varSlot = <a class="code" href="group__PrivateVariable.html#g7c70f60847534856bb95eb09c681e345">_fc_getNewVarSlot</a>();
<a name="l00231"></a>00231     <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l00232"></a>00232       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));      
<a name="l00233"></a>00233       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00234"></a>00234     }
<a name="l00235"></a>00235     
<a name="l00236"></a>00236     <span class="comment">// table header information</span>
<a name="l00237"></a>00237     <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>((*seqVars)[i], varSlot);
<a name="l00238"></a>00238     <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>, varName);
<a name="l00239"></a>00239     
<a name="l00240"></a>00240     <span class="comment">// set back and forth references</span>
<a name="l00241"></a>00241     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a> = dataset;
<a name="l00242"></a>00242     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#c4af91e9c0cb1fa702ada198d5bd3c90">sequence</a> = sequence;
<a name="l00243"></a>00243     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#0ada7d80dbc3b5a751bdaad72d8922e3">stepID</a> = i;
<a name="l00244"></a>00244   }
<a name="l00245"></a>00245   
<a name="l00246"></a>00246   <span class="comment">// set more back and forth references</span>
<a name="l00247"></a>00247   tempNumPer = (<span class="keywordtype">int</span>*)realloc(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#787f8664d494090c9cda7705128e6305">numStepPerSeqVar</a>, 
<a name="l00248"></a>00248                     (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00249"></a>00249   tempSlotIDs = (<span class="keywordtype">int</span>**)realloc(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#b82e667d1d1462e62ef06f9808735120">seqVarIDs</a>,
<a name="l00250"></a>00250                       (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*));
<a name="l00251"></a>00251   <span class="keywordflow">if</span> (!tempNumPer || !tempSlotIDs) {
<a name="l00252"></a>00252     free(tempNumPer); free(tempSlotIDs);
<a name="l00253"></a>00253     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00254"></a>00254     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00255"></a>00255   }
<a name="l00256"></a>00256   tempSlotIDs[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>] = (<span class="keywordtype">int</span>*)malloc(seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)); 
<a name="l00257"></a>00257   <span class="keywordflow">if</span> (!tempSlotIDs[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>]) {
<a name="l00258"></a>00258     free(tempNumPer); free(tempSlotIDs);
<a name="l00259"></a>00259     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00260"></a>00260     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00261"></a>00261   }
<a name="l00262"></a>00262   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#787f8664d494090c9cda7705128e6305">numStepPerSeqVar</a> = tempNumPer;
<a name="l00263"></a>00263   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#787f8664d494090c9cda7705128e6305">numStepPerSeqVar</a>[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>] = seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>;
<a name="l00264"></a>00264   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#b82e667d1d1462e62ef06f9808735120">seqVarIDs</a> = tempSlotIDs;
<a name="l00265"></a>00265   <span class="keywordflow">for</span> (i = 0; i &lt; seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>; i++) {
<a name="l00266"></a>00266     dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#b82e667d1d1462e62ef06f9808735120">seqVarIDs</a>[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>][i] = (*seqVars)[i].slotID;
<a name="l00267"></a>00267   }
<a name="l00268"></a>00268   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>++;
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00271"></a>00271 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3de7edfd0291f0f9f3d246f3a6254925"></a><!-- doxytag: member="variable.c::fc_createGlobalVariable" ref="g3de7edfd0291f0f9f3d246f3a6254925" args="(FC_Dataset dataset, char *varName, FC_Variable *variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_createGlobalVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new global variable. 
<p>
<b>Description:</b> <p>
Create a new, in-memory, variable associated with the entire dataset.<p>
<b>Modifications:</b> <ul>
<li>9/19/2006 WSD Created. Essentially a copy of fc_createVariable, except parent is the dataset. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l00122">122</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l05382">_fc_getNewVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.
<p>
Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>, <a class="el" href="variable_8c-source.html#l00722">fc_copyGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, and <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>.<div class="fragment"><pre class="fragment"><a name="l00126"></a>00126   {
<a name="l00127"></a>00127   <span class="keywordtype">int</span> *tempslotIDs;
<a name="l00128"></a>00128   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l00129"></a>00129   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l00130"></a>00130   
<a name="l00131"></a>00131   <span class="comment">// default return</span>
<a name="l00132"></a>00132   <span class="keywordflow">if</span> (variable)
<a name="l00133"></a>00133     *variable = <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>;
<a name="l00134"></a>00134   
<a name="l00135"></a>00135   <span class="comment">// check input</span>
<a name="l00136"></a>00136   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l00137"></a>00137   <span class="keywordflow">if</span> (dsSlot == NULL || !varName || !variable) {
<a name="l00138"></a>00138     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00139"></a>00139     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00140"></a>00140   }
<a name="l00141"></a>00141   
<a name="l00142"></a>00142   <span class="comment">// log message</span>
<a name="l00143"></a>00143   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new global variable '%s'"</span>, varName);
<a name="l00144"></a>00144   
<a name="l00145"></a>00145   <span class="comment">// get an open slot</span>
<a name="l00146"></a>00146   varSlot = <a class="code" href="group__PrivateVariable.html#g7c70f60847534856bb95eb09c681e345">_fc_getNewVarSlot</a>();
<a name="l00147"></a>00147   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l00148"></a>00148     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00149"></a>00149     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00150"></a>00150   }
<a name="l00151"></a>00151   
<a name="l00152"></a>00152   <span class="comment">// table header information</span>
<a name="l00153"></a>00153   <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>(*variable, varSlot);
<a name="l00154"></a>00154   <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>, varName);
<a name="l00155"></a>00155   
<a name="l00156"></a>00156   <span class="comment">// set back and forth references</span>
<a name="l00157"></a>00157   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a> = dataset;
<a name="l00158"></a>00158   tempslotIDs = realloc(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#dab567a1fd38a57a1523dda45fa65444">basicVarIDs</a>, 
<a name="l00159"></a>00159                         <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>+1));
<a name="l00160"></a>00160   <span class="keywordflow">if</span> (tempslotIDs == NULL) {
<a name="l00161"></a>00161     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00162"></a>00162     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00163"></a>00163   }
<a name="l00164"></a>00164   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#dab567a1fd38a57a1523dda45fa65444">basicVarIDs</a> = tempslotIDs;
<a name="l00165"></a>00165   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#dab567a1fd38a57a1523dda45fa65444">basicVarIDs</a>[dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>] = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#bcade4ee6957823bf234769051debf4d">slotID</a>;
<a name="l00166"></a>00166   dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>++;
<a name="l00167"></a>00167   
<a name="l00168"></a>00168   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00169"></a>00169 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gada4bacc9679592ff8b27c538570c1da"></a><!-- doxytag: member="variable.c::fc_createSeqVariable" ref="gada4bacc9679592ff8b27c538570c1da" args="(FC_Mesh mesh, FC_Sequence sequence, char *varName, int *numStep, FC_Variable **seqVars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_createSeqVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a>&nbsp;</td>
          <td class="paramname"> <em>sequence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>seqVars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new sequence variable. 
<p>
<b>Description:</b> <p>
Creates a new, in-memory, sequence variable as an array of variables. A sequence must be provided in addition to the mesh that will be the owner of the variable. The sequence and mesh must be in the same dataset.<p>
<b>Modifications:</b> <ul>
<li>2003-NOV-18 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>sequence</em>&nbsp;</td><td>
input - sequence handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - sequence variable name </td></tr>
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
output - the number of steps </td></tr>
<tr><td valign="top"><em>seqVars</em>&nbsp;</td><td>
output - seq variable handles </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l00348">348</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05382">_fc_getNewVarSlot()</a>, <a class="el" href="sequence_8c-source.html#l02130">_fc_getSeqSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="sequenceP_8h-source.html#l00076">_FC_SeqSlot::ds</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="meshP_8h-source.html#l00186">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>, <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numStepPerSeqVar</a>, <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>, <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::seqVarIDs</a>, and <a class="el" href="variableP_8h-source.html#l00080">_FC_VarSlot::stepID</a>.
<p>
Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="series_8c-source.html#l00122">_fc_makeNewSeqVar()</a>, <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="variable_8c-source.html#l01259">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01384">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l04764">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00226">readOneData()</a>.<div class="fragment"><pre class="fragment"><a name="l00354"></a>00354   {
<a name="l00355"></a>00355   <span class="keywordtype">int</span> i;
<a name="l00356"></a>00356   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l00357"></a>00357   <a class="code" href="struct__FC__SeqSlot.html">_FC_SeqSlot</a>* seqSlot;
<a name="l00358"></a>00358   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l00359"></a>00359   <span class="keywordtype">int</span> *tempNumPer, **tempSlotIDs;
<a name="l00360"></a>00360   
<a name="l00361"></a>00361   <span class="comment">// default output</span>
<a name="l00362"></a>00362   <span class="keywordflow">if</span> (numStep)
<a name="l00363"></a>00363     *numStep = -1;
<a name="l00364"></a>00364   <span class="keywordflow">if</span> (seqVars)
<a name="l00365"></a>00365     *seqVars = NULL;
<a name="l00366"></a>00366   
<a name="l00367"></a>00367   <span class="comment">// check input</span>
<a name="l00368"></a>00368   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l00369"></a>00369   seqSlot = <a class="code" href="group__PrivateSequence.html#ge669615c173acc924f9664fa05672e7f">_fc_getSeqSlot</a>(sequence);
<a name="l00370"></a>00370   <span class="keywordflow">if</span> (meshSlot == NULL || seqSlot == NULL || varName == NULL || 
<a name="l00371"></a>00371       numStep == NULL || seqVars == NULL) {
<a name="l00372"></a>00372     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00373"></a>00373     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00374"></a>00374   }
<a name="l00375"></a>00375   <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#553d7d0470e312f24080c5ed49334ead">ds</a>, seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#18a1d8c4ab7c2586678334f1d225b76c">ds</a>)) {
<a name="l00376"></a>00376     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Mesh and sequence need to be in same dataset"</span>);
<a name="l00377"></a>00377     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00378"></a>00378   }
<a name="l00379"></a>00379   
<a name="l00380"></a>00380   <span class="comment">// log message</span>
<a name="l00381"></a>00381   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new seq variable '%s'"</span>, varName);
<a name="l00382"></a>00382   
<a name="l00383"></a>00383   <span class="comment">// make room for array &amp; setup return values</span>
<a name="l00384"></a>00384   *numStep = seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>;
<a name="l00385"></a>00385   *seqVars = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>)*seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>);
<a name="l00386"></a>00386   <span class="keywordflow">if</span> (*seqVars == NULL) {
<a name="l00387"></a>00387     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00388"></a>00388     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00389"></a>00389   }
<a name="l00390"></a>00390   
<a name="l00391"></a>00391   <span class="keywordflow">for</span> (i = 0; i &lt; seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>; i++) {
<a name="l00392"></a>00392     <span class="comment">// get an open slot</span>
<a name="l00393"></a>00393     varSlot = <a class="code" href="group__PrivateVariable.html#g7c70f60847534856bb95eb09c681e345">_fc_getNewVarSlot</a>();
<a name="l00394"></a>00394     <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l00395"></a>00395       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));      
<a name="l00396"></a>00396       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00397"></a>00397     }
<a name="l00398"></a>00398     
<a name="l00399"></a>00399     <span class="comment">// table header information</span>
<a name="l00400"></a>00400     <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>((*seqVars)[i], varSlot);
<a name="l00401"></a>00401     <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>, varName);
<a name="l00402"></a>00402     
<a name="l00403"></a>00403     <span class="comment">// set back and forth references</span>
<a name="l00404"></a>00404     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a> = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#553d7d0470e312f24080c5ed49334ead">ds</a>;
<a name="l00405"></a>00405     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a> = mesh;
<a name="l00406"></a>00406     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#c4af91e9c0cb1fa702ada198d5bd3c90">sequence</a> = sequence;
<a name="l00407"></a>00407     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#0ada7d80dbc3b5a751bdaad72d8922e3">stepID</a> = i;
<a name="l00408"></a>00408   }
<a name="l00409"></a>00409   
<a name="l00410"></a>00410   <span class="comment">// set more back and forth references</span>
<a name="l00411"></a>00411   tempNumPer = (<span class="keywordtype">int</span>*)realloc(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1d17a5b984a2780fc0a7b5b88de791e2">numStepPerSeqVar</a>, 
<a name="l00412"></a>00412                     (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00413"></a>00413   tempSlotIDs = (<span class="keywordtype">int</span>**)realloc(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#4875049ef97cdce27533cbcdb6a5d145">seqVarIDs</a>,
<a name="l00414"></a>00414                       (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*));
<a name="l00415"></a>00415   <span class="keywordflow">if</span> (!tempNumPer || !tempSlotIDs) {
<a name="l00416"></a>00416     free(tempNumPer); free(tempSlotIDs);
<a name="l00417"></a>00417     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00418"></a>00418     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00419"></a>00419   }
<a name="l00420"></a>00420   tempSlotIDs[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>] = (<span class="keywordtype">int</span>*)malloc(seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)); 
<a name="l00421"></a>00421   <span class="keywordflow">if</span> (!tempSlotIDs[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>]) {
<a name="l00422"></a>00422     free(tempNumPer); free(tempSlotIDs);
<a name="l00423"></a>00423     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00424"></a>00424     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00425"></a>00425   }
<a name="l00426"></a>00426   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1d17a5b984a2780fc0a7b5b88de791e2">numStepPerSeqVar</a> = tempNumPer;
<a name="l00427"></a>00427   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1d17a5b984a2780fc0a7b5b88de791e2">numStepPerSeqVar</a>[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>] = seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>;
<a name="l00428"></a>00428   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#4875049ef97cdce27533cbcdb6a5d145">seqVarIDs</a> = tempSlotIDs;
<a name="l00429"></a>00429   <span class="keywordflow">for</span> (i = 0; i &lt; seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>; i++) {
<a name="l00430"></a>00430     meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#4875049ef97cdce27533cbcdb6a5d145">seqVarIDs</a>[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>][i] = (*seqVars)[i].slotID;
<a name="l00431"></a>00431   }
<a name="l00432"></a>00432   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>++;
<a name="l00433"></a>00433   
<a name="l00434"></a>00434   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00435"></a>00435 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g2f498c4fbd85d8094f0f640a17341cb3"></a><!-- doxytag: member="variable.c::fc_createVariable" ref="g2f498c4fbd85d8094f0f640a17341cb3" args="(FC_Mesh mesh, char *varName, FC_Variable *variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_createVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new variable. 
<p>
<b>Description:</b> <p>
Create a new, in-memory, variable.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l00284">284</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05382">_fc_getNewVarSlot()</a>, <a class="el" href="table_8c-source.html#l00132">_fc_setSlotHeaderName()</a>, <a class="el" href="meshP_8h-source.html#l00185">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="meshP_8h-source.html#l00096">_FC_MeshSlot::ds</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::numBasicVar</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.
<p>
Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="lsdynaio_8c-source.html#l00478">_fc_loadLSDynaDataset()</a>, <a class="el" href="fileio_8c-source.html#l00539">_fc_makeVariableFromFile()</a>, <a class="el" href="variable_8c-source.html#l00927">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l01037">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="mesh_8c-source.html#l00713">fc_createSubsetMesh()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l03503">fc_getDisplacedEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03702">fc_getDisplacedFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l03900">fc_getDisplacedRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04542">fc_getDisplacedSurfaceNormals()</a>, <a class="el" href="geom_8c-source.html#l03415">fc_getEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>, <a class="el" href="mesh_8c-source.html#l02716">fc_getMeshCoordsAsVariable()</a>, <a class="el" href="geom_8c-source.html#l03808">fc_getRegionVolumes()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="geom_8c-source.html#l04448">fc_getSurfaceNormals()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="gaplines_8c-source.html#l00240">getLinesAsVectors()</a>, and <a class="el" href="elemdeath__ex1_8c-source.html#l00076">makeDeadVar()</a>.<div class="fragment"><pre class="fragment"><a name="l00288"></a>00288   {
<a name="l00289"></a>00289   <span class="keywordtype">int</span> *tempslotIDs;
<a name="l00290"></a>00290   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l00291"></a>00291   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l00292"></a>00292   
<a name="l00293"></a>00293   <span class="comment">// default return</span>
<a name="l00294"></a>00294   <span class="keywordflow">if</span> (variable)
<a name="l00295"></a>00295     *variable = <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>;
<a name="l00296"></a>00296   
<a name="l00297"></a>00297   <span class="comment">// check input</span>
<a name="l00298"></a>00298   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l00299"></a>00299   <span class="keywordflow">if</span> (meshSlot == NULL || !varName || !variable) {
<a name="l00300"></a>00300     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00301"></a>00301     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00302"></a>00302   }
<a name="l00303"></a>00303   
<a name="l00304"></a>00304   <span class="comment">// log message</span>
<a name="l00305"></a>00305   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Creating new variable '%s'"</span>, varName);
<a name="l00306"></a>00306   
<a name="l00307"></a>00307   <span class="comment">// get an open slot</span>
<a name="l00308"></a>00308   varSlot = <a class="code" href="group__PrivateVariable.html#g7c70f60847534856bb95eb09c681e345">_fc_getNewVarSlot</a>();
<a name="l00309"></a>00309   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l00310"></a>00310     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00311"></a>00311     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00312"></a>00312   }
<a name="l00313"></a>00313   
<a name="l00314"></a>00314   <span class="comment">// table header information</span>
<a name="l00315"></a>00315   <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>(*variable, varSlot);
<a name="l00316"></a>00316   <a class="code" href="group__PrivateTable.html#g5b2da1cfdef894767314907efc02099b">_fc_setSlotHeaderName</a>(&amp;varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>, varName);
<a name="l00317"></a>00317   
<a name="l00318"></a>00318   <span class="comment">// set back and forth references</span>
<a name="l00319"></a>00319   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a> = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#553d7d0470e312f24080c5ed49334ead">ds</a>;
<a name="l00320"></a>00320   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a> = mesh;
<a name="l00321"></a>00321   tempslotIDs = realloc(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5a672f4074dfa02a1bbdd667a09852e8">basicVarIDs</a>, 
<a name="l00322"></a>00322                         <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>+1));
<a name="l00323"></a>00323   <span class="keywordflow">if</span> (tempslotIDs == NULL) {
<a name="l00324"></a>00324     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00325"></a>00325     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00326"></a>00326   }
<a name="l00327"></a>00327   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5a672f4074dfa02a1bbdd667a09852e8">basicVarIDs</a> = tempslotIDs;
<a name="l00328"></a>00328   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5a672f4074dfa02a1bbdd667a09852e8">basicVarIDs</a>[meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>] = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#bcade4ee6957823bf234769051debf4d">slotID</a>;
<a name="l00329"></a>00329   meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>++;
<a name="l00330"></a>00330   
<a name="l00331"></a>00331   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00332"></a>00332 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g57341fab4863efe2c35476aee509f20d"></a><!-- doxytag: member="variable.c::fc_deleteSeqVariable" ref="g57341fab4863efe2c35476aee509f20d" args="(int numStep, FC_Variable *variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_deleteSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a sequence variable. 
<p>
<b>Description:</b> <p>
Call when this sequence variable is no longer needed.<p>
NOTE: this does not delete the array of variable handles that makes up the sequence variable, the user is still responsible for this.<p>
<b>Modifications:</b> <ul>
<li>2003-APR-21 W Koegler Created.</li><li>12/01/03 WSK Changed so it removes uncommitted variables form the owning mesh's varID lists.</li><li>9/9/04 WSK changed name to delete. Changed behavior so that delete always deletes no matter whether on disk or not.</li><li>9/19/2006 WSD Added behavior so handles variables owned by datasets as well. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - the number of variable handles </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
input - variable handles </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03938">3938</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05460">_fc_deleteVarSlot()</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="base_8c-source.html#l00773">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00129">fc_printfWarningMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00186">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numStepPerSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>, <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::seqVarIDs</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.
<p>
Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="series_8c-source.html#l00122">_fc_makeNewSeqVar()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="variable_8c-source.html#l01384">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="mesh_8c-source.html#l01859">fc_deleteMesh()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="variable_8c-source.html#l03571">fc_getOrGenerateUniqueSeqVariableByName()</a>, <a class="el" href="variable_8c-source.html#l04764">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00324">makeIntersecting()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00402">makeNormal()</a>.<div class="fragment"><pre class="fragment"><a name="l03941"></a>03941   {
<a name="l03942"></a>03942   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc, rc_keep;
<a name="l03943"></a>03943   <span class="keywordtype">int</span> i, j;
<a name="l03944"></a>03944   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* first_varSlot;
<a name="l03945"></a>03945   <span class="keywordtype">int</span>* num_p;     <span class="comment">// pointer to num</span>
<a name="l03946"></a>03946   <span class="keywordtype">int</span>** numPer_p; <span class="comment">// pointer to numStep per seqVar</span>
<a name="l03947"></a>03947   <span class="keywordtype">int</span>*** slots_p;  <span class="comment">// pointer to slotIDs</span>
<a name="l03948"></a>03948   <span class="keywordtype">char</span> *extra = <span class="stringliteral">""</span>;
<a name="l03949"></a>03949 
<a name="l03950"></a>03950   <span class="comment">// special case: deleting a null list is not an error</span>
<a name="l03951"></a>03951   <span class="keywordflow">if</span> (numStep &lt;= 0 &amp;&amp; variables == NULL) {
<a name="l03952"></a>03952     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"Deleting a NULL sequence variable"</span>);
<a name="l03953"></a>03953     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03954"></a>03954   }
<a name="l03955"></a>03955 
<a name="l03956"></a>03956   <span class="comment">// check input</span>
<a name="l03957"></a>03957   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(numStep, variables)) {
<a name="l03958"></a>03958     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03959"></a>03959     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03960"></a>03960   }
<a name="l03961"></a>03961 
<a name="l03962"></a>03962   first_varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variables[0]);
<a name="l03963"></a>03963   
<a name="l03964"></a>03964   <span class="comment">// log message</span>
<a name="l03965"></a>03965   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>, <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>))
<a name="l03966"></a>03966     extra = <span class="stringliteral">" global"</span>;
<a name="l03967"></a>03967   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Deleting%s seq variable '%s'"</span>, extra, 
<a name="l03968"></a>03968                       first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l03969"></a>03969 
<a name="l03970"></a>03970   <span class="comment">// remove references from dataset or mesh</span>
<a name="l03971"></a>03971   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>, <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>)) {
<a name="l03972"></a>03972     <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a> *dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a>);
<a name="l03973"></a>03973     num_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>;
<a name="l03974"></a>03974     numPer_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#787f8664d494090c9cda7705128e6305">numStepPerSeqVar</a>;
<a name="l03975"></a>03975     slots_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#b82e667d1d1462e62ef06f9808735120">seqVarIDs</a>;
<a name="l03976"></a>03976   }
<a name="l03977"></a>03977   <span class="keywordflow">else</span> {
<a name="l03978"></a>03978     <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a> *meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>);
<a name="l03979"></a>03979     num_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>;
<a name="l03980"></a>03980     numPer_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1d17a5b984a2780fc0a7b5b88de791e2">numStepPerSeqVar</a>;
<a name="l03981"></a>03981     slots_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#4875049ef97cdce27533cbcdb6a5d145">seqVarIDs</a>;
<a name="l03982"></a>03982   }
<a name="l03983"></a>03983   <span class="keywordflow">if</span> (*num_p == 1) {
<a name="l03984"></a>03984     free(*numPer_p);
<a name="l03985"></a>03985     *numPer_p = NULL;
<a name="l03986"></a>03986     free((*slots_p)[0]);
<a name="l03987"></a>03987     free(*slots_p);
<a name="l03988"></a>03988     *slots_p = NULL;
<a name="l03989"></a>03989     *num_p = 0;
<a name="l03990"></a>03990   }
<a name="l03991"></a>03991   <span class="keywordflow">else</span> {
<a name="l03992"></a>03992     <span class="keywordflow">for</span> (i = 0; i &lt; *num_p; i++) {
<a name="l03993"></a>03993       <span class="keywordflow">if</span> ((*slots_p)[i][0] == first_varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#bcade4ee6957823bf234769051debf4d">slotID</a>)
<a name="l03994"></a>03994      <span class="keywordflow">break</span>;
<a name="l03995"></a>03995     }
<a name="l03996"></a>03996     free((*slots_p)[i]);
<a name="l03997"></a>03997     <span class="keywordflow">for</span> (j = i+1; j &lt; *num_p; j++) {
<a name="l03998"></a>03998       (*numPer_p)[j-1] = (*numPer_p)[j];
<a name="l03999"></a>03999       (*slots_p)[j-1] = (*slots_p)[j];
<a name="l04000"></a>04000     }
<a name="l04001"></a>04001     *num_p = *num_p - 1;
<a name="l04002"></a>04002   }
<a name="l04003"></a>04003   
<a name="l04004"></a>04004   <span class="comment">// clear &amp; delete slots</span>
<a name="l04005"></a>04005   rc_keep = <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04006"></a>04006   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l04007"></a>04007     rc = <a class="code" href="group__PrivateVariable.html#g2948e7d03faf1b631845f7904231d120">_fc_deleteVarSlot</a>(variables[i]);
<a name="l04008"></a>04008     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l04009"></a>04009       rc_keep = rc;
<a name="l04010"></a>04010   }
<a name="l04011"></a>04011   
<a name="l04012"></a>04012   <span class="keywordflow">return</span> rc_keep;
<a name="l04013"></a>04013 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g2f48fcbd551131488dd5757c27364656"></a><!-- doxytag: member="variable.c::fc_deleteVariable" ref="g2f48fcbd551131488dd5757c27364656" args="(FC_Variable variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_deleteVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a variable. 
<p>
<b>Description:</b> <p>
Call when this variable is no longer needed.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>12/01/03 WSK Changed so it removes uncommitted variables form the owning mesh's varID lists.</li><li>11/25/03 RM, if variable is FC_NULL_VARIABLE, then do nothing and return success (issue warning if <a class="el" href="group__Library.html#gccd255e326eaf782cb41c75999d2846b">fc_getLibraryVerbosity()</a>).</li><li>9/9/04 WSK changed name to delete. Changed behavior so that delete always deletes no matter whether on disk or not.</li><li>9/19/2006 WSD Added behavior so handles variables owned by datasets as well. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03856">3856</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05460">_fc_deleteVarSlot()</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="meshP_8h-source.html#l00185">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="meshP_8h-source.html#l00181">_FC_MeshSlot::coordVarID</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00773">FC_NULL_MESH</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00129">fc_printfWarningMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>, <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::numBasicVar</a>, <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>, and <a class="el" href="variableP_8h-source.html#l00080">_FC_VarSlot::stepID</a>.
<p>
Referenced by <a class="el" href="varNormalize_8c-source.html#l00116">createStressOrPressureVar()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00497">doDoubles()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00439">doSingles()</a>, <a class="el" href="varmath_8c-source.html#l01394">fc_constOperatorSeqVar()</a>, <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="mesh_8c-source.html#l01859">fc_deleteMesh()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l04065">fc_getDisplacedMeshVolume()</a>, <a class="el" href="geom_8c-source.html#l04240">fc_getDisplacedSubsetVolume()</a>, <a class="el" href="geom_8c-source.html#l04004">fc_getMeshVolume()</a>, <a class="el" href="variable_8c-source.html#l03189">fc_getOrGenerateUniqueVariableByName()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="geom_8c-source.html#l04344">fc_getSubsetArea()</a>, <a class="el" href="geom_8c-source.html#l04129">fc_getSubsetVolume()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="varmath_8c-source.html#l00655">fc_operatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l00979">fc_seqConstOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02640">fc_seqVarBinaryFunctionConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02414">fc_seqVarBinaryFunctionSeqConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02546">fc_seqVarBinaryFunctionSeqVarConst()</a>, <a class="el" href="varmath_8c-source.html#l02284">fc_seqVarBinaryFunctionSeqVarSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l02179">fc_seqVarBinaryFunctionSeqVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01296">fc_seqVarOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00858">fc_seqVarOperatorSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l00747">fc_seqVarOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l02094">fc_seqVarUnaryFunction()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, <a class="el" href="edgeStats_8c-source.html#l00063">get_and_print_lengths()</a>, and <a class="el" href="elemdeath__ex1_8c-source.html#l00147">main()</a>.<div class="fragment"><pre class="fragment"><a name="l03858"></a>03858   {
<a name="l03859"></a>03859   <span class="keywordtype">int</span> i, j;
<a name="l03860"></a>03860   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l03861"></a>03861   <span class="keywordtype">int</span>* num_p;     <span class="comment">// pointer to num location</span>
<a name="l03862"></a>03862   <span class="keywordtype">int</span>** slots_p;  <span class="comment">// pointer to slotIDs location</span>
<a name="l03863"></a>03863   <span class="keywordtype">char</span> *extra = <span class="stringliteral">""</span>;
<a name="l03864"></a>03864  
<a name="l03865"></a>03865   <span class="comment">// special case: deleting a null handle is not an error</span>
<a name="l03866"></a>03866   <span class="keywordflow">if</span> ( <a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(variable, <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>)) {
<a name="l03867"></a>03867     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"Deleting FC_NULL_VARIABLE"</span>);
<a name="l03868"></a>03868     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03869"></a>03869   }
<a name="l03870"></a>03870  
<a name="l03871"></a>03871   <span class="comment">// check input</span>
<a name="l03872"></a>03872   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l03873"></a>03873   <span class="keywordflow">if</span> (varSlot == NULL || varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#0ada7d80dbc3b5a751bdaad72d8922e3">stepID</a> &gt; -1) { <span class="comment">// can't be seq var</span>
<a name="l03874"></a>03874     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s, invalid variable"</span>, 
<a name="l03875"></a>03875              <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03876"></a>03876     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03877"></a>03877   }
<a name="l03878"></a>03878   
<a name="l03879"></a>03879   <span class="comment">// log message</span>
<a name="l03880"></a>03880   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>, <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>))
<a name="l03881"></a>03881     extra = <span class="stringliteral">" global"</span>;
<a name="l03882"></a>03882   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Deleting%s variable '%s'"</span>, extra, 
<a name="l03883"></a>03883                 varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l03884"></a>03884 
<a name="l03885"></a>03885   <span class="comment">// remove reference from dataset or mesh</span>
<a name="l03886"></a>03886   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>, <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>)) {
<a name="l03887"></a>03887     <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a> *dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a>);
<a name="l03888"></a>03888     num_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>;
<a name="l03889"></a>03889     slots_p = &amp;dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#dab567a1fd38a57a1523dda45fa65444">basicVarIDs</a>;
<a name="l03890"></a>03890   }
<a name="l03891"></a>03891   <span class="keywordflow">else</span> {
<a name="l03892"></a>03892     <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>);
<a name="l03893"></a>03893     num_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>;
<a name="l03894"></a>03894     slots_p = &amp;meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5a672f4074dfa02a1bbdd667a09852e8">basicVarIDs</a>;
<a name="l03895"></a>03895     <span class="comment">// special case: the coord field</span>
<a name="l03896"></a>03896     <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#87698a0b5c2b6161380ae3134b88668b">coordVarID</a> == varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#bcade4ee6957823bf234769051debf4d">slotID</a>)
<a name="l03897"></a>03897       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#87698a0b5c2b6161380ae3134b88668b">coordVarID</a> = -1;
<a name="l03898"></a>03898   }
<a name="l03899"></a>03899   <span class="keywordflow">if</span> (*num_p == 1) {
<a name="l03900"></a>03900     free(*slots_p);
<a name="l03901"></a>03901     *slots_p = NULL;
<a name="l03902"></a>03902     *num_p = 0;
<a name="l03903"></a>03903   }
<a name="l03904"></a>03904   <span class="keywordflow">else</span> {
<a name="l03905"></a>03905     <span class="keywordflow">for</span> (i = 0; i &lt; *num_p; i++) {
<a name="l03906"></a>03906       <span class="keywordflow">if</span> ((*slots_p)[i] == varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#bcade4ee6957823bf234769051debf4d">slotID</a>)
<a name="l03907"></a>03907      <span class="keywordflow">break</span>;
<a name="l03908"></a>03908     }
<a name="l03909"></a>03909     <span class="keywordflow">for</span> (j = i+1; j &lt; *num_p; j++)
<a name="l03910"></a>03910       (*slots_p)[j-1] = (*slots_p)[j];
<a name="l03911"></a>03911     *num_p = *num_p - 1;
<a name="l03912"></a>03912   }
<a name="l03913"></a>03913 
<a name="l03914"></a>03914   <span class="comment">// clear &amp; delete slot</span>
<a name="l03915"></a>03915   <span class="keywordflow">return</span> <a class="code" href="group__PrivateVariable.html#g2948e7d03faf1b631845f7904231d120">_fc_deleteVarSlot</a>(variable);
<a name="l03916"></a>03916 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gf9224b61be48617fe1fea54e12c0cbe6"></a><!-- doxytag: member="variable.c::fc_getDatasetFromVariable" ref="gf9224b61be48617fe1fea54e12c0cbe6" args="(FC_Variable variable, FC_Dataset *dataset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getDatasetFromVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a> *&nbsp;</td>
          <td class="paramname"> <em>dataset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the parent dataset of the variable. 
<p>
<b>Modifications:</b> <ul>
<li>9/19/2006 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
output - dataset handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04228">4228</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00763">FC_NULL_DATASET</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="variable_8c-source.html#l01665">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, and <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>.<div class="fragment"><pre class="fragment"><a name="l04231"></a>04231   {
<a name="l04232"></a>04232   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04233"></a>04233   
<a name="l04234"></a>04234   <span class="comment">// set default value</span>
<a name="l04235"></a>04235   <span class="keywordflow">if</span> (dataset != NULL)
<a name="l04236"></a>04236     *dataset = <a class="code" href="group__Handles.html#g35df506577292042278b200ea30e9885">FC_NULL_DATASET</a>;
<a name="l04237"></a>04237   
<a name="l04238"></a>04238   <span class="comment">// check input</span>
<a name="l04239"></a>04239   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04240"></a>04240   <span class="keywordflow">if</span> (varSlot == NULL || dataset == NULL) {
<a name="l04241"></a>04241     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04242"></a>04242     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04243"></a>04243   }
<a name="l04244"></a>04244   
<a name="l04245"></a>04245   <span class="comment">// log message</span>
<a name="l04246"></a>04246   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting dataset from variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04247"></a>04247   
<a name="l04248"></a>04248   <span class="comment">// return requested value</span>
<a name="l04249"></a>04249   *dataset = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a>;
<a name="l04250"></a>04250   
<a name="l04251"></a>04251   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04252"></a>04252 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8b251e2612532f815194770829cbb8b1"></a><!-- doxytag: member="variable.c::fc_getGlobalSeqVariableByName" ref="g8b251e2612532f815194770829cbb8b1" args="(FC_Dataset dataset, char *varName, int *numSeqVar, int **numStepPerVar, FC_Variable ***seqVariables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getGlobalSeqVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepPerVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>seqVariables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get global sequence variables with a given name from the dataset. 
<p>
<b>Description:</b> <p>
Returns an array of global seq variables (array of arrays of variables) as well as an array of the number of steps per sequence variable. The use is responsible for freeing all returned arrays. (SeqVars is a 2D array, so to free: for (i = 0; i &lt; numSeq var) { free(seqVars[i])); } )<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 WSD created</li><li>9/25/2006 ACG returns array </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - seq variable name </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
<tr><td valign="top"><em>numStepPerVar</em>&nbsp;</td><td>
output - array with number of steps for each sequence variable </td></tr>
<tr><td valign="top"><em>seqVariables</em>&nbsp;</td><td>
output - array of sequence variables (each sequence variable is array of numStep variables </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02866">2866</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l05441">_fc_getVarSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, and <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>.<div class="fragment"><pre class="fragment"><a name="l02874"></a>02874   {
<a name="l02875"></a>02875   <span class="keywordtype">int</span> i, j;
<a name="l02876"></a>02876   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a> *dsSlot;
<a name="l02877"></a>02877   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a> *varSlot;
<a name="l02878"></a>02878 
<a name="l02879"></a>02879   <span class="keywordtype">int</span> numStep;
<a name="l02880"></a>02880   <a class="code" href="structFC__Variable.html">FC_Variable</a> *seqvar;
<a name="l02881"></a>02881   <a class="code" href="structFC__Variable.html">FC_Variable</a> **lmatch = NULL;
<a name="l02882"></a>02882   <span class="keywordtype">int</span> *lstepmatch = NULL;
<a name="l02883"></a>02883   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l02884"></a>02884   
<a name="l02885"></a>02885   <span class="comment">// default return values</span>
<a name="l02886"></a>02886  <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l02887"></a>02887     *numSeqVar = -1;
<a name="l02888"></a>02888   <span class="keywordflow">if</span> (numStepPerVar != NULL)
<a name="l02889"></a>02889     *numStepPerVar = NULL;
<a name="l02890"></a>02890   <span class="keywordflow">if</span> (seqVariables != NULL)
<a name="l02891"></a>02891     *seqVariables = NULL;
<a name="l02892"></a>02892   
<a name="l02893"></a>02893   <span class="comment">// check input</span>
<a name="l02894"></a>02894   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l02895"></a>02895   <span class="keywordflow">if</span> (dsSlot == NULL || !varName ||  numSeqVar == NULL || numStepPerVar == NULL ||
<a name="l02896"></a>02896       seqVariables == NULL) {
<a name="l02897"></a>02897     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02898"></a>02898     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02899"></a>02899   }
<a name="l02900"></a>02900   
<a name="l02901"></a>02901   <span class="comment">// log message</span>
<a name="l02902"></a>02902   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variable '%s'"</span>, varName);
<a name="l02903"></a>02903 
<a name="l02904"></a>02904   numlmatch = 0;
<a name="l02905"></a>02905   maxnumlmatch = 0;
<a name="l02906"></a>02906   
<a name="l02907"></a>02907   <span class="comment">// look for varName in this dataset's seq var list</span>
<a name="l02908"></a>02908   <span class="keywordflow">for</span> (i = 0; i &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>; i++) {
<a name="l02909"></a>02909     varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#b82e667d1d1462e62ef06f9808735120">seqVarIDs</a>[i][0]);
<a name="l02910"></a>02910     if (!strcmp(varName, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>)) {
<a name="l02911"></a>02911       numStep = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#787f8664d494090c9cda7705128e6305">numStepPerSeqVar</a>[i];
<a name="l02912"></a>02912       seqvar = malloc((numStep)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>));
<a name="l02913"></a>02913       <span class="keywordflow">if</span> (seqvar == NULL) {
<a name="l02914"></a>02914      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02915"></a>02915      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02916"></a>02916       }
<a name="l02917"></a>02917       <span class="keywordflow">for</span> (j = 0; j &lt; numStep; j++) {
<a name="l02918"></a>02918      varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#b82e667d1d1462e62ef06f9808735120">seqVarIDs</a>[i][j]);
<a name="l02919"></a>02919      <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>(seqvar[j], varSlot);
<a name="l02920"></a>02920       }
<a name="l02921"></a>02921 
<a name="l02922"></a>02922       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l02923"></a>02923      lmatch = (FC_Variable**)malloc(<span class="keyword">sizeof</span>(FC_Variable*));
<a name="l02924"></a>02924      lstepmatch = (<span class="keywordtype">int</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l02925"></a>02925      <span class="keywordflow">if</span> (lmatch == NULL || lstepmatch == NULL){
<a name="l02926"></a>02926        <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02927"></a>02927        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02928"></a>02928      }
<a name="l02929"></a>02929      numlmatch = 1;
<a name="l02930"></a>02930      maxnumlmatch = 1;
<a name="l02931"></a>02931      lmatch[0] = seqvar;
<a name="l02932"></a>02932      lstepmatch[0] = numStep;
<a name="l02933"></a>02933       }<span class="keywordflow">else</span>{
<a name="l02934"></a>02934      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l02935"></a>02935        FC_Variable **temp;
<a name="l02936"></a>02936        <span class="keywordtype">int</span> *tempstep;
<a name="l02937"></a>02937        temp = (FC_Variable**)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(FC_Variable*));
<a name="l02938"></a>02938        tempstep = (<span class="keywordtype">int</span>*)realloc(lstepmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(FC_Variable*));
<a name="l02939"></a>02939        <span class="keywordflow">if</span> (temp == NULL || tempstep == NULL){
<a name="l02940"></a>02940          <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02941"></a>02941          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02942"></a>02942        }
<a name="l02943"></a>02943        maxnumlmatch*=2;
<a name="l02944"></a>02944        lmatch = temp;
<a name="l02945"></a>02945        lstepmatch = tempstep;
<a name="l02946"></a>02946      }
<a name="l02947"></a>02947      lmatch[numlmatch] = seqvar;
<a name="l02948"></a>02948      lstepmatch[numlmatch] = numStep;
<a name="l02949"></a>02949      numlmatch++;
<a name="l02950"></a>02950       }
<a name="l02951"></a>02951     }
<a name="l02952"></a>02952   }
<a name="l02953"></a>02953 
<a name="l02954"></a>02954   *numSeqVar = numlmatch;
<a name="l02955"></a>02955   *numStepPerVar = lstepmatch;
<a name="l02956"></a>02956   *seqVariables = lmatch;
<a name="l02957"></a>02957 
<a name="l02958"></a>02958   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02959"></a>02959 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g493c9016a0f06eda5a5771fc50426ec4"></a><!-- doxytag: member="variable.c::fc_getGlobalSeqVariables" ref="g493c9016a0f06eda5a5771fc50426ec4" args="(FC_Dataset dataset, int *numSeqVar, int **numStepPerVar, FC_Variable ***seqVariables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getGlobalSeqVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepPerVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>seqVariables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the global sequence variables in a dataset. 
<p>
<b>Description:</b> <p>
Returns an array of global seq variables (array of arrays of variables) as well as an array of the number of steps per sequence variable. The use is responsible for freeing all returned arrays. (SeqVars is a 2D array, so to free: for (i = 0; i &lt; numSeq var) { free(seqVars[i])); } )<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 WSD Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
<tr><td valign="top"><em>numStepPerVar</em>&nbsp;</td><td>
output - array with number of steps for each sequence variable </td></tr>
<tr><td valign="top"><em>seqVariables</em>&nbsp;</td><td>
output - array of sequence variables (each sequence variable is array of numStep variables </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02422">2422</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l05441">_fc_getVarSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="datasetP_8h-source.html#l00099">_FC_DsSlot::numStepPerSeqVar</a>, and <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>.
<p>
Referenced by <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, and <a class="el" href="fcdump_8c-source.html#l00194">main()</a>.<div class="fragment"><pre class="fragment"><a name="l02429"></a>02429   {
<a name="l02430"></a>02430   <span class="keywordtype">int</span> i, j;
<a name="l02431"></a>02431   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02432"></a>02432   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l02433"></a>02433   
<a name="l02434"></a>02434   <span class="comment">// set up defaults</span>
<a name="l02435"></a>02435   <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l02436"></a>02436     *numSeqVar = -1;
<a name="l02437"></a>02437   <span class="keywordflow">if</span> (numStepPerVar != NULL)
<a name="l02438"></a>02438     *numStepPerVar = NULL;
<a name="l02439"></a>02439   <span class="keywordflow">if</span> (seqVariables != NULL)
<a name="l02440"></a>02440     *seqVariables = NULL;
<a name="l02441"></a>02441   
<a name="l02442"></a>02442   <span class="comment">// check input</span>
<a name="l02443"></a>02443   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l02444"></a>02444   <span class="keywordflow">if</span> (dsSlot == NULL || numSeqVar == NULL || numStepPerVar == NULL ||
<a name="l02445"></a>02445       seqVariables == NULL) {
<a name="l02446"></a>02446     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02447"></a>02447     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02448"></a>02448   }
<a name="l02449"></a>02449   
<a name="l02450"></a>02450   <span class="comment">// log message</span>
<a name="l02451"></a>02451   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting global sequence variables for dataset '%s'"</span>,
<a name="l02452"></a>02452                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#e4b7a27c95934413a822422c50d24f25">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02453"></a>02453 
<a name="l02454"></a>02454   <span class="comment">// get num seq variable</span>
<a name="l02455"></a>02455   *numSeqVar = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>;
<a name="l02456"></a>02456   
<a name="l02457"></a>02457   <span class="comment">// get sequence variables</span>
<a name="l02458"></a>02458   <span class="keywordflow">if</span> (*numSeqVar &gt; 0) {
<a name="l02459"></a>02459     *numStepPerVar = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (*numSeqVar));
<a name="l02460"></a>02460     <span class="keywordflow">if</span> (*numStepPerVar == NULL) {
<a name="l02461"></a>02461       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02462"></a>02462       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02463"></a>02463     }
<a name="l02464"></a>02464     *seqVariables = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>*) * (*numSeqVar));
<a name="l02465"></a>02465     <span class="keywordflow">if</span> (*seqVariables == NULL) {
<a name="l02466"></a>02466       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02467"></a>02467       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02468"></a>02468     }
<a name="l02469"></a>02469     <span class="keywordflow">for</span> (i = 0; i &lt; *numSeqVar; i++) {
<a name="l02470"></a>02470       (*numStepPerVar)[i] = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#787f8664d494090c9cda7705128e6305">numStepPerSeqVar</a>[i];
<a name="l02471"></a>02471       (*seqVariables)[i] = malloc(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#787f8664d494090c9cda7705128e6305">numStepPerSeqVar</a>[i]*<span class="keyword">sizeof</span>(FC_Variable));
<a name="l02472"></a>02472       if ( (*seqVariables)[i] == NULL) {
<a name="l02473"></a>02473      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02474"></a>02474      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02475"></a>02475       }
<a name="l02476"></a>02476       <span class="keywordflow">for</span> (j = 0; j &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#787f8664d494090c9cda7705128e6305">numStepPerSeqVar</a>[i]; j++) {
<a name="l02477"></a>02477      varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#b82e667d1d1462e62ef06f9808735120">seqVarIDs</a>[i][j]);
<a name="l02478"></a>02478      <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>((*seqVariables)[i][j], varSlot);
<a name="l02479"></a>02479       }
<a name="l02480"></a>02480     }
<a name="l02481"></a>02481   }
<a name="l02482"></a>02482   
<a name="l02483"></a>02483   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02484"></a>02484 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gbcaa14f2053d0cf04c9971caaa2a71da"></a><!-- doxytag: member="variable.c::fc_getGlobalVariableByName" ref="gbcaa14f2053d0cf04c9971caaa2a71da" args="(FC_Dataset dataset, char *varname, int *numVariables, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getGlobalVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVariables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get global variables from the dataset. 
<p>
<b>Description:</b> <p>
Returns array of global variables on the dataset with the specified name.<p>
<b>Modifications:</b> <ul>
<li>9/19/06 WSD created. = 9/22/06 ACG returns array </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>numVariables</em>&nbsp;</td><td>
output - num variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02779">2779</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l05441">_fc_getVarSlotFromID()</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>.<div class="fragment"><pre class="fragment"><a name="l02784"></a>02784   {
<a name="l02785"></a>02785   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02786"></a>02786   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a> *varSlot;
<a name="l02787"></a>02787   <a class="code" href="structFC__Variable.html">FC_Variable</a> variable;
<a name="l02788"></a>02788   <span class="keywordtype">int</span> i;
<a name="l02789"></a>02789   
<a name="l02790"></a>02790   <a class="code" href="structFC__Variable.html">FC_Variable</a> *lmatch = NULL;
<a name="l02791"></a>02791   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l02792"></a>02792 
<a name="l02793"></a>02793   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l02794"></a>02794   <span class="keywordflow">if</span> (numVariables)
<a name="l02795"></a>02795     *numVariables = -1;
<a name="l02796"></a>02796   <span class="keywordflow">if</span> (variables)
<a name="l02797"></a>02797     *variables = NULL;
<a name="l02798"></a>02798   
<a name="l02799"></a>02799   <span class="comment">// check input</span>
<a name="l02800"></a>02800   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l02801"></a>02801   <span class="keywordflow">if</span> (dsSlot == NULL || varname == NULL || !variables || ! numVariables){
<a name="l02802"></a>02802     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02803"></a>02803     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02804"></a>02804   }
<a name="l02805"></a>02805   
<a name="l02806"></a>02806   <span class="comment">// log message</span>
<a name="l02807"></a>02807   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variable '%s'"</span>, varname);
<a name="l02808"></a>02808 
<a name="l02809"></a>02809   numlmatch = 0;
<a name="l02810"></a>02810   maxnumlmatch = 0;
<a name="l02811"></a>02811   
<a name="l02812"></a>02812   <span class="comment">// find the existing slot</span>
<a name="l02813"></a>02813   <span class="keywordflow">for</span> (i = 0; i &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>; i++) {
<a name="l02814"></a>02814     varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#dab567a1fd38a57a1523dda45fa65444">basicVarIDs</a>[i]); 
<a name="l02815"></a>02815     if (!strcmp(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, varname)) {
<a name="l02816"></a>02816       <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>(variable, varSlot);
<a name="l02817"></a>02817 
<a name="l02818"></a>02818       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l02819"></a>02819      lmatch = (<a class="code" href="structFC__Variable.html">FC_Variable</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>));
<a name="l02820"></a>02820      <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l02821"></a>02821        <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02822"></a>02822        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02823"></a>02823      }
<a name="l02824"></a>02824      numlmatch = 1;
<a name="l02825"></a>02825      maxnumlmatch = 1;
<a name="l02826"></a>02826      lmatch[0] = variable;
<a name="l02827"></a>02827       }<span class="keywordflow">else</span>{
<a name="l02828"></a>02828      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l02829"></a>02829        FC_Variable *temp;
<a name="l02830"></a>02830        temp = (FC_Variable*)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(FC_Variable));
<a name="l02831"></a>02831        <span class="keywordflow">if</span> (temp == NULL){
<a name="l02832"></a>02832          <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02833"></a>02833          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02834"></a>02834        }
<a name="l02835"></a>02835        maxnumlmatch*=2;
<a name="l02836"></a>02836        lmatch = temp;
<a name="l02837"></a>02837      }
<a name="l02838"></a>02838      lmatch[numlmatch] = variable;
<a name="l02839"></a>02839      numlmatch++;
<a name="l02840"></a>02840       }
<a name="l02841"></a>02841     }
<a name="l02842"></a>02842   }
<a name="l02843"></a>02843 
<a name="l02844"></a>02844   *numVariables = numlmatch;
<a name="l02845"></a>02845   *variables = lmatch;
<a name="l02846"></a>02846 
<a name="l02847"></a>02847   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02848"></a>02848 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ga6cb33a79c327784d62d9b57e0381fcf"></a><!-- doxytag: member="variable.c::fc_getGlobalVariables" ref="ga6cb33a79c327784d62d9b57e0381fcf" args="(FC_Dataset dataset, int *numVar, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getGlobalVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the global variables in a dataset. 
<p>
<b>Description:</b> <p>
Returns an array of variables in the dataset. The caller is responsible for freeing the array of variable handles.<p>
<b>Modifications:</b> <ul>
<li>9/19/06 WSD created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numVar</em>&nbsp;</td><td>
output - number of variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - array of variable handles </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02362">2362</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="variable_8c-source.html#l05441">_fc_getVarSlotFromID()</a>, <a class="el" href="datasetP_8h-source.html#l00097">_FC_DsSlot::basicVarIDs</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>.
<p>
Referenced by <a class="el" href="dataset_8c-source.html#l00659">fc_deleteDataset()</a>, <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, and <a class="el" href="fcdump_8c-source.html#l00194">main()</a>.<div class="fragment"><pre class="fragment"><a name="l02366"></a>02366   {
<a name="l02367"></a>02367   <span class="keywordtype">int</span> i;
<a name="l02368"></a>02368   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02369"></a>02369   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l02370"></a>02370   
<a name="l02371"></a>02371   <span class="comment">// set up defaults</span>
<a name="l02372"></a>02372   <span class="keywordflow">if</span> (numVar != NULL)
<a name="l02373"></a>02373     *numVar = -1;
<a name="l02374"></a>02374   <span class="keywordflow">if</span> (variables != NULL)
<a name="l02375"></a>02375     *variables = NULL;
<a name="l02376"></a>02376   
<a name="l02377"></a>02377   <span class="comment">// check input</span>
<a name="l02378"></a>02378   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l02379"></a>02379   <span class="keywordflow">if</span> (dsSlot == NULL || numVar == NULL || variables == NULL) {
<a name="l02380"></a>02380     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02381"></a>02381     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02382"></a>02382   }
<a name="l02383"></a>02383   
<a name="l02384"></a>02384   <span class="comment">// log message</span>
<a name="l02385"></a>02385   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting global variables for dataset '%s'"</span>,
<a name="l02386"></a>02386                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#e4b7a27c95934413a822422c50d24f25">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02387"></a>02387 
<a name="l02388"></a>02388   <span class="comment">// get num variable</span>
<a name="l02389"></a>02389   *numVar = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>;
<a name="l02390"></a>02390   
<a name="l02391"></a>02391   <span class="comment">// get variables</span>
<a name="l02392"></a>02392   <span class="keywordflow">if</span> (dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a> &gt; 0) {
<a name="l02393"></a>02393     *variables = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>) * dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>);
<a name="l02394"></a>02394     <span class="keywordflow">if</span> (*variables == NULL) {
<a name="l02395"></a>02395       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02396"></a>02396       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02397"></a>02397     }
<a name="l02398"></a>02398     <span class="keywordflow">for</span> (i = 0; i &lt; dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>; i++) {
<a name="l02399"></a>02399       varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#dab567a1fd38a57a1523dda45fa65444">basicVarIDs</a>[i]);
<a name="l02400"></a>02400       <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>((*variables)[i], varSlot);
<a name="l02401"></a>02401     }
<a name="l02402"></a>02402   }
<a name="l02403"></a>02403   
<a name="l02404"></a>02404   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02405"></a>02405 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g18aa101c04f3d2189a1f1e4d68c9dc2a"></a><!-- doxytag: member="variable.c::fc_getMeshFromVariable" ref="g18aa101c04f3d2189a1f1e4d68c9dc2a" args="(FC_Variable variable, FC_Mesh *mesh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getMeshFromVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a> *&nbsp;</td>
          <td class="paramname"> <em>mesh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the parent mesh of the variable. 
<p>
<b>Description:</b> <p>
If the variable is a global variable, this will return FC_NULL_MESH but will not error.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/16/03 RM, added setting default value for mesh = FC_NULL_MESH and checking for NULL input/output </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
output - mesh handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04268">4268</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00773">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="series_8c-source.html#l00122">_fc_makeNewSeqVar()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="variable_8c-source.html#l01665">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01384">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l01037">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="sierra_8c-source.html#l01209">fc_evalPrestoSpotWeld()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04764">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l02229">fc_mergeComponentSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, and <a class="el" href="gaplines_8c-source.html#l00377">printStats()</a>.<div class="fragment"><pre class="fragment"><a name="l04271"></a>04271   {
<a name="l04272"></a>04272   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04273"></a>04273   
<a name="l04274"></a>04274   <span class="comment">// set default value</span>
<a name="l04275"></a>04275   <span class="keywordflow">if</span> (mesh != NULL)
<a name="l04276"></a>04276     *mesh = <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>;
<a name="l04277"></a>04277   
<a name="l04278"></a>04278   <span class="comment">// check input</span>
<a name="l04279"></a>04279   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04280"></a>04280   <span class="keywordflow">if</span> (varSlot == NULL || mesh == NULL) {
<a name="l04281"></a>04281     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04282"></a>04282     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04283"></a>04283   }
<a name="l04284"></a>04284   
<a name="l04285"></a>04285   <span class="comment">// log message</span>
<a name="l04286"></a>04286   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting mesh from variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04287"></a>04287   
<a name="l04288"></a>04288   <span class="comment">// return requested value</span>
<a name="l04289"></a>04289   *mesh = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>;
<a name="l04290"></a>04290   
<a name="l04291"></a>04291   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04292"></a>04292 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ga0b13a16d42becc4b214f54d3b1d45fe"></a><!-- doxytag: member="variable.c::fc_getNumGlobalSeqVariable" ref="ga0b13a16d42becc4b214f54d3b1d45fe" args="(FC_Dataset dataset, int *numSeqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getNumGlobalSeqVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of global sequence variables in a dataset. 
<p>
<b>Modifications:</b> <ul>
<li>9/21/2006 WSD created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02672">2672</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>.
<p>
Referenced by <a class="el" href="dataset_8c-source.html#l00831">fc_printDataset()</a>.<div class="fragment"><pre class="fragment"><a name="l02675"></a>02675   {
<a name="l02676"></a>02676   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02677"></a>02677   
<a name="l02678"></a>02678   <span class="comment">// set up defaults</span>
<a name="l02679"></a>02679   <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l02680"></a>02680     *numSeqVar = -1;
<a name="l02681"></a>02681   
<a name="l02682"></a>02682   <span class="comment">// check input</span>
<a name="l02683"></a>02683   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l02684"></a>02684   <span class="keywordflow">if</span> (dsSlot == NULL || numSeqVar == NULL) {
<a name="l02685"></a>02685     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02686"></a>02686     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02687"></a>02687   }
<a name="l02688"></a>02688   
<a name="l02689"></a>02689   <span class="comment">// log message</span>
<a name="l02690"></a>02690   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variables for dataset '%s'"</span>,
<a name="l02691"></a>02691                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#e4b7a27c95934413a822422c50d24f25">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02692"></a>02692 
<a name="l02693"></a>02693   <span class="comment">// get num seq variable</span>
<a name="l02694"></a>02694   *numSeqVar = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>;
<a name="l02695"></a>02695     
<a name="l02696"></a>02696   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02697"></a>02697 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g5d825add6a7ebeb9a0b6278eea1fd0c5"></a><!-- doxytag: member="variable.c::fc_getNumGlobalVariable" ref="g5d825add6a7ebeb9a0b6278eea1fd0c5" args="(FC_Dataset dataset, int *numVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getNumGlobalVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Dataset.html">FC_Dataset</a>&nbsp;</td>
          <td class="paramname"> <em>dataset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of global variables in a dataset. 
<p>
<b>Modifications:</b> <ul>
<li>9/19/06 WSD created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>dataset</em>&nbsp;</td><td>
input - dataset </td></tr>
<tr><td valign="top"><em>numVar</em>&nbsp;</td><td>
output - number of variables </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02638">2638</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="datasetP_8h-source.html#l00096">_FC_DsSlot::numBasicVar</a>.
<p>
Referenced by <a class="el" href="dataset_8c-source.html#l00831">fc_printDataset()</a>.<div class="fragment"><pre class="fragment"><a name="l02641"></a>02641   {
<a name="l02642"></a>02642   <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a>* dsSlot;
<a name="l02643"></a>02643   
<a name="l02644"></a>02644   <span class="comment">// set up defaults</span>
<a name="l02645"></a>02645   <span class="keywordflow">if</span> (numVar != NULL)
<a name="l02646"></a>02646     *numVar = -1;
<a name="l02647"></a>02647   
<a name="l02648"></a>02648   <span class="comment">// check input</span>
<a name="l02649"></a>02649   dsSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(dataset);
<a name="l02650"></a>02650   <span class="keywordflow">if</span> (dsSlot == NULL || numVar == NULL) {
<a name="l02651"></a>02651     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02652"></a>02652     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02653"></a>02653   }
<a name="l02654"></a>02654   
<a name="l02655"></a>02655   <span class="comment">// log message</span>
<a name="l02656"></a>02656   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of global variables for dataset '%s'"</span>,
<a name="l02657"></a>02657                       dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#e4b7a27c95934413a822422c50d24f25">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02658"></a>02658 
<a name="l02659"></a>02659   <span class="comment">// get num variable</span>
<a name="l02660"></a>02660   *numVar = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#82ab6aa42c1069fea0d9aeb1eb192729">numBasicVar</a>;
<a name="l02661"></a>02661   
<a name="l02662"></a>02662   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02663"></a>02663 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gb1d118fd5e0b7b8345b3c13447a1930d"></a><!-- doxytag: member="variable.c::fc_getNumSeqVariable" ref="gb1d118fd5e0b7b8345b3c13447a1930d" args="(FC_Mesh mesh, int *numSeqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getNumSeqVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of sequence variables in a mesh. 
<p>
<b>Modifications:</b> <ul>
<li>9/28/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02740">2740</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00186">_FC_MeshSlot::numSeqVar</a>.
<p>
Referenced by <a class="el" href="mesh_8c-source.html#l03222">fc_printMesh()</a>.<div class="fragment"><pre class="fragment"><a name="l02743"></a>02743   {
<a name="l02744"></a>02744   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l02745"></a>02745   
<a name="l02746"></a>02746   <span class="comment">// set up defaults</span>
<a name="l02747"></a>02747   <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l02748"></a>02748     *numSeqVar = -1;
<a name="l02749"></a>02749   
<a name="l02750"></a>02750   <span class="comment">// check input</span>
<a name="l02751"></a>02751   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l02752"></a>02752   <span class="keywordflow">if</span> (meshSlot == NULL || numSeqVar == NULL) {
<a name="l02753"></a>02753     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02754"></a>02754     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02755"></a>02755   }
<a name="l02756"></a>02756   
<a name="l02757"></a>02757   <span class="comment">// log message</span>
<a name="l02758"></a>02758   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variables for mesh '%s'"</span>,
<a name="l02759"></a>02759                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02760"></a>02760 
<a name="l02761"></a>02761   <span class="comment">// get num seq variable</span>
<a name="l02762"></a>02762   *numSeqVar = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>;
<a name="l02763"></a>02763     
<a name="l02764"></a>02764   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02765"></a>02765 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g4739277f47b48de079cda9979206a515"></a><!-- doxytag: member="variable.c::fc_getNumVariable" ref="g4739277f47b48de079cda9979206a515" args="(FC_Mesh mesh, int *numVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getNumVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of variables in a mesh. 
<p>
<b>Modifications:</b> <ul>
<li>9/28/04 WSK created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numVar</em>&nbsp;</td><td>
output - number of variables </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02706">2706</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::numBasicVar</a>.
<p>
Referenced by <a class="el" href="mesh_8c-source.html#l03222">fc_printMesh()</a>.<div class="fragment"><pre class="fragment"><a name="l02709"></a>02709   {
<a name="l02710"></a>02710   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l02711"></a>02711   
<a name="l02712"></a>02712   <span class="comment">// set up defaults</span>
<a name="l02713"></a>02713   <span class="keywordflow">if</span> (numVar != NULL)
<a name="l02714"></a>02714     *numVar = -1;
<a name="l02715"></a>02715   
<a name="l02716"></a>02716   <span class="comment">// check input</span>
<a name="l02717"></a>02717   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l02718"></a>02718   <span class="keywordflow">if</span> (meshSlot == NULL || numVar == NULL) {
<a name="l02719"></a>02719     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02720"></a>02720     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02721"></a>02721   }
<a name="l02722"></a>02722   
<a name="l02723"></a>02723   <span class="comment">// log message</span>
<a name="l02724"></a>02724   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting number of variables for mesh '%s'"</span>,
<a name="l02725"></a>02725                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02726"></a>02726 
<a name="l02727"></a>02727   <span class="comment">// get num variable</span>
<a name="l02728"></a>02728   *numVar = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>;
<a name="l02729"></a>02729   
<a name="l02730"></a>02730   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02731"></a>02731 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g81cdc76a742e4bbf85fcbf5deba8c0e7"></a><!-- doxytag: member="variable.c::fc_getOrGenerateUniqueSeqVariableByName" ref="g81cdc76a742e4bbf85fcbf5deba8c0e7" args="(FC_Mesh mesh, char *varname, int *numStep, FC_Variable **variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getOrGenerateUniqueSeqVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a unique seq var if it exists, otherwise generate it from components if possible. 
<p>
<b>Description:</b> <p>
Gets a unique seq var if it exists, otherwise generate it from components if possible.<p>
Warning: If the unique seq var is generated from components, the original components are deleted.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000107">Todo:</a></b></dt><dd><ul>
<li>should send back a flag if it was generated or not (that may make a difference if you go to release it)</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>10/15/2007 ACG created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
out - num step </td></tr>
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03571">3571</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l03938">fc_deleteSeqVariable()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l03295">fc_getSeqVariableByName()</a>, <a class="el" href="variable_8c-source.html#l03418">fc_getSeqVariableComponentsByName()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l02229">fc_mergeComponentSeqVariables()</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00129">fc_printfWarningMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="varNormalize_8c-source.html#l00116">createStressOrPressureVar()</a>, and <a class="el" href="analyzeSpotWelds_8c-source.html#l00135">main()</a>.<div class="fragment"><pre class="fragment"><a name="l03576"></a>03576   {
<a name="l03577"></a>03577   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l03578"></a>03578   <a class="code" href="structFC__Variable.html">FC_Variable</a>** returnVars;
<a name="l03579"></a>03579   <span class="keywordtype">int</span> numReturnVars, *numReturnSteps;
<a name="l03580"></a>03580   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mtype;
<a name="l03581"></a>03581   <a class="code" href="structFC__Variable.html">FC_Variable</a> *generatedVar;
<a name="l03582"></a>03582 
<a name="l03583"></a>03583   <span class="keywordtype">int</span> i;
<a name="l03584"></a>03584   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l03585"></a>03585   
<a name="l03586"></a>03586   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l03587"></a>03587   <span class="keywordflow">if</span> (variable)
<a name="l03588"></a>03588     *variable = NULL;
<a name="l03589"></a>03589   <span class="keywordflow">if</span> (numStep)
<a name="l03590"></a>03590     *numStep = -1;
<a name="l03591"></a>03591   
<a name="l03592"></a>03592   <span class="comment">// check input</span>
<a name="l03593"></a>03593   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l03594"></a>03594   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variable || !numStep){
<a name="l03595"></a>03595     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03596"></a>03596     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03597"></a>03597   }
<a name="l03598"></a>03598   
<a name="l03599"></a>03599   <span class="comment">// log message</span>
<a name="l03600"></a>03600   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting unique seq variable by name '%s'"</span>, varname);
<a name="l03601"></a>03601   rc = <a class="code" href="group__Variable.html#g81f06442d2acc47bf9cf8ebbd94be75d">fc_getSeqVariableByName</a>(mesh, varname, &amp;numReturnVars,
<a name="l03602"></a>03602                       &amp;numReturnSteps, &amp;returnVars);
<a name="l03603"></a>03603   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l03604"></a>03604     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"can't get seq variable by name"</span>);
<a name="l03605"></a>03605     <span class="keywordflow">return</span> rc;
<a name="l03606"></a>03606   }    
<a name="l03607"></a>03607 
<a name="l03608"></a>03608   <span class="keywordflow">if</span> (numReturnVars &gt; 1){
<a name="l03609"></a>03609     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"More than 1 seq variable named '%s'"</span>,varname);
<a name="l03610"></a>03610     free(returnVars);
<a name="l03611"></a>03611     free(numReturnSteps);
<a name="l03612"></a>03612     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03613"></a>03613   }
<a name="l03614"></a>03614 
<a name="l03615"></a>03615   <span class="keywordflow">if</span> (numReturnVars == 1){
<a name="l03616"></a>03616     *variable = returnVars[0];
<a name="l03617"></a>03617     *numStep = numReturnSteps[0];
<a name="l03618"></a>03618     free(numReturnSteps);
<a name="l03619"></a>03619     free(returnVars);
<a name="l03620"></a>03620     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03621"></a>03621   }
<a name="l03622"></a>03622 
<a name="l03623"></a>03623   <span class="comment">//try to make it from components</span>
<a name="l03624"></a>03624   rc = <a class="code" href="group__Variable.html#ge81588760e80295df3b9cf8b69006647">fc_getSeqVariableComponentsByName</a>(mesh, varname, &amp;mtype,
<a name="l03625"></a>03625                           &amp;numReturnVars, &amp;numReturnSteps,
<a name="l03626"></a>03626                           &amp;returnVars);
<a name="l03627"></a>03627   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l03628"></a>03628     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"can't get seq variable components by name '%s'"</span>,varname);
<a name="l03629"></a>03629     <span class="keywordflow">return</span> rc;
<a name="l03630"></a>03630   }
<a name="l03631"></a>03631 
<a name="l03632"></a>03632   <span class="keywordflow">if</span> (numReturnVars == 0){
<a name="l03633"></a>03633     <span class="comment">//no components</span>
<a name="l03634"></a>03634     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03635"></a>03635   }
<a name="l03636"></a>03636 
<a name="l03637"></a>03637   rc = <a class="code" href="group__Variable.html#g09cb767856e717bf0b5273b0cdc22aac">fc_mergeComponentSeqVariables</a>(numReturnVars,
<a name="l03638"></a>03638                          numReturnSteps[0],
<a name="l03639"></a>03639                          returnVars, varname,
<a name="l03640"></a>03640                          mtype, &amp;generatedVar);
<a name="l03641"></a>03641   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l03642"></a>03642     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"can't merge component variables"</span>);
<a name="l03643"></a>03643     free(numReturnSteps);
<a name="l03644"></a>03644     free(returnVars);
<a name="l03645"></a>03645     <span class="keywordflow">return</span> rc;
<a name="l03646"></a>03646   }
<a name="l03647"></a>03647 
<a name="l03648"></a>03648   <span class="comment">//now kill off the component vars</span>
<a name="l03649"></a>03649   <span class="keywordflow">for</span> (i = 0; i &lt; numReturnVars; i++){
<a name="l03650"></a>03650     rc = <a class="code" href="group__Variable.html#g57341fab4863efe2c35476aee509f20d">fc_deleteSeqVariable</a>(numReturnSteps[i],returnVars[i]);
<a name="l03651"></a>03651     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l03652"></a>03652       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"cannot delete component variable"</span>);
<a name="l03653"></a>03653       <span class="keywordflow">return</span> rc;
<a name="l03654"></a>03654     }
<a name="l03655"></a>03655     free(returnVars[i]);
<a name="l03656"></a>03656   }
<a name="l03657"></a>03657   free(returnVars);
<a name="l03658"></a>03658 
<a name="l03659"></a>03659   *variable = generatedVar;
<a name="l03660"></a>03660   *numStep = numReturnSteps[0];
<a name="l03661"></a>03661   free(numReturnSteps);
<a name="l03662"></a>03662   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03663"></a>03663 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g54fd029154cb23c04657c0db0e2085ee"></a><!-- doxytag: member="variable.c::fc_getOrGenerateUniqueVariableByName" ref="g54fd029154cb23c04657c0db0e2085ee" args="(FC_Mesh mesh, char *varname, FC_Variable *variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getOrGenerateUniqueVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a unique var if it exists, otherwise generate it from components if possible. 
<p>
<b>Description:</b> <p>
Gets a unique var if it exists, otherwise generate it from components if possible.<p>
Warning: If the unique var is generated from components, the original components are deleted.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000105">Todo:</a></b></dt><dd><ul>
<li>should send back a flag if it was generated or not (that may make a difference if you go to release it)</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>10/15/2007 ACG created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
output - variable handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03189">3189</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l03856">fc_deleteVariable()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l02982">fc_getVariableByName()</a>, <a class="el" href="variable_8c-source.html#l03072">fc_getVariableComponentsByName()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00129">fc_printfWarningMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="edgeStats_8c-source.html#l00105">main()</a>.<div class="fragment"><pre class="fragment"><a name="l03193"></a>03193   {
<a name="l03194"></a>03194   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l03195"></a>03195   <a class="code" href="structFC__Variable.html">FC_Variable</a>* returnVars;
<a name="l03196"></a>03196   <span class="keywordtype">int</span> numReturnVars;
<a name="l03197"></a>03197   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mtype;
<a name="l03198"></a>03198   <a class="code" href="structFC__Variable.html">FC_Variable</a> generatedVar;
<a name="l03199"></a>03199 
<a name="l03200"></a>03200   <span class="keywordtype">int</span> i;
<a name="l03201"></a>03201   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l03202"></a>03202   
<a name="l03203"></a>03203   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l03204"></a>03204   <span class="keywordflow">if</span> (variable)
<a name="l03205"></a>03205     *variable = <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>;
<a name="l03206"></a>03206   
<a name="l03207"></a>03207   <span class="comment">// check input</span>
<a name="l03208"></a>03208   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l03209"></a>03209   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variable){
<a name="l03210"></a>03210     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03211"></a>03211     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03212"></a>03212   }
<a name="l03213"></a>03213   
<a name="l03214"></a>03214   <span class="comment">// log message</span>
<a name="l03215"></a>03215   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting unique variable by name '%s'"</span>, varname);
<a name="l03216"></a>03216   rc = <a class="code" href="group__Variable.html#g53d2967ed4e38d57d0852ab5e4cfef80">fc_getVariableByName</a>(mesh, varname, &amp;numReturnVars,
<a name="l03217"></a>03217                    &amp;returnVars);
<a name="l03218"></a>03218   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l03219"></a>03219     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"can't get variable by name"</span>);
<a name="l03220"></a>03220     <span class="keywordflow">return</span> rc;
<a name="l03221"></a>03221   }    
<a name="l03222"></a>03222 
<a name="l03223"></a>03223   <span class="keywordflow">if</span> (numReturnVars &gt; 1){
<a name="l03224"></a>03224     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"More than 1 variable named '%s'"</span>,varname);
<a name="l03225"></a>03225     free(returnVars);
<a name="l03226"></a>03226     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03227"></a>03227   }
<a name="l03228"></a>03228 
<a name="l03229"></a>03229   <span class="keywordflow">if</span> (numReturnVars == 1){
<a name="l03230"></a>03230     *variable = returnVars[0];
<a name="l03231"></a>03231     free(returnVars);
<a name="l03232"></a>03232     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03233"></a>03233   }
<a name="l03234"></a>03234 
<a name="l03235"></a>03235   <span class="comment">//try to make it from components</span>
<a name="l03236"></a>03236   rc = <a class="code" href="group__Variable.html#g9b7959f3f6f14b4fc7ca976c420bfaff">fc_getVariableComponentsByName</a>(mesh, varname, &amp;mtype,
<a name="l03237"></a>03237                         &amp;numReturnVars, &amp;returnVars);
<a name="l03238"></a>03238   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l03239"></a>03239     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"can't get variable components by name '%s'"</span>,varname);
<a name="l03240"></a>03240     <span class="keywordflow">return</span> rc;
<a name="l03241"></a>03241   }
<a name="l03242"></a>03242 
<a name="l03243"></a>03243   <span class="keywordflow">if</span> (numReturnVars == 0){
<a name="l03244"></a>03244     <span class="comment">//no components</span>
<a name="l03245"></a>03245     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03246"></a>03246   }
<a name="l03247"></a>03247 
<a name="l03248"></a>03248 
<a name="l03249"></a>03249   rc = <a class="code" href="group__Variable.html#g75cee40dcf0d9c58ef73293e68ddac12">fc_mergeComponentVariables</a>(numReturnVars,
<a name="l03250"></a>03250                       returnVars, varname,
<a name="l03251"></a>03251                       mtype, &amp;generatedVar);
<a name="l03252"></a>03252   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l03253"></a>03253     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"can't merge component variables"</span>);
<a name="l03254"></a>03254     free(returnVars);
<a name="l03255"></a>03255     <span class="keywordflow">return</span> rc;
<a name="l03256"></a>03256   }
<a name="l03257"></a>03257 
<a name="l03258"></a>03258   <span class="comment">//now kill off the component vars</span>
<a name="l03259"></a>03259   <span class="keywordflow">for</span> (i = 0; i &lt; numReturnVars; i++){
<a name="l03260"></a>03260     rc = <a class="code" href="group__Variable.html#g2f48fcbd551131488dd5757c27364656">fc_deleteVariable</a>(returnVars[i]);
<a name="l03261"></a>03261     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l03262"></a>03262       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"cannot delete component variable"</span>);
<a name="l03263"></a>03263       <span class="keywordflow">return</span> rc;
<a name="l03264"></a>03264     }
<a name="l03265"></a>03265   }
<a name="l03266"></a>03266   free(returnVars);
<a name="l03267"></a>03267 
<a name="l03268"></a>03268 
<a name="l03269"></a>03269   *variable = generatedVar;
<a name="l03270"></a>03270   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03271"></a>03271 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gea428de5a2584716f6e2bc77cd339544"></a><!-- doxytag: member="variable.c::fc_getSequenceFromSeqVariable" ref="gea428de5a2584716f6e2bc77cd339544" args="(int numStep, FC_Variable *seqVar, FC_Sequence *sequence)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getSequenceFromSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Sequence.html">FC_Sequence</a> *&nbsp;</td>
          <td class="paramname"> <em>sequence</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the parent sequence of a sequence variable. 
<p>
<b>Modifications:</b> <ul>
<li>09/23/04 WSK, created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in sequence variable </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - sequence variable (array of vars) </td></tr>
<tr><td valign="top"><em>sequence</em>&nbsp;</td><td>
output - sequence handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04193">4193</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="base_8c-source.html#l00768">FC_NULL_SEQUENCE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>.
<p>
Referenced by <a class="el" href="series_8c-source.html#l00122">_fc_makeNewSeqVar()</a>, <a class="el" href="varNormalize_8c-source.html#l00116">createStressOrPressureVar()</a>, <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="varmath_8c-source.html#l01394">fc_constOperatorSeqVar()</a>, <a class="el" href="variable_8c-source.html#l01384">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l01986">fc_createComponentSeqVariables()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04764">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l02229">fc_mergeComponentSeqVariables()</a>, <a class="el" href="varmath_8c-source.html#l00655">fc_operatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l00979">fc_seqConstOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02640">fc_seqVarBinaryFunctionConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02414">fc_seqVarBinaryFunctionSeqConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02546">fc_seqVarBinaryFunctionSeqVarConst()</a>, <a class="el" href="varmath_8c-source.html#l02284">fc_seqVarBinaryFunctionSeqVarSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l02179">fc_seqVarBinaryFunctionSeqVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01296">fc_seqVarOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00858">fc_seqVarOperatorSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l00747">fc_seqVarOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l02094">fc_seqVarUnaryFunction()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, and <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.<div class="fragment"><pre class="fragment"><a name="l04197"></a>04197   {
<a name="l04198"></a>04198   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04199"></a>04199   
<a name="l04200"></a>04200   <span class="comment">// set default value</span>
<a name="l04201"></a>04201   <span class="keywordflow">if</span> (sequence != NULL)
<a name="l04202"></a>04202     *sequence = <a class="code" href="group__Handles.html#g1be0c5002a6a1633ea8a22ed8f0baaa8">FC_NULL_SEQUENCE</a>;
<a name="l04203"></a>04203   
<a name="l04204"></a>04204   <span class="comment">// check input</span>
<a name="l04205"></a>04205   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(numStep, seqVar) || sequence == NULL) {
<a name="l04206"></a>04206     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04207"></a>04207     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04208"></a>04208   }
<a name="l04209"></a>04209   
<a name="l04210"></a>04210   <span class="comment">// log message</span>
<a name="l04211"></a>04211   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(seqVar[0]);
<a name="l04212"></a>04212   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence from seq variable '%s'"</span>, 
<a name="l04213"></a>04213                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04214"></a>04214   
<a name="l04215"></a>04215   <span class="comment">// return requested value</span>
<a name="l04216"></a>04216   *sequence = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#c4af91e9c0cb1fa702ada198d5bd3c90">sequence</a>;
<a name="l04217"></a>04217   
<a name="l04218"></a>04218   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04219"></a>04219 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g81f06442d2acc47bf9cf8ebbd94be75d"></a><!-- doxytag: member="variable.c::fc_getSeqVariableByName" ref="g81f06442d2acc47bf9cf8ebbd94be75d" args="(FC_Mesh mesh, char *varName, int *numSeqVar, int **numStepPerVar, FC_Variable ***seqVariables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getSeqVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepPerVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>seqVariables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get sequence variables of a given name from the mesh. 
<p>
<b>Description:</b> <p>
Returns an array of seq variables (array of arrays of variables) as well as an array of the number of steps per sequence variable. The use is responsible for freeing all returned arrays. (SeqVars is a 2D array, so to free: for (i = 0; i &lt; numSeq var) { free(seqVars[i])); } )<p>
<b>Modifications:</b> <ul>
<li>2003-APR-21 W Koegler Created.</li><li>12/15/03 RM, added checking if seq variable with the specified name was found</li><li>10/15/04 WSK, changed to not return sequence handles</li><li>09/25/06 ACG returns array</li><li>10/14/07 ACG removed hack </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
input - seq variable name </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
<tr><td valign="top"><em>numStepPerVar</em>&nbsp;</td><td>
output - array with number of steps for each sequence variable </td></tr>
<tr><td valign="top"><em>seqVariables</em>&nbsp;</td><td>
output - array of sequence variables (each sequence variable is array of numStep variables </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03295">3295</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05441">_fc_getVarSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00186">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numStepPerSeqVar</a>, and <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::seqVarIDs</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l03571">fc_getOrGenerateUniqueSeqVariableByName()</a>, <a class="el" href="variable_8c-source.html#l03418">fc_getSeqVariableComponentsByName()</a>, and <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.<div class="fragment"><pre class="fragment"><a name="l03304"></a>03304   {
<a name="l03305"></a>03305   <span class="keywordtype">int</span> i, j;
<a name="l03306"></a>03306   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a> *meshSlot;
<a name="l03307"></a>03307   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a> *varSlot;
<a name="l03308"></a>03308 
<a name="l03309"></a>03309   <span class="keywordtype">int</span> numStep;
<a name="l03310"></a>03310   <a class="code" href="structFC__Variable.html">FC_Variable</a> *seqvar;
<a name="l03311"></a>03311   <a class="code" href="structFC__Variable.html">FC_Variable</a> **lmatch = NULL;
<a name="l03312"></a>03312   <span class="keywordtype">int</span> *lstepmatch = NULL;
<a name="l03313"></a>03313   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l03314"></a>03314   
<a name="l03315"></a>03315   <span class="comment">// default return values</span>
<a name="l03316"></a>03316  <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l03317"></a>03317     *numSeqVar = -1;
<a name="l03318"></a>03318   <span class="keywordflow">if</span> (numStepPerVar != NULL)
<a name="l03319"></a>03319     *numStepPerVar = NULL;
<a name="l03320"></a>03320   <span class="keywordflow">if</span> (seqVariables != NULL)
<a name="l03321"></a>03321     *seqVariables = NULL;
<a name="l03322"></a>03322 
<a name="l03323"></a>03323     <span class="comment">// check input</span>
<a name="l03324"></a>03324   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l03325"></a>03325   <span class="keywordflow">if</span> (meshSlot == NULL || !varName || numSeqVar == NULL || 
<a name="l03326"></a>03326       numStepPerVar == NULL || seqVariables == NULL) {
<a name="l03327"></a>03327     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03328"></a>03328     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03329"></a>03329   }
<a name="l03330"></a>03330   
<a name="l03331"></a>03331   <span class="comment">// log message</span>
<a name="l03332"></a>03332   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variable '%s'"</span>, varName);
<a name="l03333"></a>03333 
<a name="l03334"></a>03334   numlmatch = 0;
<a name="l03335"></a>03335   maxnumlmatch = 0;
<a name="l03336"></a>03336 
<a name="l03337"></a>03337   
<a name="l03338"></a>03338   <span class="comment">// look for varName in this mesh's seq var list</span>
<a name="l03339"></a>03339   <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>; i++) {
<a name="l03340"></a>03340     varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#4875049ef97cdce27533cbcdb6a5d145">seqVarIDs</a>[i][0]);
<a name="l03341"></a>03341     if (!strcmp(varName, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>)) {
<a name="l03342"></a>03342       numStep = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1d17a5b984a2780fc0a7b5b88de791e2">numStepPerSeqVar</a>[i];
<a name="l03343"></a>03343       seqvar = malloc((numStep)*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>));
<a name="l03344"></a>03344       <span class="keywordflow">if</span> (seqvar == NULL) {
<a name="l03345"></a>03345      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l03346"></a>03346      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l03347"></a>03347       }
<a name="l03348"></a>03348       <span class="keywordflow">for</span> (j = 0; j &lt; numStep; j++) {
<a name="l03349"></a>03349      varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#4875049ef97cdce27533cbcdb6a5d145">seqVarIDs</a>[i][j]);
<a name="l03350"></a>03350      <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>(seqvar[j], varSlot);
<a name="l03351"></a>03351       }
<a name="l03352"></a>03352 
<a name="l03353"></a>03353       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l03354"></a>03354      lmatch = (FC_Variable**)malloc(<span class="keyword">sizeof</span>(FC_Variable*));
<a name="l03355"></a>03355      lstepmatch = (<span class="keywordtype">int</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l03356"></a>03356      <span class="keywordflow">if</span> (lmatch == NULL || lstepmatch == NULL){
<a name="l03357"></a>03357        <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l03358"></a>03358        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l03359"></a>03359      }
<a name="l03360"></a>03360      numlmatch = 1;
<a name="l03361"></a>03361      maxnumlmatch = 1;
<a name="l03362"></a>03362      lmatch[0] = seqvar;
<a name="l03363"></a>03363      lstepmatch[0] = numStep;
<a name="l03364"></a>03364       }<span class="keywordflow">else</span>{
<a name="l03365"></a>03365      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l03366"></a>03366        FC_Variable **temp;
<a name="l03367"></a>03367        <span class="keywordtype">int</span> *tempstep;
<a name="l03368"></a>03368        temp = (FC_Variable**)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(FC_Variable*));
<a name="l03369"></a>03369        tempstep = (<span class="keywordtype">int</span>*)realloc(lstepmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(FC_Variable*));
<a name="l03370"></a>03370        <span class="keywordflow">if</span> (temp == NULL || tempstep == NULL){
<a name="l03371"></a>03371          <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l03372"></a>03372          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l03373"></a>03373        }
<a name="l03374"></a>03374        maxnumlmatch*=2;
<a name="l03375"></a>03375        lmatch = temp;
<a name="l03376"></a>03376        lstepmatch = tempstep;
<a name="l03377"></a>03377      }
<a name="l03378"></a>03378      lmatch[numlmatch] = seqvar;
<a name="l03379"></a>03379      lstepmatch[numlmatch] = numStep;
<a name="l03380"></a>03380      numlmatch++;
<a name="l03381"></a>03381       }
<a name="l03382"></a>03382     }
<a name="l03383"></a>03383   }
<a name="l03384"></a>03384 
<a name="l03385"></a>03385   <span class="keywordflow">if</span> (numlmatch){
<a name="l03386"></a>03386     *numSeqVar = numlmatch;
<a name="l03387"></a>03387     *numStepPerVar = lstepmatch;
<a name="l03388"></a>03388     *seqVariables = lmatch;
<a name="l03389"></a>03389     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03390"></a>03390   }
<a name="l03391"></a>03391 
<a name="l03392"></a>03392   <span class="comment">//no matches</span>
<a name="l03393"></a>03393   *numSeqVar = 0;
<a name="l03394"></a>03394   *numStepPerVar = NULL;
<a name="l03395"></a>03395   *seqVariables = NULL;
<a name="l03396"></a>03396   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03397"></a>03397 
<a name="l03398"></a>03398 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ge81588760e80295df3b9cf8b69006647"></a><!-- doxytag: member="variable.c::fc_getSeqVariableComponentsByName" ref="ge81588760e80295df3b9cf8b69006647" args="(FC_Mesh mesh, char *varname, FC_MathType *type, int *numVariables, int **numStepsPerVariable, FC_Variable ***variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getSeqVariableComponentsByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVariables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepsPerVariable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get seq variables that can be components from the mesh. 
<p>
<b>Description:</b> <p>
Returns seq variables on the mesh with the specified base name and _x,_y,_z extensions. This is meant to be used to build an array of components split with the exodus component naming convention.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000106">Todo:</a></b></dt><dd><ul>
<li>make this work with _c0, _c1 etc extensions</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>10/12/2007 ACG created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>type</em>&nbsp;</td><td>
output - math type </td></tr>
<tr><td valign="top"><em>numVariables</em>&nbsp;</td><td>
output - num matching variables </td></tr>
<tr><td valign="top"><em>numStepsPerVariable</em>&nbsp;</td><td>
output - numSteps per variable </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - variable handles </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03418">3418</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l03295">fc_getSeqVariableByName()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b367e06c1812f7a0127035e27d14fd597d">FC_MT_VECTOR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l03571">fc_getOrGenerateUniqueSeqVariableByName()</a>.<div class="fragment"><pre class="fragment"><a name="l03425"></a>03425   {  
<a name="l03426"></a>03426   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l03427"></a>03427   <a class="code" href="structFC__Variable.html">FC_Variable</a>** returnVars;
<a name="l03428"></a>03428   <span class="keywordtype">int</span> numReturnVars;
<a name="l03429"></a>03429   <span class="keywordtype">int</span> *nSteps;
<a name="l03430"></a>03430   <span class="keywordtype">char</span>* compname;
<a name="l03431"></a>03431 
<a name="l03432"></a>03432   <span class="keywordtype">char</span> vector_endings[3][2] = { <span class="stringliteral">"x"</span>, <span class="stringliteral">"y"</span>, <span class="stringliteral">"z"</span> };
<a name="l03433"></a>03433   <span class="keywordtype">int</span> found[3];
<a name="l03434"></a>03434   <span class="keywordtype">int</span> i, j;
<a name="l03435"></a>03435   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l03436"></a>03436   
<a name="l03437"></a>03437   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l03438"></a>03438   <span class="keywordflow">if</span> (type)
<a name="l03439"></a>03439     *type = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>;
<a name="l03440"></a>03440   <span class="keywordflow">if</span> (numVariables)
<a name="l03441"></a>03441     *numVariables = -1;
<a name="l03442"></a>03442   <span class="keywordflow">if</span> (variables)
<a name="l03443"></a>03443     *variables = NULL;
<a name="l03444"></a>03444   <span class="keywordflow">if</span> (numStepsPerVariable)
<a name="l03445"></a>03445     *numStepsPerVariable = NULL;
<a name="l03446"></a>03446   
<a name="l03447"></a>03447   <span class="comment">// check input</span>
<a name="l03448"></a>03448   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l03449"></a>03449   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variables || !numVariables
<a name="l03450"></a>03450       || ! numStepsPerVariable || !type){
<a name="l03451"></a>03451     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03452"></a>03452     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03453"></a>03453   }
<a name="l03454"></a>03454   
<a name="l03455"></a>03455   <span class="comment">// log message</span>
<a name="l03456"></a>03456   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variable components '%s'"</span>, varname);
<a name="l03457"></a>03457 
<a name="l03458"></a>03458   compname = (<span class="keywordtype">char</span>*)malloc((strlen(varname)+3)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l03459"></a>03459   returnVars = (<a class="code" href="structFC__Variable.html">FC_Variable</a>**)malloc(3*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>*));
<a name="l03460"></a>03460   nSteps = (<span class="keywordtype">int</span>*)malloc(3*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l03461"></a>03461   <span class="keywordflow">if</span> (!compname || !returnVars || ! nSteps){
<a name="l03462"></a>03462     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l03463"></a>03463   }
<a name="l03464"></a>03464 
<a name="l03465"></a>03465   <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++){
<a name="l03466"></a>03466     <span class="keywordtype">int</span> numVar;
<a name="l03467"></a>03467     <span class="keywordtype">int</span>* numStep;
<a name="l03468"></a>03468     FC_Variable** tempVar;
<a name="l03469"></a>03469 
<a name="l03470"></a>03470     found[i] = 0;
<a name="l03471"></a>03471     sprintf(compname, <span class="stringliteral">"%s_%s"</span>,varname,vector_endings[i]);
<a name="l03472"></a>03472     <span class="comment">//    printf("looking for &lt;%s&gt;\n", compname);</span>
<a name="l03473"></a>03473     rc = <a class="code" href="group__Variable.html#g81f06442d2acc47bf9cf8ebbd94be75d">fc_getSeqVariableByName</a>(mesh, compname,
<a name="l03474"></a>03474                      &amp;numVar, &amp;numStep, &amp;tempVar);
<a name="l03475"></a>03475     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l03476"></a>03476       free(compname);
<a name="l03477"></a>03477       <span class="keywordflow">for</span> (j = 0; j &lt; i; j++){
<a name="l03478"></a>03478      <span class="keywordflow">if</span> (returnVars[j]) free(returnVars[j]);
<a name="l03479"></a>03479       }
<a name="l03480"></a>03480       free(nSteps);
<a name="l03481"></a>03481       free(returnVars);
<a name="l03482"></a>03482       <span class="keywordflow">return</span> rc;
<a name="l03483"></a>03483     }
<a name="l03484"></a>03484 
<a name="l03485"></a>03485     <span class="keywordflow">if</span> (numVar &gt; 1){
<a name="l03486"></a>03486       <span class="comment">//      printf("found too many %d\n",i);</span>
<a name="l03487"></a>03487       <span class="keywordflow">for</span> (j = 0; j &lt; numVar; j++){
<a name="l03488"></a>03488      free(tempVar[j]);
<a name="l03489"></a>03489       }
<a name="l03490"></a>03490       free(tempVar);
<a name="l03491"></a>03491       free(numStep);
<a name="l03492"></a>03492       free(compname);
<a name="l03493"></a>03493       <span class="keywordflow">for</span> (j = 0; j &lt; i; j++){
<a name="l03494"></a>03494      <span class="keywordflow">if</span> (returnVars[j]) free(returnVars[j]);
<a name="l03495"></a>03495       }
<a name="l03496"></a>03496       free(returnVars);
<a name="l03497"></a>03497       free(nSteps);
<a name="l03498"></a>03498       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03499"></a>03499     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numVar == 1 ){
<a name="l03500"></a>03500       <span class="comment">//      printf("found %d\n",i);</span>
<a name="l03501"></a>03501       returnVars[i] = tempVar[0];
<a name="l03502"></a>03502       nSteps[i] = numStep[0];
<a name="l03503"></a>03503       found[i] = 1;
<a name="l03504"></a>03504       free(tempVar);
<a name="l03505"></a>03505       free(numStep);
<a name="l03506"></a>03506     } <span class="keywordflow">else</span> {
<a name="l03507"></a>03507       <span class="comment">//do nothing</span>
<a name="l03508"></a>03508       <span class="comment">//      printf("found none %d\n",i);</span>
<a name="l03509"></a>03509     }
<a name="l03510"></a>03510   } <span class="comment">//all components</span>
<a name="l03511"></a>03511 
<a name="l03512"></a>03512   free(compname);
<a name="l03513"></a>03513   <span class="comment">//make sure no skips</span>
<a name="l03514"></a>03514   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++){
<a name="l03515"></a>03515     <span class="keywordflow">if</span> (found[i] == 0 &amp;&amp; found[i+1] == 1){
<a name="l03516"></a>03516       <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++){
<a name="l03517"></a>03517      <span class="keywordflow">if</span> (returnVars[j]) free(returnVars[j]);
<a name="l03518"></a>03518       }
<a name="l03519"></a>03519       free(returnVars);
<a name="l03520"></a>03520       free(nSteps);
<a name="l03521"></a>03521       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03522"></a>03522     }
<a name="l03523"></a>03523   }
<a name="l03524"></a>03524 
<a name="l03525"></a>03525   numReturnVars = 0;
<a name="l03526"></a>03526   <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++){
<a name="l03527"></a>03527     numReturnVars+= found[i];
<a name="l03528"></a>03528   }
<a name="l03529"></a>03529 
<a name="l03530"></a>03530   <span class="keywordflow">if</span> (numReturnVars &gt; 0){
<a name="l03531"></a>03531     *variables = (FC_Variable**)malloc(numReturnVars*<span class="keyword">sizeof</span>(FC_Variable**));
<a name="l03532"></a>03532     *numStepsPerVariable = (<span class="keywordtype">int</span>*)malloc(numReturnVars*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l03533"></a>03533     <span class="keywordflow">if</span> (!(*variables) || !(*numStepsPerVariable)){
<a name="l03534"></a>03534       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l03535"></a>03535     }
<a name="l03536"></a>03536     <span class="keywordflow">for</span> (i = 0; i &lt; numReturnVars; i++){
<a name="l03537"></a>03537       (*variables)[i] = returnVars[i];
<a name="l03538"></a>03538       (*numStepsPerVariable)[i] = nSteps[i];
<a name="l03539"></a>03539     }
<a name="l03540"></a>03540     *type = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b367e06c1812f7a0127035e27d14fd597d">FC_MT_VECTOR</a>;
<a name="l03541"></a>03541   }
<a name="l03542"></a>03542   
<a name="l03543"></a>03543   *numVariables = numReturnVars;
<a name="l03544"></a>03544   free(returnVars);
<a name="l03545"></a>03545   free(nSteps);
<a name="l03546"></a>03546 
<a name="l03547"></a>03547   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03548"></a>03548 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g01510834d5c80b7076d17badfd929cfa"></a><!-- doxytag: member="variable.c::fc_getSeqVariableDataPointSlice" ref="g01510834d5c80b7076d17badfd929cfa" args="(int numStep, FC_Variable *seqVar, int dataPointID, void **history)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getSeqVariableDataPointSlice           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dataPointID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>history</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
In a sequence variable, get data for steps at a single data. 
<p>
<b>Description:</b> <p>
Given a sequence variable and the id of a particular data point (corresponds to a particular entity id for the variable), this will return an array of data values at that point for each step in the sequence. This type of information for time series is often called a point history. If the data has more than one component, the array will be interleaved; that is, for each step all components will be listed before the next step (e.g. Step1Comp1 Step2Comp2 .. Step1CompN ... StepMComp1 StepMCompN).<p>
This routine returns an allocated data array. The user is responsible for freeing it.<p>
<b>Modifications:</b> <ul>
<li>10/21/04 WSK, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - seq variable handles </td></tr>
<tr><td valign="top"><em>dataPointID</em>&nbsp;</td><td>
input - ID of the data point/entity of interest </td></tr>
<tr><td valign="top"><em>history</em>&nbsp;</td><td>
output - data array </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04890">4890</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="base_8c-source.html#l00740">fc_sizeofDataType()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l04764">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>.<div class="fragment"><pre class="fragment"><a name="l04895"></a>04895   {
<a name="l04896"></a>04896   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l04897"></a>04897   <span class="keywordtype">int</span> i;
<a name="l04898"></a>04898   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04899"></a>04899   size_t size;
<a name="l04900"></a>04900   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l04901"></a>04901   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> dataType;
<a name="l04902"></a>04902   <span class="keywordtype">void</span>* temp_data, *data_p;
<a name="l04903"></a>04903 
<a name="l04904"></a>04904   <span class="comment">// default</span>
<a name="l04905"></a>04905   <span class="keywordflow">if</span> (history)
<a name="l04906"></a>04906     *history = NULL;
<a name="l04907"></a>04907   
<a name="l04908"></a>04908   <span class="comment">// check input</span>
<a name="l04909"></a>04909   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(numStep, seqVar) || dataPointID &lt; 0 ||
<a name="l04910"></a>04910       !history) {
<a name="l04911"></a>04911     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04912"></a>04912     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04913"></a>04913   }
<a name="l04914"></a>04914 
<a name="l04915"></a>04915   <span class="comment">// Get info about seq variable</span>
<a name="l04916"></a>04916   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(seqVar[0], &amp;numDataPoint, &amp;numComp, NULL, NULL,
<a name="l04917"></a>04917                           &amp;dataType);
<a name="l04918"></a>04918   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l04919"></a>04919     <span class="keywordflow">return</span> rc;
<a name="l04920"></a>04920 
<a name="l04921"></a>04921   <span class="comment">// a little more checking</span>
<a name="l04922"></a>04922   <span class="keywordflow">if</span> (dataPointID &gt;= numDataPoint) {
<a name="l04923"></a>04923     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Data point ID is outside range"</span>);
<a name="l04924"></a>04924     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04925"></a>04925   }
<a name="l04926"></a>04926 
<a name="l04927"></a>04927   <span class="comment">// log message</span>
<a name="l04928"></a>04928   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(seqVar[0]);
<a name="l04929"></a>04929   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting history for seq variable '%s'"</span>, 
<a name="l04930"></a>04930                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04931"></a>04931 
<a name="l04932"></a>04932   <span class="comment">// Collect history data</span>
<a name="l04933"></a>04933   size = numComp * <a class="code" href="group__DataTypes.html#g3a159b9419ea8f8d62b5473bf51f40e3">fc_sizeofDataType</a>(dataType);
<a name="l04934"></a>04934   temp_data = malloc(numStep*size);
<a name="l04935"></a>04935   <span class="keywordflow">if</span> (temp_data == NULL) {
<a name="l04936"></a>04936     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l04937"></a>04937     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l04938"></a>04938   }
<a name="l04939"></a>04939   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l04940"></a>04940     rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(seqVar[i], &amp;data_p);
<a name="l04941"></a>04941     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l04942"></a>04942       free(temp_data);
<a name="l04943"></a>04943       <span class="keywordflow">return</span> rc;
<a name="l04944"></a>04944     }
<a name="l04945"></a>04945     memcpy((<span class="keywordtype">char</span>*)temp_data + i*size, (<span class="keywordtype">char</span>*)data_p + dataPointID*size, size);
<a name="l04946"></a>04946   }
<a name="l04947"></a>04947 
<a name="l04948"></a>04948   <span class="comment">// set return   </span>
<a name="l04949"></a>04949   *history = temp_data;
<a name="l04950"></a>04950 
<a name="l04951"></a>04951   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04952"></a>04952 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g8273c100c0ab952088d301845ed3c5f0"></a><!-- doxytag: member="variable.c::fc_getSeqVariableDataPointSliceAsSeqVariable" ref="g8273c100c0ab952088d301845ed3c5f0" args="(int numStep, FC_Variable *seqVar, int dataPointID, char *slicevarname, FC_Variable **sliceVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getSeqVariableDataPointSliceAsSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dataPointID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>slicevarname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>sliceVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
In a sequence variable, get data for steps at a single data point returned as a sequence variable with association FC_AT_WHOLE_MESH. 
<p>
<b>Description:</b> <p>
Given a sequence variable and the id of a particular data point (corresponds to a particular entity id for the variable), this will return a seqvar with data values for that point only with association FC_AT_WHOLE_MESH. This method calls fc_getVariableDataPointSlice and then packs the return array into a sequence Variable.<p>
<b>Modifications:</b> <ul>
<li>2/10/05 ACG, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - seq variable handles </td></tr>
<tr><td valign="top"><em>dataPointID</em>&nbsp;</td><td>
input - ID of the data point/entity of interest </td></tr>
<tr><td valign="top"><em>slicevarname</em>&nbsp;</td><td>
input - name of output seqvar </td></tr>
<tr><td valign="top"><em>sliceVar</em>&nbsp;</td><td>
output - output seqvar </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04764">4764</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>, <a class="el" href="variable_8c-source.html#l00348">fc_createSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l03938">fc_deleteSeqVariable()</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="variable_8c-source.html#l04268">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04193">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04890">fc_getSeqVariableDataPointSlice()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="variable_8c-source.html#l00467">fc_setVariableData()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00102">numComponent</a>.<div class="fragment"><pre class="fragment"><a name="l04770"></a>04770   {
<a name="l04771"></a>04771   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l04772"></a>04772   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh;
<a name="l04773"></a>04773   <a class="code" href="structFC__Sequence.html">FC_Sequence</a> seq;
<a name="l04774"></a>04774 
<a name="l04775"></a>04775   <span class="keywordtype">int</span> <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>;
<a name="l04776"></a>04776   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathtype;
<a name="l04777"></a>04777   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype;
<a name="l04778"></a>04778   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l04779"></a>04779 
<a name="l04780"></a>04780   <span class="keywordtype">void</span>* history;
<a name="l04781"></a>04781   <span class="keywordtype">void</span>* dcounter;
<a name="l04782"></a>04782   <span class="keywordtype">int</span> i;
<a name="l04783"></a>04783 
<a name="l04784"></a>04784   <span class="comment">//only need to check slicevar, fc_getSeqVariableDataPointSlice checks the</span>
<a name="l04785"></a>04785   <span class="comment">//rest</span>
<a name="l04786"></a>04786 
<a name="l04787"></a>04787   <span class="keywordflow">if</span> (sliceVar)
<a name="l04788"></a>04788     *sliceVar = NULL;
<a name="l04789"></a>04789 
<a name="l04790"></a>04790   <span class="keywordflow">if</span> (sliceVar == NULL || slicevarname == NULL){
<a name="l04791"></a>04791     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04792"></a>04792     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04793"></a>04793   };
<a name="l04794"></a>04794 
<a name="l04795"></a>04795   <span class="comment">//get data &amp; its does input checks</span>
<a name="l04796"></a>04796   rc = <a class="code" href="group__Variable.html#g01510834d5c80b7076d17badfd929cfa">fc_getSeqVariableDataPointSlice</a>(numStep,seqVar, dataPointID, &amp;history);
<a name="l04797"></a>04797   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l04798"></a>04798     <span class="keywordflow">return</span> rc;
<a name="l04799"></a>04799   }
<a name="l04800"></a>04800 
<a name="l04801"></a>04801 
<a name="l04802"></a>04802   <span class="comment">// Get info about seq variable</span>
<a name="l04803"></a>04803   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(seqVar[0], NULL, &amp;numComponent, &amp;assoc, &amp;mathtype,
<a name="l04804"></a>04804                           &amp;datatype);
<a name="l04805"></a>04805   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l04806"></a>04806     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(rc));
<a name="l04807"></a>04807     free(history);
<a name="l04808"></a>04808     <span class="keywordflow">return</span> rc;
<a name="l04809"></a>04809   }
<a name="l04810"></a>04810 
<a name="l04811"></a>04811   <span class="comment">//make slice var</span>
<a name="l04812"></a>04812   rc = <a class="code" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a>(seqVar[0],&amp;mesh);
<a name="l04813"></a>04813   rc = <a class="code" href="group__Variable.html#gea428de5a2584716f6e2bc77cd339544">fc_getSequenceFromSeqVariable</a>(numStep,seqVar,&amp;seq);
<a name="l04814"></a>04814   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l04815"></a>04815     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(rc));
<a name="l04816"></a>04816     free(history);
<a name="l04817"></a>04817     <span class="keywordflow">return</span> rc;
<a name="l04818"></a>04818   }
<a name="l04819"></a>04819 
<a name="l04820"></a>04820   rc = <a class="code" href="group__Variable.html#gada4bacc9679592ff8b27c538570c1da">fc_createSeqVariable</a>(mesh, seq, slicevarname, &amp;numStep,sliceVar);
<a name="l04821"></a>04821   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l04822"></a>04822       <a class="code" href="group__Variable.html#g57341fab4863efe2c35476aee509f20d">fc_deleteSeqVariable</a>(numStep,*sliceVar);
<a name="l04823"></a>04823       free(*sliceVar);
<a name="l04824"></a>04824       *sliceVar = NULL;
<a name="l04825"></a>04825       free(history);
<a name="l04826"></a>04826       <span class="keywordflow">return</span> rc;
<a name="l04827"></a>04827   }
<a name="l04828"></a>04828 
<a name="l04829"></a>04829   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++){
<a name="l04830"></a>04830     <span class="keywordflow">switch</span> (datatype){
<a name="l04831"></a>04831     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>:
<a name="l04832"></a>04832       dcounter = &amp;(((<span class="keywordtype">int</span>*)history)[i*numComponent]);
<a name="l04833"></a>04833       <span class="keywordflow">break</span>;
<a name="l04834"></a>04834     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>:
<a name="l04835"></a>04835       dcounter = &amp;(((<span class="keywordtype">float</span>*)history)[i*numComponent]);
<a name="l04836"></a>04836       <span class="keywordflow">break</span>;
<a name="l04837"></a>04837     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>:
<a name="l04838"></a>04838       dcounter = &amp;(((<span class="keywordtype">double</span>*)history)[i*numComponent]);
<a name="l04839"></a>04839       <span class="keywordflow">break</span>;
<a name="l04840"></a>04840     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>:
<a name="l04841"></a>04841       dcounter = &amp;(((<span class="keywordtype">char</span>*)history)[i*numComponent]);
<a name="l04842"></a>04842       <span class="keywordflow">break</span>;
<a name="l04843"></a>04843     <span class="keywordflow">default</span>:
<a name="l04844"></a>04844       printf(<span class="stringliteral">"** Developer Alert! Should never reach this point!**\n"</span>);
<a name="l04845"></a>04845       fflush(NULL);
<a name="l04846"></a>04846       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <span class="stringliteral">"Invalid data type"</span>);
<a name="l04847"></a>04847       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l04848"></a>04848       <span class="keywordflow">break</span>;
<a name="l04849"></a>04849     }
<a name="l04850"></a>04850 
<a name="l04851"></a>04851     rc = <a class="code" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData</a>((*sliceVar)[i],1,numComponent,
<a name="l04852"></a>04852                             <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b304008f144f8c1298e5724d7a601ed063099">FC_AT_WHOLE_MESH</a>,mathtype,
<a name="l04853"></a>04853                             datatype,dcounter);
<a name="l04854"></a>04854     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l04855"></a>04855       <a class="code" href="group__Variable.html#g57341fab4863efe2c35476aee509f20d">fc_deleteSeqVariable</a>(numStep,*sliceVar);
<a name="l04856"></a>04856       free(*sliceVar);
<a name="l04857"></a>04857       *sliceVar = NULL;
<a name="l04858"></a>04858       free(history);
<a name="l04859"></a>04859       <span class="keywordflow">return</span> rc;
<a name="l04860"></a>04860     }
<a name="l04861"></a>04861   }
<a name="l04862"></a>04862 
<a name="l04863"></a>04863   dcounter = NULL;
<a name="l04864"></a>04864   free(history);
<a name="l04865"></a>04865   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04866"></a>04866 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g93185e07dcdf01ffc87fc28a69ee96ae"></a><!-- doxytag: member="variable.c::fc_getSeqVariables" ref="g93185e07dcdf01ffc87fc28a69ee96ae" args="(FC_Mesh mesh, int *numSeqVar, int **numStepPerVar, FC_Variable ***seqVariables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getSeqVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numSeqVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&nbsp;</td>
          <td class="paramname"> <em>numStepPerVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> ***&nbsp;</td>
          <td class="paramname"> <em>seqVariables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the sequence variables in a mesh. 
<p>
<b>Description:</b> <p>
Returns an array of sequence variables (array of arrays of variables) as well as an array of the number of steps per sequence variable. The use is responsible for freeing all returned arrays. (SeqVars is a 2D array, so to free: for (i = 0; i &lt; numSeq var) { free(seqVars[i])); } )<p>
<b>Modifications:</b> <ul>
<li>2003-APR-18 W Koegler Created</li><li>12/11/03 RM, added default return values, numSeqVar = -1, seqVarNames = NULL, check input/output for numSeqVar = NULL.</li><li>9/9/04 WSK, changed to return seq variable handles instead of names</li><li>10/15/04 WSK, changed to not return sequence handles </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numSeqVar</em>&nbsp;</td><td>
output - number of sequence variables </td></tr>
<tr><td valign="top"><em>numStepPerVar</em>&nbsp;</td><td>
output - array with number of steps for each sequence variable </td></tr>
<tr><td valign="top"><em>seqVariables</em>&nbsp;</td><td>
output - array of sequence variables (each sequence variable is array of numStep variables </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02567">2567</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05441">_fc_getVarSlotFromID()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="meshP_8h-source.html#l00186">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00187">_FC_MeshSlot::numStepPerSeqVar</a>, and <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::seqVarIDs</a>.
<p>
Referenced by <a class="el" href="mesh_8c-source.html#l00713">fc_createSubsetMesh()</a>, <a class="el" href="mesh_8c-source.html#l01859">fc_deleteMesh()</a>, <a class="el" href="mesh_8c-source.html#l01665">fc_releaseMesh()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, and <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.<div class="fragment"><pre class="fragment"><a name="l02574"></a>02574   {
<a name="l02575"></a>02575   <span class="keywordtype">int</span> i, j;
<a name="l02576"></a>02576   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l02577"></a>02577   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l02578"></a>02578   
<a name="l02579"></a>02579   <span class="comment">// set up defaults</span>
<a name="l02580"></a>02580   <span class="keywordflow">if</span> (numSeqVar != NULL)
<a name="l02581"></a>02581     *numSeqVar = -1;
<a name="l02582"></a>02582   <span class="keywordflow">if</span> (numStepPerVar != NULL)
<a name="l02583"></a>02583     *numStepPerVar = NULL;
<a name="l02584"></a>02584   <span class="keywordflow">if</span> (seqVariables != NULL)
<a name="l02585"></a>02585     *seqVariables = NULL;
<a name="l02586"></a>02586   
<a name="l02587"></a>02587   <span class="comment">// check input</span>
<a name="l02588"></a>02588   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l02589"></a>02589   <span class="keywordflow">if</span> (meshSlot == NULL || numSeqVar == NULL || numStepPerVar == NULL ||
<a name="l02590"></a>02590       seqVariables == NULL) {
<a name="l02591"></a>02591     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02592"></a>02592     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02593"></a>02593   }
<a name="l02594"></a>02594   
<a name="l02595"></a>02595   <span class="comment">// log message</span>
<a name="l02596"></a>02596   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting sequence variables for mesh '%s'"</span>,
<a name="l02597"></a>02597                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02598"></a>02598 
<a name="l02599"></a>02599   <span class="comment">// get num seq variable</span>
<a name="l02600"></a>02600   *numSeqVar = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>;
<a name="l02601"></a>02601   
<a name="l02602"></a>02602   <span class="comment">// get sequence variables</span>
<a name="l02603"></a>02603   <span class="keywordflow">if</span> (*numSeqVar &gt; 0) {
<a name="l02604"></a>02604     *numStepPerVar = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (*numSeqVar));
<a name="l02605"></a>02605     <span class="keywordflow">if</span> (*numStepPerVar == NULL) {
<a name="l02606"></a>02606       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02607"></a>02607       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02608"></a>02608     }
<a name="l02609"></a>02609     *seqVariables = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>*) * (*numSeqVar));
<a name="l02610"></a>02610     <span class="keywordflow">if</span> (*seqVariables == NULL) {
<a name="l02611"></a>02611       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02612"></a>02612       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02613"></a>02613     }
<a name="l02614"></a>02614     <span class="keywordflow">for</span> (i = 0; i &lt; *numSeqVar; i++) {
<a name="l02615"></a>02615       (*numStepPerVar)[i] = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1d17a5b984a2780fc0a7b5b88de791e2">numStepPerSeqVar</a>[i];
<a name="l02616"></a>02616       (*seqVariables)[i] = malloc(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1d17a5b984a2780fc0a7b5b88de791e2">numStepPerSeqVar</a>[i]*<span class="keyword">sizeof</span>(FC_Variable));
<a name="l02617"></a>02617       if ( (*seqVariables)[i] == NULL) {
<a name="l02618"></a>02618      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02619"></a>02619      <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02620"></a>02620       }
<a name="l02621"></a>02621       <span class="keywordflow">for</span> (j = 0; j &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#1d17a5b984a2780fc0a7b5b88de791e2">numStepPerSeqVar</a>[i]; j++) {
<a name="l02622"></a>02622      varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#4875049ef97cdce27533cbcdb6a5d145">seqVarIDs</a>[i][j]);
<a name="l02623"></a>02623      <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>((*seqVariables)[i][j], varSlot);
<a name="l02624"></a>02624       }
<a name="l02625"></a>02625     }
<a name="l02626"></a>02626   }
<a name="l02627"></a>02627   
<a name="l02628"></a>02628   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02629"></a>02629 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g36c4ac9f503bcf040c378c06e1ad9188"></a><!-- doxytag: member="variable.c::fc_getVariableAssociationType" ref="g36c4ac9f503bcf040c378c06e1ad9188" args="(FC_Variable variable, FC_AssociationType *assoc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableAssociationType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> *&nbsp;</td>
          <td class="paramname"> <em>assoc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return data association of a variable. 
<p>
<b>Description:</b> <p>
Return what subentity of the mesh (e.g. vertex, element, face, edge) the data values are associated with.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/16/03 RM, added default return datatype = FC_AT_UNKNOWN, and input check for datatype = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
output - data is per vertex, per element, etc </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04415">4415</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00091">_FC_VarSlot::assoc</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, and <a class="el" href="gaplines_8c-source.html#l00433">main()</a>.<div class="fragment"><pre class="fragment"><a name="l04419"></a>04419   {
<a name="l04420"></a>04420   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04421"></a>04421   
<a name="l04422"></a>04422   <span class="comment">// set up default value</span>
<a name="l04423"></a>04423   <span class="keywordflow">if</span> (assoc != NULL)
<a name="l04424"></a>04424       *assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>; 
<a name="l04425"></a>04425   
<a name="l04426"></a>04426   <span class="comment">// check input</span>
<a name="l04427"></a>04427   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04428"></a>04428   <span class="keywordflow">if</span> (varSlot == NULL || assoc == NULL) {
<a name="l04429"></a>04429     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04430"></a>04430     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04431"></a>04431   }
<a name="l04432"></a>04432     
<a name="l04433"></a>04433   <span class="comment">// log message</span>
<a name="l04434"></a>04434   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting association type for variable '%s'"</span>, 
<a name="l04435"></a>04435                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04436"></a>04436 
<a name="l04437"></a>04437   <span class="comment">// fill in requested value</span>
<a name="l04438"></a>04438   *assoc = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#034de266af584d7188674788825fc70f">assoc</a>;
<a name="l04439"></a>04439   
<a name="l04440"></a>04440   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04441"></a>04441 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g53d2967ed4e38d57d0852ab5e4cfef80"></a><!-- doxytag: member="variable.c::fc_getVariableByName" ref="g53d2967ed4e38d57d0852ab5e4cfef80" args="(FC_Mesh mesh, char *varname, int *numVariables, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVariables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get variables from the mesh. 
<p>
<b>Description:</b> <p>
Returns variables on the mesh with the specified name. Note that this doesnt merge components like the seqvar version doesx<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>2003-MAY-30 W Koegler Moved getting variable meta data from <a class="el" href="group__Mesh.html#g8f35371531555da3b336a94d7ce3053d">fc_getMeshByName()</a> to here. Actually moved to _fc_readVariable() which is called here.</li><li>12/12/03 RM, added default return mesh = FC_NULL_VARIABLE and checking for invalid variable name. Eliminated _fc_lookup_varSlot() and _fc_namematch(), those input checking changed and added into the body of this function</li><li>09/22/06 ACG returns array </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>numVariables</em>&nbsp;</td><td>
output - num matching variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - variable handles </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02982">2982</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05441">_fc_getVarSlotFromID()</a>, <a class="el" href="meshP_8h-source.html#l00185">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::numBasicVar</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l03189">fc_getOrGenerateUniqueVariableByName()</a>, <a class="el" href="variable_8c-source.html#l03072">fc_getVariableComponentsByName()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.<div class="fragment"><pre class="fragment"><a name="l02987"></a>02987   {
<a name="l02988"></a>02988   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l02989"></a>02989   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a> *varSlot;
<a name="l02990"></a>02990   <a class="code" href="structFC__Variable.html">FC_Variable</a> variable;
<a name="l02991"></a>02991   <span class="keywordtype">int</span> i;
<a name="l02992"></a>02992 
<a name="l02993"></a>02993   <a class="code" href="structFC__Variable.html">FC_Variable</a> *lmatch = NULL;
<a name="l02994"></a>02994   <span class="keywordtype">int</span> numlmatch, maxnumlmatch;
<a name="l02995"></a>02995   
<a name="l02996"></a>02996   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l02997"></a>02997   <span class="keywordflow">if</span> (numVariables)
<a name="l02998"></a>02998     *numVariables = -1;
<a name="l02999"></a>02999   <span class="keywordflow">if</span> (variables)
<a name="l03000"></a>03000     *variables = NULL;
<a name="l03001"></a>03001   
<a name="l03002"></a>03002   <span class="comment">// check input</span>
<a name="l03003"></a>03003   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l03004"></a>03004   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variables || !numVariables){
<a name="l03005"></a>03005     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03006"></a>03006     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03007"></a>03007   }
<a name="l03008"></a>03008   
<a name="l03009"></a>03009   <span class="comment">// log message</span>
<a name="l03010"></a>03010   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variable '%s'"</span>, varname);
<a name="l03011"></a>03011   
<a name="l03012"></a>03012   numlmatch = 0;
<a name="l03013"></a>03013   maxnumlmatch = 0;
<a name="l03014"></a>03014   
<a name="l03015"></a>03015   <span class="comment">// find the existing slot</span>
<a name="l03016"></a>03016   <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>; i++) {
<a name="l03017"></a>03017     varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5a672f4074dfa02a1bbdd667a09852e8">basicVarIDs</a>[i]); 
<a name="l03018"></a>03018     if (!strcmp(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>, varname)) {
<a name="l03019"></a>03019       <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>(variable, varSlot);
<a name="l03020"></a>03020 
<a name="l03021"></a>03021       <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l03022"></a>03022      lmatch = (<a class="code" href="structFC__Variable.html">FC_Variable</a>*)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>));
<a name="l03023"></a>03023      <span class="keywordflow">if</span> (lmatch == NULL){
<a name="l03024"></a>03024        <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l03025"></a>03025        <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l03026"></a>03026      }
<a name="l03027"></a>03027      numlmatch = 1;
<a name="l03028"></a>03028      maxnumlmatch = 1;
<a name="l03029"></a>03029      lmatch[0] = variable;
<a name="l03030"></a>03030       }<span class="keywordflow">else</span>{
<a name="l03031"></a>03031      <span class="keywordflow">if</span>(numlmatch == maxnumlmatch){
<a name="l03032"></a>03032        FC_Variable *temp;
<a name="l03033"></a>03033        temp = (FC_Variable*)realloc(lmatch,(2*numlmatch)*<span class="keyword">sizeof</span>(FC_Variable));
<a name="l03034"></a>03034        <span class="keywordflow">if</span> (temp == NULL){
<a name="l03035"></a>03035          <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l03036"></a>03036          <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l03037"></a>03037        }
<a name="l03038"></a>03038        maxnumlmatch*=2;
<a name="l03039"></a>03039        lmatch = temp;
<a name="l03040"></a>03040      }
<a name="l03041"></a>03041      lmatch[numlmatch] = variable;
<a name="l03042"></a>03042      numlmatch++;
<a name="l03043"></a>03043       }
<a name="l03044"></a>03044     }
<a name="l03045"></a>03045   }
<a name="l03046"></a>03046 
<a name="l03047"></a>03047   *numVariables = numlmatch;
<a name="l03048"></a>03048   *variables = lmatch;
<a name="l03049"></a>03049 
<a name="l03050"></a>03050   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03051"></a>03051 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g9b7959f3f6f14b4fc7ca976c420bfaff"></a><!-- doxytag: member="variable.c::fc_getVariableComponentsByName" ref="g9b7959f3f6f14b4fc7ca976c420bfaff" args="(FC_Mesh mesh, char *varname, FC_MathType *type, int *numVariables, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableComponentsByName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVariables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get variables that can be components from the mesh. 
<p>
<b>Description:</b> <p>
Returns variables on the mesh with the specified base name and _x,_y,_z extensions. This is meant to be used to build an array of components split with the exodus component naming convention.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000104">Todo:</a></b></dt><dd><ul>
<li>make this work with _c0, _c1 etc extensions</li></ul>
</dd></dl>
<b>Modifications:</b> <ul>
<li>10/11/2007 ACG created </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh handle </td></tr>
<tr><td valign="top"><em>varname</em>&nbsp;</td><td>
input - variable name </td></tr>
<tr><td valign="top"><em>type</em>&nbsp;</td><td>
output - type </td></tr>
<tr><td valign="top"><em>numVariables</em>&nbsp;</td><td>
output - num matching variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - variable handles </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03072">3072</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l02982">fc_getVariableByName()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b367e06c1812f7a0127035e27d14fd597d">FC_MT_VECTOR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l03189">fc_getOrGenerateUniqueVariableByName()</a>.<div class="fragment"><pre class="fragment"><a name="l03078"></a>03078   {
<a name="l03079"></a>03079   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l03080"></a>03080   <a class="code" href="structFC__Variable.html">FC_Variable</a>* returnVars;
<a name="l03081"></a>03081   <span class="keywordtype">int</span> numReturnVars;
<a name="l03082"></a>03082   <span class="keywordtype">char</span>* compname;
<a name="l03083"></a>03083 
<a name="l03084"></a>03084   <span class="keywordtype">char</span> vector_endings[3][2] = { <span class="stringliteral">"x"</span>, <span class="stringliteral">"y"</span>, <span class="stringliteral">"z"</span> };
<a name="l03085"></a>03085   <span class="keywordtype">int</span> found[3];
<a name="l03086"></a>03086   <span class="keywordtype">int</span> i;
<a name="l03087"></a>03087   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l03088"></a>03088   
<a name="l03089"></a>03089   <span class="comment">// default values returned if anything goes wrong</span>
<a name="l03090"></a>03090   <span class="keywordflow">if</span> (numVariables)
<a name="l03091"></a>03091     *numVariables = -1;
<a name="l03092"></a>03092   <span class="keywordflow">if</span> (type)
<a name="l03093"></a>03093     *type = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>; 
<a name="l03094"></a>03094   <span class="keywordflow">if</span> (variables)
<a name="l03095"></a>03095     *variables = NULL;
<a name="l03096"></a>03096   
<a name="l03097"></a>03097   <span class="comment">// check input</span>
<a name="l03098"></a>03098   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l03099"></a>03099   <span class="keywordflow">if</span> (meshSlot == NULL || varname == NULL || !variables || !numVariables
<a name="l03100"></a>03100       || !type){
<a name="l03101"></a>03101     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03102"></a>03102     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03103"></a>03103   }
<a name="l03104"></a>03104   
<a name="l03105"></a>03105   <span class="comment">// log message</span>
<a name="l03106"></a>03106   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variable components '%s'"</span>, varname);
<a name="l03107"></a>03107 
<a name="l03108"></a>03108   compname = (<span class="keywordtype">char</span>*)malloc((strlen(varname)+3)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l03109"></a>03109   returnVars = (<a class="code" href="structFC__Variable.html">FC_Variable</a>*)malloc(3*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>));
<a name="l03110"></a>03110   <span class="keywordflow">if</span> (!compname || !returnVars){
<a name="l03111"></a>03111     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l03112"></a>03112   }
<a name="l03113"></a>03113 
<a name="l03114"></a>03114   <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++){
<a name="l03115"></a>03115     <span class="keywordtype">int</span> numVar;
<a name="l03116"></a>03116     FC_Variable *tempVars;
<a name="l03117"></a>03117 
<a name="l03118"></a>03118     found[i] = 0;
<a name="l03119"></a>03119     sprintf(compname, <span class="stringliteral">"%s_%s"</span>,varname,vector_endings[i]);
<a name="l03120"></a>03120     rc = <a class="code" href="group__Variable.html#g53d2967ed4e38d57d0852ab5e4cfef80">fc_getVariableByName</a>(mesh, compname,
<a name="l03121"></a>03121                      &amp;numVar, &amp;tempVars);
<a name="l03122"></a>03122     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>){
<a name="l03123"></a>03123       free(compname);
<a name="l03124"></a>03124       <span class="keywordflow">return</span> rc;
<a name="l03125"></a>03125     }
<a name="l03126"></a>03126 
<a name="l03127"></a>03127     <span class="keywordflow">if</span> (numVar &gt; 1){
<a name="l03128"></a>03128       free(tempVars);
<a name="l03129"></a>03129       free(compname);
<a name="l03130"></a>03130       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03131"></a>03131     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numVar == 1){
<a name="l03132"></a>03132       returnVars[i] = tempVars[0];
<a name="l03133"></a>03133       found[i] = 1;
<a name="l03134"></a>03134       free(tempVars);
<a name="l03135"></a>03135     } <span class="keywordflow">else</span> {
<a name="l03136"></a>03136       <span class="comment">//do nothing</span>
<a name="l03137"></a>03137     }
<a name="l03138"></a>03138   }
<a name="l03139"></a>03139 
<a name="l03140"></a>03140   free(compname);
<a name="l03141"></a>03141   <span class="comment">//make sure no skips</span>
<a name="l03142"></a>03142   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++){
<a name="l03143"></a>03143     <span class="keywordflow">if</span> (found[i] == 0 &amp;&amp; found[i+1] == 1){
<a name="l03144"></a>03144       free(returnVars);
<a name="l03145"></a>03145       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03146"></a>03146     }
<a name="l03147"></a>03147   }
<a name="l03148"></a>03148 
<a name="l03149"></a>03149   numReturnVars = 0;
<a name="l03150"></a>03150   <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++){
<a name="l03151"></a>03151     numReturnVars+= found[i];
<a name="l03152"></a>03152   }
<a name="l03153"></a>03153   <span class="keywordflow">if</span> (numReturnVars &gt; 0){
<a name="l03154"></a>03154     *variables = (FC_Variable*)malloc(numReturnVars*<span class="keyword">sizeof</span>(FC_Variable));
<a name="l03155"></a>03155     <span class="keywordflow">if</span> (!(*variables)){
<a name="l03156"></a>03156       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l03157"></a>03157     }
<a name="l03158"></a>03158     <span class="keywordflow">for</span> (i = 0; i &lt; numReturnVars; i++){
<a name="l03159"></a>03159       (*variables)[i] = returnVars[i];
<a name="l03160"></a>03160     }
<a name="l03161"></a>03161     *type = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b367e06c1812f7a0127035e27d14fd597d">FC_MT_VECTOR</a>;
<a name="l03162"></a>03162   }
<a name="l03163"></a>03163   free(returnVars);
<a name="l03164"></a>03164 
<a name="l03165"></a>03165   *numVariables = numReturnVars;
<a name="l03166"></a>03166   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03167"></a>03167 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g717ba43c5ff38b3e711f5a38625e670e"></a><!-- doxytag: member="variable.c::fc_getVariableDataAsDataType" ref="g717ba43c5ff38b3e711f5a38625e670e" args="(FC_Variable variable, FC_DataType dataType, void **data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableDataAsDataType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a>&nbsp;</td>
          <td class="paramname"> <em>dataType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get a copy of a variable's data as the requested data type. 
<p>
<b>Description:</b> <p>
Returns the variable's data as the type requested by the user. The user is responsible for freeing the array. This routine casts to the requested user type so there is a potential for lost information (e.g. if you cast a floating point number to int it is truncated, not rounded).<p>
If you are worried about memory or casting, you should use <a class="el" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr()</a> to get a pointer to the raw data array.<p>
Can also be used to get the data in a step of a sequence variable by calling with the variable handle for the desired step.<p>
<b>Modifications:</b> <ul>
<li>02/02/05 WSK created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>dataType</em>&nbsp;</td><td>
input - the data type for the returned data </td></tr>
<tr><td valign="top"><em>data</em>&nbsp;</td><td>
output - returned data </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04649">4649</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00418">fc_getDataTypeText()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00239">fc_isDataTypeValid()</a>, <a class="el" href="variable_8c-source.html#l04032">fc_isVariableValid()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="base_8c-source.html#l00740">fc_sizeofDataType()</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.<div class="fragment"><pre class="fragment"><a name="l04653"></a>04653   {
<a name="l04654"></a>04654   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l04655"></a>04655   <span class="keywordtype">int</span> i;
<a name="l04656"></a>04656   <span class="keywordtype">int</span> numDataPoint, numComp, numTotal;
<a name="l04657"></a>04657   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> dataType_orig;
<a name="l04658"></a>04658   <span class="keywordtype">void</span> *data_orig;
<a name="l04659"></a>04659   
<a name="l04660"></a>04660   <span class="comment">// default</span>
<a name="l04661"></a>04661   <span class="keywordflow">if</span> (data)
<a name="l04662"></a>04662     *data = NULL;
<a name="l04663"></a>04663   
<a name="l04664"></a>04664   <span class="comment">// check input</span>
<a name="l04665"></a>04665   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g888dc4800278e9343a1c35599fa82d63">fc_isVariableValid</a>(variable) || !<a class="code" href="group__DataTypes.html#ged8b462070c0f2617ee62753bcbe2f19">fc_isDataTypeValid</a>(dataType) || 
<a name="l04666"></a>04666       dataType == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a> || data == NULL) {
<a name="l04667"></a>04667     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04668"></a>04668     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04669"></a>04669   }
<a name="l04670"></a>04670   
<a name="l04671"></a>04671   <span class="comment">// log message</span>
<a name="l04672"></a>04672   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting data for variable '%s' as type %s"</span>, 
<a name="l04673"></a>04673                       <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable)-&gt;header.name,
<a name="l04674"></a>04674                       <a class="code" href="group__DataTypes.html#g6720a592eace2d7459eb410a3b29cd2f">fc_getDataTypeText</a>(dataType));
<a name="l04675"></a>04675 
<a name="l04676"></a>04676   <span class="comment">// get variable info and data</span>
<a name="l04677"></a>04677   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(variable, &amp;numDataPoint, &amp;numComp, NULL, 
<a name="l04678"></a>04678                           NULL, &amp;dataType_orig);
<a name="l04679"></a>04679   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l04680"></a>04680     <span class="keywordflow">return</span> rc;
<a name="l04681"></a>04681   rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(variable, &amp;data_orig);
<a name="l04682"></a>04682   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l04683"></a>04683     <span class="keywordflow">return</span> rc;
<a name="l04684"></a>04684   numTotal = numDataPoint*numComp;
<a name="l04685"></a>04685   
<a name="l04686"></a>04686   <span class="comment">// allocate return array</span>
<a name="l04687"></a>04687   *data = malloc(numTotal*<a class="code" href="group__DataTypes.html#g3a159b9419ea8f8d62b5473bf51f40e3">fc_sizeofDataType</a>(dataType));
<a name="l04688"></a>04688   <span class="keywordflow">if</span> (!*data) {
<a name="l04689"></a>04689     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l04690"></a>04690     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l04691"></a>04691   }
<a name="l04692"></a>04692 
<a name="l04693"></a>04693   <span class="comment">// special case - the same data type</span>
<a name="l04694"></a>04694   <span class="keywordflow">if</span> (dataType == dataType_orig) {
<a name="l04695"></a>04695     memcpy(*data, data_orig, numTotal*<a class="code" href="group__DataTypes.html#g3a159b9419ea8f8d62b5473bf51f40e3">fc_sizeofDataType</a>(dataType));
<a name="l04696"></a>04696     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04697"></a>04697   }
<a name="l04698"></a>04698 
<a name="l04699"></a>04699   <span class="comment">// Fun!</span>
<a name="l04700"></a>04700   <span class="keywordflow">if</span> (dataType == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>) {
<a name="l04701"></a>04701     <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>) 
<a name="l04702"></a>04702       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04703"></a>04703         ((<span class="keywordtype">char</span>*)(*data))[i] = ((<span class="keywordtype">int</span>*)data_orig)[i];
<a name="l04704"></a>04704     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>) 
<a name="l04705"></a>04705       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04706"></a>04706         ((<span class="keywordtype">char</span>*)(*data))[i] = ((<span class="keywordtype">float</span>*)data_orig)[i];
<a name="l04707"></a>04707     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>) 
<a name="l04708"></a>04708       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04709"></a>04709         ((<span class="keywordtype">char</span>*)(*data))[i] = ((<span class="keywordtype">double</span>*)data_orig)[i];
<a name="l04710"></a>04710   }
<a name="l04711"></a>04711   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>) {
<a name="l04712"></a>04712     <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>) 
<a name="l04713"></a>04713       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04714"></a>04714         ((<span class="keywordtype">int</span>*)(*data))[i] = ((<span class="keywordtype">char</span>*)data_orig)[i];
<a name="l04715"></a>04715     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>) 
<a name="l04716"></a>04716       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04717"></a>04717         ((<span class="keywordtype">int</span>*)(*data))[i] = ((<span class="keywordtype">float</span>*)data_orig)[i];
<a name="l04718"></a>04718     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>) 
<a name="l04719"></a>04719       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04720"></a>04720         ((<span class="keywordtype">int</span>*)(*data))[i] = ((<span class="keywordtype">double</span>*)data_orig)[i];
<a name="l04721"></a>04721   }
<a name="l04722"></a>04722   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>) {
<a name="l04723"></a>04723     <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>) 
<a name="l04724"></a>04724       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04725"></a>04725         ((<span class="keywordtype">float</span>*)(*data))[i] = ((<span class="keywordtype">char</span>*)data_orig)[i];
<a name="l04726"></a>04726     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>) 
<a name="l04727"></a>04727       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04728"></a>04728         ((<span class="keywordtype">float</span>*)(*data))[i] = ((<span class="keywordtype">int</span>*)data_orig)[i];
<a name="l04729"></a>04729     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>) 
<a name="l04730"></a>04730       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04731"></a>04731         ((<span class="keywordtype">float</span>*)(*data))[i] = ((<span class="keywordtype">double</span>*)data_orig)[i];
<a name="l04732"></a>04732   }
<a name="l04733"></a>04733   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>) {
<a name="l04734"></a>04734     <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>) 
<a name="l04735"></a>04735       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04736"></a>04736         ((<span class="keywordtype">double</span>*)(*data))[i] = ((<span class="keywordtype">char</span>*)data_orig)[i];
<a name="l04737"></a>04737     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>) 
<a name="l04738"></a>04738       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04739"></a>04739         ((<span class="keywordtype">double</span>*)(*data))[i] = ((<span class="keywordtype">int</span>*)data_orig)[i];
<a name="l04740"></a>04740     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dataType_orig == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>) 
<a name="l04741"></a>04741       <span class="keywordflow">for</span> (i = 0; i &lt; numTotal; i++)
<a name="l04742"></a>04742         ((<span class="keywordtype">double</span>*)(*data))[i] = ((<span class="keywordtype">float</span>*)data_orig)[i];
<a name="l04743"></a>04743   }
<a name="l04744"></a>04744   
<a name="l04745"></a>04745   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04746"></a>04746 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g26d6dc6119ce91abb2d2b0edf17865f6"></a><!-- doxytag: member="variable.c::fc_getVariableDataPtr" ref="g26d6dc6119ce91abb2d2b0edf17865f6" args="(FC_Variable variable, void **data_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableDataPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>data_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the data in a variable. 
<p>
<b>Description:</b> <p>
Return a pointer to the data array. This must be treated as read-only. If the user wants to change the data they must make a copy first.<p>
Can also be used to get the data in a step of a sequence variable by calling with the variable handle for the desired step.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>data_p</em>&nbsp;</td><td>
output - pointer to data array, treat as read only </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04591">4591</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="fileio_8c-source.html#l02158">_fc_readVariableData()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="variableP_8h-source.html#l00096">_FC_VarSlot::data</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00497">doDoubles()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00439">doSingles()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="varmath_8c-source.html#l00566">fc_constOperatorVar()</a>, <a class="el" href="variable_8c-source.html#l00816">fc_copyGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l00722">fc_copyGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l01259">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01384">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l00927">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l01037">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="mesh_8c-source.html#l00713">fc_createSubsetMesh()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="geom_8c-source.html#l00352">fc_getDisplacedMeshCoords()</a>, <a class="el" href="geom_8c-source.html#l04240">fc_getDisplacedSubsetVolume()</a>, <a class="el" href="variable_8c-source.html#l04890">fc_getSeqVariableDataPointSlice()</a>, <a class="el" href="statistics_8c-source.html#l00891">fc_getSeqVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00764">fc_getSeqVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="geom_8c-source.html#l04344">fc_getSubsetArea()</a>, <a class="el" href="geom_8c-source.html#l04129">fc_getSubsetVolume()</a>, <a class="el" href="variable_8c-source.html#l04649">fc_getVariableDataAsDataType()</a>, <a class="el" href="statistics_8c-source.html#l00212">fc_getVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00097">fc_getVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00542">fc_getVariableSubsetMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00394">fc_getVariableSubsetMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00664">fc_getVariableSubsetSum()</a>, <a class="el" href="statistics_8c-source.html#l00303">fc_getVariableSum()</a>, <a class="el" href="geom_8c-source.html#l02836">fc_getVariableWeightedDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03267">fc_getVariableWeightedDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l02734">fc_getVariableWeightedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03138">fc_getVariableWeightedSubsetCentroid()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="variable_8c-source.html#l05123">fc_printSeqVariableRange()</a>, <a class="el" href="subset_8c-source.html#l02369">fc_printSubsetOfVariable()</a>, <a class="el" href="variable_8c-source.html#l04970">fc_printVariable()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l00481">fc_varOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00386">fc_varOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="ex2__bigDataAccess_8c-source.html#l00071">main()</a>, <a class="el" href="ex3__createCharactrztn_8c-source.html#l00081">myCharacterizationFunkyAve()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00535">origWriteout()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00591">writeoutCompare()</a>.<div class="fragment"><pre class="fragment"><a name="l04594"></a>04594   {
<a name="l04595"></a>04595   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l04596"></a>04596   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04597"></a>04597   
<a name="l04598"></a>04598   <span class="comment">// default</span>
<a name="l04599"></a>04599   <span class="keywordflow">if</span> (data_p)
<a name="l04600"></a>04600     *data_p = NULL;
<a name="l04601"></a>04601   
<a name="l04602"></a>04602   <span class="comment">// check input</span>
<a name="l04603"></a>04603   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04604"></a>04604   <span class="keywordflow">if</span> (varSlot == NULL || data_p == NULL) {
<a name="l04605"></a>04605     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04606"></a>04606     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04607"></a>04607   }
<a name="l04608"></a>04608   
<a name="l04609"></a>04609   <span class="comment">// log message</span>
<a name="l04610"></a>04610   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting data for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04611"></a>04611 
<a name="l04612"></a>04612   <span class="comment">// lazy fetching of data done here</span>
<a name="l04613"></a>04613   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a> == NULL &amp;&amp; varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a> == 1) {
<a name="l04614"></a>04614     rc = <a class="code" href="group__PrivateFileIO.html#gf2f857cebf9330f22adf7ca16f571ea2">_fc_readVariableData</a>(variable);
<a name="l04615"></a>04615     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l04616"></a>04616       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Lazy loading of data for variable '%s' failed"</span>,
<a name="l04617"></a>04617                             varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04618"></a>04618       <span class="keywordflow">return</span> rc;
<a name="l04619"></a>04619     }
<a name="l04620"></a>04620   }
<a name="l04621"></a>04621 
<a name="l04622"></a>04622   <span class="comment">// fill in requested value</span>
<a name="l04623"></a>04623   *data_p = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a>;
<a name="l04624"></a>04624   
<a name="l04625"></a>04625   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04626"></a>04626 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gf3d21db4053db4c375b752348965c554"></a><!-- doxytag: member="variable.c::fc_getVariableDataType" ref="gf3d21db4053db4c375b752348965c554" args="(FC_Variable variable, FC_DataType *datatype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableDataType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> *&nbsp;</td>
          <td class="paramname"> <em>datatype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the data type of a variable. 
<p>
<b>Description:</b> <p>
Returns the type that the variable data is stored as (e.g. float, int, double, etc&gt;<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return datatype = FC_DT_UNKNOWN, and input check for datatype = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>datatype</em>&nbsp;</td><td>
output - type float, int, char, etc </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04374">4374</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00095">_FC_VarSlot::datatype</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, and <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>.<div class="fragment"><pre class="fragment"><a name="l04377"></a>04377   {
<a name="l04378"></a>04378   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04379"></a>04379   
<a name="l04380"></a>04380   <span class="comment">// set up defaults</span>
<a name="l04381"></a>04381   <span class="keywordflow">if</span> (datatype != NULL) 
<a name="l04382"></a>04382     *datatype = <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>;
<a name="l04383"></a>04383   
<a name="l04384"></a>04384   <span class="comment">// check input</span>
<a name="l04385"></a>04385   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04386"></a>04386   <span class="keywordflow">if</span> (varSlot == NULL || datatype == NULL) {
<a name="l04387"></a>04387     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04388"></a>04388     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04389"></a>04389   }
<a name="l04390"></a>04390   
<a name="l04391"></a>04391   <span class="comment">// log message</span>
<a name="l04392"></a>04392   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting data type for variable '%s'"</span>, 
<a name="l04393"></a>04393                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04394"></a>04394 
<a name="l04395"></a>04395   <span class="comment">// fill in requested value</span>
<a name="l04396"></a>04396   *datatype = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b7e2036e21baa4893dd3e4720da3e80e">datatype</a>;
<a name="l04397"></a>04397   
<a name="l04398"></a>04398   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04399"></a>04399 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g415dc8be07262ef04c7c66028bc0217f"></a><!-- doxytag: member="variable.c::fc_getVariableInfo" ref="g415dc8be07262ef04c7c66028bc0217f" args="(FC_Variable variable, int *numDataPoint, int *numComponent, FC_AssociationType *assoc, FC_MathType *mathtype, FC_DataType *datatype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableInfo           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numDataPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> *&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> *&nbsp;</td>
          <td class="paramname"> <em>datatype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get information about a variable. 
<p>
<b>Description:</b> <p>
Returns the number of data points and number of components in the variable (the total number of values is numDataPoint*numComponent). Also returns the association type, math type, and data type.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/16/03 RM, added setting default values to FC_**_UNKNOWN for data types and -1 for number of data points and number of components </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>numDataPoint</em>&nbsp;</td><td>
output - the number of data points </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
output - the number of components </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
output - data association (e.g. vertex, element, etc.) </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
output - the organization of components (e.g. scalar, vector, etc.) </td></tr>
<tr><td valign="top"><em>datatype</em>&nbsp;</td><td>
output - data type (e.g. int, float, etc.) </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04309">4309</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00091">_FC_VarSlot::assoc</a>, <a class="el" href="variableP_8h-source.html#l00095">_FC_VarSlot::datatype</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00093">_FC_VarSlot::mathtype</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="variableP_8h-source.html#l00088">_FC_VarSlot::numComponent</a>, and <a class="el" href="variableP_8h-source.html#l00084">_FC_VarSlot::numDataPoint</a>.
<p>
Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="exodusio_8c-source.html#l01825">_fc_writeExodusDataset()</a>, <a class="el" href="fcswapAssoc_8c-source.html#l00045">checkVarAndCreateName()</a>, <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="varmath_8c-source.html#l00566">fc_constOperatorVar()</a>, <a class="el" href="variable_8c-source.html#l00816">fc_copyGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l00722">fc_copyGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l01259">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01384">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l00927">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l01037">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="mesh_8c-source.html#l00713">fc_createSubsetMesh()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="geom_8c-source.html#l00352">fc_getDisplacedMeshCoords()</a>, <a class="el" href="variable_8c-source.html#l04890">fc_getSeqVariableDataPointSlice()</a>, <a class="el" href="variable_8c-source.html#l04764">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="statistics_8c-source.html#l00891">fc_getSeqVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00764">fc_getSeqVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="variable_8c-source.html#l04649">fc_getVariableDataAsDataType()</a>, <a class="el" href="statistics_8c-source.html#l00212">fc_getVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00097">fc_getVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00542">fc_getVariableSubsetMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00394">fc_getVariableSubsetMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00664">fc_getVariableSubsetSum()</a>, <a class="el" href="statistics_8c-source.html#l00303">fc_getVariableSum()</a>, <a class="el" href="geom_8c-source.html#l02836">fc_getVariableWeightedDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03267">fc_getVariableWeightedDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l02734">fc_getVariableWeightedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03138">fc_getVariableWeightedSubsetCentroid()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="geom_8c-source.html#l00309">fc_isValidDisplacementVariable()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l02229">fc_mergeComponentSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="variable_8c-source.html#l05123">fc_printSeqVariableRange()</a>, <a class="el" href="subset_8c-source.html#l02369">fc_printSubsetOfVariable()</a>, <a class="el" href="variable_8c-source.html#l04970">fc_printVariable()</a>, <a class="el" href="mesh_8c-source.html#l01665">fc_releaseMesh()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l00481">fc_varOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00386">fc_varOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>, and <a class="el" href="ex3__createCharactrztn_8c-source.html#l00081">myCharacterizationFunkyAve()</a>.<div class="fragment"><pre class="fragment"><a name="l04318"></a>04318   {
<a name="l04319"></a>04319   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04320"></a>04320   
<a name="l04321"></a>04321   <span class="comment">// set default values</span>
<a name="l04322"></a>04322   <span class="keywordflow">if</span> (datatype != NULL)
<a name="l04323"></a>04323     *datatype = <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>;
<a name="l04324"></a>04324   <span class="keywordflow">if</span> (assoc != NULL)
<a name="l04325"></a>04325     *assoc = <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>;
<a name="l04326"></a>04326   <span class="keywordflow">if</span> (numDataPoint != NULL)
<a name="l04327"></a>04327     *numDataPoint = -1;
<a name="l04328"></a>04328   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> != NULL)
<a name="l04329"></a>04329     *<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> = -1;
<a name="l04330"></a>04330   <span class="keywordflow">if</span> (mathtype != NULL)
<a name="l04331"></a>04331     *mathtype = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>;
<a name="l04332"></a>04332   
<a name="l04333"></a>04333   <span class="comment">// check input</span>
<a name="l04334"></a>04334   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04335"></a>04335   <span class="keywordflow">if</span> (varSlot == NULL || 
<a name="l04336"></a>04336       (!numDataPoint &amp;&amp; !<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> &amp;&amp; !assoc &amp;&amp; !mathtype &amp;&amp; !datatype)) { 
<a name="l04337"></a>04337      <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s, invalid variable"</span>, 
<a name="l04338"></a>04338               <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04339"></a>04339     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04340"></a>04340   }
<a name="l04341"></a>04341   
<a name="l04342"></a>04342   <span class="comment">// log message</span>
<a name="l04343"></a>04343   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting info for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04344"></a>04344 
<a name="l04345"></a>04345   <span class="comment">// fill in requested values</span>
<a name="l04346"></a>04346   <span class="keywordflow">if</span> (datatype != NULL)
<a name="l04347"></a>04347     *datatype = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b7e2036e21baa4893dd3e4720da3e80e">datatype</a>;
<a name="l04348"></a>04348   <span class="keywordflow">if</span> (assoc != NULL)
<a name="l04349"></a>04349     *assoc = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#034de266af584d7188674788825fc70f">assoc</a>;
<a name="l04350"></a>04350   <span class="keywordflow">if</span> (numDataPoint != NULL)
<a name="l04351"></a>04351     *numDataPoint = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#39ae135b8a4a5d4e981568fb129200f4">numDataPoint</a>;
<a name="l04352"></a>04352   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> != NULL)
<a name="l04353"></a>04353     *<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#e9c0c38566909ab6d1fbb78998aeb005">numComponent</a>;
<a name="l04354"></a>04354   <span class="keywordflow">if</span> (mathtype != NULL)
<a name="l04355"></a>04355     *mathtype = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#f1b6e6c0fe2193b6f002946d78b09325">mathtype</a>;
<a name="l04356"></a>04356   
<a name="l04357"></a>04357   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04358"></a>04358 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd98897c36ca177106761a4214085551c"></a><!-- doxytag: member="variable.c::fc_getVariableMathType" ref="gd98897c36ca177106761a4214085551c" args="(FC_Variable variable, FC_MathType *mathtype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableMathType           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> *&nbsp;</td>
          <td class="paramname"> <em>mathtype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the math type of a variable. 
<p>
<b>Description:</b> <p>
The math type of a data point describes the organization of the data point's components. E.g. FC_MT_VECTOR describes a vector organization of the components like X, Y &amp; Z.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return mathtype = FC_MT_UNKNOWN, and input check for mathtype = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
output - the math type of the the data points </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04500">4500</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00093">_FC_VarSlot::mathtype</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.<div class="fragment"><pre class="fragment"><a name="l04503"></a>04503   {
<a name="l04504"></a>04504   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04505"></a>04505   
<a name="l04506"></a>04506   <span class="comment">// set default values</span>
<a name="l04507"></a>04507   <span class="keywordflow">if</span> (mathtype != NULL)
<a name="l04508"></a>04508     *mathtype = <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>; 
<a name="l04509"></a>04509   
<a name="l04510"></a>04510   <span class="comment">// check input</span>
<a name="l04511"></a>04511   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04512"></a>04512   <span class="keywordflow">if</span> (varSlot == NULL || mathtype == NULL) {
<a name="l04513"></a>04513     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04514"></a>04514     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04515"></a>04515   }
<a name="l04516"></a>04516   
<a name="l04517"></a>04517   <span class="comment">// log message</span>
<a name="l04518"></a>04518   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting math type for variable '%s'"</span>, 
<a name="l04519"></a>04519                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04520"></a>04520 
<a name="l04521"></a>04521   <span class="comment">// fill in requested value</span>
<a name="l04522"></a>04522   *mathtype = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#f1b6e6c0fe2193b6f002946d78b09325">mathtype</a>;
<a name="l04523"></a>04523   
<a name="l04524"></a>04524   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04525"></a>04525 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g3ec29251d717c5d0ca4ecfd9824f67b1"></a><!-- doxytag: member="variable.c::fc_getVariableName" ref="g3ec29251d717c5d0ca4ecfd9824f67b1" args="(FC_Variable variable, char **varName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableName           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>varName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return name of a variable. 
<p>
<b>Description:</b> <p>
Return the name associated with a variable handle. Space is allocated for the string so it needs to be freed by the user when finished.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>Aug, 9, 2002. W Koegler Used to be _fc_get_vid_name. Now it's public.</li><li>12/16/03 RM, added default NULL return value </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>varName</em>&nbsp;</td><td>
output - variable name, space allocated here and must be freed by user when finished </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04152">4152</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="fcswapAssoc_8c-source.html#l00045">checkVarAndCreateName()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00439">doSingles()</a>, <a class="el" href="variable_8c-source.html#l01986">fc_createComponentSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="mesh_8c-source.html#l00713">fc_createSubsetMesh()</a>, <a class="el" href="subset_8c-source.html#l02369">fc_printSubsetOfVariable()</a>, <a class="el" href="volumeSegments_8c-source.html#l00378">isThresholdable()</a>, <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00324">makeIntersecting()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00402">makeNormal()</a>, <a class="el" href="seriesAnalyzer_8c-source.html#l00535">origWriteout()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00591">writeoutCompare()</a>.<div class="fragment"><pre class="fragment"><a name="l04156"></a>04156   {
<a name="l04157"></a>04157   <span class="keywordtype">char</span> *cp;
<a name="l04158"></a>04158   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04159"></a>04159   
<a name="l04160"></a>04160   <span class="comment">// set default return value</span>
<a name="l04161"></a>04161   <span class="keywordflow">if</span> (varName)
<a name="l04162"></a>04162     *varName = NULL;
<a name="l04163"></a>04163   
<a name="l04164"></a>04164   <span class="comment">// check input</span>
<a name="l04165"></a>04165   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04166"></a>04166   <span class="keywordflow">if</span> (varSlot == NULL || varName == NULL) { 
<a name="l04167"></a>04167     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04168"></a>04168     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04169"></a>04169   }
<a name="l04170"></a>04170   
<a name="l04171"></a>04171   <span class="comment">// log message</span>
<a name="l04172"></a>04172   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting name for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04173"></a>04173 
<a name="l04174"></a>04174   <span class="comment">// copy name</span>
<a name="l04175"></a>04175   cp = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>;
<a name="l04176"></a>04176   *varName = malloc(strlen(cp) + 1);
<a name="l04177"></a>04177   <span class="keywordflow">if</span> (*varName == NULL) {
<a name="l04178"></a>04178     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l04179"></a>04179     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l04180"></a>04180   }
<a name="l04181"></a>04181   strcpy(*varName, cp);
<a name="l04182"></a>04182 
<a name="l04183"></a>04183   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04184"></a>04184 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g954ae36f975a3fe850f18db5b3e15fc5"></a><!-- doxytag: member="variable.c::fc_getVariableNumComponent" ref="g954ae36f975a3fe850f18db5b3e15fc5" args="(FC_Variable variable, int *numComponent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableNumComponent           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numComponent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return number of components of a variable. 
<p>
<b>Description:</b> <p>
Return the number of components that make up a data point. This will always be 1 for scalar data, 2+ for vectors, etc. The total number of data values is numDataPoint * numComponent.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return numComponent = -1, and input check for numComponent = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
output - number of components </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04458">4458</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="variableP_8h-source.html#l00088">_FC_VarSlot::numComponent</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l01986">fc_createComponentSeqVariables()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="volumeSegments_8c-source.html#l00378">isThresholdable()</a>, and <a class="el" href="loadHistory_8c-source.html#l00064">main()</a>.<div class="fragment"><pre class="fragment"><a name="l04461"></a>04461   {
<a name="l04462"></a>04462   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04463"></a>04463   
<a name="l04464"></a>04464   <span class="comment">// set up defaults</span>
<a name="l04465"></a>04465   <span class="keywordflow">if</span>(<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> != NULL)
<a name="l04466"></a>04466     *<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> = -1 ; 
<a name="l04467"></a>04467   
<a name="l04468"></a>04468   <span class="comment">// check input</span>
<a name="l04469"></a>04469   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04470"></a>04470   <span class="keywordflow">if</span> (varSlot == NULL || <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> == NULL) {
<a name="l04471"></a>04471     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04472"></a>04472     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04473"></a>04473   }
<a name="l04474"></a>04474   
<a name="l04475"></a>04475   <span class="comment">// log message</span>
<a name="l04476"></a>04476   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting numComponent for variable '%s'"</span>, 
<a name="l04477"></a>04477                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04478"></a>04478 
<a name="l04479"></a>04479   <span class="comment">// fill in requested value</span>
<a name="l04480"></a>04480   *<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#e9c0c38566909ab6d1fbb78998aeb005">numComponent</a>;
<a name="l04481"></a>04481   
<a name="l04482"></a>04482   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04483"></a>04483 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gca6fc2e25075838bc8b2ef3a347efb20"></a><!-- doxytag: member="variable.c::fc_getVariableNumDataPoint" ref="gca6fc2e25075838bc8b2ef3a347efb20" args="(FC_Variable variable, int *numDataPoint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariableNumDataPoint           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numDataPoint</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return number of data points in a variable. 
<p>
<b>Description:</b> <p>
The number of data points will be equal to the number of mesh subentities that the variable is associated with. NumComponent is the number of values per point. The total number of data values is numDataPoint * numComponent;<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>12/11/03 RM, added default return numDataPoint = -1, and input check for numDataPoint = NULL </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>numDataPoint</em>&nbsp;</td><td>
output - count of data items </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04543">4543</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="variableP_8h-source.html#l00084">_FC_VarSlot::numDataPoint</a>.
<p>
Referenced by <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="geom_8c-source.html#l04240">fc_getDisplacedSubsetVolume()</a>, <a class="el" href="geom_8c-source.html#l04129">fc_getSubsetVolume()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.<div class="fragment"><pre class="fragment"><a name="l04546"></a>04546   { 
<a name="l04547"></a>04547   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04548"></a>04548   
<a name="l04549"></a>04549   <span class="comment">// set default values</span>
<a name="l04550"></a>04550   <span class="keywordflow">if</span>(numDataPoint != NULL)
<a name="l04551"></a>04551     *numDataPoint = -1;
<a name="l04552"></a>04552   
<a name="l04553"></a>04553   <span class="comment">// check input</span>
<a name="l04554"></a>04554   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04555"></a>04555   <span class="keywordflow">if</span> (varSlot == NULL || numDataPoint == NULL) {
<a name="l04556"></a>04556     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04557"></a>04557     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04558"></a>04558   }
<a name="l04559"></a>04559   
<a name="l04560"></a>04560   <span class="comment">// log message</span>
<a name="l04561"></a>04561   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting numDataPoint for variable '%s'"</span>, 
<a name="l04562"></a>04562                       varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l04563"></a>04563 
<a name="l04564"></a>04564   <span class="comment">// fill in requested value</span>
<a name="l04565"></a>04565   *numDataPoint = varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#39ae135b8a4a5d4e981568fb129200f4">numDataPoint</a>;
<a name="l04566"></a>04566   
<a name="l04567"></a>04567   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04568"></a>04568 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g74cf87c790d013532d9451af1b5f1fbb"></a><!-- doxytag: member="variable.c::fc_getVariables" ref="g74cf87c790d013532d9451af1b5f1fbb" args="(FC_Mesh mesh, int *numVar, FC_Variable **variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_getVariables           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Mesh.html">FC_Mesh</a>&nbsp;</td>
          <td class="paramname"> <em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>numVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the variables in a mesh. 
<p>
<b>Description:</b> <p>
Returns an array of variables in the mesh. The caller is responsible for freeing the array of variable handles.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>2003-NOV-14 WSK Changed to only names of basic variables, not all.</li><li>12/11/03 RM, added default return values, numVar = -1, varNames = NULL check input/output for numVar = NULL</li><li>9/8/04 WSK, changed to return variable handles instead of variable names. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>mesh</em>&nbsp;</td><td>
input - mesh </td></tr>
<tr><td valign="top"><em>numVar</em>&nbsp;</td><td>
output - number of variables </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
output - array of variable handles </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02503">2503</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="tableP_8h-source.html#l00076">_FC_GET_HANDLE</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05441">_fc_getVarSlotFromID()</a>, <a class="el" href="meshP_8h-source.html#l00185">_FC_MeshSlot::basicVarIDs</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, and <a class="el" href="meshP_8h-source.html#l00184">_FC_MeshSlot::numBasicVar</a>.
<p>
Referenced by <a class="el" href="exodusio_8c-source.html#l01825">_fc_writeExodusDataset()</a>, <a class="el" href="mesh_8c-source.html#l00460">fc_copyMesh()</a>, <a class="el" href="mesh_8c-source.html#l00713">fc_createSubsetMesh()</a>, <a class="el" href="mesh_8c-source.html#l01859">fc_deleteMesh()</a>, <a class="el" href="mesh_8c-source.html#l01665">fc_releaseMesh()</a>, <a class="el" href="fileio_8c-source.html#l01776">fc_rewriteDataset()</a>, and <a class="el" href="ex1__intro_8c-source.html#l00069">main()</a>.<div class="fragment"><pre class="fragment"><a name="l02507"></a>02507   {
<a name="l02508"></a>02508   <span class="keywordtype">int</span> i;
<a name="l02509"></a>02509   <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l02510"></a>02510   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l02511"></a>02511   
<a name="l02512"></a>02512   <span class="comment">// set up defaults</span>
<a name="l02513"></a>02513   <span class="keywordflow">if</span> (numVar != NULL)
<a name="l02514"></a>02514     *numVar = -1;
<a name="l02515"></a>02515   <span class="keywordflow">if</span> (variables != NULL)
<a name="l02516"></a>02516     *variables = NULL;
<a name="l02517"></a>02517   
<a name="l02518"></a>02518   <span class="comment">// check input</span>
<a name="l02519"></a>02519   meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(mesh);
<a name="l02520"></a>02520   <span class="keywordflow">if</span> (meshSlot == NULL || numVar == NULL || variables == NULL) {
<a name="l02521"></a>02521     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02522"></a>02522     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02523"></a>02523   }
<a name="l02524"></a>02524   
<a name="l02525"></a>02525   <span class="comment">// log message</span>
<a name="l02526"></a>02526   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Getting variables for mesh '%s'"</span>,
<a name="l02527"></a>02527                       meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l02528"></a>02528 
<a name="l02529"></a>02529   <span class="comment">// get num variable</span>
<a name="l02530"></a>02530   *numVar = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>;
<a name="l02531"></a>02531   
<a name="l02532"></a>02532   <span class="comment">// get variables</span>
<a name="l02533"></a>02533   <span class="keywordflow">if</span> (meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a> &gt; 0) {
<a name="l02534"></a>02534     *variables = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>) * meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>);
<a name="l02535"></a>02535     <span class="keywordflow">if</span> (*variables == NULL) {
<a name="l02536"></a>02536       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02537"></a>02537       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02538"></a>02538     }
<a name="l02539"></a>02539     <span class="keywordflow">for</span> (i = 0; i &lt; meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#88b05e75ef784f490ef6bef3d1e0388b">numBasicVar</a>; i++) {
<a name="l02540"></a>02540       varSlot = <a class="code" href="group__PrivateVariable.html#g67d980676a7a4cd939487a7070c68a02">_fc_getVarSlotFromID</a>(meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#5a672f4074dfa02a1bbdd667a09852e8">basicVarIDs</a>[i]);
<a name="l02541"></a>02541       <a class="code" href="group__PrivateTable.html#gc5ef4396668306a24b76028dda975a26">_FC_GET_HANDLE</a>((*variables)[i], varSlot);
<a name="l02542"></a>02542     }
<a name="l02543"></a>02543   }
<a name="l02544"></a>02544   
<a name="l02545"></a>02545   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l02546"></a>02546 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g6da3e04586ef55d558c3300b10ab0cb6"></a><!-- doxytag: member="variable.c::fc_isSeqVariableValid" ref="g6da3e04586ef55d558c3300b10ab0cb6" args="(int numStep, FC_Variable *seqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isSeqVariableValid           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that the handle refers to a valid variable. 
<p>
<b>Description:</b> <p>
Returns 1 (true) if the seq variable is valid, and 0 (false) if it is not. (Valid means numStep is correct and all variable handles are valid and in correct order).<p>
<b>Modifications:</b> <ul>
<li>09/23/04 WSK Created.</li><li>9/19/2006 WSD Added behavior so handles variables owned by datasets as well. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in seq var </td></tr>
<tr><td valign="top"><em>seqVar</em>&nbsp;</td><td>
input - seq var (array of vars) </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04054">4054</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="sequence_8c-source.html#l02130">_fc_getSeqSlot()</a>, <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="variable_8c-source.html#l04032">fc_isVariableValid()</a>, <a class="el" href="base_8c-source.html#l00773">FC_NULL_MESH</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="datasetP_8h-source.html#l00098">_FC_DsSlot::numSeqVar</a>, <a class="el" href="meshP_8h-source.html#l00186">_FC_MeshSlot::numSeqVar</a>, <a class="el" href="sequenceP_8h-source.html#l00080">_FC_SeqSlot::numStep</a>, <a class="el" href="variableP_8h-source.html#l00079">_FC_VarSlot::sequence</a>, <a class="el" href="datasetP_8h-source.html#l00100">_FC_DsSlot::seqVarIDs</a>, <a class="el" href="meshP_8h-source.html#l00188">_FC_MeshSlot::seqVarIDs</a>, and <a class="el" href="tableP_8h-source.html#l00095">_FC_SlotHeader::slotID</a>.
<p>
Referenced by <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="variable_8c-source.html#l03706">fc_changeSeqVariableName()</a>, <a class="el" href="varmath_8c-source.html#l01394">fc_constOperatorSeqVar()</a>, <a class="el" href="variable_8c-source.html#l00816">fc_copyGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01259">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01384">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l01986">fc_createComponentSeqVariables()</a>, <a class="el" href="variable_8c-source.html#l03938">fc_deleteSeqVariable()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="series_8c-source.html#l02844">fc_euclideanDistanceBetweenCurves()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04193">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04890">fc_getSeqVariableDataPointSlice()</a>, <a class="el" href="statistics_8c-source.html#l00891">fc_getSeqVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00764">fc_getSeqVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l02229">fc_mergeComponentSeqVariables()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="varmath_8c-source.html#l00655">fc_operatorSeqVar()</a>, <a class="el" href="variable_8c-source.html#l03802">fc_releaseSeqVariable()</a>, <a class="el" href="varmath_8c-source.html#l00979">fc_seqConstOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02640">fc_seqVarBinaryFunctionConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02414">fc_seqVarBinaryFunctionSeqConstSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02546">fc_seqVarBinaryFunctionSeqVarConst()</a>, <a class="el" href="varmath_8c-source.html#l02284">fc_seqVarBinaryFunctionSeqVarSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l02179">fc_seqVarBinaryFunctionSeqVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01296">fc_seqVarOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l00858">fc_seqVarOperatorSeqConst()</a>, <a class="el" href="varmath_8c-source.html#l00747">fc_seqVarOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l02094">fc_seqVarUnaryFunction()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, and <a class="el" href="volumeSegments_8c-source.html#l00087">main()</a>.<div class="fragment"><pre class="fragment"><a name="l04057"></a>04057   {
<a name="l04058"></a>04058   <span class="keywordtype">int</span> i;
<a name="l04059"></a>04059   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04060"></a>04060   <a class="code" href="struct__FC__SeqSlot.html">_FC_SeqSlot</a>* seqSlot;
<a name="l04061"></a>04061   <span class="keywordtype">int</span> var_id;  <span class="comment">// id's into mesh's slotID arrays</span>
<a name="l04062"></a>04062   <span class="keywordtype">int</span> num, **slots;
<a name="l04063"></a>04063 
<a name="l04064"></a>04064   <span class="comment">// quick check</span>
<a name="l04065"></a>04065   <span class="keywordflow">if</span> (numStep &lt; 0 || seqVar == NULL || !<a class="code" href="group__Variable.html#g888dc4800278e9343a1c35599fa82d63">fc_isVariableValid</a>(seqVar[0])) 
<a name="l04066"></a>04066     <span class="keywordflow">return</span> 0;
<a name="l04067"></a>04067   <span class="comment">// check that numStep agrees with sequence</span>
<a name="l04068"></a>04068   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(seqVar[0]);
<a name="l04069"></a>04069   seqSlot = <a class="code" href="group__PrivateSequence.html#ge669615c173acc924f9664fa05672e7f">_fc_getSeqSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#c4af91e9c0cb1fa702ada198d5bd3c90">sequence</a>);
<a name="l04070"></a>04070   <span class="keywordflow">if</span> (numStep != seqSlot-&gt;<a class="code" href="struct__FC__SeqSlot.html#a3fcf3738a975fbb592f656c1aec2014">numStep</a>)
<a name="l04071"></a>04071     <span class="keywordflow">return</span> 0;
<a name="l04072"></a>04072   <span class="comment">// check that all steps are valid and are from the same variable</span>
<a name="l04073"></a>04073   <span class="comment">// instead of checking metadata, we check against the parent's list</span>
<a name="l04074"></a>04074   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>, <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>)) {
<a name="l04075"></a>04075     <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a> *dsSlot =<a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a>);
<a name="l04076"></a>04076     num = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#a04a1304c1d80b6f51130b99d06aa014">numSeqVar</a>;
<a name="l04077"></a>04077     slots = dsSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#b82e667d1d1462e62ef06f9808735120">seqVarIDs</a>;
<a name="l04078"></a>04078   }
<a name="l04079"></a>04079   <span class="keywordflow">else</span> {
<a name="l04080"></a>04080     <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a> *meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>);
<a name="l04081"></a>04081     num = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#99623d4b89899c071806a6d0b4492ae2">numSeqVar</a>;
<a name="l04082"></a>04082     slots = meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#4875049ef97cdce27533cbcdb6a5d145">seqVarIDs</a>;
<a name="l04083"></a>04083   }
<a name="l04084"></a>04084   var_id = -1;
<a name="l04085"></a>04085   <span class="keywordflow">for</span> (i = 0; i &lt; num; i++) {
<a name="l04086"></a>04086     <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#bcade4ee6957823bf234769051debf4d">slotID</a> == slots[i][0]) {
<a name="l04087"></a>04087       var_id = i;
<a name="l04088"></a>04088       <span class="keywordflow">break</span>;
<a name="l04089"></a>04089     }
<a name="l04090"></a>04090   }
<a name="l04091"></a>04091   <span class="keywordflow">if</span> (var_id == -1) {
<a name="l04092"></a>04092     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"bad code? shouldn't ever happen?"</span>);
<a name="l04093"></a>04093     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l04094"></a>04094   }
<a name="l04095"></a>04095   <span class="keywordflow">for</span> (i = 1; i &lt; numStep; i++) {
<a name="l04096"></a>04096     <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g888dc4800278e9343a1c35599fa82d63">fc_isVariableValid</a>(seqVar[i]) ||
<a name="l04097"></a>04097      seqVar[i].slotID != slots[var_id][i])
<a name="l04098"></a>04098       <span class="keywordflow">return</span> 0;
<a name="l04099"></a>04099   }
<a name="l04100"></a>04100 
<a name="l04101"></a>04101   <span class="comment">// passed all tests</span>
<a name="l04102"></a>04102   <span class="keywordflow">return</span> 1;
<a name="l04103"></a>04103 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gb955e49911e5be0218cdb3dde8283165"></a><!-- doxytag: member="variable.c::fc_isVariableGlobal" ref="gb955e49911e5be0218cdb3dde8283165" args="(FC_Variable variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isVariableGlobal           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that whether a variable is global. 
<p>
<b>Description:</b> <p>
Returns 1 (true) if the variable is a global variable, 0 (false) if it is not, and an error code (&lt; 0) if the handle is not valid.<p>
NOTE: The test for a global variable is that the owning mesh is NULL.<p>
<b>Modifications:</b> <ul>
<li>09/21/2006 </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04119">4119</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00773">FC_NULL_MESH</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, and <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>.
<p>
Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="threshold_8c-source.html#l00224">fc_createThresholdRangeSubset()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="geom_8c-source.html#l06028">fc_displacedGeomSmoothSeqVariable()</a>, <a class="el" href="geom_8c-source.html#l05926">fc_geomSmoothSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="variable_8c-source.html#l00467">fc_setVariableData()</a>, <a class="el" href="variable_8c-source.html#l00602">fc_setVariableDataPtr()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l00386">fc_varOperatorVar()</a>, and <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>.<div class="fragment"><pre class="fragment"><a name="l04121"></a>04121   {
<a name="l04122"></a>04122   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a> *varSlot;
<a name="l04123"></a>04123 
<a name="l04124"></a>04124   <span class="comment">// check input</span>
<a name="l04125"></a>04125   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04126"></a>04126   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l04127"></a>04127     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04128"></a>04128     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04129"></a>04129   }
<a name="l04130"></a>04130   
<a name="l04131"></a>04131   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>, <a class="code" href="group__Handles.html#gae2d5f3d9f81cdfbf228e0dca85c9c75">FC_NULL_MESH</a>))
<a name="l04132"></a>04132     <span class="keywordflow">return</span> 1;
<a name="l04133"></a>04133   <span class="keywordflow">else</span>
<a name="l04134"></a>04134     <span class="keywordflow">return</span> 0;
<a name="l04135"></a>04135 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g888dc4800278e9343a1c35599fa82d63"></a><!-- doxytag: member="variable.c::fc_isVariableValid" ref="g888dc4800278e9343a1c35599fa82d63" args="(FC_Variable variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fc_isVariableValid           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that the handle refers to a valid variable. 
<p>
<b>Description:</b> <p>
Returns 1 (true) if the handle is valid, and 0 (false) if it is not.<p>
<b>Modifications:</b> <ul>
<li>05/25/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04032">4032</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="table_8c-source.html#l00332">_fc_isHandleValid()</a>, <a class="el" href="base_8h-source.html#l00301">FC_Variable::slotID</a>, <a class="el" href="base_8h-source.html#l00302">FC_Variable::uID</a>, <a class="el" href="variable_8c-source.html#l00099">varTable</a>, and <a class="el" href="variable_8c-source.html#l00094">varTableSize</a>.
<p>
Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="geom_8c-source.html#l05181">_fc_getSubsetsProximityArgsTest()</a>, <a class="el" href="varmath_8c-source.html#l00566">fc_constOperatorVar()</a>, <a class="el" href="variable_8c-source.html#l01665">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="threshold_8c-source.html#l00224">fc_createThresholdRangeSubset()</a>, <a class="el" href="threshold_8c-source.html#l00088">fc_createThresholdSubset()</a>, <a class="el" href="variable_8c-source.html#l04649">fc_getVariableDataAsDataType()</a>, <a class="el" href="statistics_8c-source.html#l00212">fc_getVariableMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00097">fc_getVariableMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00542">fc_getVariableSubsetMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l00394">fc_getVariableSubsetMinMax()</a>, <a class="el" href="statistics_8c-source.html#l00664">fc_getVariableSubsetSum()</a>, <a class="el" href="statistics_8c-source.html#l00303">fc_getVariableSum()</a>, <a class="el" href="geom_8c-source.html#l02836">fc_getVariableWeightedDisplacedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03267">fc_getVariableWeightedDisplacedSubsetCentroid()</a>, <a class="el" href="geom_8c-source.html#l02734">fc_getVariableWeightedMeshCentroid()</a>, <a class="el" href="geom_8c-source.html#l03138">fc_getVariableWeightedSubsetCentroid()</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="geom_8c-source.html#l00309">fc_isValidDisplacementVariable()</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="subset_8c-source.html#l02369">fc_printSubsetOfVariable()</a>, <a class="el" href="varmath_8c-source.html#l02742">fc_seqVarBinaryFunctionSeqVarVar()</a>, <a class="el" href="varmath_8c-source.html#l02835">fc_seqVarBinaryFunctionVarSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l01101">fc_seqVarOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l00481">fc_varOperatorConst()</a>, <a class="el" href="varmath_8c-source.html#l01201">fc_varOperatorSeqVar()</a>, <a class="el" href="varmath_8c-source.html#l00386">fc_varOperatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="volumeSegments_8c-source.html#l00087">main()</a>, and <a class="el" href="ex3__createCharactrztn_8c-source.html#l00081">myCharacterizationFunkyAve()</a>.<div class="fragment"><pre class="fragment"><a name="l04034"></a>04034   {
<a name="l04035"></a>04035   <span class="keywordflow">return</span> <a class="code" href="group__PrivateTable.html#gad0539bd0e7ba29168e2a05b2e0b5e33">_fc_isHandleValid</a>(variable.<a class="code" href="structFC__Variable.html#50a48d652e28bbf977bfae246ad57a9e">slotID</a>, variable.<a class="code" href="structFC__Variable.html#0a9c152cc27d0a56161efe087ca5fa90">uID</a>, <a class="code" href="group__PrivateVariable.html#gae6de899e3bcc32af90f48a06b8ec737">varTableSize</a>,
<a name="l04036"></a>04036                            (<a class="code" href="struct__FC__SlotHeader.html">_FC_SlotHeader</a>**)<a class="code" href="group__PrivateVariable.html#gd1d1d34f3ee56e044f2a69aed6d2f4b0">varTable</a>);
<a name="l04037"></a>04037 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g09cb767856e717bf0b5273b0cdc22aac"></a><!-- doxytag: member="variable.c::fc_mergeComponentSeqVariables" ref="g09cb767856e717bf0b5273b0cdc22aac" args="(int numComponent, int numStep, FC_Variable **compSeqVars, char *name, FC_MathType mathtype, FC_Variable **newSeqVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_mergeComponentSeqVariables           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>compSeqVars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a>&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> **&nbsp;</td>
          <td class="paramname"> <em>newSeqVar</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new multicomponent seq variable from a group of scalars. 
<p>
<b>Description:</b> <p>
This routines creates a new multicomponent sequence variable from a group of scalar sequence variables. The components must all be on the same sequence and on the same mesh, they must all have the same association type and data type.<p>
<b>Modifications:</b> <ul>
<li>01/19/05 WSK, Created.</li><li>9/22/2006 WSD modified to handle global vars </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
input - the number of components </td></tr>
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variables </td></tr>
<tr><td valign="top"><em>compSeqVars</em>&nbsp;</td><td>
input - the array of component seqVars </td></tr>
<tr><td valign="top"><em>name</em>&nbsp;</td><td>
input - the name of the new merged var </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
input - the mathtype of the new merged var </td></tr>
<tr><td valign="top"><em>newSeqVar</em>&nbsp;</td><td>
output - the new merged seq var </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02229">2229</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l01665">fc_convertVariablesToSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04268">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04193">fc_getSequenceFromSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00262">fc_isMathTypeValid()</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l03571">fc_getOrGenerateUniqueSeqVariableByName()</a>.<div class="fragment"><pre class="fragment"><a name="l02236"></a>02236   {
<a name="l02237"></a>02237   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l02238"></a>02238   <span class="keywordtype">int</span> i, j;
<a name="l02239"></a>02239   <span class="keywordtype">int</span> numData, temp_numData, temp_numComp;
<a name="l02240"></a>02240   <a class="code" href="structFC__Sequence.html">FC_Sequence</a> sequence, temp_sequence;
<a name="l02241"></a>02241   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh, temp_mesh;
<a name="l02242"></a>02242   <a class="code" href="structFC__Variable.html">FC_Variable</a> *merged_vars, *temp_vars;
<a name="l02243"></a>02243   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc, temp_assoc;
<a name="l02244"></a>02244   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype, temp_datatype;
<a name="l02245"></a>02245 
<a name="l02246"></a>02246   <span class="comment">// set default return values</span>
<a name="l02247"></a>02247   <span class="keywordflow">if</span> (newSeqVar)
<a name="l02248"></a>02248     *newSeqVar = NULL;
<a name="l02249"></a>02249 
<a name="l02250"></a>02250   <span class="comment">// check input</span>
<a name="l02251"></a>02251   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> &lt; 2 || !compSeqVars || !name || 
<a name="l02252"></a>02252       !<a class="code" href="group__DataTypes.html#gbd1cf52dd23b903f86c6a49033e866a9">fc_isMathTypeValid</a>(mathtype) || mathtype == <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a> || 
<a name="l02253"></a>02253       mathtype == <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a> || !newSeqVar) {
<a name="l02254"></a>02254     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02255"></a>02255     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02256"></a>02256   }
<a name="l02257"></a>02257   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>; i++) {
<a name="l02258"></a>02258     <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(numStep, compSeqVars[i])) {
<a name="l02259"></a>02259       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02260"></a>02260       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02261"></a>02261     }
<a name="l02262"></a>02262   }
<a name="l02263"></a>02263   
<a name="l02264"></a>02264   <span class="comment">// log message</span>
<a name="l02265"></a>02265   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Merging component seq variables into new seq var."</span>);
<a name="l02266"></a>02266 
<a name="l02267"></a>02267   <span class="comment">// get &amp; test component seq variable's info</span>
<a name="l02268"></a>02268   <span class="keywordflow">for</span> (i = 0; i &lt; numComponent; i++) {
<a name="l02269"></a>02269     rc = <a class="code" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a>(compSeqVars[i][0], &amp;temp_mesh);
<a name="l02270"></a>02270     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02271"></a>02271       <span class="keywordflow">return</span> rc;
<a name="l02272"></a>02272     <span class="keywordflow">if</span> (i == 0)
<a name="l02273"></a>02273       mesh = temp_mesh;
<a name="l02274"></a>02274     <span class="keywordflow">else</span> {
<a name="l02275"></a>02275       <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(mesh, temp_mesh)) {
<a name="l02276"></a>02276         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Components were not all on the same mesh"</span>);
<a name="l02277"></a>02277         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02278"></a>02278       }  
<a name="l02279"></a>02279     }
<a name="l02280"></a>02280     rc = <a class="code" href="group__Variable.html#gea428de5a2584716f6e2bc77cd339544">fc_getSequenceFromSeqVariable</a>(numStep, compSeqVars[i],
<a name="l02281"></a>02281                                        &amp;temp_sequence);
<a name="l02282"></a>02282     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02283"></a>02283       <span class="keywordflow">return</span> rc;
<a name="l02284"></a>02284     <span class="keywordflow">if</span> (i == 0)
<a name="l02285"></a>02285       sequence = temp_sequence;
<a name="l02286"></a>02286     <span class="keywordflow">else</span> {
<a name="l02287"></a>02287       <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(sequence, temp_sequence)) {
<a name="l02288"></a>02288         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Components were not all on the same sequence"</span>);
<a name="l02289"></a>02289         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02290"></a>02290       }  
<a name="l02291"></a>02291     }
<a name="l02292"></a>02292     rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(compSeqVars[i][0], &amp;temp_numData, &amp;temp_numComp, 
<a name="l02293"></a>02293                             &amp;temp_assoc, NULL, &amp;temp_datatype);
<a name="l02294"></a>02294     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02295"></a>02295       <span class="keywordflow">return</span> rc;
<a name="l02296"></a>02296     <span class="keywordflow">if</span> (temp_numComp != 1) {
<a name="l02297"></a>02297       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Component %d was not a scalar"</span>, i);
<a name="l02298"></a>02298       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02299"></a>02299     }
<a name="l02300"></a>02300     <span class="keywordflow">if</span> (i == 0) {
<a name="l02301"></a>02301       numData = temp_numData;
<a name="l02302"></a>02302       assoc = temp_assoc;
<a name="l02303"></a>02303       datatype = temp_datatype;
<a name="l02304"></a>02304     }
<a name="l02305"></a>02305     <span class="keywordflow">else</span> {
<a name="l02306"></a>02306       <span class="keywordflow">if</span> (temp_numData != numData || temp_assoc != assoc || 
<a name="l02307"></a>02307           temp_datatype != datatype) {
<a name="l02308"></a>02308         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Components did not have all the same metadata"</span>);
<a name="l02309"></a>02309         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02310"></a>02310       }
<a name="l02311"></a>02311     }
<a name="l02312"></a>02312   }
<a name="l02313"></a>02313 
<a name="l02314"></a>02314   <span class="comment">// Basic procedure: use fc_mergeComponentVariables() to create a merged </span>
<a name="l02315"></a>02315   <span class="comment">// variable for each step of the seq vars, then convert merged variables</span>
<a name="l02316"></a>02316   <span class="comment">// back into a sequence var.</span>
<a name="l02317"></a>02317 
<a name="l02318"></a>02318   <span class="comment">// Make room to save merged vars</span>
<a name="l02319"></a>02319   merged_vars = (<a class="code" href="structFC__Variable.html">FC_Variable</a>*)malloc(numStep*<span class="keyword">sizeof</span>(<a class="code" href="structFC__Variable.html">FC_Variable</a>));
<a name="l02320"></a>02320   <span class="keywordflow">if</span> (!merged_vars) {
<a name="l02321"></a>02321     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02322"></a>02322     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02323"></a>02323   }
<a name="l02324"></a>02324 
<a name="l02325"></a>02325   <span class="comment">// make merged vars</span>
<a name="l02326"></a>02326   temp_vars = (FC_Variable*)malloc(numComponent*<span class="keyword">sizeof</span>(FC_Variable));
<a name="l02327"></a>02327   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l02328"></a>02328     <span class="keywordflow">for</span> (j = 0; j &lt; numComponent; j++)
<a name="l02329"></a>02329       temp_vars[j] = compSeqVars[j][i];
<a name="l02330"></a>02330     rc = <a class="code" href="group__Variable.html#g75cee40dcf0d9c58ef73293e68ddac12">fc_mergeComponentVariables</a>(numComponent, temp_vars, name, mathtype,
<a name="l02331"></a>02331                                     &amp;merged_vars[i]);
<a name="l02332"></a>02332     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02333"></a>02333       <span class="keywordflow">return</span> rc;
<a name="l02334"></a>02334   }
<a name="l02335"></a>02335   free(temp_vars);
<a name="l02336"></a>02336 
<a name="l02337"></a>02337   <span class="comment">// make merged vars into merged seqVar;</span>
<a name="l02338"></a>02338   rc = <a class="code" href="group__Variable.html#g61fe9ebf0de41291042f685580b6d272">fc_convertVariablesToSeqVariable</a>(numStep, merged_vars, sequence,
<a name="l02339"></a>02339                                         name, newSeqVar);
<a name="l02340"></a>02340   free(merged_vars);
<a name="l02341"></a>02341   <span class="keywordflow">return</span> rc;    
<a name="l02342"></a>02342 }       
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g75cee40dcf0d9c58ef73293e68ddac12"></a><!-- doxytag: member="variable.c::fc_mergeComponentVariables" ref="g75cee40dcf0d9c58ef73293e68ddac12" args="(int numComponent, FC_Variable *components, char *name, FC_MathType mathtype, FC_Variable *new_var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_mergeComponentVariables           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>components</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a>&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>new_var</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new multicomponent variable from a group of scalars. 
<p>
<b>Description:</b> <p>
This routines creates a new multicomponent variable from a group of scalar variables. The components must all be on the same mesh and have the same association type and data type.<p>
<b>Modifications:</b> <ul>
<li>05/03/04 WSK, Created.</li><li>9/22/2006 WSD modified to handle global vars </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
input - the number of components </td></tr>
<tr><td valign="top"><em>components</em>&nbsp;</td><td>
input - the components vars </td></tr>
<tr><td valign="top"><em>name</em>&nbsp;</td><td>
input - the name of the new merged var </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
input - the mathtype of the new merged var </td></tr>
<tr><td valign="top"><em>new_var</em>&nbsp;</td><td>
output - the new merged var </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l02090">2090</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l00122">fc_createGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l00284">fc_createVariable()</a>, <a class="el" href="variable_8c-source.html#l04228">fc_getDatasetFromVariable()</a>, <a class="el" href="variable_8c-source.html#l04268">fc_getMeshFromVariable()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00262">fc_isMathTypeValid()</a>, <a class="el" href="variable_8c-source.html#l04119">fc_isVariableGlobal()</a>, <a class="el" href="variable_8c-source.html#l04032">fc_isVariableValid()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="variable_8c-source.html#l00602">fc_setVariableDataPtr()</a>, <a class="el" href="base_8c-source.html#l00740">fc_sizeofDataType()</a>, and <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l03189">fc_getOrGenerateUniqueVariableByName()</a>, and <a class="el" href="variable_8c-source.html#l02229">fc_mergeComponentSeqVariables()</a>.<div class="fragment"><pre class="fragment"><a name="l02096"></a>02096   {
<a name="l02097"></a>02097         
<a name="l02098"></a>02098   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l02099"></a>02099   <span class="keywordtype">int</span> i, j;
<a name="l02100"></a>02100   <span class="keywordtype">int</span> numData, temp_numData, temp_numComp;
<a name="l02101"></a>02101   <a class="code" href="structFC__Dataset.html">FC_Dataset</a> dataset, temp_dataset;
<a name="l02102"></a>02102   <a class="code" href="structFC__Mesh.html">FC_Mesh</a> mesh, temp_mesh;
<a name="l02103"></a>02103   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc, temp_assoc;
<a name="l02104"></a>02104   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> datatype, temp_datatype;
<a name="l02105"></a>02105   <span class="keywordtype">void</span> **data, *new_data;
<a name="l02106"></a>02106   size_t size;
<a name="l02107"></a>02107 
<a name="l02108"></a>02108   <span class="comment">// set default return values</span>
<a name="l02109"></a>02109   <span class="keywordflow">if</span> (new_var)
<a name="l02110"></a>02110     *new_var = <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>;
<a name="l02111"></a>02111 
<a name="l02112"></a>02112   <span class="comment">// check input</span>
<a name="l02113"></a>02113   <span class="keywordflow">if</span> (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> &lt; 2 || components == NULL || name == NULL || 
<a name="l02114"></a>02114       !<a class="code" href="group__DataTypes.html#gbd1cf52dd23b903f86c6a49033e866a9">fc_isMathTypeValid</a>(mathtype) || mathtype == <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a> || 
<a name="l02115"></a>02115       mathtype == <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a> || new_var == NULL) {
<a name="l02116"></a>02116     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02117"></a>02117     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02118"></a>02118   }
<a name="l02119"></a>02119   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>; i++) {
<a name="l02120"></a>02120     <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g888dc4800278e9343a1c35599fa82d63">fc_isVariableValid</a>(components[i])) {
<a name="l02121"></a>02121       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02122"></a>02122       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02123"></a>02123     }
<a name="l02124"></a>02124   }
<a name="l02125"></a>02125   
<a name="l02126"></a>02126   <span class="comment">// log message</span>
<a name="l02127"></a>02127   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Merging component variables into new variable."</span>);
<a name="l02128"></a>02128 
<a name="l02129"></a>02129   <span class="comment">// get &amp; test component variables info</span>
<a name="l02130"></a>02130   <span class="keywordflow">for</span> (i = 0; i &lt; numComponent; i++) {
<a name="l02131"></a>02131     rc = <a class="code" href="group__Variable.html#gf9224b61be48617fe1fea54e12c0cbe6">fc_getDatasetFromVariable</a>(components[i], &amp;temp_dataset);
<a name="l02132"></a>02132     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02133"></a>02133       <span class="keywordflow">return</span> rc;
<a name="l02134"></a>02134     rc = <a class="code" href="group__Variable.html#g18aa101c04f3d2189a1f1e4d68c9dc2a">fc_getMeshFromVariable</a>(components[i], &amp;temp_mesh);
<a name="l02135"></a>02135     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02136"></a>02136       <span class="keywordflow">return</span> rc;
<a name="l02137"></a>02137     <span class="keywordflow">if</span> (i == 0) {
<a name="l02138"></a>02138       dataset = temp_dataset;
<a name="l02139"></a>02139       mesh = temp_mesh;
<a name="l02140"></a>02140     }
<a name="l02141"></a>02141     <span class="keywordflow">else</span> {
<a name="l02142"></a>02142       <span class="keywordflow">if</span> (!<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(mesh, temp_mesh) || 
<a name="l02143"></a>02143        !<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(dataset, temp_dataset)) {
<a name="l02144"></a>02144         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02145"></a>02145         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02146"></a>02146       }  
<a name="l02147"></a>02147     }
<a name="l02148"></a>02148     rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(components[i], &amp;temp_numData, &amp;temp_numComp, 
<a name="l02149"></a>02149                               &amp;temp_assoc, NULL, &amp;temp_datatype);
<a name="l02150"></a>02150     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02151"></a>02151       <span class="keywordflow">return</span> rc;
<a name="l02152"></a>02152     <span class="keywordflow">if</span> (temp_numComp != 1) {
<a name="l02153"></a>02153       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l02154"></a>02154       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02155"></a>02155     }
<a name="l02156"></a>02156     <span class="keywordflow">if</span> (i == 0) {
<a name="l02157"></a>02157       numData = temp_numData;
<a name="l02158"></a>02158       assoc = temp_assoc;
<a name="l02159"></a>02159       datatype = temp_datatype;
<a name="l02160"></a>02160     }
<a name="l02161"></a>02161     <span class="keywordflow">else</span> {
<a name="l02162"></a>02162       <span class="keywordflow">if</span> (temp_numData != numData || temp_assoc != assoc || 
<a name="l02163"></a>02163           temp_datatype != datatype) {
<a name="l02164"></a>02164         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Components did not have all the same metadata"</span>);
<a name="l02165"></a>02165         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l02166"></a>02166       }
<a name="l02167"></a>02167     }
<a name="l02168"></a>02168   }
<a name="l02169"></a>02169 
<a name="l02170"></a>02170   <span class="comment">// get data</span>
<a name="l02171"></a>02171   data = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">void</span>*)*numComponent);
<a name="l02172"></a>02172   <span class="keywordflow">if</span> (data == NULL) {
<a name="l02173"></a>02173     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02174"></a>02174     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02175"></a>02175   }
<a name="l02176"></a>02176   <span class="keywordflow">for</span> (i = 0; i &lt; numComponent; i++) {
<a name="l02177"></a>02177     rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(components[i], &amp;data[i]);
<a name="l02178"></a>02178     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02179"></a>02179       <span class="keywordflow">return</span> rc; 
<a name="l02180"></a>02180   }
<a name="l02181"></a>02181 
<a name="l02182"></a>02182   <span class="comment">// create the new data</span>
<a name="l02183"></a>02183   size = <a class="code" href="group__DataTypes.html#g3a159b9419ea8f8d62b5473bf51f40e3">fc_sizeofDataType</a>(datatype);
<a name="l02184"></a>02184   new_data = malloc(size*numComponent*numData);
<a name="l02185"></a>02185   <span class="keywordflow">if</span> (new_data == NULL) {
<a name="l02186"></a>02186     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l02187"></a>02187     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l02188"></a>02188   }
<a name="l02189"></a>02189   <span class="keywordflow">for</span> (i = 0; i &lt; numComponent; i++) 
<a name="l02190"></a>02190     <span class="keywordflow">for</span> (j = 0; j &lt; numData; j++) 
<a name="l02191"></a>02191       memcpy((<span class="keywordtype">char</span>*)new_data + size*(j*numComponent+i), 
<a name="l02192"></a>02192              (<span class="keywordtype">char</span>*)data[i] + size*j, size); 
<a name="l02193"></a>02193 
<a name="l02194"></a>02194   <span class="comment">// create the new variable</span>
<a name="l02195"></a>02195   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(components[0])) 
<a name="l02196"></a>02196     rc = <a class="code" href="group__Variable.html#g3de7edfd0291f0f9f3d246f3a6254925">fc_createGlobalVariable</a>(dataset, name, new_var);
<a name="l02197"></a>02197   <span class="keywordflow">else</span>
<a name="l02198"></a>02198     rc = <a class="code" href="group__Variable.html#g2f498c4fbd85d8094f0f640a17341cb3">fc_createVariable</a>(mesh, name, new_var);
<a name="l02199"></a>02199   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02200"></a>02200     <span class="keywordflow">return</span> rc;
<a name="l02201"></a>02201   rc = <a class="code" href="group__Variable.html#g4491a3d96b7252fd5d0de54089d6838d">fc_setVariableDataPtr</a>(*new_var, numData, numComponent, assoc, mathtype, 
<a name="l02202"></a>02202                              datatype, (<span class="keywordtype">void</span>*)new_data);
<a name="l02203"></a>02203   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l02204"></a>02204     <span class="keywordflow">return</span> rc;
<a name="l02205"></a>02205 
<a name="l02206"></a>02206   <span class="comment">// cleanup</span>
<a name="l02207"></a>02207   <span class="comment">// don't free new_data; </span>
<a name="l02208"></a>02208   <span class="comment">// don't free data's components</span>
<a name="l02209"></a>02209   free(data); 
<a name="l02210"></a>02210 
<a name="l02211"></a>02211   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;    
<a name="l02212"></a>02212 }       
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gcdec47a673b9054bcf3208fcdbd4c541"></a><!-- doxytag: member="variable.c::fc_printSeqVariable" ref="gcdec47a673b9054bcf3208fcdbd4c541" args="(int numStep, FC_Variable *seqVars, char *label, int print_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_printSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print sequence variable meta data to stdout, and optionally the data values. 
<p>
<b>Modifications:</b> <ul>
<li>11/20/03 WSK Created.</li><li>07/23/2007 CDU Turned into a stub that calls fc_printSeqVariableRange </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVars</em>&nbsp;</td><td>
input - the steps of the sequence variable </td></tr>
<tr><td valign="top"><em>label</em>&nbsp;</td><td>
input - label to prepend variable name with, can be NULL </td></tr>
<tr><td valign="top"><em>print_data</em>&nbsp;</td><td>
input - 1 = print the data values. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l05104">5104</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05123">fc_printSeqVariableRange()</a>.
<p>
Referenced by <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>.<div class="fragment"><pre class="fragment"><a name="l05110"></a>05110   {
<a name="l05111"></a>05111   <span class="keywordflow">return</span> <a class="code" href="group__Variable.html#ge0cd27a681fb949bf749760d04b682a9">fc_printSeqVariableRange</a>(numStep, seqVars, -1, -2, label, print_data);
<a name="l05112"></a>05112 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ge0cd27a681fb949bf749760d04b682a9"></a><!-- doxytag: member="variable.c::fc_printSeqVariableRange" ref="ge0cd27a681fb949bf749760d04b682a9" args="(int numStep, FC_Variable *seqVars, int range_start, int range_stop, char *label, int print_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_printSeqVariableRange           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>seqVars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>range_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>range_stop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print sequence variable meta data to stdout, and optionally the data values (with start and stop index values). 
<p>
<b>Modifications:</b> <ul>
<li>11/20/03 WSK Created.</li><li>07/23/2007 CDU Moved guts of printSeqVariable to here and added ranges</li><li>10/31/2007 CDU Added flag to allow printing of reduced number of digits </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
input - number of steps in the sequence variable </td></tr>
<tr><td valign="top"><em>seqVars</em>&nbsp;</td><td>
input - the steps of the sequence variable </td></tr>
<tr><td valign="top"><em>range_start</em>&nbsp;</td><td>
input - offset of first variable to print or -1 for first, -2 for last </td></tr>
<tr><td valign="top"><em>range_stop</em>&nbsp;</td><td>
input - offset of last variable to print or -1 for first, -2 for last </td></tr>
<tr><td valign="top"><em>label</em>&nbsp;</td><td>
input - label to prepend variable name with, can be NULL </td></tr>
<tr><td valign="top"><em>print_data</em>&nbsp;</td><td>
input - 1 = print the data values. 2 = print the data values in exponent form with 5 digits of precision </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l05123">5123</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00476">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00418">fc_getDataTypeText()</a>, <a class="el" href="base_8c-source.html#l00447">fc_getMathTypeText()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00129">fc_printfWarningMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, and <a class="el" href="tableP_8h-source.html#l00057">INDENT_STR</a>.
<p>
Referenced by <a class="el" href="variable_8c-source.html#l05104">fc_printSeqVariable()</a>, and <a class="el" href="fcdump_8c-source.html#l00194">main()</a>.<div class="fragment"><pre class="fragment"><a name="l05134"></a>05134   {
<a name="l05135"></a>05135   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l05136"></a>05136   <span class="keywordtype">int</span> i, j, k;
<a name="l05137"></a>05137   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlots[numStep];
<a name="l05138"></a>05138   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l05139"></a>05139   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l05140"></a>05140   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathType;
<a name="l05141"></a>05141   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> dataType;
<a name="l05142"></a>05142   <span class="keywordtype">void</span>* dbuf;
<a name="l05143"></a>05143   <span class="keywordtype">int</span> start, stop, mod;
<a name="l05144"></a>05144 
<a name="l05145"></a>05145   <span class="comment">// special case: printing a null list is not an error</span>
<a name="l05146"></a>05146   <span class="keywordflow">if</span> (numStep &lt;= 0 &amp;&amp; seqVars == NULL) {
<a name="l05147"></a>05147     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"Printing a NULL sequence variable"</span>);
<a name="l05148"></a>05148     printf(<span class="stringliteral">"Sequence Variable: FC_NULL_VARIABLE\n"</span>);
<a name="l05149"></a>05149     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l05150"></a>05150   }
<a name="l05151"></a>05151 
<a name="l05152"></a>05152   <span class="comment">// check input</span>
<a name="l05153"></a>05153   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l05154"></a>05154     varSlots[i] = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(seqVars[i]);
<a name="l05155"></a>05155     <span class="keywordflow">if</span> (varSlots[i] == NULL) {
<a name="l05156"></a>05156       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l05157"></a>05157       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l05158"></a>05158     }
<a name="l05159"></a>05159   }
<a name="l05160"></a>05160 
<a name="l05161"></a>05161   <span class="comment">// log message</span>
<a name="l05162"></a>05162   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Printing variable '%s'"</span>, varSlots[0]-&gt;header.name);
<a name="l05163"></a>05163 
<a name="l05164"></a>05164   <span class="comment">// print label &amp; var name</span>
<a name="l05165"></a>05165   <span class="keywordflow">if</span> (label)
<a name="l05166"></a>05166     printf(<span class="stringliteral">"%s: "</span>, label);
<a name="l05167"></a>05167   <span class="keywordflow">else</span>
<a name="l05168"></a>05168     printf(<span class="stringliteral">"Sequence Variable: "</span>);
<a name="l05169"></a>05169   printf(<span class="stringliteral">"'%s'\n"</span>, varSlots[0]-&gt;header.name);
<a name="l05170"></a>05170 
<a name="l05171"></a>05171   <span class="comment">// print meta data</span>
<a name="l05172"></a>05172   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(seqVars[0], &amp;numDataPoint, &amp;numComp, &amp;assoc, 
<a name="l05173"></a>05173                             &amp;mathType, &amp;dataType);
<a name="l05174"></a>05174   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l05175"></a>05175     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for seq variable '%s'"</span>,
<a name="l05176"></a>05176                           varSlots[0]-&gt;header.name);
<a name="l05177"></a>05177     <span class="keywordflow">return</span> rc;
<a name="l05178"></a>05178   }
<a name="l05179"></a>05179   printf(<span class="stringliteral">"%snumDataPoint = %d, numComponent = %d, numStep = %d\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, 
<a name="l05180"></a>05180          numDataPoint, numComp, numStep);
<a name="l05181"></a>05181   printf(<span class="stringliteral">"%sassoc = %s, mathType = %s, dataType = %s\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, 
<a name="l05182"></a>05182          <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(assoc), <a class="code" href="group__DataTypes.html#g75a3d1b2b701f9ee9cf45b5ea350ee3e">fc_getMathTypeText</a>(mathType), 
<a name="l05183"></a>05183          <a class="code" href="group__DataTypes.html#g6720a592eace2d7459eb410a3b29cd2f">fc_getDataTypeText</a>(dataType));
<a name="l05184"></a>05184 
<a name="l05185"></a>05185 
<a name="l05186"></a>05186   <span class="comment">// print values</span>
<a name="l05187"></a>05187   <span class="keywordflow">if</span> ((print_data) &amp;&amp; (numStep)) {
<a name="l05188"></a>05188 
<a name="l05189"></a>05189     <span class="comment">//Handle special case where start/stop are the first/last steps</span>
<a name="l05190"></a>05190     <span class="keywordflow">if</span>(range_start&lt;0){
<a name="l05191"></a>05191       start = (range_start==-2) ? numStep-1 : 0;
<a name="l05192"></a>05192     } <span class="keywordflow">else</span> {
<a name="l05193"></a>05193       start = (range_start&gt;numStep-1) ? numStep-1 : range_start;
<a name="l05194"></a>05194     }
<a name="l05195"></a>05195     <span class="keywordflow">if</span>(range_stop&lt;0){
<a name="l05196"></a>05196       stop = (range_stop==-2) ? numStep-1 : 0;
<a name="l05197"></a>05197     } <span class="keywordflow">else</span> {
<a name="l05198"></a>05198       stop = (range_stop&gt;numStep-1) ? numStep-1 : range_stop;
<a name="l05199"></a>05199     }
<a name="l05200"></a>05200 
<a name="l05201"></a>05201     <span class="comment">//Calculate the step size's direction</span>
<a name="l05202"></a>05202     mod   = (start&lt;=stop)   ? 1 : -1;
<a name="l05203"></a>05203 
<a name="l05204"></a>05204     <span class="keywordflow">for</span>(k=start; (mod&gt;0) ? (k&lt;=stop) : (k&gt;=stop) ; k+= mod){
<a name="l05205"></a>05205 
<a name="l05206"></a>05206       rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(seqVars[k], &amp;dbuf);
<a name="l05207"></a>05207       <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l05208"></a>05208         <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for step %d of seq variable"</span>
<a name="l05209"></a>05209                               <span class="stringliteral">" '%s'"</span>, k, varSlots[0]-&gt;header.name);
<a name="l05210"></a>05210         <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l05211"></a>05211       }
<a name="l05212"></a>05212       
<a name="l05213"></a>05213       <span class="comment">// print the data </span>
<a name="l05214"></a>05214       printf(<span class="stringliteral">"%sData (Step %d of seqVar '%s'):\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, 
<a name="l05215"></a>05215              k, varSlots[0]-&gt;header.name);
<a name="l05216"></a>05216       <span class="keywordflow">switch</span> (dataType) {
<a name="l05217"></a>05217       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>: 
<a name="l05218"></a>05218         {
<a name="l05219"></a>05219           <span class="keywordtype">char</span>* cast_buf = (<span class="keywordtype">char</span> *)dbuf;
<a name="l05220"></a>05220           <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l05221"></a>05221             printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, i);
<a name="l05222"></a>05222             <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l05223"></a>05223               printf(<span class="stringliteral">"%c "</span>, cast_buf[i*numComp + j]);
<a name="l05224"></a>05224             printf(<span class="stringliteral">"\n"</span>);
<a name="l05225"></a>05225           }
<a name="l05226"></a>05226         }
<a name="l05227"></a>05227         <span class="keywordflow">break</span>;
<a name="l05228"></a>05228       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>:
<a name="l05229"></a>05229         {
<a name="l05230"></a>05230           <span class="keywordtype">int</span>* cast_buf = (<span class="keywordtype">int</span> *)dbuf;
<a name="l05231"></a>05231           <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l05232"></a>05232             printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, i);
<a name="l05233"></a>05233             <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l05234"></a>05234               printf(<span class="stringliteral">"%6d "</span>, cast_buf[i*numComp + j]);
<a name="l05235"></a>05235             printf(<span class="stringliteral">"\n"</span>);
<a name="l05236"></a>05236           }
<a name="l05237"></a>05237         }
<a name="l05238"></a>05238         <span class="keywordflow">break</span>;
<a name="l05239"></a>05239       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>:
<a name="l05240"></a>05240         {
<a name="l05241"></a>05241           <span class="keywordtype">float</span>* cast_buf = (<span class="keywordtype">float</span> *)dbuf;
<a name="l05242"></a>05242           <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l05243"></a>05243             printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, i);
<a name="l05244"></a>05244             <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l05245"></a>05245               printf(<span class="stringliteral">"%11.6g "</span>, cast_buf[i*numComp + j]);
<a name="l05246"></a>05246             printf(<span class="stringliteral">"\n"</span>);
<a name="l05247"></a>05247           }
<a name="l05248"></a>05248         }
<a name="l05249"></a>05249         <span class="keywordflow">break</span>;
<a name="l05250"></a>05250       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>:
<a name="l05251"></a>05251         {
<a name="l05252"></a>05252           <span class="keywordtype">double</span>* cast_buf = (<span class="keywordtype">double</span> *)dbuf;
<a name="l05253"></a>05253           <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l05254"></a>05254             printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, i);
<a name="l05255"></a>05255             <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l05256"></a>05256               <span class="comment">// FIX? maybe %20.15g so always align</span>
<a name="l05257"></a>05257               <span class="comment">//printf("%11.15g ", cast_buf[i*numComp + j]);</span>
<a name="l05258"></a>05258            <span class="keywordflow">switch</span>(print_data){
<a name="l05259"></a>05259            <span class="keywordflow">case</span> 2:  printf(<span class="stringliteral">"%.5le "</span>,   cast_buf[i*numComp + j]); <span class="keywordflow">break</span>;
<a name="l05260"></a>05260            <span class="keywordflow">default</span>: printf(<span class="stringliteral">"%11.15g "</span>, cast_buf[i*numComp + j]); <span class="keywordflow">break</span>;
<a name="l05261"></a>05261            }
<a name="l05262"></a>05262             printf(<span class="stringliteral">"\n"</span>);
<a name="l05263"></a>05263           }
<a name="l05264"></a>05264         }
<a name="l05265"></a>05265         <span class="keywordflow">break</span>;
<a name="l05266"></a>05266       <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>:
<a name="l05267"></a>05267         printf(<span class="stringliteral">"Cannot print data type '%s'\n"</span>, <a class="code" href="group__DataTypes.html#g6720a592eace2d7459eb410a3b29cd2f">fc_getDataTypeText</a>(dataType));
<a name="l05268"></a>05268       }
<a name="l05269"></a>05269     }
<a name="l05270"></a>05270   }
<a name="l05271"></a>05271 
<a name="l05272"></a>05272   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l05273"></a>05273 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ge86eb5112f1b4cdea235a39bc49aba38"></a><!-- doxytag: member="variable.c::fc_printVariable" ref="ge86eb5112f1b4cdea235a39bc49aba38" args="(FC_Variable variable, char *label, int print_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_printVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>print_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print variable meta data to stdout, and optionally the data values. 
<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins Created.</li><li>11/20/2003 WSK Fixed up. Want to replace a bunch of specific print routines (like printSurfaceNormals).</li><li>10/31/2007 CDU Added flag to allow printing of reduced number of digits </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - data variable </td></tr>
<tr><td valign="top"><em>label</em>&nbsp;</td><td>
input - label to prepend variable name with, can be NULL </td></tr>
<tr><td valign="top"><em>print_data</em>&nbsp;</td><td>
input - 1 = print the data values. 2 = print the data values in exponent form with 5 digits of precision </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l04970">4970</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="base_8c-source.html#l00476">fc_getAssociationTypeText()</a>, <a class="el" href="base_8c-source.html#l00418">fc_getDataTypeText()</a>, <a class="el" href="base_8c-source.html#l00447">fc_getMathTypeText()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="variable_8c-source.html#l04591">fc_getVariableDataPtr()</a>, <a class="el" href="variable_8c-source.html#l04309">fc_getVariableInfo()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="tableP_8h-source.html#l00057">INDENT_STR</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="fcdump_8c-source.html#l00194">main()</a>.<div class="fragment"><pre class="fragment"><a name="l04976"></a>04976   {
<a name="l04977"></a>04977   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l04978"></a>04978   <span class="keywordtype">int</span> i, j;
<a name="l04979"></a>04979   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l04980"></a>04980   <span class="keywordtype">int</span> numDataPoint, numComp;
<a name="l04981"></a>04981   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> assoc;
<a name="l04982"></a>04982   <a class="code" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a> mathType;
<a name="l04983"></a>04983   <a class="code" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a> dataType;
<a name="l04984"></a>04984   <span class="keywordtype">void</span>* dbuf;
<a name="l04985"></a>04985 
<a name="l04986"></a>04986   <span class="comment">// special case: printing a null handle is not an error</span>
<a name="l04987"></a>04987   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(variable, <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>)) {
<a name="l04988"></a>04988     printf(<span class="stringliteral">"Variable: FC_NULL_VARIABLE\n"</span>);
<a name="l04989"></a>04989     fflush(NULL);
<a name="l04990"></a>04990     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l04991"></a>04991   }
<a name="l04992"></a>04992 
<a name="l04993"></a>04993   <span class="comment">// check input</span>
<a name="l04994"></a>04994   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l04995"></a>04995   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l04996"></a>04996     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l04997"></a>04997     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l04998"></a>04998   }
<a name="l04999"></a>04999 
<a name="l05000"></a>05000   <span class="comment">// log message</span>
<a name="l05001"></a>05001   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Printing variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l05002"></a>05002 
<a name="l05003"></a>05003   <span class="comment">// print label &amp; var name</span>
<a name="l05004"></a>05004   <span class="keywordflow">if</span> (label)
<a name="l05005"></a>05005     printf(<span class="stringliteral">"%s: "</span>, label);
<a name="l05006"></a>05006   <span class="keywordflow">else</span>
<a name="l05007"></a>05007     printf(<span class="stringliteral">"Variable: "</span>);
<a name="l05008"></a>05008   printf(<span class="stringliteral">"'%s'\n"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l05009"></a>05009 
<a name="l05010"></a>05010   <span class="comment">// print meta data</span>
<a name="l05011"></a>05011   rc = <a class="code" href="group__Variable.html#g415dc8be07262ef04c7c66028bc0217f">fc_getVariableInfo</a>(variable, &amp;numDataPoint, &amp;numComp, &amp;assoc, 
<a name="l05012"></a>05012                             &amp;mathType, &amp;dataType);
<a name="l05013"></a>05013   <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l05014"></a>05014     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get info for variable '%s'"</span>,
<a name="l05015"></a>05015                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l05016"></a>05016     <span class="keywordflow">return</span> rc;
<a name="l05017"></a>05017   }
<a name="l05018"></a>05018   printf(<span class="stringliteral">"%snumDataPoint = %d, numComponent = %d\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, 
<a name="l05019"></a>05019          numDataPoint, numComp);
<a name="l05020"></a>05020   printf(<span class="stringliteral">"%sassoc = %s, mathType = %s, dataType = %s\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, 
<a name="l05021"></a>05021          <a class="code" href="group__DataTypes.html#gdb7ce28f8a85a1cc1e68b55f64eb54f5">fc_getAssociationTypeText</a>(assoc), <a class="code" href="group__DataTypes.html#g75a3d1b2b701f9ee9cf45b5ea350ee3e">fc_getMathTypeText</a>(mathType), 
<a name="l05022"></a>05022          <a class="code" href="group__DataTypes.html#g6720a592eace2d7459eb410a3b29cd2f">fc_getDataTypeText</a>(dataType));
<a name="l05023"></a>05023 
<a name="l05024"></a>05024   <span class="comment">// print values</span>
<a name="l05025"></a>05025   <span class="keywordflow">if</span> (print_data) {
<a name="l05026"></a>05026     rc = <a class="code" href="group__Variable.html#g26d6dc6119ce91abb2d2b0edf17865f6">fc_getVariableDataPtr</a>(variable, &amp;dbuf);
<a name="l05027"></a>05027     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>) {
<a name="l05028"></a>05028       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Failed to get data for variable '%s'"</span>,
<a name="l05029"></a>05029                             varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l05030"></a>05030       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l05031"></a>05031     }
<a name="l05032"></a>05032     
<a name="l05033"></a>05033     <span class="comment">// print the data </span>
<a name="l05034"></a>05034     printf(<span class="stringliteral">"%sData:\n"</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>);
<a name="l05035"></a>05035     <span class="keywordflow">switch</span> (dataType) {
<a name="l05036"></a>05036     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297a1c2c6e22d293be2bf392b0b2633b387">FC_DT_CHAR</a>: 
<a name="l05037"></a>05037       {
<a name="l05038"></a>05038         <span class="keywordtype">char</span>* cast_buf = (<span class="keywordtype">char</span> *)dbuf;
<a name="l05039"></a>05039         <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l05040"></a>05040           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, i);
<a name="l05041"></a>05041           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l05042"></a>05042             printf(<span class="stringliteral">"%c "</span>, cast_buf[i*numComp + j]);
<a name="l05043"></a>05043           printf(<span class="stringliteral">"\n"</span>);
<a name="l05044"></a>05044         }
<a name="l05045"></a>05045       }
<a name="l05046"></a>05046       <span class="keywordflow">break</span>;
<a name="l05047"></a>05047     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297f0b74a7d9f58ca6960dd832980645f7d">FC_DT_INT</a>:
<a name="l05048"></a>05048       {
<a name="l05049"></a>05049         <span class="keywordtype">int</span>* cast_buf = (<span class="keywordtype">int</span> *)dbuf;
<a name="l05050"></a>05050         <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l05051"></a>05051           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, i);
<a name="l05052"></a>05052           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l05053"></a>05053             printf(<span class="stringliteral">"%6d "</span>, cast_buf[i*numComp + j]);
<a name="l05054"></a>05054           printf(<span class="stringliteral">"\n"</span>);
<a name="l05055"></a>05055         }
<a name="l05056"></a>05056       }
<a name="l05057"></a>05057       <span class="keywordflow">break</span>;
<a name="l05058"></a>05058     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297ad59da2c9908f7fd6dcc81b25680057b">FC_DT_FLOAT</a>:
<a name="l05059"></a>05059       {
<a name="l05060"></a>05060         <span class="keywordtype">float</span>* cast_buf = (<span class="keywordtype">float</span> *)dbuf;
<a name="l05061"></a>05061         <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l05062"></a>05062           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, i);
<a name="l05063"></a>05063           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l05064"></a>05064             printf(<span class="stringliteral">"%11.6g "</span>, cast_buf[i*numComp + j]);
<a name="l05065"></a>05065           printf(<span class="stringliteral">"\n"</span>);
<a name="l05066"></a>05066         }
<a name="l05067"></a>05067       }
<a name="l05068"></a>05068       <span class="keywordflow">break</span>;
<a name="l05069"></a>05069     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a6297806cef8a12ffc6ef267ac21addb95ab3">FC_DT_DOUBLE</a>:
<a name="l05070"></a>05070       {
<a name="l05071"></a>05071         <span class="keywordtype">double</span>* cast_buf = (<span class="keywordtype">double</span> *)dbuf;
<a name="l05072"></a>05072         <span class="keywordflow">for</span> (i = 0; i &lt; numDataPoint; i++) {
<a name="l05073"></a>05073           printf(<span class="stringliteral">"%s%s%d:  "</span>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, <a class="code" href="group__PrivateTable.html#g6b934222896a4b4b02da5ffbb2bd1f83">INDENT_STR</a>, i);
<a name="l05074"></a>05074           <span class="keywordflow">for</span> (j = 0; j &lt; numComp; j++)
<a name="l05075"></a>05075             <span class="comment">//Should be 15 significant digits but there were</span>
<a name="l05076"></a>05076             <span class="comment">//differences between Mac and Linux (sun same as Mac)</span>
<a name="l05077"></a>05077             <span class="comment">//these may be due to rounding differences in printf()</span>
<a name="l05078"></a>05078             <span class="comment">//printf("%20.15g ", cast_buf[i*numComp + j]);</span>
<a name="l05079"></a>05079          <span class="keywordflow">switch</span>(print_data){
<a name="l05080"></a>05080          <span class="keywordflow">case</span> 2:  printf(<span class="stringliteral">"%.5le "</span>,   cast_buf[i*numComp + j]); <span class="keywordflow">break</span>;
<a name="l05081"></a>05081          <span class="keywordflow">default</span>: printf(<span class="stringliteral">"%16.11g "</span>, cast_buf[i*numComp + j]); <span class="keywordflow">break</span>;
<a name="l05082"></a>05082          }
<a name="l05083"></a>05083           printf(<span class="stringliteral">"\n"</span>);
<a name="l05084"></a>05084         }
<a name="l05085"></a>05085       }
<a name="l05086"></a>05086       <span class="keywordflow">break</span>;
<a name="l05087"></a>05087     <span class="keywordflow">case</span> <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>:
<a name="l05088"></a>05088       printf(<span class="stringliteral">"Cannot print data type '%s'\n"</span>, <a class="code" href="group__DataTypes.html#g6720a592eace2d7459eb410a3b29cd2f">fc_getDataTypeText</a>(dataType));
<a name="l05089"></a>05089     }
<a name="l05090"></a>05090   }
<a name="l05091"></a>05091 
<a name="l05092"></a>05092   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l05093"></a>05093 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g6c69f71bf49a208465743d77c291daf3"></a><!-- doxytag: member="variable.c::fc_releaseSeqVariable" ref="g6c69f71bf49a208465743d77c291daf3" args="(int numStep, FC_Variable *variables)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_releaseSeqVariable           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a> *&nbsp;</td>
          <td class="paramname"> <em>variables</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to minimize variable's memory usage. 
<p>
<b>Description:</b> <p>
Call to try and release un-needed memory in a sequence variable. If the variable has been saved to disk, the large data is released. If the variable has not been saved to disk, this will do nothing.<p>
<a class="el" href="group__Variable.html#gb575d3f6365288a17c1117311fd99dce">fc_releaseVariable()</a> can be called on specific steps of the sequence variable.<p>
<b>Modifications:</b> <ul>
<li>04/19/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>numStep</em>&nbsp;</td><td>
Input - Number of steps in the seq variable. </td></tr>
<tr><td valign="top"><em>variables</em>&nbsp;</td><td>
Input - the steps of the seq variable. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03802">3802</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="variable_8c-source.html#l04054">fc_isSeqVariableValid()</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00129">fc_printfWarningMessage</a>, <a class="el" href="variable_8c-source.html#l03755">fc_releaseVariable()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, and <a class="el" href="mesh_8c-source.html#l01665">fc_releaseMesh()</a>.<div class="fragment"><pre class="fragment"><a name="l03805"></a>03805   {
<a name="l03806"></a>03806   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc, rc_keep = <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03807"></a>03807   <span class="keywordtype">int</span> i;  
<a name="l03808"></a>03808   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l03809"></a>03809   
<a name="l03810"></a>03810   <span class="comment">// special case: releasing a null handle is not an error</span>
<a name="l03811"></a>03811   <span class="keywordflow">if</span> (numStep &lt; 1 || variables == NULL) {
<a name="l03812"></a>03812     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"Releasing NULL seq variable"</span>);
<a name="l03813"></a>03813     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03814"></a>03814   }
<a name="l03815"></a>03815 
<a name="l03816"></a>03816   <span class="comment">// check input</span>
<a name="l03817"></a>03817   <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#g6da3e04586ef55d558c3300b10ab0cb6">fc_isSeqVariableValid</a>(numStep, variables)) {
<a name="l03818"></a>03818     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03819"></a>03819     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03820"></a>03820   }
<a name="l03821"></a>03821 
<a name="l03822"></a>03822   <span class="comment">// log message</span>
<a name="l03823"></a>03823   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variables[0]);
<a name="l03824"></a>03824   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Cleaning up variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l03825"></a>03825 
<a name="l03826"></a>03826   <span class="comment">// Do it</span>
<a name="l03827"></a>03827   rc_keep = <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03828"></a>03828   <span class="keywordflow">for</span> (i = 0; i &lt; numStep; i++) {
<a name="l03829"></a>03829     rc = <a class="code" href="group__Variable.html#gb575d3f6365288a17c1117311fd99dce">fc_releaseVariable</a>(variables[i]);
<a name="l03830"></a>03830     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l03831"></a>03831       rc_keep = rc;
<a name="l03832"></a>03832   }
<a name="l03833"></a>03833 
<a name="l03834"></a>03834   <span class="keywordflow">return</span> rc_keep;
<a name="l03835"></a>03835 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gb575d3f6365288a17c1117311fd99dce"></a><!-- doxytag: member="variable.c::fc_releaseVariable" ref="gb575d3f6365288a17c1117311fd99dce" args="(FC_Variable variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_releaseVariable           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Attempt to minimize variable's memory usage. 
<p>
<b>Description:</b> <p>
Call to try and release un-needed memory in a variable. If the variable has been saved to disk, the large data is released. If the variable has not been saved to disk, this will do nothing.<p>
<b>Modifications:</b> <ul>
<li>04/19/04 WSK Created. </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l03755">3755</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="variableP_8h-source.html#l00096">_FC_VarSlot::data</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="base_8h-source.html#l00319">FC_HANDLE_EQUIV</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00778">FC_NULL_VARIABLE</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="library_8h-source.html#l00129">fc_printfWarningMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, and <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>.
<p>
Referenced by <a class="el" href="dataset_8c-source.html#l00585">fc_releaseDataset()</a>, <a class="el" href="mesh_8c-source.html#l01665">fc_releaseMesh()</a>, <a class="el" href="variable_8c-source.html#l03802">fc_releaseSeqVariable()</a>, and <a class="el" href="fc2ensight_8c-source.html#l00090">main()</a>.<div class="fragment"><pre class="fragment"><a name="l03757"></a>03757   {
<a name="l03758"></a>03758   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l03759"></a>03759   
<a name="l03760"></a>03760   <span class="comment">// special case: releasing a null handle is not an error</span>
<a name="l03761"></a>03761   <span class="keywordflow">if</span> (<a class="code" href="group__Handles.html#gf1de8e9eed3c2f3c7ffcaa6527fe0adf">FC_HANDLE_EQUIV</a>(variable, <a class="code" href="group__Handles.html#ge44060288d9dc607cfddcc314cdf48cf">FC_NULL_VARIABLE</a>)) {
<a name="l03762"></a>03762     <a class="code" href="group__Library.html#gbf7b424a5a96a9887547a6545f03e3e2">fc_printfWarningMessage</a>(<span class="stringliteral">"Releasing FC_NULL_VARIABLE"</span>);
<a name="l03763"></a>03763     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03764"></a>03764   }
<a name="l03765"></a>03765 
<a name="l03766"></a>03766   <span class="comment">// check input</span>
<a name="l03767"></a>03767   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l03768"></a>03768   <span class="keywordflow">if</span> (varSlot == NULL) {
<a name="l03769"></a>03769     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l03770"></a>03770     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l03771"></a>03771   }
<a name="l03772"></a>03772   
<a name="l03773"></a>03773   <span class="comment">// log message</span>
<a name="l03774"></a>03774   <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Cleaning up variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l03775"></a>03775 
<a name="l03776"></a>03776   <span class="comment">// remove big data if this slot is committed</span>
<a name="l03777"></a>03777   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a> == 1) {
<a name="l03778"></a>03778     free(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a>);
<a name="l03779"></a>03779     varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a> = NULL;
<a name="l03780"></a>03780   }
<a name="l03781"></a>03781 
<a name="l03782"></a>03782   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l03783"></a>03783 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gabe0bc09ddda4bae29ddb6d12fa07bd2"></a><!-- doxytag: member="variable.c::fc_setVariableData" ref="gabe0bc09ddda4bae29ddb6d12fa07bd2" args="(FC_Variable variable, int numDataPoint, int numComponent, FC_AssociationType assoc, FC_MathType mathtype, FC_DataType datatype, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_setVariableData           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numDataPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a>&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a>&nbsp;</td>
          <td class="paramname"> <em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the variable data by copy. 
<p>
<b>Description:</b> <p>
Sets the data values associated with this new variable. Must provide the number of data points, the number of components per data point, the math type of the data, and the data type of the array. (For example, if you have a 3D vector field associated with the elements of a 10 element mesh, and it'd data type is double, the call would be:<p>
fc_setVariableData(var, 10, 3, FC_AT_ELEMENT, FC_MT_VECTOR, FC_DT_DOUBLE, data);<p>
The data array should be numDataPoint*numComponent long. The order is interleave, that is you give all the components for each point (e.g. P1C1 P1C2 ... P1Cn P2C1 P2C2 ... P1Cn ... PmC1 ... PmCn).<p>
This routine makes a copy of the data for the library, so the user still has responsibility of the original buffer. If you would like to give the data array to the variable instead of just copying them, use <a class="el" href="group__Variable.html#g4491a3d96b7252fd5d0de54089d6838d">fc_setVariableDataPtr()</a>.<p>
<b>Modifications:</b> <ul>
<li>Nancy Collins, Created.</li><li>02/03/04 WSK, Now handles edge &amp; face associated data.</li><li>01/30/06 CDU, Changed logging to support global variables </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>numDataPoint</em>&nbsp;</td><td>
input - the number of data points </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
input - the number of components </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
input - data association (e.g. vertices, elements, etc) </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
input - the organization of components (e.g. scalar, vector, etc.) </td></tr>
<tr><td valign="top"><em>datatype</em>&nbsp;</td><td>
input - data type (e.g. int, float, etc.) </td></tr>
<tr><td valign="top"><em>data</em>&nbsp;</td><td>
input - data buffer </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l00467">467</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00091">_FC_VarSlot::assoc</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="variableP_8h-source.html#l00096">_FC_VarSlot::data</a>, <a class="el" href="variableP_8h-source.html#l00095">_FC_VarSlot::datatype</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l02518">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00285">fc_isAssociationTypeValid()</a>, <a class="el" href="base_8c-source.html#l00239">fc_isDataTypeValid()</a>, <a class="el" href="base_8c-source.html#l00262">fc_isMathTypeValid()</a>, <a class="el" href="variable_8c-source.html#l04119">fc_isVariableGlobal()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="base_8c-source.html#l00740">fc_sizeofDataType()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00093">_FC_VarSlot::mathtype</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="variableP_8h-source.html#l00088">_FC_VarSlot::numComponent</a>, and <a class="el" href="variableP_8h-source.html#l00084">_FC_VarSlot::numDataPoint</a>.
<p>
Referenced by <a class="el" href="series_8c-source.html#l00205">_fc_createSeqVariableFromVariable()</a>, <a class="el" href="series_8c-source.html#l01506">fc_centeredWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01715">fc_centeredWindowAverage_Time()</a>, <a class="el" href="variable_8c-source.html#l00816">fc_copyGlobalSeqVariable()</a>, <a class="el" href="variable_8c-source.html#l00722">fc_copyGlobalVariable()</a>, <a class="el" href="variable_8c-source.html#l01259">fc_copySeqVariable()</a>, <a class="el" href="variable_8c-source.html#l01384">fc_copySeqVariableWithNewAssociation()</a>, <a class="el" href="variable_8c-source.html#l00927">fc_copyVariable()</a>, <a class="el" href="variable_8c-source.html#l01037">fc_copyVariableWithNewAssociation()</a>, <a class="el" href="series_8c-source.html#l00676">fc_firstDerivative_REA()</a>, <a class="el" href="mesh_8c-source.html#l02716">fc_getMeshCoordsAsVariable()</a>, <a class="el" href="variable_8c-source.html#l04764">fc_getSeqVariableDataPointSliceAsSeqVariable()</a>, <a class="el" href="series_8c-source.html#l01027">fc_leadingWindowAverage()</a>, <a class="el" href="series_8c-source.html#l01261">fc_leadingWindowAverage_Time()</a>, <a class="el" href="series_8c-source.html#l00347">fc_linearInterpolation()</a>, <a class="el" href="series_8c-source.html#l02072">fc_normalForm()</a>, <a class="el" href="seriesDemo_8c-source.html#l00075">main()</a>, <a class="el" href="elemdeath__ex1_8c-source.html#l00076">makeDeadVar()</a>, and <a class="el" href="seriesAnalyzer_8c-source.html#l00226">readOneData()</a>.<div class="fragment"><pre class="fragment"><a name="l00477"></a>00477   {
<a name="l00478"></a>00478   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00479"></a>00479   size_t size;
<a name="l00480"></a>00480   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l00481"></a>00481   <span class="keywordtype">int</span> temp_numDataPoint;
<a name="l00482"></a>00482   
<a name="l00483"></a>00483   <span class="comment">// NOTE!: if you change stuff here, also change fc_setVariableDataPtr()</span>
<a name="l00484"></a>00484 
<a name="l00485"></a>00485   <span class="comment">// check input</span>
<a name="l00486"></a>00486   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l00487"></a>00487   <span class="keywordflow">if</span> (varSlot == NULL || numDataPoint &lt; 1 || <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> &lt; 1 || 
<a name="l00488"></a>00488       !<a class="code" href="group__DataTypes.html#g8f5259ca911a1f9ec4cecf5762dc1913">fc_isAssociationTypeValid</a>(assoc) || assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a> || 
<a name="l00489"></a>00489       !<a class="code" href="group__DataTypes.html#gbd1cf52dd23b903f86c6a49033e866a9">fc_isMathTypeValid</a>(mathtype) || mathtype == <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a> ||
<a name="l00490"></a>00490       !<a class="code" href="group__DataTypes.html#ged8b462070c0f2617ee62753bcbe2f19">fc_isDataTypeValid</a>(datatype) || datatype == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a> || 
<a name="l00491"></a>00491       data == NULL) {
<a name="l00492"></a>00492     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00493"></a>00493     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00494"></a>00494   }
<a name="l00495"></a>00495   
<a name="l00496"></a>00496   <span class="comment">// a little more checking --</span>
<a name="l00497"></a>00497   <span class="comment">// a global variable can only have an assoc of FC_AT_WHOLE_DATASET</span>
<a name="l00498"></a>00498   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(variable) &amp;&amp; assoc != <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a>) {
<a name="l00499"></a>00499     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Trying to write non-global data to global var '%s'"</span>,
<a name="l00500"></a>00500                  varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00501"></a>00501     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00502"></a>00502   }
<a name="l00503"></a>00503   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(variable) &amp;&amp; assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a>) {
<a name="l00504"></a>00504     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Trying to write global data to non-global var '%s'"</span>,
<a name="l00505"></a>00505                  varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00506"></a>00506   }
<a name="l00507"></a>00507   <span class="comment">// can't overwrite data</span>
<a name="l00508"></a>00508   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a> != NULL || varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a> == 1) {
<a name="l00509"></a>00509     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Data already exists on variable '%s'"</span>,
<a name="l00510"></a>00510                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00511"></a>00511     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00512"></a>00512   }
<a name="l00513"></a>00513   <span class="comment">// make sure mathtype &amp; numComp are consistent</span>
<a name="l00514"></a>00514   <span class="keywordflow">if</span> ( (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> == 1 &amp;&amp; mathtype != <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>) ||
<a name="l00515"></a>00515        (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> &gt; 1  &amp;&amp; mathtype == <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>) ) {
<a name="l00516"></a>00516     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Inconsistent number of components and math type "</span>
<a name="l00517"></a>00517                           <span class="stringliteral">"for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00518"></a>00518     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00519"></a>00519   }
<a name="l00520"></a>00520   <span class="comment">// Check that numDataPoint is consistent</span>
<a name="l00521"></a>00521   <span class="comment">// (this will also force build edges &amp; faces if necessary)</span>
<a name="l00522"></a>00522   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(variable)) {
<a name="l00523"></a>00523     <span class="keywordflow">if</span> (numDataPoint != 1) {
<a name="l00524"></a>00524       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Global var '%s' can only have 1 datapoint"</span>,
<a name="l00525"></a>00525                    varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00526"></a>00526       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00527"></a>00527     }
<a name="l00528"></a>00528   }
<a name="l00529"></a>00529   <span class="keywordflow">else</span> {
<a name="l00530"></a>00530     rc = <a class="code" href="group__Mesh.html#gf169a555056c84bdfd59839bab4f8d76">fc_getMeshNumEntity</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>, assoc, &amp;temp_numDataPoint);
<a name="l00531"></a>00531     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00532"></a>00532       <span class="keywordflow">return</span> rc;
<a name="l00533"></a>00533     <span class="keywordflow">if</span> (temp_numDataPoint != numDataPoint) {
<a name="l00534"></a>00534       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Inconsistent number of data points and association "</span>
<a name="l00535"></a>00535                           <span class="stringliteral">"type for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00536"></a>00536       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00537"></a>00537     }
<a name="l00538"></a>00538   }
<a name="l00539"></a>00539   
<a name="l00540"></a>00540   <span class="comment">// log message</span>
<a name="l00541"></a>00541   <span class="keywordflow">if</span>(!<a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(variable)){
<a name="l00542"></a>00542     <span class="comment">//For Non-global variables, get the mesh's name</span>
<a name="l00543"></a>00543     <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l00544"></a>00544     meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>);
<a name="l00545"></a>00545     <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertices on mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00546"></a>00546   } <span class="keywordflow">else</span> {
<a name="l00547"></a>00547     <span class="comment">//For global variables, just get the dataset's name</span>
<a name="l00548"></a>00548     <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a> *datasetSlot;
<a name="l00549"></a>00549     datasetSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a>);
<a name="l00550"></a>00550     <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertices for dataset '%s'"</span>,datasetSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#e4b7a27c95934413a822422c50d24f25">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00551"></a>00551   }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553   <span class="comment">// copy metadata</span>
<a name="l00554"></a>00554   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#39ae135b8a4a5d4e981568fb129200f4">numDataPoint</a> = numDataPoint;
<a name="l00555"></a>00555   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#e9c0c38566909ab6d1fbb78998aeb005">numComponent</a> = <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>;
<a name="l00556"></a>00556   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#034de266af584d7188674788825fc70f">assoc</a> = assoc;
<a name="l00557"></a>00557   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#f1b6e6c0fe2193b6f002946d78b09325">mathtype</a> = mathtype;
<a name="l00558"></a>00558   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b7e2036e21baa4893dd3e4720da3e80e">datatype</a> = datatype;
<a name="l00559"></a>00559 
<a name="l00560"></a>00560   <span class="comment">// copy data buffer</span>
<a name="l00561"></a>00561   size = numDataPoint * <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> * <a class="code" href="group__DataTypes.html#g3a159b9419ea8f8d62b5473bf51f40e3">fc_sizeofDataType</a>(datatype);
<a name="l00562"></a>00562   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a> = malloc(size);
<a name="l00563"></a>00563   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a> == NULL) {
<a name="l00564"></a>00564     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>));
<a name="l00565"></a>00565     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>;
<a name="l00566"></a>00566   }
<a name="l00567"></a>00567   memcpy(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a>, data, size);
<a name="l00568"></a>00568   
<a name="l00569"></a>00569   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00570"></a>00570 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g4491a3d96b7252fd5d0de54089d6838d"></a><!-- doxytag: member="variable.c::fc_setVariableDataPtr" ref="g4491a3d96b7252fd5d0de54089d6838d" args="(FC_Variable variable, int numDataPoint, int numComponent, FC_AssociationType assoc, FC_MathType mathtype, FC_DataType datatype, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> fc_setVariableDataPtr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFC__Variable.html">FC_Variable</a>&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numDataPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numComponent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a>&nbsp;</td>
          <td class="paramname"> <em>assoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gf4416c02a52bd37e799d442b985151b3">FC_MathType</a>&nbsp;</td>
          <td class="paramname"> <em>mathtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DataTypes.html#gbbab9b2f35d4bc42e868e4f5853a6297">FC_DataType</a>&nbsp;</td>
          <td class="paramname"> <em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the pointer to the variable data. 
<p>
<b>Description:</b> <p>
Sets the data values associated with this new variable. Must provide the number of data points, the number of components per data point, the math type of the data, and the data type of the array. (For example, if you have a 3D vector field associated with the elements of a 10 element mesh, and it'd data type is double, the call would be:<p>
fc_setVariableData(var, 10, 3, FC_AT_ELEMENT, FC_MT_VECTOR, FC_DT_DOUBLE, data);<p>
The data array should be numDataPoint*numComponent long. The order is interleave, that is you give all the components for each point (e.g. P1C1 P1C2 ... P1Cn P2C1 P2C2 ... P1Cn ... PmC1 ... PmCn).<p>
This routine passes the data array directly to the library, so the user no longer has responsibility of the original buffer. If you would like to keep the data array, you should use <a class="el" href="group__Variable.html#gabe0bc09ddda4bae29ddb6d12fa07bd2">fc_setVariableData()</a> instead which makes a copy of the data array.<p>
<b>Modifications:</b> <ul>
<li>10/01/04 WSK, created.</li><li>01/30/06 CDU, changed logging to support global variables </li></ul>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>variable</em>&nbsp;</td><td>
input - variable handle </td></tr>
<tr><td valign="top"><em>numDataPoint</em>&nbsp;</td><td>
input - the number of data points </td></tr>
<tr><td valign="top"><em>numComponent</em>&nbsp;</td><td>
input - the number of components </td></tr>
<tr><td valign="top"><em>assoc</em>&nbsp;</td><td>
input - data association (e.g. vertices, elements, etc) </td></tr>
<tr><td valign="top"><em>mathtype</em>&nbsp;</td><td>
input - the organization of components (e.g. scalar, vector, etc.) </td></tr>
<tr><td valign="top"><em>datatype</em>&nbsp;</td><td>
input - data type (e.g. int, float, etc.) </td></tr>
<tr><td valign="top"><em>data</em>&nbsp;</td><td>
input - data buffer </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="variable_8c-source.html#l00602">602</a> of file <a class="el" href="variable_8c-source.html">variable.c</a>.
<p>
References <a class="el" href="dataset_8c-source.html#l01029">_fc_getDsSlot()</a>, <a class="el" href="mesh_8c-source.html#l05256">_fc_getMeshSlot()</a>, <a class="el" href="variable_8c-source.html#l05412">_fc_getVarSlot()</a>, <a class="el" href="variableP_8h-source.html#l00091">_FC_VarSlot::assoc</a>, <a class="el" href="tableP_8h-source.html#l00104">_FC_SlotHeader::committed</a>, <a class="el" href="variableP_8h-source.html#l00096">_FC_VarSlot::data</a>, <a class="el" href="variableP_8h-source.html#l00095">_FC_VarSlot::datatype</a>, <a class="el" href="variableP_8h-source.html#l00076">_FC_VarSlot::ds</a>, <a class="el" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a>, <a class="el" href="base_8h-source.html#l00198">FC_AT_WHOLE_DATASET</a>, <a class="el" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="mesh_8c-source.html#l02518">fc_getMeshNumEntity()</a>, <a class="el" href="base_8c-source.html#l00354">fc_getReturnCodeText()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>, <a class="el" href="base_8c-source.html#l00285">fc_isAssociationTypeValid()</a>, <a class="el" href="base_8c-source.html#l00239">fc_isDataTypeValid()</a>, <a class="el" href="base_8c-source.html#l00262">fc_isMathTypeValid()</a>, <a class="el" href="variable_8c-source.html#l04119">fc_isVariableGlobal()</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>, <a class="el" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a>, <a class="el" href="library_8h-source.html#l00096">fc_printfErrorMessage</a>, <a class="el" href="library_8h-source.html#l00162">fc_printfLogMessage</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>, <a class="el" href="variableP_8h-source.html#l00075">_FC_VarSlot::header</a>, <a class="el" href="meshP_8h-source.html#l00095">_FC_MeshSlot::header</a>, <a class="el" href="datasetP_8h-source.html#l00078">_FC_DsSlot::header</a>, <a class="el" href="variableP_8h-source.html#l00093">_FC_VarSlot::mathtype</a>, <a class="el" href="variableP_8h-source.html#l00077">_FC_VarSlot::mesh</a>, <a class="el" href="tableP_8h-source.html#l00100">_FC_SlotHeader::name</a>, <a class="el" href="variableP_8h-source.html#l00088">_FC_VarSlot::numComponent</a>, and <a class="el" href="variableP_8h-source.html#l00084">_FC_VarSlot::numDataPoint</a>.
<p>
Referenced by <a class="el" href="varmath_8c-source.html#l03344">_fc_binaryOperatorCore()</a>, <a class="el" href="geom_8c-source.html#l06615">_fc_geomSmoothCore()</a>, <a class="el" href="fileio_8c-source.html#l00539">_fc_makeVariableFromFile()</a>, <a class="el" href="geom_8c-source.html#l04764">fc_calcMeshDeformationUsingCentroid()</a>, <a class="el" href="geom_8c-source.html#l04650">fc_calcMeshDeformationUsingRefVertex()</a>, <a class="el" href="variable_8c-source.html#l01858">fc_createComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03533">fc_createMagnitudeVariable()</a>, <a class="el" href="varmath_8c-source.html#l03658">fc_createNormalTangentVariables()</a>, <a class="el" href="varmath_8c-source.html#l03847">fc_createNormalTangentVariables2()</a>, <a class="el" href="varmath_8c-source.html#l04078">fc_createStressPressureVariables()</a>, <a class="el" href="mesh_8c-source.html#l00713">fc_createSubsetMesh()</a>, <a class="el" href="series_8c-source.html#l03021">fc_dimensionlessAreaBetweenCurves()</a>, <a class="el" href="geom_8c-source.html#l03503">fc_getDisplacedEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03702">fc_getDisplacedFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l03900">fc_getDisplacedRegionVolumes()</a>, <a class="el" href="geom_8c-source.html#l04542">fc_getDisplacedSurfaceNormals()</a>, <a class="el" href="geom_8c-source.html#l03415">fc_getEdgeLengths()</a>, <a class="el" href="geom_8c-source.html#l03600">fc_getFaceAreas()</a>, <a class="el" href="geom_8c-source.html#l03808">fc_getRegionVolumes()</a>, <a class="el" href="statistics_8c-source.html#l01324">fc_getSeqVariableSeriesMeanSdev()</a>, <a class="el" href="statistics_8c-source.html#l01028">fc_getSeqVariableSeriesMinMax()</a>, <a class="el" href="statistics_8c-source.html#l01584">fc_getSeqVariableSeriesSum()</a>, <a class="el" href="geom_8c-source.html#l04448">fc_getSurfaceNormals()</a>, <a class="el" href="series_8c-source.html#l02270">fc_integral_TR()</a>, <a class="el" href="series_8c-source.html#l02499">fc_linearLeastSquares()</a>, <a class="el" href="variable_8c-source.html#l02090">fc_mergeComponentVariables()</a>, <a class="el" href="varmath_8c-source.html#l00220">fc_operatorVar()</a>, <a class="el" href="varmath_8c-source.html#l01943">fc_varBinaryFunctionConstVar()</a>, <a class="el" href="varmath_8c-source.html#l01801">fc_varBinaryFunctionVarConst()</a>, <a class="el" href="varmath_8c-source.html#l01611">fc_varBinaryFunctionVarVar()</a>, <a class="el" href="varmath_8c-source.html#l01485">fc_varUnaryFunction()</a>, <a class="el" href="gaplines_8c-source.html#l00240">getLinesAsVectors()</a>, and <a class="el" href="gaplines_8c-source.html#l00433">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00612"></a>00612   {
<a name="l00613"></a>00613   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00614"></a>00614   <a class="code" href="struct__FC__VarSlot.html">_FC_VarSlot</a>* varSlot;
<a name="l00615"></a>00615   <span class="keywordtype">int</span> temp_numDataPoint;
<a name="l00616"></a>00616   
<a name="l00617"></a>00617   <span class="comment">// NOTE!: if you change stuff here, also change fc_setVariableData()</span>
<a name="l00618"></a>00618 
<a name="l00619"></a>00619   <span class="comment">// check input</span>
<a name="l00620"></a>00620   varSlot = <a class="code" href="group__PrivateVariable.html#g2b99df3fb78e3936d0976002ca3ce18f">_fc_getVarSlot</a>(variable);
<a name="l00621"></a>00621   <span class="keywordflow">if</span> (varSlot == NULL || numDataPoint &lt; 1 || <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> &lt; 1 || 
<a name="l00622"></a>00622       !<a class="code" href="group__DataTypes.html#g8f5259ca911a1f9ec4cecf5762dc1913">fc_isAssociationTypeValid</a>(assoc) || assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040dc201b7d1982fc7cf126faa5d610fa25">FC_AT_UNKNOWN</a> || 
<a name="l00623"></a>00623       !<a class="code" href="group__DataTypes.html#gbd1cf52dd23b903f86c6a49033e866a9">fc_isMathTypeValid</a>(mathtype) || mathtype == <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b360243d4fe6e959788b2d492ed4b11867">FC_MT_UNKNOWN</a> ||
<a name="l00624"></a>00624       !<a class="code" href="group__DataTypes.html#ged8b462070c0f2617ee62753bcbe2f19">fc_isDataTypeValid</a>(datatype) || datatype == <a class="code" href="group__DataTypes.html#ggbbab9b2f35d4bc42e868e4f5853a62975da602b780b75ca6362662d6a9ad5a5f">FC_DT_UNKNOWN</a> || 
<a name="l00625"></a>00625       data == NULL) {
<a name="l00626"></a>00626     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"%s"</span>, <a class="code" href="group__DataTypes.html#g97ca6452d8a5b6625a2c02166dc87bb7">fc_getReturnCodeText</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>));
<a name="l00627"></a>00627     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00628"></a>00628   }
<a name="l00629"></a>00629   
<a name="l00630"></a>00630   <span class="comment">// a little more checking -- can't overwrite data</span>
<a name="l00631"></a>00631   <span class="comment">// a global variable can only have an assoc of FC_AT_WHOLE_DATASET</span>
<a name="l00632"></a>00632   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(variable) &amp;&amp; assoc != <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a>) {
<a name="l00633"></a>00633     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Trying to write non-global data to global var '%s'"</span>,
<a name="l00634"></a>00634                  varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00635"></a>00635     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00636"></a>00636   }
<a name="l00637"></a>00637   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(variable) &amp;&amp; assoc == <a class="code" href="group__DataTypes.html#gg63044bd7bb5313d8a79ea8a71f1b3040fea6eb08c0f82d61de1d1daab7c5d761">FC_AT_WHOLE_DATASET</a>) {
<a name="l00638"></a>00638     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Trying to write global data to non-global var '%s'"</span>,
<a name="l00639"></a>00639                  varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00640"></a>00640   }
<a name="l00641"></a>00641   <span class="comment">// can't overwrite data</span>
<a name="l00642"></a>00642   <span class="keywordflow">if</span> (varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a> != NULL || varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#0c529177276a4cb118cedda6399e7d1e">committed</a> == 1) {
<a name="l00643"></a>00643     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Data already exists on variable '%s'"</span>,
<a name="l00644"></a>00644                           varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00645"></a>00645     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>;
<a name="l00646"></a>00646   }
<a name="l00647"></a>00647   <span class="comment">// make sure mathtype &amp; numComp are consistent</span>
<a name="l00648"></a>00648   <span class="keywordflow">if</span> ( (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> == 1 &amp;&amp; mathtype != <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>) ||
<a name="l00649"></a>00649        (<a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a> &gt; 1  &amp;&amp; mathtype == <a class="code" href="group__DataTypes.html#ggf4416c02a52bd37e799d442b985151b3599bbbe8f8e41851a17f1037bd44a83f">FC_MT_SCALAR</a>) ) {
<a name="l00650"></a>00650     <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Inconsistent number of components and math type "</span>
<a name="l00651"></a>00651                           <span class="stringliteral">"for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00652"></a>00652     <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00653"></a>00653   }
<a name="l00654"></a>00654   <span class="comment">// Check that numDataPoint is consistent</span>
<a name="l00655"></a>00655   <span class="comment">// (this will also force build edges &amp; faces if necessary)</span>
<a name="l00656"></a>00656   <span class="keywordflow">if</span> (<a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(variable)) {
<a name="l00657"></a>00657     <span class="keywordflow">if</span> (numDataPoint != 1) {
<a name="l00658"></a>00658       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Global var '%s' can only have 1 datapoint"</span>,
<a name="l00659"></a>00659                    varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00660"></a>00660       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00661"></a>00661     }
<a name="l00662"></a>00662   }
<a name="l00663"></a>00663   <span class="keywordflow">else</span> {
<a name="l00664"></a>00664     rc = <a class="code" href="group__Mesh.html#gf169a555056c84bdfd59839bab4f8d76">fc_getMeshNumEntity</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>, assoc, &amp;temp_numDataPoint);
<a name="l00665"></a>00665     <span class="keywordflow">if</span> (rc != <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>)
<a name="l00666"></a>00666       <span class="keywordflow">return</span> rc;
<a name="l00667"></a>00667     <span class="keywordflow">if</span> (temp_numDataPoint != numDataPoint) {
<a name="l00668"></a>00668       <a class="code" href="group__Library.html#gb41a63cb101314fb41df98cef504a556">fc_printfErrorMessage</a>(<span class="stringliteral">"Inconsistent number of data points and association "</span>
<a name="l00669"></a>00669                    <span class="stringliteral">"type for variable '%s'"</span>, varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#6b78cddabfcaf1bdc90aef8b08e9ab03">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00670"></a>00670       <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e4905abab801292d8b6338a89462b8e22">FC_INPUT_ERROR</a>;
<a name="l00671"></a>00671     }
<a name="l00672"></a>00672   }
<a name="l00673"></a>00673 
<a name="l00674"></a>00674   <span class="comment">// log message</span>
<a name="l00675"></a>00675   <span class="keywordflow">if</span>(!<a class="code" href="group__Variable.html#gb955e49911e5be0218cdb3dde8283165">fc_isVariableGlobal</a>(variable)){
<a name="l00676"></a>00676     <span class="comment">//Non-global variable</span>
<a name="l00677"></a>00677     <a class="code" href="struct__FC__MeshSlot.html">_FC_MeshSlot</a>* meshSlot;
<a name="l00678"></a>00678     meshSlot = <a class="code" href="group__PrivateMesh.html#g703c4929b726214df4d4cb3e1ab9d7d0">_fc_getMeshSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#594808d30b52d3543155d17db3f748fa">mesh</a>);
<a name="l00679"></a>00679     <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertices on mesh '%s'"</span>, meshSlot-&gt;<a class="code" href="struct__FC__MeshSlot.html#8acdc27c257edccc827cd77bf05e4f13">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00680"></a>00680   } <span class="keywordflow">else</span> {
<a name="l00681"></a>00681     <span class="comment">//Global variables don't have a mesh. Use the dataset name</span>
<a name="l00682"></a>00682     <a class="code" href="struct__FC__DsSlot.html">_FC_DsSlot</a> *datasetSlot;
<a name="l00683"></a>00683     datasetSlot = <a class="code" href="group__PrivateDataset.html#g42016ac71c44a0188d75d5753adc47b2">_fc_getDsSlot</a>(varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#822f7af1f77f216f40f89c5a75ce549a">ds</a>);
<a name="l00684"></a>00684     <a class="code" href="group__Library.html#g523b10264df36531b23de2260393db30">fc_printfLogMessage</a>(<span class="stringliteral">"Setting vertices for dataset '%s'"</span>,datasetSlot-&gt;<a class="code" href="struct__FC__DsSlot.html#e4b7a27c95934413a822422c50d24f25">header</a>.<a class="code" href="struct__FC__SlotHeader.html#a3977050dc75352e26c943617ee4fcd8">name</a>);
<a name="l00685"></a>00685   }
<a name="l00686"></a>00686 
<a name="l00687"></a>00687   <span class="comment">// copy metadata</span>
<a name="l00688"></a>00688   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#39ae135b8a4a5d4e981568fb129200f4">numDataPoint</a> = numDataPoint;
<a name="l00689"></a>00689   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#e9c0c38566909ab6d1fbb78998aeb005">numComponent</a> = <a class="code" href="seriesAnalyzer_8c.html#6ec7f8d4daae55f80c5164c2e235e339">numComponent</a>;
<a name="l00690"></a>00690   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#034de266af584d7188674788825fc70f">assoc</a> = assoc;
<a name="l00691"></a>00691   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#f1b6e6c0fe2193b6f002946d78b09325">mathtype</a> = mathtype;
<a name="l00692"></a>00692   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#b7e2036e21baa4893dd3e4720da3e80e">datatype</a> = datatype;
<a name="l00693"></a>00693 
<a name="l00694"></a>00694   <span class="comment">// copy data buffer</span>
<a name="l00695"></a>00695   varSlot-&gt;<a class="code" href="struct__FC__VarSlot.html#36fe2d66bffe3f78ab565341b3040bd9">data</a> = data;
<a name="l00696"></a>00696   
<a name="l00697"></a>00697   <span class="keywordflow">return</span> <a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e27738acee5b8b2ef61be6e9b14a26613">FC_SUCCESS</a>;
<a name="l00698"></a>00698 }
</pre></div>
<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Oct 31 11:10:01 2007 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
