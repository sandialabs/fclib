<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FCLib: tools/tearCompare.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>tools/tearCompare.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Report how tears from two different datasets compare. 
<p>
<dl class="rcs" compact><dt><b>Source</b></dt><dd>/usr/local/Repositories/fcdmf/fclib/tools/tearCompare.c,v </dd></dl>
<dl class="rcs" compact><dt><b>Revision</b></dt><dd>1.7 </dd></dl>
<dl class="rcs" compact><dt><b>Date</b></dt><dd>2006/08/30 19:20:04 </dd></dl>
<p>
<b>Description:</b> <p>
Usage: tearCompare tears1.aux tears2.aux<p>
The underlying models of the two datasets must be the same (i.e. have the same mesh topology).<p>
The report assumes that you are interested in how the 2nd set of tears matches up to the 1st. If that is not quite what you want, switch of the order of the arguments.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000127">Todo:</a></b></dt><dd>Produce a graph of tear relationships.</dd></dl>
<b>Modifications:</b> <ul>
<li>07/03/2006 WSD, created. </li></ul>

<p>
Definition in file <a class="el" href="tearCompare_8c-source.html">tearCompare.c</a>.
<p>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &quot;<a class="el" href="fc_8h-source.html">fc.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="fcP_8h-source.html">fcP.h</a>&quot;</code><br>

<p>
Include dependency graph for tearCompare.c:
<p>
<a href="tearCompare_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tearCompare_8c.html#0bce1d6db09bd678b3d6208ff6ddca11">doSubsetsIntersect</a> (char *meshname1, int numMember1, int *memberIDs1, char *meshname2, int numMember2, int *memberIDs2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tearCompare_8c.html#24e6ce6d053864cf5fb7af941457bb0e">main</a> (int argc, char **argv)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="0bce1d6db09bd678b3d6208ff6ddca11"></a><!-- doxytag: member="tearCompare.c::doSubsetsIntersect" ref="0bce1d6db09bd678b3d6208ff6ddca11" args="(char *meshname1, int numMember1, int *memberIDs1, char *meshname2, int numMember2, int *memberIDs2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int doSubsetsIntersect           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>meshname1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numMember1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>memberIDs1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>meshname2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numMember2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>memberIDs2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="tearCompare_8c-source.html#l00070">70</a> of file <a class="el" href="tearCompare_8c-source.html">tearCompare.c</a>.
<p>
Referenced by <a class="el" href="tearCompare_8c-source.html#l00095">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00072"></a>00072 {
<a name="l00073"></a>00073   <span class="keywordtype">int</span> i, j, count = 0;;
<a name="l00074"></a>00074   <span class="comment">// mesh names have to match</span>
<a name="l00075"></a>00075   <span class="keywordflow">if</span> (strcmp(meshname1, meshname2))
<a name="l00076"></a>00076     <span class="keywordflow">return</span> 0;
<a name="l00077"></a>00077   <span class="comment">// find the first matching ID</span>
<a name="l00078"></a>00078   i = 0;
<a name="l00079"></a>00079   j = 0;
<a name="l00080"></a>00080   <span class="keywordflow">while</span> (i &lt; numMember1 &amp;&amp; j &lt; numMember2) {
<a name="l00081"></a>00081     <span class="keywordflow">if</span> (memberIDs1[i] == memberIDs2[j]) {
<a name="l00082"></a>00082       count++;
<a name="l00083"></a>00083       i++;
<a name="l00084"></a>00084       j++;
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (memberIDs1[i] &lt; memberIDs2[j])
<a name="l00087"></a>00087       i++;
<a name="l00088"></a>00088     <span class="keywordflow">else</span>
<a name="l00089"></a>00089       j++;
<a name="l00090"></a>00090   }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <span class="keywordflow">return</span> count;
<a name="l00093"></a>00093 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="24e6ce6d053864cf5fb7af941457bb0e"></a><!-- doxytag: member="tearCompare.c::main" ref="24e6ce6d053864cf5fb7af941457bb0e" args="(int argc, char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>argv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="tearCompare_8c-source.html#l00095">95</a> of file <a class="el" href="tearCompare_8c-source.html">tearCompare.c</a>.
<p>
References <a class="el" href="tearCompare_8c-source.html#l00070">doSubsetsIntersect()</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <a class="el" href="error_8h-source.html#l00080">fc_exitIfError</a>, <a class="el" href="error_8h-source.html#l00116">fc_exitIfErrorPrintf</a>, <a class="el" href="library_8c-source.html#l00220">fc_finalLibrary()</a>, <a class="el" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a395a6192ba586cd970dd36a49cd8862714">FC_LOG_MESSAGES</a>, <a class="el" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>, <a class="el" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a399cb0ad9c1f97775f8954860a08d78144">FC_QUIET</a>, <a class="el" href="library_8c-source.html#l00110">fc_setLibraryVerbosity()</a>, and <a class="el" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a3995521f4f1526a6565b08e663106dd6e7">FC_WARNING_MESSAGES</a>.<div class="fragment"><pre class="fragment"><a name="l00095"></a>00095                                 {
<a name="l00096"></a>00096   <a class="code" href="group__DataTypes.html#g2a816f8eddef0c2d8c2e3a0393b1f52e">FC_ReturnCode</a> rc;
<a name="l00097"></a>00097   <a class="code" href="group__DataTypes.html#g6c0891f21e34bad1d8b2bc7c76193a39">FC_VerbosityLevel</a> verbose_level = <a class="code" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a399cb0ad9c1f97775f8954860a08d78144">FC_QUIET</a>;
<a name="l00098"></a>00098   <span class="keywordtype">int</span> i, j, k, m, n;
<a name="l00099"></a>00099   <span class="keywordtype">char</span>* aux_filenames[2] = { NULL, NULL };
<a name="l00100"></a>00100   <span class="keywordtype">int</span> doSpecificTear = 0, tearID;
<a name="l00101"></a>00101   <span class="keywordtype">char</span>* tear_name = NULL;
<a name="l00102"></a>00102   xmlDocPtr xmlDocs[2];
<a name="l00103"></a>00103   <span class="keywordtype">int</span> numSubset[2], *maxNumMembers[2], *numMembers[2], **memberIDs[2];
<a name="l00104"></a>00104   <span class="keywordtype">char</span> **subsetNames[2], **meshNames[2];
<a name="l00105"></a>00105   <a class="code" href="group__DataTypes.html#g63044bd7bb5313d8a79ea8a71f1b3040">FC_AssociationType</a> *assocs[2];
<a name="l00106"></a>00106   <span class="keywordtype">int</span> numTear[2], *numSubsetPerTear[2];
<a name="l00107"></a>00107   <span class="keywordtype">char</span> **tearNames[2], ***subsetNamesPerTear[2];
<a name="l00108"></a>00108   <span class="keywordtype">double</span> *tearLengths[2];
<a name="l00109"></a>00109   <span class="keywordtype">int</span> **tearCorrespond, **tearToSubsetMap[2];
<a name="l00110"></a>00110   <span class="keywordtype">int</span> count;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112   <span class="comment">// --- handle arguments</span>
<a name="l00113"></a>00113 
<a name="l00114"></a>00114   <span class="keywordflow">if</span> (argc &lt; 3 ) {
<a name="l00115"></a>00115   usage:
<a name="l00116"></a>00116     printf(<span class="stringliteral">"usage: %s [options] auxFile1 auxFile2\n"</span>, 
<a name="l00117"></a>00117            argv[0]);
<a name="l00118"></a>00118     printf(<span class="stringliteral">"options: \n"</span>);
<a name="l00119"></a>00119     printf(<span class="stringliteral">"   -t \"tear name\"  : report results only for a specific tear from the 1st set\n"</span>);
<a name="l00120"></a>00120     printf(<span class="stringliteral">"                     of tears\n"</span>);
<a name="l00121"></a>00121     printf(<span class="stringliteral">"   -h              : print this help message\n"</span>);
<a name="l00122"></a>00122     printf(<span class="stringliteral">"   -v              : verbose: print warning and error messages\n"</span>);
<a name="l00123"></a>00123     printf(<span class="stringliteral">"   -V              : very verbose: prints log and error messages\n"</span>);
<a name="l00124"></a>00124     fflush(NULL);
<a name="l00125"></a>00125     exit(-1);
<a name="l00126"></a>00126   }
<a name="l00127"></a>00127   <span class="keywordflow">for</span> (i = 1; i &lt; argc; i++) {
<a name="l00128"></a>00128     <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">"-v"</span>)) {
<a name="l00129"></a>00129       verbose_level = <a class="code" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a3995521f4f1526a6565b08e663106dd6e7">FC_WARNING_MESSAGES</a>;
<a name="l00130"></a>00130     }
<a name="l00131"></a>00131     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">"-V"</span>)) {
<a name="l00132"></a>00132       verbose_level = <a class="code" href="group__DataTypes.html#gg6c0891f21e34bad1d8b2bc7c76193a395a6192ba586cd970dd36a49cd8862714">FC_LOG_MESSAGES</a>;
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(argv[i], <span class="stringliteral">"-h"</span>, 2))
<a name="l00135"></a>00135       <span class="keywordflow">goto</span> usage;
<a name="l00136"></a>00136     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">"-t"</span>)) {
<a name="l00137"></a>00137       doSpecificTear = 1;
<a name="l00138"></a>00138       i++;
<a name="l00139"></a>00139       tear_name = argv[i];
<a name="l00140"></a>00140     } 
<a name="l00141"></a>00141     <span class="keywordflow">else</span> {
<a name="l00142"></a>00142       <span class="keywordflow">if</span> (i+1 &gt; argc)
<a name="l00143"></a>00143      <span class="keywordflow">goto</span> usage;
<a name="l00144"></a>00144       aux_filenames[0] = argv[i];
<a name="l00145"></a>00145       aux_filenames[1] = argv[i+1];
<a name="l00146"></a>00146       i++;
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148   }
<a name="l00149"></a>00149 
<a name="l00150"></a>00150   <span class="comment">// testing args</span>
<a name="l00151"></a>00151   <span class="keywordflow">if</span> (!aux_filenames[0] || !aux_filenames[1])
<a name="l00152"></a>00152     <span class="keywordflow">goto</span> usage;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154   <span class="comment">// --- setup</span>
<a name="l00155"></a>00155 
<a name="l00156"></a>00156   <span class="comment">// set library verbosity (don't need to init library)</span>
<a name="l00157"></a>00157   rc = <a class="code" href="group__Library.html#gf13f047de6d44c9028d4944bc29867db">fc_setLibraryVerbosity</a>(verbose_level);
<a name="l00158"></a>00158   <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(rc);
<a name="l00159"></a>00159 
<a name="l00160"></a>00160   <span class="comment">// --- try to import the two files</span>
<a name="l00161"></a>00161   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {
<a name="l00162"></a>00162     rc = _fc_importAuxFileXMLDoc(aux_filenames[i], &amp;xmlDocs[i]);
<a name="l00163"></a>00163     <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(rc, <span class="stringliteral">"failed to import '%s'"</span>, aux_filenames[i]);
<a name="l00164"></a>00164   }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166   <span class="comment">// --- get the subsets &amp; tears &amp; specific tear, if requested</span>
<a name="l00167"></a>00167   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {
<a name="l00168"></a>00168     rc = _fc_getAuxFileSubsets(xmlDocs[i], &amp;numSubset[i], &amp;subsetNames[i],
<a name="l00169"></a>00169                       &amp;meshNames[i], &amp;assocs[i], &amp;maxNumMembers[i],
<a name="l00170"></a>00170                       &amp;numMembers[i], &amp;memberIDs[i]);
<a name="l00171"></a>00171     <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(rc);
<a name="l00172"></a>00172     rc = _fc_getAuxFileTears(xmlDocs[i], &amp;numTear[i], &amp;tearNames[i],
<a name="l00173"></a>00173                     &amp;numSubsetPerTear[i], &amp;subsetNamesPerTear[i],
<a name="l00174"></a>00174                     &amp;tearLengths[i]);
<a name="l00175"></a>00175     <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(rc);
<a name="l00176"></a>00176     <span class="keywordflow">if</span> (i == 0 &amp;&amp; doSpecificTear) {
<a name="l00177"></a>00177       tearID = -1;
<a name="l00178"></a>00178       <span class="keywordflow">for</span> (j = 0; j &lt; numTear[i]; j++) {
<a name="l00179"></a>00179      <span class="keywordflow">if</span> (!strcmp(tearNames[i][j], tear_name)) {
<a name="l00180"></a>00180        tearID = j;
<a name="l00181"></a>00181        <span class="keywordflow">break</span>;
<a name="l00182"></a>00182      }
<a name="l00183"></a>00183       }
<a name="l00184"></a>00184       <span class="keywordflow">if</span> (tearID == -1) 
<a name="l00185"></a>00185      <a class="code" href="error_8h.html#42c09317184affa18e70826cb35f3f04">fc_exitIfErrorPrintf</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52e51d318f8c97c8b094cf9820b51e4fa83">FC_ERROR</a>, <span class="stringliteral">"Could not find tear '%s' in file '%s'"</span>,
<a name="l00186"></a>00186                     tear_name, aux_filenames[i]);
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188   }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190   <span class="comment">// --- done with xmlDocs, free them</span>
<a name="l00191"></a>00191   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++)
<a name="l00192"></a>00192     xmlFreeDoc(xmlDocs[i]);
<a name="l00193"></a>00193 
<a name="l00194"></a>00194   <span class="comment">// Match up subsets to tears</span>
<a name="l00195"></a>00195   <span class="comment">// FIX? make more efficient?</span>
<a name="l00196"></a>00196   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {
<a name="l00197"></a>00197     tearToSubsetMap[i] = (<span class="keywordtype">int</span>**)malloc(numTear[i]*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*));
<a name="l00198"></a>00198     <span class="keywordflow">for</span> (j = 0; j &lt; numTear[i]; j++) {
<a name="l00199"></a>00199       tearToSubsetMap[i][j] = (<span class="keywordtype">int</span>*)malloc(numSubsetPerTear[i][j]*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00200"></a>00200       <span class="keywordflow">for</span> (k = 0; k &lt; numSubsetPerTear[i][j]; k++) {
<a name="l00201"></a>00201      <span class="keywordflow">for</span> (m = 0; m &lt; numSubset[i]; m++) {
<a name="l00202"></a>00202        <span class="keywordflow">if</span> (!strcmp(subsetNames[i][m], subsetNamesPerTear[i][j][k])) {
<a name="l00203"></a>00203          tearToSubsetMap[i][j][k] = m;
<a name="l00204"></a>00204          <span class="keywordflow">break</span>;
<a name="l00205"></a>00205        }
<a name="l00206"></a>00206      }
<a name="l00207"></a>00207       }
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209   }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211   <span class="comment">// Match subsets between tears</span>
<a name="l00212"></a>00212   <span class="comment">// FIX? make more efficient?</span>
<a name="l00213"></a>00213   <span class="comment">// FIX? assumes sorted int array</span>
<a name="l00214"></a>00214   tearCorrespond = (<span class="keywordtype">int</span>**)malloc(numTear[0]*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>*));
<a name="l00215"></a>00215   <span class="keywordflow">if</span> (!tearCorrespond)
<a name="l00216"></a>00216     <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(<a class="code" href="group__DataTypes.html#gg2a816f8eddef0c2d8c2e3a0393b1f52ee4bf428a2cdead5d4e3e3391a2cdab0d">FC_MEMORY_ERROR</a>);
<a name="l00217"></a>00217   <span class="keywordflow">for</span> (i = 0; i &lt; numTear[0]; i++) {
<a name="l00218"></a>00218     tearCorrespond[i] = (<span class="keywordtype">int</span>*)calloc(numTear[1], <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));
<a name="l00219"></a>00219     <span class="keywordflow">if</span> (!tearCorrespond[i])
<a name="l00220"></a>00220       <a class="code" href="group__ErrorHandling.html#g4a09c0024ecd45d5d63c8b9ec333a717">fc_exitIfError</a>(FC_MEMORY_ERROR);
<a name="l00221"></a>00221   }
<a name="l00222"></a>00222   <span class="keywordflow">for</span> (i = 0; i &lt; numTear[0]; i++) {
<a name="l00223"></a>00223     <span class="keywordflow">for</span> (j = 0; j &lt; numTear[1]; j++) {
<a name="l00224"></a>00224       <span class="keywordflow">for</span> (m = 0; m &lt; numSubsetPerTear[0][i]; m++) {
<a name="l00225"></a>00225      <span class="keywordflow">for</span> (n = 0; n &lt; numSubsetPerTear[1][j]; n++) {
<a name="l00226"></a>00226        <span class="keywordtype">int</span> subsetID0 = tearToSubsetMap[0][i][m];
<a name="l00227"></a>00227        <span class="keywordtype">int</span> subsetID1 = tearToSubsetMap[1][j][n];
<a name="l00228"></a>00228        tearCorrespond[i][j] = <a class="code" href="tearCompare_8c.html#0bce1d6db09bd678b3d6208ff6ddca11">doSubsetsIntersect</a>(meshNames[0][subsetID0],
<a name="l00229"></a>00229                  numMembers[0][subsetID0], memberIDs[0][subsetID0],
<a name="l00230"></a>00230                  meshNames[1][subsetID1], numMembers[1][subsetID1],
<a name="l00231"></a>00231                  memberIDs[1][subsetID1]);
<a name="l00232"></a>00232        <span class="keywordflow">if</span> (tearCorrespond[i][j] &gt; 0)
<a name="l00233"></a>00233          <span class="keywordflow">break</span>;
<a name="l00234"></a>00234      }
<a name="l00235"></a>00235      <span class="keywordflow">if</span> (tearCorrespond[i][j] &gt; 0)
<a name="l00236"></a>00236        <span class="keywordflow">break</span>;
<a name="l00237"></a>00237       }
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239   }
<a name="l00240"></a>00240 
<a name="l00241"></a>00241   <span class="comment">// --- report</span>
<a name="l00242"></a>00242   
<a name="l00243"></a>00243   <span class="comment">// header - the first dataset is the "known" tears that 2nd dataset tears</span>
<a name="l00244"></a>00244   <span class="comment">// are being matched to</span>
<a name="l00245"></a>00245   <span class="keywordflow">if</span> (doSpecificTear) 
<a name="l00246"></a>00246     printf(<span class="stringliteral">"Comparing specific tear\n"</span>);
<a name="l00247"></a>00247   <span class="keywordflow">else</span>
<a name="l00248"></a>00248     printf(<span class="stringliteral">"Comparing tears\n"</span>);
<a name="l00249"></a>00249   printf(<span class="stringliteral">"A = 1st set of tears: '%s'\n"</span>, aux_filenames[0]);
<a name="l00250"></a>00250   printf(<span class="stringliteral">"B = 2nd set of tears: '%s'\n"</span>, aux_filenames[1]);
<a name="l00251"></a>00251   printf(<span class="stringliteral">"A numTear = %d\n"</span>, numTear[0]);
<a name="l00252"></a>00252   printf(<span class="stringliteral">"B numTear = %d\n"</span>, numTear[1]);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254   <span class="comment">// do "known" tears from 1st set</span>
<a name="l00255"></a>00255   <span class="keywordflow">for</span> (i = 0; i &lt; numTear[0]; i++) {
<a name="l00256"></a>00256     <span class="keywordtype">double</span> totalTearLength = 0;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258     <span class="comment">// skip output if doing specific tear</span>
<a name="l00259"></a>00259     <span class="keywordflow">if</span> (doSpecificTear &amp;&amp; i != tearID)
<a name="l00260"></a>00260       <span class="keywordflow">continue</span>;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     count = 0;
<a name="l00263"></a>00263     <span class="keywordflow">for</span> (j = 0; j &lt; numTear[1]; j++) {
<a name="l00264"></a>00264       <span class="keywordflow">if</span> (tearCorrespond[i][j] &gt; 0) {
<a name="l00265"></a>00265      count++;
<a name="l00266"></a>00266      totalTearLength += tearLengths[1][j];
<a name="l00267"></a>00267       }
<a name="l00268"></a>00268     }
<a name="l00269"></a>00269     printf(<span class="stringliteral">"'%s' from A has %d corresponding tear(s) in B"</span>,
<a name="l00270"></a>00270         tearNames[0][i], count);
<a name="l00271"></a>00271     <span class="keywordflow">if</span> (count == 0)
<a name="l00272"></a>00272       printf(<span class="stringliteral">"\n"</span>);
<a name="l00273"></a>00273     <span class="keywordflow">else</span> {
<a name="l00274"></a>00274       printf(<span class="stringliteral">":\n"</span>);
<a name="l00275"></a>00275       <span class="keywordflow">for</span> (j = 0; j &lt; numTear[1]; j++) {
<a name="l00276"></a>00276      <span class="keywordflow">if</span> (tearCorrespond[i][j] &gt; 0) 
<a name="l00277"></a>00277        printf(<span class="stringliteral">"  '%s (numOverlap = %d, %.1f%%, %.1f%%)'\n"</span>, 
<a name="l00278"></a>00278            tearNames[1][j], tearCorrespond[i][j], 
<a name="l00279"></a>00279            ((<span class="keywordtype">double</span>)tearCorrespond[i][j])/numMembers[0][i]*100,
<a name="l00280"></a>00280            ((<span class="keywordtype">double</span>)tearCorrespond[i][j])/numMembers[1][j]*100);
<a name="l00281"></a>00281       }
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283     <span class="keywordflow">if</span> (doSpecificTear)
<a name="l00284"></a>00284       printf(<span class="stringliteral">"Total length of tears on B = %g\n"</span>, totalTearLength);
<a name="l00285"></a>00285   }
<a name="l00286"></a>00286   count = 0; <span class="comment">// count number that do correspond</span>
<a name="l00287"></a>00287   <span class="keywordflow">for</span> (j = 0; j &lt; numTear[1]; j++) {
<a name="l00288"></a>00288     <span class="keywordflow">for</span> (i = 0; i &lt; numTear[0]; i++) {
<a name="l00289"></a>00289       <span class="keywordflow">if</span> (tearCorrespond[i][j] &gt; 0) {
<a name="l00290"></a>00290      count++;
<a name="l00291"></a>00291      <span class="keywordflow">break</span>;
<a name="l00292"></a>00292       }
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294   }
<a name="l00295"></a>00295   <span class="comment">// do "leftover" tears from second set</span>
<a name="l00296"></a>00296   <span class="keywordflow">if</span> (!doSpecificTear) {
<a name="l00297"></a>00297     count = numTear[1] - count; <span class="comment">// calc number that do NOT correspond</span>
<a name="l00298"></a>00298     printf(<span class="stringliteral">"%d tear(s) from B do not correspond to tears in A"</span>, 
<a name="l00299"></a>00299         count);
<a name="l00300"></a>00300     <span class="keywordflow">if</span> (count == 0)
<a name="l00301"></a>00301     printf(<span class="stringliteral">"\n"</span>);
<a name="l00302"></a>00302     <span class="keywordflow">else</span> {
<a name="l00303"></a>00303       printf(<span class="stringliteral">":\n"</span>);
<a name="l00304"></a>00304       <span class="keywordflow">for</span> (j = 0; j &lt; numTear[1]; j++) {
<a name="l00305"></a>00305      count = 0;
<a name="l00306"></a>00306      <span class="keywordflow">for</span> (i = 0; i &lt; numTear[0]; i++)
<a name="l00307"></a>00307        <span class="keywordflow">if</span> (tearCorrespond[i][j] &gt; 0) 
<a name="l00308"></a>00308          count++;
<a name="l00309"></a>00309      <span class="keywordflow">if</span> (count == 0) {
<a name="l00310"></a>00310        printf(<span class="stringliteral">"  '%s'\n"</span>, tearNames[1][j]);
<a name="l00311"></a>00311      }
<a name="l00312"></a>00312       }
<a name="l00313"></a>00313     }
<a name="l00314"></a>00314   }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316   <span class="comment">// --- all done</span>
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <span class="comment">// cleanup</span>
<a name="l00319"></a>00319   <span class="keywordflow">for</span> (i = 0; i &lt; numTear[0]; i++)
<a name="l00320"></a>00320     free(tearCorrespond[i]);
<a name="l00321"></a>00321   free(tearCorrespond);
<a name="l00322"></a>00322   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {
<a name="l00323"></a>00323     <span class="keywordflow">for</span> (j = 0; j &lt; numTear[i]; j++)
<a name="l00324"></a>00324       free(tearToSubsetMap[i][j]);
<a name="l00325"></a>00325     free(tearToSubsetMap[i]);
<a name="l00326"></a>00326   }
<a name="l00327"></a>00327   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {
<a name="l00328"></a>00328     <span class="keywordflow">for</span> (j = 0; j &lt; numSubset[i]; j++) {
<a name="l00329"></a>00329       free(subsetNames[i][j]);
<a name="l00330"></a>00330       free(meshNames[i][j]);
<a name="l00331"></a>00331       free(memberIDs[i][j]);
<a name="l00332"></a>00332     }
<a name="l00333"></a>00333     free(subsetNames[i]);
<a name="l00334"></a>00334     free(meshNames[i]);
<a name="l00335"></a>00335     free(maxNumMembers[i]);
<a name="l00336"></a>00336     free(numMembers[i]);
<a name="l00337"></a>00337     free(memberIDs[i]);
<a name="l00338"></a>00338     free(assocs[i]);
<a name="l00339"></a>00339     <span class="keywordflow">for</span> (j = 0; j &lt; numTear[i]; j++) {
<a name="l00340"></a>00340       free(tearNames[i][j]);
<a name="l00341"></a>00341       <span class="keywordflow">for</span> (k = 0; k &lt; numSubsetPerTear[i][j]; k++)
<a name="l00342"></a>00342      free(subsetNamesPerTear[i][j][k]);
<a name="l00343"></a>00343       free(subsetNamesPerTear[i][j]);
<a name="l00344"></a>00344     }
<a name="l00345"></a>00345     free(tearNames[i]);
<a name="l00346"></a>00346     free(subsetNamesPerTear[i]);
<a name="l00347"></a>00347     free(numSubsetPerTear[i]);
<a name="l00348"></a>00348     free(tearLengths[i]);
<a name="l00349"></a>00349   }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <a class="code" href="group__Library.html#g68cec1422dde03b636cf039faafa7baa">fc_finalLibrary</a>();
<a name="l00352"></a>00352 
<a name="l00353"></a>00353   exit(0);
<a name="l00354"></a>00354 }
</pre></div>
<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Oct 31 11:10:00 2007 for FCLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
